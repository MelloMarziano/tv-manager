"use strict";(self.webpackChunktv_manager=self.webpackChunktv_manager||[]).push([[792],{1076:(en,at,W)=>{W.d(at,{Am:()=>Zn,Bd:()=>ut,FA:()=>Je,Fy:()=>gt,I9:()=>Bn,Im:()=>or,Ku:()=>vt,Ll:()=>Jt,T9:()=>me,Uj:()=>$e,XA:()=>qe,ZQ:()=>_t,bD:()=>Si,c1:()=>_r,cY:()=>Me,eX:()=>tt,g:()=>Ie,gR:()=>Sr,hp:()=>Br,jZ:()=>Ht,lT:()=>On,lV:()=>ui,mS:()=>dt,nr:()=>ir,p7:()=>Nn,sr:()=>er,tD:()=>Mn,u:()=>be,zW:()=>Ke,zw:()=>Ve});const pe=function(ie){const q=[];let re=0;for(let De=0;De<ie.length;De++){let Re=ie.charCodeAt(De);Re<128?q[re++]=Re:Re<2048?(q[re++]=Re>>6|192,q[re++]=63&Re|128):55296==(64512&Re)&&De+1<ie.length&&56320==(64512&ie.charCodeAt(De+1))?(Re=65536+((1023&Re)<<10)+(1023&ie.charCodeAt(++De)),q[re++]=Re>>18|240,q[re++]=Re>>12&63|128,q[re++]=Re>>6&63|128,q[re++]=63&Re|128):(q[re++]=Re>>12|224,q[re++]=Re>>6&63|128,q[re++]=63&Re|128)}return q},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,q){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const re=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let Re=0;Re<ie.length;Re+=3){const it=ie[Re],kt=Re+1<ie.length,Pn=kt?ie[Re+1]:0,Gt=Re+2<ie.length,$t=Gt?ie[Re+2]:0;let xi=(15&Pn)<<2|$t>>6,Qn=63&$t;Gt||(Qn=64,kt||(xi=64)),De.push(re[it>>2],re[(3&it)<<4|Pn>>4],re[xi],re[Qn])}return De.join("")},encodeString(ie,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(ie):this.encodeByteArray(pe(ie),q)},decodeString(ie,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(ie):function(ie){const q=[];let re=0,De=0;for(;re<ie.length;){const Re=ie[re++];if(Re<128)q[De++]=String.fromCharCode(Re);else if(Re>191&&Re<224){const it=ie[re++];q[De++]=String.fromCharCode((31&Re)<<6|63&it)}else if(Re>239&&Re<365){const Gt=((7&Re)<<18|(63&ie[re++])<<12|(63&ie[re++])<<6|63&ie[re++])-65536;q[De++]=String.fromCharCode(55296+(Gt>>10)),q[De++]=String.fromCharCode(56320+(1023&Gt))}else{const it=ie[re++],kt=ie[re++];q[De++]=String.fromCharCode((15&Re)<<12|(63&it)<<6|63&kt)}}return q.join("")}(this.decodeStringToByteArray(ie,q))},decodeStringToByteArray(ie,q){this.init_();const re=q?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let Re=0;Re<ie.length;){const it=re[ie.charAt(Re++)],Pn=Re<ie.length?re[ie.charAt(Re)]:0;++Re;const $t=Re<ie.length?re[ie.charAt(Re)]:64;++Re;const Xt=Re<ie.length?re[ie.charAt(Re)]:64;if(++Re,null==it||null==Pn||null==$t||null==Xt)throw new _e;De.push(it<<2|Pn>>4),64!==$t&&(De.push(Pn<<4&240|$t>>2),64!==Xt&&De.push($t<<6&192|Xt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $e=function(ie){return function(ie){const q=pe(ie);return Pe.encodeByteArray(q,!0)}(ie).replace(/\./g,"")},be=function(ie){try{return Pe.decodeString(ie,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Ve(ie,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return q}for(const re in q)!q.hasOwnProperty(re)||!mt(re)||(ie[re]=Ve(ie[re],q[re]));return ie}function mt(ie){return"__proto__"!==ie}function dt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Mt=()=>{try{return dt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ie=process.env.__FIREBASE_DEFAULTS__;return ie?JSON.parse(ie):void 0})()||(()=>{if(typeof document>"u")return;let ie;try{ie=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=ie&&be(ie[1]);return q&&JSON.parse(q)})()}catch(ie){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ie}`)}},me=()=>{var ie;return null===(ie=Mt())||void 0===ie?void 0:ie.config},qe=ie=>{var q;return null===(q=Mt())||void 0===q?void 0:q[`_${ie}`]};class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,re)=>{this.resolve=q,this.reject=re})}wrapCallback(q){return(re,De)=>{re?this.reject(re):this.resolve(De),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(re):q(re,De))}}}function gt(ie,q){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=q||"demo-project",Re=ie.iat||0,it=ie.sub||ie.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const kt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:Re,exp:Re+3600,auth_time:Re,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(kt)),""].join(".")}function _t(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function Jt(){var ie;const q=null===(ie=Mt())||void 0===ie?void 0:ie.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ut(){return typeof window<"u"||Nn()}function Nn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function _r(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function er(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function ui(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function On(){const ie=_t();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function ir(){return!Jt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){try{return"object"==typeof indexedDB}catch{return!1}}function tt(){return new Promise((ie,q)=>{try{let re=!0;const De="validate-browser-context-for-indexeddb-analytics-module",Re=self.indexedDB.open(De);Re.onsuccess=()=>{Re.result.close(),re||self.indexedDB.deleteDatabase(De),ie(!0)},Re.onupgradeneeded=()=>{re=!1},Re.onerror=()=>{var it;q((null===(it=Re.error)||void 0===it?void 0:it.message)||"")}}catch(re){q(re)}})}class Ie extends Error{constructor(q,re,De){super(re),this.code=q,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(q,re,De){this.service=q,this.serviceName=re,this.errors=De}create(q,...re){const De=re[0]||{},Re=`${this.service}/${q}`,it=this.errors[q],kt=it?function Vt(ie,q){return ie.replace(Rn,(re,De)=>{const Re=q[De];return null!=Re?String(Re):`<${De}?>`})}(it,De):"Error";return new Ie(Re,`${this.serviceName}: ${kt} (${Re}).`,De)}}const Rn=/\{\$([^}]+)}/g;function Sr(ie,q){return Object.prototype.hasOwnProperty.call(ie,q)}function or(ie){for(const q in ie)if(Object.prototype.hasOwnProperty.call(ie,q))return!1;return!0}function Si(ie,q){if(ie===q)return!0;const re=Object.keys(ie),De=Object.keys(q);for(const Re of re){if(!De.includes(Re))return!1;const it=ie[Re],kt=q[Re];if(pi(it)&&pi(kt)){if(!Si(it,kt))return!1}else if(it!==kt)return!1}for(const Re of De)if(!re.includes(Re))return!1;return!0}function pi(ie){return null!==ie&&"object"==typeof ie}function Zn(ie){const q=[];for(const[re,De]of Object.entries(ie))Array.isArray(De)?De.forEach(Re=>{q.push(encodeURIComponent(re)+"="+encodeURIComponent(Re))}):q.push(encodeURIComponent(re)+"="+encodeURIComponent(De));return q.length?"&"+q.join("&"):""}function Bn(ie){const q={};return ie.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[Re,it]=De.split("=");q[decodeURIComponent(Re)]=decodeURIComponent(it)}}),q}function Br(ie){const q=ie.indexOf("?");if(!q)return"";const re=ie.indexOf("#",q);return ie.substring(q,re>0?re:void 0)}function Mn(ie,q){const re=new Un(ie,q);return re.subscribe.bind(re)}class Un{constructor(q,re){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=re,this.task.then(()=>{q(this)}).catch(De=>{this.error(De)})}next(q){this.forEachObserver(re=>{re.next(q)})}error(q){this.forEachObserver(re=>{re.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,re,De){let Re;if(void 0===q&&void 0===re&&void 0===De)throw new Error("Missing Observer.");Re=function qs(ie,q){if("object"!=typeof ie||null===ie)return!1;for(const re of q)if(re in ie&&"function"==typeof ie[re])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:re,complete:De},void 0===Re.next&&(Re.next=rt),void 0===Re.error&&(Re.error=rt),void 0===Re.complete&&(Re.complete=rt);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Re.error(this.finalError):Re.complete()}catch{}}),this.observers.push(Re),it}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let re=0;re<this.observers.length;re++)this.sendOne(re,q)}sendOne(q,re){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{re(this.observers[q])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rt(){}function vt(ie){return ie&&ie._delegate?ie._delegate:ie}},3877:(en,at,W)=>{var d=W(345),fe=W(9253),Te=W(8515),pe=W(3383),ke=W(4341),Pe=W(9559),_e=W(7705);const Qe=[{path:"private",loadChildren:()=>W.e(970).then(W.bind(W,7970)).then(j=>j.PrivateModule)},{path:"",redirectTo:"private",pathMatch:"full"}];let $e=(()=>{class j{static{this.\u0275fac=function(P){return new(P||j)}}static{this.\u0275mod=_e.$C({type:j})}static{this.\u0275inj=_e.G2t({imports:[Pe.iI.forRoot(Qe),Pe.iI]})}}return j})(),be=(()=>{class j{constructor(){this.title="tv-manager"}static{this.\u0275fac=function(P){return new(P||j)}}static{this.\u0275cmp=_e.VBU({type:j,selectors:[["app-root"]],decls:1,vars:0,template:function(P,Q){1&P&&_e.nrm(0,"router-outlet")},dependencies:[Pe.n3]})}}return j})();const Ce_firebase={apiKey:"AIzaSyBwC4ZdMVSmEjWlI9qalrNgaMJCAjJOP9E",authDomain:"tv-menu-97213.firebaseapp.com",projectId:"tv-menu-97213",storageBucket:"tv-menu-97213.firebasestorage.app",messagingSenderId:"222980467261",appId:"1:222980467261:web:8b12cb8c3046db0cfed854",measurementId:"G-JM6PJ5GKGE"};var Ve=W(7673),mt=W(8455),dt=W(1985),St=W(274),It=W(5964),Nt=W(6354),Mt=W(980),an=W(5558),At=W(177);class me{}class qe{}class Me{constructor(g){this.normalizedNames=new Map,this.lazyUpdate=null,g?"string"==typeof g?this.lazyInit=()=>{this.headers=new Map,g.split("\n").forEach(w=>{const P=w.indexOf(":");if(P>0){const Q=w.slice(0,P),se=Q.toLowerCase(),ge=w.slice(P+1).trim();this.maybeSetNormalizedName(Q,se),this.headers.has(se)?this.headers.get(se).push(ge):this.headers.set(se,[ge])}})}:typeof Headers<"u"&&g instanceof Headers?(this.headers=new Map,g.forEach((w,P)=>{this.setHeaderEntries(P,w)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(g).forEach(([w,P])=>{this.setHeaderEntries(w,P)})}:this.headers=new Map}has(g){return this.init(),this.headers.has(g.toLowerCase())}get(g){this.init();const w=this.headers.get(g.toLowerCase());return w&&w.length>0?w[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(g){return this.init(),this.headers.get(g.toLowerCase())||null}append(g,w){return this.clone({name:g,value:w,op:"a"})}set(g,w){return this.clone({name:g,value:w,op:"s"})}delete(g,w){return this.clone({name:g,value:w,op:"d"})}maybeSetNormalizedName(g,w){this.normalizedNames.has(w)||this.normalizedNames.set(w,g)}init(){this.lazyInit&&(this.lazyInit instanceof Me?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(g=>this.applyUpdate(g)),this.lazyUpdate=null))}copyFrom(g){g.init(),Array.from(g.headers.keys()).forEach(w=>{this.headers.set(w,g.headers.get(w)),this.normalizedNames.set(w,g.normalizedNames.get(w))})}clone(g){const w=new Me;return w.lazyInit=this.lazyInit&&this.lazyInit instanceof Me?this.lazyInit:this,w.lazyUpdate=(this.lazyUpdate||[]).concat([g]),w}applyUpdate(g){const w=g.name.toLowerCase();switch(g.op){case"a":case"s":let P=g.value;if("string"==typeof P&&(P=[P]),0===P.length)return;this.maybeSetNormalizedName(g.name,w);const Q=("a"===g.op?this.headers.get(w):void 0)||[];Q.push(...P),this.headers.set(w,Q);break;case"d":const se=g.value;if(se){let ge=this.headers.get(w);if(!ge)return;ge=ge.filter(v=>-1===se.indexOf(v)),0===ge.length?(this.headers.delete(w),this.normalizedNames.delete(w)):this.headers.set(w,ge)}else this.headers.delete(w),this.normalizedNames.delete(w)}}setHeaderEntries(g,w){const P=(Array.isArray(w)?w:[w]).map(se=>se.toString()),Q=g.toLowerCase();this.headers.set(Q,P),this.maybeSetNormalizedName(g,Q)}forEach(g){this.init(),Array.from(this.normalizedNames.keys()).forEach(w=>g(this.normalizedNames.get(w),this.headers.get(w)))}}class _t{encodeKey(g){return Nn(g)}encodeValue(g){return Nn(g)}decodeKey(g){return decodeURIComponent(g)}decodeValue(g){return decodeURIComponent(g)}}const Jt=/%(\d[a-f0-9])/gi,ut={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Nn(j){return encodeURIComponent(j).replace(Jt,(g,w)=>ut[w]??g)}function _r(j){return`${j}`}class er{constructor(g={}){if(this.updates=null,this.cloneFrom=null,this.encoder=g.encoder||new _t,g.fromString){if(g.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ht(j,g){const w=new Map;return j.length>0&&j.replace(/^\?/,"").split("&").forEach(Q=>{const se=Q.indexOf("="),[ge,v]=-1==se?[g.decodeKey(Q),""]:[g.decodeKey(Q.slice(0,se)),g.decodeValue(Q.slice(se+1))],A=w.get(ge)||[];A.push(v),w.set(ge,A)}),w}(g.fromString,this.encoder)}else g.fromObject?(this.map=new Map,Object.keys(g.fromObject).forEach(w=>{const P=g.fromObject[w],Q=Array.isArray(P)?P.map(_r):[_r(P)];this.map.set(w,Q)})):this.map=null}has(g){return this.init(),this.map.has(g)}get(g){this.init();const w=this.map.get(g);return w?w[0]:null}getAll(g){return this.init(),this.map.get(g)||null}keys(){return this.init(),Array.from(this.map.keys())}append(g,w){return this.clone({param:g,value:w,op:"a"})}appendAll(g){const w=[];return Object.keys(g).forEach(P=>{const Q=g[P];Array.isArray(Q)?Q.forEach(se=>{w.push({param:P,value:se,op:"a"})}):w.push({param:P,value:Q,op:"a"})}),this.clone(w)}set(g,w){return this.clone({param:g,value:w,op:"s"})}delete(g,w){return this.clone({param:g,value:w,op:"d"})}toString(){return this.init(),this.keys().map(g=>{const w=this.encoder.encodeKey(g);return this.map.get(g).map(P=>w+"="+this.encoder.encodeValue(P)).join("&")}).filter(g=>""!==g).join("&")}clone(g){const w=new er({encoder:this.encoder});return w.cloneFrom=this.cloneFrom||this,w.updates=(this.updates||[]).concat(g),w}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(g=>this.map.set(g,this.cloneFrom.map.get(g))),this.updates.forEach(g=>{switch(g.op){case"a":case"s":const w=("a"===g.op?this.map.get(g.param):void 0)||[];w.push(_r(g.value)),this.map.set(g.param,w);break;case"d":if(void 0===g.value){this.map.delete(g.param);break}{let P=this.map.get(g.param)||[];const Q=P.indexOf(_r(g.value));-1!==Q&&P.splice(Q,1),P.length>0?this.map.set(g.param,P):this.map.delete(g.param)}}}),this.cloneFrom=this.updates=null)}}class Yr{constructor(){this.map=new Map}set(g,w){return this.map.set(g,w),this}get(g){return this.map.has(g)||this.map.set(g,g.defaultValue()),this.map.get(g)}delete(g){return this.map.delete(g),this}has(g){return this.map.has(g)}keys(){return this.map.keys()}}function Ln(j){return typeof ArrayBuffer<"u"&&j instanceof ArrayBuffer}function En(j){return typeof Blob<"u"&&j instanceof Blob}function ir(j){return typeof FormData<"u"&&j instanceof FormData}class tt{constructor(g,w,P,Q){let se;if(this.url=w,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=g.toUpperCase(),function On(j){switch(j){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Q?(this.body=void 0!==P?P:null,se=Q):se=P,se&&(this.reportProgress=!!se.reportProgress,this.withCredentials=!!se.withCredentials,se.responseType&&(this.responseType=se.responseType),se.headers&&(this.headers=se.headers),se.context&&(this.context=se.context),se.params&&(this.params=se.params)),this.headers||(this.headers=new Me),this.context||(this.context=new Yr),this.params){const ge=this.params.toString();if(0===ge.length)this.urlWithParams=w;else{const v=w.indexOf("?");this.urlWithParams=w+(-1===v?"?":v<w.length-1?"&":"")+ge}}else this.params=new er,this.urlWithParams=w}serializeBody(){return null===this.body?null:Ln(this.body)||En(this.body)||ir(this.body)||function Ke(j){return typeof URLSearchParams<"u"&&j instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof er?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ir(this.body)?null:En(this.body)?this.body.type||null:Ln(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof er?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(g={}){const w=g.method||this.method,P=g.url||this.url,Q=g.responseType||this.responseType,se=void 0!==g.body?g.body:this.body,ge=void 0!==g.withCredentials?g.withCredentials:this.withCredentials,v=void 0!==g.reportProgress?g.reportProgress:this.reportProgress;let A=g.headers||this.headers,I=g.params||this.params;const M=g.context??this.context;return void 0!==g.setHeaders&&(A=Object.keys(g.setHeaders).reduce((V,ee)=>V.set(ee,g.setHeaders[ee]),A)),g.setParams&&(I=Object.keys(g.setParams).reduce((V,ee)=>V.set(ee,g.setParams[ee]),I)),new tt(w,P,se,{params:I,headers:A,context:M,reportProgress:v,responseType:Q,withCredentials:ge})}}var ot=function(j){return j[j.Sent=0]="Sent",j[j.UploadProgress=1]="UploadProgress",j[j.ResponseHeader=2]="ResponseHeader",j[j.DownloadProgress=3]="DownloadProgress",j[j.Response=4]="Response",j[j.User=5]="User",j}(ot||{});class nt{constructor(g,w=200,P="OK"){this.headers=g.headers||new Me,this.status=void 0!==g.status?g.status:w,this.statusText=g.statusText||P,this.url=g.url||null,this.ok=this.status>=200&&this.status<300}}class Ie extends nt{constructor(g={}){super(g),this.type=ot.ResponseHeader}clone(g={}){return new Ie({headers:g.headers||this.headers,status:void 0!==g.status?g.status:this.status,statusText:g.statusText||this.statusText,url:g.url||this.url||void 0})}}class Je extends nt{constructor(g={}){super(g),this.type=ot.Response,this.body=void 0!==g.body?g.body:null}clone(g={}){return new Je({body:void 0!==g.body?g.body:this.body,headers:g.headers||this.headers,status:void 0!==g.status?g.status:this.status,statusText:g.statusText||this.statusText,url:g.url||this.url||void 0})}}class Vt extends nt{constructor(g){super(g,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${g.url||"(unknown url)"}`:`Http failure response for ${g.url||"(unknown url)"}: ${g.status} ${g.statusText}`,this.error=g.error||null}}function Rn(j,g){return{body:g,headers:j.headers,context:j.context,observe:j.observe,params:j.params,reportProgress:j.reportProgress,responseType:j.responseType,withCredentials:j.withCredentials}}let dn=(()=>{class j{constructor(w){this.handler=w}request(w,P,Q={}){let se;if(w instanceof tt)se=w;else{let A,I;A=Q.headers instanceof Me?Q.headers:new Me(Q.headers),Q.params&&(I=Q.params instanceof er?Q.params:new er({fromObject:Q.params})),se=new tt(w,P,void 0!==Q.body?Q.body:null,{headers:A,context:Q.context,params:I,reportProgress:Q.reportProgress,responseType:Q.responseType||"json",withCredentials:Q.withCredentials})}const ge=(0,Ve.of)(se).pipe((0,St.H)(A=>this.handler.handle(A)));if(w instanceof tt||"events"===Q.observe)return ge;const v=ge.pipe((0,It.p)(A=>A instanceof Je));switch(Q.observe||"body"){case"body":switch(se.responseType){case"arraybuffer":return v.pipe((0,Nt.T)(A=>{if(null!==A.body&&!(A.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return A.body}));case"blob":return v.pipe((0,Nt.T)(A=>{if(null!==A.body&&!(A.body instanceof Blob))throw new Error("Response is not a Blob.");return A.body}));case"text":return v.pipe((0,Nt.T)(A=>{if(null!==A.body&&"string"!=typeof A.body)throw new Error("Response is not a string.");return A.body}));default:return v.pipe((0,Nt.T)(A=>A.body))}case"response":return v;default:throw new Error(`Unreachable: unhandled observe type ${Q.observe}}`)}}delete(w,P={}){return this.request("DELETE",w,P)}get(w,P={}){return this.request("GET",w,P)}head(w,P={}){return this.request("HEAD",w,P)}jsonp(w,P){return this.request("JSONP",w,{params:(new er).append(P,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(w,P={}){return this.request("OPTIONS",w,P)}patch(w,P,Q={}){return this.request("PATCH",w,Rn(Q,P))}post(w,P,Q={}){return this.request("POST",w,Rn(Q,P))}put(w,P,Q={}){return this.request("PUT",w,Rn(Q,P))}static{this.\u0275fac=function(P){return new(P||j)(_e.KVO(me))}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})();function Or(j,g){return g(j)}function or(j,g){return(w,P)=>g.intercept(w,{handle:Q=>j(Q,P)})}const Si=new _e.nKC(""),pi=new _e.nKC(""),Cn=new _e.nKC("");function Zn(){let j=null;return(g,w)=>{null===j&&(j=((0,_e.WQX)(Si,{optional:!0})??[]).reduceRight(or,Or));const P=(0,_e.WQX)(_e.$K3),Q=P.add();return j(g,w).pipe((0,Mt.j)(()=>P.remove(Q)))}}let Bn=(()=>{class j extends me{constructor(w,P){super(),this.backend=w,this.injector=P,this.chain=null,this.pendingTasks=(0,_e.WQX)(_e.$K3)}handle(w){if(null===this.chain){const Q=Array.from(new Set([...this.injector.get(pi),...this.injector.get(Cn,[])]));this.chain=Q.reduceRight((se,ge)=>function ri(j,g,w){return(P,Q)=>w.runInContext(()=>g(P,se=>j(se,Q)))}(se,ge,this.injector),Or)}const P=this.pendingTasks.add();return this.chain(w,Q=>this.backend.handle(Q)).pipe((0,Mt.j)(()=>this.pendingTasks.remove(P)))}static{this.\u0275fac=function(P){return new(P||j)(_e.KVO(qe),_e.KVO(_e.uvJ))}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})();const Zt=/^\)\]\}',?\n/;let Lt=(()=>{class j{constructor(w){this.xhrFactory=w}handle(w){if("JSONP"===w.method)throw new _e.wOt(-2800,!1);const P=this.xhrFactory;return(P.\u0275loadImpl?(0,mt.H)(P.\u0275loadImpl()):(0,Ve.of)(null)).pipe((0,an.n)(()=>new dt.c(se=>{const ge=P.build();if(ge.open(w.method,w.urlWithParams),w.withCredentials&&(ge.withCredentials=!0),w.headers.forEach((Ne,Pt)=>ge.setRequestHeader(Ne,Pt.join(","))),w.headers.has("Accept")||ge.setRequestHeader("Accept","application/json, text/plain, */*"),!w.headers.has("Content-Type")){const Ne=w.detectContentTypeHeader();null!==Ne&&ge.setRequestHeader("Content-Type",Ne)}if(w.responseType){const Ne=w.responseType.toLowerCase();ge.responseType="json"!==Ne?Ne:"text"}const v=w.serializeBody();let A=null;const I=()=>{if(null!==A)return A;const Ne=ge.statusText||"OK",Pt=new Me(ge.getAllResponseHeaders()),ln=function ds(j){return"responseURL"in j&&j.responseURL?j.responseURL:/^X-Request-URL:/m.test(j.getAllResponseHeaders())?j.getResponseHeader("X-Request-URL"):null}(ge)||w.url;return A=new Ie({headers:Pt,status:ge.status,statusText:Ne,url:ln}),A},M=()=>{let{headers:Ne,status:Pt,statusText:ln,url:nr}=I(),yn=null;204!==Pt&&(yn=typeof ge.response>"u"?ge.responseText:ge.response),0===Pt&&(Pt=yn?200:0);let ti=Pt>=200&&Pt<300;if("json"===w.responseType&&"string"==typeof yn){const lo=yn;yn=yn.replace(Zt,"");try{yn=""!==yn?JSON.parse(yn):null}catch(ps){yn=lo,ti&&(ti=!1,yn={error:ps,text:yn})}}ti?(se.next(new Je({body:yn,headers:Ne,status:Pt,statusText:ln,url:nr||void 0})),se.complete()):se.error(new Vt({error:yn,headers:Ne,status:Pt,statusText:ln,url:nr||void 0}))},V=Ne=>{const{url:Pt}=I(),ln=new Vt({error:Ne,status:ge.status||0,statusText:ge.statusText||"Unknown Error",url:Pt||void 0});se.error(ln)};let ee=!1;const he=Ne=>{ee||(se.next(I()),ee=!0);let Pt={type:ot.DownloadProgress,loaded:Ne.loaded};Ne.lengthComputable&&(Pt.total=Ne.total),"text"===w.responseType&&ge.responseText&&(Pt.partialText=ge.responseText),se.next(Pt)},Ue=Ne=>{let Pt={type:ot.UploadProgress,loaded:Ne.loaded};Ne.lengthComputable&&(Pt.total=Ne.total),se.next(Pt)};return ge.addEventListener("load",M),ge.addEventListener("error",V),ge.addEventListener("timeout",V),ge.addEventListener("abort",V),w.reportProgress&&(ge.addEventListener("progress",he),null!==v&&ge.upload&&ge.upload.addEventListener("progress",Ue)),ge.send(v),se.next({type:ot.Sent}),()=>{ge.removeEventListener("error",V),ge.removeEventListener("abort",V),ge.removeEventListener("load",M),ge.removeEventListener("timeout",V),w.reportProgress&&(ge.removeEventListener("progress",he),null!==v&&ge.upload&&ge.upload.removeEventListener("progress",Ue)),ge.readyState!==ge.DONE&&ge.abort()}})))}static{this.\u0275fac=function(P){return new(P||j)(_e.KVO(At.N0))}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})();const lt=new _e.nKC("XSRF_ENABLED"),Rr=new _e.nKC("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Fi=new _e.nKC("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ss{}let hs=(()=>{class j{constructor(w,P,Q){this.doc=w,this.platform=P,this.cookieName=Q,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const w=this.doc.cookie||"";return w!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,At._b)(w,this.cookieName),this.lastCookieString=w),this.lastToken}static{this.\u0275fac=function(P){return new(P||j)(_e.KVO(At.qQ),_e.KVO(_e.Agw),_e.KVO(Rr))}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})();function Us(j,g){const w=j.url.toLowerCase();if(!(0,_e.WQX)(lt)||"GET"===j.method||"HEAD"===j.method||w.startsWith("http://")||w.startsWith("https://"))return g(j);const P=(0,_e.WQX)(ss).getToken(),Q=(0,_e.WQX)(Fi);return null!=P&&!j.headers.has(Q)&&(j=j.clone({headers:j.headers.set(Q,P)})),g(j)}var ie=function(j){return j[j.Interceptors=0]="Interceptors",j[j.LegacyInterceptors=1]="LegacyInterceptors",j[j.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",j[j.NoXsrfProtection=3]="NoXsrfProtection",j[j.JsonpSupport=4]="JsonpSupport",j[j.RequestsMadeViaParent=5]="RequestsMadeViaParent",j[j.Fetch=6]="Fetch",j}(ie||{});function q(j,g){return{\u0275kind:j,\u0275providers:g}}function re(...j){const g=[dn,Lt,Bn,{provide:me,useExisting:Bn},{provide:qe,useExisting:Lt},{provide:pi,useValue:Us,multi:!0},{provide:lt,useValue:!0},{provide:ss,useClass:hs}];for(const w of j)g.push(...w.\u0275providers);return(0,_e.EmA)(g)}const Re=new _e.nKC("LEGACY_INTERCEPTOR_FN");let xi=(()=>{class j{static{this.\u0275fac=function(P){return new(P||j)}}static{this.\u0275mod=_e.$C({type:j})}static{this.\u0275inj=_e.G2t({providers:[re(q(ie.LegacyInterceptors,[{provide:Re,useFactory:Zn},{provide:pi,useExisting:Re,multi:!0}]))]})}}return j})();var Xe=W(9969);function wt(j){return new _e.wOt(3e3,!1)}function Wr(j){switch(j.length){case 0:return new Xe.sf;case 1:return j[0];default:return new Xe.ui(j)}}function Xs(j,g,w=new Map,P=new Map){const Q=[],se=[];let ge=-1,v=null;if(g.forEach(A=>{const I=A.get("offset"),M=I==ge,V=M&&v||new Map;A.forEach((ee,he)=>{let Ue=he,Ne=ee;if("offset"!==he)switch(Ue=j.normalizePropertyName(Ue,Q),Ne){case Xe.FX:Ne=w.get(he);break;case Xe.kp:Ne=P.get(he);break;default:Ne=j.normalizeStyleValue(he,Ue,Ne,Q)}V.set(Ue,Ne)}),M||se.push(V),v=V,ge=I}),Q.length)throw function si(j){return new _e.wOt(3502,!1)}();return se}function Mi(j,g,w,P){switch(g){case"start":j.onStart(()=>P(w&&es(w,"start",j)));break;case"done":j.onDone(()=>P(w&&es(w,"done",j)));break;case"destroy":j.onDestroy(()=>P(w&&es(w,"destroy",j)))}}function es(j,g,w){const se=Ps(j.element,j.triggerName,j.fromState,j.toState,g||j.phaseName,w.totalTime??j.totalTime,!!w.disabled),ge=j._data;return null!=ge&&(se._data=ge),se}function Ps(j,g,w,P,Q="",se=0,ge){return{element:j,triggerName:g,fromState:w,toState:P,phaseName:Q,totalTime:se,disabled:!!ge}}function Ii(j,g,w){let P=j.get(g);return P||j.set(g,P=w),P}function Hs(j){const g=j.indexOf(":");return[j.substring(1,g),j.slice(g+1)]}const so=(()=>typeof document>"u"?null:document.documentElement)();function vr(j){const g=j.parentNode||j.host||null;return g===so?null:g}let In=null,gr=!1;function mo(j,g){for(;g;){if(g===j)return!0;g=vr(g)}return!1}function kr(j,g,w){if(w)return Array.from(j.querySelectorAll(g));const P=j.querySelector(g);return P?[P]:[]}let os=(()=>{class j{validateStyleProperty(w){return function _i(j){In||(In=function Zr(){return typeof document<"u"?document.body:null}()||{},gr=!!In.style&&"WebkitAppearance"in In.style);let g=!0;return In.style&&!function Qt(j){return"ebkit"==j.substring(1,6)}(j)&&(g=j in In.style,!g&&gr&&(g="Webkit"+j.charAt(0).toUpperCase()+j.slice(1)in In.style)),g}(w)}matchesElement(w,P){return!1}containsElement(w,P){return mo(w,P)}getParentElement(w){return vr(w)}query(w,P,Q){return kr(w,P,Q)}computeStyle(w,P,Q){return Q||""}animate(w,P,Q,se,ge,v=[],A){return new Xe.sf(Q,se)}static{this.\u0275fac=function(P){return new(P||j)}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})(),wn=(()=>{class j{static{this.NOOP=new os}}return j})();const fs=1e3,Fr="ng-enter",Jr="ng-leave",Gn="ng-trigger",Bi=".ng-trigger",Wi="ng-animating",Gi=".ng-animating";function Pi(j){if("number"==typeof j)return j;const g=j.match(/^(-?[\.\d]+)(m?s)/);return!g||g.length<2?0:ts(parseFloat(g[1]),g[2])}function ts(j,g){return"s"===g?j*fs:j}function br(j,g,w){return j.hasOwnProperty("duration")?j:function Ys(j,g,w){let Q,se=0,ge="";if("string"==typeof j){const v=j.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===v)return g.push(wt()),{duration:0,delay:0,easing:""};Q=ts(parseFloat(v[1]),v[2]);const A=v[3];null!=A&&(se=ts(parseFloat(A),v[4]));const I=v[5];I&&(ge=I)}else Q=j;if(!w){let v=!1,A=g.length;Q<0&&(g.push(function jt(){return new _e.wOt(3100,!1)}()),v=!0),se<0&&(g.push(function _n(){return new _e.wOt(3101,!1)}()),v=!0),v&&g.splice(A,0,wt())}return{duration:Q,delay:se,easing:ge}}(j,g,w)}function Fn(j,g={}){return Object.keys(j).forEach(w=>{g[w]=j[w]}),g}function Vr(j){const g=new Map;return Object.keys(j).forEach(w=>{g.set(w,j[w])}),g}function yi(j,g=new Map,w){if(w)for(let[P,Q]of w)g.set(P,Q);for(let[P,Q]of j)g.set(P,Q);return g}function oi(j,g,w){g.forEach((P,Q)=>{const se=zs(Q);w&&!w.has(Q)&&w.set(Q,j.style[se]),j.style[se]=P})}function $s(j,g){g.forEach((w,P)=>{const Q=zs(P);j.style[Q]=""})}function Oi(j){return Array.isArray(j)?1==j.length?j[0]:(0,Xe.K2)(j):j}const Os=new RegExp("{{\\s*(.+?)\\s*}}","g");function Mr(j){let g=[];if("string"==typeof j){let w;for(;w=Os.exec(j);)g.push(w[1]);Os.lastIndex=0}return g}function Pr(j,g,w){const P=j.toString(),Q=P.replace(Os,(se,ge)=>{let v=g[ge];return null==v&&(w.push(function $n(j){return new _e.wOt(3003,!1)}()),v=""),v.toString()});return Q==P?j:Q}function vs(j){const g=[];let w=j.next();for(;!w.done;)g.push(w.value),w=j.next();return g}const vi=/-+([a-z0-9])/g;function zs(j){return j.replace(vi,(...g)=>g[1].toUpperCase())}function bi(j,g,w){switch(g.type){case 7:return j.visitTrigger(g,w);case 0:return j.visitState(g,w);case 1:return j.visitTransition(g,w);case 2:return j.visitSequence(g,w);case 3:return j.visitGroup(g,w);case 4:return j.visitAnimate(g,w);case 5:return j.visitKeyframes(g,w);case 6:return j.visitStyle(g,w);case 8:return j.visitReference(g,w);case 9:return j.visitAnimateChild(g,w);case 10:return j.visitAnimateRef(g,w);case 11:return j.visitQuery(g,w);case 12:return j.visitStagger(g,w);default:throw function hr(j){return new _e.wOt(3004,!1)}()}}function go(j,g){return window.getComputedStyle(j)[g]}const je="*";function yt(j,g){const w=[];return"string"==typeof j?j.split(/\s*,\s*/).forEach(P=>function L(j,g,w){if(":"==j[0]){const A=function z(j,g){switch(j){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(w,P)=>parseFloat(P)>parseFloat(w);case":decrement":return(w,P)=>parseFloat(P)<parseFloat(w);default:return g.push(function gi(j){return new _e.wOt(3016,!1)}()),"* => *"}}(j,w);if("function"==typeof A)return void g.push(A);j=A}const P=j.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==P||P.length<4)return w.push(function fo(j){return new _e.wOt(3015,!1)}()),g;const Q=P[1],se=P[2],ge=P[3];g.push(we(Q,ge));"<"==se[0]&&!(Q==je&&ge==je)&&g.push(we(ge,Q))}(P,w,g)):w.push(j),w}const N=new Set(["true","1"]),ne=new Set(["false","0"]);function we(j,g){const w=N.has(j)||ne.has(j),P=N.has(g)||ne.has(g);return(Q,se)=>{let ge=j==je||j==Q,v=g==je||g==se;return!ge&&w&&"boolean"==typeof Q&&(ge=Q?N.has(j):ne.has(j)),!v&&P&&"boolean"==typeof se&&(v=se?N.has(g):ne.has(g)),ge&&v}}const sn=new RegExp("s*:selfs*,?","g");function hn(j,g,w,P){return new ei(j).build(g,w,P)}class ei{constructor(g){this._driver=g}build(g,w,P){const Q=new Ni(w);return this._resetContextStyleTimingState(Q),bi(this,Oi(g),Q)}_resetContextStyleTimingState(g){g.currentQuerySelector="",g.collectedStyles=new Map,g.collectedStyles.set("",new Map),g.currentTime=0}visitTrigger(g,w){let P=w.queryCount=0,Q=w.depCount=0;const se=[],ge=[];return"@"==g.name.charAt(0)&&w.errors.push(function ze(){return new _e.wOt(3006,!1)}()),g.definitions.forEach(v=>{if(this._resetContextStyleTimingState(w),0==v.type){const A=v,I=A.name;I.toString().split(/\s*,\s*/).forEach(M=>{A.name=M,se.push(this.visitState(A,w))}),A.name=I}else if(1==v.type){const A=this.visitTransition(v,w);P+=A.queryCount,Q+=A.depCount,ge.push(A)}else w.errors.push(function Xn(){return new _e.wOt(3007,!1)}())}),{type:7,name:g.name,states:se,transitions:ge,queryCount:P,depCount:Q,options:null}}visitState(g,w){const P=this.visitStyle(g.styles,w),Q=g.options&&g.options.params||null;if(P.containsDynamicStyles){const se=new Set,ge=Q||{};P.styles.forEach(v=>{v instanceof Map&&v.forEach(A=>{Mr(A).forEach(I=>{ge.hasOwnProperty(I)||se.add(I)})})}),se.size&&(vs(se.values()),w.errors.push(function di(j,g){return new _e.wOt(3008,!1)}()))}return{type:0,name:g.name,style:P,options:Q?{params:Q}:null}}visitTransition(g,w){w.queryCount=0,w.depCount=0;const P=bi(this,Oi(g.animation),w);return{type:1,matchers:yt(g.expr,w.errors),animation:P,queryCount:w.queryCount,depCount:w.depCount,options:fn(g.options)}}visitSequence(g,w){return{type:2,steps:g.steps.map(P=>bi(this,P,w)),options:fn(g.options)}}visitGroup(g,w){const P=w.currentTime;let Q=0;const se=g.steps.map(ge=>{w.currentTime=P;const v=bi(this,ge,w);return Q=Math.max(Q,w.currentTime),v});return w.currentTime=Q,{type:3,steps:se,options:fn(g.options)}}visitAnimate(g,w){const P=function kn(j,g){if(j.hasOwnProperty("duration"))return j;if("number"==typeof j)return Xi(br(j,g).duration,0,"");const w=j;if(w.split(/\s+/).some(se=>"{"==se.charAt(0)&&"{"==se.charAt(1))){const se=Xi(0,0,"");return se.dynamic=!0,se.strValue=w,se}const Q=br(w,g);return Xi(Q.duration,Q.delay,Q.easing)}(g.timings,w.errors);w.currentAnimateTimings=P;let Q,se=g.styles?g.styles:(0,Xe.iF)({});if(5==se.type)Q=this.visitKeyframes(se,w);else{let ge=g.styles,v=!1;if(!ge){v=!0;const I={};P.easing&&(I.easing=P.easing),ge=(0,Xe.iF)(I)}w.currentTime+=P.duration+P.delay;const A=this.visitStyle(ge,w);A.isEmptyStep=v,Q=A}return w.currentAnimateTimings=null,{type:4,timings:P,style:Q,options:null}}visitStyle(g,w){const P=this._makeStyleAst(g,w);return this._validateStyleAst(P,w),P}_makeStyleAst(g,w){const P=[],Q=Array.isArray(g.styles)?g.styles:[g.styles];for(let v of Q)"string"==typeof v?v===Xe.kp?P.push(v):w.errors.push(new _e.wOt(3002,!1)):P.push(Vr(v));let se=!1,ge=null;return P.forEach(v=>{if(v instanceof Map&&(v.has("easing")&&(ge=v.get("easing"),v.delete("easing")),!se))for(let A of v.values())if(A.toString().indexOf("{{")>=0){se=!0;break}}),{type:6,styles:P,easing:ge,offset:g.offset,containsDynamicStyles:se,options:null}}_validateStyleAst(g,w){const P=w.currentAnimateTimings;let Q=w.currentTime,se=w.currentTime;P&&se>0&&(se-=P.duration+P.delay),g.styles.forEach(ge=>{"string"!=typeof ge&&ge.forEach((v,A)=>{const I=w.collectedStyles.get(w.currentQuerySelector),M=I.get(A);let V=!0;M&&(se!=Q&&se>=M.startTime&&Q<=M.endTime&&(w.errors.push(function gs(j,g,w,P,Q){return new _e.wOt(3010,!1)}()),V=!1),se=M.startTime),V&&I.set(A,{startTime:se,endTime:Q}),w.options&&function Cr(j,g,w){const P=g.params||{},Q=Mr(j);Q.length&&Q.forEach(se=>{P.hasOwnProperty(se)||w.push(function Kn(j){return new _e.wOt(3001,!1)}())})}(v,w.options,w.errors)})})}visitKeyframes(g,w){const P={type:5,styles:[],options:null};if(!w.currentAnimateTimings)return w.errors.push(function Kr(){return new _e.wOt(3011,!1)}()),P;let se=0;const ge=[];let v=!1,A=!1,I=0;const M=g.steps.map(ln=>{const nr=this._makeStyleAst(ln,w);let yn=null!=nr.offset?nr.offset:function hi(j){if("string"==typeof j)return null;let g=null;if(Array.isArray(j))j.forEach(w=>{if(w instanceof Map&&w.has("offset")){const P=w;g=parseFloat(P.get("offset")),P.delete("offset")}});else if(j instanceof Map&&j.has("offset")){const w=j;g=parseFloat(w.get("offset")),w.delete("offset")}return g}(nr.styles),ti=0;return null!=yn&&(se++,ti=nr.offset=yn),A=A||ti<0||ti>1,v=v||ti<I,I=ti,ge.push(ti),nr});A&&w.errors.push(function no(){return new _e.wOt(3012,!1)}()),v&&w.errors.push(function ii(){return new _e.wOt(3200,!1)}());const V=g.steps.length;let ee=0;se>0&&se<V?w.errors.push(function Ms(){return new _e.wOt(3202,!1)}()):0==se&&(ee=1/(V-1));const he=V-1,Ue=w.currentTime,Ne=w.currentAnimateTimings,Pt=Ne.duration;return M.forEach((ln,nr)=>{const yn=ee>0?nr==he?1:ee*nr:ge[nr],ti=yn*Pt;w.currentTime=Ue+Ne.delay+ti,Ne.duration=ti,this._validateStyleAst(ln,w),ln.offset=yn,P.styles.push(ln)}),P}visitReference(g,w){return{type:8,animation:bi(this,Oi(g.animation),w),options:fn(g.options)}}visitAnimateChild(g,w){return w.depCount++,{type:9,options:fn(g.options)}}visitAnimateRef(g,w){return{type:10,animation:this.visitReference(g.animation,w),options:fn(g.options)}}visitQuery(g,w){const P=w.currentQuerySelector,Q=g.options||{};w.queryCount++,w.currentQuery=g;const[se,ge]=function qr(j){const g=!!j.split(/\s*,\s*/).find(w=>":self"==w);return g&&(j=j.replace(sn,"")),j=j.replace(/@\*/g,Bi).replace(/@\w+/g,w=>Bi+"-"+w.slice(1)).replace(/:animating/g,Gi),[j,g]}(g.selector);w.currentQuerySelector=P.length?P+" "+se:se,Ii(w.collectedStyles,w.currentQuerySelector,new Map);const v=bi(this,Oi(g.animation),w);return w.currentQuery=null,w.currentQuerySelector=P,{type:11,selector:se,limit:Q.limit||0,optional:!!Q.optional,includeSelf:ge,animation:v,originalSelector:g.selector,options:fn(g.options)}}visitStagger(g,w){w.currentQuery||w.errors.push(function To(){return new _e.wOt(3013,!1)}());const P="full"===g.timings?{duration:0,delay:0,easing:"full"}:br(g.timings,w.errors,!0);return{type:12,animation:bi(this,Oi(g.animation),w),timings:P,options:null}}}class Ni{constructor(g){this.errors=g,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function fn(j){return j?(j=Fn(j)).params&&(j.params=function ai(j){return j?Fn(j):null}(j.params)):j={},j}function Xi(j,g,w){return{duration:j,delay:g,easing:w}}function ki(j,g,w,P,Q,se,ge=null,v=!1){return{type:1,element:j,keyframes:g,preStyleProps:w,postStyleProps:P,duration:Q,delay:se,totalTime:Q+se,easing:ge,subTimeline:v}}class Es{constructor(){this._map=new Map}get(g){return this._map.get(g)||[]}append(g,w){let P=this._map.get(g);P||this._map.set(g,P=[]),P.push(...w)}has(g){return this._map.has(g)}clear(){this._map.clear()}}const Yo=new RegExp(":enter","g"),Bo=new RegExp(":leave","g");function ca(j,g,w,P,Q,se=new Map,ge=new Map,v,A,I=[]){return(new Xa).buildKeyframes(j,g,w,P,Q,se,ge,v,A,I)}class Xa{buildKeyframes(g,w,P,Q,se,ge,v,A,I,M=[]){I=I||new Es;const V=new la(g,w,I,Q,se,M,[]);V.options=A;const ee=A.delay?Pi(A.delay):0;V.currentTimeline.delayNextStep(ee),V.currentTimeline.setStyles([ge],null,V.errors,A),bi(this,P,V);const he=V.timelines.filter(Ue=>Ue.containsAnimation());if(he.length&&v.size){let Ue;for(let Ne=he.length-1;Ne>=0;Ne--){const Pt=he[Ne];if(Pt.element===w){Ue=Pt;break}}Ue&&!Ue.allowOnlyTimelineStyles()&&Ue.setStyles([v],null,V.errors,A)}return he.length?he.map(Ue=>Ue.buildKeyframes()):[ki(w,[],[],[],0,ee,"",!1)]}visitTrigger(g,w){}visitState(g,w){}visitTransition(g,w){}visitAnimateChild(g,w){const P=w.subInstructions.get(w.element);if(P){const Q=w.createSubContext(g.options),se=w.currentTimeline.currentTime,ge=this._visitSubInstructions(P,Q,Q.options);se!=ge&&w.transformIntoNewTimeline(ge)}w.previousNode=g}visitAnimateRef(g,w){const P=w.createSubContext(g.options);P.transformIntoNewTimeline(),this._applyAnimationRefDelays([g.options,g.animation.options],w,P),this.visitReference(g.animation,P),w.transformIntoNewTimeline(P.currentTimeline.currentTime),w.previousNode=g}_applyAnimationRefDelays(g,w,P){for(const Q of g){const se=Q?.delay;if(se){const ge="number"==typeof se?se:Pi(Pr(se,Q?.params??{},w.errors));P.delayNextStep(ge)}}}_visitSubInstructions(g,w,P){let se=w.currentTimeline.currentTime;const ge=null!=P.duration?Pi(P.duration):null,v=null!=P.delay?Pi(P.delay):null;return 0!==ge&&g.forEach(A=>{const I=w.appendInstructionToTimeline(A,ge,v);se=Math.max(se,I.duration+I.delay)}),se}visitReference(g,w){w.updateOptions(g.options,!0),bi(this,g.animation,w),w.previousNode=g}visitSequence(g,w){const P=w.subContextCount;let Q=w;const se=g.options;if(se&&(se.params||se.delay)&&(Q=w.createSubContext(se),Q.transformIntoNewTimeline(),null!=se.delay)){6==Q.previousNode.type&&(Q.currentTimeline.snapshotCurrentStyles(),Q.previousNode=Oa);const ge=Pi(se.delay);Q.delayNextStep(ge)}g.steps.length&&(g.steps.forEach(ge=>bi(this,ge,Q)),Q.currentTimeline.applyStylesToKeyframe(),Q.subContextCount>P&&Q.transformIntoNewTimeline()),w.previousNode=g}visitGroup(g,w){const P=[];let Q=w.currentTimeline.currentTime;const se=g.options&&g.options.delay?Pi(g.options.delay):0;g.steps.forEach(ge=>{const v=w.createSubContext(g.options);se&&v.delayNextStep(se),bi(this,ge,v),Q=Math.max(Q,v.currentTimeline.currentTime),P.push(v.currentTimeline)}),P.forEach(ge=>w.currentTimeline.mergeTimelineCollectedStyles(ge)),w.transformIntoNewTimeline(Q),w.previousNode=g}_visitTiming(g,w){if(g.dynamic){const P=g.strValue;return br(w.params?Pr(P,w.params,w.errors):P,w.errors)}return{duration:g.duration,delay:g.delay,easing:g.easing}}visitAnimate(g,w){const P=w.currentAnimateTimings=this._visitTiming(g.timings,w),Q=w.currentTimeline;P.delay&&(w.incrementTime(P.delay),Q.snapshotCurrentStyles());const se=g.style;5==se.type?this.visitKeyframes(se,w):(w.incrementTime(P.duration),this.visitStyle(se,w),Q.applyStylesToKeyframe()),w.currentAnimateTimings=null,w.previousNode=g}visitStyle(g,w){const P=w.currentTimeline,Q=w.currentAnimateTimings;!Q&&P.hasCurrentStyleProperties()&&P.forwardFrame();const se=Q&&Q.easing||g.easing;g.isEmptyStep?P.applyEmptyStep(se):P.setStyles(g.styles,se,w.errors,w.options),w.previousNode=g}visitKeyframes(g,w){const P=w.currentAnimateTimings,Q=w.currentTimeline.duration,se=P.duration,v=w.createSubContext().currentTimeline;v.easing=P.easing,g.styles.forEach(A=>{v.forwardTime((A.offset||0)*se),v.setStyles(A.styles,A.easing,w.errors,w.options),v.applyStylesToKeyframe()}),w.currentTimeline.mergeTimelineCollectedStyles(v),w.transformIntoNewTimeline(Q+se),w.previousNode=g}visitQuery(g,w){const P=w.currentTimeline.currentTime,Q=g.options||{},se=Q.delay?Pi(Q.delay):0;se&&(6===w.previousNode.type||0==P&&w.currentTimeline.hasCurrentStyleProperties())&&(w.currentTimeline.snapshotCurrentStyles(),w.previousNode=Oa);let ge=P;const v=w.invokeQuery(g.selector,g.originalSelector,g.limit,g.includeSelf,!!Q.optional,w.errors);w.currentQueryTotal=v.length;let A=null;v.forEach((I,M)=>{w.currentQueryIndex=M;const V=w.createSubContext(g.options,I);se&&V.delayNextStep(se),I===w.element&&(A=V.currentTimeline),bi(this,g.animation,V),V.currentTimeline.applyStylesToKeyframe(),ge=Math.max(ge,V.currentTimeline.currentTime)}),w.currentQueryIndex=0,w.currentQueryTotal=0,w.transformIntoNewTimeline(ge),A&&(w.currentTimeline.mergeTimelineCollectedStyles(A),w.currentTimeline.snapshotCurrentStyles()),w.previousNode=g}visitStagger(g,w){const P=w.parentContext,Q=w.currentTimeline,se=g.timings,ge=Math.abs(se.duration),v=ge*(w.currentQueryTotal-1);let A=ge*w.currentQueryIndex;switch(se.duration<0?"reverse":se.easing){case"reverse":A=v-A;break;case"full":A=P.currentStaggerTime}const M=w.currentTimeline;A&&M.delayNextStep(A);const V=M.currentTime;bi(this,g.animation,w),w.previousNode=g,P.currentStaggerTime=Q.currentTime-V+(Q.startTime-P.currentTimeline.startTime)}}const Oa={};class la{constructor(g,w,P,Q,se,ge,v,A){this._driver=g,this.element=w,this.subInstructions=P,this._enterClassName=Q,this._leaveClassName=se,this.errors=ge,this.timelines=v,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Oa,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=A||new Zo(this._driver,w,0),v.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(g,w){if(!g)return;const P=g;let Q=this.options;null!=P.duration&&(Q.duration=Pi(P.duration)),null!=P.delay&&(Q.delay=Pi(P.delay));const se=P.params;if(se){let ge=Q.params;ge||(ge=this.options.params={}),Object.keys(se).forEach(v=>{(!w||!ge.hasOwnProperty(v))&&(ge[v]=Pr(se[v],ge,this.errors))})}}_copyOptions(){const g={};if(this.options){const w=this.options.params;if(w){const P=g.params={};Object.keys(w).forEach(Q=>{P[Q]=w[Q]})}}return g}createSubContext(g=null,w,P){const Q=w||this.element,se=new la(this._driver,Q,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Q,P||0));return se.previousNode=this.previousNode,se.currentAnimateTimings=this.currentAnimateTimings,se.options=this._copyOptions(),se.updateOptions(g),se.currentQueryIndex=this.currentQueryIndex,se.currentQueryTotal=this.currentQueryTotal,se.parentContext=this,this.subContextCount++,se}transformIntoNewTimeline(g){return this.previousNode=Oa,this.currentTimeline=this.currentTimeline.fork(this.element,g),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(g,w,P){const Q={duration:w??g.duration,delay:this.currentTimeline.currentTime+(P??0)+g.delay,easing:""},se=new ua(this._driver,g.element,g.keyframes,g.preStyleProps,g.postStyleProps,Q,g.stretchStartingKeyframe);return this.timelines.push(se),Q}incrementTime(g){this.currentTimeline.forwardTime(this.currentTimeline.duration+g)}delayNextStep(g){g>0&&this.currentTimeline.delayNextStep(g)}invokeQuery(g,w,P,Q,se,ge){let v=[];if(Q&&v.push(this.element),g.length>0){g=(g=g.replace(Yo,"."+this._enterClassName)).replace(Bo,"."+this._leaveClassName);let I=this._driver.query(this.element,g,1!=P);0!==P&&(I=P<0?I.slice(I.length+P,I.length):I.slice(0,P)),v.push(...I)}return!se&&0==v.length&&ge.push(function Pa(j){return new _e.wOt(3014,!1)}()),v}}class Zo{constructor(g,w,P,Q){this._driver=g,this.element=w,this.startTime=P,this._elementTimelineStylesLookup=Q,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(w),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(w,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(g){const w=1===this._keyframes.size&&this._pendingStyles.size;this.duration||w?(this.forwardTime(this.currentTime+g),w&&this.snapshotCurrentStyles()):this.startTime+=g}fork(g,w){return this.applyStylesToKeyframe(),new Zo(this._driver,g,w||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(g){this.applyStylesToKeyframe(),this.duration=g,this._loadKeyframe()}_updateStyle(g,w){this._localTimelineStyles.set(g,w),this._globalTimelineStyles.set(g,w),this._styleSummary.set(g,{time:this.currentTime,value:w})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(g){g&&this._previousKeyframe.set("easing",g);for(let[w,P]of this._globalTimelineStyles)this._backFill.set(w,P||Xe.kp),this._currentKeyframe.set(w,Xe.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(g,w,P,Q){w&&this._previousKeyframe.set("easing",w);const se=Q&&Q.params||{},ge=function ha(j,g){const w=new Map;let P;return j.forEach(Q=>{if("*"===Q){P=P||g.keys();for(let se of P)w.set(se,Xe.kp)}else yi(Q,w)}),w}(g,this._globalTimelineStyles);for(let[v,A]of ge){const I=Pr(A,se,P);this._pendingStyles.set(v,I),this._localTimelineStyles.has(v)||this._backFill.set(v,this._globalTimelineStyles.get(v)??Xe.kp),this._updateStyle(v,I)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((g,w)=>{this._currentKeyframe.set(w,g)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((g,w)=>{this._currentKeyframe.has(w)||this._currentKeyframe.set(w,g)}))}snapshotCurrentStyles(){for(let[g,w]of this._localTimelineStyles)this._pendingStyles.set(g,w),this._updateStyle(g,w)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const g=[];for(let w in this._currentKeyframe)g.push(w);return g}mergeTimelineCollectedStyles(g){g._styleSummary.forEach((w,P)=>{const Q=this._styleSummary.get(P);(!Q||w.time>Q.time)&&this._updateStyle(P,w.value)})}buildKeyframes(){this.applyStylesToKeyframe();const g=new Set,w=new Set,P=1===this._keyframes.size&&0===this.duration;let Q=[];this._keyframes.forEach((v,A)=>{const I=yi(v,new Map,this._backFill);I.forEach((M,V)=>{M===Xe.FX?g.add(V):M===Xe.kp&&w.add(V)}),P||I.set("offset",A/this.duration),Q.push(I)});const se=g.size?vs(g.values()):[],ge=w.size?vs(w.values()):[];if(P){const v=Q[0],A=new Map(v);v.set("offset",0),A.set("offset",1),Q=[v,A]}return ki(this.element,Q,se,ge,this.duration,this.startTime,this.easing,!1)}}class ua extends Zo{constructor(g,w,P,Q,se,ge,v=!1){super(g,w,ge.delay),this.keyframes=P,this.preStyleProps=Q,this.postStyleProps=se,this._stretchStartingKeyframe=v,this.timings={duration:ge.duration,delay:ge.delay,easing:ge.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let g=this.keyframes,{delay:w,duration:P,easing:Q}=this.timings;if(this._stretchStartingKeyframe&&w){const se=[],ge=P+w,v=w/ge,A=yi(g[0]);A.set("offset",0),se.push(A);const I=yi(g[0]);I.set("offset",da(v)),se.push(I);const M=g.length-1;for(let V=1;V<=M;V++){let ee=yi(g[V]);const he=ee.get("offset");ee.set("offset",da((w+he*P)/ge)),se.push(ee)}P=ge,w=0,Q="",g=se}return ki(this.element,g,this.preStyleProps,this.postStyleProps,P,w,Q,!0)}}function da(j,g=3){const w=Math.pow(10,g-1);return Math.round(j*w)/w}class Jo{}const Aa=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ac extends Jo{normalizePropertyName(g,w){return zs(g)}normalizeStyleValue(g,w,P,Q){let se="";const ge=P.toString().trim();if(Aa.has(w)&&0!==P&&"0"!==P)if("number"==typeof P)se="px";else{const v=P.match(/^[+-]?[\d\.]+([a-z]*)$/);v&&0==v[1].length&&Q.push(function Ar(j,g){return new _e.wOt(3005,!1)}())}return ge+se}}function pa(j,g,w,P,Q,se,ge,v,A,I,M,V,ee){return{type:0,element:j,triggerName:g,isRemovalTransition:Q,fromState:w,fromStyles:se,toState:P,toStyles:ge,timelines:v,queriedElements:A,preStyleProps:I,postStyleProps:M,totalTime:V,errors:ee}}const ic={};class sc{constructor(g,w,P){this._triggerName=g,this.ast=w,this._stateStyles=P}match(g,w,P,Q){return function el(j,g,w,P,Q){return j.some(se=>se(g,w,P,Q))}(this.ast.matchers,g,w,P,Q)}buildStyles(g,w,P){let Q=this._stateStyles.get("*");return void 0!==g&&(Q=this._stateStyles.get(g?.toString())||Q),Q?Q.buildStyles(w,P):new Map}build(g,w,P,Q,se,ge,v,A,I,M){const V=[],ee=this.ast.options&&this.ast.options.params||ic,Ue=this.buildStyles(P,v&&v.params||ic,V),Ne=A&&A.params||ic,Pt=this.buildStyles(Q,Ne,V),ln=new Set,nr=new Map,yn=new Map,ti="void"===Q,lo={params:jo(Ne,ee),delay:this.ast.options?.delay},ps=M?[]:ca(g,w,this.ast.animation,se,ge,Ue,Pt,lo,I,V);let zi=0;if(ps.forEach(uo=>{zi=Math.max(uo.duration+uo.delay,zi)}),V.length)return pa(w,this._triggerName,P,Q,ti,Ue,Pt,[],[],nr,yn,zi,V);ps.forEach(uo=>{const Zi=uo.element,Da=Ii(nr,Zi,new Set);uo.preStyleProps.forEach(Sa=>Da.add(Sa));const sr=Ii(yn,Zi,new Set);uo.postStyleProps.forEach(Sa=>sr.add(Sa)),Zi!==w&&ln.add(Zi)});const ks=vs(ln.values());return pa(w,this._triggerName,P,Q,ti,Ue,Pt,ps,ks,nr,yn,zi)}}function jo(j,g){const w=Fn(g);for(const P in j)j.hasOwnProperty(P)&&null!=j[P]&&(w[P]=j[P]);return w}class Cc{constructor(g,w,P){this.styles=g,this.defaultParams=w,this.normalizer=P}buildStyles(g,w){const P=new Map,Q=Fn(this.defaultParams);return Object.keys(g).forEach(se=>{const ge=g[se];null!==ge&&(Q[se]=ge)}),this.styles.styles.forEach(se=>{"string"!=typeof se&&se.forEach((ge,v)=>{ge&&(ge=Pr(ge,Q,w));const A=this.normalizer.normalizePropertyName(v,w);ge=this.normalizer.normalizeStyleValue(v,A,ge,w),P.set(v,ge)})}),P}}class Ho{constructor(g,w,P){this.name=g,this.ast=w,this._normalizer=P,this.transitionFactories=[],this.states=new Map,w.states.forEach(Q=>{this.states.set(Q.name,new Cc(Q.style,Q.options&&Q.options.params||{},P))}),te(this.states,"true","1"),te(this.states,"false","0"),w.transitions.forEach(Q=>{this.transitionFactories.push(new sc(g,Q,this.states))}),this.fallbackTransition=function x(j,g,w){return new sc(j,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ge,v)=>!0],options:null,queryCount:0,depCount:0},g)}(g,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(g,w,P,Q){return this.transitionFactories.find(ge=>ge.match(g,w,P,Q))||null}matchStyles(g,w,P){return this.fallbackTransition.buildStyles(g,w,P)}}function te(j,g,w){j.has(g)?j.has(w)||j.set(w,j.get(g)):j.has(w)&&j.set(g,j.get(w))}const B=new Es;class J{constructor(g,w,P){this.bodyNode=g,this._driver=w,this._normalizer=P,this._animations=new Map,this._playersById=new Map,this.players=[]}register(g,w){const P=[],se=hn(this._driver,w,P,[]);if(P.length)throw function oa(j){return new _e.wOt(3503,!1)}();this._animations.set(g,se)}_buildPlayer(g,w,P){const Q=g.element,se=Xs(this._normalizer,g.keyframes,w,P);return this._driver.animate(Q,se,g.duration,g.delay,g.easing,[],!0)}create(g,w,P={}){const Q=[],se=this._animations.get(g);let ge;const v=new Map;if(se?(ge=ca(this._driver,w,se,Fr,Jr,new Map,new Map,P,B,Q),ge.forEach(M=>{const V=Ii(v,M.element,new Map);M.postStyleProps.forEach(ee=>V.set(ee,null))})):(Q.push(function Qs(){return new _e.wOt(3300,!1)}()),ge=[]),Q.length)throw function _s(j){return new _e.wOt(3504,!1)}();v.forEach((M,V)=>{M.forEach((ee,he)=>{M.set(he,this._driver.computeStyle(V,he,Xe.kp))})});const I=Wr(ge.map(M=>{const V=v.get(M.element);return this._buildPlayer(M,new Map,V)}));return this._playersById.set(g,I),I.onDestroy(()=>this.destroy(g)),this.players.push(I),I}destroy(g){const w=this._getPlayer(g);w.destroy(),this._playersById.delete(g);const P=this.players.indexOf(w);P>=0&&this.players.splice(P,1)}_getPlayer(g){const w=this._playersById.get(g);if(!w)throw function Ao(j){return new _e.wOt(3301,!1)}();return w}listen(g,w,P,Q){const se=Ps(w,"","","");return Mi(this._getPlayer(g),P,se,Q),()=>{}}command(g,w,P,Q){if("register"==P)return void this.register(g,Q[0]);if("create"==P)return void this.create(g,w,Q[0]||{});const se=this._getPlayer(g);switch(P){case"play":se.play();break;case"pause":se.pause();break;case"reset":se.reset();break;case"restart":se.restart();break;case"finish":se.finish();break;case"init":se.init();break;case"setPosition":se.setPosition(parseFloat(Q[0]));break;case"destroy":this.destroy(g)}}}const Ae="ng-animate-queued",Ct="ng-animate-disabled",Qr=[],lr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$r={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ur="__ng_removed";class Lr{get params(){return this.options.params}constructor(g,w=""){this.namespaceId=w;const P=g&&g.hasOwnProperty("value");if(this.value=function ma(j){return j??null}(P?g.value:g),P){const se=Fn(g);delete se.value,this.options=se}else this.options={};this.options.params||(this.options.params={})}absorbOptions(g){const w=g.params;if(w){const P=this.options.params;Object.keys(w).forEach(Q=>{null==P[Q]&&(P[Q]=w[Q])})}}}const ns="void",$i=new Lr(ns);class ea{constructor(g,w,P){this.id=g,this.hostElement=w,this._engine=P,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+g,ao(w,this._hostClassName)}listen(g,w,P,Q){if(!this._triggers.has(w))throw function Fo(j,g){return new _e.wOt(3302,!1)}();if(null==P||0==P.length)throw function Vo(j){return new _e.wOt(3303,!1)}();if(!function mn(j){return"start"==j||"done"==j}(P))throw function io(j,g){return new _e.wOt(3400,!1)}();const se=Ii(this._elementListeners,g,[]),ge={name:w,phase:P,callback:Q};se.push(ge);const v=Ii(this._engine.statesByElement,g,new Map);return v.has(w)||(ao(g,Gn),ao(g,Gn+"-"+w),v.set(w,$i)),()=>{this._engine.afterFlush(()=>{const A=se.indexOf(ge);A>=0&&se.splice(A,1),this._triggers.has(w)||v.delete(w)})}}register(g,w){return!this._triggers.has(g)&&(this._triggers.set(g,w),!0)}_getTrigger(g){const w=this._triggers.get(g);if(!w)throw function Xo(j){return new _e.wOt(3401,!1)}();return w}trigger(g,w,P,Q=!0){const se=this._getTrigger(w),ge=new Do(this.id,w,g);let v=this._engine.statesByElement.get(g);v||(ao(g,Gn),ao(g,Gn+"-"+w),this._engine.statesByElement.set(g,v=new Map));let A=v.get(w);const I=new Lr(P,this.id);if(!(P&&P.hasOwnProperty("value"))&&A&&I.absorbOptions(A.options),v.set(w,I),A||(A=$i),I.value!==ns&&A.value===I.value){if(!function oc(j,g){const w=Object.keys(j),P=Object.keys(g);if(w.length!=P.length)return!1;for(let Q=0;Q<w.length;Q++){const se=w[Q];if(!g.hasOwnProperty(se)||j[se]!==g[se])return!1}return!0}(A.params,I.params)){const Ne=[],Pt=se.matchStyles(A.value,A.params,Ne),ln=se.matchStyles(I.value,I.params,Ne);Ne.length?this._engine.reportError(Ne):this._engine.afterFlush(()=>{$s(g,Pt),oi(g,ln)})}return}const ee=Ii(this._engine.playersByElement,g,[]);ee.forEach(Ne=>{Ne.namespaceId==this.id&&Ne.triggerName==w&&Ne.queued&&Ne.destroy()});let he=se.matchTransition(A.value,I.value,g,I.params),Ue=!1;if(!he){if(!Q)return;he=se.fallbackTransition,Ue=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:w,transition:he,fromState:A,toState:I,player:ge,isFallbackTransition:Ue}),Ue||(ao(g,Ae),ge.onStart(()=>{ta(g,Ae)})),ge.onDone(()=>{let Ne=this.players.indexOf(ge);Ne>=0&&this.players.splice(Ne,1);const Pt=this._engine.playersByElement.get(g);if(Pt){let ln=Pt.indexOf(ge);ln>=0&&Pt.splice(ln,1)}}),this.players.push(ge),ee.push(ge),ge}deregister(g){this._triggers.delete(g),this._engine.statesByElement.forEach(w=>w.delete(g)),this._elementListeners.forEach((w,P)=>{this._elementListeners.set(P,w.filter(Q=>Q.name!=g))})}clearElementCache(g){this._engine.statesByElement.delete(g),this._elementListeners.delete(g);const w=this._engine.playersByElement.get(g);w&&(w.forEach(P=>P.destroy()),this._engine.playersByElement.delete(g))}_signalRemovalForInnerTriggers(g,w){const P=this._engine.driver.query(g,Bi,!0);P.forEach(Q=>{if(Q[ur])return;const se=this._engine.fetchNamespacesByElement(Q);se.size?se.forEach(ge=>ge.triggerLeaveAnimation(Q,w,!1,!0)):this.clearElementCache(Q)}),this._engine.afterFlushAnimationsDone(()=>P.forEach(Q=>this.clearElementCache(Q)))}triggerLeaveAnimation(g,w,P,Q){const se=this._engine.statesByElement.get(g),ge=new Map;if(se){const v=[];if(se.forEach((A,I)=>{if(ge.set(I,A.value),this._triggers.has(I)){const M=this.trigger(g,I,ns,Q);M&&v.push(M)}}),v.length)return this._engine.markElementAsRemoved(this.id,g,!0,w,ge),P&&Wr(v).onDone(()=>this._engine.processLeaveNode(g)),!0}return!1}prepareLeaveAnimationListeners(g){const w=this._elementListeners.get(g),P=this._engine.statesByElement.get(g);if(w&&P){const Q=new Set;w.forEach(se=>{const ge=se.name;if(Q.has(ge))return;Q.add(ge);const A=this._triggers.get(ge).fallbackTransition,I=P.get(ge)||$i,M=new Lr(ns),V=new Do(this.id,ge,g);this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:ge,transition:A,fromState:I,toState:M,player:V,isFallbackTransition:!0})})}}removeNode(g,w){const P=this._engine;if(g.childElementCount&&this._signalRemovalForInnerTriggers(g,w),this.triggerLeaveAnimation(g,w,!0))return;let Q=!1;if(P.totalAnimations){const se=P.players.length?P.playersByQueriedElement.get(g):[];if(se&&se.length)Q=!0;else{let ge=g;for(;ge=ge.parentNode;)if(P.statesByElement.get(ge)){Q=!0;break}}}if(this.prepareLeaveAnimationListeners(g),Q)P.markElementAsRemoved(this.id,g,!1,w);else{const se=g[ur];(!se||se===lr)&&(P.afterFlush(()=>this.clearElementCache(g)),P.destroyInnerAnimations(g),P._onRemovalComplete(g,w))}}insertNode(g,w){ao(g,this._hostClassName)}drainQueuedTransitions(g){const w=[];return this._queue.forEach(P=>{const Q=P.player;if(Q.destroyed)return;const se=P.element,ge=this._elementListeners.get(se);ge&&ge.forEach(v=>{if(v.name==P.triggerName){const A=Ps(se,P.triggerName,P.fromState.value,P.toState.value);A._data=g,Mi(P.player,v.phase,A,v.callback)}}),Q.markedForDestroy?this._engine.afterFlush(()=>{Q.destroy()}):w.push(P)}),this._queue=[],w.sort((P,Q)=>{const se=P.transition.ast.depCount,ge=Q.transition.ast.depCount;return 0==se||0==ge?se-ge:this._engine.driver.containsElement(P.element,Q.element)?1:-1})}destroy(g){this.players.forEach(w=>w.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,g)}}class ji{_onRemovalComplete(g,w){this.onRemovalComplete(g,w)}constructor(g,w,P){this.bodyNode=g,this.driver=w,this._normalizer=P,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Q,se)=>{}}get queuedPlayers(){const g=[];return this._namespaceList.forEach(w=>{w.players.forEach(P=>{P.queued&&g.push(P)})}),g}createNamespace(g,w){const P=new ea(g,w,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,w)?this._balanceNamespaceList(P,w):(this.newHostElements.set(w,P),this.collectEnterElement(w)),this._namespaceLookup[g]=P}_balanceNamespaceList(g,w){const P=this._namespaceList,Q=this.namespacesByHostElement;if(P.length-1>=0){let ge=!1,v=this.driver.getParentElement(w);for(;v;){const A=Q.get(v);if(A){const I=P.indexOf(A);P.splice(I+1,0,g),ge=!0;break}v=this.driver.getParentElement(v)}ge||P.unshift(g)}else P.push(g);return Q.set(w,g),g}register(g,w){let P=this._namespaceLookup[g];return P||(P=this.createNamespace(g,w)),P}registerTrigger(g,w,P){let Q=this._namespaceLookup[g];Q&&Q.register(w,P)&&this.totalAnimations++}destroy(g,w){g&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const P=this._fetchNamespace(g);this.namespacesByHostElement.delete(P.hostElement);const Q=this._namespaceList.indexOf(P);Q>=0&&this._namespaceList.splice(Q,1),P.destroy(w),delete this._namespaceLookup[g]}))}_fetchNamespace(g){return this._namespaceLookup[g]}fetchNamespacesByElement(g){const w=new Set,P=this.statesByElement.get(g);if(P)for(let Q of P.values())if(Q.namespaceId){const se=this._fetchNamespace(Q.namespaceId);se&&w.add(se)}return w}trigger(g,w,P,Q){if(Ks(w)){const se=this._fetchNamespace(g);if(se)return se.trigger(w,P,Q),!0}return!1}insertNode(g,w,P,Q){if(!Ks(w))return;const se=w[ur];if(se&&se.setForRemoval){se.setForRemoval=!1,se.setForMove=!0;const ge=this.collectedLeaveElements.indexOf(w);ge>=0&&this.collectedLeaveElements.splice(ge,1)}if(g){const ge=this._fetchNamespace(g);ge&&ge.insertNode(w,P)}Q&&this.collectEnterElement(w)}collectEnterElement(g){this.collectedEnterElements.push(g)}markElementAsDisabled(g,w){w?this.disabledNodes.has(g)||(this.disabledNodes.add(g),ao(g,Ct)):this.disabledNodes.has(g)&&(this.disabledNodes.delete(g),ta(g,Ct))}removeNode(g,w,P){if(Ks(w)){const Q=g?this._fetchNamespace(g):null;Q?Q.removeNode(w,P):this.markElementAsRemoved(g,w,!1,P);const se=this.namespacesByHostElement.get(w);se&&se.id!==g&&se.removeNode(w,P)}else this._onRemovalComplete(w,P)}markElementAsRemoved(g,w,P,Q,se){this.collectedLeaveElements.push(w),w[ur]={namespaceId:g,setForRemoval:Q,hasAnimation:P,removedBeforeQueried:!1,previousTriggersValues:se}}listen(g,w,P,Q,se){return Ks(w)?this._fetchNamespace(g).listen(w,P,Q,se):()=>{}}_buildInstruction(g,w,P,Q,se){return g.transition.build(this.driver,g.element,g.fromState.value,g.toState.value,P,Q,g.fromState.options,g.toState.options,w,se)}destroyInnerAnimations(g){let w=this.driver.query(g,Bi,!0);w.forEach(P=>this.destroyActiveAnimationsForElement(P)),0!=this.playersByQueriedElement.size&&(w=this.driver.query(g,Gi,!0),w.forEach(P=>this.finishActiveQueriedAnimationOnElement(P)))}destroyActiveAnimationsForElement(g){const w=this.playersByElement.get(g);w&&w.forEach(P=>{P.queued?P.markedForDestroy=!0:P.destroy()})}finishActiveQueriedAnimationOnElement(g){const w=this.playersByQueriedElement.get(g);w&&w.forEach(P=>P.finish())}whenRenderingDone(){return new Promise(g=>{if(this.players.length)return Wr(this.players).onDone(()=>g());g()})}processLeaveNode(g){const w=g[ur];if(w&&w.setForRemoval){if(g[ur]=lr,w.namespaceId){this.destroyInnerAnimations(g);const P=this._fetchNamespace(w.namespaceId);P&&P.clearElementCache(g)}this._onRemovalComplete(g,w.setForRemoval)}g.classList?.contains(Ct)&&this.markElementAsDisabled(g,!1),this.driver.query(g,".ng-animate-disabled",!0).forEach(P=>{this.markElementAsDisabled(P,!1)})}flush(g=-1){let w=[];if(this.newHostElements.size&&(this.newHostElements.forEach((P,Q)=>this._balanceNamespaceList(P,Q)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let P=0;P<this.collectedEnterElements.length;P++)ao(this.collectedEnterElements[P],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const P=[];try{w=this._flushAnimations(P,g)}finally{for(let Q=0;Q<P.length;Q++)P[Q]()}}else for(let P=0;P<this.collectedLeaveElements.length;P++)this.processLeaveNode(this.collectedLeaveElements[P]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(P=>P()),this._flushFns=[],this._whenQuietFns.length){const P=this._whenQuietFns;this._whenQuietFns=[],w.length?Wr(w).onDone(()=>{P.forEach(Q=>Q())}):P.forEach(Q=>Q())}}reportError(g){throw function js(j){return new _e.wOt(3402,!1)}()}_flushAnimations(g,w){const P=new Es,Q=[],se=new Map,ge=[],v=new Map,A=new Map,I=new Map,M=new Set;this.disabledNodes.forEach(vn=>{M.add(vn);const Tn=this.driver.query(vn,".ng-animate-queued",!0);for(let tr=0;tr<Tn.length;tr++)M.add(Tn[tr])});const V=this.bodyNode,ee=Array.from(this.statesByElement.keys()),he=Is(ee,this.collectedEnterElements),Ue=new Map;let Ne=0;he.forEach((vn,Tn)=>{const tr=Fr+Ne++;Ue.set(Tn,tr),vn.forEach(Ur=>ao(Ur,tr))});const Pt=[],ln=new Set,nr=new Set;for(let vn=0;vn<this.collectedLeaveElements.length;vn++){const Tn=this.collectedLeaveElements[vn],tr=Tn[ur];tr&&tr.setForRemoval&&(Pt.push(Tn),ln.add(Tn),tr.hasAnimation?this.driver.query(Tn,".ng-star-inserted",!0).forEach(Ur=>ln.add(Ur)):nr.add(Tn))}const yn=new Map,ti=Is(ee,Array.from(ln));ti.forEach((vn,Tn)=>{const tr=Jr+Ne++;yn.set(Tn,tr),vn.forEach(Ur=>ao(Ur,tr))}),g.push(()=>{he.forEach((vn,Tn)=>{const tr=Ue.get(Tn);vn.forEach(Ur=>ta(Ur,tr))}),ti.forEach((vn,Tn)=>{const tr=yn.get(Tn);vn.forEach(Ur=>ta(Ur,tr))}),Pt.forEach(vn=>{this.processLeaveNode(vn)})});const lo=[],ps=[];for(let vn=this._namespaceList.length-1;vn>=0;vn--)this._namespaceList[vn].drainQueuedTransitions(w).forEach(tr=>{const Ur=tr.player,Ci=tr.element;if(lo.push(Ur),this.collectedEnterElements.length){const rs=Ci[ur];if(rs&&rs.setForMove){if(rs.previousTriggersValues&&rs.previousTriggersValues.has(tr.triggerName)){const ja=rs.previousTriggersValues.get(tr.triggerName),Ws=this.statesByElement.get(tr.element);if(Ws&&Ws.has(tr.triggerName)){const Ko=Ws.get(tr.triggerName);Ko.value=ja,Ws.set(tr.triggerName,Ko)}}return void Ur.destroy()}}const Mo=!V||!this.driver.containsElement(V,Ci),cs=yn.get(Ci),Po=Ue.get(Ci),Di=this._buildInstruction(tr,P,Po,cs,Mo);if(Di.errors&&Di.errors.length)return void ps.push(Di);if(Mo)return Ur.onStart(()=>$s(Ci,Di.fromStyles)),Ur.onDestroy(()=>oi(Ci,Di.toStyles)),void Q.push(Ur);if(tr.isFallbackTransition)return Ur.onStart(()=>$s(Ci,Di.fromStyles)),Ur.onDestroy(()=>oi(Ci,Di.toStyles)),void Q.push(Ur);const dc=[];Di.timelines.forEach(rs=>{rs.stretchStartingKeyframe=!0,this.disabledNodes.has(rs.element)||dc.push(rs)}),Di.timelines=dc,P.append(Ci,Di.timelines),ge.push({instruction:Di,player:Ur,element:Ci}),Di.queriedElements.forEach(rs=>Ii(v,rs,[]).push(Ur)),Di.preStyleProps.forEach((rs,ja)=>{if(rs.size){let Ws=A.get(ja);Ws||A.set(ja,Ws=new Set),rs.forEach((Ko,Ra)=>Ws.add(Ra))}}),Di.postStyleProps.forEach((rs,ja)=>{let Ws=I.get(ja);Ws||I.set(ja,Ws=new Set),rs.forEach((Ko,Ra)=>Ws.add(Ra))})});if(ps.length){const vn=[];ps.forEach(Tn=>{vn.push(function Yn(j,g){return new _e.wOt(3505,!1)}())}),lo.forEach(Tn=>Tn.destroy()),this.reportError(vn)}const zi=new Map,ks=new Map;ge.forEach(vn=>{const Tn=vn.element;P.has(Tn)&&(ks.set(Tn,Tn),this._beforeAnimationBuild(vn.player.namespaceId,vn.instruction,zi))}),Q.forEach(vn=>{const Tn=vn.element;this._getPreviousPlayers(Tn,!1,vn.namespaceId,vn.triggerName,null).forEach(Ur=>{Ii(zi,Tn,[]).push(Ur),Ur.destroy()})});const uo=Pt.filter(vn=>ga(vn,A,I)),Zi=new Map;Ns(Zi,this.driver,nr,I,Xe.kp).forEach(vn=>{ga(vn,A,I)&&uo.push(vn)});const sr=new Map;he.forEach((vn,Tn)=>{Ns(sr,this.driver,new Set(vn),A,Xe.FX)}),uo.forEach(vn=>{const Tn=Zi.get(vn),tr=sr.get(vn);Zi.set(vn,new Map([...Tn?.entries()??[],...tr?.entries()??[]]))});const Sa=[],xo=[],uu={};ge.forEach(vn=>{const{element:Tn,player:tr,instruction:Ur}=vn;if(P.has(Tn)){if(M.has(Tn))return tr.onDestroy(()=>oi(Tn,Ur.toStyles)),tr.disabled=!0,tr.overrideTotalTime(Ur.totalTime),void Q.push(tr);let Ci=uu;if(ks.size>1){let cs=Tn;const Po=[];for(;cs=cs.parentNode;){const Di=ks.get(cs);if(Di){Ci=Di;break}Po.push(cs)}Po.forEach(Di=>ks.set(Di,Ci))}const Mo=this._buildAnimation(tr.namespaceId,Ur,zi,se,sr,Zi);if(tr.setRealPlayer(Mo),Ci===uu)Sa.push(tr);else{const cs=this.playersByElement.get(Ci);cs&&cs.length&&(tr.parentPlayer=Wr(cs)),Q.push(tr)}}else $s(Tn,Ur.fromStyles),tr.onDestroy(()=>oi(Tn,Ur.toStyles)),xo.push(tr),M.has(Tn)&&Q.push(tr)}),xo.forEach(vn=>{const Tn=se.get(vn.element);if(Tn&&Tn.length){const tr=Wr(Tn);vn.setRealPlayer(tr)}}),Q.forEach(vn=>{vn.parentPlayer?vn.syncPlayerEvents(vn.parentPlayer):vn.destroy()});for(let vn=0;vn<Pt.length;vn++){const Tn=Pt[vn],tr=Tn[ur];if(ta(Tn,Jr),tr&&tr.hasAnimation)continue;let Ur=[];if(v.size){let Mo=v.get(Tn);Mo&&Mo.length&&Ur.push(...Mo);let cs=this.driver.query(Tn,Gi,!0);for(let Po=0;Po<cs.length;Po++){let Di=v.get(cs[Po]);Di&&Di.length&&Ur.push(...Di)}}const Ci=Ur.filter(Mo=>!Mo.destroyed);Ci.length?Ca(this,Tn,Ci):this.processLeaveNode(Tn)}return Pt.length=0,Sa.forEach(vn=>{this.players.push(vn),vn.onDone(()=>{vn.destroy();const Tn=this.players.indexOf(vn);this.players.splice(Tn,1)}),vn.play()}),Sa}afterFlush(g){this._flushFns.push(g)}afterFlushAnimationsDone(g){this._whenQuietFns.push(g)}_getPreviousPlayers(g,w,P,Q,se){let ge=[];if(w){const v=this.playersByQueriedElement.get(g);v&&(ge=v)}else{const v=this.playersByElement.get(g);if(v){const A=!se||se==ns;v.forEach(I=>{I.queued||!A&&I.triggerName!=Q||ge.push(I)})}}return(P||Q)&&(ge=ge.filter(v=>!(P&&P!=v.namespaceId||Q&&Q!=v.triggerName))),ge}_beforeAnimationBuild(g,w,P){const se=w.element,ge=w.isRemovalTransition?void 0:g,v=w.isRemovalTransition?void 0:w.triggerName;for(const A of w.timelines){const I=A.element,M=I!==se,V=Ii(P,I,[]);this._getPreviousPlayers(I,M,ge,v,w.toState).forEach(he=>{const Ue=he.getRealPlayer();Ue.beforeDestroy&&Ue.beforeDestroy(),he.destroy(),V.push(he)})}$s(se,w.fromStyles)}_buildAnimation(g,w,P,Q,se,ge){const v=w.triggerName,A=w.element,I=[],M=new Set,V=new Set,ee=w.timelines.map(Ue=>{const Ne=Ue.element;M.add(Ne);const Pt=Ne[ur];if(Pt&&Pt.removedBeforeQueried)return new Xe.sf(Ue.duration,Ue.delay);const ln=Ne!==A,nr=function yo(j){const g=[];return xl(j,g),g}((P.get(Ne)||Qr).map(zi=>zi.getRealPlayer())).filter(zi=>!!zi.element&&zi.element===Ne),yn=se.get(Ne),ti=ge.get(Ne),lo=Xs(this._normalizer,Ue.keyframes,yn,ti),ps=this._buildPlayer(Ue,lo,nr);if(Ue.subTimeline&&Q&&V.add(Ne),ln){const zi=new Do(g,v,Ne);zi.setRealPlayer(ps),I.push(zi)}return ps});I.forEach(Ue=>{Ii(this.playersByQueriedElement,Ue.element,[]).push(Ue),Ue.onDone(()=>function Yi(j,g,w){let P=j.get(g);if(P){if(P.length){const Q=P.indexOf(w);P.splice(Q,1)}0==P.length&&j.delete(g)}return P}(this.playersByQueriedElement,Ue.element,Ue))}),M.forEach(Ue=>ao(Ue,Wi));const he=Wr(ee);return he.onDestroy(()=>{M.forEach(Ue=>ta(Ue,Wi)),oi(A,w.toStyles)}),V.forEach(Ue=>{Ii(Q,Ue,[]).push(he)}),he}_buildPlayer(g,w,P){return w.length>0?this.driver.animate(g.element,w,g.duration,g.delay,g.easing,P):new Xe.sf(g.duration,g.delay)}}class Do{constructor(g,w,P){this.namespaceId=g,this.triggerName=w,this.element=P,this._player=new Xe.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(g){this._containsRealPlayer||(this._player=g,this._queuedCallbacks.forEach((w,P)=>{w.forEach(Q=>Mi(g,P,void 0,Q))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(g.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(g){this.totalTime=g}syncPlayerEvents(g){const w=this._player;w.triggerCallback&&g.onStart(()=>w.triggerCallback("start")),g.onDone(()=>this.finish()),g.onDestroy(()=>this.destroy())}_queueEvent(g,w){Ii(this._queuedCallbacks,g,[]).push(w)}onDone(g){this.queued&&this._queueEvent("done",g),this._player.onDone(g)}onStart(g){this.queued&&this._queueEvent("start",g),this._player.onStart(g)}onDestroy(g){this.queued&&this._queueEvent("destroy",g),this._player.onDestroy(g)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(g){this.queued||this._player.setPosition(g)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(g){const w=this._player;w.triggerCallback&&w.triggerCallback(g)}}function Ks(j){return j&&1===j.nodeType}function Dc(j,g){const w=j.style.display;return j.style.display=g??"none",w}function Ns(j,g,w,P,Q){const se=[];w.forEach(A=>se.push(Dc(A)));const ge=[];P.forEach((A,I)=>{const M=new Map;A.forEach(V=>{const ee=g.computeStyle(I,V,Q);M.set(V,ee),(!ee||0==ee.length)&&(I[ur]=$r,ge.push(I))}),j.set(I,M)});let v=0;return w.forEach(A=>Dc(A,se[v++])),ge}function Is(j,g){const w=new Map;if(j.forEach(v=>w.set(v,[])),0==g.length)return w;const Q=new Set(g),se=new Map;function ge(v){if(!v)return 1;let A=se.get(v);if(A)return A;const I=v.parentNode;return A=w.has(I)?I:Q.has(I)?1:ge(I),se.set(v,A),A}return g.forEach(v=>{const A=ge(v);1!==A&&w.get(A).push(v)}),w}function ao(j,g){j.classList?.add(g)}function ta(j,g){j.classList?.remove(g)}function Ca(j,g,w){Wr(w).onDone(()=>j.processLeaveNode(g))}function xl(j,g){for(let w=0;w<j.length;w++){const P=j[w];P instanceof Xe.ui?xl(P.players,g):g.push(P)}}function ga(j,g,w){const P=w.get(j);if(!P)return!1;let Q=g.get(j);return Q?P.forEach(se=>Q.add(se)):g.set(j,P),w.delete(j),!0}class as{constructor(g,w,P){this.bodyNode=g,this._driver=w,this._normalizer=P,this._triggerCache={},this.onRemovalComplete=(Q,se)=>{},this._transitionEngine=new ji(g,w,P),this._timelineEngine=new J(g,w,P),this._transitionEngine.onRemovalComplete=(Q,se)=>this.onRemovalComplete(Q,se)}registerTrigger(g,w,P,Q,se){const ge=g+"-"+Q;let v=this._triggerCache[ge];if(!v){const A=[],M=hn(this._driver,se,A,[]);if(A.length)throw function Ta(j,g){return new _e.wOt(3404,!1)}();v=function Na(j,g,w){return new Ho(j,g,w)}(Q,M,this._normalizer),this._triggerCache[ge]=v}this._transitionEngine.registerTrigger(w,Q,v)}register(g,w){this._transitionEngine.register(g,w)}destroy(g,w){this._transitionEngine.destroy(g,w)}onInsert(g,w,P,Q){this._transitionEngine.insertNode(g,w,P,Q)}onRemove(g,w,P){this._transitionEngine.removeNode(g,w,P)}disableAnimations(g,w){this._transitionEngine.markElementAsDisabled(g,w)}process(g,w,P,Q){if("@"==P.charAt(0)){const[se,ge]=Hs(P);this._timelineEngine.command(se,w,ge,Q)}else this._transitionEngine.trigger(g,w,P,Q)}listen(g,w,P,Q,se){if("@"==P.charAt(0)){const[ge,v]=Hs(P);return this._timelineEngine.listen(ge,w,v,se)}return this._transitionEngine.listen(g,w,P,Q,se)}flush(g=-1){this._transitionEngine.flush(g)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(g){this._transitionEngine.afterFlushAnimationsDone(g)}}let ws=(()=>{class j{static{this.initialStylesByElement=new WeakMap}constructor(w,P,Q){this._element=w,this._startStyles=P,this._endStyles=Q,this._state=0;let se=j.initialStylesByElement.get(w);se||j.initialStylesByElement.set(w,se=new Map),this._initialStyles=se}start(){this._state<1&&(this._startStyles&&oi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oi(this._element,this._initialStyles),this._endStyles&&(oi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(j.initialStylesByElement.delete(this._element),this._startStyles&&($s(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($s(this._element,this._endStyles),this._endStyles=null),oi(this._element,this._initialStyles),this._state=3)}}return j})();function ka(j){let g=null;return j.forEach((w,P)=>{(function Fa(j){return"display"===j||"position"===j})(P)&&(g=g||new Map,g.set(P,w))}),g}class Sc{constructor(g,w,P,Q){this.element=g,this.keyframes=w,this.options=P,this._specialStyles=Q,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=P.duration,this._delay=P.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(g=>g()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const g=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,g,this.options),this._finalKeyframe=g.length?g[g.length-1]:new Map;const w=()=>this._onFinish();this.domPlayer.addEventListener("finish",w),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",w)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(g){const w=[];return g.forEach(P=>{w.push(Object.fromEntries(P))}),w}_triggerWebAnimation(g,w,P){return g.animate(this._convertKeyframesToObject(w),P)}onStart(g){this._originalOnStartFns.push(g),this._onStartFns.push(g)}onDone(g){this._originalOnDoneFns.push(g),this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(g=>g()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}setPosition(g){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=g*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const g=new Map;this.hasStarted()&&this._finalKeyframe.forEach((P,Q)=>{"offset"!==Q&&g.set(Q,this._finished?P:go(this.element,Q))}),this.currentSnapshot=g}triggerCallback(g){const w="start"===g?this._onStartFns:this._onDoneFns;w.forEach(P=>P()),w.length=0}}class $u{validateStyleProperty(g){return!0}validateAnimatableStyleProperty(g){return!0}matchesElement(g,w){return!1}containsElement(g,w){return mo(g,w)}getParentElement(g){return vr(g)}query(g,w,P){return kr(g,w,P)}computeStyle(g,w,P){return window.getComputedStyle(g)[w]}animate(g,w,P,Q,se,ge=[]){const A={duration:P,delay:Q,fill:0==Q?"both":"forwards"};se&&(A.easing=se);const I=new Map,M=ge.filter(he=>he instanceof Sc);(function oo(j,g){return 0===j||0===g})(P,Q)&&M.forEach(he=>{he.currentSnapshot.forEach((Ue,Ne)=>I.set(Ne,Ue))});let V=function Gr(j){return j.length?j[0]instanceof Map?j:j.map(g=>Vr(g)):[]}(w).map(he=>yi(he));V=function bs(j,g,w){if(w.size&&g.length){let P=g[0],Q=[];if(w.forEach((se,ge)=>{P.has(ge)||Q.push(ge),P.set(ge,se)}),Q.length)for(let se=1;se<g.length;se++){let ge=g[se];Q.forEach(v=>ge.set(v,go(j,v)))}}return g}(g,V,I);const ee=function co(j,g){let w=null,P=null;return Array.isArray(g)&&g.length?(w=ka(g[0]),g.length>1&&(P=ka(g[g.length-1]))):g instanceof Map&&(w=ka(g)),w||P?new ws(j,w,P):null}(g,V);return new Sc(g,V,A,ee)}}let zn=(()=>{class j extends Xe.S6{constructor(w,P){super(),this._nextAnimationId=0,this._renderer=w.createRenderer(P.body,{id:"0",encapsulation:_e.gXe.None,styles:[],data:{animation:[]}})}build(w){const P=this._nextAnimationId.toString();this._nextAnimationId++;const Q=Array.isArray(w)?(0,Xe.K2)(w):w;return Ai(this._renderer,null,P,"register",[Q]),new tl(P,this._renderer)}static{this.\u0275fac=function(P){return new(P||j)(_e.KVO(_e._9s),_e.KVO(At.qQ))}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})();class tl extends Xe.Ro{constructor(g,w){super(),this._id=g,this._renderer=w}create(g,w){return new Rc(this._id,g,w||{},this._renderer)}}class Rc{constructor(g,w,P,Q){this.id=g,this.element=w,this._renderer=Q,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",P)}_listen(g,w){return this._renderer.listen(this.element,`@@${this.id}:${g}`,w)}_command(g,...w){return Ai(this._renderer,this.element,this.id,g,w)}onDone(g){this._listen("done",g)}onStart(g){this._listen("start",g)}onDestroy(g){this._listen("destroy",g)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(g){this._command("setPosition",g)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ai(j,g,w,P,Q){return j.setProperty(g,`@@${w}:${P}`,Q)}const La="@.disabled";let ac=(()=>{class j{constructor(w,P,Q){this.delegate=w,this.engine=P,this._zone=Q,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,P.onRemovalComplete=(se,ge)=>{const v=ge?.parentNode(se);v&&ge.removeChild(v,se)}}createRenderer(w,P){const se=this.delegate.createRenderer(w,P);if(!(w&&P&&P.data&&P.data.animation)){let M=this._rendererCache.get(se);return M||(M=new Ua("",se,this.engine,()=>this._rendererCache.delete(se)),this._rendererCache.set(se,M)),M}const ge=P.id,v=P.id+"-"+this._currentId;this._currentId++,this.engine.register(v,w);const A=M=>{Array.isArray(M)?M.forEach(A):this.engine.registerTrigger(ge,v,w,M.name,M)};return P.data.animation.forEach(A),new xc(this,v,se,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(w,P,Q){w>=0&&w<this._microtaskId?this._zone.run(()=>P(Q)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(se=>{const[ge,v]=se;ge(v)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([P,Q]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static{this.\u0275fac=function(P){return new(P||j)(_e.KVO(_e._9s),_e.KVO(as),_e.KVO(_e.SKi))}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})();class Ua{constructor(g,w,P,Q){this.namespaceId=g,this.delegate=w,this.engine=P,this._onDestroy=Q}get data(){return this.delegate.data}destroyNode(g){this.delegate.destroyNode?.(g)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(g,w){return this.delegate.createElement(g,w)}createComment(g){return this.delegate.createComment(g)}createText(g){return this.delegate.createText(g)}appendChild(g,w){this.delegate.appendChild(g,w),this.engine.onInsert(this.namespaceId,w,g,!1)}insertBefore(g,w,P,Q=!0){this.delegate.insertBefore(g,w,P),this.engine.onInsert(this.namespaceId,w,g,Q)}removeChild(g,w,P){this.engine.onRemove(this.namespaceId,w,this.delegate)}selectRootElement(g,w){return this.delegate.selectRootElement(g,w)}parentNode(g){return this.delegate.parentNode(g)}nextSibling(g){return this.delegate.nextSibling(g)}setAttribute(g,w,P,Q){this.delegate.setAttribute(g,w,P,Q)}removeAttribute(g,w,P){this.delegate.removeAttribute(g,w,P)}addClass(g,w){this.delegate.addClass(g,w)}removeClass(g,w){this.delegate.removeClass(g,w)}setStyle(g,w,P,Q){this.delegate.setStyle(g,w,P,Q)}removeStyle(g,w,P){this.delegate.removeStyle(g,w,P)}setProperty(g,w,P){"@"==w.charAt(0)&&w==La?this.disableAnimations(g,!!P):this.delegate.setProperty(g,w,P)}setValue(g,w){this.delegate.setValue(g,w)}listen(g,w,P){return this.delegate.listen(g,w,P)}disableAnimations(g,w){this.engine.disableAnimations(g,w)}}class xc extends Ua{constructor(g,w,P,Q,se){super(w,P,Q,se),this.factory=g,this.namespaceId=w}setProperty(g,w,P){"@"==w.charAt(0)?"."==w.charAt(1)&&w==La?this.disableAnimations(g,P=void 0===P||!!P):this.engine.process(this.namespaceId,g,w.slice(1),P):this.delegate.setProperty(g,w,P)}listen(g,w,P){if("@"==w.charAt(0)){const Q=function Bd(j){switch(j){case"body":return document.body;case"document":return document;case"window":return window;default:return j}}(g);let se=w.slice(1),ge="";return"@"!=se.charAt(0)&&([se,ge]=function Mc(j){const g=j.indexOf(".");return[j.substring(0,g),j.slice(g+1)]}(se)),this.engine.listen(this.namespaceId,Q,se,ge,v=>{this.factory.scheduleListenerCallback(v._data||-1,P,v)})}return this.delegate.listen(g,w,P)}}const wr=[{provide:Xe.S6,useClass:zn},{provide:Jo,useFactory:function Zs(){return new Ac}},{provide:as,useClass:(()=>{class j extends as{constructor(w,P,Q,se){super(w.body,P,Q)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(P){return new(P||j)(_e.KVO(At.qQ),_e.KVO(wn),_e.KVO(Jo),_e.KVO(_e.o8S))}}static{this.\u0275prov=_e.jDH({token:j,factory:j.\u0275fac})}}return j})()},{provide:_e._9s,useFactory:function Ft(j,g,w){return new ac(j,g,w)},deps:[d.B7,as,_e.SKi]}],$o=[{provide:wn,useFactory:()=>new $u},{provide:_e.bc$,useValue:"BrowserAnimations"},...wr],zo=[{provide:wn,useClass:os},{provide:_e.bc$,useValue:"NoopAnimations"},...wr];let pr=(()=>{class j{static withConfig(w){return{ngModule:j,providers:w.disableAnimations?zo:$o}}static{this.\u0275fac=function(P){return new(P||j)}}static{this.\u0275mod=_e.$C({type:j})}static{this.\u0275inj=_e.G2t({providers:$o,imports:[d.Bb]})}}return j})();var Ba=W(3695);let uc=(()=>{class j{static{this.\u0275fac=function(P){return new(P||j)}}static{this.\u0275mod=_e.$C({type:j,bootstrap:[be]})}static{this.\u0275inj=_e.G2t({imports:[d.Bb,$e,xi,Pe.iI,ke.YN,ke.X1,Ba._T,pr,fe.bf.initializeApp(Ce_firebase),Te.cM,pe.y5]})}}return j})();d.sG().bootstrapModule(uc).catch(j=>console.error(j))},4412:(en,at,W)=>{W.d(at,{t:()=>fe});var d=W(1413);class fe extends d.B{constructor(pe){super(),this._value=pe}get value(){return this.getValue()}_subscribe(pe){const ke=super._subscribe(pe);return!ke.closed&&pe.next(this._value),ke}getValue(){const{hasError:pe,thrownError:ke,_value:Pe}=this;if(pe)throw ke;return this._throwIfClosed(),Pe}next(pe){super.next(this._value=pe)}}},1985:(en,at,W)=>{W.d(at,{c:()=>Qe});var d=W(7707),fe=W(8359),Te=W(3494),pe=W(1203),ke=W(1026),Pe=W(8071),_e=W(9786);let Qe=(()=>{class Ve{constructor(dt){dt&&(this._subscribe=dt)}lift(dt){const St=new Ve;return St.source=this,St.operator=dt,St}subscribe(dt,St,It){const Nt=function Ce(Ve){return Ve&&Ve instanceof d.vU||function be(Ve){return Ve&&(0,Pe.T)(Ve.next)&&(0,Pe.T)(Ve.error)&&(0,Pe.T)(Ve.complete)}(Ve)&&(0,fe.Uv)(Ve)}(dt)?dt:new d.Ms(dt,St,It);return(0,_e.Y)(()=>{const{operator:Mt,source:an}=this;Nt.add(Mt?Mt.call(Nt,an):an?this._subscribe(Nt):this._trySubscribe(Nt))}),Nt}_trySubscribe(dt){try{return this._subscribe(dt)}catch(St){dt.error(St)}}forEach(dt,St){return new(St=$e(St))((It,Nt)=>{const Mt=new d.Ms({next:an=>{try{dt(an)}catch(At){Nt(At),Mt.unsubscribe()}},error:Nt,complete:It});this.subscribe(Mt)})}_subscribe(dt){var St;return null===(St=this.source)||void 0===St?void 0:St.subscribe(dt)}[Te.s](){return this}pipe(...dt){return(0,pe.m)(dt)(this)}toPromise(dt){return new(dt=$e(dt))((St,It)=>{let Nt;this.subscribe(Mt=>Nt=Mt,Mt=>It(Mt),()=>St(Nt))})}}return Ve.create=mt=>new Ve(mt),Ve})();function $e(Ve){var mt;return null!==(mt=Ve??ke.$.Promise)&&void 0!==mt?mt:Promise}},1413:(en,at,W)=>{W.d(at,{B:()=>_e});var d=W(1985),fe=W(8359);const pe=(0,W(1853).L)($e=>function(){$e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=W(7908),Pe=W(9786);let _e=(()=>{class $e extends d.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ce){const Ve=new Qe(this,this);return Ve.operator=Ce,Ve}_throwIfClosed(){if(this.closed)throw new pe}next(Ce){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ve of this.currentObservers)Ve.next(Ce)}})}error(Ce){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ce;const{observers:Ve}=this;for(;Ve.length;)Ve.shift().error(Ce)}})}complete(){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ce;return(null===(Ce=this.observers)||void 0===Ce?void 0:Ce.length)>0}_trySubscribe(Ce){return this._throwIfClosed(),super._trySubscribe(Ce)}_subscribe(Ce){return this._throwIfClosed(),this._checkFinalizedStatuses(Ce),this._innerSubscribe(Ce)}_innerSubscribe(Ce){const{hasError:Ve,isStopped:mt,observers:dt}=this;return Ve||mt?fe.Kn:(this.currentObservers=null,dt.push(Ce),new fe.yU(()=>{this.currentObservers=null,(0,ke.o)(dt,Ce)}))}_checkFinalizedStatuses(Ce){const{hasError:Ve,thrownError:mt,isStopped:dt}=this;Ve?Ce.error(mt):dt&&Ce.complete()}asObservable(){const Ce=new d.c;return Ce.source=this,Ce}}return $e.create=(be,Ce)=>new Qe(be,Ce),$e})();class Qe extends _e{constructor(be,Ce){super(),this.destination=be,this.source=Ce}next(be){var Ce,Ve;null===(Ve=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.next)||void 0===Ve||Ve.call(Ce,be)}error(be){var Ce,Ve;null===(Ve=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.error)||void 0===Ve||Ve.call(Ce,be)}complete(){var be,Ce;null===(Ce=null===(be=this.destination)||void 0===be?void 0:be.complete)||void 0===Ce||Ce.call(be)}_subscribe(be){var Ce,Ve;return null!==(Ve=null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(be))&&void 0!==Ve?Ve:fe.Kn}}},7707:(en,at,W)=>{W.d(at,{Ms:()=>It,vU:()=>Ve});var d=W(8071),fe=W(8359),Te=W(1026),pe=W(5334),ke=W(5343);const Pe=$e("C",void 0,void 0);function $e(me,qe,Me){return{kind:me,value:qe,error:Me}}var be=W(9270),Ce=W(9786);class Ve extends fe.yU{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,fe.Uv)(qe)&&qe.add(this)):this.destination=At}static create(qe,Me,gt){return new It(qe,Me,gt)}next(qe){this.isStopped?an(function Qe(me){return $e("N",me,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?an(function _e(me){return $e("E",void 0,me)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?an(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function dt(me,qe){return mt.call(me,qe)}class St{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:Me}=this;if(Me.next)try{Me.next(qe)}catch(gt){Nt(gt)}}error(qe){const{partialObserver:Me}=this;if(Me.error)try{Me.error(qe)}catch(gt){Nt(gt)}else Nt(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(Me){Nt(Me)}}}class It extends Ve{constructor(qe,Me,gt){let _t;if(super(),(0,d.T)(qe)||!qe)_t={next:qe??void 0,error:Me??void 0,complete:gt??void 0};else{let Ht;this&&Te.$.useDeprecatedNextContext?(Ht=Object.create(qe),Ht.unsubscribe=()=>this.unsubscribe(),_t={next:qe.next&&dt(qe.next,Ht),error:qe.error&&dt(qe.error,Ht),complete:qe.complete&&dt(qe.complete,Ht)}):_t=qe}this.destination=new St(_t)}}function Nt(me){Te.$.useDeprecatedSynchronousErrorHandling?(0,Ce.l)(me):(0,pe.m)(me)}function an(me,qe){const{onStoppedNotification:Me}=Te.$;Me&&be.f.setTimeout(()=>Me(me,qe))}const At={closed:!0,next:ke.l,error:function Mt(me){throw me},complete:ke.l}},8359:(en,at,W)=>{W.d(at,{Kn:()=>Pe,yU:()=>ke,Uv:()=>_e});var d=W(8071);const Te=(0,W(1853).L)($e=>function(Ce){$e(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((Ve,mt)=>`${mt+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce});var pe=W(7908);class ke{constructor(be){this.initialTeardown=be,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let be;if(!this.closed){this.closed=!0;const{_parentage:Ce}=this;if(Ce)if(this._parentage=null,Array.isArray(Ce))for(const dt of Ce)dt.remove(this);else Ce.remove(this);const{initialTeardown:Ve}=this;if((0,d.T)(Ve))try{Ve()}catch(dt){be=dt instanceof Te?dt.errors:[dt]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const dt of mt)try{Qe(dt)}catch(St){be=be??[],St instanceof Te?be=[...be,...St.errors]:be.push(St)}}if(be)throw new Te(be)}}add(be){var Ce;if(be&&be!==this)if(this.closed)Qe(be);else{if(be instanceof ke){if(be.closed||be._hasParent(this))return;be._addParent(this)}(this._finalizers=null!==(Ce=this._finalizers)&&void 0!==Ce?Ce:[]).push(be)}}_hasParent(be){const{_parentage:Ce}=this;return Ce===be||Array.isArray(Ce)&&Ce.includes(be)}_addParent(be){const{_parentage:Ce}=this;this._parentage=Array.isArray(Ce)?(Ce.push(be),Ce):Ce?[Ce,be]:be}_removeParent(be){const{_parentage:Ce}=this;Ce===be?this._parentage=null:Array.isArray(Ce)&&(0,pe.o)(Ce,be)}remove(be){const{_finalizers:Ce}=this;Ce&&(0,pe.o)(Ce,be),be instanceof ke&&be._removeParent(this)}}ke.EMPTY=(()=>{const $e=new ke;return $e.closed=!0,$e})();const Pe=ke.EMPTY;function _e($e){return $e instanceof ke||$e&&"closed"in $e&&(0,d.T)($e.remove)&&(0,d.T)($e.add)&&(0,d.T)($e.unsubscribe)}function Qe($e){(0,d.T)($e)?$e():$e.unsubscribe()}},1026:(en,at,W)=>{W.d(at,{$:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4572:(en,at,W)=>{W.d(at,{z:()=>be});var d=W(1985),fe=W(3073),Te=W(8455),pe=W(3669),ke=W(6450),Pe=W(9326),_e=W(8496),Qe=W(4360),$e=W(5225);function be(...mt){const dt=(0,Pe.lI)(mt),St=(0,Pe.ms)(mt),{args:It,keys:Nt}=(0,fe.D)(mt);if(0===It.length)return(0,Te.H)([],dt);const Mt=new d.c(function Ce(mt,dt,St=pe.D){return It=>{Ve(dt,()=>{const{length:Nt}=mt,Mt=new Array(Nt);let an=Nt,At=Nt;for(let me=0;me<Nt;me++)Ve(dt,()=>{const qe=(0,Te.H)(mt[me],dt);let Me=!1;qe.subscribe((0,Qe._)(It,gt=>{Mt[me]=gt,Me||(Me=!0,At--),At||It.next(St(Mt.slice()))},()=>{--an||It.complete()}))},It)},It)}}(It,dt,Nt?an=>(0,_e.e)(Nt,an):pe.D));return St?Mt.pipe((0,ke.I)(St)):Mt}function Ve(mt,dt,St){mt?(0,$e.N)(St,mt,dt):dt()}},8793:(en,at,W)=>{W.d(at,{x:()=>ke});var d=W(6365),Te=W(9326),pe=W(8455);function ke(...Pe){return function fe(){return(0,d.U)(1)}()((0,pe.H)(Pe,(0,Te.lI)(Pe)))}},983:(en,at,W)=>{W.d(at,{w:()=>fe});const fe=new(W(1985).c)(ke=>ke.complete())},8455:(en,at,W)=>{W.d(at,{H:()=>qe});var d=W(8750),fe=W(941),Te=W(6745),Pe=W(1985),Qe=W(4761),$e=W(8071),be=W(5225);function Ve(Me,gt){if(!Me)throw new Error("Iterable cannot be null");return new Pe.c(_t=>{(0,be.N)(_t,gt,()=>{const Ht=Me[Symbol.asyncIterator]();(0,be.N)(_t,gt,()=>{Ht.next().then(Jt=>{Jt.done?_t.complete():_t.next(Jt.value)})},0,!0)})})}var mt=W(5055),dt=W(9858),St=W(7441),It=W(5397),Nt=W(7953),Mt=W(591),an=W(5196);function qe(Me,gt){return gt?function me(Me,gt){if(null!=Me){if((0,mt.l)(Me))return function pe(Me,gt){return(0,d.Tg)(Me).pipe((0,Te._)(gt),(0,fe.Q)(gt))}(Me,gt);if((0,St.X)(Me))return function _e(Me,gt){return new Pe.c(_t=>{let Ht=0;return gt.schedule(function(){Ht===Me.length?_t.complete():(_t.next(Me[Ht++]),_t.closed||this.schedule())})})}(Me,gt);if((0,dt.y)(Me))return function ke(Me,gt){return(0,d.Tg)(Me).pipe((0,Te._)(gt),(0,fe.Q)(gt))}(Me,gt);if((0,Nt.T)(Me))return Ve(Me,gt);if((0,It.x)(Me))return function Ce(Me,gt){return new Pe.c(_t=>{let Ht;return(0,be.N)(_t,gt,()=>{Ht=Me[Qe.l](),(0,be.N)(_t,gt,()=>{let Jt,ut;try{({value:Jt,done:ut}=Ht.next())}catch(Nn){return void _t.error(Nn)}ut?_t.complete():_t.next(Jt)},0,!0)}),()=>(0,$e.T)(Ht?.return)&&Ht.return()})}(Me,gt);if((0,an.U)(Me))return function At(Me,gt){return Ve((0,an.C)(Me),gt)}(Me,gt)}throw(0,Mt.L)(Me)}(Me,gt):(0,d.Tg)(Me)}},8750:(en,at,W)=>{W.d(at,{Tg:()=>mt});var d=W(1635),fe=W(7441),Te=W(9858),pe=W(1985),ke=W(5055),Pe=W(7953),_e=W(591),Qe=W(5397),$e=W(5196),be=W(8071),Ce=W(5334),Ve=W(3494);function mt(me){if(me instanceof pe.c)return me;if(null!=me){if((0,ke.l)(me))return function dt(me){return new pe.c(qe=>{const Me=me[Ve.s]();if((0,be.T)(Me.subscribe))return Me.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,fe.X)(me))return function St(me){return new pe.c(qe=>{for(let Me=0;Me<me.length&&!qe.closed;Me++)qe.next(me[Me]);qe.complete()})}(me);if((0,Te.y)(me))return function It(me){return new pe.c(qe=>{me.then(Me=>{qe.closed||(qe.next(Me),qe.complete())},Me=>qe.error(Me)).then(null,Ce.m)})}(me);if((0,Pe.T)(me))return Mt(me);if((0,Qe.x)(me))return function Nt(me){return new pe.c(qe=>{for(const Me of me)if(qe.next(Me),qe.closed)return;qe.complete()})}(me);if((0,$e.U)(me))return function an(me){return Mt((0,$e.C)(me))}(me)}throw(0,_e.L)(me)}function Mt(me){return new pe.c(qe=>{(function At(me,qe){var Me,gt,_t,Ht;return(0,d.sH)(this,void 0,void 0,function*(){try{for(Me=(0,d.xN)(me);!(gt=yield Me.next()).done;)if(qe.next(gt.value),qe.closed)return}catch(Jt){_t={error:Jt}}finally{try{gt&&!gt.done&&(Ht=Me.return)&&(yield Ht.call(Me))}finally{if(_t)throw _t.error}}qe.complete()})})(me,qe).catch(Me=>qe.error(Me))})}},7786:(en,at,W)=>{W.d(at,{h:()=>Pe});var d=W(6365),fe=W(8750),Te=W(983),pe=W(9326),ke=W(8455);function Pe(..._e){const Qe=(0,pe.lI)(_e),$e=(0,pe.R0)(_e,1/0),be=_e;return be.length?1===be.length?(0,fe.Tg)(be[0]):(0,d.U)($e)((0,ke.H)(be,Qe)):Te.w}},7673:(en,at,W)=>{W.d(at,{of:()=>Te});var d=W(9326),fe=W(8455);function Te(...pe){const ke=(0,d.lI)(pe);return(0,fe.H)(pe,ke)}},1584:(en,at,W)=>{W.d(at,{O:()=>ke});var d=W(1985),fe=W(3236),Te=W(9470);function ke(Pe=0,_e,Qe=fe.b){let $e=-1;return null!=_e&&((0,Te.m)(_e)?Qe=_e:$e=_e),new d.c(be=>{let Ce=function pe(Pe){return Pe instanceof Date&&!isNaN(Pe)}(Pe)?+Pe-Qe.now():Pe;Ce<0&&(Ce=0);let Ve=0;return Qe.schedule(function(){be.closed||(be.next(Ve++),0<=$e?this.schedule(void 0,$e):be.complete())},Ce)})}},4360:(en,at,W)=>{W.d(at,{_:()=>fe});var d=W(7707);function fe(pe,ke,Pe,_e,Qe){return new Te(pe,ke,Pe,_e,Qe)}class Te extends d.vU{constructor(ke,Pe,_e,Qe,$e,be){super(ke),this.onFinalize=$e,this.shouldUnsubscribe=be,this._next=Pe?function(Ce){try{Pe(Ce)}catch(Ve){ke.error(Ve)}}:super._next,this._error=Qe?function(Ce){try{Qe(Ce)}catch(Ve){ke.error(Ve)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(Ce){ke.error(Ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ke;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(ke=this.onFinalize)||void 0===ke||ke.call(this))}}}},274:(en,at,W)=>{W.d(at,{H:()=>Te});var d=W(1397),fe=W(8071);function Te(pe,ke){return(0,fe.T)(ke)?(0,d.Z)(pe,ke,1):(0,d.Z)(pe,1)}},152:(en,at,W)=>{W.d(at,{B:()=>pe});var d=W(3236),fe=W(9974),Te=W(4360);function pe(ke,Pe=d.E){return(0,fe.N)((_e,Qe)=>{let $e=null,be=null,Ce=null;const Ve=()=>{if($e){$e.unsubscribe(),$e=null;const dt=be;be=null,Qe.next(dt)}};function mt(){const dt=Ce+ke,St=Pe.now();if(St<dt)return $e=this.schedule(void 0,dt-St),void Qe.add($e);Ve()}_e.subscribe((0,Te._)(Qe,dt=>{be=dt,Ce=Pe.now(),$e||($e=Pe.schedule(mt,ke),Qe.add($e))},()=>{Ve(),Qe.complete()},void 0,()=>{be=$e=null}))})}},9901:(en,at,W)=>{W.d(at,{U:()=>Te});var d=W(9974),fe=W(4360);function Te(pe){return(0,d.N)((ke,Pe)=>{let _e=!1;ke.subscribe((0,fe._)(Pe,Qe=>{_e=!0,Pe.next(Qe)},()=>{_e||Pe.next(pe),Pe.complete()}))})}},3294:(en,at,W)=>{W.d(at,{F:()=>pe});var d=W(3669),fe=W(9974),Te=W(4360);function pe(Pe,_e=d.D){return Pe=Pe??ke,(0,fe.N)((Qe,$e)=>{let be,Ce=!0;Qe.subscribe((0,Te._)($e,Ve=>{const mt=_e(Ve);(Ce||!Pe(be,mt))&&(Ce=!1,be=mt,$e.next(Ve))}))})}function ke(Pe,_e){return Pe===_e}},5964:(en,at,W)=>{W.d(at,{p:()=>Te});var d=W(9974),fe=W(4360);function Te(pe,ke){return(0,d.N)((Pe,_e)=>{let Qe=0;Pe.subscribe((0,fe._)(_e,$e=>pe.call(ke,$e,Qe++)&&_e.next($e)))})}},980:(en,at,W)=>{W.d(at,{j:()=>fe});var d=W(9974);function fe(Te){return(0,d.N)((pe,ke)=>{try{pe.subscribe(ke)}finally{ke.add(Te)}})}},1594:(en,at,W)=>{W.d(at,{$:()=>_e});var d=W(9350),fe=W(5964),Te=W(6697),pe=W(9901),ke=W(3774),Pe=W(3669);function _e(Qe,$e){const be=arguments.length>=2;return Ce=>Ce.pipe(Qe?(0,fe.p)((Ve,mt)=>Qe(Ve,mt,Ce)):Pe.D,(0,Te.s)(1),be?(0,pe.U)($e):(0,ke.v)(()=>new d.G))}},6354:(en,at,W)=>{W.d(at,{T:()=>Te});var d=W(9974),fe=W(4360);function Te(pe,ke){return(0,d.N)((Pe,_e)=>{let Qe=0;Pe.subscribe((0,fe._)(_e,$e=>{_e.next(pe.call(ke,$e,Qe++))}))})}},6365:(en,at,W)=>{W.d(at,{U:()=>Te});var d=W(1397),fe=W(3669);function Te(pe=1/0){return(0,d.Z)(fe.D,pe)}},1397:(en,at,W)=>{W.d(at,{Z:()=>Qe});var d=W(6354),fe=W(8750),Te=W(9974),pe=W(5225),ke=W(4360),_e=W(8071);function Qe($e,be,Ce=1/0){return(0,_e.T)(be)?Qe((Ve,mt)=>(0,d.T)((dt,St)=>be(Ve,dt,mt,St))((0,fe.Tg)($e(Ve,mt))),Ce):("number"==typeof be&&(Ce=be),(0,Te.N)((Ve,mt)=>function Pe($e,be,Ce,Ve,mt,dt,St,It){const Nt=[];let Mt=0,an=0,At=!1;const me=()=>{At&&!Nt.length&&!Mt&&be.complete()},qe=gt=>Mt<Ve?Me(gt):Nt.push(gt),Me=gt=>{dt&&be.next(gt),Mt++;let _t=!1;(0,fe.Tg)(Ce(gt,an++)).subscribe((0,ke._)(be,Ht=>{mt?.(Ht),dt?qe(Ht):be.next(Ht)},()=>{_t=!0},void 0,()=>{if(_t)try{for(Mt--;Nt.length&&Mt<Ve;){const Ht=Nt.shift();St?(0,pe.N)(be,St,()=>Me(Ht)):Me(Ht)}me()}catch(Ht){be.error(Ht)}}))};return $e.subscribe((0,ke._)(be,qe,()=>{At=!0,me()})),()=>{It?.()}}(Ve,mt,$e,Ce)))}},941:(en,at,W)=>{W.d(at,{Q:()=>pe});var d=W(5225),fe=W(9974),Te=W(4360);function pe(ke,Pe=0){return(0,fe.N)((_e,Qe)=>{_e.subscribe((0,Te._)(Qe,$e=>(0,d.N)(Qe,ke,()=>Qe.next($e),Pe),()=>(0,d.N)(Qe,ke,()=>Qe.complete(),Pe),$e=>(0,d.N)(Qe,ke,()=>Qe.error($e),Pe)))})}},2816:(en,at,W)=>{W.d(at,{S:()=>pe});var d=W(9974),fe=W(4360);function pe(ke,Pe){return(0,d.N)(function Te(ke,Pe,_e,Qe,$e){return(be,Ce)=>{let Ve=_e,mt=Pe,dt=0;be.subscribe((0,fe._)(Ce,St=>{const It=dt++;mt=Ve?ke(mt,St,It):(Ve=!0,St),Qe&&Ce.next(mt)},$e&&(()=>{Ve&&Ce.next(mt),Ce.complete()})))}}(ke,Pe,arguments.length>=2,!0))}},7647:(en,at,W)=>{W.d(at,{u:()=>ke});var d=W(8750),fe=W(1413),Te=W(7707),pe=W(9974);function ke(_e={}){const{connector:Qe=(()=>new fe.B),resetOnError:$e=!0,resetOnComplete:be=!0,resetOnRefCountZero:Ce=!0}=_e;return Ve=>{let mt,dt,St,It=0,Nt=!1,Mt=!1;const an=()=>{dt?.unsubscribe(),dt=void 0},At=()=>{an(),mt=St=void 0,Nt=Mt=!1},me=()=>{const qe=mt;At(),qe?.unsubscribe()};return(0,pe.N)((qe,Me)=>{It++,!Mt&&!Nt&&an();const gt=St=St??Qe();Me.add(()=>{It--,0===It&&!Mt&&!Nt&&(dt=Pe(me,Ce))}),gt.subscribe(Me),!mt&&It>0&&(mt=new Te.Ms({next:_t=>gt.next(_t),error:_t=>{Mt=!0,an(),dt=Pe(At,$e,_t),gt.error(_t)},complete:()=>{Nt=!0,an(),dt=Pe(At,be),gt.complete()}}),(0,d.Tg)(qe).subscribe(mt))})(Ve)}}function Pe(_e,Qe,...$e){if(!0===Qe)return void _e();if(!1===Qe)return;const be=new Te.Ms({next:()=>{be.unsubscribe(),_e()}});return(0,d.Tg)(Qe(...$e)).subscribe(be)}},9172:(en,at,W)=>{W.d(at,{Z:()=>pe});var d=W(8793),fe=W(9326),Te=W(9974);function pe(...ke){const Pe=(0,fe.lI)(ke);return(0,Te.N)((_e,Qe)=>{(Pe?(0,d.x)(ke,_e,Pe):(0,d.x)(ke,_e)).subscribe(Qe)})}},6745:(en,at,W)=>{W.d(at,{_:()=>fe});var d=W(9974);function fe(Te,pe=0){return(0,d.N)((ke,Pe)=>{Pe.add(Te.schedule(()=>ke.subscribe(Pe),pe))})}},5558:(en,at,W)=>{W.d(at,{n:()=>pe});var d=W(8750),fe=W(9974),Te=W(4360);function pe(ke,Pe){return(0,fe.N)((_e,Qe)=>{let $e=null,be=0,Ce=!1;const Ve=()=>Ce&&!$e&&Qe.complete();_e.subscribe((0,Te._)(Qe,mt=>{$e?.unsubscribe();let dt=0;const St=be++;(0,d.Tg)(ke(mt,St)).subscribe($e=(0,Te._)(Qe,It=>Qe.next(Pe?Pe(mt,It,St,dt++):It),()=>{$e=null,Ve()}))},()=>{Ce=!0,Ve()}))})}},6697:(en,at,W)=>{W.d(at,{s:()=>pe});var d=W(983),fe=W(9974),Te=W(4360);function pe(ke){return ke<=0?()=>d.w:(0,fe.N)((Pe,_e)=>{let Qe=0;Pe.subscribe((0,Te._)(_e,$e=>{++Qe<=ke&&(_e.next($e),ke<=Qe&&_e.complete())}))})}},6977:(en,at,W)=>{W.d(at,{Q:()=>ke});var d=W(9974),fe=W(4360),Te=W(8750),pe=W(5343);function ke(Pe){return(0,d.N)((_e,Qe)=>{(0,Te.Tg)(Pe).subscribe((0,fe._)(Qe,()=>Qe.complete(),pe.l)),!Qe.closed&&_e.subscribe(Qe)})}},8141:(en,at,W)=>{W.d(at,{M:()=>ke});var d=W(8071),fe=W(9974),Te=W(4360),pe=W(3669);function ke(Pe,_e,Qe){const $e=(0,d.T)(Pe)||_e||Qe?{next:Pe,error:_e,complete:Qe}:Pe;return $e?(0,fe.N)((be,Ce)=>{var Ve;null===(Ve=$e.subscribe)||void 0===Ve||Ve.call($e);let mt=!0;be.subscribe((0,Te._)(Ce,dt=>{var St;null===(St=$e.next)||void 0===St||St.call($e,dt),Ce.next(dt)},()=>{var dt;mt=!1,null===(dt=$e.complete)||void 0===dt||dt.call($e),Ce.complete()},dt=>{var St;mt=!1,null===(St=$e.error)||void 0===St||St.call($e,dt),Ce.error(dt)},()=>{var dt,St;mt&&(null===(dt=$e.unsubscribe)||void 0===dt||dt.call($e)),null===(St=$e.finalize)||void 0===St||St.call($e)}))}):pe.D}},3774:(en,at,W)=>{W.d(at,{v:()=>pe});var d=W(9350),fe=W(9974),Te=W(4360);function pe(Pe=ke){return(0,fe.N)((_e,Qe)=>{let $e=!1;_e.subscribe((0,Te._)(Qe,be=>{$e=!0,Qe.next(be)},()=>$e?Qe.complete():Qe.error(Pe())))})}function ke(){return new d.G}},6780:(en,at,W)=>{W.d(at,{R:()=>ke});var d=W(8359);class fe extends d.yU{constructor(_e,Qe){super()}schedule(_e,Qe=0){return this}}const Te={setInterval(Pe,_e,...Qe){const{delegate:$e}=Te;return $e?.setInterval?$e.setInterval(Pe,_e,...Qe):setInterval(Pe,_e,...Qe)},clearInterval(Pe){const{delegate:_e}=Te;return(_e?.clearInterval||clearInterval)(Pe)},delegate:void 0};var pe=W(7908);class ke extends fe{constructor(_e,Qe){super(_e,Qe),this.scheduler=_e,this.work=Qe,this.pending=!1}schedule(_e,Qe=0){var $e;if(this.closed)return this;this.state=_e;const be=this.id,Ce=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(Ce,be,Qe)),this.pending=!0,this.delay=Qe,this.id=null!==($e=this.id)&&void 0!==$e?$e:this.requestAsyncId(Ce,this.id,Qe),this}requestAsyncId(_e,Qe,$e=0){return Te.setInterval(_e.flush.bind(_e,this),$e)}recycleAsyncId(_e,Qe,$e=0){if(null!=$e&&this.delay===$e&&!1===this.pending)return Qe;null!=Qe&&Te.clearInterval(Qe)}execute(_e,Qe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(_e,Qe);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,Qe){let be,$e=!1;try{this.work(_e)}catch(Ce){$e=!0,be=Ce||new Error("Scheduled action threw falsy error")}if($e)return this.unsubscribe(),be}unsubscribe(){if(!this.closed){const{id:_e,scheduler:Qe}=this,{actions:$e}=Qe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.o)($e,this),null!=_e&&(this.id=this.recycleAsyncId(Qe,_e,null)),this.delay=null,super.unsubscribe()}}}},9687:(en,at,W)=>{W.d(at,{q:()=>Te});var d=W(6129);class fe{constructor(ke,Pe=fe.now){this.schedulerActionCtor=ke,this.now=Pe}schedule(ke,Pe=0,_e){return new this.schedulerActionCtor(this,ke).schedule(_e,Pe)}}fe.now=d.U.now;class Te extends fe{constructor(ke,Pe=fe.now){super(ke,Pe),this.actions=[],this._active=!1}flush(ke){const{actions:Pe}=this;if(this._active)return void Pe.push(ke);let _e;this._active=!0;do{if(_e=ke.execute(ke.state,ke.delay))break}while(ke=Pe.shift());if(this._active=!1,_e){for(;ke=Pe.shift();)ke.unsubscribe();throw _e}}}},3236:(en,at,W)=>{W.d(at,{E:()=>Te,b:()=>pe});var d=W(6780);const Te=new(W(9687).q)(d.R),pe=Te},6129:(en,at,W)=>{W.d(at,{U:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},9270:(en,at,W)=>{W.d(at,{f:()=>d});const d={setTimeout(fe,Te,...pe){const{delegate:ke}=d;return ke?.setTimeout?ke.setTimeout(fe,Te,...pe):setTimeout(fe,Te,...pe)},clearTimeout(fe){const{delegate:Te}=d;return(Te?.clearTimeout||clearTimeout)(fe)},delegate:void 0}},4761:(en,at,W)=>{W.d(at,{l:()=>fe});const fe=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(en,at,W)=>{W.d(at,{s:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(en,at,W)=>{W.d(at,{G:()=>fe});const fe=(0,W(1853).L)(Te=>function(){Te(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(en,at,W)=>{W.d(at,{R0:()=>Pe,lI:()=>ke,ms:()=>pe});var d=W(8071),fe=W(9470);function Te(_e){return _e[_e.length-1]}function pe(_e){return(0,d.T)(Te(_e))?_e.pop():void 0}function ke(_e){return(0,fe.m)(Te(_e))?_e.pop():void 0}function Pe(_e,Qe){return"number"==typeof Te(_e)?_e.pop():Qe}},3073:(en,at,W)=>{W.d(at,{D:()=>ke});const{isArray:d}=Array,{getPrototypeOf:fe,prototype:Te,keys:pe}=Object;function ke(_e){if(1===_e.length){const Qe=_e[0];if(d(Qe))return{args:Qe,keys:null};if(function Pe(_e){return _e&&"object"==typeof _e&&fe(_e)===Te}(Qe)){const $e=pe(Qe);return{args:$e.map(be=>Qe[be]),keys:$e}}}return{args:_e,keys:null}}},7908:(en,at,W)=>{function d(fe,Te){if(fe){const pe=fe.indexOf(Te);0<=pe&&fe.splice(pe,1)}}W.d(at,{o:()=>d})},1853:(en,at,W)=>{function d(fe){const pe=fe(ke=>{Error.call(ke),ke.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}W.d(at,{L:()=>d})},8496:(en,at,W)=>{function d(fe,Te){return fe.reduce((pe,ke,Pe)=>(pe[ke]=Te[Pe],pe),{})}W.d(at,{e:()=>d})},9786:(en,at,W)=>{W.d(at,{Y:()=>Te,l:()=>pe});var d=W(1026);let fe=null;function Te(ke){if(d.$.useDeprecatedSynchronousErrorHandling){const Pe=!fe;if(Pe&&(fe={errorThrown:!1,error:null}),ke(),Pe){const{errorThrown:_e,error:Qe}=fe;if(fe=null,_e)throw Qe}}else ke()}function pe(ke){d.$.useDeprecatedSynchronousErrorHandling&&fe&&(fe.errorThrown=!0,fe.error=ke)}},5225:(en,at,W)=>{function d(fe,Te,pe,ke=0,Pe=!1){const _e=Te.schedule(function(){pe(),Pe?fe.add(this.schedule(null,ke)):this.unsubscribe()},ke);if(fe.add(_e),!Pe)return _e}W.d(at,{N:()=>d})},3669:(en,at,W)=>{function d(fe){return fe}W.d(at,{D:()=>d})},7441:(en,at,W)=>{W.d(at,{X:()=>d});const d=fe=>fe&&"number"==typeof fe.length&&"function"!=typeof fe},7953:(en,at,W)=>{W.d(at,{T:()=>fe});var d=W(8071);function fe(Te){return Symbol.asyncIterator&&(0,d.T)(Te?.[Symbol.asyncIterator])}},8071:(en,at,W)=>{function d(fe){return"function"==typeof fe}W.d(at,{T:()=>d})},5055:(en,at,W)=>{W.d(at,{l:()=>Te});var d=W(3494),fe=W(8071);function Te(pe){return(0,fe.T)(pe[d.s])}},5397:(en,at,W)=>{W.d(at,{x:()=>Te});var d=W(4761),fe=W(8071);function Te(pe){return(0,fe.T)(pe?.[d.l])}},9858:(en,at,W)=>{W.d(at,{y:()=>fe});var d=W(8071);function fe(Te){return(0,d.T)(Te?.then)}},5196:(en,at,W)=>{W.d(at,{C:()=>Te,U:()=>pe});var d=W(1635),fe=W(8071);function Te(ke){return(0,d.AQ)(this,arguments,function*(){const _e=ke.getReader();try{for(;;){const{value:Qe,done:$e}=yield(0,d.N3)(_e.read());if($e)return yield(0,d.N3)(void 0);yield yield(0,d.N3)(Qe)}}finally{_e.releaseLock()}})}function pe(ke){return(0,fe.T)(ke?.getReader)}},9470:(en,at,W)=>{W.d(at,{m:()=>fe});var d=W(8071);function fe(Te){return Te&&(0,d.T)(Te.schedule)}},9974:(en,at,W)=>{W.d(at,{N:()=>Te,S:()=>fe});var d=W(8071);function fe(pe){return(0,d.T)(pe?.lift)}function Te(pe){return ke=>{if(fe(ke))return ke.lift(function(Pe){try{return pe(Pe,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(en,at,W)=>{W.d(at,{I:()=>pe});var d=W(6354);const{isArray:fe}=Array;function pe(ke){return(0,d.T)(Pe=>function Te(ke,Pe){return fe(Pe)?ke(...Pe):ke(Pe)}(ke,Pe))}},5343:(en,at,W)=>{function d(){}W.d(at,{l:()=>d})},1203:(en,at,W)=>{W.d(at,{F:()=>fe,m:()=>Te});var d=W(3669);function fe(...pe){return Te(pe)}function Te(pe){return 0===pe.length?d.D:1===pe.length?pe[0]:function(Pe){return pe.reduce((_e,Qe)=>Qe(_e),Pe)}}},5334:(en,at,W)=>{W.d(at,{m:()=>Te});var d=W(1026),fe=W(9270);function Te(pe){fe.f.setTimeout(()=>{const{onUnhandledError:ke}=d.$;if(!ke)throw pe;ke(pe)})}},591:(en,at,W)=>{function d(fe){return new TypeError(`You provided ${null!==fe&&"object"==typeof fe?"an invalid object":`'${fe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(at,{L:()=>d})},9969:(en,at,W)=>{W.d(at,{FX:()=>an,K2:()=>_e,Ro:()=>fe,S6:()=>d,hZ:()=>pe,i0:()=>ke,iF:()=>Qe,kY:()=>Ce,kp:()=>Te,sf:()=>Nt,ui:()=>Mt,wk:()=>$e});class d{}class fe{}const Te="*";function pe(At,me){return{type:7,name:At,definitions:me,options:{}}}function ke(At,me=null){return{type:4,styles:me,timings:At}}function _e(At,me=null){return{type:2,steps:At,options:me}}function Qe(At){return{type:6,styles:At,offset:null}}function $e(At,me,qe){return{type:0,name:At,styles:me,options:qe}}function Ce(At,me,qe=null){return{type:1,expr:At,animation:me,options:qe}}class Nt{constructor(me=0,qe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=me+qe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(me=>me()),this._onDoneFns=[])}onStart(me){this._originalOnStartFns.push(me),this._onStartFns.push(me)}onDone(me){this._originalOnDoneFns.push(me),this._onDoneFns.push(me)}onDestroy(me){this._onDestroyFns.push(me)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(me=>me()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(me=>me()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(me){this._position=this.totalTime?me*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(me){const qe="start"==me?this._onStartFns:this._onDoneFns;qe.forEach(Me=>Me()),qe.length=0}}class Mt{constructor(me){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=me;let qe=0,Me=0,gt=0;const _t=this.players.length;0==_t?queueMicrotask(()=>this._onFinish()):this.players.forEach(Ht=>{Ht.onDone(()=>{++qe==_t&&this._onFinish()}),Ht.onDestroy(()=>{++Me==_t&&this._onDestroy()}),Ht.onStart(()=>{++gt==_t&&this._onStart()})}),this.totalTime=this.players.reduce((Ht,Jt)=>Math.max(Ht,Jt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(me=>me()),this._onDoneFns=[])}init(){this.players.forEach(me=>me.init())}onStart(me){this._onStartFns.push(me)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(me=>me()),this._onStartFns=[])}onDone(me){this._onDoneFns.push(me)}onDestroy(me){this._onDestroyFns.push(me)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(me=>me.play())}pause(){this.players.forEach(me=>me.pause())}restart(){this.players.forEach(me=>me.restart())}finish(){this._onFinish(),this.players.forEach(me=>me.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(me=>me.destroy()),this._onDestroyFns.forEach(me=>me()),this._onDestroyFns=[])}reset(){this.players.forEach(me=>me.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(me){const qe=me*this.totalTime;this.players.forEach(Me=>{const gt=Me.totalTime?Math.min(1,qe/Me.totalTime):1;Me.setPosition(gt)})}getPosition(){const me=this.players.reduce((qe,Me)=>null===qe||Me.totalTime>qe.totalTime?Me:qe,null);return null!=me?me.getPosition():0}beforeDestroy(){this.players.forEach(me=>{me.beforeDestroy&&me.beforeDestroy()})}triggerCallback(me){const qe="start"==me?this._onStartFns:this._onDoneFns;qe.forEach(Me=>Me()),qe.length=0}}const an="!"},177:(en,at,W)=>{W.d(at,{AJ:()=>kr,B3:()=>ro,MD:()=>mo,N0:()=>Pi,QT:()=>Te,Sm:()=>St,Sq:()=>Xn,UE:()=>fs,VF:()=>ke,Vy:()=>ys,Xr:()=>Gn,YU:()=>$n,ZD:()=>pe,_b:()=>jt,aZ:()=>Nt,bT:()=>xs,e1:()=>Ms,fw:()=>It,hb:()=>mt,hj:()=>Qe,qQ:()=>Pe,ux:()=>ii});var d=W(7705);let fe=null;function Te(){return fe}function pe(x){fe||(fe=x)}class ke{}const Pe=new d.nKC("DocumentToken");let _e=(()=>{class x{historyGo(B){throw new Error("Not implemented")}static{this.\u0275fac=function(J){return new(J||x)}}static{this.\u0275prov=d.jDH({token:x,factory:function(){return(0,d.WQX)($e)},providedIn:"platform"})}}return x})();const Qe=new d.nKC("Location Initialized");let $e=(()=>{class x extends _e{constructor(){super(),this._doc=(0,d.WQX)(Pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Te().getBaseHref(this._doc)}onPopState(B){const J=Te().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",B,!1),()=>J.removeEventListener("popstate",B)}onHashChange(B){const J=Te().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",B,!1),()=>J.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,J,Ae){this._history.pushState(B,J,Ae)}replaceState(B,J,Ae){this._history.replaceState(B,J,Ae)}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}static{this.\u0275fac=function(J){return new(J||x)}}static{this.\u0275prov=d.jDH({token:x,factory:function(){return new x},providedIn:"platform"})}}return x})();function be(x,te){if(0==x.length)return te;if(0==te.length)return x;let B=0;return x.endsWith("/")&&B++,te.startsWith("/")&&B++,2==B?x+te.substring(1):1==B?x+te:x+"/"+te}function Ce(x){const te=x.match(/#|\?|$/),B=te&&te.index||x.length;return x.slice(0,B-("/"===x[B-1]?1:0))+x.slice(B)}function Ve(x){return x&&"?"!==x[0]?"?"+x:x}let mt=(()=>{class x{historyGo(B){throw new Error("Not implemented")}static{this.\u0275fac=function(J){return new(J||x)}}static{this.\u0275prov=d.jDH({token:x,factory:function(){return(0,d.WQX)(St)},providedIn:"root"})}}return x})();const dt=new d.nKC("appBaseHref");let St=(()=>{class x extends mt{constructor(B,J){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=J??this._platformLocation.getBaseHrefFromDOM()??(0,d.WQX)(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return be(this._baseHref,B)}path(B=!1){const J=this._platformLocation.pathname+Ve(this._platformLocation.search),Ae=this._platformLocation.hash;return Ae&&B?`${J}${Ae}`:J}pushState(B,J,Ae,ft){const Ct=this.prepareExternalUrl(Ae+Ve(ft));this._platformLocation.pushState(B,J,Ct)}replaceState(B,J,Ae,ft){const Ct=this.prepareExternalUrl(Ae+Ve(ft));this._platformLocation.replaceState(B,J,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}static{this.\u0275fac=function(J){return new(J||x)(d.KVO(_e),d.KVO(dt,8))}}static{this.\u0275prov=d.jDH({token:x,factory:x.\u0275fac,providedIn:"root"})}}return x})(),It=(()=>{class x extends mt{constructor(B,J){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(B){const J=be(this._baseHref,B);return J.length>0?"#"+J:J}pushState(B,J,Ae,ft){let Ct=this.prepareExternalUrl(Ae+Ve(ft));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.pushState(B,J,Ct)}replaceState(B,J,Ae,ft){let Ct=this.prepareExternalUrl(Ae+Ve(ft));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.replaceState(B,J,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}static{this.\u0275fac=function(J){return new(J||x)(d.KVO(_e),d.KVO(dt,8))}}static{this.\u0275prov=d.jDH({token:x,factory:x.\u0275fac})}}return x})(),Nt=(()=>{class x{constructor(B){this._subject=new d.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const J=this._locationStrategy.getBaseHref();this._basePath=function me(x){if(new RegExp("^(https?:)?//").test(x)){const[,B]=x.split(/\/\/[^\/]+/);return B}return x}(Ce(At(J))),this._locationStrategy.onPopState(Ae=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ae.state,type:Ae.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,J=""){return this.path()==this.normalize(B+Ve(J))}normalize(B){return x.stripTrailingSlash(function an(x,te){if(!x||!te.startsWith(x))return te;const B=te.substring(x.length);return""===B||["/",";","?","#"].includes(B[0])?B:te}(this._basePath,At(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,J="",Ae=null){this._locationStrategy.pushState(Ae,"",B,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ve(J)),Ae)}replaceState(B,J="",Ae=null){this._locationStrategy.replaceState(Ae,"",B,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ve(J)),Ae)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)})),()=>{const J=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(J,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",J){this._urlChangeListeners.forEach(Ae=>Ae(B,J))}subscribe(B,J,Ae){return this._subject.subscribe({next:B,error:J,complete:Ae})}static{this.normalizeQueryParams=Ve}static{this.joinWithSlash=be}static{this.stripTrailingSlash=Ce}static{this.\u0275fac=function(J){return new(J||x)(d.KVO(mt))}}static{this.\u0275prov=d.jDH({token:x,factory:function(){return function Mt(){return new Nt((0,d.KVO)(mt))}()},providedIn:"root"})}}return x})();function At(x){return x.replace(/\/index.html$/,"")}function jt(x,te){te=encodeURIComponent(te);for(const B of x.split(";")){const J=B.indexOf("="),[Ae,ft]=-1==J?[B,""]:[B.slice(0,J),B.slice(J+1)];if(Ae.trim()===te)return decodeURIComponent(ft)}return null}const _n=/\s+/,Kn=[];let $n=(()=>{class x{constructor(B,J,Ae,ft){this._iterableDiffers=B,this._keyValueDiffers=J,this._ngEl=Ae,this._renderer=ft,this.initialClasses=Kn,this.stateMap=new Map}set klass(B){this.initialClasses=null!=B?B.trim().split(_n):Kn}set ngClass(B){this.rawClass="string"==typeof B?B.trim().split(_n):B}ngDoCheck(){for(const J of this.initialClasses)this._updateState(J,!0);const B=this.rawClass;if(Array.isArray(B)||B instanceof Set)for(const J of B)this._updateState(J,!0);else if(null!=B)for(const J of Object.keys(B))this._updateState(J,!!B[J]);this._applyStateDiff()}_updateState(B,J){const Ae=this.stateMap.get(B);void 0!==Ae?(Ae.enabled!==J&&(Ae.changed=!0,Ae.enabled=J),Ae.touched=!0):this.stateMap.set(B,{enabled:J,changed:!0,touched:!0})}_applyStateDiff(){for(const B of this.stateMap){const J=B[0],Ae=B[1];Ae.changed?(this._toggleClass(J,Ae.enabled),Ae.changed=!1):Ae.touched||(Ae.enabled&&this._toggleClass(J,!1),this.stateMap.delete(J)),Ae.touched=!1}}_toggleClass(B,J){(B=B.trim()).length>0&&B.split(_n).forEach(Ae=>{J?this._renderer.addClass(this._ngEl.nativeElement,Ae):this._renderer.removeClass(this._ngEl.nativeElement,Ae)})}static{this.\u0275fac=function(J){return new(J||x)(d.rXU(d._q3),d.rXU(d.MKu),d.rXU(d.aKT),d.rXU(d.sFG))}}static{this.\u0275dir=d.FsC({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return x})();class ze{constructor(te,B,J,Ae){this.$implicit=te,this.ngForOf=B,this.index=J,this.count=Ae}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xn=(()=>{class x{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,J,Ae){this._viewContainer=B,this._template=J,this._differs=Ae,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const J=this._viewContainer;B.forEachOperation((Ae,ft,Ct)=>{if(null==Ae.previousIndex)J.createEmbeddedView(this._template,new ze(Ae.item,this._ngForOf,-1,-1),null===Ct?void 0:Ct);else if(null==Ct)J.remove(null===ft?void 0:ft);else if(null!==ft){const cn=J.get(ft);J.move(cn,Ct),di(cn,Ae)}});for(let Ae=0,ft=J.length;Ae<ft;Ae++){const cn=J.get(Ae).context;cn.index=Ae,cn.count=ft,cn.ngForOf=this._ngForOf}B.forEachIdentityChange(Ae=>{di(J.get(Ae.currentIndex),Ae)})}static ngTemplateContextGuard(B,J){return!0}static{this.\u0275fac=function(J){return new(J||x)(d.rXU(d.c1b),d.rXU(d.C4Q),d.rXU(d._q3))}}static{this.\u0275dir=d.FsC({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return x})();function di(x,te){x.context.$implicit=te.item}let xs=(()=>{class x{constructor(B,J){this._viewContainer=B,this._context=new gs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){Kr("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){Kr("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,J){return!0}static{this.\u0275fac=function(J){return new(J||x)(d.rXU(d.c1b),d.rXU(d.C4Q))}}static{this.\u0275dir=d.FsC({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return x})();class gs{constructor(){this.$implicit=null,this.ngIf=null}}function Kr(x,te){if(te&&!te.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,d.Tbb)(te)}'.`)}class no{constructor(te,B){this._viewContainerRef=te,this._templateRef=B,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(te){te&&!this._created?this.create():!te&&this._created&&this.destroy()}}let ii=(()=>{class x{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(B){this._ngSwitch=B,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(B){this._defaultViews.push(B)}_matchCase(B){const J=B==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||J,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),J}_updateDefaultCases(B){if(this._defaultViews.length>0&&B!==this._defaultUsed){this._defaultUsed=B;for(const J of this._defaultViews)J.enforceState(B)}}static{this.\u0275fac=function(J){return new(J||x)}}static{this.\u0275dir=d.FsC({type:x,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return x})(),Ms=(()=>{class x{constructor(B,J,Ae){this.ngSwitch=Ae,Ae._addCase(),this._view=new no(B,J)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(J){return new(J||x)(d.rXU(d.c1b),d.rXU(d.C4Q),d.rXU(ii,9))}}static{this.\u0275dir=d.FsC({type:x,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return x})(),ro=(()=>{class x{constructor(B,J,Ae){this._ngEl=B,this._differs=J,this._renderer=Ae,this._ngStyle=null,this._differ=null}set ngStyle(B){this._ngStyle=B,!this._differ&&B&&(this._differ=this._differs.find(B).create())}ngDoCheck(){if(this._differ){const B=this._differ.diff(this._ngStyle);B&&this._applyChanges(B)}}_setStyle(B,J){const[Ae,ft]=B.split("."),Ct=-1===Ae.indexOf("-")?void 0:d.czy.DashCase;null!=J?this._renderer.setStyle(this._ngEl.nativeElement,Ae,ft?`${J}${ft}`:J,Ct):this._renderer.removeStyle(this._ngEl.nativeElement,Ae,Ct)}_applyChanges(B){B.forEachRemovedItem(J=>this._setStyle(J.key,null)),B.forEachAddedItem(J=>this._setStyle(J.key,J.currentValue)),B.forEachChangedItem(J=>this._setStyle(J.key,J.currentValue))}static{this.\u0275fac=function(J){return new(J||x)(d.rXU(d.aKT),d.rXU(d.MKu),d.rXU(d.sFG))}}static{this.\u0275dir=d.FsC({type:x,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return x})(),mo=(()=>{class x{static{this.\u0275fac=function(J){return new(J||x)}}static{this.\u0275mod=d.$C({type:x})}static{this.\u0275inj=d.G2t({})}}return x})();const kr="browser",xr="server";function fs(x){return x===kr}function ys(x){return x===xr}let Gn=(()=>{class x{static{this.\u0275prov=(0,d.jDH)({token:x,providedIn:"root",factory:()=>new Bi((0,d.KVO)(Pe),window)})}}return x})();class Bi{constructor(te,B){this.document=te,this.window=B,this.offset=()=>[0,0]}setOffset(te){this.offset=Array.isArray(te)?()=>te:te}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(te){this.supportsScrolling()&&this.window.scrollTo(te[0],te[1])}scrollToAnchor(te){if(!this.supportsScrolling())return;const B=function Wi(x,te){const B=x.getElementById(te)||x.getElementsByName(te)[0];if(B)return B;if("function"==typeof x.createTreeWalker&&x.body&&"function"==typeof x.body.attachShadow){const J=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let Ae=J.currentNode;for(;Ae;){const ft=Ae.shadowRoot;if(ft){const Ct=ft.getElementById(te)||ft.querySelector(`[name="${te}"]`);if(Ct)return Ct}Ae=J.nextNode()}}return null}(this.document,te);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(te){this.supportsScrolling()&&(this.window.history.scrollRestoration=te)}scrollToElement(te){const B=te.getBoundingClientRect(),J=B.left+this.window.pageXOffset,Ae=B.top+this.window.pageYOffset,ft=this.offset();this.window.scrollTo(J-ft[0],Ae-ft[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Pi{}},7705:(en,at,W)=>{W.d(at,{$C:()=>Vo,$GK:()=>Cn,$K3:()=>NI,$MX:()=>hh,AVh:()=>Gf,Agw:()=>ig,B4B:()=>mf,BIS:()=>V_,BMQ:()=>pt,C4Q:()=>u_,C5r:()=>mI,Co$:()=>O0,DNE:()=>Bf,EFF:()=>ym,EJ8:()=>po,EmA:()=>Mu,FsC:()=>js,G2t:()=>yr,GBs:()=>lI,GFd:()=>Kt,H3F:()=>OI,H5H:()=>Kb,H8p:()=>fh,HJs:()=>WC,Hbi:()=>OC,JRh:()=>bm,JZv:()=>Un,Jv_:()=>P0,KH2:()=>Tm,KVO:()=>kt,Kam:()=>$f,Kcf:()=>Pv,L39:()=>zC,LfX:()=>xn,Lme:()=>Em,MKu:()=>TE,NAR:()=>Hg,NEm:()=>lC,NYb:()=>sC,Njj:()=>zo,O8t:()=>ft,OA$:()=>lr,OM3:()=>Wa,Ocv:()=>NA,Ol2:()=>k0,PLl:()=>F_,QTQ:()=>zp,Ql9:()=>VA,QuC:()=>Xs,R7$:()=>yg,RV6:()=>Ug,Rfq:()=>St,RxE:()=>ag,SKi:()=>to,SdG:()=>cm,SpI:()=>Rl,TL$:()=>g_,Tbb:()=>Ve,UyX:()=>Ov,VBU:()=>Qs,Vns:()=>Jf,Vt3:()=>a,WHO:()=>LI,WPN:()=>vd,WQX:()=>Gt,XpG:()=>jg,Xx1:()=>va,Y8G:()=>Nd,Z63:()=>bl,ZF7:()=>dh,ZvI:()=>Ld,_9s:()=>wf,_q3:()=>wE,aKT:()=>Wc,aNF:()=>F0,bIt:()=>om,bc$:()=>Wv,bkB:()=>qc,c1b:()=>bv,cWb:()=>jm,czy:()=>zr,e01:()=>UI,e5t:()=>E_,eBV:()=>$o,eq3:()=>z0,fpN:()=>PC,gRc:()=>yC,gXe:()=>Ui,giA:()=>BI,h9k:()=>Ep,hnV:()=>PI,iLQ:()=>_E,j41:()=>au,jDH:()=>Yt,jNT:()=>Bg,k0s:()=>nm,kS0:()=>Xu,kdw:()=>gl,lJ4:()=>$0,lNU:()=>At,l_i:()=>K0,lsd:()=>dI,mGM:()=>cI,mq5:()=>r0,n$t:()=>Ip,nKC:()=>rt,naY:()=>_C,nrm:()=>kg,o8S:()=>Sm,oH4:()=>zI,osQ:()=>Hm,plB:()=>aE,rOR:()=>_v,rXU:()=>Qc,rcV:()=>Kc,sFG:()=>rb,sZ2:()=>k_,sdS:()=>Uh,uvJ:()=>_c,w6W:()=>bT,wOt:()=>me,wni:()=>uI,xGo:()=>$a,xc7:()=>fm,xe9:()=>Iv,xvI:()=>Tf,zZn:()=>vc,zcH:()=>Gc,zjR:()=>Hf,zvX:()=>zb});var d=W(1413),fe=W(8359),Te=W(1985),pe=W(7786),ke=W(4412),Pe=W(7673),_e=W(7647),Qe=W(5558),$e=W(3294);function be(t){for(let n in t)if(t[n]===be)return n;throw Error("Could not find renamed property on target object.")}function Ce(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function Ve(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ve).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function mt(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const dt=be({__forward_ref__:be});function St(t){return t.__forward_ref__=St,t.toString=function(){return Ve(this())},t}function It(t){return Nt(t)?t():t}function Nt(t){return"function"==typeof t&&t.hasOwnProperty(dt)&&t.__forward_ref__===St}function Mt(t){return t&&!!t.\u0275providers}const At="https://g.co/ng/security#xss";class me extends Error{constructor(n,i){super(function qe(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function Me(t){return"string"==typeof t?t:null==t?"":String(t)}function ut(t,n){throw new me(-201,!1)}function Ie(t,n){null==t&&function Je(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Yt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function yr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ir(t){return dr(t,or)||dr(t,Si)}function xn(t){return null!==Ir(t)}function dr(t,n){return t.hasOwnProperty(n)?t[n]:null}function Or(t){return t&&(t.hasOwnProperty(ri)||t.hasOwnProperty(pi))?t[ri]:null}const or=be({\u0275prov:be}),ri=be({\u0275inj:be}),Si=be({ngInjectableDef:be}),pi=be({ngInjectorDef:be});var Cn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Cn||{});let Zn;function Br(t){const n=Zn;return Zn=t,n}function rr(t,n,i){const o=Ir(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&Cn.Optional?null:void 0!==n?n:void ut(Ve(t))}const Un=globalThis;class rt{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Yt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fi={},ss="__NG_DI_FLAG__",hs="ngTempTokenPath",vt=/\n/gm,q="__source";let re;function Re(t){const n=re;return re=t,n}function it(t,n=Cn.Default){if(void 0===re)throw new me(-203,!1);return null===re?rr(t,void 0,n):re.get(t,n&Cn.Optional?null:void 0,n)}function kt(t,n=Cn.Default){return(function Bn(){return Zn}()||it)(It(t),n)}function Gt(t,n=Cn.Default){return kt(t,$t(n))}function $t(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function cr(t){const n=[];for(let i=0;i<t.length;i++){const o=It(t[i]);if(Array.isArray(o)){if(0===o.length)throw new me(900,!1);let l,p=Cn.Default;for(let E=0;E<o.length;E++){const D=o[E],O=xi(D);"number"==typeof O?-1===O?l=D.token:p|=O:l=D}n.push(kt(l,p))}else n.push(kt(o))}return n}function Xt(t,n){return t[ss]=n,t.prototype[ss]=n,t}function xi(t){return t[ss]}function Nr(t){return{toString:t}.toString()}var Li=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Li||{}),Ui=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ui||{});const wi={},Sn=[],Ss=be({\u0275cmp:be}),Xe=be({\u0275dir:be}),Ye=be({\u0275pipe:be}),wt=be({\u0275mod:be}),jt=be({\u0275fac:be}),_n=be({__NG_ELEMENT_ID__:be}),Kn=be({__NG_ENV_ID__:be});function $n(t,n,i){let o=t.length;for(;;){const l=t.indexOf(n,i);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const p=n.length;if(l+p===o||t.charCodeAt(l+p)<=32)return l}i=l+1}}function hr(t,n,i){let o=0;for(;o<i.length;){const l=i[o];if("number"==typeof l){if(0!==l)break;o++;const p=i[o++],E=i[o++],D=i[o++];t.setAttribute(n,E,D,p)}else{const p=l,E=i[++o];ze(p)?t.setProperty(n,p,E):t.setAttribute(n,p,E),o++}}return o}function Ar(t){return 3===t||4===t||6===t}function ze(t){return 64===t.charCodeAt(0)}function Xn(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const l=n[o];"number"==typeof l?i=l:0===i||di(t,i,l,null,-1===i||2===i?n[++o]:null)}}return t}function di(t,n,i,o,l){let p=0,E=t.length;if(-1===n)E=-1;else for(;p<t.length;){const D=t[p++];if("number"==typeof D){if(D===n){E=-1;break}if(D>n){E=p-1;break}}}for(;p<t.length;){const D=t[p];if("number"==typeof D)break;if(D===i){if(null===o)return void(null!==l&&(t[p+1]=l));if(o===t[p+1])return void(t[p+2]=l)}p++,null!==o&&p++,null!==l&&p++}-1!==E&&(t.splice(E,0,n),p=E+1),t.splice(p++,0,i),null!==o&&t.splice(p++,0,o),null!==l&&t.splice(p++,0,l)}const Rs="ng-template";function xs(t,n,i){let o=0,l=!0;for(;o<t.length;){let p=t[o++];if("string"==typeof p&&l){const E=t[o++];if(i&&"class"===p&&-1!==$n(E.toLowerCase(),n,0))return!0}else{if(1===p){for(;o<t.length&&"string"==typeof(p=t[o++]);)if(p.toLowerCase()===n)return!0;return!1}"number"==typeof p&&(l=!1)}}return!1}function gs(t){return 4===t.type&&t.value!==Rs}function Kr(t,n,i){return n===(4!==t.type||i?t.value:Rs)}function no(t,n,i){let o=4;const l=t.attrs||[],p=function fo(t){for(let n=0;n<t.length;n++)if(Ar(t[n]))return n;return t.length}(l);let E=!1;for(let D=0;D<n.length;D++){const O=n[D];if("number"!=typeof O){if(!E)if(4&o){if(o=2|1&o,""!==O&&!Kr(t,O,i)||""===O&&1===n.length){if(ii(o))return!1;E=!0}}else{const K=8&o?O:n[++D];if(8&o&&null!==t.attrs){if(!xs(t.attrs,K,i)){if(ii(o))return!1;E=!0}continue}const Ee=Ms(8&o?"class":O,l,gs(t),i);if(-1===Ee){if(ii(o))return!1;E=!0;continue}if(""!==K){let He;He=Ee>p?"":l[Ee+1].toLowerCase();const st=8&o?He:null;if(st&&-1!==$n(st,K,0)||2&o&&K!==He){if(ii(o))return!1;E=!0}}}}else{if(!E&&!ii(o)&&!ii(O))return!1;if(E&&ii(O))continue;E=!1,o=O|1&o}}return ii(o)||E}function ii(t){return 0==(1&t)}function Ms(t,n,i,o){if(null===n)return-1;let l=0;if(o||!i){let p=!1;for(;l<n.length;){const E=n[l];if(E===t)return l;if(3===E||6===E)p=!0;else{if(1===E||2===E){let D=n[++l];for(;"string"==typeof D;)D=n[++l];continue}if(4===E)break;if(0===E){l+=4;continue}}l+=p?1:2}return-1}return function gi(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function To(t,n,i=!1){for(let o=0;o<n.length;o++)if(no(t,n[o],i))return!0;return!1}function ro(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let l=0;l<t.length;l++)if(t[l]!==o[l])continue e;return!0}}return!1}function Bs(t,n){return t?":not("+n.trim()+")":n}function Ta(t){let n=t[0],i=1,o=2,l="",p=!1;for(;i<t.length;){let E=t[i];if("string"==typeof E)if(2&o){const D=t[++i];l+="["+E+(D.length>0?'="'+D+'"':"")+"]"}else 8&o?l+="."+E:4&o&&(l+=" "+E);else""!==l&&!ii(E)&&(n+=Bs(p,l),l=""),o=E,p=p||!ii(o);i++}return""!==l&&(n+=Bs(p,l)),n}function Qs(t){return Nr(()=>{const n=es(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Li.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ui.Emulated,styles:t.styles||Sn,_:null,schemas:t.schemas||null,tView:null,id:""};Ps(i);const o=t.dependencies;return i.directiveDefs=Ii(o,!1),i.pipeDefs=Ii(o,!0),i.id=function so(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of i)n=Math.imul(31,n)+l.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function Ao(t){return Yn(t)||Ei(t)}function Fo(t){return null!==t}function Vo(t){return Nr(()=>({type:t.type,bootstrap:t.bootstrap||Sn,declarations:t.declarations||Sn,imports:t.imports||Sn,exports:t.exports||Sn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Xo(t,n){if(null==t)return wi;const i={};for(const o in t)if(t.hasOwnProperty(o)){let l=t[o],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),i[l]=o,n&&(n[l]=p)}return i}function js(t){return Nr(()=>{const n=es(t);return Ps(n),n})}function po(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Yn(t){return t[Ss]||null}function Ei(t){return t[Xe]||null}function Wr(t){return t[Ye]||null}function Xs(t){const n=Yn(t)||Ei(t)||Wr(t);return null!==n&&n.standalone}function Mi(t,n){const i=t[wt]||null;if(!i&&!0===n)throw new Error(`Type ${Ve(t)} does not have '\u0275mod' property.`);return i}function es(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||wi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Sn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xo(t.inputs,n),outputs:Xo(t.outputs)}}function Ps(t){t.features?.forEach(n=>n(t))}function Ii(t,n){if(!t)return null;const i=n?Wr:Ao;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(Fo)}const vr=0,Qt=1,In=2,gr=3,_i=4,jr=5,Zr=6,mo=7,kr=8,xr=9,os=10,wn=11,fs=12,ys=13,Wn=14,Fr=15,Jr=16,Gn=17,Bi=18,Wi=19,Gi=20,Pi=21,ts=22,br=23,Ys=24,Fn=25,Gr=1,Ti=2,yi=7,$s=9,Cr=11;function Mr(t){return Array.isArray(t)&&"object"==typeof t[Gr]}function Pr(t){return Array.isArray(t)&&!0===t[Gr]}function vs(t){return 0!=(4&t.flags)}function vi(t){return t.componentOffset>-1}function zs(t){return 1==(1&t.flags)}function qi(t){return!!t.template}function oo(t){return 0!=(512&t[In])}function ai(t,n){return t.hasOwnProperty(jt)?t[jt]:null}let fn=null,Xi=!1;function ki(t){const n=fn;return fn=t,n}const Es={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Co(t){if(!da(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Oa(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Bo(t){t.dirty=!0,function Yo(t){if(void 0===t.liveConsumerNode)return;const n=Xi;Xi=!0;try{for(const i of t.liveConsumerNode)i.dirty||Bo(i)}finally{Xi=n}}(t),t.consumerMarkedDirty?.(t)}function ca(t){return t&&(t.nextProducerIndex=0),ki(t)}function Xa(t,n){if(ki(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(da(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)ua(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Oa(t){ha(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(Co(i),o!==i.version))return!0}return!1}function la(t){if(ha(t),da(t))for(let n=0;n<t.producerNode.length;n++)ua(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ua(t,n){if(function fa(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),ha(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)ua(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],l=t.liveConsumerNode[n];ha(l),l.producerIndexOfThis[o]=n}}function da(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ha(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let sc=null;function ft(t){const n=ki(null);try{return t()}finally{ki(n)}}const cn=()=>{},Hr=(()=>({...Es,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:cn}))();class Qr{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function lr(){return $r}function $r(t){return t.type.prototype.ngOnChanges&&(t.setInput=Lr),ur}function ur(){const t=$i(this),n=t?.current;if(n){const i=t.previous;if(i===wi)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Lr(t,n,i,o){const l=this.declaredInputs[i],p=$i(t)||function ea(t,n){return t[ns]=n}(t,{previous:wi,current:null}),E=p.current||(p.current={}),D=p.previous,O=D[l];E[l]=new Qr(O&&O.currentValue,n,D===wi),t[o]=n}lr.ngInherit=!0;const ns="__ngSimpleChanges__";function $i(t){return t[ns]||null}const Yi=function(t,n,i){};function mn(t){for(;Array.isArray(t);)t=t[vr];return t}function Ns(t,n){return mn(n[t])}function Is(t,n){return mn(n[t.index])}function ta(t,n){return t.data[n]}function yo(t,n){const i=n[t];return Mr(i)?i:i[vr]}function as(t,n){return null==n?null:t[n]}function co(t){t[Gn]=0}function ws(t){1024&t[In]||(t[In]|=1024,Fa(t,1))}function ka(t){1024&t[In]&&(t[In]&=-1025,Fa(t,-1))}function Fa(t,n){let i=t[gr];if(null===i)return;i[jr]+=n;let o=i;for(i=i[gr];null!==i&&(1===n&&1===o[jr]||-1===n&&0===o[jr]);)i[jr]+=n,o=i,i=i[gr]}const zn={lFrame:ti(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ac(){return zn.bindingsEnabled}function Ua(){return null!==zn.skipHydrationRootTNode}function Ft(){return zn.lFrame.lView}function wr(){return zn.lFrame.tView}function $o(t){return zn.lFrame.contextLView=t,t[kr]}function zo(t){return zn.lFrame.contextLView=null,t}function pr(){let t=lc();for(;null!==t&&64===t.type;)t=t.parent;return t}function lc(){return zn.lFrame.currentTNode}function Ro(t,n){const i=zn.lFrame;i.currentTNode=t,i.isParent=n}function Ba(){return zn.lFrame.isParent}function uc(){zn.lFrame.isParent=!1}function P(){const t=zn.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function ge(){return zn.lFrame.bindingIndex++}function v(t){const n=zn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function M(t,n){const i=zn.lFrame;i.bindingIndex=i.bindingRootIndex=t,ee(n)}function ee(t){zn.lFrame.currentDirectiveIndex=t}function he(t){const n=zn.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Ue(){return zn.lFrame.currentQueryIndex}function Ne(t){zn.lFrame.currentQueryIndex=t}function Pt(t){const n=t[Qt];return 2===n.type?n.declTNode:1===n.type?t[Zr]:null}function ln(t,n,i){if(i&Cn.SkipSelf){let l=n,p=t;for(;!(l=l.parent,null!==l||i&Cn.Host||(l=Pt(p),null===l||(p=p[Wn],10&l.type))););if(null===l)return!1;n=l,t=p}const o=zn.lFrame=yn();return o.currentTNode=n,o.lView=t,!0}function nr(t){const n=yn(),i=t[Qt];zn.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function yn(){const t=zn.lFrame,n=null===t?null:t.child;return null===n?ti(t):n}function ti(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function lo(){const t=zn.lFrame;return zn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ps=lo;function zi(){const t=lo();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zi(){return zn.lFrame.selectedIndex}function Da(t){zn.lFrame.selectedIndex=t}function sr(){const t=zn.lFrame;return ta(t.tView,t.selectedIndex)}let tr=!0;function Ur(){return tr}function Ci(t){tr=t}function cs(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const p=t.data[i].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:D,ngAfterViewInit:O,ngAfterViewChecked:K,ngOnDestroy:ce}=p;E&&(t.contentHooks??=[]).push(-i,E),D&&((t.contentHooks??=[]).push(i,D),(t.contentCheckHooks??=[]).push(i,D)),O&&(t.viewHooks??=[]).push(-i,O),K&&((t.viewHooks??=[]).push(i,K),(t.viewCheckHooks??=[]).push(i,K)),null!=ce&&(t.destroyHooks??=[]).push(i,ce)}}function Po(t,n,i){Za(t,n,3,i)}function Di(t,n,i,o){(3&t[In])===i&&Za(t,n,i,o)}function dc(t,n){let i=t[In];(3&i)===n&&(i&=8191,i+=1,t[In]=i)}function Za(t,n,i,o){const p=o??-1,E=n.length-1;let D=0;for(let O=void 0!==o?65535&t[Gn]:0;O<E;O++)if("number"==typeof n[O+1]){if(D=n[O],null!=o&&D>=o)break}else n[O]<0&&(t[Gn]+=65536),(D<p||-1==p)&&(ja(t,i,n,O),t[Gn]=(4294901760&t[Gn])+O+2),O++}function rs(t,n){Yi(4,t,n);const i=ki(null);try{n.call(t)}finally{ki(i),Yi(5,t,n)}}function ja(t,n,i,o){const l=i[o]<0,p=i[o+1],D=t[l?-i[o]:i[o]];l?t[In]>>13<t[Gn]>>16&&(3&t[In])===n&&(t[In]+=8192,rs(D,p)):rs(D,p)}const Ws=-1;class Ko{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function hc(t){return t!==Ws}function il(t){return 32767&t}function sl(t,n){let i=function zu(t){return t>>16}(t),o=n;for(;i>0;)o=o[Wn],i--;return o}let Oo=!0;function ol(t){const n=Oo;return Oo=t,n}const Ml=255,Pl=5;let _a=0;const Fs={};function xa(t,n){const i=cl(t,n);if(-1!==i)return i;const o=n[Qt];o.firstCreatePass&&(t.injectorIndex=n.length,al(o.data,t),al(n,null),al(o.blueprint,null));const l=Ol(t,n),p=t.injectorIndex;if(hc(l)){const E=il(l),D=sl(l,n),O=D[Qt].data;for(let K=0;K<8;K++)n[p+K]=D[E+K]|O[E+K]}return n[p+8]=l,p}function al(t,n){t.push(0,0,0,0,0,0,0,0,n)}function cl(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ol(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,l=n;for(;null!==l;){if(o=Qu(l),null===o)return Ws;if(i++,l=l[Wn],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return Ws}function ll(t,n,i){!function Pc(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(_n)&&(o=i[_n]),null==o&&(o=i[_n]=_a++);const l=o&Ml;n.data[t+(l>>Pl)]|=1<<l}(t,n,i)}function ul(t,n,i){if(i&Cn.Optional||void 0!==t)return t;ut()}function du(t,n,i,o){if(i&Cn.Optional&&void 0===o&&(o=null),!(i&(Cn.Self|Cn.Host))){const l=t[xr],p=Br(void 0);try{return l?l.get(n,o,i&Cn.Optional):rr(n,o,i&Cn.Optional)}finally{Br(p)}}return ul(o,0,i)}function Ku(t,n,i,o=Cn.Default,l){if(null!==t){if(2048&n[In]&&!(o&Cn.Self)){const E=function qu(t,n,i,o,l){let p=t,E=n;for(;null!==p&&null!==E&&2048&E[In]&&!(512&E[In]);){const D=dl(p,E,i,o|Cn.Self,Fs);if(D!==Fs)return D;let O=p.parent;if(!O){const K=E[Gi];if(K){const ce=K.get(i,Fs,o);if(ce!==Fs)return ce}O=Qu(E),E=E[Wn]}p=O}return l}(t,n,i,o,Fs);if(E!==Fs)return E}const p=dl(t,n,i,o,Fs);if(p!==Fs)return p}return du(n,i,o,l)}function dl(t,n,i,o,l){const p=function Qh(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(_n)?t[_n]:void 0;return"number"==typeof n?n>=0?n&Ml:Ha:n}(i);if("function"==typeof p){if(!ln(n,t,o))return o&Cn.Host?ul(l,0,o):du(n,i,o,l);try{let E;if(E=p(o),null!=E||o&Cn.Optional)return E;ut()}finally{ps()}}else if("number"==typeof p){let E=null,D=cl(t,n),O=Ws,K=o&Cn.Host?n[Fr][Zr]:null;for((-1===D||o&Cn.SkipSelf)&&(O=-1===D?Ol(t,n):n[D+8],O!==Ws&&fu(o,!1)?(E=n[Qt],D=il(O),n=sl(O,n)):D=-1);-1!==D;){const ce=n[Qt];if(Wu(p,D,ce.data)){const Ee=kl(D,n,i,E,o,K);if(Ee!==Fs)return Ee}O=n[D+8],O!==Ws&&fu(o,n[Qt].data[D+8]===K)&&Wu(p,D,n)?(E=ce,D=il(O),n=sl(O,n)):D=-1}}return l}function kl(t,n,i,o,l,p){const E=n[Qt],D=E.data[t+8],ce=hu(D,E,i,null==o?vi(D)&&Oo:o!=E&&0!=(3&D.type),l&Cn.Host&&p===D);return null!==ce?Js(n,E,ce,D):Fs}function hu(t,n,i,o,l){const p=t.providerIndexes,E=n.data,D=1048575&p,O=t.directiveStart,ce=p>>20,He=l?D+ce:t.directiveEnd;for(let st=o?D:D+ce;st<He;st++){const xt=E[st];if(st<O&&i===xt||st>=O&&xt.type===i)return st}if(l){const st=E[O];if(st&&qi(st)&&st.type===i)return O}return null}function Js(t,n,i,o){let l=t[i];const p=n.data;if(function Ra(t){return t instanceof Ko}(l)){const E=l;E.resolving&&function _t(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new me(-200,`Circular dependency in DI detected for ${t}${i}`)}(function gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Me(t)}(p[i]));const D=ol(E.canSeeViewProviders);E.resolving=!0;const K=E.injectImpl?Br(E.injectImpl):null;ln(t,o,Cn.Default);try{l=t[i]=E.factory(void 0,p,t,o),n.firstCreatePass&&i>=o.directiveStart&&function Mo(t,n,i){const{ngOnChanges:o,ngOnInit:l,ngDoCheck:p}=n.type.prototype;if(o){const E=$r(n);(i.preOrderHooks??=[]).push(t,E),(i.preOrderCheckHooks??=[]).push(t,E)}l&&(i.preOrderHooks??=[]).push(0-t,l),p&&((i.preOrderHooks??=[]).push(t,p),(i.preOrderCheckHooks??=[]).push(t,p))}(i,p[i],n)}finally{null!==K&&Br(K),ol(D),E.resolving=!1,ps()}}return l}function Wu(t,n,i){return!!(i[n+(t>>Pl)]&1<<t)}function fu(t,n){return!(t&Cn.Self||t&Cn.Host&&n)}class ms{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return Ku(this._tNode,this._lView,n,$t(o),i)}}function Ha(){return new ms(pr(),Ft())}function $a(t){return Nr(()=>{const n=t.prototype.constructor,i=n[jt]||hl(n),o=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==o;){const p=l[jt]||hl(l);if(p&&p!==i)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function hl(t){return Nt(t)?()=>{const n=hl(It(t));return n&&n()}:ai(t)}function Qu(t){const n=t[Qt],i=n.type;return 2===i?n.declTNode:1===i?t[Zr]:null}function Xu(t){return function Nl(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let l=0;for(;l<o;){const p=i[l];if(Ar(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<o&&"string"==typeof i[l];)l++;else{if(p===n)return i[l+1];l+=2}}}return null}(pr(),t)}const Oc="__parameters__";function kc(t,n,i){return Nr(()=>{const o=function Vl(t){return function(...i){if(t){const o=t(...i);for(const l in o)this[l]=o[l]}}}(n);function l(...p){if(this instanceof l)return o.apply(this,p),this;const E=new l(...p);return D.annotation=E,D;function D(O,K,ce){const Ee=O.hasOwnProperty(Oc)?O[Oc]:Object.defineProperty(O,Oc,{value:[]})[Oc];for(;Ee.length<=ce;)Ee.push(null);return(Ee[ce]=Ee[ce]||[]).push(E),O}}return i&&(l.prototype=Object.create(i.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function na(t,n){t.forEach(i=>Array.isArray(i)?na(i,n):n(i))}function fl(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Ll(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function ya(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function No(t,n,i){let o=pl(t,n);return o>=0?t[1|o]=i:(o=~o,function Wd(t,n,i,o){let l=t.length;if(l==n)t.push(i,o);else if(1===l)t.push(o,t[0]),t[0]=i;else{for(l--,t.push(t[l-1],t[l]);l>n;)t[l]=t[l-2],l--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function Gd(t,n){const i=pl(t,n);if(i>=0)return t[1|i]}function pl(t,n){return function gu(t,n,i){let o=0,l=t.length>>i;for(;l!==o;){const p=o+(l-o>>1),E=t[p<<i];if(n===E)return p<<i;E>n?l=p:o=p+1}return~(l<<i)}(t,n,1)}const va=Xt(kc("Optional"),8),gl=Xt(kc("SkipSelf"),4);function gn(t){return 128==(128&t.flags)}var zr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zr||{});const Ka=new Map;let vl=0;const sf="__ngContext__";function ho(t,n){Mr(n)?(t[sf]=n[Wi],function ap(t){Ka.set(t[Wi],t)}(n)):t[sf]=n}let gc;function ql(t,n){return gc(t,n)}function Eo(t){const n=t[gr];return Pr(n)?n[gr]:n}function cd(t){return tc(t[fs])}function rh(t){return tc(t[_i])}function tc(t){for(;null!==t&&!Pr(t);)t=t[_i];return t}function Xl(t,n,i,o,l){if(null!=o){let p,E=!1;Pr(o)?p=o:Mr(o)&&(E=!0,o=o[vr]);const D=mn(o);0===t&&null!==i?null==l?oh(n,i,D):ba(n,i,D,l||null,!0):1===t&&null!==i?ba(n,i,D,l||null,!0):2===t?function lf(t,n,i){const o=ud(t,n);o&&function hp(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,D,E):3===t&&n.destroyNode(D),null!=p&&function Pm(t,n,i,o,l){const p=i[yi];p!==mn(i)&&Xl(n,t,o,p,l);for(let D=Cr;D<i.length;D++){const O=i[D];uf(O[Qt],O,t,n,o,p)}}(n,t,p,i,l)}}function b(t,n,i){return t.createElement(n,i)}function We(t,n){const i=t[$s],o=i.indexOf(n);ka(n),i.splice(o,1)}function bt(t,n){if(t.length<=Cr)return;const i=Cr+n,o=t[i];if(o){const l=o[Jr];null!==l&&l!==t&&We(l,o),n>0&&(t[i-1][_i]=o[_i]);const p=Ll(t,Cr+n);!function u(t,n){uf(t,n,n[wn],2,null,null),n[vr]=null,n[Zr]=null}(o[Qt],o);const E=p[Bi];null!==E&&E.detachView(p[Qt]),o[gr]=null,o[_i]=null,o[In]&=-129}return o}function nn(t,n){if(!(256&n[In])){const i=n[wn];n[br]&&la(n[br]),n[Ys]&&la(n[Ys]),i.destroyNode&&uf(t,n,i,3,null,null),function H(t){let n=t[fs];if(!n)return Vn(t[Qt],t);for(;n;){let i=null;if(Mr(n))i=n[fs];else{const o=n[Cr];o&&(i=o)}if(!i){for(;n&&!n[_i]&&n!==t;)Mr(n)&&Vn(n[Qt],n),n=n[gr];null===n&&(n=t),Mr(n)&&Vn(n[Qt],n),i=n&&n[_i]}n=i}}(n)}}function Vn(t,n){if(!(256&n[In])){n[In]&=-129,n[In]|=256,function ni(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const l=n[i[o]];if(!(l instanceof Ko)){const p=i[o+1];if(Array.isArray(p))for(let E=0;E<p.length;E+=2){const D=l[p[E]],O=p[E+1];Yi(4,D,O);try{O.call(D)}finally{Yi(5,D,O)}}else{Yi(4,l,p);try{p.call(l)}finally{Yi(5,l,p)}}}}}(t,n),function un(t,n){const i=t.cleanup,o=n[mo];if(null!==i)for(let p=0;p<i.length-1;p+=2)if("string"==typeof i[p]){const E=i[p+3];E>=0?o[E]():o[-E].unsubscribe(),p+=2}else i[p].call(o[i[p+1]]);null!==o&&(n[mo]=null);const l=n[Pi];if(null!==l){n[Pi]=null;for(let p=0;p<l.length;p++)(0,l[p])()}}(t,n),1===n[Qt].type&&n[wn].destroy();const i=n[Jr];if(null!==i&&Pr(n[gr])){i!==n[gr]&&We(i,n);const o=n[Bi];null!==o&&o.detachView(t)}!function Cu(t){Ka.delete(t[Wi])}(n)}}function Qo(t,n,i){return function Yl(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[vr];{const{componentOffset:l}=o;if(l>-1){const{encapsulation:p}=t.data[o.directiveStart+l];if(p===Ui.None||p===Ui.Emulated)return null}return Is(o,i)}}(t,n.parent,i)}function ba(t,n,i,o,l){t.insertBefore(n,i,o,l)}function oh(t,n,i){t.appendChild(n,i)}function ld(t,n,i,o,l){null!==o?ba(t,n,i,o,l):oh(t,n,i)}function ud(t,n){return t.parentNode(n)}function dd(t,n,i){return lh(t,n,i)}let Zl,uh,pp,hf,lh=function hd(t,n,i){return 40&t.type?Is(t,i):null};function zc(t,n,i,o){const l=Qo(t,o,n),p=n[wn],D=dd(o.parent||n[Zr],o,n);if(null!=l)if(Array.isArray(i))for(let O=0;O<i.length;O++)ld(p,l,i[O],D,!1);else ld(p,l,i,D,!1);void 0!==Zl&&Zl(p,o,n,i,l)}function fd(t,n){if(null!==n){const i=n.type;if(3&i)return Is(n,t);if(4&i)return Ru(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return fd(t,o);{const l=t[n.index];return Pr(l)?Ru(-1,l):mn(l)}}if(32&i)return ql(n,t)()||mn(t[n.index]);{const o=pd(t,n);return null!==o?Array.isArray(o)?o[0]:fd(Eo(t[Fr]),o):fd(t,n.next)}}return null}function pd(t,n){return null!==n?t[Fr][Zr].projection[n.projection]:null}function Ru(t,n){const i=Cr+t+1;if(i<n.length){const o=n[i],l=o[Qt].firstChild;if(null!==l)return fd(o,l)}return n[yi]}function Mm(t,n,i,o,l,p,E){for(;null!=i;){const D=o[i.index],O=i.type;if(E&&0===n&&(D&&ho(mn(D),o),i.flags|=2),32!=(32&i.flags))if(8&O)Mm(t,n,i.child,o,l,p,!1),Xl(n,t,l,D,p);else if(32&O){const K=ql(i,o);let ce;for(;ce=K();)Xl(n,t,l,ce,p);Xl(n,t,l,D,p)}else 16&O?fp(t,n,o,i,l,p):Xl(n,t,l,D,p);i=E?i.projectionNext:i.next}}function uf(t,n,i,o,l,p){Mm(i,o,t.firstChild,n,l,p,!1)}function fp(t,n,i,o,l,p){const E=i[Fr],O=E[Zr].projection[o.projection];if(Array.isArray(O))for(let K=0;K<O.length;K++)Xl(n,t,l,O[K],p);else{let K=O;const ce=E[gr];gn(o)&&(K.flags|=128),Mm(t,n,K,ce,l,p,!0)}}function p_(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function m_(t,n,i){const{mergedAttrs:o,classes:l,styles:p}=i;null!==o&&hr(t,n,o),null!==l&&p_(t,n,l),null!==p&&function Nm(t,n,i){t.setAttribute(n,"style",i)}(t,n,p)}function gd(t){return function df(){if(void 0===uh&&(uh=null,Un.trustedTypes))try{uh=Un.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return uh}()?.createHTML(t)||t}function g_(t){pp=t}function v_(t){return function Fm(){if(void 0===hf&&(hf=null,Un.trustedTypes))try{hf=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return hf}()?.createScriptURL(t)||t}class eu{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${At})`}}class Mv extends eu{getTypeName(){return"HTML"}}class Vm extends eu{getTypeName(){return"Style"}}class b_ extends eu{getTypeName(){return"Script"}}class Lm extends eu{getTypeName(){return"URL"}}class Um extends eu{getTypeName(){return"ResourceURL"}}function Kc(t){return t instanceof eu?t.changingThisBreaksApplicationSecurity:t}function dh(t,n){const i=function Bm(t){return t instanceof eu&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${At})`)}return i===n}function Pv(t){return new Mv(t)}function jm(t){return new Vm(t)}function Ov(t){return new b_(t)}function Hm(t){return new Lm(t)}function E_(t){return new Um(t)}class I_{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(gd(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch{return null}}}class Nv{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const i=this.inertDocument.createElement("template");return i.innerHTML=gd(n),i}}const kv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hh(t){return(t=String(t)).match(kv)?t:"unsafe:"+t}function tu(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function yd(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const w_=tu("area,br,col,hr,img,wbr"),gp=tu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_p=tu("rp,rt"),pf=yd(w_,yd(gp,tu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yd(_p,tu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yd(_p,gp)),zm=tu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yp=yd(zm,tu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vv=tu("script,style,template");class Km{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let l=this.checkClobberedElement(i,i.nextSibling);if(l){i=l;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!pf.hasOwnProperty(i))return this.sanitizedSomething=!0,!Vv.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let l=0;l<o.length;l++){const p=o.item(l),E=p.name,D=E.toLowerCase();if(!yp.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let O=p.value;zm[D]&&(O=hh(O)),this.buf.push(" ",E,'="',vp(O),'"')}return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();pf.hasOwnProperty(i)&&!w_.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(vp(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const Lv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Uv=/([^\#-~ |!])/g;function vp(t){return t.replace(/&/g,"&amp;").replace(Lv,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Uv,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let bp;function Ep(t,n){let i=null;try{bp=bp||function mp(t){const n=new Nv(t);return function $m(){try{return!!(new window.DOMParser).parseFromString(gd(""),"text/html")}catch{return!1}}()?new I_(n):n}(t);let o=n?String(n):"";i=bp.getInertBodyElement(o);let l=5,p=o;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,o=p,p=i.innerHTML,i=bp.getInertBodyElement(o)}while(o!==p);return gd((new Km).sanitizeChildren(Wm(i)||i))}finally{if(i){const o=Wm(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function Wm(t){return"content"in t&&function Gm(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var vd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(vd||{});function mf(t){const n=gf();return n?n.sanitize(vd.URL,t)||"":dh(t,"URL")?Kc(t):hh(Me(t))}function Qm(t){const n=gf();if(n)return v_(n.sanitize(vd.RESOURCE_URL,t)||"");if(dh(t,"ResourceURL"))return v_(Kc(t));throw new me(904,!1)}function Ip(t,n,i){return function Hv(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Qm:mf}(n,i)(t)}function gf(){const t=Ft();return t&&t[os].sanitizer}const bl=new rt("ENVIRONMENT_INITIALIZER"),S_=new rt("INJECTOR",-1),wp=new rt("INJECTOR_DEF_TYPES");class Tp{get(n,i=Fi){if(i===Fi){const o=new Error(`NullInjectorError: No provider for ${Ve(n)}!`);throw o.name="NullInjectorError",o}return i}}function Mu(t){return{\u0275providers:t}}function R_(...t){return{\u0275providers:_f(0,t),\u0275fromNgModule:!0}}function _f(t,...n){const i=[],o=new Set;let l;const p=E=>{i.push(E)};return na(n,E=>{const D=E;Ap(D,p,[],o)&&(l||=[],l.push(D))}),void 0!==l&&x_(l,p),i}function x_(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:l}=t[i];Zm(l,p=>{n(p,o)})}}function Ap(t,n,i,o){if(!(t=It(t)))return!1;let l=null,p=Or(t);const E=!p&&Yn(t);if(p||E){if(E&&!E.standalone)return!1;l=t}else{const O=t.ngModule;if(p=Or(O),!p)return!1;l=O}const D=o.has(l);if(E){if(D)return!1;if(o.add(l),E.dependencies){const O="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const K of O)Ap(K,n,i,o)}}else{if(!p)return!1;{if(null!=p.imports&&!D){let K;o.add(l);try{na(p.imports,ce=>{Ap(ce,n,i,o)&&(K||=[],K.push(ce))})}finally{}void 0!==K&&x_(K,n)}if(!D){const K=ai(l)||(()=>new l);n({provide:l,useFactory:K,deps:Sn},l),n({provide:wp,useValue:l,multi:!0},l),n({provide:bl,useValue:()=>kt(l),multi:!0},l)}const O=p.providers;if(null!=O&&!D){const K=t;Zm(O,ce=>{n(ce,K)})}}}return l!==t&&void 0!==t.providers}function Zm(t,n){for(let i of t)Mt(i)&&(i=i.\u0275providers),Array.isArray(i)?Zm(i,n):n(i)}const Jm=be({provide:String,useValue:be});function yf(t){return null!==t&&"object"==typeof t&&Jm in t}function nu(t){return"function"==typeof t}const fh=new rt("Set Injector scope."),ph={},M_={};let Pu;function vf(){return void 0===Pu&&(Pu=new Tp),Pu}class _c{}class bd extends _c{get destroyed(){return this._destroyed}constructor(n,i,o,l){super(),this.parent=i,this.source=o,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rg(n,E=>this.processProvider(E)),this.records.set(S_,mh(void 0,this)),l.has("environment")&&this.records.set(_c,mh(void 0,this));const p=this.records.get(fh);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(wp.multi,Sn,Cn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=Re(this),o=Br(void 0);try{return n()}finally{Re(i),Br(o)}}get(n,i=Fi,o=Cn.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Kn))return n[Kn](this);o=$t(o);const p=Re(this),E=Br(void 0);try{if(!(o&Cn.SkipSelf)){let O=this.records.get(n);if(void 0===O){const K=function N_(t){return"function"==typeof t||"object"==typeof t&&t instanceof rt}(n)&&Ir(n);O=K&&this.injectableDefInScope(K)?mh(Ou(n),ph):null,this.records.set(n,O)}if(null!=O)return this.hydrate(n,O)}return(o&Cn.Self?vf():this.parent).get(n,i=o&Cn.Optional&&i===Fi?null:i)}catch(D){if("NullInjectorError"===D.name){if((D[hs]=D[hs]||[]).unshift(Ve(n)),p)throw D;return function Qn(t,n,i,o){const l=t[hs];throw n[q]&&l.unshift(n[q]),t.message=function Ut(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=Ve(n);if(Array.isArray(n))l=n.map(Ve).join(" -> ");else if("object"==typeof n){let p=[];for(let E in n)if(n.hasOwnProperty(E)){let D=n[E];p.push(E+":"+("string"==typeof D?JSON.stringify(D):Ve(D)))}l=`{${p.join(", ")}}`}return`${i}${o?"("+o+")":""}[${l}]: ${t.replace(vt,"\n  ")}`}("\n"+t.message,l,i,o),t.ngTokenPath=l,t[hs]=null,t}(D,n,"R3InjectorError",this.source)}throw D}finally{Br(E),Re(p)}}resolveInjectorInitializers(){const n=Re(this),i=Br(void 0);try{const l=this.get(bl.multi,Sn,Cn.Self);for(const p of l)p()}finally{Re(n),Br(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(Ve(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(n){let i=nu(n=It(n))?n:It(n&&n.provide);const o=function $v(t){return yf(t)?mh(void 0,t.useValue):mh(P_(t),ph)}(n);if(nu(n)||!0!==n.multi)this.records.get(i);else{let l=this.records.get(i);l||(l=mh(void 0,ph,!0),l.factory=()=>cr(l.multi),this.records.set(i,l)),i=n,l.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===ph&&(i.value=M_,i.value=i.factory()),"object"==typeof i.value&&i.value&&function zv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=It(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Ou(t){const n=Ir(t),i=null!==n?n.factory:ai(t);if(null!==i)return i;if(t instanceof rt)throw new me(204,!1);if(t instanceof Function)return function ng(t){const n=t.length;if(n>0)throw ya(n,"?"),new me(204,!1);const i=function Sr(t){return t&&(t[or]||t[Si])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new me(204,!1)}function P_(t,n,i){let o;if(nu(t)){const l=It(t);return ai(l)||Ou(l)}if(yf(t))o=()=>It(t.useValue);else if(function Cp(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...cr(t.deps||[]));else if(function eg(t){return!(!t||!t.useExisting)}(t))o=()=>kt(It(t.useExisting));else{const l=It(t&&(t.useClass||t.provide));if(!function O_(t){return!!t.deps}(t))return ai(l)||Ou(l);o=()=>new l(...cr(t.deps))}return o}function mh(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function rg(t,n){for(const i of t)Array.isArray(i)?rg(i,n):i&&Mt(i)?rg(i.\u0275providers,n):n(i)}const k_=new rt("AppId",{providedIn:"root",factory:()=>Kv}),Kv="ng",F_=new rt("Platform Initializer"),ig=new rt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wv=new rt("AnimationModuleType"),V_=new rt("CSP nonce",{providedIn:"root",factory:()=>function _d(){if(void 0!==pp)return pp;if(typeof document<"u")return document;throw new me(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Mp=(t,n,i)=>null;function Ji(t,n,i=!1){return Mp(t,n,i)}class Jv{}class eb{}class nb{resolveComponentFactory(n){throw function tb(t){const n=Error(`No component factory found for ${Ve(t)}.`);return n.ngComponent=t,n}(n)}}let Wa=(()=>{class t{static{this.NULL=new nb}}return t})();function ru(){return If(pr(),Ft())}function If(t,n){return new Wc(Is(t,n))}let Wc=(()=>{class t{constructor(i){this.nativeElement=i}static{this.__NG_ELEMENT_ID__=ru}}return t})();function kp(t){return t instanceof Wc?t.nativeElement:t}class wf{}let rb=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function ib(){const t=Ft(),i=yo(pr().index,t);return(Mr(i)?i:t)[wn]}()}}return t})(),K_=(()=>{class t{static{this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>null})}}return t})();class ag{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Tf=new ag("16.2.12"),cg={};function Nu(t,n=null,i=null,o){const l=fg(t,n,i,o);return l.resolveInjectorInitializers(),l}function fg(t,n=null,i=null,o,l=new Set){const p=[i||Sn,R_(t)];return o=o||("object"==typeof t?void 0:Ve(t)),new bd(p,n||vf(),o||null,l)}let vc=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Fi}static{this.NULL=new Tp}static create(i,o){if(Array.isArray(i))return Nu({name:""},o,i,"");{const l=i.name??"";return Nu({name:l},i.parent,i.providers,l)}}static{this.\u0275prov=Yt({token:t,providedIn:"any",factory:()=>kt(S_)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function pg(t){return t.ngOriginalError}class Gc{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&pg(n);for(;i&&pg(i);)i=pg(i);return i||null}}function Eh(t){return n=>{setTimeout(t,void 0,n)}}const qc=class ob extends d.B{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let l=n,p=i||(()=>null),E=o;if(n&&"object"==typeof n){const O=n;l=O.next?.bind(O),p=O.error?.bind(O),E=O.complete?.bind(O)}this.__isAsync&&(p=Eh(p),l&&(l=Eh(l)),E&&(E=Eh(E)));const D=super.subscribe({next:l,error:p,complete:E});return n instanceof fe.yU&&n.add(D),D}};function Bp(...t){}class to{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qc(!1),this.onMicrotaskEmpty=new qc(!1),this.onStable=new qc(!1),this.onError=new qc(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&i,l.shouldCoalesceRunChangeDetection=o,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Cf(){const t="function"==typeof Un.requestAnimationFrame;let n=Un[t?"requestAnimationFrame":"setTimeout"],i=Un[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ME(t){const n=()=>{!function xE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Un,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Df(t),t.isCheckStableRunning=!0,ku(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Df(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,l,p,E,D)=>{if(function lb(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(D))return i.invokeTask(l,p,E,D);try{return q_(t),i.invokeTask(l,p,E,D)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&n(),Sf(t)}},onInvoke:(i,o,l,p,E,D,O)=>{try{return q_(t),i.invoke(l,p,E,D,O)}finally{t.shouldCoalesceRunChangeDetection&&n(),Sf(t)}},onHasTask:(i,o,l,p)=>{i.hasTask(l,p),o===l&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,Df(t),ku(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(i,o,l,p)=>(i.handleError(l,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!to.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(to.isInAngularZone())throw new me(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,l){const p=this._inner,E=p.scheduleEventTask("NgZoneEvent: "+l,n,ab,Bp,Bp);try{return p.runTask(E,i,o)}finally{p.cancelTask(E)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const ab={};function ku(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Df(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function q_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Sf(t){t._nesting--,ku(t)}class cb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qc,this.onMicrotaskEmpty=new qc,this.onStable=new qc,this.onError=new qc}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,l){return n.apply(i,o)}}const Q_=new rt("",{providedIn:"root",factory:Rf});function Rf(){const t=Gt(to);let n=!0;const i=new Te.c(l=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(n),l.complete()})}),o=new Te.c(l=>{let p;t.runOutsideAngular(()=>{p=t.onStable.subscribe(()=>{to.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,l.next(!0))})})});const E=t.onUnstable.subscribe(()=>{to.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{p.unsubscribe(),E.unsubscribe()}});return(0,pe.h)(i,o.pipe((0,_e.u)()))}function El(t){return t instanceof Function?t():t}let wh=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>new t})}}return t})();function xf(t){for(;t;){t[In]|=64;const n=Eo(t);if(oo(t)&&!n)return t;t=n}return null}const J_=new rt("",{providedIn:"root",factory:()=>!1});let $p=null;function ty(t,n){return t[n]??iy()}function ny(t,n){const i=iy();i.producerNode?.length&&(t[n]=$p,i.lView=t,$p=_g())}const ry={...Es,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{xf(t.lView)},lView:null};function _g(){return Object.create(ry)}function iy(){return $p??=_g(),$p}const Dr={};function yg(t){sy(wr(),Ft(),Zi()+t,!1)}function sy(t,n,i,o){if(!o)if(3==(3&n[In])){const p=t.preOrderCheckHooks;null!==p&&Po(n,p,i)}else{const p=t.preOrderHooks;null!==p&&Di(n,p,0,i)}Da(i)}function Qc(t,n=Cn.Default){const i=Ft();return null===i?kt(t,n):Ku(pr(),i,It(t),n)}function zp(){throw new Error("invalid")}function Kp(t,n,i,o,l,p,E,D,O,K,ce){const Ee=n.blueprint.slice();return Ee[vr]=l,Ee[In]=140|o,(null!==K||t&&2048&t[In])&&(Ee[In]|=2048),co(Ee),Ee[gr]=Ee[Wn]=t,Ee[kr]=i,Ee[os]=E||t&&t[os],Ee[wn]=D||t&&t[wn],Ee[xr]=O||t&&t[xr]||null,Ee[Zr]=p,Ee[Wi]=function Wl(){return vl++}(),Ee[ts]=ce,Ee[Gi]=K,Ee[Fr]=2==n.type?t[Fr]:Ee,Ee}function Ah(t,n,i,o,l){let p=t.data[n];if(null===p)p=function vg(t,n,i,o,l){const p=lc(),E=Ba(),O=t.data[n]=function yb(t,n,i,o,l,p){let E=n?n.injectorIndex:-1,D=0;return Ua()&&(D|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:E,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:D,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?p:p&&p.parent,i,n,o,l);return null===t.firstChild&&(t.firstChild=O),null!==p&&(E?null==p.child&&null!==O.parent&&(p.child=O):null===p.next&&(p.next=O,O.prev=p)),O}(t,n,i,o,l),function A(){return zn.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=i,p.value=o,p.attrs=l;const E=function So(){const t=zn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();p.injectorIndex=null===E?-1:E.injectorIndex}return Ro(p,!0),p}function Mf(t,n,i,o){if(0===i)return-1;const l=n.length;for(let p=0;p<i;p++)n.push(o),t.blueprint.push(o),t.data.push(null);return l}function oy(t,n,i,o,l){const p=ty(n,br),E=Zi(),D=2&o;try{Da(-1),D&&n.length>Fn&&sy(t,n,Fn,!1),Yi(D?2:0,l);const K=D?p:null,ce=ca(K);try{null!==K&&(K.dirty=!1),i(o,l)}finally{Xa(K,ce)}}finally{D&&null===n[br]&&ny(n,br),Da(E),Yi(D?3:1,l)}}function ay(t,n,i){if(vs(n)){const o=ki(null);try{const p=n.directiveEnd;for(let E=n.directiveStart;E<p;E++){const D=t.data[E];D.contentQueries&&D.contentQueries(1,i[E],E)}}finally{ki(o)}}}function cy(t,n,i){ac()&&(function HE(t,n,i,o){const l=i.directiveStart,p=i.directiveEnd;vi(i)&&function Ib(t,n,i){const o=Is(n,t),l=pb(i);let E=16;i.signals?E=4096:i.onPush&&(E=64);const D=Qp(t,Kp(t,l,null,E,o,n,null,t[os].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=D}(n,i,t.data[l+i.componentOffset]),t.firstCreatePass||xa(i,n),ho(o,n);const E=i.initialInputs;for(let D=l;D<p;D++){const O=t.data[D],K=Js(n,t,D,i);ho(K,n),null!==E&&yy(0,D-l,K,O,0,E),qi(O)&&(yo(i.index,n)[kr]=Js(n,t,D,i))}}(t,n,i,Is(i,n)),64==(64&i.flags)&&Eb(t,n,i))}function ly(t,n,i=Is){const o=n.localNames;if(null!==o){let l=n.index+1;for(let p=0;p<o.length;p+=2){const E=o[p+1],D=-1===E?i(n,t):t[E];t[l++]=D}}}function pb(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=bg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function bg(t,n,i,o,l,p,E,D,O,K,ce){const Ee=Fn+o,He=Ee+l,st=function mb(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:Dr);return i}(Ee,He),xt="function"==typeof K?K():K;return st[Qt]={type:t,blueprint:st,template:i,queries:null,viewQuery:D,declTNode:n,data:st.slice().fill(null,Ee),bindingStartIndex:Ee,expandoStartIndex:He,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:O,consts:xt,incompleteFirstPass:!1,ssrId:ce}}let uy=t=>null;function hy(t,n,i,o){for(let l in t)if(t.hasOwnProperty(l)){i=null===i?{}:i;const p=t[l];null===o?fy(i,n,l,p):o.hasOwnProperty(l)&&fy(i,n,o[l],p)}return i}function fy(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function nc(t,n,i,o,l,p,E,D){const O=Is(n,i);let ce,K=n.inputs;!D&&null!=K&&(ce=K[o])?(Ga(t,i,ce,o,l),vi(n)&&function LE(t,n){const i=yo(n,t);16&i[In]||(i[In]|=64)}(i,n.index)):3&n.type&&(o=function bb(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),l=null!=E?E(l,n.value||"",o):l,p.setProperty(O,o,l))}function Wp(t,n,i,o){if(ac()){const l=null===o?null:{"":-1},p=function gy(t,n){const i=t.directiveRegistry;let o=null,l=null;if(i)for(let p=0;p<i.length;p++){const E=i[p];if(To(n,E.selectors,!1))if(o||(o=[]),qi(E))if(null!==E.findHostDirectiveDefs){const D=[];l=l||new Map,E.findHostDirectiveDefs(E,D,l),o.unshift(...D,E),_y(t,n,D.length)}else o.unshift(E),_y(t,n,0);else l=l||new Map,E.findHostDirectiveDefs?.(E,o,l),o.push(E)}return null===o?null:[o,l]}(t,i);let E,D;null===p?E=D=null:[E,D]=p,null!==E&&py(t,n,i,E,l,D),l&&function $E(t,n,i){if(n){const o=t.localNames=[];for(let l=0;l<n.length;l+=2){const p=i[n[l+1]];if(null==p)throw new me(-301,!1);o.push(n[l],p)}}}(i,o,l)}i.mergedAttrs=Xn(i.mergedAttrs,i.attrs)}function py(t,n,i,o,l,p){for(let K=0;K<o.length;K++)ll(xa(i,n),t,o[K].type);!function Eg(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let K=0;K<o.length;K++){const ce=o[K];ce.providersResolver&&ce.providersResolver(ce)}let E=!1,D=!1,O=Mf(t,n,o.length,null);for(let K=0;K<o.length;K++){const ce=o[K];i.mergedAttrs=Xn(i.mergedAttrs,ce.hostAttrs),Gp(t,i,n,O,ce),zE(O,ce,l),null!==ce.contentQueries&&(i.flags|=4),(null!==ce.hostBindings||null!==ce.hostAttrs||0!==ce.hostVars)&&(i.flags|=64);const Ee=ce.type.prototype;!E&&(Ee.ngOnChanges||Ee.ngOnInit||Ee.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),E=!0),!D&&(Ee.ngOnChanges||Ee.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),D=!0),O++}!function vb(t,n,i){const l=n.directiveEnd,p=t.data,E=n.attrs,D=[];let O=null,K=null;for(let ce=n.directiveStart;ce<l;ce++){const Ee=p[ce],He=i?i.get(Ee):null,xt=He?He.outputs:null;O=hy(Ee.inputs,ce,O,He?He.inputs:null),K=hy(Ee.outputs,ce,K,xt);const qt=null===O||null===E||gs(n)?null:Of(O,ce,E);D.push(qt)}null!==O&&(O.hasOwnProperty("class")&&(n.flags|=8),O.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=D,n.inputs=O,n.outputs=K}(t,i,p)}function Eb(t,n,i){const o=i.directiveStart,l=i.directiveEnd,p=i.index,E=function V(){return zn.lFrame.currentDirectiveIndex}();try{Da(p);for(let D=o;D<l;D++){const O=t.data[D],K=n[D];ee(D),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&my(O,K)}}finally{Da(-1),ee(E)}}function my(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function _y(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function zE(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;qi(n)&&(i[""]=t)}}function Gp(t,n,i,o,l){t.data[o]=l;const p=l.factory||(l.factory=ai(l.type)),E=new Ko(p,qi(l),Qc);t.blueprint[o]=E,i[o]=E,function BE(t,n,i,o,l){const p=l.hostBindings;if(p){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const D=~n.index;(function jE(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(E)!=D&&E.push(D),E.push(i,o,p)}}(t,n,o,Mf(t,i,l.hostVars,Dr),l)}function Il(t,n,i,o,l,p){const E=Is(t,n);!function Pf(t,n,i,o,l,p,E){if(null==p)t.removeAttribute(n,l,i);else{const D=null==E?Me(p):E(p,o||"",l);t.setAttribute(n,l,D,i)}}(n[wn],E,p,t.value,i,o,l)}function yy(t,n,i,o,l,p){const E=p[n];if(null!==E)for(let D=0;D<E.length;)Ig(o,i,E[D++],E[D++],E[D++])}function Ig(t,n,i,o,l){const p=ki(null);try{const E=t.inputTransforms;null!==E&&E.hasOwnProperty(o)&&(l=E[o].call(n,l)),null!==t.setInput?t.setInput(n,l,i,o):n[o]=l}finally{ki(p)}}function Of(t,n,i){let o=null,l=0;for(;l<i.length;){const p=i[l];if(0!==p)if(5!==p){if("number"==typeof p)break;if(t.hasOwnProperty(p)){null===o&&(o=[]);const E=t[p];for(let D=0;D<E.length;D+=2)if(E[D]===n){o.push(p,E[D+1],i[l+1]);break}}l+=2}else l+=2;else l+=4}return o}function qp(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function vy(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const p=i[o+1];if(-1!==p){const E=t.data[p];Ne(i[o]),E.contentQueries(2,n[p],p)}}}function Qp(t,n){return t[fs]?t[ys][_i]=n:t[fs]=n,t[ys]=n,n}function Xp(t,n,i){Ne(0);const o=ki(null);try{n(t,i)}finally{ki(o)}}function by(t){return t[mo]||(t[mo]=[])}function Tg(t){return t.cleanup||(t.cleanup=[])}function Ag(t,n,i){return(null===t||qi(t))&&(i=function Dc(t){for(;Array.isArray(t);){if("object"==typeof t[Gr])return t;t=t[vr]}return null}(i[n.index])),i[wn]}function Vu(t,n){const i=t[xr],o=i?i.get(Gc,null):null;o&&o.handleError(n)}function Ga(t,n,i,o,l){for(let p=0;p<i.length;){const E=i[p++],D=i[p++];Ig(t.data[E],n[E],o,D,l)}}function Gs(t,n,i){const o=Ns(n,t);!function sh(t,n,i){t.setValue(n,i)}(t[wn],o,i)}function Ey(t,n){const i=yo(n,t),o=i[Qt];!function Iy(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const l=i[vr];null!==l&&null===i[ts]&&(i[ts]=Ji(l,i[xr])),Rd(o,i,i[kr])}function Rd(t,n,i){nr(n);try{const o=t.viewQuery;null!==o&&Xp(1,o,i);const l=t.template;null!==l&&oy(t,n,l,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&vy(t,n),t.staticViewQueries&&Xp(2,t.viewQuery,i);const p=t.components;null!==p&&function Nf(t,n){for(let i=0;i<n.length;i++)Ey(t,n[i])}(n,p)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[In]&=-5,zi()}}let Ea=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,l){const p=typeof Zone>"u"?null:Zone.current,E=function Ct(t,n,i){const o=Object.create(Hr);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const l=E=>{o.cleanupFn=E};return o.ref={notify:()=>Bo(o),run:()=>{if(o.dirty=!1,o.hasRun&&!Oa(o))return;o.hasRun=!0;const E=ca(o);try{o.cleanupFn(),o.cleanupFn=cn,o.fn(l)}finally{Xa(o,E)}},cleanup:()=>o.cleanupFn()},o.ref}(i,K=>{this.all.has(K)&&this.queue.set(K,p)},l);let D;this.all.add(E),E.notify();const O=()=>{E.cleanup(),D?.(),this.all.delete(E),this.queue.delete(E)};return D=o?.onDestroy(O),{destroy:O}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Ch(t,n,i){let o=i?t.styles:null,l=i?t.classes:null,p=0;if(null!==n)for(let E=0;E<n.length;E++){const D=n[E];"number"==typeof D?p=D:1==p?l=mt(l,D):2==p&&(o=mt(o,D+": "+n[++E]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=l:t.classesWithoutHost=l}function wl(t,n,i,o,l=!1){for(;null!==i;){const p=n[i.index];null!==p&&o.push(mn(p)),Pr(p)&&Lu(p,o);const E=i.type;if(8&E)wl(t,n,i.child,o);else if(32&E){const D=ql(i,n);let O;for(;O=D();)o.push(O)}else if(16&E){const D=pd(n,i);if(Array.isArray(D))o.push(...D);else{const O=Eo(n[Fr]);wl(O[Qt],O,D,o,!0)}}i=l?i.projectionNext:i.next}return o}function Lu(t,n){for(let i=Cr;i<t.length;i++){const o=t[i],l=o[Qt].firstChild;null!==l&&wl(o[Qt],o,l,n)}t[yi]!==t[vr]&&n.push(t[yi])}function Dh(t,n,i,o=!0){const l=n[os],p=l.rendererFactory,E=l.afterRenderEventManager;p.begin?.(),E?.begin();try{wy(t,n,t.template,i)}catch(O){throw o&&Vu(n,O),O}finally{p.end?.(),l.effectManager?.flush(),E?.end()}}function wy(t,n,i,o){const l=n[In];if(256!=(256&l)){n[os].effectManager?.flush(),nr(n);try{co(n),function se(t){return zn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&oy(t,n,i,2,o);const E=3==(3&l);if(E){const K=t.preOrderCheckHooks;null!==K&&Po(n,K,null)}else{const K=t.preOrderHooks;null!==K&&Di(n,K,0,null),dc(n,0)}if(function Ab(t){for(let n=cd(t);null!==n;n=rh(n)){if(!n[Ti])continue;const i=n[$s];for(let o=0;o<i.length;o++){ws(i[o])}}}(n),Ty(n,2),null!==t.contentQueries&&vy(t,n),E){const K=t.contentCheckHooks;null!==K&&Po(n,K)}else{const K=t.contentHooks;null!==K&&Di(n,K,1),dc(n,1)}!function FE(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=ty(n,Ys);try{for(let l=0;l<i.length;l++){const p=i[l];if(p<0)Da(~p);else{const E=p,D=i[++l],O=i[++l];M(D,E),o.dirty=!1;const K=ca(o);try{O(2,n[E])}finally{Xa(o,K)}}}}finally{null===n[Ys]&&ny(n,Ys),Da(-1)}}(t,n);const D=t.components;null!==D&&Yp(n,D,0);const O=t.viewQuery;if(null!==O&&Xp(2,O,o),E){const K=t.viewCheckHooks;null!==K&&Po(n,K)}else{const K=t.viewHooks;null!==K&&Di(n,K,2),dc(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[In]&=-73,ka(n)}finally{zi()}}}function Ty(t,n){for(let i=cd(t);null!==i;i=rh(i))for(let o=Cr;o<i.length;o++)Cy(i[o],n)}function Ay(t,n,i){Cy(yo(n,t),i)}function Cy(t,n){if(!function oc(t){return 128==(128&t[In])}(t))return;const i=t[Qt],o=t[In];if(80&o&&0===n||1024&o||2===n)wy(i,t,i.template,t[kr]);else if(t[jr]>0){Ty(t,1);const l=i.components;null!==l&&Yp(t,l,1)}}function Yp(t,n,i){for(let o=0;o<n.length;o++)Ay(t,n[o],i)}class Rh{get rootNodes(){const n=this._lView,i=n[Qt];return wl(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kr]}set context(n){this._lView[kr]=n}get destroyed(){return 256==(256&this._lView[In])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[gr];if(Pr(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(bt(n,o),Ll(i,o))}this._attachedToViewContainer=!1}nn(this._lView[Qt],this._lView)}onDestroy(n){!function Sc(t,n){if(256==(256&t[In]))throw new me(911,!1);null===t[Pi]&&(t[Pi]=[]),t[Pi].push(n)}(this._lView,n)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[In]&=-129}reattach(){this._lView[In]|=128}detectChanges(){Dh(this._lView[Qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function T(t,n){uf(t,n,n[wn],2,null,null)}(this._lView[Qt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=n}}class Zp extends Rh{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Dh(n[Qt],n,n[kr],!1)}checkNoChanges(){}get context(){return null}}class Cg extends Wa{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=Yn(n);return new xh(i,this.ngModule)}}function Dy(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class Cb{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=$t(o);const l=this.injector.get(n,cg,o);return l!==cg||i===cg?l:this.parentInjector.get(n,i,o)}}class xh extends eb{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=Dy(n.inputs);if(null!==i)for(const l of o)i.hasOwnProperty(l.propName)&&(l.transform=i[l.propName]);return o}get outputs(){return Dy(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function si(t){return t.map(Ta).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,l){let p=(l=l||this.ngModule)instanceof _c?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const E=p?new Cb(n,p):n,D=E.get(wf,null);if(null===D)throw new me(407,!1);const Ee={rendererFactory:D,sanitizer:E.get(K_,null),effectManager:E.get(Ea,null),afterRenderEventManager:E.get(wh,null)},He=D.createRenderer(null,this.componentDef),st=this.componentDef.selectors[0][0]||"div",xt=o?function gb(t,n,i,o){const p=o.get(J_,!1)||i===Ui.ShadowDom,E=t.selectRootElement(n,p);return function VE(t){uy(t)}(E),E}(He,o,this.componentDef.encapsulation,E):b(He,st,function Dg(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(st)),Jn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let zt=null;null!==xt&&(zt=Ji(xt,E,!0));const Tr=bg(0,null,null,1,0,null,null,null,null,null,null),li=Kp(null,Tr,null,Jn,null,null,Ee,He,E,null,zt);let us,Tc;nr(li);try{const Ud=this.componentDef;let Rm,CE=null;Ud.findHostDirectiveDefs?(Rm=[],CE=new Map,Ud.findHostDirectiveDefs(Ud,Rm,CE),Rm.push(Ud)):Rm=[Ud];const GC=function Db(t,n){const i=t[Qt],o=Fn;return t[o]=n,Ah(i,o,2,"#host",null)}(li,xt),qC=function Ry(t,n,i,o,l,p,E){const D=l[Qt];!function xy(t,n,i,o){for(const l of t)n.mergedAttrs=Xn(n.mergedAttrs,l.hostAttrs);null!==n.mergedAttrs&&(Ch(n,n.mergedAttrs,!0),null!==i&&m_(o,i,n))}(o,t,n,E);let O=null;null!==n&&(O=Ji(n,l[xr]));const K=p.rendererFactory.createRenderer(n,i);let ce=16;i.signals?ce=4096:i.onPush&&(ce=64);const Ee=Kp(l,pb(i),null,ce,l[t.index],t,p,K,null,null,O);return D.firstCreatePass&&_y(D,t,o.length-1),Qp(l,Ee),l[t.index]=Ee}(GC,xt,Ud,Rm,li,Ee,He);Tc=ta(Tr,Fn),xt&&function Rb(t,n,i,o){if(o)hr(t,i,["ng-version",Tf.full]);else{const{attrs:l,classes:p}=function oa(t){const n=[],i=[];let o=1,l=2;for(;o<t.length;){let p=t[o];if("string"==typeof p)2===l?""!==p&&n.push(p,t[++o]):8===l&&i.push(p);else{if(!ii(l))break;l=p}o++}return{attrs:n,classes:i}}(n.selectors[0]);l&&hr(t,i,l),p&&p.length>0&&p_(t,i,p.join(" "))}}(He,Ud,xt,o),void 0!==i&&function My(t,n,i){const o=t.projection=[];for(let l=0;l<n.length;l++){const p=i[l];o.push(null!=p?Array.from(p):null)}}(Tc,this.ngContentSelectors,i),us=function Sb(t,n,i,o,l,p){const E=pr(),D=l[Qt],O=Is(E,l);py(D,l,E,i,null,o);for(let ce=0;ce<i.length;ce++)ho(Js(l,D,E.directiveStart+ce,E),l);Eb(D,l,E),O&&ho(O,l);const K=Js(l,D,E.directiveStart+E.componentOffset,E);if(t[kr]=l[kr]=K,null!==p)for(const ce of p)ce(K,n);return ay(D,E,t),K}(qC,Ud,Rm,CE,li,[Py]),Rd(Tr,li,null)}finally{zi()}return new Sy(this.componentType,us,If(Tc,li),li,Tc)}}class Sy extends Jv{constructor(n,i,o,l,p){super(),this.location=o,this._rootLView=l,this._tNode=p,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Zp(l),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let l;if(null!==o&&(l=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const p=this._rootLView;Ga(p[Qt],p,l,n,i),this.previousInputValues.set(n,i),xf(yo(this._tNode.index,p))}}get injector(){return new ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Py(){const t=pr();cs(Ft()[Qt],t)}function a(t){let n=function Oy(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let l;if(qi(t))l=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new me(903,!1);l=n.\u0275dir}if(l){if(i){o.push(l);const E=t;E.inputs=r(t.inputs),E.inputTransforms=r(t.inputTransforms),E.declaredInputs=r(t.declaredInputs),E.outputs=r(t.outputs);const D=l.hostBindings;D&&h(t,D);const O=l.viewQuery,K=l.contentQueries;if(O&&s(t,O),K&&c(t,K),Ce(t.inputs,l.inputs),Ce(t.declaredInputs,l.declaredInputs),Ce(t.outputs,l.outputs),null!==l.inputTransforms&&(null===E.inputTransforms&&(E.inputTransforms={}),Ce(E.inputTransforms,l.inputTransforms)),qi(l)&&l.data.animation){const ce=t.data;ce.animation=(ce.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let E=0;E<p.length;E++){const D=p[E];D&&D.ngInherit&&D(t),D===a&&(i=!1)}}n=Object.getPrototypeOf(n)}!function e(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const l=t[o];l.hostVars=n+=l.hostVars,l.hostAttrs=Xn(l.hostAttrs,i=Xn(i,l.hostAttrs))}}(o)}function r(t){return t===wi?{}:t===Sn?[]:t}function s(t,n){const i=t.viewQuery;t.viewQuery=i?(o,l)=>{n(o,l),i(o,l)}:n}function c(t,n){const i=t.contentQueries;t.contentQueries=i?(o,l,p)=>{n(o,l,p),i(o,l,p)}:n}function h(t,n){const i=t.hostBindings;t.hostBindings=i?(o,l)=>{n(o,l),i(o,l)}:n}function Kt(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const l=n[o];Array.isArray(l)&&l[2]&&(i[o]=l[2])}t.inputTransforms=i}function bn(t){return!!Hn(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Hn(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ar(t,n,i){return t[n]=i}function Se(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Be(t,n,i,o){const l=Se(t,n,i);return Se(t,n+1,o)||l}function pt(t,n,i,o){const l=Ft();return Se(l,ge(),n)&&(wr(),Il(sr(),l,t,n,i,o)),pt}function qa(t,n,i,o){return Se(t,ge(),i)?n+Me(i)+o:Dr}function Tl(t,n,i,o,l,p){const D=Be(t,function Q(){return zn.lFrame.bindingIndex}(),i,l);return v(2),D?n+Me(i)+o+Me(l)+p:Dr}function Bf(t,n,i,o,l,p,E,D){const O=Ft(),K=wr(),ce=t+Fn,Ee=K.firstCreatePass?function Qy(t,n,i,o,l,p,E,D,O){const K=n.consts,ce=Ah(n,t,4,E||null,as(K,D));Wp(n,i,ce,as(K,O)),cs(n,ce);const Ee=ce.tView=bg(2,ce,o,l,p,n.directiveRegistry,n.pipeRegistry,null,n.schemas,K,null);return null!==n.queries&&(n.queries.template(n,ce),Ee.queries=n.queries.embeddedTView(ce)),ce}(ce,K,O,n,i,o,l,p,E):K.data[ce];Ro(Ee,!1);const He=Og(K,O,Ee,t);Ur()&&zc(K,O,He,Ee),ho(He,O),Qp(O,O[ce]=qp(He,O,He,Ee)),zs(Ee)&&cy(K,O,Ee),null!=E&&ly(O,Ee,D)}let Og=function Lh(t,n,i,o){return Ci(!0),n[wn].createComment("")};function Uh(t){return function Ca(t,n){return t[n]}(function j(){return zn.lFrame.contextLView}(),Fn+t)}function Nd(t,n,i){const o=Ft();return Se(o,ge(),n)&&nc(wr(),sr(),o,t,n,o[wn],i,!1),Nd}function Ng(t,n,i,o,l){const E=l?"class":"style";Ga(t,i,n.inputs[E],E,o)}function au(t,n,i,o){const l=Ft(),p=wr(),E=Fn+t,D=l[wn],O=p.firstCreatePass?function Nb(t,n,i,o,l,p){const E=n.consts,O=Ah(n,t,2,o,as(E,l));return Wp(n,i,O,as(E,p)),null!==O.attrs&&Ch(O,O.attrs,!1),null!==O.mergedAttrs&&Ch(O,O.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,O),O}(E,p,l,n,i,o):p.data[E],K=jf(p,l,O,D,n,t);l[E]=K;const ce=zs(O);return Ro(O,!0),m_(D,K,O),32!=(32&O.flags)&&Ur()&&zc(p,l,K,O),0===function Ai(){return zn.lFrame.elementDepthCount}()&&ho(K,l),function Va(){zn.lFrame.elementDepthCount++}(),ce&&(cy(p,l,O),ay(p,O,l)),null!==o&&ly(l,O),au}function nm(){let t=pr();Ba()?uc():(t=t.parent,Ro(t,!1));const n=t;(function xc(t){return zn.skipHydrationRootTNode===t})(n)&&function Zs(){zn.skipHydrationRootTNode=null}(),function La(){zn.lFrame.elementDepthCount--}();const i=wr();return i.firstCreatePass&&(cs(i,t),vs(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function jd(t){return 0!=(8&t.flags)}(n)&&Ng(i,n,Ft(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function qh(t){return 0!=(16&t.flags)}(n)&&Ng(i,n,Ft(),n.stylesWithoutHost,!1),nm}function kg(t,n,i,o){return au(t,n,i,o),nm(),kg}let jf=(t,n,i,o,l,p)=>(Ci(!0),b(o,l,function Tn(){return zn.lFrame.currentNamespace}()));function Ug(){return Ft()}function Bg(t){return!!t&&"function"==typeof t.then}function Hf(t){return!!t&&"function"==typeof t.subscribe}function om(t,n,i,o){const l=Ft(),p=wr(),E=pr();return Bu(p,l,l[wn],E,t,n,o),om}function $f(t,n){const i=pr(),o=Ft(),l=wr();return Bu(l,o,Ag(he(l.data),i,o),i,t,n),$f}function Bu(t,n,i,o,l,p,E){const D=zs(o),K=t.firstCreatePass&&Tg(t),ce=n[kr],Ee=by(n);let He=!0;if(3&o.type||E){const qt=Is(o,n),pn=E?E(qt):qt,Jn=Ee.length,zt=E?li=>E(mn(li[o.index])):o.index;let Tr=null;if(!E&&D&&(Tr=function zf(t,n,i,o){const l=t.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const E=l[p];if(E===i&&l[p+1]===o){const D=n[mo],O=l[p+2];return D.length>O?D[O]:null}"string"==typeof E&&(p+=2)}return null}(t,n,l,o.index)),null!==Tr)(Tr.__ngLastListenerFn__||Tr).__ngNextListenerFn__=p,Tr.__ngLastListenerFn__=p,He=!1;else{p=ev(o,n,ce,p,!1);const li=i.listen(pn,l,p);Ee.push(p,li),K&&K.push(l,zt,Jn,Jn+1)}}else p=ev(o,n,ce,p,!1);const st=o.outputs;let xt;if(He&&null!==st&&(xt=st[l])){const qt=xt.length;if(qt)for(let pn=0;pn<qt;pn+=2){const us=n[xt[pn]][xt[pn+1]].subscribe(p),Tc=Ee.length;Ee.push(p,us),K&&K.push(l,o.index,Tc,-(Tc+1))}}}function am(t,n,i,o){try{return Yi(6,n,i),!1!==i(o)}catch(l){return Vu(t,l),!1}finally{Yi(7,n,i)}}function ev(t,n,i,o,l){return function p(E){if(E===Function)return o;xf(t.componentOffset>-1?yo(t.index,n):n);let O=am(n,i,o,E),K=p.__ngNextListenerFn__;for(;K;)O=am(n,i,K,E)&&O,K=K.__ngNextListenerFn__;return l&&!1===O&&E.preventDefault(),O}}function jg(t=1){return function ks(t){return(zn.lFrame.contextLView=function uo(t,n){for(;t>0;)n=n[Wn],t--;return n}(t,zn.lFrame.contextLView))[kr]}(t)}function tv(t,n){let i=null;const o=function Pa(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(!(1&i))return n[i+1]}return null}(t);for(let l=0;l<n.length;l++){const p=n[l];if("*"!==p){if(null===o?To(t,p,!0):ro(o,p))return l}else i=l}return i}function Hg(t){const n=Ft()[Fr][Zr];if(!n.projection){const o=n.projection=ya(t?t.length:1,null),l=o.slice();let p=n.child;for(;null!==p;){const E=t?tv(p,t):0;null!==E&&(l[E]?l[E].projectionNext=p:o[E]=p,l[E]=p),p=p.next}}}function cm(t,n=0,i){const o=Ft(),l=wr(),p=Ah(l,Fn+t,16,null,i||null);null===p.projection&&(p.projection=n),uc(),(!o[ts]||Ua())&&32!=(32&p.flags)&&function f_(t,n,i){fp(n[wn],0,n,i,Qo(t,i,n),dd(i.parent||n[Zr],i,n))}(l,o,p)}function kd(t,n){return t<<17|n<<2}function Xc(t){return t>>17&32767}function Bh(t){return 2|t}function Yc(t){return(131068&t)>>2}function Fd(t,n){return-131069&t|n<<2}function dm(t){return 1|t}function jh(t,n,i,o,l){const p=t[i+1],E=null===n;let D=o?Xc(p):Yc(p),O=!1;for(;0!==D&&(!1===O||E);){const ce=t[D+1];Hu(t[D],n)&&(O=!0,t[D+1]=o?dm(ce):Bh(ce)),D=o?Xc(ce):Yc(ce)}O&&(t[i+1]=o?Bh(p):dm(p))}function Hu(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&pl(t,n)>=0}const wo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wg(t){return t.substring(wo.key,wo.keyEnd)}function av(t,n){const i=wo.textEnd;return i===n?-1:(n=wo.keyEnd=function Ub(t,n,i){for(;n<i&&t.charCodeAt(n)>32;)n++;return n}(t,wo.key=n,i),$h(t,n,i))}function $h(t,n,i){for(;n<i&&t.charCodeAt(n)<=32;)n++;return n}function fm(t,n,i){return bc(t,n,i,!1),fm}function Gf(t,n){return bc(t,n,null,!0),Gf}function Zc(t,n){for(let i=function Hh(t){return function cu(t){wo.key=0,wo.keyEnd=0,wo.value=0,wo.valueEnd=0,wo.textEnd=t.length}(t),av(t,$h(t,0,wo.textEnd))}(n);i>=0;i=av(n,i))No(t,Wg(n),!0)}function bc(t,n,i,o){const l=Ft(),p=wr(),E=v(2);p.firstUpdatePass&&Gg(p,t,E,o),n!==Dr&&Se(l,E,n)&&Qg(p,p.data[Zi()],l,l[wn],t,l[E+1]=function dv(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Ve(Kc(t)))),t}(n,i),o,E)}function qf(t,n){return n>=t.expandoStartIndex}function Gg(t,n,i,o){const l=t.data;if(null===l[i+1]){const p=l[Zi()],E=qf(t,i);_m(p,o)&&null===n&&!E&&(n=!1),n=function lu(t,n,i,o){const l=he(t);let p=o?n.residualClasses:n.residualStyles;if(null===l)0===(o?n.classBindings:n.styleBindings)&&(i=Vd(i=pm(null,t,n,i,o),n.attrs,o),p=null);else{const E=n.directiveStylingLast;if(-1===E||t[E]!==l)if(i=pm(l,t,n,i,o),null===p){let O=function uv(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Yc(o))return t[Xc(o)]}(t,n,o);void 0!==O&&Array.isArray(O)&&(O=pm(null,t,n,O[1],o),O=Vd(O,n.attrs,o),function Hb(t,n,i,o){t[Xc(i?n.classBindings:n.styleBindings)]=o}(t,n,o,O))}else p=function Qf(t,n,i){let o;const l=n.directiveEnd;for(let p=1+n.directiveStylingLast;p<l;p++)o=Vd(o,t[p].hostAttrs,i);return Vd(o,n.attrs,i)}(t,n,o)}return void 0!==p&&(o?n.residualClasses=p:n.residualStyles=p),i}(l,p,n,o),function Fb(t,n,i,o,l,p){let E=p?n.classBindings:n.styleBindings,D=Xc(E),O=Yc(E);t[o]=i;let ce,K=!1;if(Array.isArray(i)?(ce=i[1],(null===ce||pl(i,ce)>0)&&(K=!0)):ce=i,l)if(0!==O){const He=Xc(t[D+1]);t[o+1]=kd(He,D),0!==He&&(t[He+1]=Fd(t[He+1],o)),t[D+1]=function Cs(t,n){return 131071&t|n<<17}(t[D+1],o)}else t[o+1]=kd(D,0),0!==D&&(t[D+1]=Fd(t[D+1],o)),D=o;else t[o+1]=kd(O,0),0===D?D=o:t[O+1]=Fd(t[O+1],o),O=o;K&&(t[o+1]=Bh(t[o+1])),jh(t,ce,o,!0),jh(t,ce,o,!1),function Vb(t,n,i,o,l){const p=l?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof n&&pl(p,n)>=0&&(i[o+1]=dm(i[o+1]))}(n,ce,t,o,p),E=kd(D,O),p?n.classBindings=E:n.styleBindings=E}(l,p,n,i,E,o)}}function pm(t,n,i,o,l){let p=null;const E=i.directiveEnd;let D=i.directiveStylingLast;for(-1===D?D=i.directiveStart:D++;D<E&&(p=n[D],o=Vd(o,p.hostAttrs,l),p!==t);)D++;return null!==t&&(i.directiveStylingLast=D),o}function Vd(t,n,i){const o=i?1:2;let l=-1;if(null!==n)for(let p=0;p<n.length;p++){const E=n[p];"number"==typeof E?l=E:l===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),No(t,E,!!i||n[++p]))}return void 0===t?null:t}function Qg(t,n,i,o,l,p,E,D){if(!(3&n.type))return;const O=t.data,K=O[D+1],ce=function kb(t){return 1==(1&t)}(K)?Kh(O,n,i,l,Yc(K),E):void 0;Xf(ce)||(Xf(p)||function sv(t){return 2==(2&t)}(K)&&(p=Kh(O,null,i,l,D,E)),function Om(t,n,i,o,l){if(n)l?t.addClass(i,o):t.removeClass(i,o);else{let p=-1===o.indexOf("-")?void 0:zr.DashCase;null==l?t.removeStyle(i,o,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=zr.Important),t.setStyle(i,o,l,p))}}(o,E,Ns(Zi(),i),l,p))}function Kh(t,n,i,o,l,p){const E=null===n;let D;for(;l>0;){const O=t[l],K=Array.isArray(O),ce=K?O[1]:O,Ee=null===ce;let He=i[l+1];He===Dr&&(He=Ee?Sn:void 0);let st=Ee?Gd(He,o):ce===o?He:void 0;if(K&&!Xf(st)&&(st=Gd(O,o)),Xf(st)&&(D=st,E))return D;const xt=t[l+1];l=E?Xc(xt):Yc(xt)}if(null!==n){let O=p?n.residualClasses:n.residualStyles;null!=O&&(D=Gd(O,o))}return D}function Xf(t){return void 0!==t}function _m(t,n){return 0!=(t.flags&(n?8:16))}function ym(t,n=""){const i=Ft(),o=wr(),l=t+Fn,p=o.firstCreatePass?Ah(o,l,1,n,null):o.data[l],E=Xg(o,i,p,n,t);i[l]=E,Ur()&&zc(o,i,E,p),Ro(p,!1)}let Xg=(t,n,i,o,l)=>(Ci(!0),function ih(t,n){return t.createText(n)}(n[wn],o));function bm(t){return Rl("",t,""),bm}function Rl(t,n,i){const o=Ft(),l=qa(o,t,n,i);return l!==Dr&&Gs(o,Zi(),l),Rl}function Em(t,n,i,o,l){const p=Ft(),E=Tl(p,t,n,i,o,l);return E!==Dr&&Gs(p,Zi(),E),Em}function Ld(t,n,i){!function Ec(t,n,i,o){const l=wr(),p=v(2);l.firstUpdatePass&&Gg(l,null,p,o);const E=Ft();if(i!==Dr&&Se(E,p,i)){const D=l.data[Zi()];if(_m(D,o)&&!qf(l,p)){let O=o?D.classesWithoutHost:D.stylesWithoutHost;null!==O&&(i=mt(O,i||"")),Ng(l,D,E,i,o)}else!function $b(t,n,i,o,l,p,E,D){l===Dr&&(l=Sn);let O=0,K=0,ce=0<l.length?l[0]:null,Ee=0<p.length?p[0]:null;for(;null!==ce||null!==Ee;){const He=O<l.length?l[O+1]:void 0,st=K<p.length?p[K+1]:void 0;let qt,xt=null;ce===Ee?(O+=2,K+=2,He!==st&&(xt=Ee,qt=st)):null===Ee||null!==ce&&ce<Ee?(O+=2,xt=ce):(K+=2,xt=Ee,qt=st),null!==xt&&Qg(t,n,i,o,xt,qt,E,D),ce=O<l.length?l[O]:null,Ee=K<p.length?p[K]:null}}(l,D,E,E[wn],E[p+1],E[p+1]=function mm(t,n,i){if(null==i||""===i)return Sn;const o=[],l=Kc(i);if(Array.isArray(l))for(let p=0;p<l.length;p++)t(o,l[p],!0);else if("object"==typeof l)for(const p in l)l.hasOwnProperty(p)&&t(o,p,l[p]);else"string"==typeof l&&n(o,l);return o}(t,n,i),o,p)}}(No,Zc,qa(Ft(),t,n,i),!0)}function zb(t,n,i){const o=Ft();if(Se(o,ge(),n)){const p=wr(),E=sr();nc(p,E,o,t,n,Ag(he(p.data),E,o),i,!0)}return zb}const Zf=void 0;var bw=["en",[["a","p"],["AM","PM"],Zf],[["AM","PM"],Zf,Zf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zf,"{1} 'at' {0}",Zf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vw(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let wm={};function Kb(t){const n=function Ew(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=s0(n);if(i)return i;const o=n.split("-")[0];if(i=s0(o),i)return i;if("en"===o)return bw;throw new me(701,!1)}function r0(t){return Kb(t)[Tm.PluralCase]}function s0(t){return t in wm||(wm[t]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[t]),wm[t]}var Tm=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Tm||{});const Am="en-US";let o0=Am;function qb(t,n,i,o,l){if(t=It(t),Array.isArray(t))for(let p=0;p<t.length;p++)qb(t[p],n,i,o,l);else{const p=wr(),E=Ft(),D=pr();let O=nu(t)?t:It(t.provide);const K=P_(t),ce=1048575&D.providerIndexes,Ee=D.directiveStart,He=D.providerIndexes>>20;if(nu(t)||!t.multi){const st=new Ko(K,l,Qc),xt=Xb(O,n,l?ce:ce+He,Ee);-1===xt?(ll(xa(D,E),p,O),Qb(p,t,n.length),n.push(O),D.directiveStart++,D.directiveEnd++,l&&(D.providerIndexes+=1048576),i.push(st),E.push(st)):(i[xt]=st,E[xt]=st)}else{const st=Xb(O,n,ce+He,Ee),xt=Xb(O,n,ce,ce+He),pn=xt>=0&&i[xt];if(l&&!pn||!l&&!(st>=0&&i[st])){ll(xa(D,E),p,O);const Jn=function vT(t,n,i,o,l){const p=new Ko(t,i,Qc);return p.multi=[],p.index=n,p.componentProviders=0,M0(p,l,o&&!i),p}(l?yT:_T,i.length,l,o,K);!l&&pn&&(i[xt].providerFactory=Jn),Qb(p,t,n.length,0),n.push(O),D.directiveStart++,D.directiveEnd++,l&&(D.providerIndexes+=1048576),i.push(Jn),E.push(Jn)}else Qb(p,t,st>-1?st:xt,M0(i[l?xt:st],K,!l&&o));!l&&o&&pn&&i[xt].componentProviders++}}}function Qb(t,n,i,o){const l=nu(n),p=function tg(t){return!!t.useClass}(n);if(l||p){const O=(p?It(n.useClass):n).prototype.ngOnDestroy;if(O){const K=t.destroyHooks||(t.destroyHooks=[]);if(!l&&n.multi){const ce=K.indexOf(i);-1===ce?K.push(i,[o,O]):K[ce+1].push(o,O)}else K.push(i,O)}}}function M0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function Xb(t,n,i,o){for(let l=i;l<o;l++)if(n[l]===t)return l;return-1}function _T(t,n,i,o){return Yb(this.multi,[])}function yT(t,n,i,o){const l=this.multi;let p;if(this.providerFactory){const E=this.providerFactory.componentProviders,D=Js(i,i[Qt],this.providerFactory.index,o);p=D.slice(0,E),Yb(l,p);for(let O=E;O<D.length;O++)p.push(D[O])}else p=[],Yb(l,p);return p}function Yb(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function P0(t,n=[]){return i=>{i.providersResolver=(o,l)=>function gT(t,n,i){const o=wr();if(o.firstCreatePass){const l=qi(t);qb(i,o.data,o.blueprint,l,!0),qb(n,o.data,o.blueprint,l,!1)}}(o,l?l(t):t,n)}}class Jf{}class O0{}function bT(t,n){return new Zb(t,n??null,[])}class Zb extends Jf{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cg(this);const l=Mi(n);this._bootstrapComponents=El(l.bootstrap),this._r3Injector=fg(n,i,[{provide:Jf,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver},...o],Ve(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Jb extends O0{constructor(n){super(),this.moduleType=n}create(n){return new Zb(this.moduleType,n,[])}}class N0 extends Jf{constructor(n){super(),this.componentFactoryResolver=new Cg(this),this.instance=null;const i=new bd([...n.providers,{provide:Jf,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver}],n.parent||vf(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function k0(t,n,i=null){return new N0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let IT=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=_f(0,i.type),l=o.length>0?k0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,l)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Yt({token:t,providedIn:"environment",factory:()=>new t(kt(_c))})}}return t})();function F0(t){t.getStandaloneInjector=n=>n.get(IT).getOrCreateStandaloneInjector(t)}function $0(t,n,i){const o=P()+t,l=Ft();return l[o]===Dr?ar(l,o,i?n.call(i):n()):function Ge(t,n){return t[n]}(l,o)}function z0(t,n,i,o){return function W0(t,n,i,o,l,p){const E=n+i;return Se(t,E,l)?ar(t,E+1,p?o.call(p,l):o(l)):c_(t,E+1)}(Ft(),P(),t,n,i,o)}function K0(t,n,i,o,l){return function G0(t,n,i,o,l,p,E){const D=n+i;return Be(t,D,l,p)?ar(t,D+2,E?o.call(E,l,p):o(l,p)):c_(t,D+2)}(Ft(),P(),t,n,i,o,l)}function c_(t,n){const i=t[n];return i===Dr?void 0:i}function KT(){return this._results[Symbol.iterator]()}class _v{get changes(){return this._changes||(this._changes=new qc)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=_v.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=KT)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const l=function vo(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function mu(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let l=t[o],p=n[o];if(i&&(l=i(l),p=i(p)),p!==l)return!1}return!0}(o._results,l,i))&&(o._results=l,o.length=l.length,o.last=l[this.length-1],o.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GT(t,n,i,o=!0){const l=n[Qt];if(function oe(t,n,i,o){const l=Cr+o,p=i.length;o>0&&(i[l-1][_i]=n),o<p-Cr?(n[_i]=i[l],fl(i,Cr+o,n)):(i.push(n),n[_i]=null),n[gr]=i;const E=n[Jr];null!==E&&i!==E&&function xe(t,n){const i=t[$s];n[Fr]!==n[gr][gr][Fr]&&(t[Ti]=!0),null===i?t[$s]=[n]:i.push(n)}(E,n);const D=n[Bi];null!==D&&D.insertView(t),n[In]|=128}(l,n,t,i),o){const p=Ru(i,t),E=n[wn],D=ud(E,t[yi]);null!==D&&function f(t,n,i,o,l,p){o[vr]=l,o[Zr]=n,uf(t,o,i,1,l,p)}(l,t[Zr],E,n,D,p)}}let u_=(()=>{class t{static{this.__NG_ELEMENT_ID__=XT}}return t})();const qT=u_,QT=class extends qT{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const l=function WT(t,n,i,o){const l=n.tView,D=Kp(t,l,i,4096&t[In]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);D[Jr]=t[n.index];const K=t[Bi];return null!==K&&(D[Bi]=K.createEmbeddedView(l)),Rd(l,D,i),D}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new Rh(l)}};function XT(){return yv(pr(),Ft())}function yv(t,n){return 4&t.type?new QT(n,t,If(t,n)):null}let bv=(()=>{class t{static{this.__NG_ELEMENT_ID__=nA}}return t})();function nA(){return rI(pr(),Ft())}const rA=bv,tI=class extends rA{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return If(this._hostTNode,this._hostLView)}get injector(){return new ms(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ol(this._hostTNode,this._hostLView);if(hc(n)){const i=sl(n,this._hostLView),o=il(n);return new ms(i[Qt].data[o+8],i)}return new ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=nI(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Cr}createEmbeddedView(n,i,o){let l,p;"number"==typeof o?l=o:null!=o&&(l=o.index,p=o.injector);const D=n.createEmbeddedViewImpl(i||{},p,null);return this.insertImpl(D,l,false),D}createComponent(n,i,o,l,p){const E=n&&!function Ja(t){return"function"==typeof t}(n);let D;if(E)D=i;else{const qt=i||{};D=qt.index,o=qt.injector,l=qt.projectableNodes,p=qt.environmentInjector||qt.ngModuleRef}const O=E?n:new xh(Yn(n)),K=o||this.parentInjector;if(!p&&null==O.ngModule){const pn=(E?K:this.parentInjector).get(_c,null);pn&&(p=pn)}Yn(O.componentType??{});const st=O.create(K,l,null,p);return this.insertImpl(st.hostView,D,false),st}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const l=n._lView;if(function ga(t){return Pr(t[gr])}(l)){const O=this.indexOf(n);if(-1!==O)this.detach(O);else{const K=l[gr],ce=new tI(K,K[Zr],K[gr]);ce.detach(ce.indexOf(n))}}const E=this._adjustIndex(i),D=this._lContainer;return GT(D,l,E,!o),n.attachToViewContainerRef(),fl(tE(D),E,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=nI(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=bt(this._lContainer,i);o&&(Ll(tE(this._lContainer),i),nn(o[Qt],o))}detach(n){const i=this._adjustIndex(n,-1),o=bt(this._lContainer,i);return o&&null!=Ll(tE(this._lContainer),i)?new Rh(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function nI(t){return t[8]}function tE(t){return t[8]||(t[8]=[])}function rI(t,n){let i;const o=n[t.index];return Pr(o)?i=o:(i=qp(o,n,null,t),n[t.index]=i,Qp(n,i)),iI(i,n,t,o),new tI(i,t,n)}let iI=function sI(t,n,i,o){if(t[yi])return;let l;l=8&i.type?mn(o):function iA(t,n){const i=t[wn],o=i.createComment(""),l=Is(n,t);return ba(i,ud(i,l),o,function ch(t,n){return t.nextSibling(n)}(i,l),!1),o}(n,i),t[yi]=l};class nE{constructor(n){this.queryList=n,this.matches=null}clone(){return new nE(this.queryList)}setDirty(){this.queryList.setDirty()}}class rE{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,l=[];for(let p=0;p<o;p++){const E=i.getByIndex(p);l.push(this.queries[E.indexInDeclarationView].clone())}return new rE(l)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==pI(n,i).matches&&this.queries[i].setDirty()}}class oI{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class iE{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const l=null!==i?i.length:0,p=this.getByIndex(o).embeddedTView(n,l);p&&(p.indexInDeclarationView=o,null!==i?i.push(p):i=[p])}return null!==i?new iE(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class sE{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new sE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let l=0;l<o.length;l++){const p=o[l];this.matchTNodeWithReadOption(n,i,aA(i,p)),this.matchTNodeWithReadOption(n,i,hu(i,n,p,!1,!1))}else o===u_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,hu(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const l=this.metadata.read;if(null!==l)if(l===Wc||l===bv||l===u_&&4&i.type)this.addMatch(i.index,-2);else{const p=hu(i,n,l,!1,!1);null!==p&&this.addMatch(i.index,p)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function aA(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function lA(t,n,i,o){return-1===i?function cA(t,n){return 11&t.type?If(t,n):4&t.type?yv(t,n):null}(n,t):-2===i?function uA(t,n,i){return i===Wc?If(n,t):i===u_?yv(n,t):i===bv?rI(n,t):void 0}(t,n,o):Js(t,t[Qt],i,n)}function aI(t,n,i,o){const l=n[Bi].queries[o];if(null===l.matches){const p=t.data,E=i.matches,D=[];for(let O=0;O<E.length;O+=2){const K=E[O];D.push(K<0?null:lA(n,p[K],E[O+1],i.metadata.read))}l.matches=D}return l.matches}function oE(t,n,i,o){const l=t.queries.getByIndex(i),p=l.matches;if(null!==p){const E=aI(t,n,l,i);for(let D=0;D<p.length;D+=2){const O=p[D];if(O>0)o.push(E[D/2]);else{const K=p[D+1],ce=n[-O];for(let Ee=Cr;Ee<ce.length;Ee++){const He=ce[Ee];He[Jr]===He[gr]&&oE(He[Qt],He,K,o)}if(null!==ce[$s]){const Ee=ce[$s];for(let He=0;He<Ee.length;He++){const st=Ee[He];oE(st[Qt],st,K,o)}}}}}return o}function cI(t){const n=Ft(),i=wr(),o=Ue();Ne(o+1);const l=pI(i,o);if(t.dirty&&function xl(t){return 4==(4&t[In])}(n)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const p=l.crossesNgTemplate?oE(i,n,o,[]):aI(i,n,l,o);t.reset(p,kp),t.notifyOnChanges()}return!0}return!1}function lI(t,n,i){const o=wr();o.firstCreatePass&&(fI(o,new oI(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),hI(o,Ft(),n)}function uI(t,n,i,o){const l=wr();if(l.firstCreatePass){const p=pr();fI(l,new oI(n,i,o),p.index),function hA(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(l,t),2==(2&i)&&(l.staticContentQueries=!0)}hI(l,Ft(),i)}function dI(){return function dA(t,n){return t[Bi].queries[n].queryList}(Ft(),Ue())}function hI(t,n,i){const o=new _v(4==(4&i));(function _b(t,n,i,o){const l=by(n);l.push(i),t.firstCreatePass&&Tg(t).push(o,l.length-1)})(t,n,o,o.destroy),null===n[Bi]&&(n[Bi]=new rE),n[Bi].queries.push(new nE(o))}function fI(t,n,i){null===t.queries&&(t.queries=new iE),t.queries.track(new sE(n,i))}function pI(t,n){return t.queries.getByIndex(n)}function mI(t,n){return yv(t,n)}function aE(t){return!!Mi(t)}const PI=new rt("Application Initializer");let hE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=Gt(PI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const l of this.appInits){const p=l();if(Bg(p))i.push(p);else if(Hf(p)){const E=new Promise((D,O)=>{p.subscribe({complete:D,error:O})});i.push(E)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(l=>{this.reject(l)}),0===i.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),OI=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const Iv=new rt("LocaleId",{providedIn:"root",factory:()=>Gt(Iv,Cn.Optional|Cn.SkipSelf)||function OA(){return typeof $localize<"u"&&$localize.locale||Am}()}),NA=new rt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let NI=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ke.t(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class FA{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let VA=(()=>{class t{compileModuleSync(i){return new Jb(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),p=El(Mi(i).declarations).reduce((E,D)=>{const O=Yn(D);return O&&E.push(new xh(O)),E},[]);return new FA(o,p)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const LI=new rt(""),UI=new rt("");let mE,sC=(()=>{class t{constructor(i,o,l){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mE||(function oC(t){mE=t}(l),l.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{to.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,l){let p=-1;o&&o>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==p),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:p,updateCb:l})}whenStable(i,o,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,l){return[]}static{this.\u0275fac=function(o){return new(o||t)(kt(to),kt(BI),kt(UI))}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac})}}return t})(),BI=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return mE?.findTestabilityInTree(this,i,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),Gh=null;const jI=new rt("AllowMultipleToken"),gE=new rt("PlatformDestroyListeners"),_E=new rt("appBootstrapListener");class lC{constructor(n,i){this.name=n,this.token=i}}function zI(t,n,i=[]){const o=`Platform: ${n}`,l=new rt(o);return(p=[])=>{let E=yE();if(!E||E.injector.get(jI,!1)){const D=[...i,...p,{provide:l,useValue:!0}];t?t(D):function uC(t){if(Gh&&!Gh.get(jI,!1))throw new me(400,!1);(function HI(){!function el(t){sc=t}(()=>{throw new me(600,!1)})})(),Gh=t;const n=t.get(WI);(function $I(t){t.get(F_,null)?.forEach(i=>i())})(t)}(function KI(t=[],n){return vc.create({name:n,providers:[{provide:fh,useValue:"platform"},{provide:gE,useValue:new Set([()=>Gh=null])},...t]})}(D,o))}return function hC(t){const n=yE();if(!n)throw new me(401,!1);return n}()}}function yE(){return Gh?.get(WI)??null}let WI=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const l=function fC(t="zone.js",n){return"noop"===t?new cb:"zone.js"===t?new to(n):t}(o?.ngZone,function GI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return l.run(()=>{const p=function ET(t,n,i){return new Zb(t,n,i)}(i.moduleType,this.injector,function ZI(t){return[{provide:to,useFactory:t},{provide:bl,multi:!0,useFactory:()=>{const n=Gt(mC,{optional:!0});return()=>n.initialize()}},{provide:YI,useFactory:pC},{provide:Q_,useFactory:Rf}]}(()=>l)),E=p.injector.get(Gc,null);return l.runOutsideAngular(()=>{const D=l.onError.subscribe({next:O=>{E.handleError(O)}});p.onDestroy(()=>{Tv(this._modules,p),D.unsubscribe()})}),function qI(t,n,i){try{const o=i();return Bg(o)?o.catch(l=>{throw n.runOutsideAngular(()=>t.handleError(l)),l}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(E,l,()=>{const D=p.injector.get(hE);return D.runInitializers(),D.donePromise.then(()=>(function a0(t){Ie(t,"Expected localeId to be defined"),"string"==typeof t&&(o0=t.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Iv,Am)||Am),this._moduleDoBootstrap(p),p))})})}bootstrapModule(i,o=[]){const l=QI({},o);return function aC(t,n,i){const o=new Jb(i);return Promise.resolve(o)}(0,0,i).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(i){const o=i.injector.get(Sm);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!i.instance.ngDoBootstrap)throw new me(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(gE,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(o){return new(o||t)(kt(vc))}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function QI(t,n){return Array.isArray(n)?n.reduce(QI,t):{...t,...n}}let Sm=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Gt(YI),this.zoneIsStable=Gt(Q_),this.componentTypes=[],this.components=[],this.isStable=Gt(NI).hasPendingTasks.pipe((0,Qe.n)(i=>i?(0,Pe.of)(!1):this.zoneIsStable),(0,$e.F)(),(0,_e.u)()),this._injector=Gt(_c)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const l=i instanceof eb;if(!this._injector.get(hE).done)throw!l&&Xs(i),new me(405,!1);let E;E=l?i:this._injector.get(Wa).resolveComponentFactory(i),this.componentTypes.push(E.componentType);const D=function cC(t){return t.isBoundToModule}(E)?void 0:this._injector.get(Jf),K=E.create(vc.NULL,[],o||E.selector,D),ce=K.location.nativeElement,Ee=K.injector.get(LI,null);return Ee?.registerApplication(ce),K.onDestroy(()=>{this.detachView(K.hostView),Tv(this.components,K),Ee?.unregisterApplication(ce)}),this._loadComponent(K),K}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;Tv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(_E,[]);o.push(...this._bootstrapListeners),o.forEach(l=>l(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Tv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new me(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Tv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const YI=new rt("",{providedIn:"root",factory:()=>Gt(Gc).handleError.bind(void 0)});function pC(){const t=Gt(to),n=Gt(Gc);return i=>t.runOutsideAngular(()=>n.handleError(i))}let mC=(()=>{class t{constructor(){this.zone=Gt(to),this.applicationRef=Gt(Sm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _C(){return!1}let yC=(()=>{class t{static{this.__NG_ELEMENT_ID__=vC}}return t})();function vC(t){return function bC(t,n,i){if(vi(t)&&!i){const o=yo(t.index,n);return new Rh(o,o)}return 47&t.type?new Rh(n[Fr],n):null}(pr(),Ft(),16==(16&t))}class rw{constructor(){}supports(n){return bn(n)}create(n){return new AC(n)}}const TC=(t,n)=>n;class AC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||TC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,l=0,p=null;for(;i||o;){const E=!o||i&&i.currentIndex<sw(o,l,p)?i:o,D=sw(E,l,p),O=E.currentIndex;if(E===o)l--,o=o._nextRemoved;else if(i=i._next,null==E.previousIndex)l++;else{p||(p=[]);const K=D-l,ce=O-l;if(K!=ce){for(let He=0;He<K;He++){const st=He<p.length?p[He]:p[He]=0,xt=st+He;ce<=xt&&xt<K&&(p[He]=st+1)}p[E.previousIndex]=ce-K}}D!==O&&n(E,D,O)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!bn(n))throw new me(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let l,p,E,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let D=0;D<this.length;D++)p=n[D],E=this._trackByFn(D,p),null!==i&&Object.is(i.trackById,E)?(o&&(i=this._verifyReinsertion(i,p,E,D)),Object.is(i.item,p)||this._addIdentityChange(i,p)):(i=this._mismatch(i,p,E,D),o=!0),i=i._next}else l=0,function rn(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,D=>{E=this._trackByFn(l,D),null!==i&&Object.is(i.trackById,E)?(o&&(i=this._verifyReinsertion(i,D,E,l)),Object.is(i.item,D)||this._addIdentityChange(i,D)):(i=this._mismatch(i,D,E,l),o=!0),i=i._next,l++}),this.length=l;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,l){let p;return null===n?p=this._itTail:(p=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,p,l)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,l))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,p,l)):n=this._addAfter(new CC(i,o),p,l),n}_verifyReinsertion(n,i,o,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==p?n=this._reinsertAfter(p,n._prev,l):n.currentIndex!=l&&(n.currentIndex=l,this._addToMoves(n,l)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const l=n._prevRemoved,p=n._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const l=null===i?this._itHead:i._next;return n._next=l,n._prev=i,null===l?this._itTail=n:l._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new iw),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class iw{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new DC,this.map.set(i,o)),o.add(n)}get(n,i){const l=this.map.get(n);return l?l.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sw(t,n,i){const o=t.previousIndex;if(null===o)return o;let l=0;return i&&o<i.length&&(l=i[o]),o+n+l}class ow{constructor(){}supports(n){return n instanceof Map||Hn(n)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||Hn(n)))throw new me(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,l)=>{if(i&&i.key===l)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const p=this._getOrCreateRecordForKey(l,o);i=this._insertBeforeOrAppend(i,p)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const l=this._records.get(n);this._maybeAddToChanges(l,i);const p=l._prev,E=l._next;return p&&(p._next=E),E&&(E._prev=p),l._next=null,l._prev=null,l}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aw(){return new wE([new rw])}let wE=(()=>{class t{static{this.\u0275prov=Yt({token:t,providedIn:"root",factory:aw})}constructor(i){this.factories=i}static create(i,o){if(null!=o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||aw()),deps:[[t,new gl,new va]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(null!=o)return o;throw new me(901,!1)}}return t})();function cw(){return new TE([new ow])}let TE=(()=>{class t{static{this.\u0275prov=Yt({token:t,providedIn:"root",factory:cw})}constructor(i){this.factories=i}static create(i,o){if(o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||cw()),deps:[[t,new gl,new va]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(o)return o;throw new me(901,!1)}}return t})();const PC=zI(null,"core",[]);let OC=(()=>{class t{constructor(i){}static{this.\u0275fac=function(o){return new(o||t)(kt(Sm))}}static{this.\u0275mod=Vo({type:t})}static{this.\u0275inj=yr({})}}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const n=Yn(t);if(!n)return null;const i=new xh(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},8515:(en,at,W)=>{W.d(at,{Qe:()=>Py,cM:()=>Oy});var d=W(177),fe=W(7705),Te=W(1825),pe=W(9253),Pe=(W(7955),W(1413)),_e=W(7673),Qe=W(1985),$e=W(8455),be=W(7786),Ce=W(941),Ve=W(5558),mt=W(6354),dt=W(6129);class St extends Pe.B{constructor(e=1/0,r=1/0,s=dt.U){super(),this._bufferSize=e,this._windowTime=r,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,r)}next(e){const{isStopped:r,_buffer:s,_infiniteTimeWindow:c,_timestampProvider:h,_windowTime:_}=this;r||(s.push(e),!c&&s.push(h.now()+_)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:c}=this,h=c.slice();for(let _=0;_<h.length&&!e.closed;_+=s?1:2)e.next(h[_]);return this._checkFinalizedStatuses(e),r}_trimBuffer(){const{_bufferSize:e,_timestampProvider:r,_buffer:s,_infiniteTimeWindow:c}=this,h=(c?1:2)*e;if(e<1/0&&h<s.length&&s.splice(0,s.length-h),!c){const _=r.now();let R=0;for(let k=1;k<s.length&&s[k]<=_;k+=2)R=k;R&&s.splice(0,R+1)}}}var It=W(7647);function Nt(a,e,r){let s,c=!1;return a&&"object"==typeof a?({bufferSize:s=1/0,windowTime:e=1/0,refCount:c=!1,scheduler:r}=a):s=a??1/0,(0,It.u)({connector:()=>new St(s,e,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}var Mt=W(1594),an=W(8071);function At(a,e){return(0,an.T)(e)?(0,Ve.n)(()=>a,e):(0,Ve.n)(()=>a)}var me=W(6745),qe=W(5964),Me=W(7935);const _t=new fe.nKC("angularfire2.auth.use-emulator"),Ht=new fe.nKC("angularfire2.auth.settings"),Jt=new fe.nKC("angularfire2.auth.tenant-id"),ut=new fe.nKC("angularfire2.auth.langugage-code"),Nn=new fe.nKC("angularfire2.auth.use-device-language"),_r=new fe.nKC("angularfire.auth.persistence"),er=(a,e,r,s,c,h,_,R)=>(0,pe.BM)(`${a.name}.auth`,"AngularFireAuth",a.name,()=>{const k=e.runOutsideAngular(()=>a.auth());if(r&&k.useEmulator(...r),s&&(k.tenantId=s),k.languageCode=c,h&&k.useDeviceLanguage(),_)for(const[X,ae]of Object.entries(_))k.settings[X]=ae;return R&&k.setPersistence(R),k},[r,s,c,h,_,R]);let ui=(()=>{class a{authState;idToken;user;idTokenResult;credential;constructor(r,s,c,h,_,R,k,X,ae,ye,Oe,ht){const Rt=new Pe.B,Kt=(0,_e.of)(void 0).pipe((0,Ce.Q)(_.outsideAngular),(0,Ve.n)(()=>h.runOutsideAngular(()=>Promise.resolve().then(W.bind(W,7955)))),(0,mt.T)(()=>(0,pe.iB)(r,h,s)),(0,mt.T)(Bt=>er(Bt,h,R,X,ae,ye,k,Oe)),Nt({bufferSize:1,refCount:!1}));if((0,d.Vy)(c))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,_e.of)(null);else{Kt.pipe((0,Mt.$)()).subscribe();const Bt=Kt.pipe((0,Ve.n)(rn=>rn.getRedirectResult().then(Hn=>Hn,()=>null)),Te.U0,Nt({bufferSize:1,refCount:!1})),bn=Kt.pipe((0,Ve.n)(rn=>new Qe.c(Hn=>({unsubscribe:h.runOutsideAngular(()=>rn.onAuthStateChanged(Er=>Hn.next(Er),Er=>Hn.error(Er),()=>Hn.complete()))})))),jn=Kt.pipe((0,Ve.n)(rn=>new Qe.c(Hn=>({unsubscribe:h.runOutsideAngular(()=>rn.onIdTokenChanged(Er=>Hn.next(Er),Er=>Hn.error(Er),()=>Hn.complete()))}))));this.authState=Bt.pipe(At(bn),(0,me._)(_.outsideAngular),(0,Ce.Q)(_.insideAngular)),this.user=Bt.pipe(At(jn),(0,me._)(_.outsideAngular),(0,Ce.Q)(_.insideAngular)),this.idToken=this.user.pipe((0,Ve.n)(rn=>rn?(0,$e.H)(rn.getIdToken()):(0,_e.of)(null))),this.idTokenResult=this.user.pipe((0,Ve.n)(rn=>rn?(0,$e.H)(rn.getIdTokenResult()):(0,_e.of)(null))),this.credential=(0,be.h)(Bt,Rt,this.authState.pipe((0,qe.p)(rn=>!rn))).pipe((0,mt.T)(rn=>rn?.user?rn:null),(0,me._)(_.outsideAngular),(0,Ce.Q)(_.insideAngular))}return(0,pe.Gt)(this,Kt,h,{spy:{apply:(Bt,bn,jn)=>{(Bt.startsWith("signIn")||Bt.startsWith("createUser"))&&jn.then(rn=>Rt.next(rn))}}})}static \u0275fac=function(s){return new(s||a)(fe.KVO(pe.rx),fe.KVO(pe.uP,8),fe.KVO(fe.Agw),fe.KVO(fe.SKi),fe.KVO(Te.u0),fe.KVO(_t,8),fe.KVO(Ht,8),fe.KVO(Jt,8),fe.KVO(ut,8),fe.KVO(Nn,8),fe.KVO(_r,8),fe.KVO(Te.Jv,8))};static \u0275prov=fe.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})();var On=W(3236),Ln=W(9172),En=W(9974),ir=W(4360);function Ke(){return(0,En.N)((a,e)=>{let r,s=!1;a.subscribe((0,ir._)(e,c=>{const h=r;r=c,s&&e.next([h,c]),s=!0}))})}var yr,Ir,tt=W(2816),ot=W(3294),nt=W(3345),Ie=W(467),Je=W(7852),Vt=W(1362),Rn=W(8041),dn=W(1076),Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mr={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function c(Ge,Se,Be){Be||(Be=0);var Ze=Array(16);if("string"==typeof Se)for(var et=0;16>et;++et)Ze[et]=Se.charCodeAt(Be++)|Se.charCodeAt(Be++)<<8|Se.charCodeAt(Be++)<<16|Se.charCodeAt(Be++)<<24;else for(et=0;16>et;++et)Ze[et]=Se[Be++]|Se[Be++]<<8|Se[Be++]<<16|Se[Be++]<<24;var pt=Ge.g[3],Le=(Se=Ge.g[0])+(pt^(Be=Ge.g[1])&((et=Ge.g[2])^pt))+Ze[0]+3614090360&4294967295;Le=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=(Be=(et=(pt=(Se=Be+(Le<<7&4294967295|Le>>>25))+((Le=pt+(et^Se&(Be^et))+Ze[1]+3905402710&4294967295)<<12&4294967295|Le>>>20))+((Le=et+(Be^pt&(Se^Be))+Ze[2]+606105819&4294967295)<<17&4294967295|Le>>>15))+((Le=Be+(Se^et&(pt^Se))+Ze[3]+3250441966&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(pt^Be&(et^pt))+Ze[4]+4118548399&4294967295)<<7&4294967295|Le>>>25))+((Le=pt+(et^Se&(Be^et))+Ze[5]+1200080426&4294967295)<<12&4294967295|Le>>>20))+((Le=et+(Be^pt&(Se^Be))+Ze[6]+2821735955&4294967295)<<17&4294967295|Le>>>15))+((Le=Be+(Se^et&(pt^Se))+Ze[7]+4249261313&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(pt^Be&(et^pt))+Ze[8]+1770035416&4294967295)<<7&4294967295|Le>>>25))+((Le=pt+(et^Se&(Be^et))+Ze[9]+2336552879&4294967295)<<12&4294967295|Le>>>20))+((Le=et+(Be^pt&(Se^Be))+Ze[10]+4294925233&4294967295)<<17&4294967295|Le>>>15))+((Le=Be+(Se^et&(pt^Se))+Ze[11]+2304563134&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(pt^Be&(et^pt))+Ze[12]+1804603682&4294967295)<<7&4294967295|Le>>>25))+((Le=pt+(et^Se&(Be^et))+Ze[13]+4254626195&4294967295)<<12&4294967295|Le>>>20))+((Le=et+(Be^pt&(Se^Be))+Ze[14]+2792965006&4294967295)<<17&4294967295|Le>>>15))+((Le=Be+(Se^et&(pt^Se))+Ze[15]+1236535329&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(et^pt&(Be^et))+Ze[1]+4129170786&4294967295)<<5&4294967295|Le>>>27))+((Le=pt+(Be^et&(Se^Be))+Ze[6]+3225465664&4294967295)<<9&4294967295|Le>>>23))+((Le=et+(Se^Be&(pt^Se))+Ze[11]+643717713&4294967295)<<14&4294967295|Le>>>18))+((Le=Be+(pt^Se&(et^pt))+Ze[0]+3921069994&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+(et^pt&(Be^et))+Ze[5]+3593408605&4294967295)<<5&4294967295|Le>>>27))+((Le=pt+(Be^et&(Se^Be))+Ze[10]+38016083&4294967295)<<9&4294967295|Le>>>23))+((Le=et+(Se^Be&(pt^Se))+Ze[15]+3634488961&4294967295)<<14&4294967295|Le>>>18))+((Le=Be+(pt^Se&(et^pt))+Ze[4]+3889429448&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+(et^pt&(Be^et))+Ze[9]+568446438&4294967295)<<5&4294967295|Le>>>27))+((Le=pt+(Be^et&(Se^Be))+Ze[14]+3275163606&4294967295)<<9&4294967295|Le>>>23))+((Le=et+(Se^Be&(pt^Se))+Ze[3]+4107603335&4294967295)<<14&4294967295|Le>>>18))+((Le=Be+(pt^Se&(et^pt))+Ze[8]+1163531501&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+(et^pt&(Be^et))+Ze[13]+2850285829&4294967295)<<5&4294967295|Le>>>27))+((Le=pt+(Be^et&(Se^Be))+Ze[2]+4243563512&4294967295)<<9&4294967295|Le>>>23))+((Le=et+(Se^Be&(pt^Se))+Ze[7]+1735328473&4294967295)<<14&4294967295|Le>>>18))+((Le=Be+(pt^Se&(et^pt))+Ze[12]+2368359562&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+(Be^et^pt)+Ze[5]+4294588738&4294967295)<<4&4294967295|Le>>>28))+((Le=pt+(Se^Be^et)+Ze[8]+2272392833&4294967295)<<11&4294967295|Le>>>21))+((Le=et+(pt^Se^Be)+Ze[11]+1839030562&4294967295)<<16&4294967295|Le>>>16))+((Le=Be+(et^pt^Se)+Ze[14]+4259657740&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+(Be^et^pt)+Ze[1]+2763975236&4294967295)<<4&4294967295|Le>>>28))+((Le=pt+(Se^Be^et)+Ze[4]+1272893353&4294967295)<<11&4294967295|Le>>>21))+((Le=et+(pt^Se^Be)+Ze[7]+4139469664&4294967295)<<16&4294967295|Le>>>16))+((Le=Be+(et^pt^Se)+Ze[10]+3200236656&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+(Be^et^pt)+Ze[13]+681279174&4294967295)<<4&4294967295|Le>>>28))+((Le=pt+(Se^Be^et)+Ze[0]+3936430074&4294967295)<<11&4294967295|Le>>>21))+((Le=et+(pt^Se^Be)+Ze[3]+3572445317&4294967295)<<16&4294967295|Le>>>16))+((Le=Be+(et^pt^Se)+Ze[6]+76029189&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+(Be^et^pt)+Ze[9]+3654602809&4294967295)<<4&4294967295|Le>>>28))+((Le=pt+(Se^Be^et)+Ze[12]+3873151461&4294967295)<<11&4294967295|Le>>>21))+((Le=et+(pt^Se^Be)+Ze[15]+530742520&4294967295)<<16&4294967295|Le>>>16))+((Le=Be+(et^pt^Se)+Ze[2]+3299628645&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+(et^(Be|~pt))+Ze[0]+4096336452&4294967295)<<6&4294967295|Le>>>26))+((Le=pt+(Be^(Se|~et))+Ze[7]+1126891415&4294967295)<<10&4294967295|Le>>>22))+((Le=et+(Se^(pt|~Be))+Ze[14]+2878612391&4294967295)<<15&4294967295|Le>>>17))+((Le=Be+(pt^(et|~Se))+Ze[5]+4237533241&4294967295)<<21&4294967295|Le>>>11))+((Le=Se+(et^(Be|~pt))+Ze[12]+1700485571&4294967295)<<6&4294967295|Le>>>26))+((Le=pt+(Be^(Se|~et))+Ze[3]+2399980690&4294967295)<<10&4294967295|Le>>>22))+((Le=et+(Se^(pt|~Be))+Ze[10]+4293915773&4294967295)<<15&4294967295|Le>>>17))+((Le=Be+(pt^(et|~Se))+Ze[1]+2240044497&4294967295)<<21&4294967295|Le>>>11))+((Le=Se+(et^(Be|~pt))+Ze[8]+1873313359&4294967295)<<6&4294967295|Le>>>26))+((Le=pt+(Be^(Se|~et))+Ze[15]+4264355552&4294967295)<<10&4294967295|Le>>>22))+((Le=et+(Se^(pt|~Be))+Ze[6]+2734768916&4294967295)<<15&4294967295|Le>>>17))+((Le=Be+(pt^(et|~Se))+Ze[13]+1309151649&4294967295)<<21&4294967295|Le>>>11))+((pt=(Se=Be+((Le=Se+(et^(Be|~pt))+Ze[4]+4149444226&4294967295)<<6&4294967295|Le>>>26))+((Le=pt+(Be^(Se|~et))+Ze[11]+3174756917&4294967295)<<10&4294967295|Le>>>22))^((et=pt+((Le=et+(Se^(pt|~Be))+Ze[2]+718787259&4294967295)<<15&4294967295|Le>>>17))|~Se))+Ze[9]+3951481745&4294967295,Ge.g[0]=Ge.g[0]+Se&4294967295,Ge.g[1]=Ge.g[1]+(et+(Le<<21&4294967295|Le>>>11))&4294967295,Ge.g[2]=Ge.g[2]+et&4294967295,Ge.g[3]=Ge.g[3]+pt&4294967295}function _(Ge,Se){this.h=Se;for(var Be=[],Ze=!0,et=Ge.length-1;0<=et;et--){var pt=0|Ge[et];Ze&&pt==Se||(Be[et]=pt,Ze=!1)}this.g=Be}(function e(Ge,Se){function Be(){}Be.prototype=Se.prototype,Ge.D=Se.prototype,Ge.prototype=new Be,Ge.prototype.constructor=Ge,Ge.C=function(Ze,et,pt){for(var Le=Array(arguments.length-2),qa=2;qa<arguments.length;qa++)Le[qa-2]=arguments[qa];return Se.prototype[et].apply(Ze,Le)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(Ge,Se){void 0===Se&&(Se=Ge.length);for(var Be=Se-this.blockSize,Ze=this.B,et=this.h,pt=0;pt<Se;){if(0==et)for(;pt<=Be;)c(this,Ge,pt),pt+=this.blockSize;if("string"==typeof Ge){for(;pt<Se;)if(Ze[et++]=Ge.charCodeAt(pt++),et==this.blockSize){c(this,Ze),et=0;break}}else for(;pt<Se;)if(Ze[et++]=Ge[pt++],et==this.blockSize){c(this,Ze),et=0;break}}this.h=et,this.o+=Se},s.prototype.v=function(){var Ge=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Ge[0]=128;for(var Se=1;Se<Ge.length-8;++Se)Ge[Se]=0;var Be=8*this.o;for(Se=Ge.length-8;Se<Ge.length;++Se)Ge[Se]=255&Be,Be/=256;for(this.u(Ge),Ge=Array(16),Se=Be=0;4>Se;++Se)for(var Ze=0;32>Ze;Ze+=8)Ge[Be++]=this.g[Se]>>>Ze&255;return Ge};var R={};function k(Ge){return-128<=Ge&&128>Ge?function h(Ge,Se){var Be=R;return Object.prototype.hasOwnProperty.call(Be,Ge)?Be[Ge]:Be[Ge]=Se(Ge)}(Ge,function(Se){return new _([0|Se],0>Se?-1:0)}):new _([0|Ge],0>Ge?-1:0)}function X(Ge){if(isNaN(Ge)||!isFinite(Ge))return ye;if(0>Ge)return Bt(X(-Ge));for(var Se=[],Be=1,Ze=0;Ge>=Be;Ze++)Se[Ze]=Ge/Be|0,Be*=4294967296;return new _(Se,0)}var ye=k(0),Oe=k(1),ht=k(16777216);function Rt(Ge){if(0!=Ge.h)return!1;for(var Se=0;Se<Ge.g.length;Se++)if(0!=Ge.g[Se])return!1;return!0}function Kt(Ge){return-1==Ge.h}function Bt(Ge){for(var Se=Ge.g.length,Be=[],Ze=0;Ze<Se;Ze++)Be[Ze]=~Ge.g[Ze];return new _(Be,~Ge.h).add(Oe)}function bn(Ge,Se){return Ge.add(Bt(Se))}function jn(Ge,Se){for(;(65535&Ge[Se])!=Ge[Se];)Ge[Se+1]+=Ge[Se]>>>16,Ge[Se]&=65535,Se++}function rn(Ge,Se){this.g=Ge,this.h=Se}function Hn(Ge,Se){if(Rt(Se))throw Error("division by zero");if(Rt(Ge))return new rn(ye,ye);if(Kt(Ge))return Se=Hn(Bt(Ge),Se),new rn(Bt(Se.g),Bt(Se.h));if(Kt(Se))return Se=Hn(Ge,Bt(Se)),new rn(Bt(Se.g),Se.h);if(30<Ge.g.length){if(Kt(Ge)||Kt(Se))throw Error("slowDivide_ only works with positive integers.");for(var Be=Oe,Ze=Se;0>=Ze.l(Ge);)Be=Er(Be),Ze=Er(Ze);var et=ar(Be,1),pt=ar(Ze,1);for(Ze=ar(Ze,2),Be=ar(Be,2);!Rt(Ze);){var Le=pt.add(Ze);0>=Le.l(Ge)&&(et=et.add(Be),pt=Le),Ze=ar(Ze,1),Be=ar(Be,1)}return Se=bn(Ge,et.j(Se)),new rn(et,Se)}for(et=ye;0<=Ge.l(Se);){for(Be=Math.max(1,Math.floor(Ge.m()/Se.m())),Ze=48>=(Ze=Math.ceil(Math.log(Be)/Math.LN2))?1:Math.pow(2,Ze-48),Le=(pt=X(Be)).j(Se);Kt(Le)||0<Le.l(Ge);)Le=(pt=X(Be-=Ze)).j(Se);Rt(pt)&&(pt=Oe),et=et.add(pt),Ge=bn(Ge,Le)}return new rn(et,Ge)}function Er(Ge){for(var Se=Ge.g.length+1,Be=[],Ze=0;Ze<Se;Ze++)Be[Ze]=Ge.i(Ze)<<1|Ge.i(Ze-1)>>>31;return new _(Be,Ge.h)}function ar(Ge,Se){var Be=Se>>5;Se%=32;for(var Ze=Ge.g.length-Be,et=[],pt=0;pt<Ze;pt++)et[pt]=0<Se?Ge.i(pt+Be)>>>Se|Ge.i(pt+Be+1)<<32-Se:Ge.i(pt+Be);return new _(et,Ge.h)}(a=_.prototype).m=function(){if(Kt(this))return-Bt(this).m();for(var Ge=0,Se=1,Be=0;Be<this.g.length;Be++){var Ze=this.i(Be);Ge+=(0<=Ze?Ze:4294967296+Ze)*Se,Se*=4294967296}return Ge},a.toString=function(Ge){if(2>(Ge=Ge||10)||36<Ge)throw Error("radix out of range: "+Ge);if(Rt(this))return"0";if(Kt(this))return"-"+Bt(this).toString(Ge);for(var Se=X(Math.pow(Ge,6)),Be=this,Ze="";;){var et=Hn(Be,Se).g,pt=((0<(Be=bn(Be,et.j(Se))).g.length?Be.g[0]:Be.h)>>>0).toString(Ge);if(Rt(Be=et))return pt+Ze;for(;6>pt.length;)pt="0"+pt;Ze=pt+Ze}},a.i=function(Ge){return 0>Ge?0:Ge<this.g.length?this.g[Ge]:this.h},a.l=function(Ge){return Kt(Ge=bn(this,Ge))?-1:Rt(Ge)?0:1},a.abs=function(){return Kt(this)?Bt(this):this},a.add=function(Ge){for(var Se=Math.max(this.g.length,Ge.g.length),Be=[],Ze=0,et=0;et<=Se;et++){var pt=Ze+(65535&this.i(et))+(65535&Ge.i(et)),Le=(pt>>>16)+(this.i(et)>>>16)+(Ge.i(et)>>>16);Ze=Le>>>16,Be[et]=(Le&=65535)<<16|(pt&=65535)}return new _(Be,-2147483648&Be[Be.length-1]?-1:0)},a.j=function(Ge){if(Rt(this)||Rt(Ge))return ye;if(Kt(this))return Kt(Ge)?Bt(this).j(Bt(Ge)):Bt(Bt(this).j(Ge));if(Kt(Ge))return Bt(this.j(Bt(Ge)));if(0>this.l(ht)&&0>Ge.l(ht))return X(this.m()*Ge.m());for(var Se=this.g.length+Ge.g.length,Be=[],Ze=0;Ze<2*Se;Ze++)Be[Ze]=0;for(Ze=0;Ze<this.g.length;Ze++)for(var et=0;et<Ge.g.length;et++){var pt=this.i(Ze)>>>16,Le=65535&this.i(Ze),qa=Ge.i(et)>>>16,Tl=65535&Ge.i(et);Be[2*Ze+2*et]+=Le*Tl,jn(Be,2*Ze+2*et),Be[2*Ze+2*et+1]+=pt*Tl,jn(Be,2*Ze+2*et+1),Be[2*Ze+2*et+1]+=Le*qa,jn(Be,2*Ze+2*et+1),Be[2*Ze+2*et+2]+=pt*qa,jn(Be,2*Ze+2*et+2)}for(Ze=0;Ze<Se;Ze++)Be[Ze]=Be[2*Ze+1]<<16|Be[2*Ze];for(Ze=Se;Ze<2*Se;Ze++)Be[Ze]=0;return new _(Be,0)},a.A=function(Ge){return Hn(this,Ge).h},a.and=function(Ge){for(var Se=Math.max(this.g.length,Ge.g.length),Be=[],Ze=0;Ze<Se;Ze++)Be[Ze]=this.i(Ze)&Ge.i(Ze);return new _(Be,this.h&Ge.h)},a.or=function(Ge){for(var Se=Math.max(this.g.length,Ge.g.length),Be=[],Ze=0;Ze<Se;Ze++)Be[Ze]=this.i(Ze)|Ge.i(Ze);return new _(Be,this.h|Ge.h)},a.xor=function(Ge){for(var Se=Math.max(this.g.length,Ge.g.length),Be=[],Ze=0;Ze<Se;Ze++)Be[Ze]=this.i(Ze)^Ge.i(Ze);return new _(Be,this.h^Ge.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Ir=mr.Md5=s,_.prototype.add=_.prototype.add,_.prototype.multiply=_.prototype.j,_.prototype.modulo=_.prototype.A,_.prototype.compare=_.prototype.l,_.prototype.toNumber=_.prototype.m,_.prototype.toString=_.prototype.toString,_.prototype.getBits=_.prototype.i,_.fromNumber=X,_.fromString=function ae(Ge,Se){if(0==Ge.length)throw Error("number format error: empty string");if(2>(Se=Se||10)||36<Se)throw Error("radix out of range: "+Se);if("-"==Ge.charAt(0))return Bt(ae(Ge.substring(1),Se));if(0<=Ge.indexOf("-"))throw Error('number format error: interior "-" character');for(var Be=X(Math.pow(Se,8)),Ze=ye,et=0;et<Ge.length;et+=8){var pt=Math.min(8,Ge.length-et),Le=parseInt(Ge.substring(et,et+pt),Se);8>pt?(pt=X(Math.pow(Se,pt)),Ze=Ze.j(pt).add(X(Le))):Ze=(Ze=Ze.j(Be)).add(X(Le))}return Ze},yr=mr.Integer=_}).apply(typeof Yt<"u"?Yt:typeof self<"u"?self:typeof window<"u"?window:{});var Sr,or,ri,Si,pi,Cn,Zn,Bn,xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dr={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(m,F,Z){return m==Array.prototype||m==Object.prototype||(m[F]=Z.value),m},s=function r(m){m=["object"==typeof globalThis&&globalThis,m,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof xn&&xn];for(var F=0;F<m.length;++F){var Z=m[F];if(Z&&Z.Math==Math)return Z}throw Error("Cannot find global object")}(this);!function c(m,F){if(F)e:{var Z=s;m=m.split(".");for(var de=0;de<m.length-1;de++){var ct=m[de];if(!(ct in Z))break e;Z=Z[ct]}(F=F(de=Z[m=m[m.length-1]]))!=de&&null!=F&&e(Z,m,{configurable:!0,writable:!0,value:F})}}("Array.prototype.values",function(m){return m||function(){return function h(m,F){m instanceof String&&(m+="");var Z=0,de=!1,ct={next:function(){if(!de&&Z<m.length){var Et=Z++;return{value:F(Et,m[Et]),done:!1}}return de=!0,{done:!0,value:void 0}}};return ct[Symbol.iterator]=function(){return ct},ct}(this,function(F,Z){return Z})}});var _=_||{},R=this||self;function k(m){var F=typeof m;return"array"==(F="object"!=F?F:m?Array.isArray(m)?"array":F:"null")||"object"==F&&"number"==typeof m.length}function X(m){var F=typeof m;return"object"==F&&null!=m||"function"==F}function ae(m,F,Z){return m.call.apply(m.bind,arguments)}function ye(m,F,Z){if(!m)throw Error();if(2<arguments.length){var de=Array.prototype.slice.call(arguments,2);return function(){var ct=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ct,de),m.apply(F,ct)}}return function(){return m.apply(F,arguments)}}function Oe(m,F,Z){return(Oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ae:ye).apply(null,arguments)}function ht(m,F){var Z=Array.prototype.slice.call(arguments,1);return function(){var de=Z.slice();return de.push.apply(de,arguments),m.apply(this,de)}}function Rt(m,F){function Z(){}Z.prototype=F.prototype,m.aa=F.prototype,m.prototype=new Z,m.prototype.constructor=m,m.Qb=function(de,ct,Et){for(var on=Array(arguments.length-2),ls=2;ls<arguments.length;ls++)on[ls-2]=arguments[ls];return F.prototype[ct].apply(de,on)}}function Kt(m){const F=m.length;if(0<F){const Z=Array(F);for(let de=0;de<F;de++)Z[de]=m[de];return Z}return[]}function Bt(m,F){for(let Z=1;Z<arguments.length;Z++){const de=arguments[Z];if(k(de)){const ct=m.length||0,Et=de.length||0;m.length=ct+Et;for(let on=0;on<Et;on++)m[ct+on]=de[on]}else m.push(de)}}function jn(m){return/^[\s\xa0]*$/.test(m)}function rn(){var m=R.navigator;return m&&(m=m.userAgent)?m:""}function Hn(m){return Hn[" "](m),m}Hn[" "]=function(){};var Er=!(-1==rn().indexOf("Gecko")||-1!=rn().toLowerCase().indexOf("webkit")&&-1==rn().indexOf("Edge")||-1!=rn().indexOf("Trident")||-1!=rn().indexOf("MSIE")||-1!=rn().indexOf("Edge"));function ar(m,F,Z){for(const de in m)F.call(Z,m[de],de,m)}function Se(m){const F={};for(const Z in m)F[Z]=m[Z];return F}const Be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(m,F){let Z,de;for(let ct=1;ct<arguments.length;ct++){for(Z in de=arguments[ct],de)m[Z]=de[Z];for(let Et=0;Et<Be.length;Et++)Z=Be[Et],Object.prototype.hasOwnProperty.call(de,Z)&&(m[Z]=de[Z])}}function et(m){var F=1;m=m.split(":");const Z=[];for(;0<F&&m.length;)Z.push(m.shift()),F--;return m.length&&Z.push(m.join(":")),Z}function pt(m){R.setTimeout(()=>{throw m},0)}function Le(){var m=Uu;let F=null;return m.g&&(F=m.g,m.g=m.g.next,m.g||(m.h=null),F.next=null),F}var Tl=new class bn{constructor(F,Z){this.i=F,this.j=Z,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}(()=>new Mh,m=>m.reset());class Mh{constructor(){this.next=this.g=this.h=null}set(F,Z){this.h=F,this.g=Z,this.next=null}reset(){this.next=this.g=this.h=null}}let Al,Cl=!1,Uu=new class qa{constructor(){this.h=this.g=null}add(F,Z){const de=Tl.get();de.set(F,Z),this.h?this.h.next=de:this.g=de,this.h=de}},xd=()=>{const m=R.Promise.resolve(void 0);Al=()=>{m.then(Ph)}};var Ph=()=>{for(var m;m=Le();){try{m.h.call(m.g)}catch(Z){pt(Z)}var F=Tl;F.j(m),100>F.h&&(F.h++,m.next=F.g,F.g=m)}Cl=!1};function ou(){this.s=this.s,this.C=this.C}function ra(m,F){this.type=m,this.g=this.target=F,this.defaultPrevented=!1}ou.prototype.s=!1,ou.prototype.ma=function(){this.s||(this.s=!0,this.N())},ou.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ra.prototype.h=function(){this.defaultPrevented=!0};var Ny=function(){if(!R.addEventListener||!Object.defineProperty)return!1;var m=!1,F=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const Z=()=>{};R.addEventListener("test",Z,F),R.removeEventListener("test",Z,F)}catch{}return m}();function Oh(m,F){if(ra.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var Z=this.type=m.type,de=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=F,F=m.relatedTarget){if(Er){e:{try{Hn(F.nodeName);var ct=!0;break e}catch{}ct=!1}ct||(F=null)}}else"mouseover"==Z?F=m.fromElement:"mouseout"==Z&&(F=m.toElement);this.relatedTarget=F,de?(this.clientX=void 0!==de.clientX?de.clientX:de.pageX,this.clientY=void 0!==de.clientY?de.clientY:de.pageY,this.screenX=de.screenX||0,this.screenY=de.screenY||0):(this.clientX=void 0!==m.clientX?m.clientX:m.pageX,this.clientY=void 0!==m.clientY?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType="string"==typeof m.pointerType?m.pointerType:ky[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Oh.aa.h.call(this)}}Rt(Oh,ra);var ky={2:"touch",3:"pen",4:"mouse"};Oh.prototype.h=function(){Oh.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Nh="closure_listenable_"+(1e6*Math.random()|0),Fy=0;function Vy(m,F,Z,de,ct){this.listener=m,this.proxy=null,this.src=F,this.type=Z,this.capture=!!de,this.ha=ct,this.key=++Fy,this.da=this.fa=!1}function kf(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function kh(m){this.src=m,this.g={},this.h=0}function Sg(m,F){var Z=F.type;if(Z in m.g){var Et,de=m.g[Z],ct=Array.prototype.indexOf.call(de,F,void 0);(Et=0<=ct)&&Array.prototype.splice.call(de,ct,1),Et&&(kf(F),0==m.g[Z].length&&(delete m.g[Z],m.h--))}}function Ly(m,F,Z,de){for(var ct=0;ct<m.length;++ct){var Et=m[ct];if(!Et.da&&Et.listener==F&&Et.capture==!!Z&&Et.ha==de)return ct}return-1}kh.prototype.add=function(m,F,Z,de,ct){var Et=m.toString();(m=this.g[Et])||(m=this.g[Et]=[],this.h++);var on=Ly(m,F,de,ct);return-1<on?(F=m[on],Z||(F.fa=!1)):((F=new Vy(F,this.src,Et,!!de,ct)).fa=Z,m.push(F)),F};var Uy="closure_lm_"+(1e6*Math.random()|0),Rg={};function By(m,F,Z,de,ct){if(de&&de.once)return Pb(m,F,Z,de,ct);if(Array.isArray(F)){for(var Et=0;Et<F.length;Et++)By(m,F[Et],Z,de,ct);return null}return Z=Fh(Z),m&&m[Nh]?m.K(F,Z,X(de)?!!de.capture:!!de,ct):xb(m,F,Z,!1,de,ct)}function xb(m,F,Z,de,ct,Et){if(!F)throw Error("Invalid event type");var on=X(ct)?!!ct.capture:!!ct,ls=Md(m);if(ls||(m[Uy]=ls=new kh(m)),(Z=ls.add(F,Z,de,on,Et)).proxy)return Z;if(de=function Mb(){const F=Mg;return function m(Z){return F.call(m.src,m.listener,Z)}}(),Z.proxy=de,de.src=m,de.listener=Z,m.addEventListener)Ny||(ct=on),void 0===ct&&(ct=!1),m.addEventListener(F.toString(),de,ct);else if(m.attachEvent)m.attachEvent(Hy(F.toString()),de);else{if(!m.addListener||!m.removeListener)throw Error("addEventListener and attachEvent are unavailable.");m.addListener(de)}return Z}function Pb(m,F,Z,de,ct){if(Array.isArray(F)){for(var Et=0;Et<F.length;Et++)Pb(m,F[Et],Z,de,ct);return null}return Z=Fh(Z),m&&m[Nh]?m.L(F,Z,X(de)?!!de.capture:!!de,ct):xb(m,F,Z,!0,de,ct)}function jy(m,F,Z,de,ct){if(Array.isArray(F))for(var Et=0;Et<F.length;Et++)jy(m,F[Et],Z,de,ct);else de=X(de)?!!de.capture:!!de,Z=Fh(Z),m&&m[Nh]?(m=m.i,(F=String(F).toString())in m.g&&-1<(Z=Ly(Et=m.g[F],Z,de,ct))&&(kf(Et[Z]),Array.prototype.splice.call(Et,Z,1),0==Et.length&&(delete m.g[F],m.h--))):m&&(m=Md(m))&&(F=m.g[F.toString()],m=-1,F&&(m=Ly(F,Z,de,ct)),(Z=-1<m?F[m]:null)&&xg(Z))}function xg(m){if("number"!=typeof m&&m&&!m.da){var F=m.src;if(F&&F[Nh])Sg(F.i,m);else{var Z=m.type,de=m.proxy;F.removeEventListener?F.removeEventListener(Z,de,m.capture):F.detachEvent?F.detachEvent(Hy(Z),de):F.addListener&&F.removeListener&&F.removeListener(de),(Z=Md(F))?(Sg(Z,m),0==Z.h&&(Z.src=null,F[Uy]=null)):kf(m)}}}function Hy(m){return m in Rg?Rg[m]:Rg[m]="on"+m}function Mg(m,F){if(m.da)m=!0;else{F=new Oh(F,this);var Z=m.listener,de=m.ha||m.src;m.fa&&xg(m),m=Z.call(de,F)}return m}function Md(m){return(m=m[Uy])instanceof kh?m:null}var Ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fh(m){return"function"==typeof m?m:(m[Ff]||(m[Ff]=function(F){return m.handleEvent(F)}),m[Ff])}function ia(){ou.call(this),this.i=new kh(this),this.M=this,this.F=null}function ko(m,F){var Z,de=m.F;if(de)for(Z=[];de;de=de.F)Z.push(de);if(m=m.M,de=F.type||F,"string"==typeof F)F=new ra(F,m);else if(F instanceof ra)F.target=F.target||m;else{var ct=F;Ze(F=new ra(de,m),ct)}if(ct=!0,Z)for(var Et=Z.length-1;0<=Et;Et--){var on=F.g=Z[Et];ct=Vf(on,de,!0,F)&&ct}if(ct=Vf(on=F.g=m,de,!0,F)&&ct,ct=Vf(on,de,!1,F)&&ct,Z)for(Et=0;Et<Z.length;Et++)ct=Vf(on=F.g=Z[Et],de,!1,F)&&ct}function Vf(m,F,Z,de){if(!(F=m.i.g[String(F)]))return!0;F=F.concat();for(var ct=!0,Et=0;Et<F.length;++Et){var on=F[Et];if(on&&!on.da&&on.capture==Z){var ls=on.listener,sa=on.ha||on.src;on.fa&&Sg(m.i,on),ct=!1!==ls.call(sa,de)&&ct}}return ct&&!de.defaultPrevented}function $y(m,F,Z){if("function"==typeof m)Z&&(m=Oe(m,Z));else{if(!m||"function"!=typeof m.handleEvent)throw Error("Invalid listener argument");m=Oe(m.handleEvent,m)}return 2147483647<Number(F)?-1:R.setTimeout(m,F||0)}function Vh(m){m.g=$y(()=>{m.g=null,m.i&&(m.i=!1,Vh(m))},m.l);const F=m.h;m.h=null,m.m.apply(null,F)}Rt(ia,ou),ia.prototype[Nh]=!0,ia.prototype.removeEventListener=function(m,F,Z,de){jy(this,m,F,Z,de)},ia.prototype.N=function(){if(ia.aa.N.call(this),this.i){var F,m=this.i;for(F in m.g){for(var Z=m.g[F],de=0;de<Z.length;de++)kf(Z[de]);delete m.g[F],m.h--}}this.F=null},ia.prototype.K=function(m,F,Z,de){return this.i.add(String(m),F,!1,Z,de)},ia.prototype.L=function(m,F,Z,de){return this.i.add(String(m),F,!0,Z,de)};class Ob extends ou{constructor(F,Z){super(),this.m=F,this.l=Z,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:Vh(this)}N(){super.N(),this.g&&(R.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lf(m){ou.call(this),this.h=m,this.g={}}Rt(Lf,ou);var zy=[];function Ky(m){ar(m.g,function(F,Z){this.g.hasOwnProperty(Z)&&xg(F)},m),m.g={}}Lf.prototype.N=function(){Lf.aa.N.call(this),Ky(this)},Lf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uf=R.JSON.stringify,Jp=R.JSON.parse,em=class{stringify(m){return R.JSON.stringify(m,void 0)}parse(m){return R.JSON.parse(m,void 0)}};function Wy(){}function qy(){}Wy.prototype.h=null;var Pd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pg(){ra.call(this,"d")}function tm(){ra.call(this,"c")}Rt(Pg,ra),Rt(tm,ra);var Od={},Qy=null;function Bf(){return Qy=Qy||new ia}function Og(m){ra.call(this,Od.La,m)}function Lh(m){const F=Bf();ko(F,new Og(F))}function Xy(m,F){ra.call(this,Od.STAT_EVENT,m),this.stat=F}function Ma(m){const F=Bf();ko(F,new Xy(F,m))}function Yy(m,F){ra.call(this,Od.Ma,m),this.size=F}function Uh(m,F){if("function"!=typeof m)throw Error("Fn must not be null and must be a function");return R.setTimeout(function(){m()},F)}function Nd(){this.g=!0}function au(m,F,Z,de){m.info(function(){return"XMLHTTP TEXT ("+F+"): "+function kg(m,F){if(!m.g)return F;if(!F)return null;try{var Z=JSON.parse(F);if(Z)for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var de=Z[m];if(!(2>de.length)){var ct=de[1];if(Array.isArray(ct)&&!(1>ct.length)){var Et=ct[0];if("noop"!=Et&&"stop"!=Et&&"close"!=Et)for(var on=1;on<ct.length;on++)ct[on]=""}}}return Uf(Z)}catch{return F}}(m,Z)+(de?" "+de:"")})}Od.La="serverreachability",Rt(Og,ra),Od.STAT_EVENT="statevent",Rt(Xy,ra),Od.Ma="timingevent",Rt(Yy,ra),Nd.prototype.xa=function(){this.g=!1},Nd.prototype.info=function(){};var Fg,jf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function rm(){}function Dl(m,F,Z,de){this.j=m,this.i=F,this.l=Z,this.R=de||1,this.U=new Lf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new im}function im(){this.i=null,this.g="",this.h=!1}Rt(rm,Wy),rm.prototype.g=function(){return new XMLHttpRequest},rm.prototype.i=function(){return{}},Fg=new rm;var Vg={},sm={};function Lg(m,F,Z){m.L=1,m.v=Bh(Sl(F)),m.m=Z,m.P=!0,Jy(m,null)}function Jy(m,F){m.F=Date.now(),Hf(m),m.A=Sl(m.v);var Z=m.A,de=m.R;Array.isArray(de)||(de=[String(de)]),ov(Z.i,"t",de),m.C=0,Z=m.j.J,m.h=new im,m.g=Zg(m.j,Z?F:null,!m.m),0<m.O&&(m.M=new Ob(Oe(m.Y,m,m.g),m.O)),F=m.U,Z=m.g,de=m.ca;var ct="readystatechange";Array.isArray(ct)||(ct&&(zy[0]=ct.toString()),ct=zy);for(var Et=0;Et<ct.length;Et++){var on=By(Z,ct[Et],de||F.handleEvent,!1,F.h||F);if(!on)break;F.g[on.key]=on}F=m.H?Se(m.H):{},m.m?(m.u||(m.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,F)):(m.u="GET",m.g.ea(m.A,m.u,null,F)),Lh(),function Ng(m,F,Z,de,ct,Et){m.info(function(){if(m.g)if(Et)for(var on="",ls=Et.split("&"),sa=0;sa<ls.length;sa++){var Vi=ls[sa].split("=");if(1<Vi.length){var Ia=Vi[0];Vi=Vi[1];var wa=Ia.split("_");on=2<=wa.length&&"type"==wa[1]?on+(Ia+"=")+Vi+"&":on+(Ia+"=redacted&")}}else on=null;else on=Et;return"XMLHTTP REQ ("+de+") [attempt "+ct+"]: "+F+"\n"+Z+"\n"+on})}(m.i,m.u,m.A,m.l,m.R,m.m)}function Ug(m){return!!m.g&&"GET"==m.u&&2!=m.L&&m.j.Ca}function Bg(m,F){var Z=m.C,de=F.indexOf("\n",Z);return-1==de?sm:(Z=Number(F.substring(Z,de)),isNaN(Z)?Vg:(de+=1)+Z>F.length?sm:(F=F.slice(de,de+Z),m.C=de+Z,F))}function Hf(m){m.S=Date.now()+m.I,om(m,m.I)}function om(m,F){if(null!=m.B)throw Error("WatchDog timer not null");m.B=Uh(Oe(m.ba,m),F)}function $f(m){m.B&&(R.clearTimeout(m.B),m.B=null)}function zf(m){0==m.j.G||m.J||hv(m.j,m)}function Bu(m){$f(m);var F=m.M;F&&"function"==typeof F.ma&&F.ma(),m.M=null,Ky(m.U),m.g&&(F=m.g,m.g=null,F.abort(),F.ma())}function am(m,F){try{var Z=m.j;if(0!=Z.G&&(Z.g==m||cm(Z.h,m)))if(!m.K&&cm(Z.h,m)&&3==Z.G){try{var de=Z.Da.g.parse(F)}catch{de=null}if(Array.isArray(de)&&3==de.length){var ct=de;if(0==ct[0]){e:if(!Z.u){if(Z.g){if(!(Z.g.F+3e3<m.F))break e;vm(Z),mm(Z)}_m(Z),Ma(18)}}else Z.za=ct[1],0<Z.za-Z.T&&37500>ct[2]&&Z.F&&0==Z.v&&!Z.C&&(Z.C=Uh(Oe(Z.Za,Z),6e3));if(1>=Hg(Z.h)&&Z.ca){try{Z.ca()}catch{}Z.ca=void 0}}else Rl(Z,11)}else if((m.K||Z.g==m)&&vm(Z),!jn(F))for(ct=Z.Da.g.parse(F),F=0;F<ct.length;F++){let Vi=ct[F];if(Z.T=Vi[0],Vi=Vi[1],2==Z.G)if("c"==Vi[0]){Z.K=Vi[1],Z.ia=Vi[2];const Ia=Vi[3];null!=Ia&&(Z.la=Ia,Z.j.info("VER="+Z.la));const wa=Vi[4];null!=wa&&(Z.Aa=wa,Z.j.info("SVER="+Z.Aa));const Wh=Vi[5];null!=Wh&&"number"==typeof Wh&&0<Wh&&(Z.L=de=1.5*Wh,Z.j.info("backChannelRequestTimeoutMs_="+de)),de=Z;const Jc=m.g;if(Jc){const Im=Jc.g?Jc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Im){var Et=de.h;Et.g||-1==Im.indexOf("spdy")&&-1==Im.indexOf("quic")&&-1==Im.indexOf("h2")||(Et.j=Et.l,Et.g=new Set,Et.h&&(lm(Et,Et.h),Et.h=null))}if(de.D){const n_=Jc.g?Jc.g.getResponseHeader("X-HTTP-Session-Id"):null;n_&&(de.ya=n_,Cs(de.I,de.D,n_))}}Z.G=3,Z.l&&Z.l.ua(),Z.ba&&(Z.R=Date.now()-m.F,Z.j.info("Handshake RTT: "+Z.R+"ms"));var on=m;if((de=Z).qa=Yg(de,de.J?de.ia:null,de.W),on.K){um(de.h,on);var ls=on,sa=de.L;sa&&(ls.I=sa),ls.B&&($f(ls),Hf(ls)),de.g=on}else dv(de);0<Z.i.length&&gm(Z)}else"stop"!=Vi[0]&&"close"!=Vi[0]||Rl(Z,7);else 3==Z.G&&("stop"==Vi[0]||"close"==Vi[0]?"stop"==Vi[0]?Rl(Z,7):Vd(Z):"noop"!=Vi[0]&&Z.l&&Z.l.ta(Vi),Z.v=0)}Lh()}catch{}}function jg(m){this.l=m||10,m=R.PerformanceNavigationTiming?0<(m=R.performance.getEntriesByType("navigation")).length&&("hq"==m[0].nextHopProtocol||"h2"==m[0].nextHopProtocol):!!(R.chrome&&R.chrome.loadTimes&&R.chrome.loadTimes()&&R.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tv(m){return!!m.h||!!m.g&&m.g.size>=m.j}function Hg(m){return m.h?1:m.g?m.g.size:0}function cm(m,F){return m.h?m.h==F:!!m.g&&m.g.has(F)}function lm(m,F){m.g?m.g.add(F):m.h=F}function um(m,F){m.h&&m.h==F?m.h=null:m.g&&m.g.has(F)&&m.g.delete(F)}function $g(m){if(null!=m.h)return m.i.concat(m.h.D);if(null!=m.g&&0!==m.g.size){let F=m.i;for(const Z of m.g.values())F=F.concat(Z.D);return F}return Kt(m.i)}function zg(m,F){if(m.forEach&&"function"==typeof m.forEach)m.forEach(F,void 0);else if(k(m)||"string"==typeof m)Array.prototype.forEach.call(m,F,void 0);else for(var Z=function rv(m){if(m.na&&"function"==typeof m.na)return m.na();if(!m.V||"function"!=typeof m.V){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(k(m)||"string"==typeof m){var F=[];m=m.length;for(var Z=0;Z<m;Z++)F.push(Z);return F}F=[],Z=0;for(const de in m)F[Z++]=de;return F}}}(m),de=function nv(m){if(m.V&&"function"==typeof m.V)return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if("string"==typeof m)return m.split("");if(k(m)){for(var F=[],Z=m.length,de=0;de<Z;de++)F.push(m[de]);return F}for(de in F=[],Z=0,m)F[Z++]=m[de];return F}(m),ct=de.length,Et=0;Et<ct;Et++)F.call(void 0,de[Et],Z&&Z[Et],m)}Dl.prototype.ca=function(m){m=m.target;const F=this.M;F&&3==lu(m)?F.j():this.Y(m)},Dl.prototype.Y=function(m){try{if(m==this.g)e:{const wa=lu(this.g);var F=this.g.Ba();if(this.g.Z(),!(3>wa)&&(3!=wa||this.g&&(this.h.h||this.g.oa()||uv(this.g)))){this.J||4!=wa||7==F||Lh(),$f(this);var Z=this.g.Z();this.X=Z;t:if(Ug(this)){var de=uv(this.g);m="";var ct=de.length,Et=4==lu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Bu(this),zf(this);var on="";break t}this.h.i=new R.TextDecoder}for(F=0;F<ct;F++)this.h.h=!0,m+=this.h.i.decode(de[F],{stream:!(Et&&F==ct-1)});de.length=0,this.h.g+=m,this.C=0,on=this.h.g}else on=this.g.oa();if(this.o=200==Z,function Nb(m,F,Z,de,ct,Et,on){m.info(function(){return"XMLHTTP RESP ("+de+") [ attempt "+ct+"]: "+F+"\n"+Z+"\n"+Et+" "+on})}(this.i,this.u,this.A,this.l,this.R,wa,Z),this.o){if(this.T&&!this.K){t:{if(this.g){var ls,sa=this.g;if((ls=sa.g?sa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jn(ls)){var Vi=ls;break t}}Vi=null}if(!(Z=Vi)){this.o=!1,this.s=3,Ma(12),Bu(this),zf(this);break e}au(this.i,this.l,Z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,am(this,Z)}if(this.P){let Jc;for(Z=!0;!this.J&&this.C<on.length;){if(Jc=Bg(this,on),Jc==sm){4==wa&&(this.s=4,Ma(14),Z=!1),au(this.i,this.l,null,"[Incomplete Response]");break}if(Jc==Vg){this.s=4,Ma(15),au(this.i,this.l,on,"[Invalid Chunk]"),Z=!1;break}au(this.i,this.l,Jc,null),am(this,Jc)}if(Ug(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=wa||0!=on.length||this.h.h||(this.s=1,Ma(16),Z=!1),this.o=this.o&&Z,Z){if(0<on.length&&!this.W){this.W=!0;var Ia=this.j;Ia.g==this&&Ia.ba&&!Ia.M&&(Ia.j.info("Great, no buffering proxy detected. Bytes received: "+on.length),ym(Ia),Ia.M=!0,Ma(11))}}else au(this.i,this.l,on,"[Invalid Chunked Response]"),Bu(this),zf(this)}else au(this.i,this.l,on,null),am(this,on);4==wa&&Bu(this),this.o&&!this.J&&(4==wa?hv(this.j,this):(this.o=!1,Hf(this)))}else(function Hb(m){const F={};m=(m.g&&2<=lu(m)&&m.g.getAllResponseHeaders()||"").split("\r\n");for(let de=0;de<m.length;de++){if(jn(m[de]))continue;var Z=et(m[de]);const ct=Z[0];if("string"!=typeof(Z=Z[1]))continue;Z=Z.trim();const Et=F[ct]||[];F[ct]=Et,Et.push(Z)}!function Ge(m,F){for(const Z in m)F.call(void 0,m[Z],Z,m)}(F,function(de){return de.join(", ")})})(this.g),400==Z&&0<on.indexOf("Unknown SID")?(this.s=3,Ma(12)):(this.s=0,Ma(13)),Bu(this),zf(this)}}}catch{}},Dl.prototype.cancel=function(){this.J=!0,Bu(this)},Dl.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(function nm(m,F){m.info(function(){return"TIMEOUT: "+F})}(this.i,this.A),2!=this.L&&(Lh(),Ma(17)),Bu(this),this.s=2,zf(this)):om(this,this.S-m)},jg.prototype.cancel=function(){if(this.i=$g(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const m of this.g.values())m.cancel();this.g.clear()}};var Kg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ju(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ju){this.h=m.h,kd(this,m.j),this.o=m.o,this.g=m.g,Xc(this,m.s),this.l=m.l;var F=m.i,Z=new jh;Z.i=F.i,F.g&&(Z.g=new Map(F.g),Z.h=F.h),sv(this,Z),this.m=m.m}else m&&(F=String(m).match(Kg))?(this.h=!1,kd(this,F[1]||"",!0),this.o=Yc(F[2]||""),this.g=Yc(F[3]||"",!0),Xc(this,F[4]),this.l=Yc(F[5]||"",!0),sv(this,F[6]||"",!0),this.m=Yc(F[7]||"")):(this.h=!1,this.i=new jh(null,this.h))}function Sl(m){return new ju(m)}function kd(m,F,Z){m.j=Z?Yc(F,!0):F,m.j&&(m.j=m.j.replace(/:$/,""))}function Xc(m,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);m.s=F}else m.s=null}function sv(m,F,Z){F instanceof jh?(m.i=F,function av(m,F){F&&!m.j&&(Hu(m),m.i=null,m.g.forEach(function(Z,de){var ct=de.toLowerCase();de!=ct&&(wo(this,de),ov(this,ct,Z))},m)),m.j=F}(m.i,m.h)):(Z||(F=Fd(F,Fb)),m.i=new jh(F,m.h))}function Cs(m,F,Z){m.i.set(F,Z)}function Bh(m){return Cs(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Yc(m,F){return m?F?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Fd(m,F,Z){return"string"==typeof m?(m=encodeURI(m).replace(F,kb),Z&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function kb(m){return"%"+((m=m.charCodeAt(0))>>4&15).toString(16)+(15&m).toString(16)}ju.prototype.toString=function(){var m=[],F=this.j;F&&m.push(Fd(F,dm,!0),":");var Z=this.g;return(Z||"file"==F)&&(m.push("//"),(F=this.o)&&m.push(Fd(F,dm,!0),"@"),m.push(encodeURIComponent(String(Z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(Z=this.s)&&m.push(":",String(Z))),(Z=this.l)&&(this.g&&"/"!=Z.charAt(0)&&m.push("/"),m.push(Fd(Z,"/"==Z.charAt(0)?WE:KE,!0))),(Z=this.i.toString())&&m.push("?",Z),(Z=this.m)&&m.push("#",Fd(Z,Vb)),m.join("")};var m,dm=/[#\/\?@]/g,KE=/[#\?:]/g,WE=/[#\?]/g,Fb=/[#\?@]/g,Vb=/#/g;function jh(m,F){this.h=this.g=null,this.i=m||null,this.j=!!F}function Hu(m){m.g||(m.g=new Map,m.h=0,m.i&&function iv(m,F){if(m){m=m.split("&");for(var Z=0;Z<m.length;Z++){var de=m[Z].indexOf("="),ct=null;if(0<=de){var Et=m[Z].substring(0,de);ct=m[Z].substring(de+1)}else Et=m[Z];F(Et,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}(m.i,function(F,Z){m.add(decodeURIComponent(F.replace(/\+/g," ")),Z)}))}function wo(m,F){Hu(m),F=Hh(m,F),m.g.has(F)&&(m.i=null,m.h-=m.g.get(F).length,m.g.delete(F))}function Wg(m,F){return Hu(m),F=Hh(m,F),m.g.has(F)}function ov(m,F,Z){wo(m,F),0<Z.length&&(m.i=null,m.g.set(Hh(m,F),Kt(Z)),m.h+=Z.length)}function Hh(m,F){return F=String(F),m.j&&(F=F.toLowerCase()),F}function cu(m,F,Z,de,ct){try{ct&&(ct.onload=null,ct.onerror=null,ct.onabort=null,ct.ontimeout=null),de(Z)}catch{}}function $h(){this.g=new em}function Ub(m,F,Z){const de=Z||"";try{zg(m,function(ct,Et){let on=ct;X(ct)&&(on=Uf(ct)),F.push(de+Et+"="+encodeURIComponent(on))})}catch(ct){throw F.push(de+"type="+encodeURIComponent("_badmap")),ct}}function Kf(m){this.l=m.Ub||null,this.j=m.eb||!1}function Wf(m,F){ia.call(this),this.D=m,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function lv(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}function zh(m){m.readyState=4,m.l=null,m.j=null,m.v=null,hm(m)}function hm(m){m.onreadystatechange&&m.onreadystatechange.call(m)}function fm(m){let F="";return ar(m,function(Z,de){F+=de,F+=":",F+=Z,F+="\r\n"}),F}function Gf(m,F,Z){e:{for(de in Z){var de=!1;break e}de=!0}de||(Z=fm(Z),"string"==typeof m?null!=Z&&encodeURIComponent(String(Z)):Cs(m,F,Z))}function Hi(m){ia.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=jh.prototype).add=function(m,F){Hu(this),this.i=null,m=Hh(this,m);var Z=this.g.get(m);return Z||this.g.set(m,Z=[]),Z.push(F),this.h+=1,this},a.forEach=function(m,F){Hu(this),this.g.forEach(function(Z,de){Z.forEach(function(ct){m.call(F,ct,de,this)},this)},this)},a.na=function(){Hu(this);const m=Array.from(this.g.values()),F=Array.from(this.g.keys()),Z=[];for(let de=0;de<F.length;de++){const ct=m[de];for(let Et=0;Et<ct.length;Et++)Z.push(F[de])}return Z},a.V=function(m){Hu(this);let F=[];if("string"==typeof m)Wg(this,m)&&(F=F.concat(this.g.get(Hh(this,m))));else{m=Array.from(this.g.values());for(let Z=0;Z<m.length;Z++)F=F.concat(m[Z])}return F},a.set=function(m,F){return Hu(this),this.i=null,Wg(this,m=Hh(this,m))&&(this.h-=this.g.get(m).length),this.g.set(m,[F]),this.h+=1,this},a.get=function(m,F){return m&&0<(m=this.V(m)).length?String(m[0]):F},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],F=Array.from(this.g.keys());for(var Z=0;Z<F.length;Z++){var de=F[Z];const Et=encodeURIComponent(String(de)),on=this.V(de);for(de=0;de<on.length;de++){var ct=Et;""!==on[de]&&(ct+="="+encodeURIComponent(String(on[de]))),m.push(ct)}}return this.i=m.join("&")},Rt(Kf,Wy),Kf.prototype.g=function(){return new Wf(this.l,this.j)},Kf.prototype.i=(m={},function(){return m}),Rt(Wf,ia),(a=Wf.prototype).open=function(m,F){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=F,this.readyState=1,hm(this)},a.send=function(m){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(F.body=m),(this.D||R).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zh(this)),this.readyState=0},a.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,hm(this)),this.g&&(this.readyState=3,hm(this),this.g)))if("arraybuffer"===this.responseType)m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof R.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lv(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var F=m.value?m.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!m.done}))&&(this.response=this.responseText+=F)}m.done?zh(this):hm(this),3==this.readyState&&lv(this)}},a.Ra=function(m){this.g&&(this.response=this.responseText=m,zh(this))},a.Qa=function(m){this.g&&(this.response=m,zh(this))},a.ga=function(){this.g&&zh(this)},a.setRequestHeader=function(m,F){this.u.append(m,F)},a.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],F=this.h.entries();for(var Z=F.next();!Z.done;)m.push((Z=Z.value)[0]+": "+Z[1]),Z=F.next();return m.join("\r\n")},Object.defineProperty(Wf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(m){this.m=m?"include":"same-origin"}}),Rt(Hi,ia);var Bb=/^https?$/i,jb=["POST","PUT"];function Zc(m,F){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=F,m.m=5,bc(m),qf(m)}function bc(m){m.A||(m.A=!0,ko(m,"complete"),ko(m,"error"))}function Ec(m){if(m.h&&typeof _<"u"&&(!m.v[1]||4!=lu(m)||2!=m.Z()))if(m.u&&4==lu(m))$y(m.Ea,0,m);else if(ko(m,"readystatechange"),4==lu(m)){m.h=!1;try{const on=m.Z();e:switch(on){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var Z;if(!(Z=F)){var de;if(de=0===on){var ct=String(m.D).match(Kg)[1]||null;!ct&&R.self&&R.self.location&&(ct=R.self.location.protocol.slice(0,-1)),de=!Bb.test(ct?ct.toLowerCase():"")}Z=de}if(Z)ko(m,"complete"),ko(m,"success");else{m.m=6;try{var Et=2<lu(m)?m.g.statusText:""}catch{Et=""}m.l=Et+" ["+m.Z()+"]",bc(m)}}finally{qf(m)}}}function qf(m,F){if(m.g){Gg(m);const Z=m.g,de=m.v[0]?()=>{}:null;m.g=null,m.v=null,F||ko(m,"ready");try{Z.onreadystatechange=de}catch{}}}function Gg(m){m.I&&(R.clearTimeout(m.I),m.I=null)}function lu(m){return m.g?m.g.readyState:0}function uv(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Qf(m,F,Z){return Z&&Z.internalChannelParams&&Z.internalChannelParams[m]||F}function pm(m){this.Aa=0,this.i=[],this.j=new Nd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qf("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qf("baseRetryDelayMs",5e3,m),this.cb=Qf("retryDelaySeedMs",1e4,m),this.Wa=Qf("forwardChannelMaxRetries",2,m),this.wa=Qf("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new jg(m&&m.concurrentRequestLimit),this.Da=new $h,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Vd(m){if(qg(m),3==m.G){var F=m.U++,Z=Sl(m.I);if(Cs(Z,"SID",m.K),Cs(Z,"RID",F),Cs(Z,"TYPE","terminate"),Kh(m,Z),(F=new Dl(m,m.j,F)).L=2,F.v=Bh(Sl(Z)),Z=!1,R.navigator&&R.navigator.sendBeacon)try{Z=R.navigator.sendBeacon(F.v.toString(),"")}catch{}!Z&&R.Image&&((new Image).src=F.v,Z=!0),Z||(F.g=Zg(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Hf(F)}Em(m)}function mm(m){m.g&&(ym(m),m.g.cancel(),m.g=null)}function qg(m){mm(m),m.u&&(R.clearTimeout(m.u),m.u=null),vm(m),m.h.cancel(),m.s&&("number"==typeof m.s&&R.clearTimeout(m.s),m.s=null)}function gm(m){if(!tv(m.h)&&!m.s){m.s=!0;var F=m.Ga;Al||xd(),Cl||(Al(),Cl=!0),Uu.add(F,m),m.B=0}}function Qg(m,F){var Z;Z=F?F.l:m.U++;const de=Sl(m.I);Cs(de,"SID",m.K),Cs(de,"RID",Z),Cs(de,"AID",m.T),Kh(m,de),m.m&&m.o&&Gf(de,m.m,m.o),Z=new Dl(m,m.j,Z,m.B+1),null===m.m&&(Z.H=m.o),F&&(m.i=F.D.concat(m.i)),F=Xf(m,Z,1e3),Z.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),lm(m.h,Z),Lg(Z,de,F)}function Kh(m,F){m.H&&ar(m.H,function(Z,de){Cs(F,de,Z)}),m.l&&zg({},function(Z,de){Cs(F,de,Z)})}function Xf(m,F,Z){Z=Math.min(m.i.length,Z);var de=m.l?Oe(m.l.Na,m.l,m):null;e:{var ct=m.i;let Et=-1;for(;;){const on=["count="+Z];-1==Et?0<Z?(Et=ct[0].g,on.push("ofs="+Et)):Et=0:on.push("ofs="+Et);let ls=!0;for(let sa=0;sa<Z;sa++){let Vi=ct[sa].g;const Ia=ct[sa].map;if(Vi-=Et,0>Vi)Et=Math.max(0,ct[sa].g-100),ls=!1;else try{Ub(Ia,on,"req"+Vi+"_")}catch{de&&de(Ia)}}if(ls){de=on.join("&");break e}}}return m=m.i.splice(0,Z),F.D=m,de}function dv(m){if(!m.g&&!m.u){m.Y=1;var F=m.Fa;Al||xd(),Cl||(Al(),Cl=!0),Uu.add(F,m),m.v=0}}function _m(m){return!(m.g||m.u||3<=m.v||(m.Y++,m.u=Uh(Oe(m.Fa,m),bm(m,m.v)),m.v++,0))}function ym(m){null!=m.A&&(R.clearTimeout(m.A),m.A=null)}function Xg(m){m.g=new Dl(m,m.j,"rpc",m.Y),null===m.m&&(m.g.H=m.o),m.g.O=0;var F=Sl(m.qa);Cs(F,"RID","rpc"),Cs(F,"SID",m.K),Cs(F,"AID",m.T),Cs(F,"CI",m.F?"0":"1"),!m.F&&m.ja&&Cs(F,"TO",m.ja),Cs(F,"TYPE","xmlhttp"),Kh(m,F),m.m&&m.o&&Gf(F,m.m,m.o),m.L&&(m.g.I=m.L);var Z=m.g;m=m.ia,Z.L=1,Z.v=Bh(Sl(F)),Z.m=null,Z.P=!0,Jy(Z,m)}function vm(m){null!=m.C&&(R.clearTimeout(m.C),m.C=null)}function hv(m,F){var Z=null;if(m.g==F){vm(m),ym(m),m.g=null;var de=2}else{if(!cm(m.h,F))return;Z=F.D,um(m.h,F),de=1}if(0!=m.G)if(F.o)if(1==de){Z=F.m?F.m.length:0,F=Date.now()-F.F;var ct=m.B;ko(de=Bf(),new Yy(de,Z)),gm(m)}else dv(m);else if(3==(ct=F.s)||0==ct&&0<F.X||!(1==de&&function $b(m,F){return!(Hg(m.h)>=m.h.j-(m.s?1:0)||(m.s?(m.i=F.D.concat(m.i),0):1==m.G||2==m.G||m.B>=(m.Va?0:m.Wa)||(m.s=Uh(Oe(m.Ga,m,F),bm(m,m.B)),m.B++,0)))}(m,F)||2==de&&_m(m)))switch(Z&&0<Z.length&&(F=m.h,F.i=F.i.concat(Z)),ct){case 1:Rl(m,5);break;case 4:Rl(m,10);break;case 3:Rl(m,6);break;default:Rl(m,2)}}function bm(m,F){let Z=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(Z*=2),Z*F}function Rl(m,F){if(m.j.info("Error code "+F),2==F){var Z=Oe(m.fb,m),de=m.Xa;const ct=!de;de=new ju(de||"//www.google.com/images/cleardot.gif"),R.location&&"http"==R.location.protocol||kd(de,"https"),Bh(de),ct?function Lb(m,F){const Z=new Nd;if(R.Image){const de=new Image;de.onload=ht(cu,Z,"TestLoadImage: loaded",!0,F,de),de.onerror=ht(cu,Z,"TestLoadImage: error",!1,F,de),de.onabort=ht(cu,Z,"TestLoadImage: abort",!1,F,de),de.ontimeout=ht(cu,Z,"TestLoadImage: timeout",!1,F,de),R.setTimeout(function(){de.ontimeout&&de.ontimeout()},1e4),de.src=m}else F(!1)}(de.toString(),Z):function cv(m,F){new Nd;const de=new AbortController,ct=setTimeout(()=>{de.abort(),cu(0,0,!1,F)},1e4);fetch(m,{signal:de.signal}).then(Et=>{clearTimeout(ct),cu(0,0,!!Et.ok,F)}).catch(()=>{clearTimeout(ct),cu(0,0,!1,F)})}(de.toString(),Z)}else Ma(2);m.G=0,m.l&&m.l.sa(F),Em(m),qg(m)}function Em(m){if(m.G=0,m.ka=[],m.l){const F=$g(m.h);(0!=F.length||0!=m.i.length)&&(Bt(m.ka,F),Bt(m.ka,m.i),m.h.i.length=0,Kt(m.i),m.i.length=0),m.l.ra()}}function Yg(m,F,Z){var de=Z instanceof ju?Sl(Z):new ju(Z);if(""!=de.g)F&&(de.g=F+"."+de.g),Xc(de,de.s);else{var ct=R.location;de=ct.protocol,F=F?F+"."+ct.hostname:ct.hostname,ct=+ct.port;var Et=new ju(null);de&&kd(Et,de),F&&(Et.g=F),ct&&Xc(Et,ct),Z&&(Et.l=Z),de=Et}return F=m.ya,(Z=m.D)&&F&&Cs(de,Z,F),Cs(de,"VER",m.la),Kh(m,de),de}function Zg(m,F,Z){if(F&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return(F=new Hi(m.Ca&&!m.pa?new Kf({eb:Z}):m.pa)).Ha(m.J),F}function Jg(){}function Yf(){}function Qa(m,F){ia.call(this),this.g=new pm(F),this.l=m,this.h=F&&F.messageUrlParams||null,m=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(m?m["X-WebChannel-Content-Type"]=F.messageContentType:m={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(m?m["X-WebChannel-Client-Profile"]=F.va:m={"X-WebChannel-Client-Profile":F.va}),this.g.S=m,(m=F&&F.Sb)&&!jn(m)&&(this.g.m=m),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!jn(F)&&(this.g.D=F,null!==(m=this.h)&&F in m&&F in(m=this.h)&&delete m[F]),this.j=new Ld(this)}function e_(m){Pg.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var F=m.__sm__;if(F){e:{for(const Z in F){m=Z;break e}m=void 0}(this.i=m)&&(m=this.i,F=null!==F&&m in F?F[m]:void 0),this.data=F}else this.data=m}function t_(){tm.call(this),this.status=1}function Ld(m){this.g=m}(a=Hi.prototype).Ha=function(m){this.J=m},a.ea=function(m,F,Z,de){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);F=F?F.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fg.g(),this.v=function Gy(m){return m.h||(m.h=m.i())}(this.o?this.o:Fg),this.g.onreadystatechange=Oe(this.Ea,this);try{this.B=!0,this.g.open(F,String(m),!0),this.B=!1}catch(Et){return void Zc(this,Et)}if(m=Z||"",Z=new Map(this.headers),de)if(Object.getPrototypeOf(de)===Object.prototype)for(var ct in de)Z.set(ct,de[ct]);else{if("function"!=typeof de.keys||"function"!=typeof de.get)throw Error("Unknown input type for opt_headers: "+String(de));for(const Et of de.keys())Z.set(Et,de.get(Et))}de=Array.from(Z.keys()).find(Et=>"content-type"==Et.toLowerCase()),ct=R.FormData&&m instanceof R.FormData,!(0<=Array.prototype.indexOf.call(jb,F,void 0))||de||ct||Z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Et,on]of Z)this.g.setRequestHeader(Et,on);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gg(this),this.u=!0,this.g.send(m),this.u=!1}catch(Et){Zc(this,Et)}},a.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,ko(this,"complete"),ko(this,"abort"),qf(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qf(this,!0)),Hi.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Ec(this):this.bb())},a.bb=function(){Ec(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<lu(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(m){if(this.g){var F=this.g.responseText;return m&&0==F.indexOf(m)&&(F=F.substring(m.length)),Jp(F)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=pm.prototype).la=8,a.G=1,a.connect=function(m,F,Z,de){Ma(0),this.W=m,this.H=F||{},Z&&void 0!==de&&(this.H.OSID=Z,this.H.OAID=de),this.F=this.X,this.I=Yg(this,null,this.W),gm(this)},a.Ga=function(m){if(this.s)if(this.s=null,1==this.G){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ct=new Dl(this,this.j,m);let Et=this.o;if(this.S&&(Et?(Et=Se(Et),Ze(Et,this.S)):Et=this.S),null!==this.m||this.O||(ct.H=Et,Et=null),this.P)e:{for(var F=0,Z=0;Z<this.i.length;Z++){var de=this.i[Z];if(void 0===(de="__data__"in de.map&&"string"==typeof(de=de.map.__data__)?de.length:void 0))break;if(4096<(F+=de)){F=Z;break e}if(4096===F||Z===this.i.length-1){F=Z+1;break e}}F=1e3}else F=1e3;F=Xf(this,ct,F),Cs(Z=Sl(this.I),"RID",m),Cs(Z,"CVER",22),this.D&&Cs(Z,"X-HTTP-Session-Id",this.D),Kh(this,Z),Et&&(this.O?F="headers="+encodeURIComponent(String(fm(Et)))+"&"+F:this.m&&Gf(Z,this.m,Et)),lm(this.h,ct),this.Ua&&Cs(Z,"TYPE","init"),this.P?(Cs(Z,"$req",F),Cs(Z,"SID","null"),ct.T=!0,Lg(ct,Z,null)):Lg(ct,Z,F),this.G=2}}else 3==this.G&&(m?Qg(this,m):0==this.i.length||tv(this.h)||Qg(this))},a.Fa=function(){if(this.u=null,Xg(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Uh(Oe(this.ab,this),m)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ma(10),mm(this),Xg(this))},a.Za=function(){null!=this.C&&(this.C=null,mm(this),_m(this),Ma(19))},a.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ma(2)):(this.j.info("Failed to ping google.com"),Ma(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=Jg.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},Yf.prototype.g=function(m,F){return new Qa(m,F)},Rt(Qa,ia),Qa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qa.prototype.close=function(){Vd(this.g)},Qa.prototype.o=function(m){var F=this.g;if("string"==typeof m){var Z={};Z.__data__=m,m=Z}else this.u&&((Z={}).__data__=Uf(m),m=Z);F.i.push(new class{constructor(m,F){this.g=m,this.map=F}}(F.Ya++,m)),3==F.G&&gm(F)},Qa.prototype.N=function(){this.g.l=null,delete this.j,Vd(this.g),delete this.g,Qa.aa.N.call(this)},Rt(e_,Pg),Rt(t_,tm),Rt(Ld,Jg),Ld.prototype.ua=function(){ko(this.g,"a")},Ld.prototype.ta=function(m){ko(this.g,new e_(m))},Ld.prototype.sa=function(m){ko(this.g,new t_)},Ld.prototype.ra=function(){ko(this.g,"b")},Yf.prototype.createWebChannel=Yf.prototype.g,Qa.prototype.send=Qa.prototype.o,Qa.prototype.open=Qa.prototype.m,Qa.prototype.close=Qa.prototype.close,Bn=dr.createWebChannelTransport=function(){return new Yf},Zn=dr.getStatEventTarget=function(){return Bf()},Cn=dr.Event=Od,pi=dr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jf.NO_ERROR=0,jf.TIMEOUT=8,jf.HTTP_ERROR=6,Si=dr.ErrorCode=jf,Zy.COMPLETE="complete",ri=dr.EventType=Zy,qy.EventType=Pd,Pd.OPEN="a",Pd.CLOSE="b",Pd.ERROR="c",Pd.MESSAGE="d",ia.prototype.listen=ia.prototype.K,or=dr.WebChannel=qy,dr.FetchXmlHttpFactory=Kf,Hi.prototype.listenOnce=Hi.prototype.L,Hi.prototype.getLastError=Hi.prototype.Ka,Hi.prototype.getLastErrorCode=Hi.prototype.Ba,Hi.prototype.getStatus=Hi.prototype.Z,Hi.prototype.getResponseJson=Hi.prototype.Oa,Hi.prototype.getResponseText=Hi.prototype.oa,Hi.prototype.send=Hi.prototype.ea,Hi.prototype.setWithCredentials=Hi.prototype.Ha,Sr=dr.XhrIo=Hi}).apply(typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{});const Br="@firebase/firestore";class rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let Mn="10.14.0";const Un=new Rn.Vy("@firebase/firestore");function Ri(){return Un.logLevel}function rt(a,...e){if(Un.logLevel<=Rn.$b.DEBUG){const r=e.map(Ds);Un.debug(`Firestore (${Mn}): ${a}`,...r)}}function qn(a,...e){if(Un.logLevel<=Rn.$b.ERROR){const r=e.map(Ds);Un.error(`Firestore (${Mn}): ${a}`,...r)}}function Dn(a,...e){if(Un.logLevel<=Rn.$b.WARN){const r=e.map(Ds);Un.warn(`Firestore (${Mn}): ${a}`,...r)}}function Ds(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function Wt(a="Unexpected state"){const e=`FIRESTORE (${Mn}) INTERNAL ASSERTION FAILED: `+a;throw qn(e),new Error(e)}function Zt(a,e){a||Wt()}function Lt(a,e){return a}const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends dn.g{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class mi{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(rr.UNAUTHENTICATED))}shutdown(){}}class ss{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class hs{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;Zt(void 0===this.o);let c=this.i;const h=X=>this.i!==c?(c=this.i,r(X)):Promise.resolve();let _=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),_.resolve(),_=new Rr,e.enqueueRetryable(()=>h(this.currentUser))};const R=()=>{const X=_;e.enqueueRetryable((0,Ie.A)(function*(){yield X.promise,yield h(s.currentUser)}))},k=X=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.o&&(this.auth.addAuthTokenListener(this.o),R())};this.t.onInit(X=>k(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?k(X):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),_.resolve(),_=new Rr)}},0),R()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Zt("string"==typeof s.accessToken),new mi(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(null===e||"string"==typeof e),new rr(e)}}class Us{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vt{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Us(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ie{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Zt(void 0===this.o);const s=h=>{null!=h.error&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const _=h.token!==this.R;return this.R=h.token,rt("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?r(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const c=h=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>c(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?c(h):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Zt("string"==typeof r.token),this.R=r.token,new ie(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function De(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class Re{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const c=De(40);for(let h=0;h<c.length;++h)s.length<20&&c[h]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c[h]%62))}return s}}function it(a,e){return a<e?-1:a>e?1:0}function kt(a,e,r){return a.length===e.length&&a.every((s,c)=>r(s,e[c]))}function Pn(a){return a+"\0"}class Gt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Tt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Tt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Tt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new Gt(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new Gt(0,0))}static max(){return new $t(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cr{constructor(e,r,s){void 0===r?r=0:r>e.length&&Wt(),void 0===s?s=e.length-r:s>e.length-r&&Wt(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===cr.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let c=0;c<s;c++){const h=e.get(c),_=r.get(c);if(h<_)return-1;if(h>_)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Xt extends cr{construct(e,r,s){return new Xt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new Tt(lt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(c=>c.length>0))}return new Xt(r)}static emptyPath(){return new Xt([])}}const xi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends cr{construct(e,r,s){return new Qn(e,r,s)}static isValidIdentifier(e){return xi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const r=[];let s="",c=0;const h=()=>{if(0===s.length)throw new Tt(lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let _=!1;for(;c<e.length;){const R=e[c];if("\\"===R){if(c+1===e.length)throw new Tt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[c+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new Tt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=k,c+=2}else"`"===R?(_=!_,c++):"."!==R||_?(s+=R,c++):(h(),c++)}if(h(),_)throw new Tt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(r)}static emptyPath(){return new Qn([])}}class Ut{constructor(e){this.path=e}static fromPath(e){return new Ut(Xt.fromString(e))}static fromName(e){return new Ut(Xt.fromString(e).popFirst(5))}static empty(){return new Ut(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Xt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ut(new Xt(e.slice()))}}class Nr{constructor(e,r,s,c){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=c}}function Li(a){return a.fields.find(e=>2===e.kind)}function Ui(a){return a.fields.filter(e=>2!==e.kind)}Nr.UNKNOWN_ID=-1;class Sn{constructor(e,r){this.fieldPath=e,this.kind=r}}class Xe{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Xe(0,jt.min())}}function Ye(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,c=$t.fromTimestamp(1e9===s?new Gt(r+1,0):new Gt(r,s));return new jt(c,Ut.empty(),e)}function wt(a){return new jt(a.readTime,a.key,-1)}class jt{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new jt($t.min(),Ut.empty(),-1)}static max(){return new jt($t.max(),Ut.empty(),-1)}}function _n(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=Ut.comparator(a.documentKey,e.documentKey),0!==r?r:it(a.largestBatchId,e.largestBatchId))}const Kn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $n{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function hr(a){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,Ie.A)(function*(a){if(a.code!==lt.FAILED_PRECONDITION||a.message!==Kn)throw a;rt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ze((s,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,c)},this.catchCallback=h=>{this.wrapFailure(r,h).next(s,c)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ze?r:ze.resolve(r)}catch(r){return ze.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ze.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ze.reject(r)}static resolve(e){return new ze((r,s)=>{r(e)})}static reject(e){return new ze((r,s)=>{s(e)})}static waitFor(e){return new ze((r,s)=>{let c=0,h=0,_=!1;e.forEach(R=>{++c,R.next(()=>{++h,_&&h===c&&r()},k=>s(k))}),_=!0,h===c&&r()})}static or(e){let r=ze.resolve(!1);for(const s of e)r=r.next(c=>c?ze.resolve(c):s());return r}static forEach(e,r){const s=[];return e.forEach((c,h)=>{s.push(r.call(this,c,h))}),this.waitFor(s)}static mapArray(e,r){return new ze((s,c)=>{const h=e.length,_=new Array(h);let R=0;for(let k=0;k<h;k++){const X=k;r(e[X]).next(ae=>{_[X]=ae,++R,R===h&&s(_)},ae=>c(ae))}})}static doWhile(e,r){return new ze((s,c)=>{const h=()=>{!0===e()?r().next(()=>{h()},c):s()};h()})}}class Xn{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Rr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new gs(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const c=To(s.target.error);this.V.reject(new gs(e,c))}}static open(e,r,s,c){try{return new Xn(r,e.transaction(c,s))}catch(h){throw new gs(r,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(rt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new no(r)}}class di{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===di.S((0,dn.ZQ)())&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rt("SimpleDb","Removing database:",e),ii(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,dn.zW)())return!1;if(di.v())return!0;const e=(0,dn.ZQ)(),r=di.S(e),s=0<r&&r<10,c=Rs(e),h=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||h)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,Ie.A)(function*(){return r.db||(rt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,c)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=_=>{s(_.target.result)},h.onblocked=()=>{c(new gs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=_=>{const R=_.target.error;c("VersionError"===R.name?new Tt(lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Tt(lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new gs(e,R))},h.onupgradeneeded=_=>{rt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',_.oldVersion),r.p.O(_.target.result,h.transaction,_.oldVersion,r.version).next(()=>{rt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,c){var h=this;return(0,Ie.A)(function*(){const _="readonly"===r;let R=0;for(;;){++R;try{h.db=yield h.M(e);const k=Xn.open(h.db,e,_?"readonly":"readwrite",s),X=c(k).next(ae=>(k.g(),ae)).catch(ae=>(k.abort(ae),ze.reject(ae))).toPromise();return X.catch(()=>{}),yield k.m,X}catch(k){const X=k,ae="FirebaseError"!==X.name&&R<3;if(rt("SimpleDb","Transaction failed with error:",X.message,"Retrying:",ae),h.close(),!ae)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Rs(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class xs{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ii(this.B.delete())}}class gs extends Tt{constructor(e,r){super(lt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Kr(a){return"IndexedDbTransactionError"===a.name}class no{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(rt("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(rt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ii(s)}add(e){return rt("SimpleDb","ADD",this.store.name,e,e),ii(this.store.add(e))}get(e){return ii(this.store.get(e)).next(r=>(void 0===r&&(r=null),rt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return rt("SimpleDb","DELETE",this.store.name,e),ii(this.store.delete(e))}count(){return rt("SimpleDb","COUNT",this.store.name),ii(this.store.count())}U(e,r){const s=this.options(e,r),c=s.index?this.store.index(s.index):this.store;if("function"==typeof c.getAll){const h=c.getAll(s.range);return new ze((_,R)=>{h.onerror=k=>{R(k.target.error)},h.onsuccess=k=>{_(k.target.result)}})}{const h=this.cursor(s),_=[];return this.W(h,(R,k)=>{_.push(k)}).next(()=>_)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new ze((c,h)=>{s.onerror=_=>{h(_.target.error)},s.onsuccess=_=>{c(_.target.result)}})}j(e,r){rt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const c=this.cursor(s);return this.W(c,(h,_,R)=>R.delete())}J(e,r){let s;r?s=e:(s={},r=e);const c=this.cursor(s);return this.W(c,r)}Y(e){const r=this.cursor({});return new ze((s,c)=>{r.onerror=h=>{const _=To(h.target.error);c(_)},r.onsuccess=h=>{const _=h.target.result;_?e(_.primaryKey,_.value).next(R=>{R?_.continue():s()}):s()}})}W(e,r){const s=[];return new ze((c,h)=>{e.onerror=_=>{h(_.target.error)},e.onsuccess=_=>{const R=_.target.result;if(!R)return void c();const k=new xs(R),X=r(R.primaryKey,R.value,k);if(X instanceof ze){const ae=X.catch(ye=>(k.done(),ze.reject(ye)));s.push(ae)}k.isDone?c():null===k.K?R.continue():R.continue(k.K)}}).next(()=>ze.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ii(a){return new ze((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const c=To(s.target.error);r(c)}})}let Ms=!1;function To(a){const e=di.S((0,dn.ZQ)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ms||(Ms=!0,setTimeout(()=>{throw s},0)),s}}return a}class Pa{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;rt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.A)(function*(){r.task=null;try{rt("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){Kr(s)?rt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield hr(s)}yield r.X(6e4)}))}}class fo{constructor(e,r){this.localStore=e,this.persistence=r}ee(){var e=this;return(0,Ie.A)(function*(r=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>e.te(s,r))}).apply(this,arguments)}te(e,r){const s=new Set;let c=r,h=!0;return ze.doWhile(()=>!0===h&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(_=>{if(null!==_&&!s.has(_))return rt("IndexBackfiller",`Processing collection: ${_}`),this.ne(e,_,c).next(R=>{c-=R,s.add(_)});h=!1})).next(()=>r-c)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(c=>this.localStore.localDocuments.getNextDocuments(e,r,c,s).next(h=>{const _=h.changes;return this.localStore.indexManager.updateIndexEntries(e,_).next(()=>this.re(c,h)).next(R=>(rt("IndexBackfiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,r,R))).next(()=>_.size)}))}re(e,r){let s=e;return r.changes.forEach((c,h)=>{const _=wt(h);_n(_,s)>0&&(s=_)}),new jt(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let gi=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=c=>this.ie(c),this.se=c=>s.writeSequenceNumber(c))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ro(a){return null==a}function Bs(a){return 0===a&&1/a==-1/0}function Ta(a){return"number"==typeof a&&Number.isInteger(a)&&!Bs(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function si(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=Qs(e)),e=oa(a.get(r),e);return Qs(e)}function oa(a,e){let r=e;const s=a.length;for(let c=0;c<s;c++){const h=a.charAt(c);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function Qs(a){return a+"\x01\x01"}function _s(a){const e=a.length;if(Zt(e>=2),2===e)return Zt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Xt.emptyPath();const r=e-2,s=[];let c="";for(let h=0;h<e;){const _=a.indexOf("\x01",h);switch((_<0||_>r)&&Wt(),a.charAt(_+1)){case"\x01":const R=a.substring(h,_);let k;0===c.length?k=R:(c+=R,k=c,c=""),s.push(k);break;case"\x10":c+=a.substring(h,_),c+="\0";break;case"\x11":c+=a.substring(h,_+1);break;default:Wt()}h=_+2}return new Xt(s)}const Ao=["userId","batchId"];function Fo(a,e){return[a,si(e)]}function Vo(a,e,r){return[a,si(e),r]}const io={},Xo=["prefixPath","collectionGroup","readTime","documentId"],js=["prefixPath","collectionGroup","documentId"],po=["collectionGroup","readTime","prefixPath","documentId"],Yn=["canonicalId","targetId"],Ei=["targetId","path"],Wr=["path","targetId"],Xs=["collectionId","parent"],Mi=["indexId","uid"],es=["uid","sequenceNumber"],Ps=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ii=["indexId","uid","orderedDocumentKey"],Hs=["userId","collectionPath","documentId"],so=["userId","collectionPath","largestBatchId"],vr=["userId","collectionGroup","largestBatchId"],Qt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],In=[...Qt,"documentOverlays"],gr=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_i=gr,jr=[..._i,"indexConfiguration","indexState","indexEntries"],Zr=jr,mo=[...jr,"globals"];class kr extends $n{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function xr(a,e){const r=Lt(a);return di.F(r._e,e)}function os(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function wn(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function ys(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Wn{constructor(e,r){this.comparator=e,this.root=r||Jr.EMPTY}insert(e,r){return new Wn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return r+s.left.size;c<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fr(this.root,e,this.comparator,!0)}}class Fr{constructor(e,r,s,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=r?s(e.key,r):1,r&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,r,s,c,h){this.key=e,this.value=r,this.color=s??Jr.RED,this.left=c??Jr.EMPTY,this.right=h??Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,c,h){return new Jr(e??this.key,r??this.value,s??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let c=this;const h=s(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,r,s),null):0===h?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(e,r,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,c=this;if(r(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,r),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===r(e,c.key)){if(c.right.isEmpty())return Jr.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,r))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wt();const e=this.left.check();if(e!==this.right.check())throw Wt();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1,Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Wt()}get value(){throw Wt()}get color(){throw Wt()}get left(){throw Wt()}get right(){throw Wt()}copy(e,r,s,c,h){return this}insert(e,r,s){return new Jr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;r(c.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Bi(this.data.getIterator())}getIteratorFrom(e){return new Bi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const c=r.getNext().key,h=s.getNext().key;if(0!==this.comparator(c,h))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Gn(this.comparator);return r.data=e,r}}class Bi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wi(a){return a.hasNext()?a.getNext():void 0}class Gi{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new Gi([])}unionWith(e){let r=new Gn(Qn.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new Gi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return kt(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class Pi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Pi("Invalid base64 string: "+h):h}}(e);return new br(r)}static fromUint8Array(e){const r=function(c){let h="";for(let _=0;_<c.length;++_)h+=String.fromCharCode(c[_]);return h}(e);return new br(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let c=0;c<r.length;c++)s[c]=r.charCodeAt(c);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const Ys=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fn(a){if(Zt(!!a),"string"==typeof a){let e=0;const r=Ys.exec(a);if(Zt(!!r),r[1]){let c=r[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Vr(a.seconds),nanos:Vr(a.nanos)}}function Vr(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function Gr(a){return"string"==typeof a?br.fromBase64String(a):br.fromUint8Array(a)}function Ti(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function yi(a){const e=a.mapValue.fields.__previous_value__;return Ti(e)?yi(e):e}function oi(a){const e=Fn(a.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}class $s{constructor(e,r,s,c,h,_,R,k,X){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=c,this.ssl=h,this.forceLongPolling=_,this.autoDetectLongPolling=R,this.longPollingOptions=k,this.useFetchStreams=X}}class Oi{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Oi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oi&&e.projectId===this.projectId&&e.database===this.database}}const Cr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Os={nullValue:"NULL_VALUE"};function Mr(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Ti(a)?4:yt(a)?9007199254740991:ve(a)?10:11:Wt()}function Pr(a,e){if(a===e)return!0;const r=Mr(a);if(r!==Mr(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return oi(a).isEqual(oi(e));case 3:return function(c,h){if("string"==typeof c.timestampValue&&"string"==typeof h.timestampValue&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const _=Fn(c.timestampValue),R=Fn(h.timestampValue);return _.seconds===R.seconds&&_.nanos===R.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return h=e,Gr(a.bytesValue).isEqual(Gr(h.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(c,h){return Vr(c.geoPointValue.latitude)===Vr(h.geoPointValue.latitude)&&Vr(c.geoPointValue.longitude)===Vr(h.geoPointValue.longitude)}(a,e);case 2:return function(c,h){if("integerValue"in c&&"integerValue"in h)return Vr(c.integerValue)===Vr(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const _=Vr(c.doubleValue),R=Vr(h.doubleValue);return _===R?Bs(_)===Bs(R):isNaN(_)&&isNaN(R)}return!1}(a,e);case 9:return kt(a.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(c,h){const _=c.mapValue.fields||{},R=h.mapValue.fields||{};if(os(_)!==os(R))return!1;for(const k in _)if(_.hasOwnProperty(k)&&(void 0===R[k]||!Pr(_[k],R[k])))return!1;return!0}(a,e);default:return Wt()}var h}function vs(a,e){return void 0!==(a.values||[]).find(r=>Pr(r,e))}function vi(a,e){if(a===e)return 0;const r=Mr(a),s=Mr(e);if(r!==s)return it(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return it(a.booleanValue,e.booleanValue);case 2:return function(h,_){const R=Vr(h.integerValue||h.doubleValue),k=Vr(_.integerValue||_.doubleValue);return R<k?-1:R>k?1:R===k?0:isNaN(R)?isNaN(k)?0:-1:1}(a,e);case 3:return zs(a.timestampValue,e.timestampValue);case 4:return zs(oi(a),oi(e));case 5:return it(a.stringValue,e.stringValue);case 6:return function(h,_){const R=Gr(h),k=Gr(_);return R.compareTo(k)}(a.bytesValue,e.bytesValue);case 7:return function(h,_){const R=h.split("/"),k=_.split("/");for(let X=0;X<R.length&&X<k.length;X++){const ae=it(R[X],k[X]);if(0!==ae)return ae}return it(R.length,k.length)}(a.referenceValue,e.referenceValue);case 8:return function(h,_){const R=it(Vr(h.latitude),Vr(_.latitude));return 0!==R?R:it(Vr(h.longitude),Vr(_.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return qi(a.arrayValue,e.arrayValue);case 10:return function(h,_){var R,k,X,ae;const ht=null===(R=(h.fields||{}).value)||void 0===R?void 0:R.arrayValue,Rt=null===(k=(_.fields||{}).value)||void 0===k?void 0:k.arrayValue,Kt=it((null===(X=ht?.values)||void 0===X?void 0:X.length)||0,(null===(ae=Rt?.values)||void 0===ae?void 0:ae.length)||0);return 0!==Kt?Kt:qi(ht,Rt)}(a.mapValue,e.mapValue);case 11:return function(h,_){if(h===Cr.mapValue&&_===Cr.mapValue)return 0;if(h===Cr.mapValue)return 1;if(_===Cr.mapValue)return-1;const R=h.fields||{},k=Object.keys(R),X=_.fields||{},ae=Object.keys(X);k.sort(),ae.sort();for(let ye=0;ye<k.length&&ye<ae.length;++ye){const Oe=it(k[ye],ae[ye]);if(0!==Oe)return Oe;const ht=vi(R[k[ye]],X[ae[ye]]);if(0!==ht)return ht}return it(k.length,ae.length)}(a.mapValue,e.mapValue);default:throw Wt()}}function zs(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return it(a,e);const r=Fn(a),s=Fn(e),c=it(r.seconds,s.seconds);return 0!==c?c:it(r.nanos,s.nanos)}function qi(a,e){const r=a.values||[],s=e.values||[];for(let c=0;c<r.length&&c<s.length;++c){const h=vi(r[c],s[c]);if(h)return h}return it(r.length,s.length)}function oo(a){return bs(a)}function bs(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=Fn(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?Gr(a.bytesValue).toBase64():"referenceValue"in a?Ut.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",c=!0;for(const h of r.values||[])c?c=!1:s+=",",s+=bs(h);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const _ of s)h?h=!1:c+=",",c+=`${_}:${bs(r.fields[_])}`;return c+"}"}(a.mapValue):Wt()}function go(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function aa(a){return!!a&&"integerValue"in a}function Qi(a){return!!a&&"arrayValue"in a}function Y(a){return!!a&&"nullValue"in a}function G(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function ue(a){return!!a&&"mapValue"in a}function ve(a){var e,r;return"__vector__"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function je(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return wn(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=je(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=je(a.arrayValue.values[r]);return e}return Object.assign({},a)}function yt(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const L={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function z(a){return"nullValue"in a?Os:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?go(Oi.empty(),Ut.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?ve(a)?L:{mapValue:{}}:Wt()}function N(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?go(Oi.empty(),Ut.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?L:"mapValue"in a?ve(a)?{mapValue:{}}:Cr:Wt()}function ne(a,e){const r=vi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function we(a,e){const r=vi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!ue(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=je(r)}setAll(e){let r=Qn.emptyPath(),s={},c=[];e.forEach((_,R)=>{if(!r.isImmediateParentOf(R)){const k=this.getFieldsMap(r);this.applyChanges(k,s,c),s={},c=[],r=R.popLast()}_?s[R.lastSegment()]=je(_):c.push(R.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,s,c)}delete(e){const r=this.field(e.popLast());ue(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=r.mapValue.fields[e.get(s)];ue(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=c),r=c}return r.mapValue.fields}applyChanges(e,r,s){wn(r,(c,h)=>e[c]=h);for(const c of s)delete e[c]}clone(){return new Ot(je(this.value))}}function sn(a){const e=[];return wn(a.fields,(r,s)=>{const c=new Qn([r]);if(ue(s)){const h=sn(s.mapValue).fields;if(0===h.length)e.push(c);else for(const _ of h)e.push(c.child(_))}else e.push(c)}),new Gi(e)}class hn{constructor(e,r,s,c,h,_,R){this.key=e,this.documentType=r,this.version=s,this.readTime=c,this.createTime=h,this.data=_,this.documentState=R}static newInvalidDocument(e){return new hn(e,0,$t.min(),$t.min(),$t.min(),Ot.empty(),0)}static newFoundDocument(e,r,s,c){return new hn(e,1,r,$t.min(),s,c,0)}static newNoDocument(e,r){return new hn(e,2,r,$t.min(),$t.min(),Ot.empty(),0)}static newUnknownDocument(e,r){return new hn(e,3,r,$t.min(),$t.min(),Ot.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fr{constructor(e,r){this.position=e,this.inclusive=r}}function ei(a,e,r){let s=0;for(let c=0;c<a.position.length;c++){const h=e[c],_=a.position[c];if(s=h.field.isKeyField()?Ut.comparator(Ut.fromName(_.referenceValue),r.key):vi(_,r.data.field(h.field)),"desc"===h.dir&&(s*=-1),0!==s)break}return s}function qr(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!Pr(a.position[r],e.position[r]))return!1;return!0}class ai{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ni(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class hi{}class kn extends hi{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new ca(e,r,s):"array-contains"===r?new Zo(e,s):"in"===r?new ua(e,s):"not-in"===r?new da(e,s):"array-contains-any"===r?new ha(e,s):new kn(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new Xa(e,s):new Oa(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(vi(r,this.value)):null!==r&&Mr(this.value)===Mr(r)&&this.matchesComparison(vi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends hi{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new fn(e,r)}matches(e){return Xi(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xi(a){return"and"===a.op}function ki(a){return"or"===a.op}function Es(a){return Lo(a)&&Xi(a)}function Lo(a){for(const e of a.filters)if(e instanceof fn)return!1;return!0}function Co(a){if(a instanceof kn)return a.field.canonicalString()+a.op.toString()+oo(a.value);if(Es(a))return a.filters.map(e=>Co(e)).join(",");{const e=a.filters.map(r=>Co(r)).join(",");return`${a.op}(${e})`}}function Yo(a,e){return a instanceof kn?(s=a,(c=e)instanceof kn&&s.op===c.op&&s.field.isEqual(c.field)&&Pr(s.value,c.value)):a instanceof fn?function(s,c){return c instanceof fn&&s.op===c.op&&s.filters.length===c.filters.length&&s.filters.reduce((h,_,R)=>h&&Yo(_,c.filters[R]),!0)}(a,e):void Wt();var s,c}function Uo(a,e){const r=a.filters.concat(e);return fn.create(r,a.op)}function Bo(a){return a instanceof kn?`${(r=a).field.canonicalString()} ${r.op} ${oo(r.value)}`:a instanceof fn?function(r){return r.op.toString()+" {"+r.getFilters().map(Bo).join(" ,")+"}"}(a):"Filter";var r}class ca extends kn{constructor(e,r,s){super(e,r,s),this.key=Ut.fromName(s.referenceValue)}matches(e){const r=Ut.comparator(e.key,this.key);return this.matchesComparison(r)}}class Xa extends kn{constructor(e,r){super(e,"in",r),this.keys=la(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Oa extends kn{constructor(e,r){super(e,"not-in",r),this.keys=la(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function la(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>Ut.fromName(s.referenceValue))}class Zo extends kn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Qi(r)&&vs(r.arrayValue,this.value)}}class ua extends kn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&vs(this.value.arrayValue,r)}}class da extends kn{constructor(e,r){super(e,"not-in",r)}matches(e){if(vs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!vs(this.value.arrayValue,r)}}class ha extends kn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Qi(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>vs(this.value.arrayValue,s))}}class fa{constructor(e,r=null,s=[],c=[],h=null,_=null,R=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=c,this.limit=h,this.startAt=_,this.endAt=R,this.ue=null}}function Jo(a,e=null,r=[],s=[],c=null,h=null,_=null){return new fa(a,e,r,s,c,h,_)}function Ya(a){const e=Lt(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>Co(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(h=s).field.canonicalString()+h.dir;var h}).join(","),ro(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>oo(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>oo(s)).join(",")),e.ue=r}return e.ue}function Aa(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!Ni(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!Yo(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!qr(a.startAt,e.startAt)&&qr(a.endAt,e.endAt)}function Ac(a){return Ut.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function pa(a,e){return a.filters.filter(r=>r instanceof kn&&r.field.isEqual(e))}function ic(a,e,r){let s=Os,c=!0;for(const h of pa(a,e)){let _=Os,R=!0;switch(h.op){case"<":case"<=":_=z(h.value);break;case"==":case"in":case">=":_=h.value;break;case">":_=h.value,R=!1;break;case"!=":case"not-in":_=Os}ne({value:s,inclusive:c},{value:_,inclusive:R})<0&&(s=_,c=R)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const _=r.position[h];ne({value:s,inclusive:c},{value:_,inclusive:r.inclusive})<0&&(s=_,c=r.inclusive);break}return{value:s,inclusive:c}}function sc(a,e,r){let s=Cr,c=!0;for(const h of pa(a,e)){let _=Cr,R=!0;switch(h.op){case">=":case">":_=N(h.value),R=!1;break;case"==":case"in":case"<=":_=h.value;break;case"<":_=h.value,R=!1;break;case"!=":case"not-in":_=Cr}we({value:s,inclusive:c},{value:_,inclusive:R})>0&&(s=_,c=R)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const _=r.position[h];we({value:s,inclusive:c},{value:_,inclusive:r.inclusive})>0&&(s=_,c=r.inclusive);break}return{value:s,inclusive:c}}class _o{constructor(e,r=null,s=[],c=[],h=null,_="F",R=null,k=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=c,this.limit=h,this.limitType=_,this.startAt=R,this.endAt=k,this.ce=null,this.le=null,this.he=null}}function el(a,e,r,s,c,h,_,R){return new _o(a,e,r,s,c,h,_,R)}function jo(a){return new _o(a)}function Cc(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function Na(a){return null!==a.collectionGroup}function Ho(a){const e=Lt(a);if(null===e.ce){e.ce=[];const r=new Set;for(const h of e.explicitOrderBy)e.ce.push(h),r.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(_){let R=new Gn(Qn.comparator);return _.filters.forEach(k=>{k.getFlattenedFilters().forEach(X=>{X.isInequality()&&(R=R.add(X.field))})}),R})(e).forEach(h=>{r.has(h.canonicalString())||h.isKeyField()||e.ce.push(new ai(h,s))}),r.has(Qn.keyField().canonicalString())||e.ce.push(new ai(Qn.keyField(),s))}return e.ce}function x(a){const e=Lt(a);return e.le||(e.le=function B(a,e){if("F"===a.limitType)return Jo(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(c=>new ai(c.field,"desc"===c.dir?"asc":"desc"));const r=a.endAt?new fr(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new fr(a.startAt.position,a.startAt.inclusive):null;return Jo(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,Ho(a))),e.le}function J(a,e){const r=a.filters.concat([e]);return new _o(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Ae(a,e,r){return new _o(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function ft(a,e){return Aa(x(a),x(e))&&a.limitType===e.limitType}function Ct(a){return`${Ya(x(a))}|lt:${a.limitType}`}function cn(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(c=>Bo(c)).join(", ")}]`),ro(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(c=>{return`${(_=c).field.canonicalString()} (${_.dir})`;var _}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(c=>oo(c)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(c=>oo(c)).join(",")),`Target(${s})`}(x(a))}; limitType=${a.limitType})`}function Hr(a,e){return e.isFoundDocument()&&function(s,c){const h=c.key.path;return null!==s.collectionGroup?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):Ut.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(a,e)&&function(s,c){for(const h of Ho(s))if(!h.field.isKeyField()&&null===c.data.field(h.field))return!1;return!0}(a,e)&&function(s,c){for(const h of s.filters)if(!h.matches(c))return!1;return!0}(a,e)&&(c=e,!((s=a).startAt&&!function(_,R,k){const X=ei(_,R,k);return _.inclusive?X<=0:X<0}(s.startAt,Ho(s),c)||s.endAt&&!function(_,R,k){const X=ei(_,R,k);return _.inclusive?X>=0:X>0}(s.endAt,Ho(s),c)));var s,c}function ci(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Qr(a){return(e,r)=>{let s=!1;for(const c of Ho(a)){const h=lr(c,e,r);if(0!==h)return h;s=s||c.field.isKeyField()}return 0}}function lr(a,e,r){const s=a.field.isKeyField()?Ut.comparator(e.key,r.key):function(h,_,R){const k=_.data.field(h),X=R.data.field(h);return null!==k&&null!==X?vi(k,X):Wt()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return Wt()}}class $r{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[c,h]of s)if(this.equalsFn(c,e))return h}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,r]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,r]);c.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[r]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){wn(this.inner,(r,s)=>{for(const[c,h]of s)e(c,h)})}isEmpty(){return ys(this.inner)}size(){return this.innerSize}}const ur=new Wn(Ut.comparator);function Lr(){return ur}const ns=new Wn(Ut.comparator);function $i(...a){let e=ns;for(const r of a)e=e.insert(r.key,r);return e}function ea(a){let e=ns;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function ji(){return Yi()}function Do(){return Yi()}function Yi(){return new $r(a=>a.toString(),(a,e)=>a.isEqual(e))}const ma=new Wn(Ut.comparator),Ks=new Gn(Ut.comparator);function mn(...a){let e=Ks;for(const r of a)e=e.add(r);return e}const Dc=new Gn(it);function Ns(){return Dc}function Is(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bs(e)?"-0":e}}function ao(a){return{integerValue:""+a}}function ta(a,e){return Ta(e)?ao(e):Is(a,e)}class Ca{constructor(){this._=void 0}}function yo(a,e,r){return a instanceof ga?function(c,h){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Ti(h)&&(h=yi(h)),h&&(_.fields.__previous_value__=h),{mapValue:_}}(r,e):a instanceof as?co(a,e):a instanceof ws?ka(a,e):function(c,h){const _=oc(c,h),R=Sc(_)+Sc(c.Pe);return aa(_)&&aa(c.Pe)?ao(R):Is(c.serializer,R)}(a,e)}function xl(a,e,r){return a instanceof as?co(a,e):a instanceof ws?ka(a,e):r}function oc(a,e){return a instanceof Fa?aa(s=e)||(h=s)&&"doubleValue"in h?e:{integerValue:0}:null;var s,h}class ga extends Ca{}class as extends Ca{constructor(e){super(),this.elements=e}}function co(a,e){const r=$u(e);for(const s of a.elements)r.some(c=>Pr(c,s))||r.push(s);return{arrayValue:{values:r}}}class ws extends Ca{constructor(e){super(),this.elements=e}}function ka(a,e){let r=$u(e);for(const s of a.elements)r=r.filter(c=>!Pr(c,s));return{arrayValue:{values:r}}}class Fa extends Ca{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Sc(a){return Vr(a.integerValue||a.doubleValue)}function $u(a){return Qi(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class zn{constructor(e,r){this.field=e,this.transform=r}}class Rc{constructor(e,r){this.version=e,this.transformResults=r}}class Ai{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Va(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class La{}function ac(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new zo(a.key,Ai.none()):new cc(a.key,a.data,Ai.none());{const r=a.data,s=Ot.empty();let c=new Gn(Qn.comparator);for(let h of e.fields)if(!c.has(h)){let _=r.field(h);null===_&&h.length>1&&(h=h.popLast(),_=r.field(h)),null===_?s.delete(h):s.set(h,_),c=c.add(h)}return new Zs(a.key,s,new Gi(c.toArray()),Ai.none())}}function Ua(a,e,r){a instanceof cc?function(c,h,_){const R=c.value.clone(),k=wr(c.fieldTransforms,h,_.transformResults);R.setAll(k),h.convertToFoundDocument(_.version,R).setHasCommittedMutations()}(a,e,r):a instanceof Zs?function(c,h,_){if(!Va(c.precondition,h))return void h.convertToUnknownDocument(_.version);const R=wr(c.fieldTransforms,h,_.transformResults),k=h.data;k.setAll(Ft(c)),k.setAll(R),h.convertToFoundDocument(_.version,k).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function xc(a,e,r,s){return a instanceof cc?function(h,_,R,k){if(!Va(h.precondition,_))return R;const X=h.value.clone(),ae=$o(h.fieldTransforms,k,_);return X.setAll(ae),_.convertToFoundDocument(_.version,X).setHasLocalMutations(),null}(a,e,r,s):a instanceof Zs?function(h,_,R,k){if(!Va(h.precondition,_))return R;const X=$o(h.fieldTransforms,k,_),ae=_.data;return ae.setAll(Ft(h)),ae.setAll(X),_.convertToFoundDocument(_.version,ae).setHasLocalMutations(),null===R?null:R.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ye=>ye.field))}(a,e,r,s):(R=r,Va(a.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):R);var _,R}function Bd(a,e){let r=null;for(const s of a.fieldTransforms){const c=e.data.field(s.field),h=oc(s.transform,c||null);null!=h&&(null===r&&(r=Ot.empty()),r.set(s.field,h))}return r||null}function Mc(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===c||s&&c&&kt(s,c,(h,_)=>function tl(a,e){return a.field.isEqual(e.field)&&(c=e.transform,(s=a.transform)instanceof as&&c instanceof as||s instanceof ws&&c instanceof ws?kt(s.elements,c.elements,Pr):s instanceof Fa&&c instanceof Fa?Pr(s.Pe,c.Pe):s instanceof ga&&c instanceof ga);var s,c}(h,_))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,c}class cc extends La{constructor(e,r,s,c=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Zs extends La{constructor(e,r,s,c,h=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Ft(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function wr(a,e,r){const s=new Map;Zt(a.length===r.length);for(let c=0;c<r.length;c++){const h=a[c],_=h.transform,R=e.data.field(h.field);s.set(h.field,xl(_,R,r[c]))}return s}function $o(a,e,r){const s=new Map;for(const c of a){const h=c.transform,_=r.data.field(c.field);s.set(c.field,yo(h,_,e))}return s}class zo extends La{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pr extends La{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lc{constructor(e,r,s,c){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&Ua(h,e,s[c])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=xc(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=xc(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Do();return this.mutations.forEach(c=>{const h=e.get(c.key),_=h.overlayedDocument;let R=this.applyToLocalView(_,h.mutatedFields);R=r.has(c.key)?null:R;const k=ac(_,R);null!==k&&s.set(c.key,k),_.isValidDocument()||_.convertToNoDocument($t.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),mn())}isEqual(e){return this.batchId===e.batchId&&kt(this.mutations,e.mutations,(r,s)=>Mc(r,s))&&kt(this.baseMutations,e.baseMutations,(r,s)=>Mc(r,s))}}class So{constructor(e,r,s,c){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=c}static from(e,r,s){Zt(e.mutations.length===s.length);let c=ma;const h=e.mutations;for(let _=0;_<h.length;_++)c=c.insert(h[_].key,s[_].version);return new So(e,r,s,c)}}class Ro{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uc{constructor(e,r){this.count=e,this.unchangedNames=r}}var j,g;function w(a){switch(a){default:return Wt();case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0}}function P(a){if(void 0===a)return qn("GRPC error has no .code"),lt.UNKNOWN;switch(a){case j.OK:return lt.OK;case j.CANCELLED:return lt.CANCELLED;case j.UNKNOWN:return lt.UNKNOWN;case j.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case j.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case j.INTERNAL:return lt.INTERNAL;case j.UNAVAILABLE:return lt.UNAVAILABLE;case j.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case j.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case j.NOT_FOUND:return lt.NOT_FOUND;case j.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case j.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case j.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case j.ABORTED:return lt.ABORTED;case j.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case j.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case j.DATA_LOSS:return lt.DATA_LOSS;default:return Wt()}}(g=j||(j={}))[g.OK=0]="OK",g[g.CANCELLED=1]="CANCELLED",g[g.UNKNOWN=2]="UNKNOWN",g[g.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",g[g.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",g[g.NOT_FOUND=5]="NOT_FOUND",g[g.ALREADY_EXISTS=6]="ALREADY_EXISTS",g[g.PERMISSION_DENIED=7]="PERMISSION_DENIED",g[g.UNAUTHENTICATED=16]="UNAUTHENTICATED",g[g.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",g[g.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",g[g.ABORTED=10]="ABORTED",g[g.OUT_OF_RANGE=11]="OUT_OF_RANGE",g[g.UNIMPLEMENTED=12]="UNIMPLEMENTED",g[g.INTERNAL=13]="INTERNAL",g[g.UNAVAILABLE=14]="UNAVAILABLE",g[g.DATA_LOSS=15]="DATA_LOSS";function se(){return new TextEncoder}const ge=new yr([4294967295,4294967295],0);function v(a){const e=se().encode(a),r=new Ir;return r.update(e),new Uint8Array(r.digest())}function A(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new yr([r,s],0),new yr([c,h],0)]}class I{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new M(`Invalid padding: ${r}`);if(s<0)throw new M(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new M(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new M(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=yr.fromNumber(this.Ie)}Ee(e,r,s){let c=e.add(r.multiply(yr.fromNumber(s)));return 1===c.compare(ge)&&(c=new yr([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=v(e),[s,c]=A(r);for(let h=0;h<this.hashCount;h++){const _=this.Ee(s,c,h);if(!this.de(_))return!1}return!0}static create(e,r,s){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),_=new I(h,c,r);return s.forEach(R=>_.insert(R)),_}insert(e){if(0===this.Ie)return;const r=v(e),[s,c]=A(r);for(let h=0;h<this.hashCount;h++){const _=this.Ee(s,c,h);this.Ae(_)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class M extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class V{constructor(e,r,s,c,h){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const c=new Map;return c.set(e,ee.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new V($t.min(),c,new Wn(it),Lr(),mn())}}class ee{constructor(e,r,s,c,h){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ee(s,r,mn(),mn(),mn())}}class he{constructor(e,r,s,c){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=c}}class Ue{constructor(e,r){this.targetId=e,this.me=r}}class Ne{constructor(e,r,s=br.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=c}}class Pt{constructor(){this.fe=0,this.ge=yn(),this.pe=br.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=mn(),r=mn(),s=mn();return this.ge.forEach((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:r=r.add(c);break;case 1:s=s.add(c);break;default:Wt()}}),new ee(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=yn()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ln{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lr(),this.qe=nr(),this.Qe=new Wn(it)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:Wt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,c)=>{this.ze(c)&&r(c)})}He(e){const r=e.targetId,s=e.me.count,c=this.Je(r);if(c){const h=c.target;if(Ac(h))if(0===s){const _=new Ut(h.path);this.Ue(r,_,hn.newNoDocument(_,$t.min()))}else Zt(1===s);else{const _=this.Ye(r);if(_!==s){const R=this.Ze(e),k=R?this.Xe(R,e,_):1;0!==k&&(this.je(r),this.Qe=this.Qe.insert(r,2===k?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=r;let _,R;try{_=Gr(s).toUint8Array()}catch(k){if(k instanceof Pi)return Dn("Decoding the base64 bloom filter in existence filter failed ("+k.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw k}try{R=new I(_,c,h)}catch(k){return Dn(k instanceof M?"BloomFilter error: ":"Applying bloom filter failed: ",k),null}return 0===R.Ie?null:R}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let c=0;return s.forEach(h=>{const _=this.Le.tt(),R=`projects/${_.projectId}/databases/${_.database}/documents/${h.path.canonicalString()}`;e.mightContain(R)||(this.Ue(r,h,null),c++)}),c}rt(e){const r=new Map;this.Be.forEach((h,_)=>{const R=this.Je(_);if(R){if(h.current&&Ac(R.target)){const k=new Ut(R.target.path);null!==this.ke.get(k)||this.it(_,k)||this.Ue(_,k,hn.newNoDocument(k,e))}h.be&&(r.set(_,h.ve()),h.Ce())}});let s=mn();this.qe.forEach((h,_)=>{let R=!0;_.forEachWhile(k=>{const X=this.Je(k);return!X||"TargetPurposeLimboResolution"===X.purpose||(R=!1,!1)}),R&&(s=s.add(h))}),this.ke.forEach((h,_)=>_.setReadTime(e));const c=new V(e,r,this.Qe,this.ke,s);return this.ke=Lr(),this.qe=nr(),this.Qe=new Wn(it),c}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const c=this.Ge(e);this.it(e,r)?c.Fe(r,1):c.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Pt,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Gn(it),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||rt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Pt),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function nr(){return new Wn(Ut.comparator)}function yn(){return new Wn(Ut.comparator)}const ti={asc:"ASCENDING",desc:"DESCENDING"},lo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ps={and:"AND",or:"OR"};class zi{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ks(a,e){return a.useProto3Json||ro(e)?e:{value:e}}function uo(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zi(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function Da(a,e){return uo(a,e.toTimestamp())}function sr(a){return Zt(!!a),$t.fromTimestamp(function(r){const s=Fn(r);return new Gt(s.seconds,s.nanos)}(a))}function Sa(a,e){return xo(a,e).canonicalString()}function xo(a,e){const r=(c=a,new Xt(["projects",c.projectId,"databases",c.database])).child("documents");var c;return void 0===e?r:r.child(e)}function uu(a){const e=Xt.fromString(a);return Zt(sl(e)),e}function vn(a,e){return Sa(a.databaseId,e.path)}function Tn(a,e){const r=uu(e);if(r.get(1)!==a.databaseId.projectId)throw new Tt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Tt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new Ut(Mo(r))}function tr(a,e){return Sa(a.databaseId,e)}function Ur(a){const e=uu(a);return 4===e.length?Xt.emptyPath():Mo(e)}function Ci(a){return new Xt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Mo(a){return Zt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function cs(a,e,r){return{name:vn(a,e),fields:r.value.mapValue.fields}}function Po(a,e,r){const s=Tn(a,e.name),c=sr(e.updateTime),h=e.createTime?sr(e.createTime):$t.min(),_=new Ot({mapValue:{fields:e.fields}}),R=hn.newFoundDocument(s,c,h,_);return r&&R.setHasCommittedMutations(),r?R.setHasCommittedMutations():R}function Za(a,e){let r;if(e instanceof cc)r={update:cs(a,e.key,e.value)};else if(e instanceof zo)r={delete:vn(a,e.key)};else if(e instanceof Zs)r={update:cs(a,e.key,e.data),updateMask:zu(e.fieldMask)};else{if(!(e instanceof pr))return Wt();r={verify:vn(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(h,_){const R=_.transform;if(R instanceof ga)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(R instanceof as)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:R.elements}};if(R instanceof ws)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:R.elements}};if(R instanceof Fa)return{fieldPath:_.field.canonicalString(),increment:R.Pe};throw Wt()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Da(a,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Wt()),r;var h}function rs(a,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ai.updateTime(sr(h.updateTime)):void 0!==h.exists?Ai.exists(h.exists):Ai.none():Ai.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(_,R){let k=null;"setToServerValue"in R?(Zt("REQUEST_TIME"===R.setToServerValue),k=new ga):"appendMissingElements"in R?k=new as(R.appendMissingElements.values||[]):"removeAllFromArray"in R?k=new ws(R.removeAllFromArray.values||[]):"increment"in R?k=new Fa(_,R.increment):Wt();const X=Qn.fromServerFormat(R.fieldPath);return new zn(X,k)}(a,c)):[];var h;if(e.update){const c=Tn(a,e.update.name),h=new Ot({mapValue:{fields:e.update.fields}});if(e.updateMask){const _=new Gi((e.updateMask.fieldPaths||[]).map(ae=>Qn.fromServerFormat(ae)));return new Zs(c,h,_,r,s)}return new cc(c,h,r,s)}if(e.delete){const c=Tn(a,e.delete);return new zo(c,r)}if(e.verify){const c=Tn(a,e.verify);return new pr(c,r)}return Wt()}function Ws(a,e){return{documents:[tr(a,e.path)]}}function Ko(a,e){const r={structuredQuery:{}},s=e.path;let c;null!==e.collectionGroup?(c=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=tr(a,c);const h=function(X){if(0!==X.length)return il(fn.create(X,"and"))}(e.filters);h&&(r.structuredQuery.where=h);const _=function(X){if(0!==X.length)return X.map(ae=>{return{field:Wo((Oe=ae).field),direction:jd(Oe.dir)};var Oe})}(e.orderBy);_&&(r.structuredQuery.orderBy=_);const R=ks(a,e.limit);return null!==R&&(r.structuredQuery.limit=R),e.startAt&&(r.structuredQuery.startAt={before:(X=e.startAt).inclusive,values:X.position}),e.endAt&&(r.structuredQuery.endAt=function(X){return{before:!X.inclusive,values:X.position}}(e.endAt)),{_t:r,parent:c};var X}function nl(a){let e=Ur(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let c=null;if(s>0){Zt(1===s);const ae=r.from[0];ae.allDescendants?c=ae.collectionId:e=e.child(ae.collectionId)}let h=[];r.where&&(h=function(ye){const Oe=tp(ye);return Oe instanceof fn&&Es(Oe)?Oe.getFilters():[Oe]}(r.where));let _=[];r.orderBy&&(_=r.orderBy.map(Oe=>{return new ai(hc((Rt=Oe).field),function(Bt){switch(Bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Rt.direction));var Rt}));let R=null;r.limit&&(R=function(ye){let Oe;return Oe="object"==typeof ye?ye.value:ye,ro(Oe)?null:Oe}(r.limit));let k=null;var ye;r.startAt&&(k=new fr((ye=r.startAt).values||[],!!ye.before));let X=null;return r.endAt&&(X=function(ye){return new fr(ye.values||[],!ye.before)}(r.endAt)),el(e,c,_,h,R,"F",k,X)}function tp(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=hc(r.unaryFilter.field);return kn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=hc(r.unaryFilter.field);return kn.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=hc(r.unaryFilter.field);return kn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=hc(r.unaryFilter.field);return kn.create(_,"!=",{nullValue:"NULL_VALUE"});default:return Wt()}}(a):void 0!==a.fieldFilter?kn.create(hc((r=a).fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return fn.create(r.compositeFilter.filters.map(s=>tp(s)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Wt()}}(r.compositeFilter.op))}(a):Wt();var r}function jd(a){return ti[a]}function qh(a){return lo[a]}function Hd(a){return ps[a]}function Wo(a){return{fieldPath:a.canonicalString()}}function hc(a){return Qn.fromServerFormat(a.fieldPath)}function il(a){return a instanceof kn?function(r){if("=="===r.op){if(G(r.value))return{unaryFilter:{field:Wo(r.field),op:"IS_NAN"}};if(Y(r.value))return{unaryFilter:{field:Wo(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(G(r.value))return{unaryFilter:{field:Wo(r.field),op:"IS_NOT_NAN"}};if(Y(r.value))return{unaryFilter:{field:Wo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(r.field),op:qh(r.op),value:r.value}}}(a):a instanceof fn?function(r){const s=r.getFilters().map(c=>il(c));return 1===s.length?s[0]:{compositeFilter:{op:Hd(r.op),filters:s}}}(a):Wt()}function zu(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function sl(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class Oo{constructor(e,r,s,c,h=$t.min(),_=$t.min(),R=br.EMPTY_BYTE_STRING,k=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=R,this.expectedCount=k}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ol{constructor(e){this.ct=e}}function Ml(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Pl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:vn(h=a.ct,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:uo(h,_.version.toTimestamp()),createTime:uo(h,_.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:_a(e.version)};else{if(!e.isUnknownDocument())return Wt();s.unknownDocument={path:r.path.toArray(),version:_a(e.version)}}var h,_;return s}function Pl(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function _a(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fs(a){const e=new Gt(a.seconds,a.nanoseconds);return $t.fromTimestamp(e)}function Pc(a,e){const r=(e.baseMutations||[]).map(h=>rs(a.ct,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const s=e.mutations.map(h=>rs(a.ct,h)),c=Gt.fromMillis(e.localWriteTimeMs);return new lc(e.batchId,c,r,s)}function xa(a){const e=Fs(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Fs(a.lastLimboFreeSnapshotVersion):$t.min();let s;return s=void 0!==a.query.documents?(Zt(1===(h=a.query).documents.length),x(jo(Ur(h.documents[0])))):function(h){return x(nl(h))}(a.query),new Oo(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,br.fromBase64String(a.resumeToken));var h}function al(a,e){const r=_a(e.snapshotVersion),s=_a(e.lastLimboFreeSnapshotVersion);let c;c=Ac(e.target)?Ws(a.ct,e.target):Ko(a.ct,e.target)._t;const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ya(e.target),readTime:r,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function cl(a){const e=nl({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Ae(e,e.limit,"L"):e}function Ol(a,e){return new Ro(e.largestBatchId,rs(a.ct,e.overlayMutation))}function ll(a,e){const r=e.path.lastSegment();return[a,si(e.path.popLast()),r]}function Nl(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:_a(s.readTime),documentKey:si(s.documentKey.path),largestBatchId:s.largestBatchId}}class ul{getBundleMetadata(e,r){return du(e).get(r).next(s=>{if(s)return{id:(h=s).bundleId,createTime:Fs(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return du(e).put({bundleId:(c=r).id,createTime:_a(sr(c.createTime)),version:c.version});var c}getNamedQuery(e,r){return Ku(e).get(r).next(s=>{if(s)return{name:(h=s).name,query:cl(h.bundledQuery),readTime:Fs(h.readTime)};var h})}saveNamedQuery(e,r){return Ku(e).put({name:(c=r).name,readTime:_a(sr(c.readTime)),bundledQuery:c.bundledQuery});var c}}function du(a){return xr(a,"bundles")}function Ku(a){return xr(a,"namedQueries")}class dl{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new dl(e,r.uid||"")}getOverlay(e,r){return kl(e).get(ll(this.userId,r)).next(s=>s?Ol(this.serializer,s):null)}getOverlays(e,r){const s=ji();return ze.forEach(r,c=>this.getOverlay(e,c).next(h=>{null!==h&&s.set(c,h)})).next(()=>s)}saveOverlays(e,r,s){const c=[];return s.forEach((h,_)=>{const R=new Ro(r,_);c.push(this.ht(e,R))}),ze.waitFor(c)}removeOverlaysForBatchId(e,r,s){const c=new Set;r.forEach(_=>c.add(si(_.getCollectionPath())));const h=[];return c.forEach(_=>{const R=IDBKeyRange.bound([this.userId,_,s],[this.userId,_,s+1],!1,!0);h.push(kl(e).j("collectionPathOverlayIndex",R))}),ze.waitFor(h)}getOverlaysForCollection(e,r,s){const c=ji(),h=si(r),_=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,Number.POSITIVE_INFINITY],!0);return kl(e).U("collectionPathOverlayIndex",_).next(R=>{for(const k of R){const X=Ol(this.serializer,k);c.set(X.getKey(),X)}return c})}getOverlaysForCollectionGroup(e,r,s,c){const h=ji();let _;const R=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return kl(e).J({index:"collectionGroupOverlayIndex",range:R},(k,X,ae)=>{const ye=Ol(this.serializer,X);h.size()<c||ye.largestBatchId===_?(h.set(ye.getKey(),ye),_=ye.largestBatchId):ae.done()}).next(()=>h)}ht(e,r){return kl(e).put(function(c,h,_){const[R,k,X]=ll(h,_.mutation.key);return{userId:h,collectionPath:k,documentId:X,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Za(c.ct,_.mutation)}}(this.serializer,this.userId,r))}}function kl(a){return xr(a,"documentOverlays")}class hu{Pt(e){return xr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?br.fromUint8Array(s):br.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class Js{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Vr(e.integerValue));else if("doubleValue"in e){const s=Vr(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),Bs(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=Fn(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Gr(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?yt(e)?this.dt(r,Number.MAX_SAFE_INTEGER):ve(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Wt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const s=e.fields||{};this.dt(r,55);for(const c of Object.keys(s))this.Vt(c,r),this.Tt(s[c],r)}wt(e,r){var s,c;const h=e.fields||{};this.dt(r,53);const _="value",R=(null===(c=null===(s=h[_].arrayValue)||void 0===s?void 0:s.values)||void 0===c?void 0:c.length)||0;this.dt(r,15),r.At(Vr(R)),this.Vt(_,r),this.Tt(h[_],r)}bt(e,r){const s=e.values||[];this.dt(r,50);for(const c of s)this.Tt(c,r)}yt(e,r){this.dt(r,37),Ut.fromName(e).path.forEach(s=>{this.dt(r,60),this.Dt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function Qh(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function Wu(a){const e=64-function(s){let c=0;for(let h=0;h<8;++h){const _=Qh(255&s[h]);if(c+=_,8!==_)break}return c}(a);return Math.ceil(e/8)}Js.vt=new Js;class fu{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ft(s.value),s=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ot(s.value),s=r.next();this.Nt()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const c=r.codePointAt(0);this.Ft(240|c>>>18),this.Ft(128|63&c>>>12),this.Ft(128|63&c>>>6),this.Ft(128|63&c)}}this.Mt()}Bt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const c=r.codePointAt(0);this.Ot(240|c>>>18),this.Ot(128|63&c>>>12),this.Ot(128|63&c>>>6),this.Ot(128|63&c)}}this.Nt()}kt(e){const r=this.qt(e),s=Wu(r);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=255&r[c]}Kt(e){const r=this.qt(e),s=Wu(r);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=~(255&r[c])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(h){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,h,!1),new Uint8Array(_.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let c=1;c<r.length;++c)r[c]^=s?255:0;return r}Ft(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class pu{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Gu{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ms{constructor(){this.jt=new fu,this.Ht=new pu(this.jt),this.Jt=new Gu(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Ha{constructor(e,r,s,c){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=c}Zt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ha(this.indexId,this.documentKey,this.arrayValue,s)}}function $a(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=hl(a.arrayValue,e.arrayValue),0!==r?r:(r=hl(a.directionalValue,e.directionalValue),0!==r?r:Ut.comparator(a.documentKey,e.documentKey)))}function hl(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class qu{constructor(e){this.Xt=new Gn((r,s)=>Qn.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const s=r;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(Zt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Li(e);if(void 0!==r&&!this.sn(r))return!1;const s=Ui(e);let c=new Set,h=0,_=0;for(;h<s.length&&this.sn(s[h]);++h)c=c.add(s[h].fieldPath.canonicalString());if(h===s.length)return!0;if(this.Xt.size>0){const R=this.Xt.getIterator().getNext();if(!c.has(R.field.canonicalString())){const k=s[h];if(!this.on(R,k)||!this._n(this.en[_++],k))return!1}++h}for(;h<s.length;++h)if(_>=this.en.length||!this._n(this.en[_++],s[h]))return!1;return!0}an(){if(this.nn)return null;let e=new Gn(Qn.comparator);const r=[];for(const s of this.tn)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new Sn(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new Sn(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new Sn(s.field,"asc"===s.dir?0:1)));return new Nr(Nr.UNKNOWN_ID,this.collectionId,r,Xe.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Qu(a){var e,r;if(Zt(a instanceof kn||a instanceof fn),a instanceof kn){if(a instanceof ua){const c=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(h=>kn.create(a.field,"==",h)))||[];return fn.create(c,"or")}return a}const s=a.filters.map(c=>Qu(c));return fn.create(s,a.op)}function Xu(a){if(0===a.getFilters().length)return[];const e=Fl(Qu(a));return Zt(Nc(e)),fc(e)||Oc(e)?[e]:e.getFilters()}function fc(a){return a instanceof kn}function Oc(a){return a instanceof fn&&Es(a)}function Nc(a){return fc(a)||Oc(a)||function(r){if(r instanceof fn&&ki(r)){for(const s of r.getFilters())if(!fc(s)&&!Oc(s))return!1;return!0}return!1}(a)}function Fl(a){if(Zt(a instanceof kn||a instanceof fn),a instanceof kn)return a;if(1===a.filters.length)return Fl(a.filters[0]);const e=a.filters.map(s=>Fl(s));let r=fn.create(e,a.op);return r=zd(r),Nc(r)?r:(Zt(r instanceof fn),Zt(Xi(r)),Zt(r.filters.length>1),r.filters.reduce((s,c)=>Vl(s,c)))}function Vl(a,e){let r;return Zt(a instanceof kn||a instanceof fn),Zt(e instanceof kn||e instanceof fn),r=a instanceof kn?e instanceof kn?fn.create([a,e],"and"):kc(a,e):e instanceof kn?kc(e,a):function(c,h){if(Zt(c.filters.length>0&&h.filters.length>0),Xi(c)&&Xi(h))return Uo(c,h.getFilters());const _=ki(c)?c:h,R=ki(c)?h:c,k=_.filters.map(X=>Vl(X,R));return fn.create(k,"or")}(a,e),zd(r)}function kc(a,e){if(Xi(e))return Uo(e,a.getFilters());{const r=e.filters.map(s=>Vl(a,s));return fn.create(r,"or")}}function zd(a){if(Zt(a instanceof kn||a instanceof fn),a instanceof kn)return a;const e=a.getFilters();if(1===e.length)return zd(e[0]);if(Lo(a))return a;const r=e.map(c=>zd(c)),s=[];return r.forEach(c=>{c instanceof kn?s.push(c):c instanceof fn&&(c.op===a.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:fn.create(s,a.op)}class Yu{constructor(){this.un=new Zu}addToCollectionParentIndex(e,r){return this.un.add(r),ze.resolve()}getCollectionParents(e,r){return ze.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ze.resolve()}deleteFieldIndex(e,r){return ze.resolve()}deleteAllFieldIndexes(e){return ze.resolve()}createTargetIndexes(e,r){return ze.resolve()}getDocumentsMatchingTarget(e,r){return ze.resolve(null)}getIndexType(e,r){return ze.resolve(0)}getFieldIndexes(e,r){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,r){return ze.resolve(jt.min())}getMinOffsetFromCollectionGroup(e,r){return ze.resolve(jt.min())}updateCollectionGroup(e,r,s){return ze.resolve()}updateIndexEntries(e,r){return ze.resolve()}}class Zu{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r]||new Gn(Xt.comparator),h=!c.has(s);return this.index[r]=c.add(s),h}has(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Gn(Xt.comparator)).toArray()}}const Kd=new Uint8Array(0);class np{constructor(e,r){this.databaseId=r,this.cn=new Zu,this.ln=new $r(s=>Ya(s),(s,c)=>Aa(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const s=r.lastSegment(),c=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const h={collectionId:s,parent:si(c)};return rp(e).put(h)}return ze.resolve()}getCollectionParents(e,r){const s=[],c=IDBKeyRange.bound([r,""],[Pn(r),""],!1,!0);return rp(e).U(c).next(h=>{for(const _ of h){if(_.collectionId!==r)break;s.push(_s(_.parent))}return s})}addFieldIndex(e,r){const s=Ju(e),c={indexId:(R=r).indexId,collectionGroup:R.collectionGroup,fields:R.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var R;delete c.indexId;const h=s.add(c);if(r.indexState){const _=za(e);return h.next(R=>{_.put(Nl(R,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return h.next()}deleteFieldIndex(e,r){const s=Ju(e),c=za(e),h=Fc(e);return s.delete(r.indexId).next(()=>c.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Ju(e),s=Fc(e),c=za(e);return r.j().next(()=>s.j()).next(()=>c.j())}createTargetIndexes(e,r){return ze.forEach(this.hn(r),s=>this.getIndexType(e,s).next(c=>{if(0===c||1===c){const h=new qu(s).an();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,r){const s=Fc(e);let c=!0;const h=new Map;return ze.forEach(this.hn(r),_=>this.Pn(e,_).next(R=>{c&&(c=!!R),h.set(_,R)})).next(()=>{if(c){let _=mn();const R=[];return ze.forEach(h,(k,X)=>{var rn;rt("IndexedDbIndexManager",`Using index ${rn=k,`id=${rn.indexId}|cg=${rn.collectionGroup}|f=${rn.fields.map(Hn=>`${Hn.fieldPath}:${Hn.kind}`).join(",")}`} to execute ${Ya(r)}`);const ae=function(rn,Hn){const Er=Li(Hn);if(void 0===Er)return null;for(const ar of pa(rn,Er.fieldPath))switch(ar.op){case"array-contains-any":return ar.value.arrayValue.values||[];case"array-contains":return[ar.value]}return null}(X,k),ye=function(rn,Hn){const Er=new Map;for(const ar of Ui(Hn))for(const Ge of pa(rn,ar.fieldPath))switch(Ge.op){case"==":case"in":Er.set(ar.fieldPath.canonicalString(),Ge.value);break;case"not-in":case"!=":return Er.set(ar.fieldPath.canonicalString(),Ge.value),Array.from(Er.values())}return null}(X,k),Oe=function(rn,Hn){const Er=[];let ar=!0;for(const Ge of Ui(Hn)){const Se=0===Ge.kind?ic(rn,Ge.fieldPath,rn.startAt):sc(rn,Ge.fieldPath,rn.startAt);Er.push(Se.value),ar&&(ar=Se.inclusive)}return new fr(Er,ar)}(X,k),ht=function(rn,Hn){const Er=[];let ar=!0;for(const Ge of Ui(Hn)){const Se=0===Ge.kind?sc(rn,Ge.fieldPath,rn.endAt):ic(rn,Ge.fieldPath,rn.endAt);Er.push(Se.value),ar&&(ar=Se.inclusive)}return new fr(Er,ar)}(X,k),Rt=this.In(k,X,Oe),Kt=this.In(k,X,ht),Bt=this.Tn(k,X,ye),bn=this.En(k.indexId,ae,Rt,Oe.inclusive,Kt,ht.inclusive,Bt);return ze.forEach(bn,jn=>s.G(jn,r.limit).next(rn=>{rn.forEach(Hn=>{const Er=Ut.fromSegments(Hn.documentKey);_.has(Er)||(_=_.add(Er),R.push(Er))})}))}).next(()=>R)}return ze.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(r=0===e.filters.length?[e]:Xu(fn.create(e.filters,"and")).map(s=>Jo(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,s,c,h,_,R){const k=(null!=r?r.length:1)*Math.max(s.length,h.length),X=k/(null!=r?r.length:1),ae=[];for(let ye=0;ye<k;++ye){const Oe=r?this.dn(r[ye/X]):Kd,ht=this.An(e,Oe,s[ye%X],c),Rt=this.Rn(e,Oe,h[ye%X],_),Kt=R.map(Bt=>this.An(e,Oe,Bt,!0));ae.push(...this.createRange(ht,Rt,Kt))}return ae}An(e,r,s,c){const h=new Ha(e,Ut.empty(),r,s);return c?h:h.Zt()}Rn(e,r,s,c){const h=new Ha(e,Ut.empty(),r,s);return c?h.Zt():h}Pn(e,r){const s=new qu(r),c=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,c).next(h=>{let _=null;for(const R of h)s.rn(R)&&(!_||R.fields.length>_.fields.length)&&(_=R);return _})}getIndexType(e,r){let s=2;const c=this.hn(r);return ze.forEach(c,h=>this.Pn(e,h).next(_=>{_?0!==s&&_.fields.length<function(k){let X=new Gn(Qn.comparator),ae=!1;for(const ye of k.filters)for(const Oe of ye.getFlattenedFilters())Oe.field.isKeyField()||("array-contains"===Oe.op||"array-contains-any"===Oe.op?ae=!0:X=X.add(Oe.field));for(const ye of k.orderBy)ye.field.isKeyField()||(X=X.add(ye.field));return X.size+(ae?1:0)}(h)&&(s=1):s=0})).next(()=>null!==r.limit&&c.length>1&&2===s?1:s)}Vn(e,r){const s=new ms;for(const c of Ui(e)){const h=r.data.field(c.fieldPath);if(null==h)return null;const _=s.Yt(c.kind);Js.vt.It(h,_)}return s.zt()}dn(e){const r=new ms;return Js.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const s=new ms;return Js.vt.It(go(this.databaseId,r),s.Yt(function(h){const _=Ui(h);return 0===_.length?0:_[_.length-1].kind}(e))),s.zt()}Tn(e,r,s){if(null===s)return[];let c=[];c.push(new ms);let h=0;for(const _ of Ui(e)){const R=s[h++];for(const k of c)if(this.fn(r,_.fieldPath)&&Qi(R))c=this.gn(c,_,R);else{const X=k.Yt(_.kind);Js.vt.It(R,X)}}return this.pn(c)}In(e,r,s){return this.Tn(e,r,s.position)}pn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].zt();return r}gn(e,r,s){const c=[...e],h=[];for(const _ of s.arrayValue.values||[])for(const R of c){const k=new ms;k.seed(R.zt()),Js.vt.It(_,k.Yt(r.kind)),h.push(k)}return h}fn(e,r){return!!e.filters.find(s=>s instanceof kn&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=Ju(e),c=za(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(h=>{const _=[];return ze.forEach(h,R=>c.get([R.indexId,this.uid]).next(k=>{_.push(function(ae,ye){const Oe=ye?new Xe(ye.sequenceNumber,new jt(Fs(ye.readTime),new Ut(_s(ye.documentKey)),ye.largestBatchId)):Xe.empty(),ht=ae.fields.map(([Rt,Kt])=>new Sn(Qn.fromServerFormat(Rt),Kt));return new Nr(ae.indexId,ae.collectionGroup,ht,Oe)}(R,k))})).next(()=>_)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,c)=>{const h=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==h?h:it(s.collectionGroup,c.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const c=Ju(e),h=za(e);return this.yn(e).next(_=>c.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(R=>ze.forEach(R,k=>h.put(Nl(k.indexId,this.uid,_,s)))))}updateIndexEntries(e,r){const s=new Map;return ze.forEach(r,(c,h)=>{const _=s.get(c.collectionGroup);return(_?ze.resolve(_):this.getFieldIndexes(e,c.collectionGroup)).next(R=>(s.set(c.collectionGroup,R),ze.forEach(R,k=>this.wn(e,c,k).next(X=>{const ae=this.Sn(h,k);return X.isEqual(ae)?ze.resolve():this.bn(e,h,k,X,ae)}))))})}Dn(e,r,s,c){return Fc(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(s,r.key),documentKey:r.key.path.toArray()})}vn(e,r,s,c){return Fc(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(s,r.key),r.key.path.toArray()])}wn(e,r,s){const c=Fc(e);let h=new Gn($a);return c.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,r)])},(_,R)=>{h=h.add(new Ha(s.indexId,r,R.arrayValue,R.directionalValue))}).next(()=>h)}Sn(e,r){let s=new Gn($a);const c=this.Vn(r,e);if(null==c)return s;const h=Li(r);if(null!=h){const _=e.data.field(h.fieldPath);if(Qi(_))for(const R of _.arrayValue.values||[])s=s.add(new Ha(r.indexId,e.key,this.dn(R),c))}else s=s.add(new Ha(r.indexId,e.key,Kd,c));return s}bn(e,r,s,c,h){rt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const _=[];return function(k,X,ae,ye,Oe){const ht=k.getIterator(),Rt=X.getIterator();let Kt=Wi(ht),Bt=Wi(Rt);for(;Kt||Bt;){let bn=!1,jn=!1;if(Kt&&Bt){const rn=ae(Kt,Bt);rn<0?jn=!0:rn>0&&(bn=!0)}else null!=Kt?jn=!0:bn=!0;bn?(ye(Bt),Bt=Wi(Rt)):jn?(Oe(Kt),Kt=Wi(ht)):(Kt=Wi(ht),Bt=Wi(Rt))}}(c,h,$a,R=>{_.push(this.Dn(e,r,s,R))},R=>{_.push(this.vn(e,r,s,R))}),ze.waitFor(_)}yn(e){let r=1;return za(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,h)=>{h.done(),r=c.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((_,R)=>$a(_,R)).filter((_,R,k)=>!R||0!==$a(_,k[R-1]));const c=[];c.push(e);for(const _ of s){const R=$a(_,e),k=$a(_,r);if(0===R)c[0]=e.Zt();else if(R>0&&k<0)c.push(_),c.push(_.Zt());else if(k>0)break}c.push(r);const h=[];for(let _=0;_<c.length;_+=2){if(this.Cn(c[_],c[_+1]))return[];h.push(IDBKeyRange.bound([c[_].indexId,this.uid,c[_].arrayValue,c[_].directionalValue,Kd,[]],[c[_+1].indexId,this.uid,c[_+1].arrayValue,c[_+1].directionalValue,Kd,[]]))}return h}Cn(e,r){return $a(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Xh)}getMinOffset(e,r){return ze.mapArray(this.hn(r),s=>this.Pn(e,s).next(c=>c||Wt())).next(Xh)}}function rp(a){return xr(a,"collectionParents")}function Fc(a){return xr(a,"indexEntries")}function Ju(a){return xr(a,"indexConfiguration")}function za(a){return xr(a,"indexState")}function Xh(a){Zt(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const c=a[s].indexState.offset;_n(c,e)<0&&(e=c),r<c.largestBatchId&&(r=c.largestBatchId)}return new jt(e.readTime,e.documentKey,r)}const Yh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fi{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new fi(e,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ed(a,e,r){const s=a.store("mutations"),c=a.store("documentMutations"),h=[],_=IDBKeyRange.only(r.batchId);let R=0;const k=s.J({range:_},(ae,ye,Oe)=>(R++,Oe.delete()));h.push(k.next(()=>{Zt(1===R)}));const X=[];for(const ae of r.mutations){const ye=Vo(e,ae.key.path,r.batchId);h.push(c.delete(ye)),X.push(ae.key)}return ze.waitFor(h).next(()=>X)}function Ja(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw Wt();e=a.noDocument}return JSON.stringify(e).length}fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(41943040,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);class mu{constructor(e,r,s,c){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=c,this.Fn={}}static lt(e,r,s,c){Zt(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new mu(h,r,s,c)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return na(e).J({index:"userMutationsIndex",range:s},(c,h,_)=>{r=!1,_.done()}).next(()=>r)}addMutationBatch(e,r,s,c){const h=fl(e),_=na(e);return _.add({}).next(R=>{Zt("number"==typeof R);const k=new lc(R,r,s,c),X=function(ht,Rt,Kt){const Bt=Kt.baseMutations.map(jn=>Za(ht.ct,jn)),bn=Kt.mutations.map(jn=>Za(ht.ct,jn));return{userId:Rt,batchId:Kt.batchId,localWriteTimeMs:Kt.localWriteTime.toMillis(),baseMutations:Bt,mutations:bn}}(this.serializer,this.userId,k),ae=[];let ye=new Gn((Oe,ht)=>it(Oe.canonicalString(),ht.canonicalString()));for(const Oe of c){const ht=Vo(this.userId,Oe.key.path,R);ye=ye.add(Oe.key.path.popLast()),ae.push(_.put(X)),ae.push(h.put(ht,io))}return ye.forEach(Oe=>{ae.push(this.indexManager.addToCollectionParentIndex(e,Oe))}),e.addOnCommittedListener(()=>{this.Fn[R]=k.keys()}),ze.waitFor(ae).next(()=>k)})}lookupMutationBatch(e,r){return na(e).get(r).next(s=>s?(Zt(s.userId===this.userId),Pc(this.serializer,s)):null)}Mn(e,r){return this.Fn[r]?ze.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const c=s.keys();return this.Fn[r]=c,c}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,c=IDBKeyRange.lowerBound([this.userId,s]);let h=null;return na(e).J({index:"userMutationsIndex",range:c},(_,R,k)=>{R.userId===this.userId&&(Zt(R.batchId>=s),h=Pc(this.serializer,R)),k.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return na(e).J({index:"userMutationsIndex",range:r,reverse:!0},(c,h,_)=>{s=h.batchId,_.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return na(e).U("userMutationsIndex",r).next(s=>s.map(c=>Pc(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=Fo(this.userId,r.path),c=IDBKeyRange.lowerBound(s),h=[];return fl(e).J({range:c},(_,R,k)=>{const[X,ae,ye]=_,Oe=_s(ae);if(X===this.userId&&r.path.isEqual(Oe))return na(e).get(ye).next(ht=>{if(!ht)throw Wt();Zt(ht.userId===this.userId),h.push(Pc(this.serializer,ht))});k.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Gn(it);const c=[];return r.forEach(h=>{const _=Fo(this.userId,h.path),R=IDBKeyRange.lowerBound(_),k=fl(e).J({range:R},(X,ae,ye)=>{const[Oe,ht,Rt]=X,Kt=_s(ht);Oe===this.userId&&h.path.isEqual(Kt)?s=s.add(Rt):ye.done()});c.push(k)}),ze.waitFor(c).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1,h=Fo(this.userId,s),_=IDBKeyRange.lowerBound(h);let R=new Gn(it);return fl(e).J({range:_},(k,X,ae)=>{const[ye,Oe,ht]=k,Rt=_s(Oe);ye===this.userId&&s.isPrefixOf(Rt)?Rt.length===c&&(R=R.add(ht)):ae.done()}).next(()=>this.xn(e,R))}xn(e,r){const s=[],c=[];return r.forEach(h=>{c.push(na(e).get(h).next(_=>{if(null===_)throw Wt();Zt(_.userId===this.userId),s.push(Pc(this.serializer,_))}))}),ze.waitFor(c).next(()=>s)}removeMutationBatch(e,r){return ed(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),ze.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return ze.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return fl(e).J({range:s},(h,_,R)=>{if(h[0]===this.userId){const k=_s(h[1]);c.push(k)}else R.done()}).next(()=>{Zt(0===c.length)})})}containsKey(e,r){return vo(e,this.userId,r)}Nn(e){return Ll(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vo(a,e,r){const s=Fo(e,r.path),c=s[1],h=IDBKeyRange.lowerBound(s);let _=!1;return fl(a).J({range:h,H:!0},(R,k,X)=>{const[ae,ye,Oe]=R;ae===e&&ye===c&&(_=!0),X.done()}).next(()=>_)}function na(a){return xr(a,"mutations")}function fl(a){return xr(a,"documentMutations")}function Ll(a){return xr(a,"mutationQueues")}class ya{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ya(0)}static kn(){return new ya(-1)}}class td{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const s=new ya(r.highestTargetId);return r.highestTargetId=s.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>$t.fromTimestamp(new Gt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.qn(e).next(c=>(c.highestListenSequenceNumber=r,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),r>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=r),this.Qn(e,c)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(r,s),this.Qn(e,s))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Vc(e).delete(r.targetId)).next(()=>this.qn(e)).next(s=>(Zt(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,r,s){let c=0;const h=[];return Vc(e).J((_,R)=>{const k=xa(R);k.sequenceNumber<=r&&null===s.get(k.targetId)&&(c++,h.push(this.removeTargetData(e,k)))}).next(()=>ze.waitFor(h)).next(()=>c)}forEachTarget(e,r){return Vc(e).J((s,c)=>{const h=xa(c);r(h)})}qn(e){return Wd(e).get("targetGlobalKey").next(r=>(Zt(null!==r),r))}Qn(e,r){return Wd(e).put("targetGlobalKey",r)}Kn(e,r){return Vc(e).put(al(this.serializer,r))}$n(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=Ya(r),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let h=null;return Vc(e).J({range:c,index:"queryTargetsIndex"},(_,R,k)=>{const X=xa(R);Aa(r,X.target)&&(h=X,k.done())}).next(()=>h)}addMatchingKeys(e,r,s){const c=[],h=Lc(e);return r.forEach(_=>{const R=si(_.path);c.push(h.put({targetId:s,path:R})),c.push(this.referenceDelegate.addReference(e,s,_))}),ze.waitFor(c)}removeMatchingKeys(e,r,s){const c=Lc(e);return ze.forEach(r,h=>{const _=si(h.path);return ze.waitFor([c.delete([s,_]),this.referenceDelegate.removeReference(e,s,h)])})}removeMatchingKeysForTargetId(e,r){const s=Lc(e),c=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),c=Lc(e);let h=mn();return c.J({range:s,H:!0},(_,R,k)=>{const X=_s(_[1]),ae=new Ut(X);h=h.add(ae)}).next(()=>h)}containsKey(e,r){const s=si(r.path),c=IDBKeyRange.bound([s],[Pn(s)],!1,!0);let h=0;return Lc(e).J({index:"documentTargetsIndex",H:!0,range:c},([_,R],k,X)=>{0!==_&&(h++,X.done())}).next(()=>h>0)}ot(e,r){return Vc(e).get(r).next(s=>s?xa(s):null)}}function Vc(a){return xr(a,"targets")}function Wd(a){return xr(a,"targetGlobal")}function Lc(a){return xr(a,"targetDocuments")}function No([a,e],[r,s]){const c=it(a,r);return 0===c?it(e,s):c}class Gd{constructor(e){this.Un=e,this.buffer=new Gn(No),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();No(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class pl{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var r=this;rt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){Kr(s)?rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield hr(s)}yield r.Hn(3e5)}))}}class qd{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return ze.resolve(gi.oe);const s=new Gd(r);return this.Jn.forEachTarget(e,c=>s.zn(c.sequenceNumber)).next(()=>this.Jn.Zn(e,c=>s.zn(c))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(Yh)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yh):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let s,c,h,_,R,k,X;const ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ye=>(ye>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ye}`),c=this.params.maximumSequenceNumbersToCollect):c=ye,_=Date.now(),this.nthSequenceNumber(e,c))).next(ye=>(s=ye,R=Date.now(),this.removeTargets(e,s,r))).next(ye=>(h=ye,k=Date.now(),this.removeOrphanedDocuments(e,s))).next(ye=>(X=Date.now(),Ri()<=Rn.$b.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${_-ae}ms\n\tDetermined least recently used ${c} in `+(R-_)+`ms\n\tRemoved ${h} targets in `+(k-R)+`ms\n\tRemoved ${ye} documents in `+(X-k)+`ms\nTotal Duration: ${X-ae}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:ye})))}}class ip{constructor(e,r){this.db=e,this.garbageCollector=function gu(a,e){return new qd(a,e)}(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(c=>s+c))}er(e){let r=0;return this.Zn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(s,c)=>r(c))}addReference(e,r,s){return Uc(e,s)}removeReference(e,r,s){return Uc(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return Uc(e,r)}nr(e,r){return function(c,h){let _=!1;return Ll(c).Y(R=>vo(c,R,h).next(k=>(k&&(_=!0),ze.resolve(!k)))).next(()=>_)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let h=0;return this.tr(e,(_,R)=>{if(R<=r){const k=this.nr(e,_).next(X=>{if(!X)return h++,s.getEntry(e,_).next(()=>(s.removeEntry(_,$t.min()),Lc(e).delete([0,si(_.path)])))});c.push(k)}}).next(()=>ze.waitFor(c)).next(()=>s.apply(e)).next(()=>h)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return Uc(e,r)}tr(e,r){const s=Lc(e);let c,h=gi.oe;return s.J({index:"documentTargetsIndex"},([_,R],{path:k,sequenceNumber:X})=>{0===_?(h!==gi.oe&&r(new Ut(_s(c)),h),h=X,c=k):h=gi.oe}).next(()=>{h!==gi.oe&&r(new Ut(_s(c)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uc(a,e){return Lc(a).put((c=a.currentSequenceNumber,{targetId:0,path:si(e.path),sequenceNumber:c}));var c}class Qd{constructor(){this.changes=new $r(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?ze.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xd{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return ec(e).put(s)}removeEntry(e,r,s){return ec(e).delete(function(h,_){const R=h.path.toArray();return[R.slice(0,R.length-2),R[R.length-2],Pl(_),R[R.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.rr(e,s)))}getEntry(e,r){let s=hn.newInvalidDocument(r);return ec(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bc(r))},(c,h)=>{s=this.ir(r,h)}).next(()=>s)}sr(e,r){let s={size:0,document:hn.newInvalidDocument(r)};return ec(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bc(r))},(c,h)=>{s={document:this.ir(r,h),size:Ja(h)}}).next(()=>s)}getEntries(e,r){let s=Lr();return this._r(e,r,(c,h)=>{const _=this.ir(c,h);s=s.insert(c,_)}).next(()=>s)}ar(e,r){let s=Lr(),c=new Wn(Ut.comparator);return this._r(e,r,(h,_)=>{const R=this.ir(h,_);s=s.insert(h,R),c=c.insert(h,Ja(_))}).next(()=>({documents:s,ur:c}))}_r(e,r,s){if(r.isEmpty())return ze.resolve();let c=new Gn(ml);r.forEach(k=>c=c.add(k));const h=IDBKeyRange.bound(Bc(c.first()),Bc(c.last())),_=c.getIterator();let R=_.getNext();return ec(e).J({index:"documentKeyIndex",range:h},(k,X,ae)=>{const ye=Ut.fromSegments([...X.prefixPath,X.collectionGroup,X.documentId]);for(;R&&ml(R,ye)<0;)s(R,null),R=_.getNext();R&&R.isEqual(ye)&&(s(R,X),R=_.hasNext()?_.getNext():null),R?ae.$(Bc(R)):ae.done()}).next(()=>{for(;R;)s(R,null),R=_.hasNext()?_.getNext():null})}getDocumentsMatchingQuery(e,r,s,c,h){const _=r.path,R=[_.popLast().toArray(),_.lastSegment(),Pl(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],k=[_.popLast().toArray(),_.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ec(e).U(IDBKeyRange.bound(R,k,!0)).next(X=>{h?.incrementDocumentReadCount(X.length);let ae=Lr();for(const ye of X){const Oe=this.ir(Ut.fromSegments(ye.prefixPath.concat(ye.collectionGroup,ye.documentId)),ye);Oe.isFoundDocument()&&(Hr(r,Oe)||c.has(Oe.key))&&(ae=ae.insert(Oe.key,Oe))}return ae})}getAllFromCollectionGroup(e,r,s,c){let h=Lr();const _=va(r,s),R=va(r,jt.max());return ec(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(_,R,!0)},(k,X,ae)=>{const ye=this.ir(Ut.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);h=h.insert(ye.key,ye),h.size===c&&ae.done()}).next(()=>h)}newChangeBuffer(e){return new nd(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Ul(e).get("remoteDocumentGlobalKey").next(r=>(Zt(!!r),r))}rr(e,r){return Ul(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const s=function $d(a,e){let r;if(e.document)r=Po(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ut.fromSegments(e.noDocument.path),c=Fs(e.noDocument.readTime);r=hn.newNoDocument(s,c),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Wt();{const s=Ut.fromSegments(e.unknownDocument.path),c=Fs(e.unknownDocument.version);r=hn.newUnknownDocument(s,c)}}return e.readTime&&r.setReadTime(function(c){const h=new Gt(c[0],c[1]);return $t.fromTimestamp(h)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual($t.min()))return s}return hn.newInvalidDocument(e)}}function _u(a){return new Xd(a)}class nd extends Qd{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new $r(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const r=[];let s=0,c=new Gn((h,_)=>it(h.canonicalString(),_.canonicalString()));return this.changes.forEach((h,_)=>{const R=this.lr.get(h);if(r.push(this.cr.removeEntry(e,h,R.readTime)),_.isValidDocument()){const k=Ml(this.cr.serializer,_);c=c.add(h.path.popLast());const X=Ja(k);s+=X-R.size,r.push(this.cr.addEntry(e,h,k))}else if(s-=R.size,this.trackRemovals){const k=Ml(this.cr.serializer,_.convertToNoDocument($t.min()));r.push(this.cr.addEntry(e,h,k))}}),c.forEach(h=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,h))}),r.push(this.cr.updateMetadata(e,s)),ze.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(s=>(this.lr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:s,ur:c})=>(c.forEach((h,_)=>{this.lr.set(h,{size:_,readTime:s.get(h).readTime})}),s))}}function Ul(a){return xr(a,"remoteDocumentGlobal")}function ec(a){return xr(a,"remoteDocumentsV14")}function Bc(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function va(a,e){const r=e.documentKey.path.toArray();return[a,Pl(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function ml(a,e){const r=a.path.toArray(),s=e.path.toArray();let c=0;for(let h=0;h<r.length-2&&h<s.length-2;++h)if(c=it(r[h],s[h]),c)return c;return c=it(r.length,s.length),c||(c=it(r[r.length-2],s[s.length-2]),c||it(r[r.length-1],s[s.length-1]))}class gl{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Yd{constructor(e,r,s,c){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,r))).next(c=>(null!==s&&xc(s.mutation,c,Gi.empty(),Gt.now()),c))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,mn()).next(()=>s))}getLocalViewOfDocuments(e,r,s=mn()){const c=ji();return this.populateOverlays(e,c,r).next(()=>this.computeViews(e,r,c,s).next(h=>{let _=$i();return h.forEach((R,k)=>{_=_.insert(R,k.overlayedDocument)}),_}))}getOverlayedDocuments(e,r){const s=ji();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,mn()))}populateOverlays(e,r,s){const c=[];return s.forEach(h=>{r.has(h)||c.push(h)}),this.documentOverlayCache.getOverlays(e,c).next(h=>{h.forEach((_,R)=>{r.set(_,R)})})}computeViews(e,r,s,c){let h=Lr();const _=Yi(),R=Yi();return r.forEach((k,X)=>{const ae=s.get(X.key);c.has(X.key)&&(void 0===ae||ae.mutation instanceof Zs)?h=h.insert(X.key,X):void 0!==ae?(_.set(X.key,ae.mutation.getFieldMask()),xc(ae.mutation,X,ae.mutation.getFieldMask(),Gt.now())):_.set(X.key,Gi.empty())}),this.recalculateAndSaveOverlays(e,h).next(k=>(k.forEach((X,ae)=>_.set(X,ae)),r.forEach((X,ae)=>{var ye;return R.set(X,new gl(ae,null!==(ye=_.get(X))&&void 0!==ye?ye:null))}),R))}recalculateAndSaveOverlays(e,r){const s=Yi();let c=new Wn((_,R)=>_-R),h=mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(_=>{for(const R of _)R.keys().forEach(k=>{const X=r.get(k);if(null===X)return;let ae=s.get(k)||Gi.empty();ae=R.applyToLocalView(X,ae),s.set(k,ae);const ye=(c.get(R.batchId)||mn()).add(k);c=c.insert(R.batchId,ye)})}).next(()=>{const _=[],R=c.getReverseIterator();for(;R.hasNext();){const k=R.getNext(),X=k.key,ae=k.value,ye=Do();ae.forEach(Oe=>{if(!h.has(Oe)){const ht=ac(r.get(Oe),s.get(Oe));null!==ht&&ye.set(Oe,ht),h=h.add(Oe)}}),_.push(this.documentOverlayCache.saveOverlays(e,X,ye))}return ze.waitFor(_)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,c){return Ut.isDocumentKey((_=r).path)&&null===_.collectionGroup&&0===_.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Na(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,c):this.getDocumentsMatchingCollectionQuery(e,r,s,c);var _}getNextDocuments(e,r,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,c).next(h=>{const _=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,c-h.size):ze.resolve(ji());let R=-1,k=h;return _.next(X=>ze.forEach(X,(ae,ye)=>(R<ye.largestBatchId&&(R=ye.largestBatchId),h.get(ae)?ze.resolve():this.remoteDocumentCache.getEntry(e,ae).next(Oe=>{k=k.insert(ae,Oe)}))).next(()=>this.populateOverlays(e,X,h)).next(()=>this.computeViews(e,k,X,mn())).next(ae=>({batchId:R,changes:ea(ae)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ut(r)).next(s=>{let c=$i();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,r,s,c){const h=r.collectionGroup;let _=$i();return this.indexManager.getCollectionParents(e,h).next(R=>ze.forEach(R,k=>{const X=(ye=r,Oe=k.child(h),new _o(Oe,null,ye.explicitOrderBy.slice(),ye.filters.slice(),ye.limit,ye.limitType,ye.startAt,ye.endAt));var ye,Oe;return this.getDocumentsMatchingCollectionQuery(e,X,s,c).next(ae=>{ae.forEach((ye,Oe)=>{_=_.insert(ye,Oe)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,r,s,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(_=>(h=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,h,c))).next(_=>{h.forEach((k,X)=>{const ae=X.getKey();null===_.get(ae)&&(_=_.insert(ae,hn.newInvalidDocument(ae)))});let R=$i();return _.forEach((k,X)=>{const ae=h.get(k);void 0!==ae&&xc(ae.mutation,X,Gi.empty(),Gt.now()),Hr(r,X)&&(R=R.insert(k,X))}),R})}}class Zh{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ze.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,{id:(c=r).id,version:c.version,createTime:sr(c.createTime)}),ze.resolve();var c}getNamedQuery(e,r){return ze.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,{name:(c=r).name,query:cl(c.bundledQuery),readTime:sr(c.readTime)}),ze.resolve();var c}}class yu{constructor(){this.overlays=new Wn(Ut.comparator),this.Ir=new Map}getOverlay(e,r){return ze.resolve(this.overlays.get(r))}getOverlays(e,r){const s=ji();return ze.forEach(r,c=>this.getOverlay(e,c).next(h=>{null!==h&&s.set(c,h)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((c,h)=>{this.ht(e,r,h)}),ze.resolve()}removeOverlaysForBatchId(e,r,s){const c=this.Ir.get(s);return void 0!==c&&(c.forEach(h=>this.overlays=this.overlays.remove(h)),this.Ir.delete(s)),ze.resolve()}getOverlaysForCollection(e,r,s){const c=ji(),h=r.length+1,_=new Ut(r.child("")),R=this.overlays.getIteratorFrom(_);for(;R.hasNext();){const k=R.getNext().value,X=k.getKey();if(!r.isPrefixOf(X.path))break;X.path.length===h&&k.largestBatchId>s&&c.set(k.getKey(),k)}return ze.resolve(c)}getOverlaysForCollectionGroup(e,r,s,c){let h=new Wn((X,ae)=>X-ae);const _=this.overlays.getIterator();for(;_.hasNext();){const X=_.getNext().value;if(X.getKey().getCollectionGroup()===r&&X.largestBatchId>s){let ae=h.get(X.largestBatchId);null===ae&&(ae=ji(),h=h.insert(X.largestBatchId,ae)),ae.set(X.getKey(),X)}}const R=ji(),k=h.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach((X,ae)=>R.set(X,ae)),!(R.size()>=c)););return ze.resolve(R)}ht(e,r,s){const c=this.overlays.get(s.key);if(null!==c){const _=this.Ir.get(c.largestBatchId).delete(s.key);this.Ir.set(c.largestBatchId,_)}this.overlays=this.overlays.insert(s.key,new Ro(r,s));let h=this.Ir.get(r);void 0===h&&(h=mn(),this.Ir.set(r,h)),this.Ir.set(r,h.add(s.key))}}class vu{constructor(){this.sessionToken=br.EMPTY_BYTE_STRING}getSessionToken(e){return ze.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ze.resolve()}}class bu{constructor(){this.Tr=new Gn(eo.Er),this.dr=new Gn(eo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new eo(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Vr(new eo(e,r))}mr(e,r){e.forEach(s=>this.removeReference(s,r))}gr(e){const r=new Ut(new Xt([])),s=new eo(r,e),c=new eo(r,e+1),h=[];return this.dr.forEachInRange([s,c],_=>{this.Vr(_),h.push(_.key)}),h}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ut(new Xt([])),s=new eo(r,e),c=new eo(r,e+1);let h=mn();return this.dr.forEachInRange([s,c],_=>{h=h.add(_.key)}),h}containsKey(e){const r=new eo(e,0),s=this.Tr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class eo{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ut.comparator(e.key,r.key)||it(e.wr,r.wr)}static Ar(e,r){return it(e.wr,r.wr)||Ut.comparator(e.key,r.key)}}class Bl{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Gn(eo.Er)}checkEmpty(e){return ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,c){const h=this.Sr;this.Sr++;const _=new lc(h,r,s,c);this.mutationQueue.push(_);for(const R of c)this.br=this.br.add(new eo(R.key,h)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return ze.resolve(_)}lookupMutationBatch(e,r){return ze.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const c=this.vr(r+1),h=c<0?0:c;return ze.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new eo(r,0),c=new eo(r,Number.POSITIVE_INFINITY),h=[];return this.br.forEachInRange([s,c],_=>{const R=this.Dr(_.wr);h.push(R)}),ze.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Gn(it);return r.forEach(c=>{const h=new eo(c,0),_=new eo(c,Number.POSITIVE_INFINITY);this.br.forEachInRange([h,_],R=>{s=s.add(R.wr)})}),ze.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1;let h=s;Ut.isDocumentKey(h)||(h=h.child(""));const _=new eo(new Ut(h),0);let R=new Gn(it);return this.br.forEachWhile(k=>{const X=k.key.path;return!!s.isPrefixOf(X)&&(X.length===c&&(R=R.add(k.wr)),!0)},_),ze.resolve(this.Cr(R))}Cr(e){const r=[];return e.forEach(s=>{const c=this.Dr(s);null!==c&&r.push(c)}),r}removeMutationBatch(e,r){Zt(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return ze.forEach(r.mutations,c=>{const h=new eo(c.key,r.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,r){const s=new eo(r,0),c=this.br.firstAfterOrEqual(s);return ze.resolve(r.isEqual(c&&c.key))}performConsistencyCheck(e){return ze.resolve()}Fr(e,r){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class jl{constructor(e){this.Mr=e,this.docs=new Wn(Ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,c=this.docs.get(s),h=c?c.size:0,_=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:_}),this.size+=_-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return ze.resolve(s?s.document.mutableCopy():hn.newInvalidDocument(r))}getEntries(e,r){let s=Lr();return r.forEach(c=>{const h=this.docs.get(c);s=s.insert(c,h?h.document.mutableCopy():hn.newInvalidDocument(c))}),ze.resolve(s)}getDocumentsMatchingQuery(e,r,s,c){let h=Lr();const _=r.path,R=new Ut(_.child("")),k=this.docs.getIteratorFrom(R);for(;k.hasNext();){const{key:X,value:{document:ae}}=k.getNext();if(!_.isPrefixOf(X.path))break;X.path.length>_.length+1||_n(wt(ae),s)<=0||(c.has(ae.key)||Hr(r,ae))&&(h=h.insert(ae.key,ae.mutableCopy()))}return ze.resolve(h)}getAllFromCollectionGroup(e,r,s,c){Wt()}Or(e,r){return ze.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new Eu(this)}getSize(e){return ze.resolve(this.size)}}class Eu extends Qd{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?r.push(this.cr.addEntry(e,c)):this.cr.removeEntry(s)}),ze.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class sp{constructor(e){this.persistence=e,this.Nr=new $r(r=>Ya(r),Aa),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bu,this.targetCount=0,this.kr=ya.Bn()}forEachTarget(e,r){return this.Nr.forEach((s,c)=>r(c)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),ze.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new ya(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ze.resolve()}updateTargetData(e,r){return this.Kn(r),ze.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,r,s){let c=0;const h=[];return this.Nr.forEach((_,R)=>{R.sequenceNumber<=r&&null===s.get(R.targetId)&&(this.Nr.delete(_),h.push(this.removeMatchingKeysForTargetId(e,R.targetId)),c++)}),ze.waitFor(h).next(()=>c)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return ze.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),ze.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const c=this.persistence.referenceDelegate,h=[];return c&&r.forEach(_=>{h.push(c.markPotentiallyOrphaned(e,_))}),ze.waitFor(h)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ze.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return ze.resolve(s)}containsKey(e,r){return ze.resolve(this.Br.containsKey(r))}}class jc{constructor(e,r){this.qr={},this.overlays={},this.Qr=new gi(0),this.Kr=!1,this.Kr=!0,this.$r=new vu,this.referenceDelegate=e(this),this.Ur=new sp(this),this.indexManager=new Yu,this.remoteDocumentCache=new jl(s=>this.referenceDelegate.Wr(s)),this.serializer=new ol(r),this.Gr=new Zh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new yu,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new Bl(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){rt("MemoryPersistence","Starting transaction:",e);const c=new Zd(this.Qr.next());return this.referenceDelegate.zr(),s(c).next(h=>this.referenceDelegate.jr(c).next(()=>h)).toPromise().then(h=>(c.raiseOnCommittedEvent(),h))}Hr(e,r){return ze.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,r)))}}class Zd extends $n{constructor(e){super(),this.currentSequenceNumber=e}}class Iu{constructor(e){this.persistence=e,this.Jr=new bu,this.Yr=null}static Zr(e){return new Iu(e)}get Xr(){if(this.Yr)return this.Yr;throw Wt()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),ze.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),ze.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ze.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(c=>this.Xr.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(c=>{c.forEach(h=>this.Xr.add(h.toString()))}).next(()=>s.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Xr,s=>{const c=Ut.fromPath(s);return this.ei(e,c).next(h=>{h||r.removeEntry(c,$t.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ze.or([()=>ze.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class op{constructor(e){this.serializer=e}O(e,r,s,c){const h=new Xn("createOrUpgrade",r);var k;s<1&&c>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ao,{unique:!0}),k.createObjectStore("documentMutations"),wu(e),function(k){k.createObjectStore("remoteDocuments")}(e));let _=ze.resolve();return s<3&&c>=3&&(0!==s&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),wu(e)),_=_.next(()=>function(k){const X=k.store("targetGlobal"),ae={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",ae)}(h))),s<4&&c>=4&&(0!==s&&(_=_.next(()=>function(k,X){return X.store("mutations").U().next(ae=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ao,{unique:!0});const ye=X.store("mutations"),Oe=ae.map(ht=>ye.put(ht));return ze.waitFor(Oe)})}(e,h))),_=_.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(_=_.next(()=>this.ni(h))),s<6&&c>=6&&(_=_.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.ri(h)))),s<7&&c>=7&&(_=_.next(()=>this.ii(h))),s<8&&c>=8&&(_=_.next(()=>this.si(e,h))),s<9&&c>=9&&(_=_.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(_=_.next(()=>this.oi(h))),s<11&&c>=11&&(_=_.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(_=_.next(()=>{!function(k){const X=k.createObjectStore("documentOverlays",{keyPath:Hs});X.createIndex("collectionPathOverlayIndex",so,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",vr,{unique:!1})}(e)})),s<13&&c>=13&&(_=_.next(()=>function(k){const X=k.createObjectStore("remoteDocumentsV14",{keyPath:Xo});X.createIndex("documentKeyIndex",js),X.createIndex("collectionGroupIndex",po)}(e)).next(()=>this._i(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(_=_.next(()=>this.ai(e,h))),s<15&&c>=15&&(_=_.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:Mi}).createIndex("sequenceNumberIndex",es,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:Ps}).createIndex("documentKeyIndex",Ii,{unique:!1})}(e))),s<16&&c>=16&&(_=_.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&c>=17&&(_=_.next(()=>{!function(k){k.createObjectStore("globals",{keyPath:"name"})}(e)})),_}ri(e){let r=0;return e.store("remoteDocuments").J((s,c)=>{r+=Ja(c)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(c=>ze.forEach(c,h=>{const _=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",_).next(R=>ze.forEach(R,k=>{Zt(k.userId===h.userId);const X=Pc(this.serializer,k);return ed(e,h.userId,X).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const h=[];return s.J((_,R)=>{const k=new Xt(_),X=[0,si(k)];h.push(r.get(X).next(ae=>ae?ze.resolve():r.put({targetId:0,path:si(k),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>ze.waitFor(h))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Xs});const s=r.store("collectionParents"),c=new Zu,h=_=>{if(c.add(_)){const R=_.lastSegment(),k=_.popLast();return s.put({collectionId:R,parent:si(k)})}};return r.store("remoteDocuments").J({H:!0},(_,R)=>{const k=new Xt(_);return h(k.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([_,R,k],X)=>{const ae=_s(R);return h(ae.popLast())}))}oi(e){const r=e.store("targets");return r.J((s,c)=>{const h=xa(c),_=al(this.serializer,h);return r.put(_)})}_i(e,r){const s=r.store("remoteDocuments"),c=[];return s.J((h,_)=>{const R=r.store("remoteDocumentsV14"),k=(ye=_,ye.document?new Ut(Xt.fromString(ye.document.name).popFirst(5)):ye.noDocument?Ut.fromSegments(ye.noDocument.path):ye.unknownDocument?Ut.fromSegments(ye.unknownDocument.path):Wt()).path.toArray(),X={prefixPath:k.slice(0,k.length-2),collectionGroup:k[k.length-2],documentId:k[k.length-1],readTime:_.readTime||[0,0],unknownDocument:_.unknownDocument,noDocument:_.noDocument,document:_.document,hasCommittedMutations:!!_.hasCommittedMutations};var ye;c.push(R.put(X))}).next(()=>ze.waitFor(c))}ai(e,r){const s=r.store("mutations"),c=_u(this.serializer),h=new jc(Iu.Zr,this.serializer.ct);return s.U().next(_=>{const R=new Map;return _.forEach(k=>{var X;let ae=null!==(X=R.get(k.userId))&&void 0!==X?X:mn();Pc(this.serializer,k).keys().forEach(ye=>ae=ae.add(ye)),R.set(k.userId,ae)}),ze.forEach(R,(k,X)=>{const ae=new rr(X),ye=dl.lt(this.serializer,ae),Oe=h.getIndexManager(ae),ht=mu.lt(ae,this.serializer,Oe,h.referenceDelegate);return new Yd(c,ht,ye,Oe).recalculateAndSaveOverlaysForDocumentKeys(new kr(r,gi.oe),k).next()})})}}function wu(a){a.createObjectStore("targetDocuments",{keyPath:Ei}).createIndex("documentTargetsIndex",Wr,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yn,{unique:!0}),a.createObjectStore("targetGlobal")}const rd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _l{constructor(e,r,s,c,h,_,R,k,X,ae,ye=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ui=h,this.window=_,this.document=R,this.ci=X,this.li=ae,this.hi=ye,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Oe=>Promise.resolve(),!_l.D())throw new Tt(lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ip(this,c),this.Ai=r+"main",this.serializer=new ol(k),this.Ri=new di(this.Ai,this.hi,new op(this.serializer)),this.$r=new hu,this.Ur=new td(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_u(this.serializer),this.Gr=new ul,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===ae&&qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(lt.FAILED_PRECONDITION,rd);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new gi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var r=this;return this.di=function(){var s=(0,Ie.A)(function*(c){if(r.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var r=(0,Ie.A)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,Ie.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Kr(e))return rt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return pc(e).get("owner").next(r=>ze.resolve(this.vi(r)))}Ci(e){return yl(e).delete(this.clientId)}Fi(){var e=this;return(0,Ie.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=xr(s,"clientMetadata");return c.U().next(h=>{const _=e.xi(h,18e5),R=h.filter(k=>-1===_.indexOf(k));return ze.forEach(R,k=>c.delete(k.clientId)).next(()=>R)})}).catch(()=>[]);if(e.Vi)for(const s of r)e.Vi.removeItem(e.Oi(s.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?ze.resolve(!0):pc(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Tt(lt.FAILED_PRECONDITION,rd);return!1}}return!(!this.networkEnabled||!this.inForeground)||yl(e).U().next(s=>void 0===this.xi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(r=>(this.isPrimary!==r&&rt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ie.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new kr(r,gi.oe);return e.bi(s).next(()=>e.Ci(s))}),e.Ri.close(),e.qi()})()}xi(e,r){return e.filter(s=>this.Mi(s.updateTimeMs,r)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>yl(e).U().next(r=>this.xi(r,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return mu.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new np(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return dl.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,s){rt("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===r?"readonly":"readwrite",h=17===(k=this.hi)?mo:16===k?Zr:15===k?jr:14===k?_i:13===k?gr:12===k?In:11===k?Qt:void Wt();var k;let _;return this.Ri.runTransaction(e,c,h,R=>(_=new kr(R,this.Qr?this.Qr.next():gi.oe),"readwrite-primary"===r?this.wi(_).next(k=>!!k||this.Si(_)).next(k=>{if(!k)throw qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Tt(lt.FAILED_PRECONDITION,Kn);return s(_)}).next(k=>this.Di(_).next(()=>k)):this.Ki(_).next(()=>s(_)))).then(R=>(_.raiseOnCommittedEvent(),R))}Ki(e){return pc(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Tt(lt.FAILED_PRECONDITION,rd)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pc(e).put("owner",r)}static D(){return di.D()}bi(e){const r=pc(e);return r.get("owner").next(s=>this.vi(s)?(rt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):ze.resolve())}Mi(e,r){const s=Date.now();return!(e<s-r||e>s&&(qn(`Detected an update time that is in the future: ${e} > ${s}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,dn.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const s=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(e)));return rt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return qn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){qn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pc(a){return xr(a,"owner")}function yl(a){return xr(a,"clientMetadata")}function $l(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class Hc{constructor(e,r,s,c){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=c}static Wi(e,r){let s=mn(),c=mn();for(const h of r.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new Hc(e,r.fromCache,s,c)}}class Jd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jh{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,dn.nr)()?8:Rs((0,dn.ZQ)())>0?6:4}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,c){const h={result:null};return this.Yi(e,r).next(_=>{h.result=_}).next(()=>{if(!h.result)return this.Zi(e,r,c,s).next(_=>{h.result=_})}).next(()=>{if(h.result)return;const _=new Jd;return this.Xi(e,r,_).next(R=>{if(h.result=R,this.zi)return this.es(e,r,_,R.size)})}).next(()=>h.result)}es(e,r,s,c){return s.documentReadCount<this.ji?(Ri()<=Rn.$b.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",cn(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ze.resolve()):(Ri()<=Rn.$b.DEBUG&&rt("QueryEngine","Query:",cn(r),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.Hi*c?(Ri()<=Rn.$b.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",cn(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,x(r))):ze.resolve())}Yi(e,r){if(Cc(r))return ze.resolve(null);let s=x(r);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==r.limit&&1===c&&(r=Ae(r,null,"F"),s=x(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const _=mn(...h);return this.Ji.getDocuments(e,_).next(R=>this.indexManager.getMinOffset(e,s).next(k=>{const X=this.ts(r,R);return this.ns(r,X,_,k.readTime)?this.Yi(e,Ae(r,null,"F")):this.rs(e,X,r,k)}))})))}Zi(e,r,s,c){return Cc(r)||c.isEqual($t.min())?ze.resolve(null):this.Ji.getDocuments(e,s).next(h=>{const _=this.ts(r,h);return this.ns(r,_,s,c)?ze.resolve(null):(Ri()<=Rn.$b.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),cn(r)),this.rs(e,_,r,Ye(c,-1)).next(R=>R))})}ts(e,r){let s=new Gn(Qr(e));return r.forEach((c,h)=>{Hr(e,h)&&(s=s.add(h))}),s}ns(e,r,s,c){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const h="F"===e.limitType?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Xi(e,r,s){return Ri()<=Rn.$b.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",cn(r)),this.Ji.getDocumentsMatchingQuery(e,r,jt.min(),s)}rs(e,r,s,c){return this.Ji.getDocumentsMatchingQuery(e,s,c).next(h=>(r.forEach(_=>{h=h.insert(_.key,_)}),h))}}class ef{constructor(e,r,s,c){this.persistence=e,this.ss=r,this.serializer=c,this.os=new Wn(it),this._s=new $r(h=>Ya(h),Aa),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function eh(a,e,r,s){return new ef(a,e,r,s)}function Tu(a,e){return id.apply(this,arguments)}function id(){return(id=(0,Ie.A)(function*(a,e){const r=Lt(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let c;return r.mutationQueue.getAllMutationBatches(s).next(h=>(c=h,r.ls(e),r.mutationQueue.getAllMutationBatches(s))).next(h=>{const _=[],R=[];let k=mn();for(const X of c){_.push(X.batchId);for(const ae of X.mutations)k=k.add(ae.key)}for(const X of h){R.push(X.batchId);for(const ae of X.mutations)k=k.add(ae.key)}return r.localDocuments.getDocuments(s,k).next(X=>({hs:X,removedBatchIds:_,addedBatchIds:R}))})})})).apply(this,arguments)}function Au(a){const e=Lt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function sd(a,e,r){let s=mn(),c=mn();return r.forEach(h=>s=s.add(h)),e.getEntries(a,s).next(h=>{let _=Lr();return r.forEach((R,k)=>{const X=h.get(R);k.isFoundDocument()!==X.isFoundDocument()&&(c=c.add(R)),k.isNoDocument()&&k.version.isEqual($t.min())?(e.removeEntry(R,k.readTime),_=_.insert(R,k)):!X.isValidDocument()||k.version.compareTo(X.version)>0||0===k.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(k),_=_.insert(R,k)):rt("LocalStore","Ignoring outdated watch update for ",R,". Current version:",X.version," Watch version:",k.version)}),{Ps:_,Is:c}})}function od(a,e){const r=Lt(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function zl(a,e){const r=Lt(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return r.Ur.getTargetData(s,e).next(h=>h?(c=h,ze.resolve(c)):r.Ur.allocateTargetId(s).next(_=>(c=new Oo(e,_,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=r.os.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s})}function Kl(a,e,r){return U.apply(this,arguments)}function U(){return(U=(0,Ie.A)(function*(a,e,r){const s=Lt(a),c=s.os.get(e),h=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",h,_=>s.persistence.referenceDelegate.removeTarget(_,c)))}catch(_){if(!Kr(_))throw _;rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${_}`)}s.os=s.os.remove(e),s._s.delete(c.target)})).apply(this,arguments)}function C(a,e,r){const s=Lt(a);let c=$t.min(),h=mn();return s.persistence.runTransaction("Execute query","readwrite",_=>function(k,X,ae){const ye=Lt(k),Oe=ye._s.get(ae);return void 0!==Oe?ze.resolve(ye.os.get(Oe)):ye.Ur.getTargetData(X,ae)}(s,_,x(e)).next(R=>{if(R)return c=R.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(_,R.targetId).next(k=>{h=k})}).next(()=>s.ss.getDocumentsMatchingQuery(_,e,r?c:$t.min(),r?h:mn())).next(R=>($(s,ci(e),R),{documents:R,Ts:h})))}function y(a,e){const r=Lt(a),s=Lt(r.Ur),c=r.os.get(e);return c?Promise.resolve(c.target):r.persistence.runTransaction("Get target data","readonly",h=>s.ot(h,e).next(_=>_?_.target:null))}function S(a,e){const r=Lt(a),s=r.us.get(e)||$t.min();return r.persistence.runTransaction("Get new document changes","readonly",c=>r.cs.getAllFromCollectionGroup(c,e,Ye(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>($(r,e,c),c))}function $(a,e,r){let s=a.us.get(e)||$t.min();r.forEach((c,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),a.us.set(e,s)}function Fe(){return(Fe=(0,Ie.A)(function*(a,e,r,s){const c=Lt(a);let h=mn(),_=Lr();for(const X of r){const ae=e.Es(X.metadata.name);X.document&&(h=h.add(ae));const ye=e.ds(X);ye.setReadTime(e.As(X.metadata.readTime)),_=_.insert(ae,ye)}const R=c.cs.newChangeBuffer({trackRemovals:!0}),k=yield zl(c,(ae=s,x(jo(Xt.fromString(`__bundle__/docs/${ae}`)))));var ae;return c.persistence.runTransaction("Apply bundle documents","readwrite",X=>sd(X,R,_).next(ae=>(R.apply(X),ae)).next(ae=>c.Ur.removeMatchingKeysForTargetId(X,k.targetId).next(()=>c.Ur.addMatchingKeys(X,h,k.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(X,ae.Ps,ae.Is)).next(()=>ae.Ps)))})).apply(this,arguments)}function Dt(a,e){return tn.apply(this,arguments)}function tn(){return(tn=(0,Ie.A)(function*(a,e,r=mn()){const s=yield zl(a,x(cl(e.bundledQuery))),c=Lt(a);return c.persistence.runTransaction("Save named query","readwrite",h=>{const _=sr(e.readTime);if(s.snapshotVersion.compareTo(_)>=0)return c.Gr.saveNamedQuery(h,e);const R=s.withResumeToken(br.EMPTY_BYTE_STRING,_);return c.os=c.os.insert(R.targetId,R),c.Ur.updateTargetData(h,R).next(()=>c.Ur.removeMatchingKeysForTargetId(h,s.targetId)).next(()=>c.Ur.addMatchingKeys(h,r,s.targetId)).next(()=>c.Gr.saveNamedQuery(h,e))})})).apply(this,arguments)}function gn(a,e){return`firestore_clients_${a}_${e}`}function An(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function zr(a,e){return`firestore_targets_${a}_${e}`}class Go{constructor(e,r,s,c){this.user=e,this.batchId=r,this.state=s,this.error=c}static Rs(e,r,s){const c=JSON.parse(s);let h,_="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return _&&c.error&&(_="string"==typeof c.error.message&&"string"==typeof c.error.code,_&&(h=new Tt(c.error.code,c.error.message))),_?new Go(e,r,c.state,h):(qn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ts{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Rs(e,r){const s=JSON.parse(r);let c,h="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(c=new Tt(s.error.code,s.error.message))),h?new Ts(e,s.state,c):(qn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vs{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const s=JSON.parse(r);let c="object"==typeof s&&s.activeTargetIds instanceof Array,h=Ns();for(let _=0;c&&_<s.activeTargetIds.length;++_)c=Ta(s.activeTargetIds[_]),h=h.add(s.activeTargetIds[_]);return c?new Vs(e,h):(qn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class As{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new As(r.clientId,r.onlineState):(qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ka{constructor(){this.activeTargetIds=Ns()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vl{constructor(e,r,s,c,h){this.window=e,this.ui=r,this.persistenceKey=s,this.ps=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Wn(it),this.started=!1,this.bs=[];const _=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.Ds=gn(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ka),this.Cs=new RegExp(`^firestore_clients_${_}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${_}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${_}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.A)(function*(){const r=yield e.syncEngine.Qi();for(const c of r){if(c===e.ps)continue;const h=e.getItem(gn(e.persistenceKey,c));if(h){const _=Vs.Rs(c,h);_&&(e.Ss=e.Ss.insert(_.clientId,_))}}e.Ns();const s=e.storage.getItem(e.xs);if(s){const c=e.Ls(s);c&&e.Bs(c)}for(const c of e.bs)e.ws(c);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((s,c)=>{c.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,s){this.qs(e,r,s),this.Qs(e)}addLocalQueryTarget(e,r=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const c=this.storage.getItem(zr(this.persistenceKey,e));if(c){const h=Ts.Rs(e,c);h&&(s=h.state)}}return r&&this.Ks.fs(e),this.Ns(),s}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zr(this.persistenceKey,e))}updateQueryState(e,r,s){this.$s(e,r,s)}handleUserChange(e,r,s){r.forEach(c=>{this.Qs(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return rt("SharedClientState","READ",e,r),r}setItem(e,r){rt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){rt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var r=this;const s=e;if(s.storageArea===this.storage){if(rt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ds)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,Ie.A)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const c=r.Gs(s.key);return r.zs(c,null)}{const c=r.js(s.key,s.newValue);if(c)return r.zs(c.clientId,c)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const c=r.Hs(s.key,s.newValue);if(c)return r.Js(c)}}else if(r.Ms.test(s.key)){if(null!==s.newValue){const c=r.Ys(s.key,s.newValue);if(c)return r.Zs(c)}}else if(s.key===r.xs){if(null!==s.newValue){const c=r.Ls(s.newValue);if(c)return r.Bs(c)}}else if(s.key===r.vs){const c=function(_){let R=gi.oe;if(null!=_)try{const k=JSON.parse(_);Zt("number"==typeof k),R=k}catch(k){qn("SharedClientState","Failed to read sequence number from WebStorage",k)}return R}(s.newValue);c!==gi.oe&&r.sequenceNumberHandler(c)}else if(s.key===r.Os){const c=r.Xs(s.newValue);yield Promise.all(c.map(h=>r.syncEngine.eo(h)))}}else r.bs.push(s)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,s){const c=new Go(this.currentUser,e,r,s),h=An(this.persistenceKey,this.currentUser,e);this.setItem(h,c.Vs())}Qs(e){const r=An(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,r,s){const c=zr(this.persistenceKey,e),h=new Ts(e,r,s);this.setItem(c,h.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const s=this.Gs(e);return Vs.Rs(s,r)}Hs(e,r){const s=this.Fs.exec(e),c=Number(s[1]);return Go.Rs(new rr(void 0!==s[2]?s[2]:null),c,r)}Ys(e,r){const s=this.Ms.exec(e),c=Number(s[1]);return Ts.Rs(c,r)}Ls(e){return As.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var r=this;return(0,Ie.A)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.no(e.batchId,e.state,e.error);rt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const s=r?this.Ss.insert(e,r):this.Ss.remove(e),c=this.ks(this.Ss),h=this.ks(s),_=[],R=[];return h.forEach(k=>{c.has(k)||_.push(k)}),c.forEach(k=>{h.has(k)||R.push(k)}),this.syncEngine.io(_,R).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Ns();return e.forEach((s,c)=>{r=r.unionWith(c.activeTargetIds)}),r}}class Wl{constructor(){this.so=new Ka,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ka,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ap{_o(e){}shutdown(){}}class nf{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cu=null;function rf(){return null===Cu?Cu=268435456+Math.round(2147483648*Math.random()):Cu++,"0x"+Cu.toString(16)}const is={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gl{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const bo="WebChannelConnection";class sf extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${c}/databases/${h}`,this.Co="(default)"===this.databaseId.database?`project_id=${c}`:`project_id=${c}&database_id=${h}`}get Fo(){return!1}Mo(r,s,c,h,_){const R=rf(),k=this.xo(r,s.toUriEncodedString());rt("RestConnection",`Sending RPC '${r}' ${R}:`,k,c);const X={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(X,h,_),this.No(r,k,X,c).then(ae=>(rt("RestConnection",`Received RPC '${r}' ${R}: `,ae),ae),ae=>{throw Dn("RestConnection",`RPC '${r}' ${R} failed with error: `,ae,"url: ",k,"request:",c),ae})}Lo(r,s,c,h,_,R){return this.Mo(r,s,c,h,_)}Oo(r,s,c){r["X-Goog-Api-Client"]="gl-js/ fire/"+Mn,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((h,_)=>r[_]=h),c&&c.headers.forEach((h,_)=>r[_]=h)}xo(r,s){return`${this.Do}/v1/${s}:${is[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,c){const h=rf();return new Promise((_,R)=>{const k=new Sr;k.setWithCredentials(!0),k.listenOnce(ri.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case Si.NO_ERROR:const ae=k.getResponseJson();rt(bo,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(ae)),_(ae);break;case Si.TIMEOUT:rt(bo,`RPC '${e}' ${h} timed out`),R(new Tt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case Si.HTTP_ERROR:const ye=k.getStatus();if(rt(bo,`RPC '${e}' ${h} failed with status:`,ye,"response text:",k.getResponseText()),ye>0){let Oe=k.getResponseJson();Array.isArray(Oe)&&(Oe=Oe[0]);const ht=Oe?.error;if(ht&&ht.status&&ht.message){const Rt=function(Bt){const bn=Bt.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(bn)>=0?bn:lt.UNKNOWN}(ht.status);R(new Tt(Rt,ht.message))}else R(new Tt(lt.UNKNOWN,"Server responded with status "+k.getStatus()))}else R(new Tt(lt.UNAVAILABLE,"Connection failed."));break;default:Wt()}}finally{rt(bo,`RPC '${e}' ${h} completed.`)}});const X=JSON.stringify(c);rt(bo,`RPC '${e}' ${h} sending request:`,c),k.send(r,"POST",X,s,15)})}Bo(e,r,s){const c=rf(),h=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=Bn(),R=Zn(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},X=this.longPollingOptions.timeoutSeconds;void 0!==X&&(k.longPollingTimeout=Math.round(1e3*X)),this.useFetchStreams&&(k.useFetchStreams=!0),this.Oo(k.initMessageHeaders,r,s),k.encodeInitMessageHeaders=!0;const ae=h.join("");rt(bo,`Creating RPC '${e}' stream ${c}: ${ae}`,k);const ye=_.createWebChannel(ae,k);let Oe=!1,ht=!1;const Rt=new Gl({Io:Bt=>{ht?rt(bo,`Not sending because RPC '${e}' stream ${c} is closed:`,Bt):(Oe||(rt(bo,`Opening RPC '${e}' stream ${c} transport.`),ye.open(),Oe=!0),rt(bo,`RPC '${e}' stream ${c} sending:`,Bt),ye.send(Bt))},To:()=>ye.close()}),Kt=(Bt,bn,jn)=>{Bt.listen(bn,rn=>{try{jn(rn)}catch(Hn){setTimeout(()=>{throw Hn},0)}})};return Kt(ye,or.EventType.OPEN,()=>{ht||(rt(bo,`RPC '${e}' stream ${c} transport opened.`),Rt.yo())}),Kt(ye,or.EventType.CLOSE,()=>{ht||(ht=!0,rt(bo,`RPC '${e}' stream ${c} transport closed`),Rt.So())}),Kt(ye,or.EventType.ERROR,Bt=>{ht||(ht=!0,Dn(bo,`RPC '${e}' stream ${c} transport errored:`,Bt),Rt.So(new Tt(lt.UNAVAILABLE,"The operation could not be completed")))}),Kt(ye,or.EventType.MESSAGE,Bt=>{var bn;if(!ht){const jn=Bt.data[0];Zt(!!jn);const Hn=jn.error||(null===(bn=jn[0])||void 0===bn?void 0:bn.error);if(Hn){rt(bo,`RPC '${e}' stream ${c} received error:`,Hn);const Er=Hn.status;let ar=function(Be){const Ze=j[Be];if(void 0!==Ze)return P(Ze)}(Er),Ge=Hn.message;void 0===ar&&(ar=lt.INTERNAL,Ge="Unknown error status: "+Er+" with message "+Hn.message),ht=!0,Rt.So(new Tt(ar,Ge)),ye.close()}else rt(bo,`RPC '${e}' stream ${c} received:`,jn),Rt.bo(jn)}}),Kt(R,Cn.STAT_EVENT,Bt=>{Bt.stat===pi.PROXY?rt(bo,`RPC '${e}' stream ${c} detected buffering proxy`):Bt.stat===pi.NOPROXY&&rt(bo,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Rt.wo()},0),Rt}}function ho(){return typeof window<"u"?window:null}function mc(){return typeof document<"u"?document:null}function Du(a){return new zi(a,!0)}class ad{constructor(e,r,s=1e3,c=1.5,h=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=c,this.Qo=h,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),c=Math.max(0,r-s);c>0&&rt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,c,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class cp{constructor(e,r,s,c,h,_,R,k){this.ui=e,this.Ho=s,this.Jo=c,this.connection=h,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=R,this.listener=k,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ad(e,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,Ie.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,Ie.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,r){var s=this;return(0,Ie.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==e?s.t_.reset():r&&r.code===lt.RESOURCE_EXHAUSTED?(qn(r.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):r&&r.code===lt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.mo(r)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Yo===r&&this.P_(s,c)},s=>{e(()=>{const c=new Tt(lt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(c)})})}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(c=>{s(()=>this.I_(c))}),this.stream.onMessage(c=>{s(()=>1==++this.e_?this.E_(c):this.onNext(c))})}i_(){var e=this;this.state=5,this.t_.Go((0,Ie.A)(function*(){e.state=0,e.start()}))}I_(e){return rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $c extends cp{constructor(e,r,s,c,h,_){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,c,_),this.serializer=h}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=function dc(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:Wt(),c=e.targetChange.targetIds||[],h=function(X,ae){return X.useProto3Json?(Zt(void 0===ae||"string"==typeof ae),br.fromBase64String(ae||"")):(Zt(void 0===ae||ae instanceof Buffer||ae instanceof Uint8Array),br.fromUint8Array(ae||new Uint8Array))}(a,e.targetChange.resumeToken),_=e.targetChange.cause,R=_&&function(X){const ae=void 0===X.code?lt.UNKNOWN:P(X.code);return new Tt(ae,X.message||"")}(_);r=new Ne(s,c,h,R||null)}else if("documentChange"in e){const s=e.documentChange,c=Tn(a,s.document.name),h=sr(s.document.updateTime),_=s.document.createTime?sr(s.document.createTime):$t.min(),R=new Ot({mapValue:{fields:s.document.fields}}),k=hn.newFoundDocument(c,h,_,R);r=new he(s.targetIds||[],s.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const s=e.documentDelete,c=Tn(a,s.document),h=s.readTime?sr(s.readTime):$t.min(),_=hn.newNoDocument(c,h);r=new he([],s.removedTargetIds||[],_.key,_)}else if("documentRemove"in e){const s=e.documentRemove,c=Tn(a,s.document);r=new he([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Wt();{const s=e.filter,{count:c=0,unchangedNames:h}=s,_=new uc(c,h);r=new Ue(s.targetId,_)}}var X;return r}(this.serializer,e),s=function(h){if(!("targetChange"in h))return $t.min();const _=h.targetChange;return _.targetIds&&_.targetIds.length?$t.min():_.readTime?sr(_.readTime):$t.min()}(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=Ci(this.serializer),r.addTarget=function(h,_){let R;const k=_.target;if(R=Ac(k)?{documents:Ws(h,k)}:{query:Ko(h,k)._t},R.targetId=_.targetId,_.resumeToken.approximateByteSize()>0){R.resumeToken=Zi(h,_.resumeToken);const X=ks(h,_.expectedCount);null!==X&&(R.expectedCount=X)}else if(_.snapshotVersion.compareTo($t.min())>0){R.readTime=uo(h,_.snapshotVersion.toTimestamp());const X=ks(h,_.expectedCount);null!==X&&(R.expectedCount=X)}return R}(this.serializer,e);const s=function rl(a,e){const r=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wt()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=Ci(this.serializer),r.removeTarget=e,this.a_(r)}}class lp extends cp{constructor(e,r,s,c,h,_){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,c,_),this.serializer=h}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=function ja(a,e){return a&&a.length>0?(Zt(void 0!==e),a.map(r=>function(c,h){let _=sr(c.updateTime?c.updateTime:h);return _.isEqual($t.min())&&(_=sr(h)),new Rc(_,c.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=sr(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=Ci(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>Za(this.serializer,s))};this.a_(r)}}class up extends class{}{constructor(e,r,s,c){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=c,this.y_=!1}w_(){if(this.y_)throw new Tt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,_])=>this.connection.Mo(e,xo(r,s),c,h,_)).catch(h=>{throw"FirebaseError"===h.name?(h.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Tt(lt.UNKNOWN,h.toString())})}Lo(e,r,s,c,h){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,R])=>this.connection.Lo(e,xo(r,s),c,_,R,h)).catch(_=>{throw"FirebaseError"===_.name?(_.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Tt(lt.UNKNOWN,_.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xm{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qn(r),this.D_=!1):rt("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class dp{constructor(e,r,s,c,h){var _=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=h,this.k_._o(R=>{s.enqueueAndForget((0,Ie.A)(function*(){var k;tc(_)&&(rt("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,Ie.A)(function*(ae){const ye=Lt(ae);ye.L_.add(4),yield gc(ye),ye.q_.set("Unknown"),ye.L_.delete(4),yield Su(ye)}),function X(ae){return k.apply(this,arguments)})(_))}))}),this.q_=new xm(s,c)}}function Su(a){return qo.apply(this,arguments)}function qo(){return(qo=(0,Ie.A)(function*(a){if(tc(a))for(const e of a.B_)yield e(!0)})).apply(this,arguments)}function gc(a){return ql.apply(this,arguments)}function ql(){return(ql=(0,Ie.A)(function*(a){for(const e of a.B_)yield e(!1)})).apply(this,arguments)}function nh(a,e){const r=Lt(a);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),rh(r)?cd(r):Jl(r).r_()&&Ql(r,e))}function Eo(a,e){const r=Lt(a),s=Jl(r);r.N_.delete(e),s.r_()&&af(r,e),0===r.N_.size&&(s.r_()?s.o_():tc(r)&&r.q_.set("Unknown"))}function Ql(a,e){if(a.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Jl(a).A_(e)}function af(a,e){a.Q_.xe(e),Jl(a).R_(e)}function cd(a){a.Q_=new ln({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.N_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),Jl(a).start(),a.q_.v_()}function rh(a){return tc(a)&&!Jl(a).n_()&&a.N_.size>0}function tc(a){return 0===Lt(a).L_.size}function Xl(a){a.Q_=void 0}function ih(a){return sh.apply(this,arguments)}function sh(){return(sh=(0,Ie.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function cf(a){return b.apply(this,arguments)}function b(){return(b=(0,Ie.A)(function*(a){a.N_.forEach((e,r)=>{Ql(a,e)})})).apply(this,arguments)}function u(a,e){return f.apply(this,arguments)}function f(){return(f=(0,Ie.A)(function*(a,e){Xl(a),rh(a)?(a.q_.M_(e),cd(a)):a.q_.set("Unknown")})).apply(this,arguments)}function T(a,e,r){return H.apply(this,arguments)}function H(){return H=(0,Ie.A)(function*(a,e,r){if(a.q_.set("Online"),e instanceof Ne&&2===e.state&&e.cause)try{yield(s=(0,Ie.A)(function*(h,_){const R=_.cause;for(const k of _.targetIds)h.N_.has(k)&&(yield h.remoteSyncer.rejectListen(k,R),h.N_.delete(k),h.Q_.removeTarget(k))}),function c(h,_){return s.apply(this,arguments)})(a,e)}catch(s){rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield oe(a,s)}else if(e instanceof he?a.Q_.Ke(e):e instanceof Ue?a.Q_.He(e):a.Q_.We(e),!r.isEqual($t.min()))try{const s=yield Au(a.localStore);r.compareTo(s)>=0&&(yield function(h,_){const R=h.Q_.rt(_);return R.targetChanges.forEach((k,X)=>{if(k.resumeToken.approximateByteSize()>0){const ae=h.N_.get(X);ae&&h.N_.set(X,ae.withResumeToken(k.resumeToken,_))}}),R.targetMismatches.forEach((k,X)=>{const ae=h.N_.get(k);if(!ae)return;h.N_.set(k,ae.withResumeToken(br.EMPTY_BYTE_STRING,ae.snapshotVersion)),af(h,k);const ye=new Oo(ae.target,k,X,ae.sequenceNumber);Ql(h,ye)}),h.remoteSyncer.applyRemoteEvent(R)}(a,r))}catch(s){rt("RemoteStore","Failed to raise snapshot:",s),yield oe(a,s)}var s}),H.apply(this,arguments)}function oe(a,e,r){return xe.apply(this,arguments)}function xe(){return(xe=(0,Ie.A)(function*(a,e,r){if(!Kr(e))throw e;a.L_.add(1),yield gc(a),a.q_.set("Offline"),r||(r=()=>Au(a.localStore)),a.asyncQueue.enqueueRetryable((0,Ie.A)(function*(){rt("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield Su(a)}))})).apply(this,arguments)}function We(a,e){return e().catch(r=>oe(a,r,e))}function bt(a){return nn.apply(this,arguments)}function nn(){return(nn=(0,Ie.A)(function*(a){const e=Lt(a),r=zc(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Vn(e);)try{const c=yield od(e.localStore,s);if(null===c){0===e.O_.length&&r.o_();break}s=c.batchId,un(e,c)}catch(c){yield oe(e,c)}ni(e)&&Qo(e)})).apply(this,arguments)}function Vn(a){return tc(a)&&a.O_.length<10}function un(a,e){a.O_.push(e);const r=zc(a);r.r_()&&r.V_&&r.m_(e.mutations)}function ni(a){return tc(a)&&!zc(a).n_()&&a.O_.length>0}function Qo(a){zc(a).start()}function Yl(a){return ba.apply(this,arguments)}function ba(){return(ba=(0,Ie.A)(function*(a){zc(a).p_()})).apply(this,arguments)}function oh(a){return ld.apply(this,arguments)}function ld(){return(ld=(0,Ie.A)(function*(a){const e=zc(a);for(const r of a.O_)e.m_(r.mutations)})).apply(this,arguments)}function hp(a,e,r){return ah.apply(this,arguments)}function ah(){return(ah=(0,Ie.A)(function*(a,e,r){const s=a.O_.shift(),c=So.from(s,e,r);yield We(a,()=>a.remoteSyncer.applySuccessfulWrite(c)),yield bt(a)})).apply(this,arguments)}function ud(a,e){return ch.apply(this,arguments)}function ch(){return ch=(0,Ie.A)(function*(a,e){var r;e&&zc(a).V_&&(yield(r=(0,Ie.A)(function*(c,h){if(w(R=h.code)&&R!==lt.ABORTED){const _=c.O_.shift();zc(c).s_(),yield We(c,()=>c.remoteSyncer.rejectFailedWrite(_.batchId,h)),yield bt(c)}var R}),function s(c,h){return r.apply(this,arguments)})(a,e)),ni(a)&&Qo(a)}),ch.apply(this,arguments)}function dd(a,e){return hd.apply(this,arguments)}function hd(){return(hd=(0,Ie.A)(function*(a,e){const r=Lt(a);r.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const s=tc(r);r.L_.add(3),yield gc(r),s&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),yield Su(r)})).apply(this,arguments)}function lh(a,e){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,Ie.A)(function*(a,e){const r=Lt(a);e?(r.L_.delete(2),yield Su(r)):e||(r.L_.add(2),yield gc(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Jl(a){return a.K_||(a.K_=function(r,s,c){const h=Lt(r);return h.w_(),new $c(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(a.datastore,a.asyncQueue,{Eo:ih.bind(null,a),Ro:cf.bind(null,a),mo:u.bind(null,a),d_:T.bind(null,a)}),a.B_.push(function(){var e=(0,Ie.A)(function*(r){r?(a.K_.s_(),rh(a)?cd(a):a.q_.set("Unknown")):(yield a.K_.stop(),Xl(a))});return function(r){return e.apply(this,arguments)}}())),a.K_}function zc(a){return a.U_||(a.U_=function(r,s,c){const h=Lt(r);return h.w_(),new lp(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Yl.bind(null,a),mo:ud.bind(null,a),f_:oh.bind(null,a),g_:hp.bind(null,a)}),a.B_.push(function(){var e=(0,Ie.A)(function*(r){r?(a.U_.s_(),yield bt(a)):(yield a.U_.stop(),a.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return e.apply(this,arguments)}}())),a.U_}class fd{constructor(e,r,s,c,h){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=c,this.removalCallback=h,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(_=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,c,h){const _=Date.now()+s,R=new fd(e,r,_,c,h);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tt(lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pd(a,e){if(qn("AsyncQueue",`${e}: ${a}`),Kr(a))return new Tt(lt.UNAVAILABLE,`${e}: ${a}`);throw a}class Ru{constructor(e){this.comparator=e?(r,s)=>e(r,s)||Ut.comparator(r.key,s.key):(r,s)=>Ut.comparator(r.key,s.key),this.keyedMap=$i(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new Ru(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ru)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const c=r.getNext().key,h=s.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new Ru;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class lf{constructor(){this.W_=new Wn(Ut.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?0!==e.type&&3===s.type?this.W_=this.W_.insert(r,e):3===e.type&&1!==s.type?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.W_=this.W_.remove(r):1===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Wt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,s)=>{e.push(s)}),e}}class md{constructor(e,r,s,c,h,_,R,k,X){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=h,this.fromCache=_,this.syncStateChanged=R,this.excludesMetadataChanges=k,this.hasCachedResults=X}static fromInitialDocuments(e,r,s,c,h){const _=[];return r.forEach(R=>{_.push({type:0,doc:R})}),new md(e,r,Ru.emptySet(r),_,s,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ft(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let c=0;c<r.length;c++)if(r[c].type!==s[c].type||!r[c].doc.isEqual(s[c].doc))return!1;return!0}}class Mm{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uf{constructor(){this.queries=f_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,s){const c=Lt(r),h=c.queries;c.queries=f_(),h.forEach((_,R)=>{for(const k of R.j_)k.onError(s)})}(this,new Tt(lt.ABORTED,"Firestore shutting down"))}}function f_(){return new $r(a=>Ct(a),ft)}function fp(a,e){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,Ie.A)(function*(a,e){const r=Lt(a);let s=3;const c=e.query;let h=r.queries.get(c);h?!h.H_()&&e.J_()&&(s=2):(h=new Mm,s=e.J_()?0:1);try{switch(s){case 0:h.z_=yield r.onListen(c,!0);break;case 1:h.z_=yield r.onListen(c,!1);break;case 2:yield r.onFirstRemoteStoreListen(c)}}catch(_){const R=pd(_,`Initialization of query '${cn(e.query)}' failed`);return void e.onError(R)}r.queries.set(c,h),h.j_.push(e),e.Z_(r.onlineState),h.z_&&e.X_(h.z_)&&uh(r)})).apply(this,arguments)}function Om(a,e){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,Ie.A)(function*(a,e){const r=Lt(a),s=e.query;let c=3;const h=r.queries.get(s);if(h){const _=h.j_.indexOf(e);_>=0&&(h.j_.splice(_,1),0===h.j_.length?c=e.J_()?0:1:!h.H_()&&e.J_()&&(c=2))}switch(c){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function p_(a,e){const r=Lt(a);let s=!1;for(const c of e){const _=r.queries.get(c.query);if(_){for(const R of _.j_)R.X_(c)&&(s=!0);_.z_=c}}s&&uh(r)}function m_(a,e,r){const s=Lt(a),c=s.queries.get(e);if(c)for(const h of c.j_)h.onError(r);s.queries.delete(e)}function uh(a){a.Y_.forEach(e=>{e.next()})}var df,gd;(gd=df||(df={})).ea="default",gd.Cache="cache";class km{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new md(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==df.Cache}}class Sv{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}class Rv{constructor(e){this.serializer=e}Es(e){return Tn(this.serializer,e)}ds(e){return e.metadata.exists?Po(this.serializer,e.document,!1):hn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return sr(e)}}class xv{constructor(e,r,s){this.ca=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pp(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const s=Xt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,s=new Rv(this.serializer);for(const c of e)if(c.metadata.queries){const h=s.Es(c.metadata.name);for(const _ of c.metadata.queries){const R=(r.get(_)||mn()).add(h);r.set(_,R)}}return r}complete(){var e=this;return(0,Ie.A)(function*(){const r=yield function le(a,e,r,s){return Fe.apply(this,arguments)}(e.localStore,new Rv(e.serializer),e.documents,e.ca.id),s=e.ha(e.documents);for(const c of e.queries)yield Dt(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:r}})()}}function pp(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class g_{constructor(e){this.key=e}}class _d{constructor(e){this.key=e}}class hf{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=mn(),this.mutatedKeys=mn(),this.Aa=Qr(e),this.Ra=new Ru(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new lf,c=r?r.Ra:this.Ra;let h=r?r.mutatedKeys:this.mutatedKeys,_=c,R=!1;const k="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,X="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ae,ye)=>{const Oe=c.get(ae),ht=Hr(this.query,ye)?ye:null,Rt=!!Oe&&this.mutatedKeys.has(Oe.key),Kt=!!ht&&(ht.hasLocalMutations||this.mutatedKeys.has(ht.key)&&ht.hasCommittedMutations);let Bt=!1;Oe&&ht?Oe.data.isEqual(ht.data)?Rt!==Kt&&(s.track({type:3,doc:ht}),Bt=!0):this.ga(Oe,ht)||(s.track({type:2,doc:ht}),Bt=!0,(k&&this.Aa(ht,k)>0||X&&this.Aa(ht,X)<0)&&(R=!0)):!Oe&&ht?(s.track({type:0,doc:ht}),Bt=!0):Oe&&!ht&&(s.track({type:1,doc:Oe}),Bt=!0,(k||X)&&(R=!0)),Bt&&(ht?(_=_.add(ht),h=Kt?h.add(ae):h.delete(ae)):(_=_.delete(ae),h=h.delete(ae)))}),null!==this.query.limit)for(;_.size>this.query.limit;){const ae="F"===this.query.limitType?_.last():_.first();_=_.delete(ae.key),h=h.delete(ae.key),s.track({type:1,doc:ae})}return{Ra:_,fa:s,ns:R,mutatedKeys:h}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,c){const h=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const _=e.fa.G_();_.sort((ae,ye)=>function(ht,Rt){const Kt=Bt=>{switch(Bt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wt()}};return Kt(ht)-Kt(Rt)}(ae.type,ye.type)||this.Aa(ae.doc,ye.doc)),this.pa(s),c=null!=c&&c;const R=r&&!c?this.ya():[],k=0===this.da.size&&this.current&&!c?1:0,X=k!==this.Ea;return this.Ea=k,0!==_.length||X?{snapshot:new md(this.query,e.Ra,h,_,e.mutatedKeys,0===k,X,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:R}:{wa:R}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=mn(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return e.forEach(s=>{this.da.has(s)||r.push(new _d(s))}),this.da.forEach(s=>{e.has(s)||r.push(new g_(s))}),r}ba(e){this.Ta=e.Ts,this.da=mn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return md.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Fm{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class __{constructor(e){this.key=e,this.va=!1}}class y_{constructor(e,r,s,c,h,_){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=_,this.Ca={},this.Fa=new $r(R=>Ct(R),ft),this.Ma=new Map,this.xa=new Set,this.Oa=new Wn(Ut.comparator),this.Na=new Map,this.La=new bu,this.Ba={},this.ka=new Map,this.qa=ya.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function v_(a,e){return eu.apply(this,arguments)}function eu(){return(eu=(0,Ie.A)(function*(a,e,r=!0){const s=Ym(a);let c;const h=s.Fa.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.Da()):c=yield b_(s,e,r,!0),c})).apply(this,arguments)}function Mv(a,e){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,Ie.A)(function*(a,e){const r=Ym(a);yield b_(r,e,!0,!1)})).apply(this,arguments)}function b_(a,e,r,s){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,Ie.A)(function*(a,e,r,s){const c=yield zl(a.localStore,x(e)),h=c.targetId,_=a.sharedClientState.addLocalQueryTarget(h,r);let R;return s&&(R=yield Um(a,e,h,"current"===_,c.resumeToken)),a.isPrimaryClient&&r&&nh(a.remoteStore,c),R})).apply(this,arguments)}function Um(a,e,r,s,c){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,Ie.A)(function*(a,e,r,s,c){a.Ka=(ye,Oe,ht)=>{return(Rt=(0,Ie.A)(function*(Bt,bn,jn,rn){let Hn=bn.view.ma(jn);Hn.ns&&(Hn=yield C(Bt.localStore,bn.query,!1).then(({documents:Se})=>bn.view.ma(Se,Hn)));const Er=rn&&rn.targetChanges.get(bn.targetId),ar=rn&&null!=rn.targetMismatches.get(bn.targetId),Ge=bn.view.applyChanges(Hn,Bt.isPrimaryClient,Er,ar);return pf(Bt,bn.targetId,Ge.wa),Ge.snapshot}),function Kt(Bt,bn,jn,rn){return Rt.apply(this,arguments)})(a,ye,Oe,ht);var Rt};const h=yield C(a.localStore,e,!0),_=new hf(e,h.Ts),R=_.ma(h.documents),k=ee.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,c),X=_.applyChanges(R,a.isPrimaryClient,k);pf(a,r,X.wa);const ae=new Fm(e,r,_);return a.Fa.set(e,ae),a.Ma.has(r)?a.Ma.get(r).push(e):a.Ma.set(r,[e]),X.snapshot}),Kc.apply(this,arguments)}function dh(a,e,r){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,Ie.A)(function*(a,e,r){const s=Lt(a),c=s.Fa.get(e),h=s.Ma.get(c.targetId);if(h.length>1)return s.Ma.set(c.targetId,h.filter(_=>!ft(_,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||(yield Kl(s.localStore,c.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(c.targetId),r&&Eo(s.remoteStore,c.targetId),ff(s,c.targetId)}).catch(hr))):(ff(s,c.targetId),yield Kl(s.localStore,c.targetId,!0))})).apply(this,arguments)}function Pv(a,e){return jm.apply(this,arguments)}function jm(){return(jm=(0,Ie.A)(function*(a,e){const r=Lt(a),s=r.Fa.get(e),c=r.Ma.get(s.targetId);r.isPrimaryClient&&1===c.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Eo(r.remoteStore,s.targetId))})).apply(this,arguments)}function Hm(){return(Hm=(0,Ie.A)(function*(a,e,r){const s=D_(a);try{const c=yield function(_,R){const k=Lt(_),X=Gt.now(),ae=R.reduce((ht,Rt)=>ht.add(Rt.key),mn());let ye,Oe;return k.persistence.runTransaction("Locally write mutations","readwrite",ht=>{let Rt=Lr(),Kt=mn();return k.cs.getEntries(ht,ae).next(Bt=>{Rt=Bt,Rt.forEach((bn,jn)=>{jn.isValidDocument()||(Kt=Kt.add(bn))})}).next(()=>k.localDocuments.getOverlayedDocuments(ht,Rt)).next(Bt=>{ye=Bt;const bn=[];for(const jn of R){const rn=Bd(jn,ye.get(jn.key).overlayedDocument);null!=rn&&bn.push(new Zs(jn.key,rn,sn(rn.value.mapValue),Ai.exists(!0)))}return k.mutationQueue.addMutationBatch(ht,X,bn,R)}).next(Bt=>{Oe=Bt;const bn=Bt.applyToLocalDocumentSet(ye,Kt);return k.documentOverlayCache.saveOverlays(ht,Bt.batchId,bn)})}).then(()=>({batchId:Oe.batchId,changes:ea(ye)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(_,R,k){let X=_.Ba[_.currentUser.toKey()];X||(X=new Wn(it)),X=X.insert(R,k),_.Ba[_.currentUser.toKey()]=X}(s,c.batchId,r),yield xu(s,c.changes),yield bt(s.remoteStore)}catch(c){const h=pd(c,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function E_(a,e){return mp.apply(this,arguments)}function mp(){return(mp=(0,Ie.A)(function*(a,e){const r=Lt(a);try{const s=yield function tf(a,e){const r=Lt(a),s=e.snapshotVersion;let c=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const _=r.cs.newChangeBuffer({trackRemovals:!0});c=r.os;const R=[];e.targetChanges.forEach((ae,ye)=>{const Oe=c.get(ye);if(!Oe)return;R.push(r.Ur.removeMatchingKeys(h,ae.removedDocuments,ye).next(()=>r.Ur.addMatchingKeys(h,ae.addedDocuments,ye)));let ht=Oe.withSequenceNumber(h.currentSequenceNumber);var Kt,Bt,bn;null!==e.targetMismatches.get(ye)?ht=ht.withResumeToken(br.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):ae.resumeToken.approximateByteSize()>0&&(ht=ht.withResumeToken(ae.resumeToken,s)),c=c.insert(ye,ht),Bt=ht,bn=ae,(0===(Kt=Oe).resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-Kt.snapshotVersion.toMicroseconds()>=3e8||bn.addedDocuments.size+bn.modifiedDocuments.size+bn.removedDocuments.size>0)&&R.push(r.Ur.updateTargetData(h,ht))});let k=Lr(),X=mn();if(e.documentUpdates.forEach(ae=>{e.resolvedLimboDocuments.has(ae)&&R.push(r.persistence.referenceDelegate.updateLimboDocument(h,ae))}),R.push(sd(h,_,e.documentUpdates).next(ae=>{k=ae.Ps,X=ae.Is})),!s.isEqual($t.min())){const ae=r.Ur.getLastRemoteSnapshotVersion(h).next(ye=>r.Ur.setTargetsMetadata(h,h.currentSequenceNumber,s));R.push(ae)}return ze.waitFor(R).next(()=>_.apply(h)).next(()=>r.localDocuments.getLocalViewOfDocuments(h,k,X)).next(()=>k)}).then(h=>(r.os=c,h))}(r.localStore,e);e.targetChanges.forEach((c,h)=>{const _=r.Na.get(h);_&&(Zt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?_.va=!0:c.modifiedDocuments.size>0?Zt(_.va):c.removedDocuments.size>0&&(Zt(_.va),_.va=!1))}),yield xu(r,s,e)}catch(s){yield hr(s)}})).apply(this,arguments)}function I_(a,e,r){const s=Lt(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const c=[];s.Fa.forEach((h,_)=>{const R=_.view.Z_(e);R.snapshot&&c.push(R.snapshot)}),function(_,R){const k=Lt(_);k.onlineState=R;let X=!1;k.queries.forEach((ae,ye)=>{for(const Oe of ye.j_)Oe.Z_(R)&&(X=!0)}),X&&uh(k)}(s.eventManager,e),c.length&&s.Ca.d_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Nv(a,e,r){return $m.apply(this,arguments)}function $m(){return($m=(0,Ie.A)(function*(a,e,r){const s=Lt(a);s.sharedClientState.updateQueryState(e,"rejected",r);const c=s.Na.get(e),h=c&&c.key;if(h){let _=new Wn(Ut.comparator);_=_.insert(h,hn.newNoDocument(h,$t.min()));const R=mn().add(h),k=new V($t.min(),new Map,new Wn(it),_,R);yield E_(s,k),s.Oa=s.Oa.remove(h),s.Na.delete(e),A_(s)}else yield Kl(s.localStore,e,!1).then(()=>ff(s,e,r)).catch(hr)})).apply(this,arguments)}function kv(a,e){return hh.apply(this,arguments)}function hh(){return(hh=(0,Ie.A)(function*(a,e){const r=Lt(a),s=e.batch.batchId;try{const c=yield function th(a,e){const r=Lt(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),h=r.cs.newChangeBuffer({trackRemovals:!0});return function(R,k,X,ae){const ye=X.batch,Oe=ye.keys();let ht=ze.resolve();return Oe.forEach(Rt=>{ht=ht.next(()=>ae.getEntry(k,Rt)).next(Kt=>{const Bt=X.docVersions.get(Rt);Zt(null!==Bt),Kt.version.compareTo(Bt)<0&&(ye.applyToRemoteDocument(Kt,X),Kt.isValidDocument()&&(Kt.setReadTime(X.commitVersion),ae.addEntry(Kt)))})}),ht.next(()=>R.mutationQueue.removeMutationBatch(k,ye))}(r,s,e,h).next(()=>h.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(R){let k=mn();for(let X=0;X<R.mutationResults.length;++X)R.mutationResults[X].transformResults.length>0&&(k=k.add(R.batch.mutations[X].key));return k}(e))).next(()=>r.localDocuments.getDocuments(s,c))})}(r.localStore,e);T_(r,s,null),_p(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield xu(r,c)}catch(c){yield hr(c)}})).apply(this,arguments)}function tu(a,e,r){return yd.apply(this,arguments)}function yd(){return(yd=(0,Ie.A)(function*(a,e,r){const s=Lt(a);try{const c=yield function(_,R){const k=Lt(_);return k.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let ae;return k.mutationQueue.lookupMutationBatch(X,R).next(ye=>(Zt(null!==ye),ae=ye.keys(),k.mutationQueue.removeMutationBatch(X,ye))).next(()=>k.mutationQueue.performConsistencyCheck(X)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(X,ae,R)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,ae)).next(()=>k.localDocuments.getDocuments(X,ae))})}(s.localStore,e);T_(s,e,r),_p(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield xu(s,c)}catch(c){yield hr(c)}})).apply(this,arguments)}function gp(){return(gp=(0,Ie.A)(function*(a,e){const r=Lt(a);tc(r.remoteStore)||rt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(_){const R=Lt(_);return R.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>R.mutationQueue.getHighestUnacknowledgedBatchId(k))}(r.localStore);if(-1===s)return void e.resolve();const c=r.ka.get(s)||[];c.push(e),r.ka.set(s,c)}catch(s){const c=pd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}})).apply(this,arguments)}function _p(a,e){(a.ka.get(e)||[]).forEach(r=>{r.resolve()}),a.ka.delete(e)}function T_(a,e,r){const s=Lt(a);let c=s.Ba[s.currentUser.toKey()];if(c){const h=c.get(e);h&&(r?h.reject(r):h.resolve(),c=c.remove(e)),s.Ba[s.currentUser.toKey()]=c}}function ff(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Ma.get(e))a.Fa.delete(s),r&&a.Ca.$a(s,r);a.Ma.delete(e),a.isPrimaryClient&&a.La.gr(e).forEach(s=>{a.La.containsKey(s)||Fv(a,s)})}function Fv(a,e){a.xa.delete(e.path.canonicalString());const r=a.Oa.get(e);null!==r&&(Eo(a.remoteStore,r),a.Oa=a.Oa.remove(e),a.Na.delete(r),A_(a))}function pf(a,e,r){for(const s of r)s instanceof g_?(a.La.addReference(s.key,e),zm(a,s)):s instanceof _d?(rt("SyncEngine","Document no longer in limbo: "+s.key),a.La.removeReference(s.key,e),a.La.containsKey(s.key)||Fv(a,s.key)):Wt()}function zm(a,e){const r=e.key,s=r.path.canonicalString();a.Oa.get(r)||a.xa.has(s)||(rt("SyncEngine","New document in limbo: "+r),a.xa.add(s),A_(a))}function A_(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const e=a.xa.values().next().value;a.xa.delete(e);const r=new Ut(Xt.fromString(e)),s=a.qa.next();a.Na.set(s,new __(r)),a.Oa=a.Oa.insert(r,s),nh(a.remoteStore,new Oo(x(jo(r.path)),s,"TargetPurposeLimboResolution",gi.oe))}}function xu(a,e,r){return yp.apply(this,arguments)}function yp(){return yp=(0,Ie.A)(function*(a,e,r){const s=Lt(a),c=[],h=[],_=[];var R;s.Fa.isEmpty()||(s.Fa.forEach((R,k)=>{_.push(s.Ka(k,e,r).then(X=>{var ae;if((X||r)&&s.isPrimaryClient){const ye=X?!X.fromCache:null===(ae=r?.targetChanges.get(k.targetId))||void 0===ae?void 0:ae.current;s.sharedClientState.updateQueryState(k.targetId,ye?"current":"not-current")}if(X){c.push(X);const ye=Hc.Wi(k.targetId,X);h.push(ye)}}))}),yield Promise.all(_),s.Ca.d_(c),yield(R=(0,Ie.A)(function*(X,ae){const ye=Lt(X);try{yield ye.persistence.runTransaction("notifyLocalViewChanges","readwrite",Oe=>ze.forEach(ae,ht=>ze.forEach(ht.$i,Rt=>ye.persistence.referenceDelegate.addReference(Oe,ht.targetId,Rt)).next(()=>ze.forEach(ht.Ui,Rt=>ye.persistence.referenceDelegate.removeReference(Oe,ht.targetId,Rt)))))}catch(Oe){if(!Kr(Oe))throw Oe;rt("LocalStore","Failed to update sequence numbers: "+Oe)}for(const Oe of ae){const ht=Oe.targetId;if(!Oe.fromCache){const Rt=ye.os.get(ht),Bt=Rt.withLastLimboFreeSnapshotVersion(Rt.snapshotVersion);ye.os=ye.os.insert(ht,Bt)}}}),function k(X,ae){return R.apply(this,arguments)})(s.localStore,h))}),yp.apply(this,arguments)}function Vv(a,e){return Km.apply(this,arguments)}function Km(){return(Km=(0,Ie.A)(function*(a,e){const r=Lt(a);if(!r.currentUser.isEqual(e)){rt("SyncEngine","User change. New user:",e.toKey());const s=yield Tu(r.localStore,e);r.currentUser=e,(h=r).ka.forEach(R=>{R.forEach(k=>{k.reject(new Tt(lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.ka.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield xu(r,s.hs)}var h})).apply(this,arguments)}function Lv(a,e){const r=Lt(a),s=r.Na.get(e);if(s&&s.va)return mn().add(s.key);{let c=mn();const h=r.Ma.get(e);if(!h)return c;for(const _ of h){const R=r.Fa.get(_);c=c.unionWith(R.view.Va)}return c}}function Uv(a,e){return vp.apply(this,arguments)}function vp(){return(vp=(0,Ie.A)(function*(a,e){const r=Lt(a),s=yield C(r.localStore,e.query,!0),c=e.view.ba(s);return r.isPrimaryClient&&pf(r,e.targetId,c.wa),c})).apply(this,arguments)}function bp(a,e){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,Ie.A)(function*(a,e){const r=Lt(a);return S(r.localStore,e).then(s=>xu(r,s))})).apply(this,arguments)}function Wm(a,e,r,s){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,Ie.A)(function*(a,e,r,s){const c=Lt(a),h=yield function(R,k){const X=Lt(R),ae=Lt(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",ye=>ae.Mn(ye,k).next(Oe=>Oe?X.localDocuments.getDocuments(ye,Oe):ze.resolve(null)))}(c.localStore,e);var k;null!==h?("pending"===r?yield bt(c.remoteStore):"acknowledged"===r||"rejected"===r?(T_(c,e,s||null),_p(c,e),k=e,Lt(Lt(c.localStore).mutationQueue).On(k)):Wt(),yield xu(c,h)):rt("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function qm(){return(qm=(0,Ie.A)(function*(a,e){const r=Lt(a);if(Ym(r),D_(r),!0===e&&!0!==r.Qa){const s=r.sharedClientState.getAllActiveQueryTargets(),c=yield C_(r,s.toArray());r.Qa=!0,yield lh(r.remoteStore,!0);for(const h of c)nh(r.remoteStore,h)}else if(!1===e&&!1!==r.Qa){const s=[];let c=Promise.resolve();r.Ma.forEach((h,_)=>{r.sharedClientState.isLocalQueryTarget(_)?s.push(_):c=c.then(()=>(ff(r,_),Kl(r.localStore,_,!0))),Eo(r.remoteStore,_)}),yield c,yield C_(r,s),function(_){const R=Lt(_);R.Na.forEach((k,X)=>{Eo(R.remoteStore,X)}),R.La.pr(),R.Na=new Map,R.Oa=new Wn(Ut.comparator)}(r),r.Qa=!1,yield lh(r.remoteStore,!1)}})).apply(this,arguments)}function C_(a,e,r){return mf.apply(this,arguments)}function mf(){return(mf=(0,Ie.A)(function*(a,e,r){const s=Lt(a),c=[],h=[];for(const _ of e){let R;const k=s.Ma.get(_);if(k&&0!==k.length){R=yield zl(s.localStore,x(k[0]));for(const X of k){const ae=s.Fa.get(X),ye=yield Uv(s,ae);ye.snapshot&&h.push(ye.snapshot)}}else{const X=yield y(s.localStore,_);R=yield zl(s.localStore,X),yield Um(s,Qm(X),_,!1,R.resumeToken)}c.push(R)}return s.Ca.d_(h),c})).apply(this,arguments)}function Qm(a){return el(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Bv(a){return r=Lt(a).localStore,Lt(Lt(r).persistence).Qi();var r}function jv(a,e,r,s){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,Ie.A)(function*(a,e,r,s){const c=Lt(a);if(c.Qa)return void rt("SyncEngine","Ignoring unexpected query state notification.");const h=c.Ma.get(e);if(h&&h.length>0)switch(r){case"current":case"not-current":{const _=yield S(c.localStore,ci(h[0])),R=V.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,br.EMPTY_BYTE_STRING);yield xu(c,_,R);break}case"rejected":yield Kl(c.localStore,e,!0),ff(c,e,s);break;default:Wt()}})).apply(this,arguments)}function Hv(a,e,r){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,Ie.A)(function*(a,e,r){const s=Ym(a);if(s.Qa){for(const c of e){if(s.Ma.has(c)&&s.sharedClientState.isActiveQueryTarget(c)){rt("SyncEngine","Adding an already active target "+c);continue}const h=yield y(s.localStore,c),_=yield zl(s.localStore,h);yield Um(s,Qm(h),_.targetId,!1,_.resumeToken),nh(s.remoteStore,_)}for(const c of r)s.Ma.has(c)&&(yield Kl(s.localStore,c,!1).then(()=>{Eo(s.remoteStore,c),ff(s,c)}).catch(hr))}})).apply(this,arguments)}function Ym(a){const e=Lt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=E_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nv.bind(null,e),e.Ca.d_=p_.bind(null,e.eventManager),e.Ca.$a=m_.bind(null,e.eventManager),e}function D_(a){const e=Lt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tu.bind(null,e),e}let bl=(()=>{class a{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(r){var s=this;return(0,Ie.A)(function*(){s.serializer=Du(r.databaseInfo.databaseId),s.sharedClientState=s.Wa(r),s.persistence=s.Ga(r),yield s.persistence.start(),s.localStore=s.za(r),s.gcScheduler=s.ja(r,s.localStore),s.indexBackfillerScheduler=s.Ha(r,s.localStore)})()}ja(r,s){return null}Ha(r,s){return null}za(r){return eh(this.persistence,new Jh,r.initialUser,this.serializer)}Ga(r){return new jc(Iu.Zr,this.serializer)}Wa(r){return new Wl}terminate(){var r=this;return(0,Ie.A)(function*(){var s,c;null===(s=r.gcScheduler)||void 0===s||s.stop(),null===(c=r.indexBackfillerScheduler)||void 0===c||c.stop(),r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}return a.provider={build:()=>new a},a})();class wp extends bl{constructor(e,r,s){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,Ie.A)(function*(){yield r().call(s,e),yield s.Ja.initialize(s,e),yield D_(s.Ja.syncEngine),yield bt(s.Ja.remoteStore),yield s.persistence.yi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return eh(this.persistence,new Jh,e.initialUser,this.serializer)}ja(e,r){return new pl(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ha(e,r){const s=new fo(r,this.persistence);return new Pa(e.asyncQueue,s)}Ga(e){const r=$l(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?fi.withCacheSize(this.cacheSizeBytes):fi.DEFAULT;return new _l(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,ho(),mc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Wl}}class Tp extends wp{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,Ie.A)(function*(){yield r().call(s,e);const c=s.Ja.syncEngine;s.sharedClientState instanceof vl&&(s.sharedClientState.syncEngine={no:Wm.bind(null,c),ro:jv.bind(null,c),io:Hv.bind(null,c),Qi:Bv.bind(null,c),eo:bp.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.yi(function(){var h=(0,Ie.A)(function*(_){yield function vd(a,e){return qm.apply(this,arguments)}(s.Ja.syncEngine,_),s.gcScheduler&&(_&&!s.gcScheduler.started?s.gcScheduler.start():_||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(_&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():_||s.indexBackfillerScheduler.stop())});return function(_){return h.apply(this,arguments)}}())})()}Wa(e){const r=ho();if(!vl.D(r))throw new Tt(lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=$l(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vl(r,e.asyncQueue,s,e.clientId,e.initialUser)}}let Mu=(()=>{class a{initialize(r,s){var c=this;return(0,Ie.A)(function*(){c.localStore||(c.localStore=r.localStore,c.sharedClientState=r.sharedClientState,c.datastore=c.createDatastore(s),c.remoteStore=c.createRemoteStore(s),c.eventManager=c.createEventManager(s),c.syncEngine=c.createSyncEngine(s,!r.synchronizeTabs),c.sharedClientState.onlineStateHandler=h=>I_(c.syncEngine,h,1),c.remoteStore.remoteSyncer.handleCredentialChange=Vv.bind(null,c.syncEngine),yield lh(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(r){return new uf}createDatastore(r){const s=Du(r.databaseInfo.databaseId),c=new sf(r.databaseInfo);return new up(r.authCredentials,r.appCheckCredentials,c,s)}createRemoteStore(r){return c=this.localStore,h=this.datastore,_=r.asyncQueue,R=s=>I_(this.syncEngine,s,0),k=nf.D()?new nf:new ap,new dp(c,h,_,R,k);var c,h,_,R,k}createSyncEngine(r,s){return function(h,_,R,k,X,ae,ye){const Oe=new y_(h,_,R,k,X,ae);return ye&&(Oe.Qa=!0),Oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,s)}terminate(){var r=this;return(0,Ie.A)(function*(){var s,c,h;yield(h=(0,Ie.A)(function*(R){const k=Lt(R);rt("RemoteStore","RemoteStore shutting down."),k.L_.add(5),yield gc(k),k.k_.shutdown(),k.q_.set("Unknown")}),function _(R){return h.apply(this,arguments)})(r.remoteStore),null===(s=r.datastore)||void 0===s||s.terminate(),null===(c=r.eventManager)||void 0===c||c.terminate()})()}}return a.provider={build:()=>new a},a})();function R_(a,e=10240){let r=0;return{read:()=>(0,Ie.A)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,Ie.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class _f{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}class x_{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Rr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.aa)}`))},s=>this.metadata.reject(s))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,Ie.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,Ie.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,Ie.A)(function*(){const r=yield e.nu();if(null===r)return null;const s=e.eu.decode(r),c=Number(s);isNaN(c)&&e.ru(`length string (${s}) is not valid number`);const h=yield e.iu(c);return new Sv(JSON.parse(h),r.length+c)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,Ie.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const r=e.su();r<0&&e.ru("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}iu(e){var r=this;return(0,Ie.A)(function*(){for(;r.buffer.length<e;)(yield r.ou())&&r.ru("Reached the end of bundle when more is expected.");const s=r.eu.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,Ie.A)(function*(){const r=yield e.Xa.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class Ap{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ie.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Tt(lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(c=(0,Ie.A)(function*(_,R){const k=Lt(_),X={documents:R.map(ht=>vn(k.serializer,ht))},ae=yield k.Lo("BatchGetDocuments",k.serializer.databaseId,Xt.emptyPath(),X,R.length),ye=new Map;ae.forEach(ht=>{const Rt=function Di(a,e){return"found"in e?function(s,c){Zt(!!c.found);const h=Tn(s,c.found.name),_=sr(c.found.updateTime),R=c.found.createTime?sr(c.found.createTime):$t.min(),k=new Ot({mapValue:{fields:c.found.fields}});return hn.newFoundDocument(h,_,R,k)}(a,e):"missing"in e?function(s,c){Zt(!!c.missing),Zt(!!c.readTime);const h=Tn(s,c.missing),_=sr(c.readTime);return hn.newNoDocument(h,_)}(a,e):Wt()}(k.serializer,ht);ye.set(Rt.key.toString(),Rt)});const Oe=[];return R.forEach(ht=>{const Rt=ye.get(ht.toString());Zt(!!Rt),Oe.push(Rt)}),Oe}),function h(_,R){return c.apply(this,arguments)})(r.datastore,e);var c;return s.forEach(c=>r.recordVersion(c)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new zo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,c)=>{const h=Ut.fromPath(c);e.mutations.push(new pr(h,e.precondition(h)))}),yield(s=(0,Ie.A)(function*(h,_){const R=Lt(h),k={writes:_.map(X=>Za(R.serializer,X))};yield R.Mo("Commit",R.serializer.databaseId,Xt.emptyPath(),k)}),function c(h,_){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Wt();r=$t.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new Tt(lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual($t.min())?Ai.exists(!1):Ai.updateTime(r):Ai.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($t.min()))throw new Tt(lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ai.updateTime(r)}return Ai.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DE{constructor(e,r,s,c,h){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=c,this.deferred=h,this._u=s.maxAttempts,this.t_=new ad(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,Ie.A)(function*(){const r=new Ap(e.datastore),s=e.cu(r);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(c)}).catch(h=>{e.lu(h)}))}).catch(c=>{e.lu(c)})}))}cu(e){try{const r=this.updateFunction(e);return!ro(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!w(r)}return!1}}class Zm{constructor(e,r,s,c,h){var _=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=c,this.user=rr.UNAUTHENTICATED,this.clientId=Re.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,function(){var R=(0,Ie.A)(function*(k){rt("FirestoreClient","Received user=",k.uid),yield _.authCredentialListener(k),_.user=k});return function(k){return R.apply(this,arguments)}}()),this.appCheckCredentials.start(s,R=>(rt("FirestoreClient","Received new app check token=",R),this.appCheckCredentialListener(R,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const c=pd(s,"Failed to shutdown persistence");r.reject(c)}})),r.promise}}function Jm(a,e){return yf.apply(this,arguments)}function yf(){return yf=(0,Ie.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var c=(0,Ie.A)(function*(h){s.isEqual(h)||(yield Tu(e.localStore,h),s=h)});return function(h){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),yf.apply(this,arguments)}function eg(a,e){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,Ie.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield nu(a);rt("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>dd(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,c)=>dd(e.remoteStore,c)),a._onlineComponents=e})).apply(this,arguments)}function nu(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,Ie.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jm(a,a._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(c=e).name?c.code===lt.FAILED_PRECONDITION||c.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw e;Dn("Error using user provided cache. Falling back to memory cache: "+e),yield Jm(a,new bl)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),yield Jm(a,new bl);var c;return a._offlineComponents})).apply(this,arguments)}function fh(a){return ph.apply(this,arguments)}function ph(){return(ph=(0,Ie.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),yield eg(a,a._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),yield eg(a,new Mu))),a._onlineComponents})).apply(this,arguments)}function M_(a){return nu(a).then(e=>e.persistence)}function Pu(a){return nu(a).then(e=>e.localStore)}function vf(a){return fh(a).then(e=>e.remoteStore)}function _c(a){return fh(a).then(e=>e.syncEngine)}function Ou(a){return ng.apply(this,arguments)}function ng(){return(ng=(0,Ie.A)(function*(a){const e=yield fh(a),r=e.eventManager;return r.onListen=v_.bind(null,e.syncEngine),r.onUnlisten=dh.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Mv.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Pv.bind(null,e.syncEngine),r})).apply(this,arguments)}function O_(a,e,r={}){const s=new Rr;return a.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return function(h,_,R,k,X){const ae=new _f({next:Oe=>{ae.Za(),_.enqueueAndForget(()=>Om(h,ye));const ht=Oe.docs.has(R);!ht&&Oe.fromCache?X.reject(new Tt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):ht&&Oe.fromCache&&k&&"server"===k.source?X.reject(new Tt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(Oe)},error:Oe=>X.reject(Oe)}),ye=new km(jo(R.path),ae,{includeMetadataChanges:!0,_a:!0});return fp(h,ye)}(yield Ou(a),a.asyncQueue,e,r,s)})),s.promise}function N_(a,e,r={}){const s=new Rr;return a.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return function(h,_,R,k,X){const ae=new _f({next:Oe=>{ae.Za(),_.enqueueAndForget(()=>Om(h,ye)),Oe.fromCache&&"server"===k.source?X.reject(new Tt(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(Oe)},error:Oe=>X.reject(Oe)}),ye=new km(R,ae,{includeMetadataChanges:!0,_a:!0});return fp(h,ye)}(yield Ou(a),a.asyncQueue,e,r,s)})),s.promise}function V_(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const L_=new Map;function U_(a,e,r){if(!r)throw new Tt(lt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Gv(a,e,r,s){if(!0===e&&!0===s)throw new Tt(lt.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function bf(a){if(!Ut.isDocumentKey(a))throw new Tt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function B_(a){if(Ut.isDocumentKey(a))throw new Tt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function gh(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":Wt()}function Xr(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Tt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=gh(a);throw new Tt(lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function Ed(a,e){if(e<=0)throw new Tt(lt.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class Dp{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Tt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=V_(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new Tt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new Tt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new Tt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,r,s,c){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dp(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new Fi;switch(s.type){case"firstParty":return new vt(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Tt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,Ie.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=L_.get(r);s&&(rt("ComponentProvider","Removing Datastore"),L_.delete(r),s.terminate())}(this),Promise.resolve()}}class Io{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Io(this.firestore,e,this._query)}}class Ki{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ki(this.firestore,e,this._key)}}class yc extends Io{constructor(e,r,s){super(e,r,jo(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ki(this.firestore,null,new Ut(e))}withConverter(e){return new yc(this.firestore,e,this._path)}}function Sp(a,e,...r){if(a=(0,dn.Ku)(a),U_("collection","path",e),a instanceof Id){const s=Xt.fromString(e,...r);return B_(s),new yc(a,null,s)}{if(!(a instanceof Ki||a instanceof yc))throw new Tt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Xt.fromString(e,...r));return B_(s),new yc(a.firestore,null,s)}}function sg(a,e,...r){if(a=(0,dn.Ku)(a),1===arguments.length&&(e=Re.newId()),U_("doc","path",e),a instanceof Id){const s=Xt.fromString(e,...r);return bf(s),new Ki(a,null,new Ut(s))}{if(!(a instanceof Ki||a instanceof yc))throw new Tt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Xt.fromString(e,...r));return bf(s),new Ki(a.firestore,a instanceof yc?a.converter:null,new Ut(s))}}function xp(a,e){return a=(0,dn.Ku)(a),e=(0,dn.Ku)(e),(a instanceof Ki||a instanceof yc)&&(e instanceof Ki||e instanceof yc)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function wd(a,e){return a=(0,dn.Ku)(a),e=(0,dn.Ku)(e),a instanceof Io&&e instanceof Io&&a.firestore===e.firestore&&ft(a._query,e._query)&&a.converter===e.converter}class j_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ad(this,"async_queue_retry"),this.Vu=()=>{const s=mc();s&&rt("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=mc();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=mc();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,Ie.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(r){if(!Kr(r))throw r;rt("AsyncQueue","Operation failed with retryable error: "+r)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(s=>{throw this.Eu=s,this.du=!1,qn("INTERNAL UNHANDLED ERROR: ",function(_){let R=_.message||"";return _.stack&&(R=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),R}(s)),s}).then(s=>(this.du=!1,s))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const c=fd.createAndSchedule(this,e,r,s,h=>this.yu(h));return this.Tu.push(c),c}fu(){this.Eu&&Wt()}verifyOperationInProgress(){}wu(){var e=this;return(0,Ie.A)(function*(){let r;do{r=e.mu,yield r}while(r!==e.mu)})()}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function Mp(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const c=r;for(const h of["next","error","complete"])if(h in c&&"function"==typeof c[h])return!0;return!1}(a)}class qv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ji extends Id{constructor(e,r,s,c){super(e,r,s,c),this.type="firestore",this._queue=new j_,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,Ie.A)(function*(){if(e._firestoreClient){const r=e._firestoreClient.terminate();e._queue=new j_(r),e._firestoreClient=void 0,yield r}})()}}function Ls(a){if(a._terminated)throw new Tt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||Yv(a),a._firestoreClient}function Yv(a){var e,r,s;const c=a._freezeSettings(),h=(k=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new $s(a._databaseId,k,a._persistenceKey,(ae=c).host,ae.ssl,ae.experimentalForceLongPolling,ae.experimentalAutoDetectLongPolling,V_(ae.experimentalLongPollingOptions),ae.useFetchStreams));var k,ae;a._componentsProvider||!(null===(r=c.localCache)||void 0===r)&&r._offlineComponentProvider&&!(null===(s=c.localCache)||void 0===s)&&s._onlineComponentProvider&&(a._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),a._firestoreClient=new Zm(a._authCredentials,a._appCheckCredentials,a._queue,h,a._componentsProvider&&function(R){const k=R?._online.build();return{_offline:R?._offline.build(k),_online:k}}(a._componentsProvider))}function Ef(){return(Ef=(0,Ie.A)(function*(a){Dn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=a._freezeSettings();H_(a,Mu.provider,{build:r=>new Tp(r,e.cacheSizeBytes)})})).apply(this,arguments)}function H_(a,e,r){if((a=Xr(a,Ji))._firestoreClient||a._terminated)throw new Tt(lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(a._componentsProvider||a._getSettings().localCache)throw new Tt(lt.FAILED_PRECONDITION,"SDK cache is already specified.");a._componentsProvider={_online:e,_offline:r},Yv(a)}class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(br.fromBase64String(e))}catch(r){throw new Tt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Wa(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ru{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Tt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wc{constructor(e){this._methodName=e}}class kp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Tt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Tt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}class wf{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,c){if(s.length!==c.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==c[h])return!1;return!0}(this._values,e._values)}}const rb=/^__.*__$/;class ib{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new Zs(e,this.data,this.fieldMask,r,this.fieldTransforms):new cc(e,this.data,r,this.fieldTransforms)}}class K_{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new Zs(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ag(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wt()}}class Tf{constructor(e,r,s,c,h,_){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===h&&this.vu(),this.fieldTransforms=h||[],this.fieldMask=_||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Tf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.Fu({path:s,xu:!1});return c.Ou(e),c}Nu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.Fu({path:s,xu:!1});return c.vu(),c}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Td(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(ag(this.Cu)&&rb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cg{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||Du(e)}Qu(e,r,s,c=!1){return new Tf({Cu:e,methodName:r,qu:s,path:Qn.emptyPath(),xu:!1,ku:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yh(a){const e=a._freezeSettings(),r=Du(a._databaseId);return new cg(a._databaseId,!!e.ignoreUndefinedProperties,r)}function vh(a,e,r,s,c,h={}){const _=a.Qu(h.merge||h.mergeFields?2:0,e,r,c);Lp("Data must be an object, but it was:",_,s);const R=fg(s,_);let k,X;if(h.merge)k=new Gi(_.fieldMask),X=_.fieldTransforms;else if(h.mergeFields){const ae=[];for(const ye of h.mergeFields){const Oe=Up(e,ye,r);if(!_.contains(Oe))throw new Tt(lt.INVALID_ARGUMENT,`Field '${Oe}' is specified in your field mask but missing from your input data.`);G_(ae,Oe)||ae.push(Oe)}k=new Gi(ae),X=_.fieldTransforms.filter(ye=>k.covers(ye.field))}else k=null,X=_.fieldTransforms;return new ib(new Ot(R),k,X)}class bh extends Wc{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}function W_(a,e,r){return new Tf({Cu:3,qu:e.settings.qu,methodName:a._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lg extends Wc{_toFieldTransform(e){return new zn(e.path,new ga)}isEqual(e){return e instanceof lg}}class Fp extends Wc{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=W_(this,e,!0),s=this.Ku.map(h=>Nu(h,r)),c=new as(s);return new zn(e.path,c)}isEqual(e){return e instanceof Fp&&(0,dn.bD)(this.Ku,e.Ku)}}class ug extends Wc{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=W_(this,e,!0),s=this.Ku.map(h=>Nu(h,r)),c=new ws(s);return new zn(e.path,c)}isEqual(e){return e instanceof ug&&(0,dn.bD)(this.Ku,e.Ku)}}class Vp extends Wc{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Fa(e.serializer,ta(e.serializer,this.$u));return new zn(e.path,r)}isEqual(e){return e instanceof Vp&&this.$u===e.$u}}function dg(a,e,r,s){const c=a.Qu(1,e,r);Lp("Data must be an object, but it was:",c,s);const h=[],_=Ot.empty();wn(s,(k,X)=>{const ae=Gc(e,k,r);X=(0,dn.Ku)(X);const ye=c.Nu(ae);if(X instanceof bh)h.push(ae);else{const Oe=Nu(X,ye);null!=Oe&&(h.push(ae),_.set(ae,Oe))}});const R=new Gi(h);return new K_(_,R,c.fieldTransforms)}function hg(a,e,r,s,c,h){const _=a.Qu(1,e,r),R=[Up(e,s,r)],k=[c];if(h.length%2!=0)throw new Tt(lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Oe=0;Oe<h.length;Oe+=2)R.push(Up(e,h[Oe])),k.push(h[Oe+1]);const X=[],ae=Ot.empty();for(let Oe=R.length-1;Oe>=0;--Oe)if(!G_(X,R[Oe])){const ht=R[Oe];let Rt=k[Oe];Rt=(0,dn.Ku)(Rt);const Kt=_.Nu(ht);if(Rt instanceof bh)X.push(ht);else{const Bt=Nu(Rt,Kt);null!=Bt&&(X.push(ht),ae.set(ht,Bt))}}const ye=new Gi(X);return new K_(ae,ye,_.fieldTransforms)}function sb(a,e,r,s=!1){return Nu(r,a.Qu(s?4:3,e))}function Nu(a,e){if(vc(a=(0,dn.Ku)(a)))return Lp("Unsupported field value:",e,a),fg(a,e);if(a instanceof Wc)return function(s,c){if(!ag(c.Cu))throw c.Bu(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Bu(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(c);h&&c.fieldTransforms.push(h)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(s,c){const h=[];let _=0;for(const R of s){let k=Nu(R,c.Lu(_));null==k&&(k={nullValue:"NULL_VALUE"}),h.push(k),_++}return{arrayValue:{values:h}}}(a,e)}return function(s,c){if(null===(s=(0,dn.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return ta(c.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const h=Gt.fromDate(s);return{timestampValue:uo(c.serializer,h)}}if(s instanceof Gt){const h=new Gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:uo(c.serializer,h)}}if(s instanceof kp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wa)return{bytesValue:Zi(c.serializer,s._byteString)};if(s instanceof Ki){const h=c.databaseId,_=s.firestore._databaseId;if(!_.isEqual(h))throw c.Bu(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Sa(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof wf)return R=c,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(k=>{if("number"!=typeof k)throw R.Bu("VectorValues must only contain numeric values.");return Is(R.serializer,k)})}}}}};var R;throw c.Bu(`Unsupported field value: ${gh(s)}`)}(a,e)}function fg(a,e){const r={};return ys(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wn(a,(s,c)=>{const h=Nu(c,e.Mu(s));null!=h&&(r[s]=h)}),{mapValue:{fields:r}}}function vc(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Gt||a instanceof kp||a instanceof Wa||a instanceof Ki||a instanceof Wc||a instanceof wf)}function Lp(a,e,r){if(!vc(r)||"object"!=typeof(c=r)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const s=gh(r);throw e.Bu("an object"===s?a+" a custom object":a+" "+s)}var c}function Up(a,e,r){if((e=(0,dn.Ku)(e))instanceof ru)return e._internalPath;if("string"==typeof e)return Gc(a,e);throw Td("Field path arguments must be of type string or ",a,!1,void 0,r)}const pg=new RegExp("[~\\*/\\[\\]]");function Gc(a,e,r){if(e.search(pg)>=0)throw Td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new ru(...e.split("."))._internalPath}catch{throw Td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function Td(a,e,r,s,c){const h=s&&!s.isEmpty(),_=void 0!==c;let R=`Function ${e}() called with invalid data`;r&&(R+=" (via `toFirestore()`)"),R+=". ";let k="";return(h||_)&&(k+=" (found",h&&(k+=` in field ${s}`),_&&(k+=` in document ${c}`),k+=")"),new Tt(lt.INVALID_ARGUMENT,R+a+k)}function G_(a,e){return a.some(r=>r.isEqual(e))}class Af{constructor(e,r,s,c,h){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ki(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ob(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Eh("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class ob extends Af{data(){return super.data()}}function Eh(a,e){return"string"==typeof e?Gc(a,e):e instanceof ru?e._internalPath:e._delegate._internalPath}function qc(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Tt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bp{}class Cf extends Bp{}function Ad(a,e,...r){let s=[];e instanceof Bp&&s.push(e),s=s.concat(r),function(h){const _=h.filter(k=>k instanceof ku).length,R=h.filter(k=>k instanceof to).length;if(_>1||_>0&&R>0)throw new Tt(lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)a=c._apply(a);return a}class to extends Cf{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new to(e,r,s)}_apply(e){const r=this._parse(e);return Z_(e._query,r),new Io(e.firestore,e.converter,J(e._query,r))}_parse(e){const r=yh(e.firestore);return function(h,_,R,k,X,ae,ye){let Oe;if(X.isKeyField()){if("array-contains"===ae||"array-contains-any"===ae)throw new Tt(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ae}' queries on documentId().`);if("in"===ae||"not-in"===ae){Y_(ye,ae);const ht=[];for(const Rt of ye)ht.push(Cd(k,h,Rt));Oe={arrayValue:{values:ht}}}else Oe=Cd(k,h,ye)}else"in"!==ae&&"not-in"!==ae&&"array-contains-any"!==ae||Y_(ye,ae),Oe=sb(R,"where",ye,"in"===ae||"not-in"===ae);return kn.create(X,ae,Oe)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class ku extends Bp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ku(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:fn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(c,h){let _=c;const R=h.getFlattenedFilters();for(const k of R)Z_(_,k),_=J(_,k)}(e._query,r),new Io(e.firestore,e.converter,J(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Df extends Cf{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Df(e,r)}_apply(e){const r=function(c,h,_){if(null!==c.startAt)throw new Tt(lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new Tt(lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ai(h,_)}(e._query,this._field,this._direction);return new Io(e.firestore,e.converter,function(c,h){const _=c.explicitOrderBy.concat([h]);return new _o(c.path,c.collectionGroup,_,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,r))}}class Sf extends Cf{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new Sf(e,r,s)}_apply(e){return new Io(e.firestore,e.converter,Ae(e._query,this._limit,this._limitType))}}class Rf extends Cf{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Rf(e,r,s)}_apply(e){const r=El(e,this.type,this._docOrFields,this._inclusive);return new Io(e.firestore,e.converter,(h=r,new _o((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,h,c.endAt)));var c,h}}class jp extends Cf{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new jp(e,r,s)}_apply(e){const r=El(e,this.type,this._docOrFields,this._inclusive);return new Io(e.firestore,e.converter,(h=r,new _o((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,h)));var c,h}}function El(a,e,r,s){if(r[0]=(0,dn.Ku)(r[0]),r[0]instanceof Af)return function(h,_,R,k,X){if(!k)throw new Tt(lt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${R}().`);const ae=[];for(const ye of Ho(h))if(ye.field.isKeyField())ae.push(go(_,k.key));else{const Oe=k.data.field(ye.field);if(Ti(Oe))throw new Tt(lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ye.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Oe){const ht=ye.field.canonicalString();throw new Tt(lt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ht}' (used as the orderBy) does not exist.`)}ae.push(Oe)}return new fr(ae,X)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const c=yh(a.firestore);return function(_,R,k,X,ae,ye){const Oe=_.explicitOrderBy;if(ae.length>Oe.length)throw new Tt(lt.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ht=[];for(let Rt=0;Rt<ae.length;Rt++){const Kt=ae[Rt];if(Oe[Rt].field.isKeyField()){if("string"!=typeof Kt)throw new Tt(lt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof Kt}`);if(!Na(_)&&-1!==Kt.indexOf("/"))throw new Tt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${Kt}' contains a slash.`);const Bt=_.path.child(Xt.fromString(Kt));if(!Ut.isDocumentKey(Bt))throw new Tt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${Bt}' is not because it contains an odd number of segments.`);const bn=new Ut(Bt);ht.push(go(R,bn))}else{const Bt=sb(k,X,Kt);ht.push(Bt)}}return new fr(ht,ye)}(a._query,a.firestore._databaseId,c,e,r,s)}}function Cd(a,e,r){if("string"==typeof(r=(0,dn.Ku)(r))){if(""===r)throw new Tt(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Na(e)&&-1!==r.indexOf("/"))throw new Tt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(Xt.fromString(r));if(!Ut.isDocumentKey(s))throw new Tt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return go(a,new Ut(s))}if(r instanceof Ki)return go(a,r._key);throw new Tt(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gh(r)}.`)}function Y_(a,e){if(!Array.isArray(a)||0===a.length)throw new Tt(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Z_(a,e){const r=function(c,h){for(const _ of c)for(const R of _.getFlattenedFilters())if(h.indexOf(R.op)>=0)return R.op;return null}(a.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new Tt(lt.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Hp{convertValue(e,r="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Wt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return wn(e,(c,h)=>{s[c]=this.convertValue(h,r)}),s}convertVectorValue(e){var r,s,c;const h=null===(c=null===(s=null===(r=e.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===s?void 0:s.values)||void 0===c?void 0:c.map(_=>Vr(_.doubleValue));return new wf(h)}convertGeoPoint(e){return new kp(Vr(e.latitude),Vr(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=yi(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(oi(e));default:return null}}convertTimestamp(e){const r=Fn(e);return new Gt(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=Xt.fromString(e);Zt(sl(s));const c=new Oi(s.get(1),s.get(3)),h=new Ut(s.popFirst(5));return c.isEqual(r)||qn(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function wh(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class xf extends Hp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ki(this.firestore,null,r)}}class Dd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iu extends Af{constructor(e,r,s,c,h,_){super(e,r,s,c,_),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Eh("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Th extends iu{data(e={}){return super.data(e)}}class Sd{constructor(e,r,s,c){this._firestore=e,this._userDataWriter=r,this._snapshot=c,this.metadata=new Dd(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Th(this._firestore,this._userDataWriter,s.key,s,new Dd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Tt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(c,h){if(c._snapshot.oldDocs.isEmpty()){let _=0;return c._snapshot.docChanges.map(R=>({type:"added",doc:new Th(c._firestore,c._userDataWriter,R.doc.key,R.doc,new Dd(c._snapshot.mutatedKeys.has(R.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:_++}))}{let _=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(R=>h||3!==R.type).map(R=>{const k=new Th(c._firestore,c._userDataWriter,R.doc.key,R.doc,new Dd(c._snapshot.mutatedKeys.has(R.doc.key),c._snapshot.fromCache),c.query.converter);let X=-1,ae=-1;return 0!==R.type&&(X=_.indexOf(R.doc.key),_=_.delete(R.doc.key)),1!==R.type&&(_=_.add(R.doc),ae=_.indexOf(R.doc.key)),{type:hb(R.type),doc:k,oldIndex:X,newIndex:ae}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function hb(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wt()}}function fb(a,e){return a instanceof iu&&e instanceof iu?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof Sd&&e instanceof Sd&&a._firestore===e._firestore&&wd(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class su extends Hp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ki(this.firestore,null,r)}}function ry(a,e,r){a=Xr(a,Ki);const s=Xr(a.firestore,Ji),c=wh(a.converter,e,r);return Qc(s,[vh(yh(s),"setDoc",a._key,c,null!==a.converter,r).toMutation(a._key,Ai.none())])}function _g(a,e,r,...s){a=Xr(a,Ki);const c=Xr(a.firestore,Ji),h=yh(c);let _;return _="string"==typeof(e=(0,dn.Ku)(e))||e instanceof ru?hg(h,"updateDoc",a._key,e,r,s):dg(h,"updateDoc",a._key,e),Qc(c,[_.toMutation(a._key,Ai.exists(!0))])}function yg(a,...e){var r,s,c;a=(0,dn.Ku)(a);let h={includeMetadataChanges:!1,source:"default"},_=0;"object"!=typeof e[_]||Mp(e[_])||(h=e[_],_++);const R={includeMetadataChanges:h.includeMetadataChanges,source:h.source};if(Mp(e[_])){const ye=e[_];e[_]=null===(r=ye.next)||void 0===r?void 0:r.bind(ye),e[_+1]=null===(s=ye.error)||void 0===s?void 0:s.bind(ye),e[_+2]=null===(c=ye.complete)||void 0===c?void 0:c.bind(ye)}let k,X,ae;if(a instanceof Ki)X=Xr(a.firestore,Ji),ae=jo(a._key.path),k={next:ye=>{e[_]&&e[_](zp(X,a,ye))},error:e[_+1],complete:e[_+2]};else{const ye=Xr(a,Io);X=Xr(ye.firestore,Ji),ae=ye._query;const Oe=new su(X);k={next:ht=>{e[_]&&e[_](new Sd(X,Oe,ye,ht))},error:e[_+1],complete:e[_+2]},qc(a._query)}return function(Oe,ht,Rt,Kt){const Bt=new _f(Kt),bn=new km(ht,Bt,Rt);return Oe.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return fp(yield Ou(Oe),bn)})),()=>{Bt.Za(),Oe.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return Om(yield Ou(Oe),bn)}))}}(Ls(X),ae,R,k)}function Qc(a,e){return function(s,c){const h=new Rr;return s.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return function Ov(a,e,r){return Hm.apply(this,arguments)}(yield _c(s),c,h)})),h.promise}(Ls(a),e)}function zp(a,e,r){const s=r.docs.get(e._key),c=new su(a);return new iu(a,c,e._key,s,new Dd(r.hasPendingWrites,r.fromCache),e.converter)}const uy={maxAttempts:5};class dy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=yh(e)}set(e,r,s){this._verifyNotCommitted();const c=Fu(e,this._firestore),h=wh(c.converter,r,s),_=vh(this._dataReader,"WriteBatch.set",c._key,h,null!==c.converter,s);return this._mutations.push(_.toMutation(c._key,Ai.none())),this}update(e,r,s,...c){this._verifyNotCommitted();const h=Fu(e,this._firestore);let _;return _="string"==typeof(r=(0,dn.Ku)(r))||r instanceof ru?hg(this._dataReader,"WriteBatch.update",h._key,r,s,c):dg(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(_.toMutation(h._key,Ai.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Fu(e,this._firestore);return this._mutations=this._mutations.concat(new zo(r._key,Ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fu(a,e){if((a=(0,dn.Ku)(a)).firestore!==e)throw new Tt(lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class _b extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=yh(r)}get(r){const s=Fu(r,this._firestore),c=new xf(this._firestore);return this._transaction.lookup([s._key]).then(h=>{if(!h||1!==h.length)return Wt();const _=h[0];if(_.isFoundDocument())return new Af(this._firestore,c,_.key,_,s.converter);if(_.isNoDocument())return new Af(this._firestore,c,s._key,null,s.converter);throw Wt()})}set(r,s,c){const h=Fu(r,this._firestore),_=wh(h.converter,s,c),R=vh(this._dataReader,"Transaction.set",h._key,_,null!==h.converter,c);return this._transaction.set(h._key,R),this}update(r,s,c,...h){const _=Fu(r,this._firestore);let R;return R="string"==typeof(s=(0,dn.Ku)(s))||s instanceof ru?hg(this._dataReader,"Transaction.update",_._key,s,c,h):dg(this._dataReader,"Transaction.update",_._key,s),this._transaction.update(_._key,R),this}delete(r){const s=Fu(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Fu(e,this._firestore),s=new su(this._firestore);return super.get(e).then(c=>new iu(this._firestore,s,r._key,c._document,new Dd(!1,!1),r.converter))}}function Pf(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Tt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function yy(){if(typeof Uint8Array>"u")throw new Tt("unimplemented","Uint8Arrays are not available in this environment.")}function Ig(){if(!function ts(){return typeof atob<"u"}())throw new Tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){Mn=Je.SDK_VERSION,(0,Je._registerComponent)(new Vt.uA("firestore",(s,{instanceIdentifier:c,options:h})=>{const _=s.getProvider("app").getImmediate(),R=new Ji(new hs(s.getProvider("auth-internal")),new q(s.getProvider("app-check-internal")),function(X,ae){if(!Object.prototype.hasOwnProperty.apply(X.options,["projectId"]))throw new Tt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(X.options.projectId,ae)}(_,c),_);return h=Object.assign({useFetchStreams:r},h),R._setSettings(h),R},"PUBLIC").setMultipleInstances(!0)),(0,Je.registerVersion)(Br,"4.7.3",e),(0,Je.registerVersion)(Br,"4.7.3","esm2017")}();class Of{constructor(e){this._delegate=e}static fromBase64String(e){return Ig(),new Of(Wa.fromBase64String(e))}static fromUint8Array(e){return yy(),new Of(Wa.fromUint8Array(e))}toBase64(){return Ig(),this._delegate.toBase64()}toUint8Array(){return yy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function qp(a){return function vy(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class Qp{enableIndexedDbPersistence(e,r){return function Zv(a,e){Dn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings();return H_(a,Mu.provider,{build:s=>new wp(s,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function Pp(a){return Ef.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function $_(a){if(a._initialized&&!a._terminated)throw new Tt(lt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return a._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.A)(function*(){try{yield(r=(0,Ie.A)(function*(c){if(!di.D())return Promise.resolve();const h=c+"main";yield di.delete(h)}),function s(c){return r.apply(this,arguments)})($l(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Xp{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Dn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function _h(a,e,r,s={}){var c;const h=(a=Xr(a,Id))._getSettings(),_=`${e}:${r}`;if("firestore.googleapis.com"!==h.host&&h.host!==_&&Dn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},h),{host:_,ssl:!1})),s.mockUserToken){let R,k;if("string"==typeof s.mockUserToken)R=s.mockUserToken,k=rr.MOCK_USER;else{R=(0,dn.Fy)(s.mockUserToken,null===(c=a._app)||void 0===c?void 0:c.options.projectId);const X=s.mockUserToken.sub||s.mockUserToken.user_id;if(!X)throw new Tt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new rr(X)}a._authCredentials=new ss(new mi(R,k))}}(this._delegate,e,r,s)}enableNetwork(){return function Op(a){return function $v(a){return a.asyncQueue.enqueue((0,Ie.A)(function*(){const e=yield M_(a),r=yield vf(a);return e.setNetworkEnabled(!0),function(c){const h=Lt(c);return h.L_.delete(0),Su(h)}(r)}))}(Ls(a=Xr(a,Ji)))}(this._delegate)}disableNetwork(){return function Jv(a){return function P_(a){return a.asyncQueue.enqueue((0,Ie.A)(function*(){const e=yield M_(a),r=yield vf(a);return e.setNetworkEnabled(!1),(s=(0,Ie.A)(function*(h){const _=Lt(h);_.L_.add(0),yield gc(_),_.q_.set("Offline")}),function c(h){return s.apply(this,arguments)})(r);var s}))}(Ls(a=Xr(a,Ji)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Gv("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function og(a){return function(r){const s=new Rr;return r.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return function w_(a,e){return gp.apply(this,arguments)}(yield _c(r),s)})),s.promise}(Ls(a=Xr(a,Ji)))}(this._delegate)}onSnapshotsInSync(e){return function sy(a,e){return function k_(a,e){const r=new _f(e);return a.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return c=yield Ou(a),h=r,Lt(c).Y_.add(h),void h.next();var c,h})),()=>{r.Za(),a.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return c=yield Ou(a),h=r,void Lt(c).Y_.delete(h);var c,h}))}}(Ls(a=Xr(a,Ji)),Mp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wl(this,Sp(this._delegate,e))}catch(r){throw Gs(r,"collection()","Firestore.collection()")}}doc(e){try{return new Ga(this,sg(this._delegate,e))}catch(r){throw Gs(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ea(this,function Rp(a,e){if(a=Xr(a,Id),U_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Tt(lt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Io(a,null,(s=e,new _o(Xt.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw Gs(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function yb(a,e,r){a=Xr(a,Ji);const s=Object.assign(Object.assign({},uy),r);return function(h){if(h.maxAttempts<1)throw new Tt(lt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(h,_,R){const k=new Rr;return h.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){const X=yield function bd(a){return fh(a).then(e=>e.datastore)}(h);new DE(h.asyncQueue,X,R,_,k).au()})),k.promise}(Ls(a),c=>e(new _b(a,c)),s)}(this._delegate,r=>e(new Tg(this,r)))}batch(){return Ls(this._delegate),new Ag(new dy(this._delegate,e=>Qc(this._delegate,e)))}loadBundle(e){return function tb(a,e){const r=Ls(a=Xr(a,Ji)),s=new qv;return function Kv(a,e,r,s){const c=function(_,R){let k;return k="string"==typeof _?se().encode(_):_,ae=function(ae,ye){if(ae instanceof Uint8Array)return R_(ae,void 0);if(ae instanceof ArrayBuffer)return R_(new Uint8Array(ae),void 0);if(ae instanceof ReadableStream)return ae.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new x_(ae,R);var ae}(r,Du(e));a.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){!function gf(a,e,r){const s=Lt(a);var c;(c=(0,Ie.A)(function*(_,R,k){try{const X=yield R.getMetadata();if(yield function(Rt,Kt){const Bt=Lt(Rt),bn=sr(Kt.createTime);return Bt.persistence.runTransaction("hasNewerBundle","readonly",jn=>Bt.Gr.getBundleMetadata(jn,Kt.id)).then(jn=>!!jn&&jn.createTime.compareTo(bn)>=0)}(_.localStore,X))return yield R.close(),k._completeWith({taskState:"Success",documentsLoaded:(Rt=X).totalDocuments,bytesLoaded:Rt.totalBytes,totalDocuments:Rt.totalDocuments,totalBytes:Rt.totalBytes}),Promise.resolve(new Set);k._updateProgress(pp(X));const ae=new xv(X,_.localStore,R.serializer);let ye=yield R.Ua();for(;ye;){const ht=yield ae.la(ye);ht&&k._updateProgress(ht),ye=yield R.Ua()}const Oe=yield ae.complete();return yield xu(_,Oe.Ia,void 0),yield function(Rt,Kt){const Bt=Lt(Rt);return Bt.persistence.runTransaction("Save bundle","readwrite",bn=>Bt.Gr.saveBundleMetadata(bn,Kt))}(_.localStore,X),k._completeWith(Oe.progress),Promise.resolve(Oe.Pa)}catch(X){return Dn("SyncEngine",`Loading bundle failed with ${X}`),k._failWith(X),Promise.resolve(new Set)}var Rt}),function h(_,R,k){return c.apply(this,arguments)})(s,e,r).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield _c(a),c,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function z_(a,e){return function F_(a,e){return a.asyncQueue.enqueue((0,Ie.A)(function*(){return function(s,c){const h=Lt(s);return h.persistence.runTransaction("Get named query","readonly",_=>h.Gr.getNamedQuery(_,c))}(yield Pu(a),e)}))}(Ls(a=Xr(a,Ji)),e).then(r=>r?new Io(a,null,r.query):null)}(this._delegate,e).then(r=>r?new Ea(this,r):null)}}class wg extends Hp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Of(new Wa(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return Ga.forKey(r,this.firestore,null)}}class Tg{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new wg(e)}get(e){const r=Lu(e);return this._delegate.get(r).then(s=>new Rd(this._firestore,new iu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const c=Lu(e);return s?(Pf("Transaction.set",s),this._delegate.set(c,r,s)):this._delegate.set(c,r),this}update(e,r,s,...c){const h=Lu(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,s,...c),this}delete(e){const r=Lu(e);return this._delegate.delete(r),this}}class Ag{constructor(e){this._delegate=e}set(e,r,s){const c=Lu(e);return s?(Pf("WriteBatch.set",s),this._delegate.set(c,r,s)):this._delegate.set(c,r),this}update(e,r,s,...c){const h=Lu(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,s,...c),this}delete(e){const r=Lu(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Vu{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new Th(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Nf(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=Vu.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let h=c.get(r);return h||(h=new Vu(e,new wg(e),r),c.set(r,h)),h}}Vu.INSTANCES=new WeakMap;class Ga{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new wg(e)}static forPath(e,r,s){if(e.length%2!=0)throw new Tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ga(r,new Ki(r._delegate,s,new Ut(e)))}static forKey(e,r,s){return new Ga(r,new Ki(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new wl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wl(this.firestore,Sp(this._delegate,e))}catch(r){throw Gs(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,dn.Ku)(e))instanceof Ki&&xp(this._delegate,e)}set(e,r){r=Pf("DocumentReference.set",r);try{return r?ry(this._delegate,e,r):ry(this._delegate,e)}catch(s){throw Gs(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?_g(this._delegate,e):_g(this._delegate,e,r,...s)}catch(c){throw Gs(c,"updateDoc()","DocumentReference.update()")}}delete(){return function iy(a){return Qc(Xr(a.firestore,Ji),[new zo(a._key,Ai.none())])}(this._delegate)}onSnapshot(...e){const r=Ey(e),s=Iy(e,c=>new Rd(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return yg(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function ey(a){a=Xr(a,Ki);const e=Xr(a.firestore,Ji),r=Ls(e),s=new su(e);return function mh(a,e){const r=new Rr;return a.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return(s=(0,Ie.A)(function*(h,_,R){try{const k=yield function(ae,ye){const Oe=Lt(ae);return Oe.persistence.runTransaction("read document","readonly",ht=>Oe.localDocuments.getDocument(ht,ye))}(h,_);k.isFoundDocument()?R.resolve(k):k.isNoDocument()?R.resolve(null):R.reject(new Tt(lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const X=pd(k,`Failed to get document '${_} from cache`);R.reject(X)}}),function c(h,_,R){return s.apply(this,arguments)})(yield Pu(a),e,r);var s})),r.promise}(r,a._key).then(c=>new iu(e,s,a._key,c,new Dd(null!==c&&c.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function kE(a){a=Xr(a,Ki);const e=Xr(a.firestore,Ji);return O_(Ls(e),a._key,{source:"server"}).then(r=>zp(e,a,r))}(this._delegate):function NE(a){a=Xr(a,Ki);const e=Xr(a.firestore,Ji);return O_(Ls(e),a._key).then(r=>zp(e,a,r))}(this._delegate),r.then(s=>new Rd(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?Vu.getInstance(this.firestore,e):null))}}function Gs(a,e,r){return a.message=a.message.replace(e,r),a}function Ey(a){for(const e of a)if("object"==typeof e&&!qp(e))return e;return{}}function Iy(a,e){var r,s;let c;return c=qp(a[0])?a[0]:qp(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:h=>{c.next&&c.next(e(h))},error:null===(r=c.error)||void 0===r?void 0:r.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Rd{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return fb(this._delegate,e._delegate)}}class Nf extends Rd{data(e){const r=this._delegate.data(e);return this._delegate._converter||function ds(a,e){a||Wt()}(void 0!==r),r}}class Ea{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new wg(e)}where(e,r,s){try{return new Ea(this.firestore,Ad(this._delegate,function ab(a,e,r){const s=e,c=Eh("where",a);return to._create(c,s,r)}(e,r,s)))}catch(c){throw Gs(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new Ea(this.firestore,Ad(this._delegate,function q_(a,e="asc"){const r=e,s=Eh("orderBy",a);return Df._create(s,r)}(e,r)))}catch(s){throw Gs(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ea(this.firestore,Ad(this._delegate,function cb(a){return Ed("limit",a),Sf._create("limit",a,"F")}(e)))}catch(r){throw Gs(r,"limit()","Query.limit()")}}limitToLast(e){try{return new Ea(this.firestore,Ad(this._delegate,function Q_(a){return Ed("limitToLast",a),Sf._create("limitToLast",a,"L")}(e)))}catch(r){throw Gs(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ea(this.firestore,Ad(this._delegate,function lb(...a){return Rf._create("startAt",a,!0)}(...e)))}catch(r){throw Gs(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ea(this.firestore,Ad(this._delegate,function ub(...a){return Rf._create("startAfter",a,!1)}(...e)))}catch(r){throw Gs(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ea(this.firestore,Ad(this._delegate,function X_(...a){return jp._create("endBefore",a,!1)}(...e)))}catch(r){throw Gs(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ea(this.firestore,Ad(this._delegate,function Ih(...a){return jp._create("endAt",a,!0)}(...e)))}catch(r){throw Gs(r,"endAt()","Query.endAt()")}}isEqual(e){return wd(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function ty(a){a=Xr(a,Io);const e=Xr(a.firestore,Ji),r=Ls(e),s=new su(e);return function zv(a,e){const r=new Rr;return a.asyncQueue.enqueueAndForget((0,Ie.A)(function*(){return(s=(0,Ie.A)(function*(h,_,R){try{const k=yield C(h,_,!0),X=new hf(_,k.Ts),ae=X.ma(k.documents),ye=X.applyChanges(ae,!1);R.resolve(ye.snapshot)}catch(k){const X=pd(k,`Failed to execute query '${_} against cache`);R.reject(X)}}),function c(h,_,R){return s.apply(this,arguments)})(yield Pu(a),e,r);var s})),r.promise}(r,a._query).then(c=>new Sd(e,s,a,c))}(this._delegate):"server"===e?.source?function ny(a){a=Xr(a,Io);const e=Xr(a.firestore,Ji),r=Ls(e),s=new su(e);return N_(r,a._query,{source:"server"}).then(c=>new Sd(e,s,a,c))}(this._delegate):function $p(a){a=Xr(a,Io);const e=Xr(a.firestore,Ji),r=Ls(e),s=new su(e);return qc(a._query),N_(r,a._query).then(c=>new Sd(e,s,a,c))}(this._delegate),r.then(s=>new Ch(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=Ey(e),s=Iy(e,c=>new Ch(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return yg(this._delegate,r,s)}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Vu.getInstance(this.firestore,e):null))}}class wb{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Nf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ch{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new Ea(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Nf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new wb(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new Nf(this._firestore,s))})}isEqual(e){return fb(this._delegate,e._delegate)}}class wl extends Ea{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ga(this.firestore,e):null}doc(e){try{return new Ga(this.firestore,void 0===e?sg(this._delegate):sg(this._delegate,e))}catch(r){throw Gs(r,"doc()","CollectionReference.doc()")}}add(e){return function Dr(a,e){const r=Xr(a.firestore,Ji),s=sg(a),c=wh(a.converter,e);return Qc(r,[vh(yh(a.firestore),"addDoc",s._key,c,null!==a.converter,{}).toMutation(s._key,Ai.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new Ga(this.firestore,r))}isEqual(e){return xp(this._delegate,e._delegate)}withConverter(e){return new wl(this.firestore,this._delegate.withConverter(e?Vu.getInstance(this.firestore,e):null))}}function Lu(a){return Xr(a,Ki)}class Dh{constructor(...e){this._delegate=new ru(...e)}static documentId(){return new Dh(Qn.keyField().canonicalString())}isEqual(e){return(e=(0,dn.Ku)(e))instanceof ru&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fy(){return new lg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sh(e)}static delete(){const e=function hy(){return new bh("deleteField")}();return e._methodName="FieldValue.delete",new Sh(e)}static arrayUnion(...e){const r=function vb(...a){return new Fp("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new Sh(r)}static arrayRemove(...e){const r=function bb(...a){return new ug("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new Sh(r)}static increment(e){const r=function nc(a){return new Vp("increment",a)}(e);return r._methodName="FieldValue.increment",new Sh(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Tb={Firestore:Xp,GeoPoint:kp,Timestamp:Gt,Blob:Of,Transaction:Tg,WriteBatch:Ag,DocumentReference:Ga,DocumentSnapshot:Rd,Query:Ea,QueryDocumentSnapshot:Nf,QuerySnapshot:Ch,CollectionReference:wl,FieldPath:Dh,FieldValue:Sh,setLogLevel:function by(a){!function qs(a){Un.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};function Ay(a,e){return function Ab(a,e=On.E){return new Qe.c(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Yp(a,e){return Ay(a,e).pipe((0,mt.T)(r=>({payload:r,type:"query"})))}!function Ty(a){(function wy(a,e){a.INTERNAL.registerComponent(new Vt.uA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),c=r.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},Tb)))})(a,(e,r)=>new Xp(e,r,new Qp)),a.registerVersion("@firebase/firestore-compat","0.3.38")}(nt.A);class Rh{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:c,query:h}=My(s,r);return new Sy(c,h,this.afs)}snapshotChanges(){return function Cy(a,e){return Ay(a,e).pipe((0,Ln.Z)(void 0),Ke(),(0,mt.T)(r=>{const[s,c]=r;return c.exists?s?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Te.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.T)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,$e.H)(this.ref.get(e)).pipe(Te.U0)}}function Zp(a,e){return Yp(a,e).pipe((0,Ln.Z)(void 0),Ke(),(0,mt.T)(r=>{const[s,c]=r,h=c.payload.docChanges(),_=h.map(R=>({type:R.type,payload:R}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((R,k)=>{const X=h.find(ye=>ye.doc.ref.isEqual(R.ref)),ae=s?.payload.docs.find(ye=>ye.ref.isEqual(R.ref));X&&JSON.stringify(X.doc.metadata)===JSON.stringify(R.metadata)||!X&&ae&&JSON.stringify(ae.metadata)===JSON.stringify(R.metadata)||_.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:R}})}),_}))}function Cg(a,e,r){return Zp(a,r).pipe((0,tt.S)((s,c)=>function Dy(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function Cb(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Dg(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Dg(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Dg(a,e.oldIndex,1)}return a}(a,s))}),a}(s,c.map(h=>h.payload),e),[]),(0,ot.F)(),(0,mt.T)(s=>s.map(c=>({type:c.type,payload:c}))))}function Dg(a,e,r,...s){const c=a.slice();return c.splice(e,r,...s),c}function xh(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Sy{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=Zp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,mt.T)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),r.pipe((0,Ln.Z)(void 0),Ke(),(0,qe.p)(([s,c])=>c.length>0||!s),(0,mt.T)(([,s])=>s),Te.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,tt.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=xh(e);return Cg(this.query,r,this.afs.schedulers.outsideAngular).pipe(Te.U0)}valueChanges(e={}){return Yp(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.T)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),Te.U0)}get(e){return(0,$e.H)(this.query.get(e)).pipe(Te.U0)}add(e){return this.ref.add(e)}doc(e){return new Rh(this.ref.doc(e),this.afs)}}class Db{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Zp(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,qe.p)(r=>r.length>0),Te.U0):Zp(this.query,this.afs.schedulers.outsideAngular).pipe(Te.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,tt.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=xh(e);return Cg(this.query,r,this.afs.schedulers.outsideAngular).pipe(Te.U0)}valueChanges(e={}){return Yp(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.T)(s=>s.payload.docs.map(c=>e.idField?{[e.idField]:c.id,...c.data()}:c.data())),Te.U0)}get(e){return(0,$e.H)(this.query.get(e)).pipe(Te.U0)}}const Ry=new fe.nKC("angularfire2.enableFirestorePersistence"),xy=new fe.nKC("angularfire2.firestore.persistenceSettings"),Sb=new fe.nKC("angularfire2.firestore.settings"),Rb=new fe.nKC("angularfire2.firestore.use-emulator");function My(a,e=(r=>r)){return{query:e(a),ref:a}}let Py=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,c,h,_,R,k,X,ae,ye,Oe,ht,Rt,Kt,Bt,bn,jn){this.schedulers=k;const rn=(0,pe.iB)(r,R,s),Hn=ae;ye&&er(rn,R,Oe,Rt,Kt,Bt,ht,bn),[this.firestore,this.persistenceEnabled$]=(0,pe.BM)(`${rn.name}.firestore`,"AngularFirestore",rn.name,()=>{const Er=R.runOutsideAngular(()=>rn.firestore());if(h&&Er.settings(h),Hn&&Er.useEmulator(...Hn),c&&!(0,d.Vy)(_)){const ar=()=>{try{return(0,$e.H)(Er.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(Ge){return typeof console<"u"&&console.warn(Ge),(0,_e.of)(!1)}};return[Er,R.runOutsideAngular(ar)]}return[Er,(0,_e.of)(!1)]},[h,Hn,c])}collection(r,s){let c;c="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:_}=My(c,s),R=this.schedulers.ngZone.run(()=>h);return new Sy(R,_,this)}collectionGroup(r,s){const c=s||(_=>_),h=this.firestore.collectionGroup(r);return new Db(c(h),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const c=this.schedulers.ngZone.run(()=>s);return new Rh(c,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(fe.KVO(pe.rx),fe.KVO(pe.uP,8),fe.KVO(Ry,8),fe.KVO(Sb,8),fe.KVO(fe.Agw),fe.KVO(fe.SKi),fe.KVO(Te.u0),fe.KVO(xy,8),fe.KVO(Rb,8),fe.KVO(ui,8),fe.KVO(_t,8),fe.KVO(Ht,8),fe.KVO(Jt,8),fe.KVO(ut,8),fe.KVO(Nn,8),fe.KVO(_r,8),fe.KVO(Te.Jv,8))};static \u0275prov=fe.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Oy=(()=>{class a{constructor(){Me.A.registerVersion("angularfire",Te.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Ry,useValue:!0},{provide:xy,useValue:r}]}}static \u0275fac=function(s){return new(s||a)};static \u0275mod=fe.$C({type:a});static \u0275inj=fe.G2t({providers:[Py]})}return a})()},3383:(en,at,W)=>{W.d(at,{ap:()=>bi,y5:()=>Qi});var d=W(1825),fe=W(1985),Te=W(7673),pe=W(8455),ke=W(152),Pe=W(6354),_e=W(5558),Qe=W(7705),$e=W(9253),be=W(3345),Ce=W(467),Ve=W(7852),mt=W(1076),dt=W(1362);const St="firebasestorage.googleapis.com",It="storageBucket";class At extends mt.g{constructor(G,ue,ve=0){super(qe(G),`Firebase Storage: ${ue} (${qe(G)})`),this.status_=ve,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,At.prototype)}get status(){return this.status_}set status(G){this.status_=G}_codeEquals(G){return qe(G)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(G){this.customData.serverResponse=G,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var me=function(Y){return Y.UNKNOWN="unknown",Y.OBJECT_NOT_FOUND="object-not-found",Y.BUCKET_NOT_FOUND="bucket-not-found",Y.PROJECT_NOT_FOUND="project-not-found",Y.QUOTA_EXCEEDED="quota-exceeded",Y.UNAUTHENTICATED="unauthenticated",Y.UNAUTHORIZED="unauthorized",Y.UNAUTHORIZED_APP="unauthorized-app",Y.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Y.INVALID_CHECKSUM="invalid-checksum",Y.CANCELED="canceled",Y.INVALID_EVENT_NAME="invalid-event-name",Y.INVALID_URL="invalid-url",Y.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Y.NO_DEFAULT_BUCKET="no-default-bucket",Y.CANNOT_SLICE_BLOB="cannot-slice-blob",Y.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Y.NO_DOWNLOAD_URL="no-download-url",Y.INVALID_ARGUMENT="invalid-argument",Y.INVALID_ARGUMENT_COUNT="invalid-argument-count",Y.APP_DELETED="app-deleted",Y.INVALID_ROOT_OPERATION="invalid-root-operation",Y.INVALID_FORMAT="invalid-format",Y.INTERNAL_ERROR="internal-error",Y.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Y}(me||{});function qe(Y){return"storage/"+Y}function Me(){return new At(me.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Nn(){return new At(me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _r(){return new At(me.CANCELED,"User canceled the upload/download.")}function On(){return new At(me.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ke(Y){return new At(me.INVALID_ARGUMENT,Y)}function tt(){return new At(me.APP_DELETED,"The Firebase app was deleted.")}function ot(Y){return new At(me.INVALID_ROOT_OPERATION,"The operation '"+Y+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nt(Y,G){return new At(me.INVALID_FORMAT,"String does not match format '"+Y+"': "+G)}function Ie(Y){throw new At(me.INTERNAL_ERROR,"Internal error: "+Y)}class Je{constructor(G,ue){this.bucket=G,this.path_=ue}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const G=encodeURIComponent;return"/b/"+G(this.bucket)+"/o/"+G(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(G,ue){let ve;try{ve=Je.makeFromUrl(G,ue)}catch{return new Je(G,"")}if(""===ve.path)return ve;throw function ui(Y){return new At(me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+Y+"'.")}(G)}static makeFromUrl(G,ue){let ve=null;const je="([A-Za-z0-9.\\-_]+)",z=new RegExp("^gs://"+je+"(/(.*))?$","i");function ne(kn){kn.path_=decodeURIComponent(kn.path)}const Ot=ue.replace(/[.]/g,"\\."),hi=[{regex:z,indices:{bucket:1,path:3},postModify:function yt(kn){"/"===kn.path.charAt(kn.path.length-1)&&(kn.path_=kn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ot}/v[A-Za-z0-9_]+/b/${je}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ne},{regex:new RegExp(`^https?://${ue===St?"(?:storage.googleapis.com|storage.cloud.google.com)":ue}/${je}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ne}];for(let kn=0;kn<hi.length;kn++){const fn=hi[kn],Xi=fn.regex.exec(G);if(Xi){let Es=Xi[fn.indices.path];Es||(Es=""),ve=new Je(Xi[fn.indices.bucket],Es),fn.postModify(ve);break}}if(null==ve)throw function er(Y){return new At(me.INVALID_URL,"Invalid URL '"+Y+"'.")}(G);return ve}}class Vt{constructor(G){this.promise_=Promise.reject(G)}getPromise(){return this.promise_}cancel(G=!1){}}function Ir(Y){return"string"==typeof Y||Y instanceof String}function xn(Y){return dr()&&Y instanceof Blob}function dr(){return typeof Blob<"u"}function Sr(Y,G,ue,ve){if(ve<G)throw Ke(`Invalid value for '${Y}'. Expected ${G} or greater.`);if(ve>ue)throw Ke(`Invalid value for '${Y}'. Expected ${ue} or less.`)}function Or(Y,G,ue){let ve=G;return null==ue&&(ve=`https://${G}`),`${ue}://${ve}/v0${Y}`}function or(Y){const G=encodeURIComponent;let ue="?";for(const ve in Y)Y.hasOwnProperty(ve)&&(ue=ue+(G(ve)+"=")+G(Y[ve])+"&");return ue=ue.slice(0,-1),ue}var ri=function(Y){return Y[Y.NO_ERROR=0]="NO_ERROR",Y[Y.NETWORK_ERROR=1]="NETWORK_ERROR",Y[Y.ABORT=2]="ABORT",Y}(ri||{});function Si(Y,G){const ue=Y>=500&&Y<600,je=-1!==[408,429].indexOf(Y),yt=-1!==G.indexOf(Y);return ue||je||yt}class pi{constructor(G,ue,ve,je,yt,L,z,N,ne,we,Ot,sn=!0){this.url_=G,this.method_=ue,this.headers_=ve,this.body_=je,this.successCodes_=yt,this.additionalRetryCodes_=L,this.callback_=z,this.errorCallback_=N,this.timeout_=ne,this.progressCallback_=we,this.connectionFactory_=Ot,this.retry=sn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((hn,fr)=>{this.resolve_=hn,this.reject_=fr,this.start_()})}start_(){const ue=(ve,je)=>{const yt=this.resolve_,L=this.reject_,z=je.connection;if(je.wasSuccessCode)try{const N=this.callback_(z,z.getResponse());!function Yt(Y){return void 0!==Y}(N)?yt():yt(N)}catch(N){L(N)}else if(null!==z){const N=Me();N.serverResponse=z.getErrorText(),L(this.errorCallback_?this.errorCallback_(z,N):N)}else L(je.canceled?this.appDelete_?tt():_r():Nn())};this.canceled_?ue(0,new Cn(!1,null,!0)):this.backoffId_=function Rn(Y,G,ue){let ve=1,je=null,yt=null,L=!1,z=0;function N(){return 2===z}let ne=!1;function we(...qr){ne||(ne=!0,G.apply(null,qr))}function Ot(qr){je=setTimeout(()=>{je=null,Y(hn,N())},qr)}function sn(){yt&&clearTimeout(yt)}function hn(qr,...ai){if(ne)return void sn();if(qr)return sn(),void we.call(null,qr,...ai);if(N()||L)return sn(),void we.call(null,qr,...ai);let hi;ve<64&&(ve*=2),1===z?(z=2,hi=0):hi=1e3*(ve+Math.random()),Ot(hi)}let fr=!1;function ei(qr){fr||(fr=!0,sn(),!ne&&(null!==je?(qr||(z=2),clearTimeout(je),Ot(0)):qr||(z=1)))}return Ot(0),yt=setTimeout(()=>{L=!0,ei(!0)},ue),ei}((ve,je)=>{if(je)return void ve(!1,new Cn(!1,null,!0));const yt=this.connectionFactory_();this.pendingConnection_=yt;const L=z=>{null!==this.progressCallback_&&this.progressCallback_(z.loaded,z.lengthComputable?z.total:-1)};null!==this.progressCallback_&&yt.addUploadProgressListener(L),yt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&yt.removeUploadProgressListener(L),this.pendingConnection_=null;const z=yt.getErrorCode()===ri.NO_ERROR,N=yt.getStatus();if(!z||Si(N,this.additionalRetryCodes_)&&this.retry){const we=yt.getErrorCode()===ri.ABORT;return void ve(!1,new Cn(!1,null,we))}const ne=-1!==this.successCodes_.indexOf(N);ve(!0,new Cn(ne,yt))})},ue,this.timeout_)}getPromise(){return this.promise_}cancel(G){this.canceled_=!0,this.appDelete_=G||!1,null!==this.backoffId_&&function dn(Y){Y(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Cn{constructor(G,ue,ve){this.wasSuccessCode=G,this.connection=ue,this.canceled=!!ve}}function Ri(...Y){const G=function Un(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==G){const ue=new G;for(let ve=0;ve<Y.length;ve++)ue.append(Y[ve]);return ue.getBlob()}if(dr())return new Blob(Y);throw new At(me.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dn{constructor(G,ue){this.data=G,this.contentType=ue||null}}function Ds(Y,G){switch(Y){case qn.RAW:return new Dn(Wt(G));case qn.BASE64:case qn.BASE64URL:return new Dn(ds(Y,G));case qn.DATA_URL:return new Dn(function lt(Y){const G=new Lt(Y);return G.base64?ds(qn.BASE64,G.rest):function Zt(Y){let G;try{G=decodeURIComponent(Y)}catch{throw nt(qn.DATA_URL,"Malformed data URL.")}return Wt(G)}(G.rest)}(G),function Tt(Y){return new Lt(Y).contentType}(G))}throw Me()}function Wt(Y){const G=[];for(let ue=0;ue<Y.length;ue++){let ve=Y.charCodeAt(ue);ve<=127?G.push(ve):ve<=2047?G.push(192|ve>>6,128|63&ve):55296==(64512&ve)?ue<Y.length-1&&56320==(64512&Y.charCodeAt(ue+1))?(ve=65536|(1023&ve)<<10|1023&Y.charCodeAt(++ue),G.push(240|ve>>18,128|ve>>12&63,128|ve>>6&63,128|63&ve)):G.push(239,191,189):56320==(64512&ve)?G.push(239,191,189):G.push(224|ve>>12,128|ve>>6&63,128|63&ve)}return new Uint8Array(G)}function ds(Y,G){switch(Y){case qn.BASE64:{const je=-1!==G.indexOf("-"),yt=-1!==G.indexOf("_");if(je||yt)throw nt(Y,"Invalid character '"+(je?"-":"_")+"' found: is it base64url encoded?");break}case qn.BASE64URL:{const je=-1!==G.indexOf("+"),yt=-1!==G.indexOf("/");if(je||yt)throw nt(Y,"Invalid character '"+(je?"+":"/")+"' found: is it base64 encoded?");G=G.replace(/-/g,"+").replace(/_/g,"/");break}}let ue;try{ue=function rt(Y){if(typeof atob>"u")throw function ir(Y){return new At(me.UNSUPPORTED_ENVIRONMENT,`${Y} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(Y)}(G)}catch(je){throw je.message.includes("polyfill")?je:nt(Y,"Invalid character found")}const ve=new Uint8Array(ue.length);for(let je=0;je<ue.length;je++)ve[je]=ue.charCodeAt(je);return ve}class Lt{constructor(G){this.base64=!1,this.contentType=null;const ue=G.match(/^data:([^,]+)?,/);if(null===ue)throw nt(qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const ve=ue[1]||null;null!=ve&&(this.base64=function Rr(Y,G){return Y.length>=G.length&&Y.substring(Y.length-G.length)===G}(ve,";base64"),this.contentType=this.base64?ve.substring(0,ve.length-7):ve),this.rest=G.substring(G.indexOf(",")+1)}}class mi{constructor(G,ue){let ve=0,je="";xn(G)?(this.data_=G,ve=G.size,je=G.type):G instanceof ArrayBuffer?(ue?this.data_=new Uint8Array(G):(this.data_=new Uint8Array(G.byteLength),this.data_.set(new Uint8Array(G))),ve=this.data_.length):G instanceof Uint8Array&&(ue?this.data_=G:(this.data_=new Uint8Array(G.length),this.data_.set(G)),ve=G.length),this.size_=ve,this.type_=je}size(){return this.size_}type(){return this.type_}slice(G,ue){if(xn(this.data_)){const je=function qs(Y,G,ue){return Y.webkitSlice?Y.webkitSlice(G,ue):Y.mozSlice?Y.mozSlice(G,ue):Y.slice?Y.slice(G,ue):null}(this.data_,G,ue);return null===je?null:new mi(je)}{const ve=new Uint8Array(this.data_.buffer,G,ue-G);return new mi(ve,!0)}}static getBlob(...G){if(dr()){const ue=G.map(ve=>ve instanceof mi?ve.data_:ve);return new mi(Ri.apply(null,ue))}{const ue=G.map(L=>Ir(L)?Ds(qn.RAW,L).data:L.data_);let ve=0;ue.forEach(L=>{ve+=L.byteLength});const je=new Uint8Array(ve);let yt=0;return ue.forEach(L=>{for(let z=0;z<L.length;z++)je[yt++]=L[z]}),new mi(je,!0)}}uploadData(){return this.data_}}function Fi(Y){let G;try{G=JSON.parse(Y)}catch{return null}return function yr(Y){return"object"==typeof Y&&!Array.isArray(Y)}(G)?G:null}function Us(Y){const G=Y.lastIndexOf("/",Y.length-2);return-1===G?Y:Y.slice(G+1)}function vt(Y,G){return G}class ie{constructor(G,ue,ve,je){this.server=G,this.local=ue||G,this.writable=!!ve,this.xform=je||vt}}let q=null;function De(){if(q)return q;const Y=[];Y.push(new ie("bucket")),Y.push(new ie("generation")),Y.push(new ie("metageneration")),Y.push(new ie("name","fullPath",!0));const ue=new ie("name");ue.xform=function G(yt,L){return function re(Y){return!Ir(Y)||Y.length<2?Y:Us(Y)}(L)},Y.push(ue);const je=new ie("size");return je.xform=function ve(yt,L){return void 0!==L?Number(L):L},Y.push(je),Y.push(new ie("timeCreated")),Y.push(new ie("updated")),Y.push(new ie("md5Hash",null,!0)),Y.push(new ie("cacheControl",null,!0)),Y.push(new ie("contentDisposition",null,!0)),Y.push(new ie("contentEncoding",null,!0)),Y.push(new ie("contentLanguage",null,!0)),Y.push(new ie("contentType",null,!0)),Y.push(new ie("metadata","customMetadata",!0)),q=Y,q}function kt(Y,G,ue){const ve=Fi(G);return null===ve?null:function it(Y,G,ue){const ve={type:"file"},je=ue.length;for(let yt=0;yt<je;yt++){const L=ue[yt];ve[L.local]=L.xform(ve,G[L.server])}return function Re(Y,G){Object.defineProperty(Y,"ref",{get:function ue(){const yt=new Je(Y.bucket,Y.fullPath);return G._makeStorageReference(yt)}})}(ve,Y),ve}(Y,ve,ue)}function Gt(Y,G){const ue={},ve=G.length;for(let je=0;je<ve;je++){const yt=G[je];yt.writable&&(ue[yt.server]=Y[yt.local])}return JSON.stringify(ue)}const $t="prefixes",cr="items";class Qn{constructor(G,ue,ve,je){this.url=G,this.method=ue,this.handler=ve,this.timeout=je,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ut(Y){if(!Y)throw Me()}function Nr(Y,G){return function ue(ve,je){const yt=kt(Y,je,G);return Ut(null!==yt),yt}}function wi(Y){return function G(ue,ve){let je;return je=401===ue.getStatus()?ue.getErrorText().includes("Firebase App Check token is invalid")?function Jt(){return new At(me.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Ht(){return new At(me.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ue.getStatus()?function _t(Y){return new At(me.QUOTA_EXCEEDED,"Quota for bucket '"+Y+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Y.bucket):403===ue.getStatus()?function ut(Y){return new At(me.UNAUTHORIZED,"User does not have permission to access '"+Y+"'.")}(Y.path):ve,je.status=ue.getStatus(),je.serverResponse=ve.serverResponse,je}}function Sn(Y){const G=wi(Y);return function ue(ve,je){let yt=G(ve,je);return 404===ve.getStatus()&&(yt=function gt(Y){return new At(me.OBJECT_NOT_FOUND,"Object '"+Y+"' does not exist.")}(Y.path)),yt.serverResponse=je.serverResponse,yt}}function Ss(Y,G,ue){const je=Or(G.fullServerUrl(),Y.host,Y._protocol),L=Y.maxOperationRetryTime,z=new Qn(je,"GET",Nr(Y,ue),L);return z.errorHandler=Sn(G),z}function Xe(Y,G,ue,ve,je){const yt={};yt.prefix=G.isRoot?"":G.path+"/",ue&&ue.length>0&&(yt.delimiter=ue),ve&&(yt.pageToken=ve),je&&(yt.maxResults=je);const z=Or(G.bucketOnlyServerUrl(),Y.host,Y._protocol),ne=Y.maxOperationRetryTime,we=new Qn(z,"GET",function Li(Y,G){return function ue(ve,je){const yt=function xi(Y,G,ue){const ve=Fi(ue);return null===ve?null:function Xt(Y,G,ue){const ve={prefixes:[],items:[],nextPageToken:ue.nextPageToken};if(ue[$t])for(const je of ue[$t]){const yt=je.replace(/\/$/,""),L=Y._makeStorageReference(new Je(G,yt));ve.prefixes.push(L)}if(ue[cr])for(const je of ue[cr]){const yt=Y._makeStorageReference(new Je(G,je.name));ve.items.push(yt)}return ve}(Y,G,ve)}(Y,G,je);return Ut(null!==yt),yt}}(Y,G.bucket),ne);return we.urlParams=yt,we.errorHandler=wi(G),we}function $n(Y,G,ue){const ve=Object.assign({},ue);return ve.fullPath=Y.path,ve.size=G.size(),ve.contentType||(ve.contentType=function Kn(Y,G){return Y&&Y.contentType||G&&G.type()||"application/octet-stream"}(null,G)),ve}class Ar{constructor(G,ue,ve,je){this.current=G,this.total=ue,this.finalized=!!ve,this.metadata=je||null}}function ze(Y,G){let ue=null;try{ue=Y.getResponseHeader("X-Goog-Upload-Status")}catch{Ut(!1)}return Ut(!!ue&&-1!==(G||["active"]).indexOf(ue)),ue}const gs={STATE_CHANGED:"state_changed"},Kr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function no(Y){switch(Y){case"running":case"pausing":case"canceling":return Kr.RUNNING;case"paused":return Kr.PAUSED;case"success":return Kr.SUCCESS;case"canceled":return Kr.CANCELED;default:return Kr.ERROR}}class ii{constructor(G,ue,ve){if(function mr(Y){return"function"==typeof Y}(G)||null!=ue||null!=ve)this.next=G,this.error=ue??void 0,this.complete=ve??void 0;else{const yt=G;this.next=yt.next,this.error=yt.error,this.complete=yt.complete}}}function Ms(Y){return(...G)=>{Promise.resolve().then(()=>Y(...G))}}let To=null;class Pa{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ri.NO_ERROR,this.sendPromise_=new Promise(G=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ri.ABORT,G()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ri.NETWORK_ERROR,G()}),this.xhr_.addEventListener("load",()=>{G()})})}send(G,ue,ve,je){if(this.sent_)throw Ie("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ue,G,!0),void 0!==je)for(const yt in je)je.hasOwnProperty(yt)&&this.xhr_.setRequestHeader(yt,je[yt].toString());return void 0!==ve?this.xhr_.send(ve):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ie("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ie("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ie("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ie("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(G){return this.xhr_.getResponseHeader(G)}addUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",G)}removeUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",G)}}class fo extends Pa{initXhr(){this.xhr_.responseType="text"}}function gi(){return To?To():new fo}class oa{constructor(G,ue,ve=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=G,this._blob=ue,this._metadata=ve,this._mappings=De(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=je=>{if(this._request=void 0,this._chunkMultiplier=1,je._codeEquals(me.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const yt=this.isExponentialBackoffExpired();if(Si(je.status,[])){if(!yt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();je=Nn()}this._error=je,this._transition("error")}},this._metadataErrorHandler=je=>{this._request=void 0,je._codeEquals(me.CANCELED)?this.completeTransitions_():(this._error=je,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((je,yt)=>{this._resolve=je,this._reject=yt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const G=this._transferred;return ue=>this._updateProgress(G+ue)}_shouldDoResumable(G){return G.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(G){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ue,ve])=>{switch(this._state){case"running":G(ue,ve);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((G,ue)=>{const ve=function Xn(Y,G,ue,ve,je){const yt=G.bucketOnlyServerUrl(),L=$n(G,ve,je),z={name:L.fullPath},N=Or(yt,Y.host,Y._protocol),we={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${ve.size()}`,"X-Goog-Upload-Header-Content-Type":L.contentType,"Content-Type":"application/json; charset=utf-8"},Ot=Gt(L,ue),fr=new Qn(N,"POST",function hn(ei){let qr;ze(ei);try{qr=ei.getResponseHeader("X-Goog-Upload-URL")}catch{Ut(!1)}return Ut(Ir(qr)),qr},Y.maxUploadRetryTime);return fr.urlParams=z,fr.headers=we,fr.body=Ot,fr.errorHandler=wi(G),fr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),je=this._ref.storage._makeRequest(ve,gi,G,ue);this._request=je,je.getPromise().then(yt=>{this._request=void 0,this._uploadUrl=yt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const G=this._uploadUrl;this._resolveToken((ue,ve)=>{const je=function di(Y,G,ue,ve){const N=new Qn(ue,"POST",function yt(ne){const we=ze(ne,["active","final"]);let Ot=null;try{Ot=ne.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ut(!1)}Ot||Ut(!1);const sn=Number(Ot);return Ut(!isNaN(sn)),new Ar(sn,ve.size(),"final"===we)},Y.maxUploadRetryTime);return N.headers={"X-Goog-Upload-Command":"query"},N.errorHandler=wi(G),N}(this._ref.storage,this._ref._location,G,this._blob),yt=this._ref.storage._makeRequest(je,gi,ue,ve);this._request=yt,yt.getPromise().then(L=>{this._request=void 0,this._updateProgress(L.current),this._needToFetchStatus=!1,L.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const G=262144*this._chunkMultiplier,ue=new Ar(this._transferred,this._blob.size()),ve=this._uploadUrl;this._resolveToken((je,yt)=>{let L;try{L=function xs(Y,G,ue,ve,je,yt,L,z){const N=new Ar(0,0);if(L?(N.current=L.current,N.total=L.total):(N.current=0,N.total=ve.size()),ve.size()!==N.total)throw function Ln(){return new At(me.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const ne=N.total-N.current;let we=ne;je>0&&(we=Math.min(we,je));const Ot=N.current;let hn="";hn=0===we?"finalize":ne===we?"upload, finalize":"upload";const fr={"X-Goog-Upload-Command":hn,"X-Goog-Upload-Offset":`${N.current}`},ei=ve.slice(Ot,Ot+we);if(null===ei)throw On();const hi=new Qn(ue,"POST",function qr(kn,fn){const Xi=ze(kn,["active","final"]),ki=N.current+we,Es=ve.size();let Lo;return Lo="final"===Xi?Nr(G,yt)(kn,fn):null,new Ar(ki,Es,"final"===Xi,Lo)},G.maxUploadRetryTime);return hi.headers=fr,hi.body=ei.uploadData(),hi.progressCallback=z||null,hi.errorHandler=wi(Y),hi}(this._ref._location,this._ref.storage,ve,this._blob,G,this._mappings,ue,this._makeProgressCallback())}catch(N){return this._error=N,void this._transition("error")}const z=this._ref.storage._makeRequest(L,gi,je,yt,!1);this._request=z,z.getPromise().then(N=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(N.current),N.finalized?(this._metadata=N.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((G,ue)=>{const ve=Ss(this._ref.storage,this._ref._location,this._mappings),je=this._ref.storage._makeRequest(ve,gi,G,ue);this._request=je,je.getPromise().then(yt=>{this._request=void 0,this._metadata=yt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((G,ue)=>{const ve=function hr(Y,G,ue,ve,je){const yt=G.bucketOnlyServerUrl(),L={"X-Goog-Upload-Protocol":"multipart"},N=function z(){let hi="";for(let kn=0;kn<2;kn++)hi+=Math.random().toString().slice(2);return hi}();L["Content-Type"]="multipart/related; boundary="+N;const ne=$n(G,ve,je),we=Gt(ne,ue),hn=mi.getBlob("--"+N+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+we+"\r\n--"+N+"\r\nContent-Type: "+ne.contentType+"\r\n\r\n",ve,"\r\n--"+N+"--");if(null===hn)throw On();const fr={name:ne.fullPath},ei=Or(yt,Y.host,Y._protocol),ai=Y.maxUploadRetryTime,Ni=new Qn(ei,"POST",Nr(Y,ue),ai);return Ni.urlParams=fr,Ni.headers=L,Ni.body=hn.uploadData(),Ni.errorHandler=wi(G),Ni}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),je=this._ref.storage._makeRequest(ve,gi,G,ue);this._request=je,je.getPromise().then(yt=>{this._request=void 0,this._metadata=yt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(G){const ue=this._transferred;this._transferred=G,this._transferred!==ue&&this._notifyObservers()}_transition(G){if(this._state!==G)switch(G){case"canceling":case"pausing":this._state=G,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const ue="paused"===this._state;this._state=G,ue&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=G,this._notifyObservers();break;case"canceled":this._error=_r(),this._state=G,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const G=no(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:G,metadata:this._metadata,task:this,ref:this._ref}}on(G,ue,ve,je){const yt=new ii(ue||void 0,ve||void 0,je||void 0);return this._addObserver(yt),()=>{this._removeObserver(yt)}}then(G,ue){return this._promise.then(G,ue)}catch(G){return this.then(null,G)}_addObserver(G){this._observers.push(G),this._notifyObserver(G)}_removeObserver(G){const ue=this._observers.indexOf(G);-1!==ue&&this._observers.splice(ue,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ue=>{this._notifyObserver(ue)})}_finishPromise(){if(void 0!==this._resolve){let G=!0;switch(no(this._state)){case Kr.SUCCESS:Ms(this._resolve.bind(null,this.snapshot))();break;case Kr.CANCELED:case Kr.ERROR:Ms(this._reject.bind(null,this._error))();break;default:G=!1}G&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(G){switch(no(this._state)){case Kr.RUNNING:case Kr.PAUSED:G.next&&Ms(G.next.bind(G,this.snapshot))();break;case Kr.SUCCESS:G.complete&&Ms(G.complete.bind(G))();break;default:G.error&&Ms(G.error.bind(G,this._error))()}}resume(){const G="paused"===this._state||"pausing"===this._state;return G&&this._transition("running"),G}pause(){const G="running"===this._state;return G&&this._transition("pausing"),G}cancel(){const G="running"===this._state||"pausing"===this._state;return G&&this._transition("canceling"),G}}class Qs{constructor(G,ue){this._service=G,this._location=ue instanceof Je?ue:Je.makeFromUrl(ue,G.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(G,ue){return new Qs(G,ue)}get root(){const G=new Je(this._location.bucket,"");return this._newRef(this._service,G)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Us(this._location.path)}get storage(){return this._service}get parent(){const G=function ss(Y){if(0===Y.length)return null;const G=Y.lastIndexOf("/");return-1===G?"":Y.slice(0,G)}(this._location.path);if(null===G)return null;const ue=new Je(this._location.bucket,G);return new Qs(this._service,ue)}_throwIfRoot(G){if(""===this._location.path)throw ot(G)}}function js(Y,G,ue){return po.apply(this,arguments)}function po(){return(po=(0,Ce.A)(function*(Y,G,ue){const je=yield Yn(Y,{pageToken:ue});G.prefixes.push(...je.prefixes),G.items.push(...je.items),null!=je.nextPageToken&&(yield js(Y,G,je.nextPageToken))})).apply(this,arguments)}function Yn(Y,G){null!=G&&"number"==typeof G.maxResults&&Sr("options.maxResults",1,1e3,G.maxResults);const ue=G||{},ve=Xe(Y.storage,Y._location,"/",ue.pageToken,ue.maxResults);return Y.storage.makeRequestWithTokens(ve,gi)}function Xs(Y){Y._throwIfRoot("getDownloadURL");const G=function wt(Y,G,ue){const je=Or(G.fullServerUrl(),Y.host,Y._protocol),L=Y.maxOperationRetryTime,z=new Qn(je,"GET",function Ui(Y,G){return function ue(ve,je){const yt=kt(Y,je,G);return Ut(null!==yt),function Pn(Y,G,ue,ve){const je=Fi(G);if(null===je||!Ir(je.downloadTokens))return null;const yt=je.downloadTokens;if(0===yt.length)return null;const L=encodeURIComponent;return yt.split(",").map(ne=>{const Ot=Y.fullPath;return Or("/b/"+L(Y.bucket)+"/o/"+L(Ot),ue,ve)+or({alt:"media",token:ne})})[0]}(yt,je,Y.host,Y._protocol)}}(Y,ue),L);return z.errorHandler=Sn(G),z}(Y.storage,Y._location,De());return Y.storage.makeRequestWithTokens(G,gi).then(ue=>{if(null===ue)throw function En(){return new At(me.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return ue})}function es(Y,G){const ue=function hs(Y,G){const ue=G.split("/").filter(ve=>ve.length>0).join("/");return 0===Y.length?ue:Y+"/"+ue}(Y._location.path,G),ve=new Je(Y._location.bucket,ue);return new Qs(Y.storage,ve)}function Hs(Y,G){if(Y instanceof In){const ue=Y;if(null==ue._bucket)throw function Yr(){return new At(me.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+It+"' property when initializing the app?")}();const ve=new Qs(ue,ue._bucket);return null!=G?Hs(ve,G):ve}return void 0!==G?es(Y,G):Y}function so(Y,G){if(G&&function Ps(Y){return/^[A-Za-z]+:\/\//.test(Y)}(G)){if(Y instanceof In)return function Ii(Y,G){return new Qs(Y,G)}(Y,G);throw Ke("To use ref(service, url), the first argument must be a Storage instance.")}return Hs(Y,G)}function vr(Y,G){const ue=G?.[It];return null==ue?null:Je.makeFromBucketSpec(ue,Y)}class In{constructor(G,ue,ve,je,yt){this.app=G,this._authProvider=ue,this._appCheckProvider=ve,this._url=je,this._firebaseVersion=yt,this._bucket=null,this._host=St,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=je?Je.makeFromBucketSpec(je,this._host):vr(this._host,this.app.options)}get host(){return this._host}set host(G){this._host=G,this._bucket=null!=this._url?Je.makeFromBucketSpec(this._url,G):vr(G,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(G){Sr("time",0,Number.POSITIVE_INFINITY,G),this._maxUploadRetryTime=G}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(G){Sr("time",0,Number.POSITIVE_INFINITY,G),this._maxOperationRetryTime=G}_getAuthToken(){var G=this;return(0,Ce.A)(function*(){if(G._overrideAuthToken)return G._overrideAuthToken;const ue=G._authProvider.getImmediate({optional:!0});if(ue){const ve=yield ue.getToken();if(null!==ve)return ve.accessToken}return null})()}_getAppCheckToken(){var G=this;return(0,Ce.A)(function*(){const ue=G._appCheckProvider.getImmediate({optional:!0});return ue?(yield ue.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(G=>G.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(G){return new Qs(this,G)}_makeRequest(G,ue,ve,je,yt=!0){if(this._deleted)return new Vt(tt());{const L=function Mn(Y,G,ue,ve,je,yt,L=!0){const z=or(Y.urlParams),N=Y.url+z,ne=Object.assign({},Y.headers);return function Br(Y,G){G&&(Y["X-Firebase-GMPID"]=G)}(ne,G),function Zn(Y,G){null!==G&&G.length>0&&(Y.Authorization="Firebase "+G)}(ne,ue),function Bn(Y,G){Y["X-Firebase-Storage-Version"]="webjs/"+(G??"AppManager")}(ne,yt),function rr(Y,G){null!==G&&(Y["X-Firebase-AppCheck"]=G)}(ne,ve),new pi(N,Y.method,ne,Y.body,Y.successCodes,Y.additionalRetryCodes,Y.handler,Y.errorHandler,Y.timeout,Y.progressCallback,je,L)}(G,this._appId,ve,je,ue,this._firebaseVersion,yt);return this._requests.add(L),L.getPromise().then(()=>this._requests.delete(L),()=>this._requests.delete(L)),L}}makeRequestWithTokens(G,ue){var ve=this;return(0,Ce.A)(function*(){const[je,yt]=yield Promise.all([ve._getAuthToken(),ve._getAppCheckToken()]);return ve._makeRequest(G,ue,je,yt).getPromise()})()}}const gr="@firebase/storage";function Jr(Y,G){return so(Y=(0,mt.Ku)(Y),G)}function ts(Y,{instanceIdentifier:G}){const ue=Y.getProvider("app").getImmediate(),ve=Y.getProvider("auth-internal"),je=Y.getProvider("app-check-internal");return new In(ue,ve,je,G,Ve.SDK_VERSION)}!function br(){(0,Ve._registerComponent)(new dt.uA("storage",ts,"PUBLIC").setMultipleInstances(!0)),(0,Ve.registerVersion)(gr,"0.13.2",""),(0,Ve.registerVersion)(gr,"0.13.2","esm2017")}();class Ys{constructor(G,ue,ve){this._delegate=G,this.task=ue,this.ref=ve}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Fn{constructor(G,ue){this._delegate=G,this._ref=ue,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ys(this._delegate.snapshot,this,this._ref)}then(G,ue){return this._delegate.then(ve=>{if(G)return G(new Ys(ve,this,this._ref))},ue)}on(G,ue,ve,je){let yt;return ue&&(yt="function"==typeof ue?L=>ue(new Ys(L,this,this._ref)):{next:ue.next?L=>ue.next(new Ys(L,this,this._ref)):void 0,complete:ue.complete||void 0,error:ue.error||void 0}),this._delegate.on(G,yt,ve||void 0,je||void 0)}}class Vr{constructor(G,ue){this._delegate=G,this._service=ue}get prefixes(){return this._delegate.prefixes.map(G=>new Gr(G,this._service))}get items(){return this._delegate.items.map(G=>new Gr(G,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gr{constructor(G,ue){this._delegate=G,this.storage=ue}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(G){const ue=function Gn(Y,G){return es(Y,G)}(this._delegate,G);return new Gr(ue,this.storage)}get root(){return new Gr(this._delegate.root,this.storage)}get parent(){const G=this._delegate.parent;return null==G?null:new Gr(G,this.storage)}put(G,ue){return this._throwIfRoot("put"),new Fn(function xr(Y,G,ue){return function Vo(Y,G,ue){return Y._throwIfRoot("uploadBytesResumable"),new oa(Y,new mi(G),ue)}(Y=(0,mt.Ku)(Y),G,ue)}(this._delegate,G,ue),this)}putString(G,ue=qn.RAW,ve){this._throwIfRoot("putString");const je=Ds(ue,G),yt=Object.assign({},ve);return null==yt.contentType&&null!=je.contentType&&(yt.contentType=je.contentType),new Fn(new oa(this._delegate,new mi(je.data,!0),yt),this)}listAll(){return function ys(Y){return function Xo(Y){const G={prefixes:[],items:[]};return js(Y,G).then(()=>G)}(Y=(0,mt.Ku)(Y))}(this._delegate).then(G=>new Vr(G,this.storage))}list(G){return function fs(Y,G){return Yn(Y=(0,mt.Ku)(Y),G)}(this._delegate,G||void 0).then(ue=>new Vr(ue,this.storage))}getMetadata(){return function os(Y){return function Ei(Y){Y._throwIfRoot("getMetadata");const G=Ss(Y.storage,Y._location,De());return Y.storage.makeRequestWithTokens(G,gi)}(Y=(0,mt.Ku)(Y))}(this._delegate)}updateMetadata(G){return function wn(Y,G){return function Wr(Y,G){Y._throwIfRoot("updateMetadata");const ue=function jt(Y,G,ue,ve){const yt=Or(G.fullServerUrl(),Y.host,Y._protocol),z=Gt(ue,ve),ne=Y.maxOperationRetryTime,we=new Qn(yt,"PATCH",Nr(Y,ve),ne);return we.headers={"Content-Type":"application/json; charset=utf-8"},we.body=z,we.errorHandler=Sn(G),we}(Y.storage,Y._location,G,De());return Y.storage.makeRequestWithTokens(ue,gi)}(Y=(0,mt.Ku)(Y),G)}(this._delegate,G)}getDownloadURL(){return function Wn(Y){return Xs(Y=(0,mt.Ku)(Y))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Fr(Y){return function Mi(Y){Y._throwIfRoot("deleteObject");const G=function _n(Y,G){const ve=Or(G.fullServerUrl(),Y.host,Y._protocol),z=new Qn(ve,"DELETE",function L(N,ne){},Y.maxOperationRetryTime);return z.successCodes=[200,204],z.errorHandler=Sn(G),z}(Y.storage,Y._location);return Y.storage.makeRequestWithTokens(G,gi)}(Y=(0,mt.Ku)(Y))}(this._delegate)}_throwIfRoot(G){if(""===this._delegate._location.path)throw ot(G)}}class Ti{constructor(G,ue){this.app=G,this._delegate=ue}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(G){if(yi(G))throw Ke("ref() expected a child path but got a URL, use refFromURL instead.");return new Gr(Jr(this._delegate,G),this)}refFromURL(G){if(!yi(G))throw Ke("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Je.makeFromUrl(G,this._delegate.host)}catch{throw Ke("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gr(Jr(this._delegate,G),this)}setMaxUploadRetryTime(G){this._delegate.maxUploadRetryTime=G}setMaxOperationRetryTime(G){this._delegate.maxOperationRetryTime=G}useEmulator(G,ue,ve={}){!function Wi(Y,G,ue,ve={}){!function Qt(Y,G,ue,ve={}){Y.host=`${G}:${ue}`,Y._protocol="http";const{mockUserToken:je}=ve;je&&(Y._overrideAuthToken="string"==typeof je?je:(0,mt.Fy)(je,Y.app.options.projectId))}(Y,G,ue,ve)}(this._delegate,G,ue,ve)}}function yi(Y){return/^[A-Za-z]+:\/\//.test(Y)}function Cr(Y,{instanceIdentifier:G}){const ue=Y.getProvider("app-compat").getImmediate(),ve=Y.getProvider("storage").getImmediate({identifier:G});return new Ti(ue,ve)}!function Os(Y){const G={TaskState:Kr,TaskEvent:gs,StringFormat:qn,Storage:Ti,Reference:Gr};Y.INTERNAL.registerComponent(new dt.uA("storage-compat",Cr,"PUBLIC").setServiceProps(G).setMultipleInstances(!0)),Y.registerVersion("@firebase/storage-compat","0.3.12")}(be.A);var Mr=W(7935);function vs(Y){const G=function Pr(Y){return new fe.c(G=>{const ue=L=>G.next(L);ue(Y.snapshot);const yt=Y.on("state_changed",ue);return Y.then(L=>{ue(L),G.complete()},L=>{ue(Y.snapshot),(L=>{G.error(L)})(L)}),function(){yt()}}).pipe((0,ke.B)(0))}(Y);return{task:Y,then:Y.then.bind(Y),catch:Y.catch.bind(Y),pause:Y.pause.bind(Y),cancel:Y.cancel.bind(Y),resume:Y.resume.bind(Y),snapshotChanges:()=>G,percentageChanges:()=>G.pipe((0,Pe.T)(ue=>ue.bytesTransferred/ue.totalBytes*100))}}function vi(Y){return{getDownloadURL:()=>(0,Te.of)(void 0).pipe(d.Oe,(0,_e.n)(()=>Y.getDownloadURL()),d.U0),getMetadata:()=>(0,Te.of)(void 0).pipe(d.Oe,(0,_e.n)(()=>Y.getMetadata()),d.U0),delete:()=>(0,pe.H)(Y.delete()),child:G=>vi(Y.child(G)),updateMetadata:G=>(0,pe.H)(Y.updateMetadata(G)),put:(G,ue)=>vs(Y.put(G,ue)),putString:(G,ue,ve)=>vs(Y.putString(G,ue,ve)),list:G=>(0,pe.H)(Y.list(G)),listAll:()=>(0,pe.H)(Y.listAll())}}const zs=new Qe.nKC("angularfire2.storageBucket"),qi=new Qe.nKC("angularfire2.storage.maxUploadRetryTime"),oo=new Qe.nKC("angularfire2.storage.maxOperationRetryTime"),bs=new Qe.nKC("angularfire2.storage.use-emulator");let bi=(()=>{class Y{storage;constructor(ue,ve,je,yt,L,z,N,ne,we,Ot){const sn=(0,$e.iB)(ue,L,ve);this.storage=(0,$e.BM)(`${sn.name}.storage.${je}`,"AngularFireStorage",sn.name,()=>{const hn=L.runOutsideAngular(()=>sn.storage(je||void 0)),fr=we;return fr&&hn.useEmulator(...fr),N&&hn.setMaxUploadRetryTime(N),ne&&hn.setMaxOperationRetryTime(ne),hn},[N,ne])}ref(ue){return vi(this.storage.ref(ue))}refFromURL(ue){return vi(this.storage.refFromURL(ue))}upload(ue,ve,je){return vi(this.storage.ref(ue)).put(ve,je)}static \u0275fac=function(ve){return new(ve||Y)(Qe.KVO($e.rx),Qe.KVO($e.uP,8),Qe.KVO(zs,8),Qe.KVO(Qe.Agw),Qe.KVO(Qe.SKi),Qe.KVO(d.u0),Qe.KVO(qi,8),Qe.KVO(oo,8),Qe.KVO(bs,8),Qe.KVO(d.Jv,8))};static \u0275prov=Qe.jDH({token:Y,factory:Y.\u0275fac,providedIn:"any"})}return Y})(),aa=(()=>{class Y{static \u0275fac=function(ve){return new(ve||Y)};static \u0275mod=Qe.$C({type:Y});static \u0275inj=Qe.G2t({})}return Y})(),Qi=(()=>{class Y{constructor(){Mr.A.registerVersion("angularfire",d.xv.full,"gcs-compat")}static \u0275fac=function(ve){return new(ve||Y)};static \u0275mod=Qe.$C({type:Y});static \u0275inj=Qe.G2t({providers:[bi],imports:[aa]})}return Y})()},9253:(en,at,W)=>{W.d(at,{BM:()=>dt,Gt:()=>ke,bf:()=>mt,e7:()=>Pe,iB:()=>be,rx:()=>Qe,uP:()=>$e});var d=W(7705),fe=W(1825),Te=W(7935);const pe=["ngOnDestroy"],ke=(Mt,an,At,me={})=>new Proxy(Mt,{get:(qe,Me)=>At.runOutsideAngular(()=>{if(Mt[Me])return me?.spy?.get&&me.spy.get(Me,Mt[Me]),Mt[Me];if(pe.indexOf(Me)>-1)return()=>{};const gt=an.toPromise().then(_t=>{const Ht=_t?.[Me];return"function"==typeof Ht?Ht.bind(_t):Ht?.then?Ht.then(Jt=>At.run(()=>Jt)):At.run(()=>Ht)});return new Proxy(()=>{},{get:(_t,Ht)=>gt[Ht],apply:(_t,Ht,Jt)=>gt.then(ut=>{const Nn=ut?.(...Jt);return me?.spy?.apply&&me.spy.apply(Me,Jt,Nn),Nn})})})}),Pe=(Mt,an)=>{an.forEach(At=>{Object.getOwnPropertyNames(At.prototype||At).forEach(me=>{Object.defineProperty(Mt.prototype,me,Object.getOwnPropertyDescriptor(At.prototype||At,me))})})};class _e{constructor(an){return an}}const Qe=new d.nKC("angularfire2.app.options"),$e=new d.nKC("angularfire2.app.name");function be(Mt,an,At){const qe="object"==typeof At&&At||{};qe.name=qe.name||"string"==typeof At&&At||"[DEFAULT]";const gt=Te.A.apps.filter(_t=>_t&&_t.name===qe.name)[0]||an.runOutsideAngular(()=>Te.A.initializeApp(Mt,qe));try{if(JSON.stringify(Mt)!==JSON.stringify(gt.options)){const _t=!!module.hot;Ce("error",`${gt.name} Firebase App already initialized with different options${_t?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new _e(gt)}const Ce=(Mt,...an)=>{(0,d.naY)()&&typeof console<"u"&&console[Mt](...an)},Ve={provide:_e,useFactory:be,deps:[Qe,d.SKi,[new d.Xx1,$e]]};let mt=(()=>{class Mt{static initializeApp(At,me){return{ngModule:Mt,providers:[{provide:Qe,useValue:At},{provide:$e,useValue:me}]}}constructor(At){Te.A.registerVersion("angularfire",fe.xv.full,"core"),Te.A.registerVersion("angularfire",fe.xv.full,"app-compat"),Te.A.registerVersion("angular",d.xvI.full,At.toString())}static \u0275fac=function(me){return new(me||Mt)(d.KVO(d.Agw))};static \u0275mod=d.$C({type:Mt});static \u0275inj=d.G2t({providers:[Ve]})}return Mt})();function dt(Mt,an,At,me,qe){const[,Me,gt]=globalThis.\u0275AngularfireInstanceCache.find(_t=>_t[0]===Mt)||[];if(Me)return function St(Mt,an){try{return Mt.toString()===an.toString()}catch{return Mt===an}}(qe,gt)||(Nt("error",`${an} was already initialized on the ${At} Firebase App with different settings.${It?" You may need to reload as Firebase is not HMR aware.":""}`),Nt("warn",{is:qe,was:gt})),Me;{const _t=me();return globalThis.\u0275AngularfireInstanceCache.push([Mt,_t,qe]),_t}}const It=typeof module<"u"&&!!module.hot,Nt=(Mt,...an)=>{(0,d.naY)()&&typeof console<"u"&&console[Mt](...an)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(en,at,W)=>{W.d(at,{xv:()=>St,U0:()=>_r,Oe:()=>ut,u0:()=>gt,Jv:()=>an});var d=W(7705),fe=W(7852);(0,fe.registerVersion)("firebase","10.14.1","app");var ke=W(6780),_e=W(9687);const $e=new class Qe extends _e.q{}(class Pe extends ke.R{constructor(Ln,En){super(Ln,En),this.scheduler=Ln,this.work=En}schedule(Ln,En=0){return En>0?super.schedule(Ln,En):(this.delay=En,this.state=Ln,this.scheduler.flush(this),this)}execute(Ln,En){return En>0||this.closed?super.execute(Ln,En):this._execute(Ln,En)}requestAsyncId(Ln,En,ir=0){return null!=ir&&ir>0||null==ir&&this.delay>0?super.requestAsyncId(Ln,En,ir):(Ln.flush(this),0)}});var Ce=W(3236),Ve=W(8141),mt=W(941),dt=W(6745);const St=new d.RxE("ANGULARFIRE2_VERSION");class an{constructor(){return((On,Ln)=>{const En=(0,fe.getApps)(),ir=[];return En.forEach(Ke=>{Ke.container.getProvider(On).instances.forEach(ot=>{ir.includes(ot)||ir.push(ot)})}),ir})(At)}}const At="app-check";function me(){}class qe{zone;delegate;constructor(Ln,En=$e){this.zone=Ln,this.delegate=En}now(){return this.delegate.now()}schedule(Ln,En,ir){const Ke=this.zone;return this.delegate.schedule(function(ot){Ke.runGuarded(()=>{Ln.apply(this,[ot])})},En,ir)}}class Me{zone;task=null;constructor(Ln){this.zone=Ln}call(Ln,En){const ir=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",me,{},me,me)),En.pipe((0,Ve.M)({next:ir,complete:ir,error:ir})).subscribe(Ln).add(ir)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gt=(()=>{class On{ngZone;outsideAngular;insideAngular;constructor(En){this.ngZone=En,this.outsideAngular=En.runOutsideAngular(()=>new qe(Zone.current)),this.insideAngular=En.run(()=>new qe(Zone.current,Ce.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(ir){return new(ir||On)(d.KVO(d.SKi))};static \u0275prov=d.jDH({token:On,factory:On.\u0275fac,providedIn:"root"})}return On})();function _t(){const On=globalThis.\u0275AngularFireScheduler;if(!On)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return On}function ut(On){return On.pipe((0,mt.Q)(_t().outsideAngular))}function _r(On){return function er(On){return function(En){return(En=En.lift(new Me(On.ngZone))).pipe((0,dt._)(On.outsideAngular),(0,mt.Q)(On.insideAngular))}}(_t())(On)}},4341:(en,at,W)=>{W.d(at,{Zm:()=>Nt,me:()=>me,ok:()=>Y,JD:()=>kr,j4:()=>Qt,YN:()=>je,BC:()=>Zn,cb:()=>Bn,vS:()=>io,xH:()=>ys,X1:()=>yt,wz:()=>fs,k0:()=>Jt,qT:()=>Xo,y7:()=>Wi});var d=W(7705),fe=W(177),Te=W(8455),pe=W(1985),ke=W(3073),Pe=W(8750),_e=W(9326),Qe=W(4360),$e=W(6450),be=W(8496),Ve=W(6354);let mt=(()=>{class L{constructor(N,ne){this._renderer=N,this._elementRef=ne,this.onChange=we=>{},this.onTouched=()=>{}}setProperty(N,ne){this._renderer.setProperty(this._elementRef.nativeElement,N,ne)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(d.sFG),d.rXU(d.aKT))}}static{this.\u0275dir=d.FsC({type:L})}}return L})(),dt=(()=>{class L extends mt{static{this.\u0275fac=function(){let N;return function(we){return(N||(N=d.xGo(L)))(we||L)}}()}static{this.\u0275dir=d.FsC({type:L,features:[d.Vt3]})}}return L})();const St=new d.nKC("NgValueAccessor"),It={provide:St,useExisting:(0,d.Rfq)(()=>Nt),multi:!0};let Nt=(()=>{class L extends dt{writeValue(N){this.setProperty("checked",N)}static{this.\u0275fac=function(){let N;return function(we){return(N||(N=d.xGo(L)))(we||L)}}()}static{this.\u0275dir=d.FsC({type:L,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(ne,we){1&ne&&d.bIt("change",function(sn){return we.onChange(sn.target.checked)})("blur",function(){return we.onTouched()})},features:[d.Jv_([It]),d.Vt3]})}}return L})();const Mt={provide:St,useExisting:(0,d.Rfq)(()=>me),multi:!0},At=new d.nKC("CompositionEventMode");let me=(()=>{class L extends mt{constructor(N,ne,we){super(N,ne),this._compositionMode=we,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function an(){const L=(0,fe.QT)()?(0,fe.QT)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(N){this.setProperty("value",N??"")}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(d.sFG),d.rXU(d.aKT),d.rXU(At,8))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ne,we){1&ne&&d.bIt("input",function(sn){return we._handleInput(sn.target.value)})("blur",function(){return we.onTouched()})("compositionstart",function(){return we._compositionStart()})("compositionend",function(sn){return we._compositionEnd(sn.target.value)})},features:[d.Jv_([Mt]),d.Vt3]})}}return L})();function qe(L){return null==L||("string"==typeof L||Array.isArray(L))&&0===L.length}function Me(L){return null!=L&&"number"==typeof L.length}const gt=new d.nKC("NgValidators"),_t=new d.nKC("NgAsyncValidators"),Ht=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Jt{static min(z){return function ut(L){return z=>{if(qe(z.value)||qe(L))return null;const N=parseFloat(z.value);return!isNaN(N)&&N<L?{min:{min:L,actual:z.value}}:null}}(z)}static max(z){return function Nn(L){return z=>{if(qe(z.value)||qe(L))return null;const N=parseFloat(z.value);return!isNaN(N)&&N>L?{max:{max:L,actual:z.value}}:null}}(z)}static required(z){return function _r(L){return qe(L.value)?{required:!0}:null}(z)}static requiredTrue(z){return function er(L){return!0===L.value?null:{required:!0}}(z)}static email(z){return function ui(L){return qe(L.value)||Ht.test(L.value)?null:{email:!0}}(z)}static minLength(z){return function Yr(L){return z=>qe(z.value)||!Me(z.value)?null:z.value.length<L?{minlength:{requiredLength:L,actualLength:z.value.length}}:null}(z)}static maxLength(z){return function On(L){return z=>Me(z.value)&&z.value.length>L?{maxlength:{requiredLength:L,actualLength:z.value.length}}:null}(z)}static pattern(z){return function Ln(L){if(!L)return En;let z,N;return"string"==typeof L?(N="","^"!==L.charAt(0)&&(N+="^"),N+=L,"$"!==L.charAt(L.length-1)&&(N+="$"),z=new RegExp(N)):(N=L.toString(),z=L),ne=>{if(qe(ne.value))return null;const we=ne.value;return z.test(we)?null:{pattern:{requiredPattern:N,actualValue:we}}}}(z)}static nullValidator(z){return null}static compose(z){return Je(z)}static composeAsync(z){return Rn(z)}}function En(L){return null}function ir(L){return null!=L}function Ke(L){return(0,d.jNT)(L)?(0,Te.H)(L):L}function tt(L){let z={};return L.forEach(N=>{z=null!=N?{...z,...N}:z}),0===Object.keys(z).length?null:z}function ot(L,z){return z.map(N=>N(L))}function Ie(L){return L.map(z=>function nt(L){return!L.validate}(z)?z:N=>z.validate(N))}function Je(L){if(!L)return null;const z=L.filter(ir);return 0==z.length?null:function(N){return tt(ot(N,z))}}function Vt(L){return null!=L?Je(Ie(L)):null}function Rn(L){if(!L)return null;const z=L.filter(ir);return 0==z.length?null:function(N){return function Ce(...L){const z=(0,_e.ms)(L),{args:N,keys:ne}=(0,ke.D)(L),we=new pe.c(Ot=>{const{length:sn}=N;if(!sn)return void Ot.complete();const hn=new Array(sn);let fr=sn,ei=sn;for(let qr=0;qr<sn;qr++){let ai=!1;(0,Pe.Tg)(N[qr]).subscribe((0,Qe._)(Ot,Ni=>{ai||(ai=!0,ei--),hn[qr]=Ni},()=>fr--,void 0,()=>{(!fr||!ai)&&(ei||Ot.next(ne?(0,be.e)(ne,hn):hn),Ot.complete())}))}});return z?we.pipe((0,$e.I)(z)):we}(ot(N,z).map(Ke)).pipe((0,Ve.T)(tt))}}function dn(L){return null!=L?Rn(Ie(L)):null}function Yt(L,z){return null===L?[z]:Array.isArray(L)?[...L,z]:[L,z]}function mr(L){return L._rawValidators}function yr(L){return L._rawAsyncValidators}function Ir(L){return L?Array.isArray(L)?L:[L]:[]}function xn(L,z){return Array.isArray(L)?L.includes(z):L===z}function dr(L,z){const N=Ir(z);return Ir(L).forEach(we=>{xn(N,we)||N.push(we)}),N}function Sr(L,z){return Ir(z).filter(N=>!xn(L,N))}class Or{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(z){this._rawValidators=z||[],this._composedValidatorFn=Vt(this._rawValidators)}_setAsyncValidators(z){this._rawAsyncValidators=z||[],this._composedAsyncValidatorFn=dn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(z){this._onDestroyCallbacks.push(z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(z=>z()),this._onDestroyCallbacks=[]}reset(z=void 0){this.control&&this.control.reset(z)}hasError(z,N){return!!this.control&&this.control.hasError(z,N)}getError(z,N){return this.control?this.control.getError(z,N):null}}class or extends Or{get formDirective(){return null}get path(){return null}}class ri extends Or{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Si{constructor(z){this._cd=z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zn=(()=>{class L extends Si{constructor(N){super(N)}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(ri,2))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ne,we){2&ne&&d.AVh("ng-untouched",we.isUntouched)("ng-touched",we.isTouched)("ng-pristine",we.isPristine)("ng-dirty",we.isDirty)("ng-valid",we.isValid)("ng-invalid",we.isInvalid)("ng-pending",we.isPending)},features:[d.Vt3]})}}return L})(),Bn=(()=>{class L extends Si{constructor(N){super(N)}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(or,10))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ne,we){2&ne&&d.AVh("ng-untouched",we.isUntouched)("ng-touched",we.isTouched)("ng-pristine",we.isPristine)("ng-dirty",we.isDirty)("ng-valid",we.isValid)("ng-invalid",we.isInvalid)("ng-pending",we.isPending)("ng-submitted",we.isSubmitted)},features:[d.Vt3]})}}return L})();const mi="VALID",Fi="INVALID",ss="PENDING",hs="DISABLED";function Us(L){return(re(L)?L.validators:L)||null}function ie(L,z){return(re(z)?z.asyncValidators:L)||null}function re(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}function De(L,z,N){const ne=L.controls;if(!(z?Object.keys(ne):ne).length)throw new d.wOt(1e3,"");if(!ne[N])throw new d.wOt(1001,"")}function Re(L,z,N){L._forEachChild((ne,we)=>{if(void 0===N[we])throw new d.wOt(1002,"")})}class it{constructor(z,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(z),this._assignAsyncValidators(N)}get validator(){return this._composedValidatorFn}set validator(z){this._rawValidators=this._composedValidatorFn=z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(z){this._rawAsyncValidators=this._composedAsyncValidatorFn=z}get parent(){return this._parent}get valid(){return this.status===mi}get invalid(){return this.status===Fi}get pending(){return this.status==ss}get disabled(){return this.status===hs}get enabled(){return this.status!==hs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(z){this._assignValidators(z)}setAsyncValidators(z){this._assignAsyncValidators(z)}addValidators(z){this.setValidators(dr(z,this._rawValidators))}addAsyncValidators(z){this.setAsyncValidators(dr(z,this._rawAsyncValidators))}removeValidators(z){this.setValidators(Sr(z,this._rawValidators))}removeAsyncValidators(z){this.setAsyncValidators(Sr(z,this._rawAsyncValidators))}hasValidator(z){return xn(this._rawValidators,z)}hasAsyncValidator(z){return xn(this._rawAsyncValidators,z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(z={}){this.touched=!0,this._parent&&!z.onlySelf&&this._parent.markAsTouched(z)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(z=>z.markAllAsTouched())}markAsUntouched(z={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!z.onlySelf&&this._parent._updateTouched(z)}markAsDirty(z={}){this.pristine=!1,this._parent&&!z.onlySelf&&this._parent.markAsDirty(z)}markAsPristine(z={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!z.onlySelf&&this._parent._updatePristine(z)}markAsPending(z={}){this.status=ss,!1!==z.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!z.onlySelf&&this._parent.markAsPending(z)}disable(z={}){const N=this._parentMarkedDirty(z.onlySelf);this.status=hs,this.errors=null,this._forEachChild(ne=>{ne.disable({...z,onlySelf:!0})}),this._updateValue(),!1!==z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...z,skipPristineCheck:N}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(z={}){const N=this._parentMarkedDirty(z.onlySelf);this.status=mi,this._forEachChild(ne=>{ne.enable({...z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent}),this._updateAncestors({...z,skipPristineCheck:N}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(z){this._parent&&!z.onlySelf&&(this._parent.updateValueAndValidity(z),z.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(z){this._parent=z}getRawValue(){return this.value}updateValueAndValidity(z={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mi||this.status===ss)&&this._runAsyncValidator(z.emitEvent)),!1!==z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!z.onlySelf&&this._parent.updateValueAndValidity(z)}_updateTreeValidity(z={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hs:mi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(z){if(this.asyncValidator){this.status=ss,this._hasOwnPendingAsyncValidator=!0;const N=Ke(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:z})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(z,N={}){this.errors=z,this._updateControlsErrors(!1!==N.emitEvent)}get(z){let N=z;return null==N||(Array.isArray(N)||(N=N.split(".")),0===N.length)?null:N.reduce((ne,we)=>ne&&ne._find(we),this)}getError(z,N){const ne=N?this.get(N):this;return ne&&ne.errors?ne.errors[z]:null}hasError(z,N){return!!this.getError(z,N)}get root(){let z=this;for(;z._parent;)z=z._parent;return z}_updateControlsErrors(z){this.status=this._calculateStatus(),z&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(z)}_initObservables(){this.valueChanges=new d.bkB,this.statusChanges=new d.bkB}_calculateStatus(){return this._allControlsDisabled()?hs:this.errors?Fi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ss)?ss:this._anyControlsHaveStatus(Fi)?Fi:mi}_anyControlsHaveStatus(z){return this._anyControls(N=>N.status===z)}_anyControlsDirty(){return this._anyControls(z=>z.dirty)}_anyControlsTouched(){return this._anyControls(z=>z.touched)}_updatePristine(z={}){this.pristine=!this._anyControlsDirty(),this._parent&&!z.onlySelf&&this._parent._updatePristine(z)}_updateTouched(z={}){this.touched=this._anyControlsTouched(),this._parent&&!z.onlySelf&&this._parent._updateTouched(z)}_registerOnCollectionChange(z){this._onCollectionChange=z}_setUpdateStrategy(z){re(z)&&null!=z.updateOn&&(this._updateOn=z.updateOn)}_parentMarkedDirty(z){return!z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(z){return null}_assignValidators(z){this._rawValidators=Array.isArray(z)?z.slice():z,this._composedValidatorFn=function vt(L){return Array.isArray(L)?Vt(L):L||null}(this._rawValidators)}_assignAsyncValidators(z){this._rawAsyncValidators=Array.isArray(z)?z.slice():z,this._composedAsyncValidatorFn=function q(L){return Array.isArray(L)?dn(L):L||null}(this._rawAsyncValidators)}}class kt extends it{constructor(z,N,ne){super(Us(N),ie(ne,N)),this.controls=z,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(z,N){return this.controls[z]?this.controls[z]:(this.controls[z]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(z,N,ne={}){this.registerControl(z,N),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(z,N={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(z,N,ne={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],N&&this.registerControl(z,N),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(z){return this.controls.hasOwnProperty(z)&&this.controls[z].enabled}setValue(z,N={}){Re(this,0,z),Object.keys(z).forEach(ne=>{De(this,!0,ne),this.controls[ne].setValue(z[ne],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(z,N={}){null!=z&&(Object.keys(z).forEach(ne=>{const we=this.controls[ne];we&&we.patchValue(z[ne],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(z={},N={}){this._forEachChild((ne,we)=>{ne.reset(z?z[we]:null,{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(z,N,ne)=>(z[ne]=N.getRawValue(),z))}_syncPendingControls(){let z=this._reduceChildren(!1,(N,ne)=>!!ne._syncPendingControls()||N);return z&&this.updateValueAndValidity({onlySelf:!0}),z}_forEachChild(z){Object.keys(this.controls).forEach(N=>{const ne=this.controls[N];ne&&z(ne,N)})}_setUpControls(){this._forEachChild(z=>{z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(z){for(const[N,ne]of Object.entries(this.controls))if(this.contains(N)&&z(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(N,ne,we)=>((ne.enabled||this.disabled)&&(N[we]=ne.value),N))}_reduceChildren(z,N){let ne=z;return this._forEachChild((we,Ot)=>{ne=N(ne,we,Ot)}),ne}_allControlsDisabled(){for(const z of Object.keys(this.controls))if(this.controls[z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(z){return this.controls.hasOwnProperty(z)?this.controls[z]:null}}class $t extends kt{}const Xt=new d.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>xi}),xi="always";function Qn(L,z){return[...z.path,L]}function Ut(L,z,N=xi){wi(L,z),z.valueAccessor.writeValue(L.value),(L.disabled||"always"===N)&&z.valueAccessor.setDisabledState?.(L.disabled),function Ss(L,z){z.valueAccessor.registerOnChange(N=>{L._pendingValue=N,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&Ye(L,z)})}(L,z),function wt(L,z){const N=(ne,we)=>{z.valueAccessor.writeValue(ne),we&&z.viewToModelUpdate(ne)};L.registerOnChange(N),z._registerOnDestroy(()=>{L._unregisterOnChange(N)})}(L,z),function Xe(L,z){z.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&Ye(L,z),"submit"!==L.updateOn&&L.markAsTouched()})}(L,z),function Ui(L,z){if(z.valueAccessor.setDisabledState){const N=ne=>{z.valueAccessor.setDisabledState(ne)};L.registerOnDisabledChange(N),z._registerOnDestroy(()=>{L._unregisterOnDisabledChange(N)})}}(L,z)}function Nr(L,z,N=!0){const ne=()=>{};z.valueAccessor&&(z.valueAccessor.registerOnChange(ne),z.valueAccessor.registerOnTouched(ne)),Sn(L,z),L&&(z._invokeOnDestroyCallbacks(),L._registerOnCollectionChange(()=>{}))}function Li(L,z){L.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(z)})}function wi(L,z){const N=mr(L);null!==z.validator?L.setValidators(Yt(N,z.validator)):"function"==typeof N&&L.setValidators([N]);const ne=yr(L);null!==z.asyncValidator?L.setAsyncValidators(Yt(ne,z.asyncValidator)):"function"==typeof ne&&L.setAsyncValidators([ne]);const we=()=>L.updateValueAndValidity();Li(z._rawValidators,we),Li(z._rawAsyncValidators,we)}function Sn(L,z){let N=!1;if(null!==L){if(null!==z.validator){const we=mr(L);if(Array.isArray(we)&&we.length>0){const Ot=we.filter(sn=>sn!==z.validator);Ot.length!==we.length&&(N=!0,L.setValidators(Ot))}}if(null!==z.asyncValidator){const we=yr(L);if(Array.isArray(we)&&we.length>0){const Ot=we.filter(sn=>sn!==z.asyncValidator);Ot.length!==we.length&&(N=!0,L.setAsyncValidators(Ot))}}}const ne=()=>{};return Li(z._rawValidators,ne),Li(z._rawAsyncValidators,ne),N}function Ye(L,z){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),z.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function Xn(L,z){if(!L.hasOwnProperty("model"))return!1;const N=L.model;return!!N.isFirstChange()||!Object.is(z,N.currentValue)}function xs(L,z){if(!z)return null;let N,ne,we;return Array.isArray(z),z.forEach(Ot=>{Ot.constructor===me?N=Ot:function di(L){return Object.getPrototypeOf(L.constructor)===dt}(Ot)?ne=Ot:we=Ot}),we||ne||N||null}function To(L,z){const N=L.indexOf(z);N>-1&&L.splice(N,1)}function Pa(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}const fo=class extends it{constructor(z=null,N,ne){super(Us(N),ie(ne,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(z),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),re(N)&&(N.nonNullable||N.initialValueIsDefault)&&(this.defaultValue=Pa(z)?z.value:z)}setValue(z,N={}){this.value=this._pendingValue=z,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(z,N={}){this.setValue(z,N)}reset(z=this.defaultValue,N={}){this._applyFormState(z),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(z){this._onChange.push(z)}_unregisterOnChange(z){To(this._onChange,z)}registerOnDisabledChange(z){this._onDisabledChange.push(z)}_unregisterOnDisabledChange(z){To(this._onDisabledChange,z)}_forEachChild(z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(z){Pa(z)?(this.value=this._pendingValue=z.value,z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=z}},Fo={provide:ri,useExisting:(0,d.Rfq)(()=>io)},Vo=(()=>Promise.resolve())();let io=(()=>{class L extends ri{constructor(N,ne,we,Ot,sn,hn){super(),this._changeDetectorRef=sn,this.callSetDisabledState=hn,this.control=new fo,this._registered=!1,this.name="",this.update=new d.bkB,this._parent=N,this._setValidators(ne),this._setAsyncValidators(we),this.valueAccessor=xs(0,Ot)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const ne=N.name.previousValue;this.formDirective.removeControl({name:ne,path:this._getPath(ne)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),Xn(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ut(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){Vo.then(()=>{this.control.setValue(N,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(N){const ne=N.isDisabled.currentValue,we=0!==ne&&(0,d.L39)(ne);Vo.then(()=>{we&&!this.control.disabled?this.control.disable():!we&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(N){return this._parent?Qn(N,this._parent):[N]}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(or,9),d.rXU(gt,10),d.rXU(_t,10),d.rXU(St,10),d.rXU(d.gRc,8),d.rXU(Xt,8))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d.Jv_([Fo]),d.Vt3,d.OA$]})}}return L})(),Xo=(()=>{class L{static{this.\u0275fac=function(ne){return new(ne||L)}}static{this.\u0275dir=d.FsC({type:L,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return L})(),Wr=(()=>{class L{static{this.\u0275fac=function(ne){return new(ne||L)}}static{this.\u0275mod=d.$C({type:L})}static{this.\u0275inj=d.G2t({})}}return L})();const Ii=new d.nKC("NgModelWithFormControlWarning"),vr={provide:or,useExisting:(0,d.Rfq)(()=>Qt)};let Qt=(()=>{class L extends or{constructor(N,ne,we){super(),this.callSetDisabledState=we,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.bkB,this._setValidators(N),this._setAsyncValidators(ne)}ngOnChanges(N){this._checkFormPresent(),N.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(N){const ne=this.form.get(N.path);return Ut(ne,N,this.callSetDisabledState),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(N),ne}getControl(N){return this.form.get(N.path)}removeControl(N){Nr(N.control||null,N,!1),function gs(L,z){const N=L.indexOf(z);N>-1&&L.splice(N,1)}(this.directives,N)}addFormGroup(N){this._setUpFormContainer(N)}removeFormGroup(N){this._cleanUpFormContainer(N)}getFormGroup(N){return this.form.get(N.path)}addFormArray(N){this._setUpFormContainer(N)}removeFormArray(N){this._cleanUpFormContainer(N)}getFormArray(N){return this.form.get(N.path)}updateModel(N,ne){this.form.get(N.path).setValue(ne)}onSubmit(N){return this.submitted=!0,function Rs(L,z){L._syncPendingControls(),z.forEach(N=>{const ne=N.control;"submit"===ne.updateOn&&ne._pendingChange&&(N.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(N),"dialog"===N?.target?.method}onReset(){this.resetForm()}resetForm(N=void 0){this.form.reset(N),this.submitted=!1}_updateDomValue(){this.directives.forEach(N=>{const ne=N.control,we=this.form.get(N.path);ne!==we&&(Nr(ne||null,N),(L=>L instanceof fo)(we)&&(Ut(we,N,this.callSetDisabledState),N.control=we))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(N){const ne=this.form.get(N.path);(function jt(L,z){wi(L,z)})(ne,N),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(N){if(this.form){const ne=this.form.get(N.path);ne&&function _n(L,z){return Sn(L,z)}(ne,N)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wi(this.form,this),this._oldForm&&Sn(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(gt,10),d.rXU(_t,10),d.rXU(Xt,8))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["","formGroup",""]],hostBindings:function(ne,we){1&ne&&d.bIt("submit",function(sn){return we.onSubmit(sn)})("reset",function(){return we.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d.Jv_([vr]),d.Vt3,d.OA$]})}}return L})();const mo={provide:ri,useExisting:(0,d.Rfq)(()=>kr)};let kr=(()=>{class L extends ri{set isDisabled(N){}static{this._ngModelWarningSentOnce=!1}constructor(N,ne,we,Ot,sn){super(),this._ngModelWarningConfig=sn,this._added=!1,this.name=null,this.update=new d.bkB,this._ngModelWarningSent=!1,this._parent=N,this._setValidators(ne),this._setAsyncValidators(we),this.valueAccessor=xs(0,Ot)}ngOnChanges(N){this._added||this._setUpControl(),Xn(N,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}get path(){return Qn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(or,13),d.rXU(gt,10),d.rXU(_t,10),d.rXU(St,10),d.rXU(Ii,8))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d.Jv_([mo]),d.Vt3,d.OA$]})}}return L})();const xr={provide:St,useExisting:(0,d.Rfq)(()=>fs),multi:!0};function os(L,z){return null==L?`${z}`:(z&&"object"==typeof z&&(z="Object"),`${L}: ${z}`.slice(0,50))}let fs=(()=>{class L extends dt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(N){this._compareWith=N}writeValue(N){this.value=N;const we=os(this._getOptionId(N),N);this.setProperty("value",we)}registerOnChange(N){this.onChange=ne=>{this.value=this._getOptionValue(ne),N(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(N){for(const ne of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ne),N))return ne;return null}_getOptionValue(N){const ne=function wn(L){return L.split(":")[0]}(N);return this._optionMap.has(ne)?this._optionMap.get(ne):N}static{this.\u0275fac=function(){let N;return function(we){return(N||(N=d.xGo(L)))(we||L)}}()}static{this.\u0275dir=d.FsC({type:L,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ne,we){1&ne&&d.bIt("change",function(sn){return we.onChange(sn.target.value)})("blur",function(){return we.onTouched()})},inputs:{compareWith:"compareWith"},features:[d.Jv_([xr]),d.Vt3]})}}return L})(),ys=(()=>{class L{constructor(N,ne,we){this._element=N,this._renderer=ne,this._select=we,this._select&&(this.id=this._select._registerOption())}set ngValue(N){null!=this._select&&(this._select._optionMap.set(this.id,N),this._setElementValue(os(this.id,N)),this._select.writeValue(this._select.value))}set value(N){this._setElementValue(N),this._select&&this._select.writeValue(this._select.value)}_setElementValue(N){this._renderer.setProperty(this._element.nativeElement,"value",N)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(fs,9))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return L})();const Wn={provide:St,useExisting:(0,d.Rfq)(()=>Bi),multi:!0};function Fr(L,z){return null==L?`${z}`:("string"==typeof z&&(z=`'${z}'`),z&&"object"==typeof z&&(z="Object"),`${L}: ${z}`.slice(0,50))}let Bi=(()=>{class L extends dt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(N){this._compareWith=N}writeValue(N){let ne;if(this.value=N,Array.isArray(N)){const we=N.map(Ot=>this._getOptionId(Ot));ne=(Ot,sn)=>{Ot._setSelected(we.indexOf(sn.toString())>-1)}}else ne=(we,Ot)=>{we._setSelected(!1)};this._optionMap.forEach(ne)}registerOnChange(N){this.onChange=ne=>{const we=[],Ot=ne.selectedOptions;if(void 0!==Ot){const sn=Ot;for(let hn=0;hn<sn.length;hn++){const ei=this._getOptionValue(sn[hn].value);we.push(ei)}}else{const sn=ne.options;for(let hn=0;hn<sn.length;hn++){const fr=sn[hn];if(fr.selected){const ei=this._getOptionValue(fr.value);we.push(ei)}}}this.value=we,N(we)}}_registerOption(N){const ne=(this._idCounter++).toString();return this._optionMap.set(ne,N),ne}_getOptionId(N){for(const ne of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ne)._value,N))return ne;return null}_getOptionValue(N){const ne=function Jr(L){return L.split(":")[0]}(N);return this._optionMap.has(ne)?this._optionMap.get(ne)._value:N}static{this.\u0275fac=function(){let N;return function(we){return(N||(N=d.xGo(L)))(we||L)}}()}static{this.\u0275dir=d.FsC({type:L,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ne,we){1&ne&&d.bIt("change",function(sn){return we.onChange(sn.target)})("blur",function(){return we.onTouched()})},inputs:{compareWith:"compareWith"},features:[d.Jv_([Wn]),d.Vt3]})}}return L})(),Wi=(()=>{class L{constructor(N,ne,we){this._element=N,this._renderer=ne,this._select=we,this._select&&(this.id=this._select._registerOption(this))}set ngValue(N){null!=this._select&&(this._value=N,this._setElementValue(Fr(this.id,N)),this._select.writeValue(this._select.value))}set value(N){this._select?(this._value=N,this._setElementValue(Fr(this.id,N)),this._select.writeValue(this._select.value)):this._setElementValue(N)}_setElementValue(N){this._renderer.setProperty(this._element.nativeElement,"value",N)}_setSelected(N){this._renderer.setProperty(this._element.nativeElement,"selected",N)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(ne){return new(ne||L)(d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(Bi,9))}}static{this.\u0275dir=d.FsC({type:L,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return L})(),bs=(()=>{class L{static{this.\u0275fac=function(ne){return new(ne||L)}}static{this.\u0275mod=d.$C({type:L})}static{this.\u0275inj=d.G2t({imports:[Wr]})}}return L})();class bi extends it{constructor(z,N,ne){super(Us(N),ie(ne,N)),this.controls=z,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(z){return this.controls[this._adjustIndex(z)]}push(z,N={}){this.controls.push(z),this._registerControl(z),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(z,N,ne={}){this.controls.splice(z,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:ne.emitEvent})}removeAt(z,N={}){let ne=this._adjustIndex(z);ne<0&&(ne=0),this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),this.controls.splice(ne,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(z,N,ne={}){let we=this._adjustIndex(z);we<0&&(we=0),this.controls[we]&&this.controls[we]._registerOnCollectionChange(()=>{}),this.controls.splice(we,1),N&&(this.controls.splice(we,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(z,N={}){Re(this,0,z),z.forEach((ne,we)=>{De(this,!1,we),this.at(we).setValue(ne,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(z,N={}){null!=z&&(z.forEach((ne,we)=>{this.at(we)&&this.at(we).patchValue(ne,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(z=[],N={}){this._forEachChild((ne,we)=>{ne.reset(z[we],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(z=>z.getRawValue())}clear(z={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:z.emitEvent}))}_adjustIndex(z){return z<0?z+this.length:z}_syncPendingControls(){let z=this.controls.reduce((N,ne)=>!!ne._syncPendingControls()||N,!1);return z&&this.updateValueAndValidity({onlySelf:!0}),z}_forEachChild(z){this.controls.forEach((N,ne)=>{z(N,ne)})}_updateValue(){this.value=this.controls.filter(z=>z.enabled||this.disabled).map(z=>z.value)}_anyControls(z){return this.controls.some(N=>N.enabled&&z(N))}_setUpControls(){this._forEachChild(z=>this._registerControl(z))}_allControlsDisabled(){for(const z of this.controls)if(z.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(z){z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange)}_find(z){return this.at(z)??null}}function Qi(L){return!!L&&(void 0!==L.asyncValidators||void 0!==L.validators||void 0!==L.updateOn)}let Y=(()=>{class L{constructor(){this.useNonNullable=!1}get nonNullable(){const N=new L;return N.useNonNullable=!0,N}group(N,ne=null){const we=this._reduceControls(N);let Ot={};return Qi(ne)?Ot=ne:null!==ne&&(Ot.validators=ne.validator,Ot.asyncValidators=ne.asyncValidator),new kt(we,Ot)}record(N,ne=null){const we=this._reduceControls(N);return new $t(we,ne)}control(N,ne,we){let Ot={};return this.useNonNullable?(Qi(ne)?Ot=ne:(Ot.validators=ne,Ot.asyncValidators=we),new fo(N,{...Ot,nonNullable:!0})):new fo(N,ne,we)}array(N,ne,we){const Ot=N.map(sn=>this._createControl(sn));return new bi(Ot,ne,we)}_reduceControls(N){const ne={};return Object.keys(N).forEach(we=>{ne[we]=this._createControl(N[we])}),ne}_createControl(N){return N instanceof fo||N instanceof it?N:Array.isArray(N)?this.control(N[0],N.length>1?N[1]:null,N.length>2?N[2]:null):this.control(N)}static{this.\u0275fac=function(ne){return new(ne||L)}}static{this.\u0275prov=d.jDH({token:L,factory:L.\u0275fac,providedIn:"root"})}}return L})(),je=(()=>{class L{static withConfig(N){return{ngModule:L,providers:[{provide:Xt,useValue:N.callSetDisabledState??xi}]}}static{this.\u0275fac=function(ne){return new(ne||L)}}static{this.\u0275mod=d.$C({type:L})}static{this.\u0275inj=d.G2t({imports:[bs]})}}return L})(),yt=(()=>{class L{static withConfig(N){return{ngModule:L,providers:[{provide:Ii,useValue:N.warnOnNgModelWithFormControl??"always"},{provide:Xt,useValue:N.callSetDisabledState??xi}]}}static{this.\u0275fac=function(ne){return new(ne||L)}}static{this.\u0275mod=d.$C({type:L})}static{this.\u0275inj=d.G2t({imports:[bs]})}}return L})()},3695:(en,at,W)=>{W.d(at,{UG:()=>Kl,_T:()=>tf});var d=W(7705),fe=W(1413),Te=W(177);let pe;try{pe=typeof Intl<"u"&&Intl.v8BreakIterator}catch{pe=!1}let be,dt,Nt,ke=(()=>{class U{constructor(y){this._platformId=y,this.isBrowser=this._platformId?(0,Te.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!pe)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(d.Agw))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();function Ve(U){return function Ce(){if(null==be&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>be=!0}))}finally{be=be||!1}return be}()?U:!!U.capture}function St(){if(null==dt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return dt=!1,dt;if("scrollBehavior"in document.documentElement.style)dt=!0;else{const U=Element.prototype.scrollTo;dt=!!U&&!/\{\s*\[native code\]\s*\}/.test(U.toString())}}return dt}function me(U){return U.composedPath?U.composedPath()[0]:U.target}function qe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Me=W(8359),gt=W(4412),_t=W(7673);W(8141);var Mi=W(152),es=W(5964),Ps=W(6354),Ii=W(6697);function Hs(U){return(0,es.p)((C,y)=>U<=y)}var so=W(3294),vr=W(6977);function Qt(U){return null!=U&&"false"!=`${U}`}function _i(U){return Array.isArray(U)?U:[U]}function jr(U){return null==U?"":"string"==typeof U?U:`${U}px`}function Zr(U){return U instanceof d.aKT?U.nativeElement:U}var kr=W(4572),xr=W(8793),os=W(1985),wn=W(9172);const ys=new Set;let Wn,Fr=(()=>{class U{constructor(y,S){this._platform=y,this._nonce=S,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Gn}matchMedia(y){return(this._platform.WEBKIT||this._platform.BLINK)&&function Jr(U,C){if(!ys.has(U))try{Wn||(Wn=document.createElement("style"),C&&(Wn.nonce=C),Wn.setAttribute("type","text/css"),document.head.appendChild(Wn)),Wn.sheet&&(Wn.sheet.insertRule(`@media ${U} {body{ }}`,0),ys.add(U))}catch(y){console.error(y)}}(y,this._nonce),this._matchMedia(y)}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(ke),d.KVO(d.BIS,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();function Gn(U){return{matches:"all"===U||""===U,media:U,addListener:()=>{},removeListener:()=>{}}}let Bi=(()=>{class U{constructor(y,S){this._mediaMatcher=y,this._zone=S,this._queries=new Map,this._destroySubject=new fe.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(y){return Wi(_i(y)).some($=>this._registerQuery($).mql.matches)}observe(y){const $=Wi(_i(y)).map(Fe=>this._registerQuery(Fe).observable);let le=(0,kr.z)($);return le=(0,xr.x)(le.pipe((0,Ii.s)(1)),le.pipe(Hs(1),(0,Mi.B)(0))),le.pipe((0,Ps.T)(Fe=>{const Dt={matches:!1,breakpoints:{}};return Fe.forEach(({matches:tn,query:gn})=>{Dt.matches=Dt.matches||tn,Dt.breakpoints[gn]=tn}),Dt}))}_registerQuery(y){if(this._queries.has(y))return this._queries.get(y);const S=this._mediaMatcher.matchMedia(y),le={observable:new os.c(Fe=>{const Dt=tn=>this._zone.run(()=>Fe.next(tn));return S.addListener(Dt),()=>{S.removeListener(Dt)}}).pipe((0,wn.Z)(S),(0,Ps.T)(({matches:Fe})=>({query:y,matches:Fe})),(0,vr.Q)(this._destroySubject)),mql:S};return this._queries.set(y,le),le}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Fr),d.KVO(d.SKi))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();function Wi(U){return U.map(C=>C.split(",")).reduce((C,y)=>C.concat(y)).map(C=>C.trim())}function we(U){return 0===U.buttons||0===U.detail}function Ot(U){const C=U.touches&&U.touches[0]||U.changedTouches&&U.changedTouches[0];return!(!C||-1!==C.identifier||null!=C.radiusX&&1!==C.radiusX||null!=C.radiusY&&1!==C.radiusY)}const sn=new d.nKC("cdk-input-modality-detector-options"),hn={ignoreKeys:[18,17,224,91,16]},ei=Ve({passive:!0,capture:!0});let qr=(()=>{class U{get mostRecentModality(){return this._modality.value}constructor(y,S,$,le){this._platform=y,this._mostRecentTarget=null,this._modality=new gt.t(null),this._lastTouchMs=0,this._onKeydown=Fe=>{this._options?.ignoreKeys?.some(Dt=>Dt===Fe.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=me(Fe))},this._onMousedown=Fe=>{Date.now()-this._lastTouchMs<650||(this._modality.next(we(Fe)?"keyboard":"mouse"),this._mostRecentTarget=me(Fe))},this._onTouchstart=Fe=>{Ot(Fe)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=me(Fe))},this._options={...hn,...le},this.modalityDetected=this._modality.pipe(Hs(1)),this.modalityChanged=this.modalityDetected.pipe((0,so.F)()),y.isBrowser&&S.runOutsideAngular(()=>{$.addEventListener("keydown",this._onKeydown,ei),$.addEventListener("mousedown",this._onMousedown,ei),$.addEventListener("touchstart",this._onTouchstart,ei)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ei),document.removeEventListener("mousedown",this._onMousedown,ei),document.removeEventListener("touchstart",this._onTouchstart,ei))}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(ke),d.KVO(d.SKi),d.KVO(Te.qQ),d.KVO(sn,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();const ai=new d.nKC("liveAnnouncerElement",{providedIn:"root",factory:function Ni(){return null}}),hi=new d.nKC("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let kn=0,fn=(()=>{class U{constructor(y,S,$,le){this._ngZone=S,this._defaultOptions=le,this._document=$,this._liveElement=y||this._createLiveElement()}announce(y,...S){const $=this._defaultOptions;let le,Fe;return 1===S.length&&"number"==typeof S[0]?Fe=S[0]:[le,Fe]=S,this.clear(),clearTimeout(this._previousTimeout),le||(le=$&&$.politeness?$.politeness:"polite"),null==Fe&&$&&(Fe=$.duration),this._liveElement.setAttribute("aria-live",le),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(Dt=>this._currentResolve=Dt)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=y,"number"==typeof Fe&&(this._previousTimeout=setTimeout(()=>this.clear(),Fe)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const y="cdk-live-announcer-element",S=this._document.getElementsByClassName(y),$=this._document.createElement("div");for(let le=0;le<S.length;le++)S[le].remove();return $.classList.add(y),$.classList.add("cdk-visually-hidden"),$.setAttribute("aria-atomic","true"),$.setAttribute("aria-live","polite"),$.id="cdk-live-announcer-"+kn++,this._document.body.appendChild($),$}_exposeAnnouncerToModals(y){const S=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let $=0;$<S.length;$++){const le=S[$],Fe=le.getAttribute("aria-owns");Fe?-1===Fe.indexOf(y)&&le.setAttribute("aria-owns",Fe+" "+y):le.setAttribute("aria-owns",y)}}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(ai,8),d.KVO(d.SKi),d.KVO(Te.qQ),d.KVO(hi,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();const ki=new d.nKC("cdk-focus-monitor-default-options"),Es=Ve({passive:!0,capture:!0});let Lo=(()=>{class U{constructor(y,S,$,le,Fe){this._ngZone=y,this._platform=S,this._inputModalityDetector=$,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new fe.B,this._rootNodeFocusAndBlurListener=Dt=>{for(let gn=me(Dt);gn;gn=gn.parentElement)"focus"===Dt.type?this._onFocus(Dt,gn):this._onBlur(Dt,gn)},this._document=le,this._detectionMode=Fe?.detectionMode||0}monitor(y,S=!1){const $=Zr(y);if(!this._platform.isBrowser||1!==$.nodeType)return(0,_t.of)();const le=function an(U){if(function Mt(){if(null==Nt){const U=typeof document<"u"?document.head:null;Nt=!(!U||!U.createShadowRoot&&!U.attachShadow)}return Nt}()){const C=U.getRootNode?U.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&C instanceof ShadowRoot)return C}return null}($)||this._getDocument(),Fe=this._elementInfo.get($);if(Fe)return S&&(Fe.checkChildren=!0),Fe.subject;const Dt={checkChildren:S,subject:new fe.B,rootNode:le};return this._elementInfo.set($,Dt),this._registerGlobalListeners(Dt),Dt.subject}stopMonitoring(y){const S=Zr(y),$=this._elementInfo.get(S);$&&($.subject.complete(),this._setClasses(S),this._elementInfo.delete(S),this._removeGlobalListeners($))}focusVia(y,S,$){const le=Zr(y);le===this._getDocument().activeElement?this._getClosestElementsInfo(le).forEach(([Dt,tn])=>this._originChanged(Dt,S,tn)):(this._setOrigin(S),"function"==typeof le.focus&&le.focus($))}ngOnDestroy(){this._elementInfo.forEach((y,S)=>this.stopMonitoring(S))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(y){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(y)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:y&&this._isLastInteractionFromInputLabel(y)?"mouse":"program"}_shouldBeAttributedToTouch(y){return 1===this._detectionMode||!!y?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(y,S){y.classList.toggle("cdk-focused",!!S),y.classList.toggle("cdk-touch-focused","touch"===S),y.classList.toggle("cdk-keyboard-focused","keyboard"===S),y.classList.toggle("cdk-mouse-focused","mouse"===S),y.classList.toggle("cdk-program-focused","program"===S)}_setOrigin(y,S=!1){this._ngZone.runOutsideAngular(()=>{this._origin=y,this._originFromTouchInteraction="touch"===y&&S,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(y,S){const $=this._elementInfo.get(S),le=me(y);!$||!$.checkChildren&&S!==le||this._originChanged(S,this._getFocusOrigin(le),$)}_onBlur(y,S){const $=this._elementInfo.get(S);!$||$.checkChildren&&y.relatedTarget instanceof Node&&S.contains(y.relatedTarget)||(this._setClasses(S),this._emitOrigin($,null))}_emitOrigin(y,S){y.subject.observers.length&&this._ngZone.run(()=>y.subject.next(S))}_registerGlobalListeners(y){if(!this._platform.isBrowser)return;const S=y.rootNode,$=this._rootNodeFocusListenerCount.get(S)||0;$||this._ngZone.runOutsideAngular(()=>{S.addEventListener("focus",this._rootNodeFocusAndBlurListener,Es),S.addEventListener("blur",this._rootNodeFocusAndBlurListener,Es)}),this._rootNodeFocusListenerCount.set(S,$+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,vr.Q)(this._stopInputModalityDetector)).subscribe(le=>{this._setOrigin(le,!0)}))}_removeGlobalListeners(y){const S=y.rootNode;if(this._rootNodeFocusListenerCount.has(S)){const $=this._rootNodeFocusListenerCount.get(S);$>1?this._rootNodeFocusListenerCount.set(S,$-1):(S.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Es),S.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Es),this._rootNodeFocusListenerCount.delete(S))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(y,S,$){this._setClasses(y,S),this._emitOrigin($,S),this._lastFocusOrigin=S}_getClosestElementsInfo(y){const S=[];return this._elementInfo.forEach(($,le)=>{(le===y||$.checkChildren&&le.contains(y))&&S.push([le,$])}),S}_isLastInteractionFromInputLabel(y){const{_mostRecentTarget:S,mostRecentModality:$}=this._inputModalityDetector;if("mouse"!==$||!S||S===y||"INPUT"!==y.nodeName&&"TEXTAREA"!==y.nodeName||y.disabled)return!1;const le=y.labels;if(le)for(let Fe=0;Fe<le.length;Fe++)if(le[Fe].contains(S))return!0;return!1}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(d.SKi),d.KVO(ke),d.KVO(qr),d.KVO(Te.qQ,8),d.KVO(ki,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();const Yo="cdk-high-contrast-black-on-white",Uo="cdk-high-contrast-white-on-black",Bo="cdk-high-contrast-active";let ca=(()=>{class U{constructor(y,S){this._platform=y,this._document=S,this._breakpointSubscription=(0,d.WQX)(Bi).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const y=this._document.createElement("div");y.style.backgroundColor="rgb(1,2,3)",y.style.position="absolute",this._document.body.appendChild(y);const S=this._document.defaultView||window,$=S&&S.getComputedStyle?S.getComputedStyle(y):null,le=($&&$.backgroundColor||"").replace(/ /g,"");switch(y.remove(),le){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const y=this._document.body.classList;y.remove(Bo,Yo,Uo),this._hasCheckedHighContrastMode=!0;const S=this.getHighContrastMode();1===S?y.add(Bo,Yo):2===S&&y.add(Bo,Uo)}}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(ke),d.KVO(Te.qQ))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();const Oa=new d.nKC("cdk-dir-doc",{providedIn:"root",factory:function la(){return(0,d.WQX)(Te.qQ)}}),Zo=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let da=(()=>{class U{constructor(y){this.value="ltr",this.change=new d.bkB,y&&(this.value=function ua(U){const C=U?.toLowerCase()||"";return"auto"===C&&typeof navigator<"u"&&navigator?.language?Zo.test(navigator.language)?"rtl":"ltr":"rtl"===C?"rtl":"ltr"}((y.body?y.body.dir:null)||(y.documentElement?y.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Oa,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),fa=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({})}}return U})();const x=new d.nKC("mat-sanity-checks",{providedIn:"root",factory:function Ho(){return!0}});let te=(()=>{class U{constructor(y,S,$){this._sanityChecks=S,this._document=$,this._hasDoneGlobalChecks=!1,y._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(y){return!qe()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[y])}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(ca),d.KVO(x,8),d.KVO(Te.qQ))}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({imports:[fa,fa]})}}return U})();function ft(U){return class extends U{get disabled(){return this._disabled}set disabled(C){this._disabled=Qt(C)}constructor(...C){super(...C),this._disabled=!1}}}function Ct(U,C){return class extends U{get color(){return this._color}set color(y){const S=y||this.defaultColor;S!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),S&&this._elementRef.nativeElement.classList.add(`mat-${S}`),this._color=S)}constructor(...y){super(...y),this.defaultColor=C,this.color=C}}}function cn(U){return class extends U{get disableRipple(){return this._disableRipple}set disableRipple(C){this._disableRipple=Qt(C)}constructor(...C){super(...C),this._disableRipple=!1}}}class ao{constructor(C,y,S,$=!1){this._renderer=C,this.element=y,this.config=S,this._animationForciblyDisabledThroughCss=$,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ta=Ve({passive:!0,capture:!0});class Ca{constructor(){this._events=new Map,this._delegateEventHandler=C=>{const y=me(C);y&&this._events.get(C.type)?.forEach((S,$)=>{($===y||$.contains(y))&&S.forEach(le=>le.handleEvent(C))})}}addHandler(C,y,S,$){const le=this._events.get(y);if(le){const Fe=le.get(S);Fe?Fe.add($):le.set(S,new Set([$]))}else this._events.set(y,new Map([[S,new Set([$])]])),C.runOutsideAngular(()=>{document.addEventListener(y,this._delegateEventHandler,ta)})}removeHandler(C,y,S){const $=this._events.get(C);if(!$)return;const le=$.get(y);le&&(le.delete(S),0===le.size&&$.delete(y),0===$.size&&(this._events.delete(C),document.removeEventListener(C,this._delegateEventHandler,ta)))}}const yo={enterDuration:225,exitDuration:150},oc=Ve({passive:!0,capture:!0}),ga=["mousedown","touchstart"],as=["mouseup","mouseleave","touchend","touchcancel"];class co{static{this._eventManager=new Ca}constructor(C,y,S,$){this._target=C,this._ngZone=y,this._platform=$,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,$.isBrowser&&(this._containerElement=Zr(S))}fadeInRipple(C,y,S={}){const $=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),le={...yo,...S.animation};S.centered&&(C=$.left+$.width/2,y=$.top+$.height/2);const Fe=S.radius||function ws(U,C,y){const S=Math.max(Math.abs(U-y.left),Math.abs(U-y.right)),$=Math.max(Math.abs(C-y.top),Math.abs(C-y.bottom));return Math.sqrt(S*S+$*$)}(C,y,$),Dt=C-$.left,tn=y-$.top,gn=le.enterDuration,An=document.createElement("div");An.classList.add("mat-ripple-element"),An.style.left=Dt-Fe+"px",An.style.top=tn-Fe+"px",An.style.height=2*Fe+"px",An.style.width=2*Fe+"px",null!=S.color&&(An.style.backgroundColor=S.color),An.style.transitionDuration=`${gn}ms`,this._containerElement.appendChild(An);const zr=window.getComputedStyle(An),Ts=zr.transitionDuration,Vs="none"===zr.transitionProperty||"0s"===Ts||"0s, 0s"===Ts||0===$.width&&0===$.height,As=new ao(this,An,S,Vs);An.style.transform="scale3d(1, 1, 1)",As.state=0,S.persistent||(this._mostRecentTransientRipple=As);let Ka=null;return!Vs&&(gn||le.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const vl=()=>this._finishRippleTransition(As),Wl=()=>this._destroyRipple(As);An.addEventListener("transitionend",vl),An.addEventListener("transitioncancel",Wl),Ka={onTransitionEnd:vl,onTransitionCancel:Wl}}),this._activeRipples.set(As,Ka),(Vs||!gn)&&this._finishRippleTransition(As),As}fadeOutRipple(C){if(2===C.state||3===C.state)return;const y=C.element,S={...yo,...C.config.animation};y.style.transitionDuration=`${S.exitDuration}ms`,y.style.opacity="0",C.state=2,(C._animationForciblyDisabledThroughCss||!S.exitDuration)&&this._finishRippleTransition(C)}fadeOutAll(){this._getActiveRipples().forEach(C=>C.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(C=>{C.config.persistent||C.fadeOut()})}setupTriggerEvents(C){const y=Zr(C);!this._platform.isBrowser||!y||y===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=y,ga.forEach(S=>{co._eventManager.addHandler(this._ngZone,S,y,this)}))}handleEvent(C){"mousedown"===C.type?this._onMousedown(C):"touchstart"===C.type?this._onTouchStart(C):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{as.forEach(y=>{this._triggerElement.addEventListener(y,this,oc)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(C){0===C.state?this._startFadeOutTransition(C):2===C.state&&this._destroyRipple(C)}_startFadeOutTransition(C){const y=C===this._mostRecentTransientRipple,{persistent:S}=C.config;C.state=1,!S&&(!y||!this._isPointerDown)&&C.fadeOut()}_destroyRipple(C){const y=this._activeRipples.get(C)??null;this._activeRipples.delete(C),this._activeRipples.size||(this._containerRect=null),C===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),C.state=3,null!==y&&(C.element.removeEventListener("transitionend",y.onTransitionEnd),C.element.removeEventListener("transitioncancel",y.onTransitionCancel)),C.element.remove()}_onMousedown(C){const y=we(C),S=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!y&&!S&&(this._isPointerDown=!0,this.fadeInRipple(C.clientX,C.clientY,this._target.rippleConfig))}_onTouchStart(C){if(!this._target.rippleDisabled&&!Ot(C)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const y=C.changedTouches;if(y)for(let S=0;S<y.length;S++)this.fadeInRipple(y[S].clientX,y[S].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(C=>{!C.config.persistent&&(1===C.state||C.config.terminateOnPointerUp&&0===C.state)&&C.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const C=this._triggerElement;C&&(ga.forEach(y=>co._eventManager.removeHandler(y,C,this)),this._pointerUpEventsRegistered&&as.forEach(y=>C.removeEventListener(y,this,oc)))}}const ka=new d.nKC("mat-ripple-global-options");let Fa=(()=>{class U{get disabled(){return this._disabled}set disabled(y){y&&this.fadeOutAllNonPersistent(),this._disabled=y,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(y){this._trigger=y,this._setupTriggerEventsIfEnabled()}constructor(y,S,$,le,Fe){this._elementRef=y,this._animationMode=Fe,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=le||{},this._rippleRenderer=new co(this,S,y,$)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(y,S=0,$){return"number"==typeof y?this._rippleRenderer.fadeInRipple(y,S,{...this.rippleConfig,...$}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...y})}static{this.\u0275fac=function(S){return new(S||U)(d.rXU(d.aKT),d.rXU(d.SKi),d.rXU(ke),d.rXU(ka,8),d.rXU(d.bc$,8))}}static{this.\u0275dir=d.FsC({type:U,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(S,$){2&S&&d.AVh("mat-ripple-unbounded",$.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}}return U})(),Sc=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({imports:[te,te]})}}return U})();const wr={capture:!0},$o=["focus","click","mouseenter","touchstart"],zo="mat-ripple-loader-uninitialized",pr="mat-ripple-loader-class-name",lc="mat-ripple-loader-centered",So="mat-ripple-loader-disabled";let Ro=(()=>{class U{constructor(){this._document=(0,d.WQX)(Te.qQ,{optional:!0}),this._animationMode=(0,d.WQX)(d.bc$,{optional:!0}),this._globalRippleOptions=(0,d.WQX)(ka,{optional:!0}),this._platform=(0,d.WQX)(ke),this._ngZone=(0,d.WQX)(d.SKi),this._hosts=new Map,this._onInteraction=y=>{if(!(y.target instanceof HTMLElement))return;const $=y.target.closest(`[${zo}]`);$&&this._createRipple($)},this._ngZone.runOutsideAngular(()=>{for(const y of $o)this._document?.addEventListener(y,this._onInteraction,wr)})}ngOnDestroy(){const y=this._hosts.keys();for(const S of y)this.destroyRipple(S);for(const S of $o)this._document?.removeEventListener(S,this._onInteraction,wr)}configureRipple(y,S){y.setAttribute(zo,""),(S.className||!y.hasAttribute(pr))&&y.setAttribute(pr,S.className||""),S.centered&&y.setAttribute(lc,""),S.disabled&&y.setAttribute(So,"")}getRipple(y){return this._hosts.get(y)||this._createRipple(y)}setDisabled(y,S){const $=this._hosts.get(y);$?$.disabled=S:S?y.setAttribute(So,""):y.removeAttribute(So)}_createRipple(y){if(!this._document)return;const S=this._hosts.get(y);if(S)return S;y.querySelector(".mat-ripple")?.remove();const $=this._document.createElement("span");$.classList.add("mat-ripple",y.getAttribute(pr)),y.append($);const le=new Fa(new d.aKT($),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return le._isInitialized=!0,le.trigger=y,le.centered=y.hasAttribute(lc),le.disabled=y.hasAttribute(So),this.attachRipple(y,le),le}attachRipple(y,S){y.removeAttribute(zo),this._hosts.set(y,S)}destroyRipple(y){const S=this._hosts.get(y);S&&(S.ngOnDestroy(),this._hosts.delete(y))}static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();const Ba=["mat-button",""],uc=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],j=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],V=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],ee=Ct(ft(cn(class{constructor(U){this._elementRef=U}})));let he=(()=>{class U extends ee{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(y){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,y)}get disableRipple(){return this._disableRipple}set disableRipple(y){this._disableRipple=Qt(y),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(y){this._disabled=Qt(y),this._updateRippleDisabled()}constructor(y,S,$,le){super(y),this._platform=S,this._ngZone=$,this._animationMode=le,this._focusMonitor=(0,d.WQX)(Lo),this._rippleLoader=(0,d.WQX)(Ro),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const Fe=y.nativeElement.classList;for(const Dt of V)this._hasHostAttributes(Dt.selector)&&Dt.mdcClasses.forEach(tn=>{Fe.add(tn)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(y="program",S){y?this._focusMonitor.focusVia(this._elementRef.nativeElement,y,S):this._elementRef.nativeElement.focus(S)}_hasHostAttributes(...y){return y.some(S=>this._elementRef.nativeElement.hasAttribute(S))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(S){d.QTQ()}}static{this.\u0275dir=d.FsC({type:U,features:[d.Vt3]})}}return U})(),ln=(()=>{class U extends he{constructor(y,S,$,le){super(y,S,$,le)}static{this.\u0275fac=function(S){return new(S||U)(d.rXU(d.aKT),d.rXU(ke),d.rXU(d.SKi),d.rXU(d.bc$,8))}}static{this.\u0275cmp=d.VBU({type:U,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(S,$){2&S&&(d.BMQ("disabled",$.disabled||null),d.AVh("_mat-animation-noopable","NoopAnimations"===$._animationMode)("mat-unthemed",!$.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.Vt3],attrs:Ba,ngContentSelectors:j,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(S,$){1&S&&(d.NAR(uc),d.nrm(0,"span",0),d.SdG(1),d.j41(2,"span",1),d.SdG(3,1),d.k0s(),d.SdG(4,2),d.nrm(5,"span",2)(6,"span",3)),2&S&&d.AVh("mdc-button__ripple",!$._isFab)("mdc-fab__ripple",$._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return U})(),Sa=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({imports:[te,Sc,te]})}}return U})();var xo=W(9969);class Mo{attach(C){return this._attachedHost=C,C.attach(this)}detach(){let C=this._attachedHost;null!=C&&(this._attachedHost=null,C.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(C){this._attachedHost=C}}class cs extends Mo{constructor(C,y,S,$,le){super(),this.component=C,this.viewContainerRef=y,this.injector=S,this.componentFactoryResolver=$,this.projectableNodes=le}}class Po extends Mo{constructor(C,y,S,$){super(),this.templateRef=C,this.viewContainerRef=y,this.context=S,this.injector=$}get origin(){return this.templateRef.elementRef}attach(C,y=this.context){return this.context=y,super.attach(C)}detach(){return this.context=void 0,super.detach()}}class Di extends Mo{constructor(C){super(),this.element=C instanceof d.aKT?C.nativeElement:C}}class dc{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(C){return C instanceof cs?(this._attachedPortal=C,this.attachComponentPortal(C)):C instanceof Po?(this._attachedPortal=C,this.attachTemplatePortal(C)):this.attachDomPortal&&C instanceof Di?(this._attachedPortal=C,this.attachDomPortal(C)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(C){this._disposeFn=C}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class rs extends dc{constructor(C,y,S,$,le){super(),this.outletElement=C,this._componentFactoryResolver=y,this._appRef=S,this._defaultInjector=$,this.attachDomPortal=Fe=>{const Dt=Fe.element,tn=this._document.createComment("dom-portal");Dt.parentNode.insertBefore(tn,Dt),this.outletElement.appendChild(Dt),this._attachedPortal=Fe,super.setDisposeFn(()=>{tn.parentNode&&tn.parentNode.replaceChild(Dt,tn)})},this._document=le}attachComponentPortal(C){const S=(C.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(C.component);let $;return C.viewContainerRef?($=C.viewContainerRef.createComponent(S,C.viewContainerRef.length,C.injector||C.viewContainerRef.injector,C.projectableNodes||void 0),this.setDisposeFn(()=>$.destroy())):($=S.create(C.injector||this._defaultInjector||d.zZn.NULL),this._appRef.attachView($.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView($.hostView),$.destroy()})),this.outletElement.appendChild(this._getComponentRootNode($)),this._attachedPortal=C,$}attachTemplatePortal(C){let y=C.viewContainerRef,S=y.createEmbeddedView(C.templateRef,C.context,{injector:C.injector});return S.rootNodes.forEach($=>this.outletElement.appendChild($)),S.detectChanges(),this.setDisposeFn(()=>{let $=y.indexOf(S);-1!==$&&y.remove($)}),this._attachedPortal=C,S}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(C){return C.hostView.rootNodes[0]}}let Ra=(()=>{class U extends dc{constructor(y,S,$){super(),this._componentFactoryResolver=y,this._viewContainerRef=S,this._isInitialized=!1,this.attached=new d.bkB,this.attachDomPortal=le=>{const Fe=le.element,Dt=this._document.createComment("dom-portal");le.setAttachedHost(this),Fe.parentNode.insertBefore(Dt,Fe),this._getRootNode().appendChild(Fe),this._attachedPortal=le,super.setDisposeFn(()=>{Dt.parentNode&&Dt.parentNode.replaceChild(Fe,Dt)})},this._document=$}get portal(){return this._attachedPortal}set portal(y){this.hasAttached()&&!y&&!this._isInitialized||(this.hasAttached()&&super.detach(),y&&super.attach(y),this._attachedPortal=y||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(y){y.setAttachedHost(this);const S=null!=y.viewContainerRef?y.viewContainerRef:this._viewContainerRef,le=(y.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(y.component),Fe=S.createComponent(le,S.length,y.injector||S.injector,y.projectableNodes||void 0);return S!==this._viewContainerRef&&this._getRootNode().appendChild(Fe.hostView.rootNodes[0]),super.setDisposeFn(()=>Fe.destroy()),this._attachedPortal=y,this._attachedRef=Fe,this.attached.emit(Fe),Fe}attachTemplatePortal(y){y.setAttachedHost(this);const S=this._viewContainerRef.createEmbeddedView(y.templateRef,y.context,{injector:y.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=y,this._attachedRef=S,this.attached.emit(S),S}_getRootNode(){const y=this._viewContainerRef.element.nativeElement;return y.nodeType===y.ELEMENT_NODE?y:y.parentNode}static{this.\u0275fac=function(S){return new(S||U)(d.rXU(d.OM3),d.rXU(d.c1b),d.rXU(Te.qQ))}}static{this.\u0275dir=d.FsC({type:U,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.Vt3]})}}return U})(),rl=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({})}}return U})();var jd=W(8750),qh=W(1397),Hd=W(7441),Wo=W(8071),hc=W(6450);const il=["addListener","removeListener"],zu=["addEventListener","removeEventListener"],sl=["on","off"];function Oo(U,C,y,S){if((0,Wo.T)(y)&&(S=y,y=void 0),S)return Oo(U,C,y).pipe((0,hc.I)(S));const[$,le]=function Pl(U){return(0,Wo.T)(U.addEventListener)&&(0,Wo.T)(U.removeEventListener)}(U)?zu.map(Fe=>Dt=>U[Fe](C,Dt,y)):function $d(U){return(0,Wo.T)(U.addListener)&&(0,Wo.T)(U.removeListener)}(U)?il.map(ol(U,C)):function Ml(U){return(0,Wo.T)(U.on)&&(0,Wo.T)(U.off)}(U)?sl.map(ol(U,C)):[];if(!$&&(0,Hd.X)(U))return(0,qh.Z)(Fe=>Oo(Fe,C,y))((0,jd.Tg)(U));if(!$)throw new TypeError("Invalid event target");return new os.c(Fe=>{const Dt=(...tn)=>Fe.next(1<tn.length?tn:tn[0]);return $(Dt),()=>le(Dt)})}function ol(U,C){return y=>S=>U[y](C,S)}var _a=W(6780);const Fs={schedule(U){let C=requestAnimationFrame,y=cancelAnimationFrame;const{delegate:S}=Fs;S&&(C=S.requestAnimationFrame,y=S.cancelAnimationFrame);const $=C(le=>{y=void 0,U(le)});return new Me.yU(()=>y?.($))},requestAnimationFrame(...U){const{delegate:C}=Fs;return(C?.requestAnimationFrame||requestAnimationFrame)(...U)},cancelAnimationFrame(...U){const{delegate:C}=Fs;return(C?.cancelAnimationFrame||cancelAnimationFrame)(...U)},delegate:void 0};var xa=W(9687);new class al extends xa.q{flush(C){let y;this._active=!0,C?y=C.id:(y=this._scheduled,this._scheduled=void 0);const{actions:S}=this;let $;C=C||S.shift();do{if($=C.execute(C.state,C.delay))break}while((C=S[0])&&C.id===y&&S.shift());if(this._active=!1,$){for(;(C=S[0])&&C.id===y&&S.shift();)C.unsubscribe();throw $}}}(class Pc extends _a.R{constructor(C,y){super(C,y),this.scheduler=C,this.work=y}requestAsyncId(C,y,S=0){return null!==S&&S>0?super.requestAsyncId(C,y,S):(C.actions.push(this),C._scheduled||(C._scheduled=Fs.requestAnimationFrame(()=>C.flush(void 0))))}recycleAsyncId(C,y,S=0){var $;if(null!=S?S>0:this.delay>0)return super.recycleAsyncId(C,y,S);const{actions:le}=C;null!=y&&y===C._scheduled&&(null===($=le[le.length-1])||void 0===$?void 0:$.id)!==y&&(Fs.cancelAnimationFrame(y),C._scheduled=void 0)}});let Nl,ll=1;const ul={};function du(U){return U in ul&&(delete ul[U],!0)}const Ku={setImmediate(U){const C=ll++;return ul[C]=!0,Nl||(Nl=Promise.resolve()),Nl.then(()=>du(C)&&U()),C},clearImmediate(U){du(U)}},{setImmediate:kl,clearImmediate:hu}=Ku,Js={setImmediate(...U){const{delegate:C}=Js;return(C?.setImmediate||kl)(...U)},clearImmediate(U){const{delegate:C}=Js;return(C?.clearImmediate||hu)(U)},delegate:void 0};new class Wu extends xa.q{flush(C){this._active=!0;const y=this._scheduled;this._scheduled=void 0;const{actions:S}=this;let $;C=C||S.shift();do{if($=C.execute(C.state,C.delay))break}while((C=S[0])&&C.id===y&&S.shift());if(this._active=!1,$){for(;(C=S[0])&&C.id===y&&S.shift();)C.unsubscribe();throw $}}}(class Qh extends _a.R{constructor(C,y){super(C,y),this.scheduler=C,this.work=y}requestAsyncId(C,y,S=0){return null!==S&&S>0?super.requestAsyncId(C,y,S):(C.actions.push(this),C._scheduled||(C._scheduled=Js.setImmediate(C.flush.bind(C,void 0))))}recycleAsyncId(C,y,S=0){var $;if(null!=S?S>0:this.delay>0)return super.recycleAsyncId(C,y,S);const{actions:le}=C;null!=y&&(null===($=le[le.length-1])||void 0===$?void 0:$.id)!==y&&(Js.clearImmediate(y),C._scheduled===y&&(C._scheduled=void 0))}});var Gu=W(3236),ms=W(9974),Ha=W(4360),hl=W(1584);function qu(U,C=Gu.E){return function $a(U){return(0,ms.N)((C,y)=>{let S=!1,$=null,le=null,Fe=!1;const Dt=()=>{if(le?.unsubscribe(),le=null,S){S=!1;const gn=$;$=null,y.next(gn)}Fe&&y.complete()},tn=()=>{le=null,Fe&&y.complete()};C.subscribe((0,Ha._)(y,gn=>{S=!0,$=gn,le||(0,jd.Tg)(U(gn)).subscribe(le=(0,Ha._)(y,Dt,tn))},()=>{Fe=!0,(!S||!le||le.closed)&&y.complete()}))})}(()=>(0,hl.O)(U,C))}let kc=(()=>{class U{constructor(y,S,$){this._ngZone=y,this._platform=S,this._scrolled=new fe.B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=$}register(y){this.scrollContainers.has(y)||this.scrollContainers.set(y,y.elementScrolled().subscribe(()=>this._scrolled.next(y)))}deregister(y){const S=this.scrollContainers.get(y);S&&(S.unsubscribe(),this.scrollContainers.delete(y))}scrolled(y=20){return this._platform.isBrowser?new os.c(S=>{this._globalSubscription||this._addGlobalListener();const $=y>0?this._scrolled.pipe(qu(y)).subscribe(S):this._scrolled.subscribe(S);return this._scrolledCount++,()=>{$.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,_t.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((y,S)=>this.deregister(S)),this._scrolled.complete()}ancestorScrolled(y,S){const $=this.getAncestorScrollContainers(y);return this.scrolled(S).pipe((0,es.p)(le=>!le||$.indexOf(le)>-1))}getAncestorScrollContainers(y){const S=[];return this.scrollContainers.forEach(($,le)=>{this._scrollableContainsElement(le,y)&&S.push(le)}),S}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(y,S){let $=Zr(S),le=y.getElementRef().nativeElement;do{if($==le)return!0}while($=$.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Oo(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(d.SKi),d.KVO(ke),d.KVO(Te.qQ,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),Zu=(()=>{class U{constructor(y,S,$){this._platform=y,this._change=new fe.B,this._changeListener=le=>{this._change.next(le)},this._document=$,S.runOutsideAngular(()=>{if(y.isBrowser){const le=this._getWindow();le.addEventListener("resize",this._changeListener),le.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const y=this._getWindow();y.removeEventListener("resize",this._changeListener),y.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const y={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),y}getViewportRect(){const y=this.getViewportScrollPosition(),{width:S,height:$}=this.getViewportSize();return{top:y.top,left:y.left,bottom:y.top+$,right:y.left+S,height:$,width:S}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const y=this._document,S=this._getWindow(),$=y.documentElement,le=$.getBoundingClientRect();return{top:-le.top||y.body.scrollTop||S.scrollY||$.scrollTop||0,left:-le.left||y.body.scrollLeft||S.scrollX||$.scrollLeft||0}}change(y=20){return y>0?this._change.pipe(qu(y)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const y=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:y.innerWidth,height:y.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(ke),d.KVO(d.SKi),d.KVO(Te.qQ,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),ed=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({})}}return U})(),Ja=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({imports:[fa,ed,fa,ed]})}}return U})();var mu=W(7786);const vo=St();class na{constructor(C,y){this._viewportRuler=C,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=y}attach(){}enable(){if(this._canBeEnabled()){const C=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=C.style.left||"",this._previousHTMLStyles.top=C.style.top||"",C.style.left=jr(-this._previousScrollPosition.left),C.style.top=jr(-this._previousScrollPosition.top),C.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const C=this._document.documentElement,S=C.style,$=this._document.body.style,le=S.scrollBehavior||"",Fe=$.scrollBehavior||"";this._isEnabled=!1,S.left=this._previousHTMLStyles.left,S.top=this._previousHTMLStyles.top,C.classList.remove("cdk-global-scrollblock"),vo&&(S.scrollBehavior=$.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),vo&&(S.scrollBehavior=le,$.scrollBehavior=Fe)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const y=this._document.body,S=this._viewportRuler.getViewportSize();return y.scrollHeight>S.height||y.scrollWidth>S.width}}class Ll{constructor(C,y,S,$){this._scrollDispatcher=C,this._ngZone=y,this._viewportRuler=S,this._config=$,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(C){this._overlayRef=C}enable(){if(this._scrollSubscription)return;const C=this._scrollDispatcher.scrolled(0).pipe((0,es.p)(y=>!y||!this._overlayRef.overlayElement.contains(y.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=C.subscribe(()=>{const y=this._viewportRuler.getViewportScrollPosition().top;Math.abs(y-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=C.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ya{enable(){}disable(){}attach(){}}function td(U,C){return C.some(y=>U.bottom<y.top||U.top>y.bottom||U.right<y.left||U.left>y.right)}function Vc(U,C){return C.some(y=>U.top<y.top||U.bottom>y.bottom||U.left<y.left||U.right>y.right)}class Wd{constructor(C,y,S,$){this._scrollDispatcher=C,this._viewportRuler=y,this._ngZone=S,this._config=$,this._scrollSubscription=null}attach(C){this._overlayRef=C}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const y=this._overlayRef.overlayElement.getBoundingClientRect(),{width:S,height:$}=this._viewportRuler.getViewportSize();td(y,[{width:S,height:$,bottom:$,right:S,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Lc=(()=>{class U{constructor(y,S,$,le){this._scrollDispatcher=y,this._viewportRuler=S,this._ngZone=$,this.noop=()=>new ya,this.close=Fe=>new Ll(this._scrollDispatcher,this._ngZone,this._viewportRuler,Fe),this.block=()=>new na(this._viewportRuler,this._document),this.reposition=Fe=>new Wd(this._scrollDispatcher,this._viewportRuler,this._ngZone,Fe),this._document=le}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(kc),d.KVO(Zu),d.KVO(d.SKi),d.KVO(Te.qQ))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();class No{constructor(C){if(this.scrollStrategy=new ya,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,C){const y=Object.keys(C);for(const S of y)void 0!==C[S]&&(this[S]=C[S])}}}class qd{constructor(C,y){this.connectionPair=C,this.scrollableViewProperties=y}}let Uc=(()=>{class U{constructor(y){this._attachedOverlays=[],this._document=y}ngOnDestroy(){this.detach()}add(y){this.remove(y),this._attachedOverlays.push(y)}remove(y){const S=this._attachedOverlays.indexOf(y);S>-1&&this._attachedOverlays.splice(S,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Te.qQ))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),Qd=(()=>{class U extends Uc{constructor(y,S){super(y),this._ngZone=S,this._keydownListener=$=>{const le=this._attachedOverlays;for(let Fe=le.length-1;Fe>-1;Fe--)if(le[Fe]._keydownEvents.observers.length>0){const Dt=le[Fe]._keydownEvents;this._ngZone?this._ngZone.run(()=>Dt.next($)):Dt.next($);break}}}add(y){super.add(y),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Te.qQ),d.KVO(d.SKi,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),Xd=(()=>{class U extends Uc{constructor(y,S,$){super(y),this._platform=S,this._ngZone=$,this._cursorStyleIsSet=!1,this._pointerDownListener=le=>{this._pointerDownEventTarget=me(le)},this._clickListener=le=>{const Fe=me(le),Dt="click"===le.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Fe;this._pointerDownEventTarget=null;const tn=this._attachedOverlays.slice();for(let gn=tn.length-1;gn>-1;gn--){const An=tn[gn];if(An._outsidePointerEvents.observers.length<1||!An.hasAttached())continue;if(An.overlayElement.contains(Fe)||An.overlayElement.contains(Dt))break;const zr=An._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>zr.next(le)):zr.next(le)}}}add(y){if(super.add(y),!this._isAttached){const S=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(S)):this._addEventListeners(S),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=S.style.cursor,S.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const y=this._document.body;y.removeEventListener("pointerdown",this._pointerDownListener,!0),y.removeEventListener("click",this._clickListener,!0),y.removeEventListener("auxclick",this._clickListener,!0),y.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(y.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(y){y.addEventListener("pointerdown",this._pointerDownListener,!0),y.addEventListener("click",this._clickListener,!0),y.addEventListener("auxclick",this._clickListener,!0),y.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Te.qQ),d.KVO(ke),d.KVO(d.SKi,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),_u=(()=>{class U{constructor(y,S){this._platform=S,this._document=y}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const y="cdk-overlay-container";if(this._platform.isBrowser||qe()){const $=this._document.querySelectorAll(`.${y}[platform="server"], .${y}[platform="test"]`);for(let le=0;le<$.length;le++)$[le].remove()}const S=this._document.createElement("div");S.classList.add(y),qe()?S.setAttribute("platform","test"):this._platform.isBrowser||S.setAttribute("platform","server"),this._document.body.appendChild(S),this._containerElement=S}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Te.qQ),d.KVO(ke))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();class nd{constructor(C,y,S,$,le,Fe,Dt,tn,gn,An=!1){this._portalOutlet=C,this._host=y,this._pane=S,this._config=$,this._ngZone=le,this._keyboardDispatcher=Fe,this._document=Dt,this._location=tn,this._outsideClickDispatcher=gn,this._animationsDisabled=An,this._backdropElement=null,this._backdropClick=new fe.B,this._attachments=new fe.B,this._detachments=new fe.B,this._locationChanges=Me.yU.EMPTY,this._backdropClickHandler=zr=>this._backdropClick.next(zr),this._backdropTransitionendHandler=zr=>{this._disposeBackdrop(zr.target)},this._keydownEvents=new fe.B,this._outsidePointerEvents=new fe.B,$.scrollStrategy&&(this._scrollStrategy=$.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=$.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(C){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const y=this._portalOutlet.attach(C);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Ii.s)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof y?.onDestroy&&y.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),y}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const C=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),C}dispose(){const C=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,C&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(C){C!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=C,this.hasAttached()&&(C.attach(this),this.updatePosition()))}updateSize(C){this._config={...this._config,...C},this._updateElementSize()}setDirection(C){this._config={...this._config,direction:C},this._updateElementDirection()}addPanelClass(C){this._pane&&this._toggleClasses(this._pane,C,!0)}removePanelClass(C){this._pane&&this._toggleClasses(this._pane,C,!1)}getDirection(){const C=this._config.direction;return C?"string"==typeof C?C:C.value:"ltr"}updateScrollStrategy(C){C!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=C,this.hasAttached()&&(C.attach(this),C.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const C=this._pane.style;C.width=jr(this._config.width),C.height=jr(this._config.height),C.minWidth=jr(this._config.minWidth),C.minHeight=jr(this._config.minHeight),C.maxWidth=jr(this._config.maxWidth),C.maxHeight=jr(this._config.maxHeight)}_togglePointerEvents(C){this._pane.style.pointerEvents=C?"":"none"}_attachBackdrop(){const C="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(C)})}):this._backdropElement.classList.add(C)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const C=this._backdropElement;if(C){if(this._animationsDisabled)return void this._disposeBackdrop(C);C.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{C.addEventListener("transitionend",this._backdropTransitionendHandler)}),C.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(C)},500))}}_toggleClasses(C,y,S){const $=_i(y||[]).filter(le=>!!le);$.length&&(S?C.classList.add(...$):C.classList.remove(...$))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const C=this._ngZone.onStable.pipe((0,vr.Q)((0,mu.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),C.unsubscribe())})})}_disposeScrollStrategy(){const C=this._scrollStrategy;C&&(C.disable(),C.detach&&C.detach())}_disposeBackdrop(C){C&&(C.removeEventListener("click",this._backdropClickHandler),C.removeEventListener("transitionend",this._backdropTransitionendHandler),C.remove(),this._backdropElement===C&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Ul="cdk-overlay-connected-position-bounding-box",ec=/([A-Za-z%]+)$/;class Bc{get positions(){return this._preferredPositions}constructor(C,y,S,$,le){this._viewportRuler=y,this._document=S,this._platform=$,this._overlayContainer=le,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new fe.B,this._resizeSubscription=Me.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(C)}attach(C){this._validatePositions(),C.hostElement.classList.add(Ul),this._overlayRef=C,this._boundingBox=C.hostElement,this._pane=C.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const C=this._originRect,y=this._overlayRect,S=this._viewportRect,$=this._containerRect,le=[];let Fe;for(let Dt of this._preferredPositions){let tn=this._getOriginPoint(C,$,Dt),gn=this._getOverlayPoint(tn,y,Dt),An=this._getOverlayFit(gn,y,S,Dt);if(An.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Dt,tn);this._canFitWithFlexibleDimensions(An,gn,S)?le.push({position:Dt,origin:tn,overlayRect:y,boundingBoxRect:this._calculateBoundingBoxRect(tn,Dt)}):(!Fe||Fe.overlayFit.visibleArea<An.visibleArea)&&(Fe={overlayFit:An,overlayPoint:gn,originPoint:tn,position:Dt,overlayRect:y})}if(le.length){let Dt=null,tn=-1;for(const gn of le){const An=gn.boundingBoxRect.width*gn.boundingBoxRect.height*(gn.position.weight||1);An>tn&&(tn=An,Dt=gn)}return this._isPushed=!1,void this._applyPosition(Dt.position,Dt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Fe.position,Fe.originPoint);this._applyPosition(Fe.position,Fe.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&va(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ul),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const C=this._lastPosition;if(C){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const y=this._getOriginPoint(this._originRect,this._containerRect,C);this._applyPosition(C,y)}else this.apply()}withScrollableContainers(C){return this._scrollables=C,this}withPositions(C){return this._preferredPositions=C,-1===C.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(C){return this._viewportMargin=C,this}withFlexibleDimensions(C=!0){return this._hasFlexibleDimensions=C,this}withGrowAfterOpen(C=!0){return this._growAfterOpen=C,this}withPush(C=!0){return this._canPush=C,this}withLockedPosition(C=!0){return this._positionLocked=C,this}setOrigin(C){return this._origin=C,this}withDefaultOffsetX(C){return this._offsetX=C,this}withDefaultOffsetY(C){return this._offsetY=C,this}withTransformOriginOn(C){return this._transformOriginSelector=C,this}_getOriginPoint(C,y,S){let $,le;if("center"==S.originX)$=C.left+C.width/2;else{const Fe=this._isRtl()?C.right:C.left,Dt=this._isRtl()?C.left:C.right;$="start"==S.originX?Fe:Dt}return y.left<0&&($-=y.left),le="center"==S.originY?C.top+C.height/2:"top"==S.originY?C.top:C.bottom,y.top<0&&(le-=y.top),{x:$,y:le}}_getOverlayPoint(C,y,S){let $,le;return $="center"==S.overlayX?-y.width/2:"start"===S.overlayX?this._isRtl()?-y.width:0:this._isRtl()?0:-y.width,le="center"==S.overlayY?-y.height/2:"top"==S.overlayY?0:-y.height,{x:C.x+$,y:C.y+le}}_getOverlayFit(C,y,S,$){const le=gl(y);let{x:Fe,y:Dt}=C,tn=this._getOffset($,"x"),gn=this._getOffset($,"y");tn&&(Fe+=tn),gn&&(Dt+=gn);let Go=0-Dt,Ts=Dt+le.height-S.height,Vs=this._subtractOverflows(le.width,0-Fe,Fe+le.width-S.width),As=this._subtractOverflows(le.height,Go,Ts),Ka=Vs*As;return{visibleArea:Ka,isCompletelyWithinViewport:le.width*le.height===Ka,fitsInViewportVertically:As===le.height,fitsInViewportHorizontally:Vs==le.width}}_canFitWithFlexibleDimensions(C,y,S){if(this._hasFlexibleDimensions){const $=S.bottom-y.y,le=S.right-y.x,Fe=ml(this._overlayRef.getConfig().minHeight),Dt=ml(this._overlayRef.getConfig().minWidth);return(C.fitsInViewportVertically||null!=Fe&&Fe<=$)&&(C.fitsInViewportHorizontally||null!=Dt&&Dt<=le)}return!1}_pushOverlayOnScreen(C,y,S){if(this._previousPushAmount&&this._positionLocked)return{x:C.x+this._previousPushAmount.x,y:C.y+this._previousPushAmount.y};const $=gl(y),le=this._viewportRect,Fe=Math.max(C.x+$.width-le.width,0),Dt=Math.max(C.y+$.height-le.height,0),tn=Math.max(le.top-S.top-C.y,0),gn=Math.max(le.left-S.left-C.x,0);let An=0,zr=0;return An=$.width<=le.width?gn||-Fe:C.x<this._viewportMargin?le.left-S.left-C.x:0,zr=$.height<=le.height?tn||-Dt:C.y<this._viewportMargin?le.top-S.top-C.y:0,this._previousPushAmount={x:An,y:zr},{x:C.x+An,y:C.y+zr}}_applyPosition(C,y){if(this._setTransformOrigin(C),this._setOverlayElementStyles(y,C),this._setBoundingBoxStyles(y,C),C.panelClass&&this._addPanelClasses(C.panelClass),this._lastPosition=C,this._positionChanges.observers.length){const S=this._getScrollVisibility(),$=new qd(C,S);this._positionChanges.next($)}this._isInitialRender=!1}_setTransformOrigin(C){if(!this._transformOriginSelector)return;const y=this._boundingBox.querySelectorAll(this._transformOriginSelector);let S,$=C.overlayY;S="center"===C.overlayX?"center":this._isRtl()?"start"===C.overlayX?"right":"left":"start"===C.overlayX?"left":"right";for(let le=0;le<y.length;le++)y[le].style.transformOrigin=`${S} ${$}`}_calculateBoundingBoxRect(C,y){const S=this._viewportRect,$=this._isRtl();let le,Fe,Dt,An,zr,Go;if("top"===y.overlayY)Fe=C.y,le=S.height-Fe+this._viewportMargin;else if("bottom"===y.overlayY)Dt=S.height-C.y+2*this._viewportMargin,le=S.height-Dt+this._viewportMargin;else{const Ts=Math.min(S.bottom-C.y+S.top,C.y),Vs=this._lastBoundingBoxSize.height;le=2*Ts,Fe=C.y-Ts,le>Vs&&!this._isInitialRender&&!this._growAfterOpen&&(Fe=C.y-Vs/2)}if("end"===y.overlayX&&!$||"start"===y.overlayX&&$)Go=S.width-C.x+this._viewportMargin,An=C.x-this._viewportMargin;else if("start"===y.overlayX&&!$||"end"===y.overlayX&&$)zr=C.x,An=S.right-C.x;else{const Ts=Math.min(S.right-C.x+S.left,C.x),Vs=this._lastBoundingBoxSize.width;An=2*Ts,zr=C.x-Ts,An>Vs&&!this._isInitialRender&&!this._growAfterOpen&&(zr=C.x-Vs/2)}return{top:Fe,left:zr,bottom:Dt,right:Go,width:An,height:le}}_setBoundingBoxStyles(C,y){const S=this._calculateBoundingBoxRect(C,y);!this._isInitialRender&&!this._growAfterOpen&&(S.height=Math.min(S.height,this._lastBoundingBoxSize.height),S.width=Math.min(S.width,this._lastBoundingBoxSize.width));const $={};if(this._hasExactPosition())$.top=$.left="0",$.bottom=$.right=$.maxHeight=$.maxWidth="",$.width=$.height="100%";else{const le=this._overlayRef.getConfig().maxHeight,Fe=this._overlayRef.getConfig().maxWidth;$.height=jr(S.height),$.top=jr(S.top),$.bottom=jr(S.bottom),$.width=jr(S.width),$.left=jr(S.left),$.right=jr(S.right),$.alignItems="center"===y.overlayX?"center":"end"===y.overlayX?"flex-end":"flex-start",$.justifyContent="center"===y.overlayY?"center":"bottom"===y.overlayY?"flex-end":"flex-start",le&&($.maxHeight=jr(le)),Fe&&($.maxWidth=jr(Fe))}this._lastBoundingBoxSize=S,va(this._boundingBox.style,$)}_resetBoundingBoxStyles(){va(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){va(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(C,y){const S={},$=this._hasExactPosition(),le=this._hasFlexibleDimensions,Fe=this._overlayRef.getConfig();if($){const An=this._viewportRuler.getViewportScrollPosition();va(S,this._getExactOverlayY(y,C,An)),va(S,this._getExactOverlayX(y,C,An))}else S.position="static";let Dt="",tn=this._getOffset(y,"x"),gn=this._getOffset(y,"y");tn&&(Dt+=`translateX(${tn}px) `),gn&&(Dt+=`translateY(${gn}px)`),S.transform=Dt.trim(),Fe.maxHeight&&($?S.maxHeight=jr(Fe.maxHeight):le&&(S.maxHeight="")),Fe.maxWidth&&($?S.maxWidth=jr(Fe.maxWidth):le&&(S.maxWidth="")),va(this._pane.style,S)}_getExactOverlayY(C,y,S){let $={top:"",bottom:""},le=this._getOverlayPoint(y,this._overlayRect,C);return this._isPushed&&(le=this._pushOverlayOnScreen(le,this._overlayRect,S)),"bottom"===C.overlayY?$.bottom=this._document.documentElement.clientHeight-(le.y+this._overlayRect.height)+"px":$.top=jr(le.y),$}_getExactOverlayX(C,y,S){let Fe,$={left:"",right:""},le=this._getOverlayPoint(y,this._overlayRect,C);return this._isPushed&&(le=this._pushOverlayOnScreen(le,this._overlayRect,S)),Fe=this._isRtl()?"end"===C.overlayX?"left":"right":"end"===C.overlayX?"right":"left","right"===Fe?$.right=this._document.documentElement.clientWidth-(le.x+this._overlayRect.width)+"px":$.left=jr(le.x),$}_getScrollVisibility(){const C=this._getOriginRect(),y=this._pane.getBoundingClientRect(),S=this._scrollables.map($=>$.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Vc(C,S),isOriginOutsideView:td(C,S),isOverlayClipped:Vc(y,S),isOverlayOutsideView:td(y,S)}}_subtractOverflows(C,...y){return y.reduce((S,$)=>S-Math.max($,0),C)}_getNarrowedViewportRect(){const C=this._document.documentElement.clientWidth,y=this._document.documentElement.clientHeight,S=this._viewportRuler.getViewportScrollPosition();return{top:S.top+this._viewportMargin,left:S.left+this._viewportMargin,right:S.left+C-this._viewportMargin,bottom:S.top+y-this._viewportMargin,width:C-2*this._viewportMargin,height:y-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(C,y){return"x"===y?null==C.offsetX?this._offsetX:C.offsetX:null==C.offsetY?this._offsetY:C.offsetY}_validatePositions(){}_addPanelClasses(C){this._pane&&_i(C).forEach(y=>{""!==y&&-1===this._appliedPanelClasses.indexOf(y)&&(this._appliedPanelClasses.push(y),this._pane.classList.add(y))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(C=>{this._pane.classList.remove(C)}),this._appliedPanelClasses=[])}_getOriginRect(){const C=this._origin;if(C instanceof d.aKT)return C.nativeElement.getBoundingClientRect();if(C instanceof Element)return C.getBoundingClientRect();const y=C.width||0,S=C.height||0;return{top:C.y,bottom:C.y+S,left:C.x,right:C.x+y,height:S,width:y}}}function va(U,C){for(let y in C)C.hasOwnProperty(y)&&(U[y]=C[y]);return U}function ml(U){if("number"!=typeof U&&null!=U){const[C,y]=U.split(ec);return y&&"px"!==y?null:parseFloat(C)}return U||null}function gl(U){return{top:Math.floor(U.top),right:Math.floor(U.right),bottom:Math.floor(U.bottom),left:Math.floor(U.left),width:Math.floor(U.width),height:Math.floor(U.height)}}const yu="cdk-global-overlay-wrapper";class vu{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(C){const y=C.getConfig();this._overlayRef=C,this._width&&!y.width&&C.updateSize({width:this._width}),this._height&&!y.height&&C.updateSize({height:this._height}),C.hostElement.classList.add(yu),this._isDisposed=!1}top(C=""){return this._bottomOffset="",this._topOffset=C,this._alignItems="flex-start",this}left(C=""){return this._xOffset=C,this._xPosition="left",this}bottom(C=""){return this._topOffset="",this._bottomOffset=C,this._alignItems="flex-end",this}right(C=""){return this._xOffset=C,this._xPosition="right",this}start(C=""){return this._xOffset=C,this._xPosition="start",this}end(C=""){return this._xOffset=C,this._xPosition="end",this}width(C=""){return this._overlayRef?this._overlayRef.updateSize({width:C}):this._width=C,this}height(C=""){return this._overlayRef?this._overlayRef.updateSize({height:C}):this._height=C,this}centerHorizontally(C=""){return this.left(C),this._xPosition="center",this}centerVertically(C=""){return this.top(C),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const C=this._overlayRef.overlayElement.style,y=this._overlayRef.hostElement.style,S=this._overlayRef.getConfig(),{width:$,height:le,maxWidth:Fe,maxHeight:Dt}=S,tn=!("100%"!==$&&"100vw"!==$||Fe&&"100%"!==Fe&&"100vw"!==Fe),gn=!("100%"!==le&&"100vh"!==le||Dt&&"100%"!==Dt&&"100vh"!==Dt),An=this._xPosition,zr=this._xOffset,Go="rtl"===this._overlayRef.getConfig().direction;let Ts="",Vs="",As="";tn?As="flex-start":"center"===An?(As="center",Go?Vs=zr:Ts=zr):Go?"left"===An||"end"===An?(As="flex-end",Ts=zr):("right"===An||"start"===An)&&(As="flex-start",Vs=zr):"left"===An||"start"===An?(As="flex-start",Ts=zr):("right"===An||"end"===An)&&(As="flex-end",Vs=zr),C.position=this._cssPosition,C.marginLeft=tn?"0":Ts,C.marginTop=gn?"0":this._topOffset,C.marginBottom=this._bottomOffset,C.marginRight=tn?"0":Vs,y.justifyContent=As,y.alignItems=gn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const C=this._overlayRef.overlayElement.style,y=this._overlayRef.hostElement,S=y.style;y.classList.remove(yu),S.justifyContent=S.alignItems=C.marginTop=C.marginBottom=C.marginLeft=C.marginRight=C.position="",this._overlayRef=null,this._isDisposed=!0}}let bu=(()=>{class U{constructor(y,S,$,le){this._viewportRuler=y,this._document=S,this._platform=$,this._overlayContainer=le}global(){return new vu}flexibleConnectedTo(y){return new Bc(y,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Zu),d.KVO(Te.qQ),d.KVO(ke),d.KVO(_u))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})(),eo=0,Bl=(()=>{class U{constructor(y,S,$,le,Fe,Dt,tn,gn,An,zr,Go,Ts){this.scrollStrategies=y,this._overlayContainer=S,this._componentFactoryResolver=$,this._positionBuilder=le,this._keyboardDispatcher=Fe,this._injector=Dt,this._ngZone=tn,this._document=gn,this._directionality=An,this._location=zr,this._outsideClickDispatcher=Go,this._animationsModuleType=Ts}create(y){const S=this._createHostElement(),$=this._createPaneElement(S),le=this._createPortalOutlet($),Fe=new No(y);return Fe.direction=Fe.direction||this._directionality.value,new nd(le,S,$,Fe,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(y){const S=this._document.createElement("div");return S.id="cdk-overlay-"+eo++,S.classList.add("cdk-overlay-pane"),y.appendChild(S),S}_createHostElement(){const y=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(y),y}_createPortalOutlet(y){return this._appRef||(this._appRef=this._injector.get(d.o8S)),new rs(y,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Lc),d.KVO(_u),d.KVO(d.OM3),d.KVO(bu),d.KVO(Qd),d.KVO(d.zZn),d.KVO(d.SKi),d.KVO(Te.qQ),d.KVO(da),d.KVO(Te.aZ),d.KVO(Xd),d.KVO(d.bc$,8))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})}}return U})();const Iu={provide:new d.nKC("cdk-connected-overlay-scroll-strategy"),deps:[Bl],useFactory:function Zd(U){return()=>U.scrollStrategies.reposition()}};let Hl=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({providers:[Bl,Iu],imports:[fa,rl,Ja,Ja]})}}return U})();function wu(U,C){if(1&U){const y=d.RV6();d.j41(0,"div",2)(1,"button",3),d.bIt("click",function(){d.eBV(y);const $=d.XpG();return d.Njj($.action())}),d.EFF(2),d.k0s()()}if(2&U){const y=d.XpG();d.R7$(2),d.SpI(" ",y.data.action," ")}}const rd=["label"];function _l(U,C){}const pc=Math.pow(2,31)-1;class yl{constructor(C,y){this._overlayRef=y,this._afterDismissed=new fe.B,this._afterOpened=new fe.B,this._onAction=new fe.B,this._dismissedByAction=!1,this.containerInstance=C,C._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(C){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(C,pc))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const $l=new d.nKC("MatSnackBarData");class Hc{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let Jd=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275dir=d.FsC({type:U,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}}return U})(),Jh=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275dir=d.FsC({type:U,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}}return U})(),ef=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275dir=d.FsC({type:U,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}}return U})(),eh=(()=>{class U{constructor(y,S){this.snackBarRef=y,this.data=S}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static{this.\u0275fac=function(S){return new(S||U)(d.rXU(yl),d.rXU($l))}}static{this.\u0275cmp=d.VBU({type:U,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(S,$){1&S&&(d.j41(0,"div",0),d.EFF(1),d.k0s(),d.DNE(2,wu,3,1,"div",1)),2&S&&(d.R7$(1),d.SpI(" ",$.data.message,"\n"),d.R7$(1),d.Y8G("ngIf",$.hasAction))},dependencies:[Te.bT,ln,Jd,Jh,ef],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}}return U})();const Tu={snackBarState:(0,xo.hZ)("state",[(0,xo.wk)("void, hidden",(0,xo.iF)({transform:"scale(0.8)",opacity:0})),(0,xo.wk)("visible",(0,xo.iF)({transform:"scale(1)",opacity:1})),(0,xo.kY)("* => visible",(0,xo.i0)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,xo.kY)("* => void, * => hidden",(0,xo.i0)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,xo.iF)({opacity:0})))])};let id=0,th=(()=>{class U extends dc{constructor(y,S,$,le,Fe){super(),this._ngZone=y,this._elementRef=S,this._changeDetectorRef=$,this._platform=le,this.snackBarConfig=Fe,this._document=(0,d.WQX)(Te.qQ),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new fe.B,this._onExit=new fe.B,this._onEnter=new fe.B,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+id++,this.attachDomPortal=Dt=>{this._assertNotAttached();const tn=this._portalOutlet.attachDomPortal(Dt);return this._afterPortalAttached(),tn},this._live="assertive"!==Fe.politeness||Fe.announcementMessage?"off"===Fe.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(y){this._assertNotAttached();const S=this._portalOutlet.attachComponentPortal(y);return this._afterPortalAttached(),S}attachTemplatePortal(y){this._assertNotAttached();const S=this._portalOutlet.attachTemplatePortal(y);return this._afterPortalAttached(),S}onAnimationEnd(y){const{fromState:S,toState:$}=y;if(("void"===$&&"void"!==S||"hidden"===$)&&this._completeExit(),"visible"===$){const le=this._onEnter;this._ngZone.run(()=>{le.next(),le.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Ii.s)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const y=this._elementRef.nativeElement,S=this.snackBarConfig.panelClass;S&&(Array.isArray(S)?S.forEach($=>y.classList.add($)):y.classList.add(S)),this._exposeToModals()}_exposeToModals(){const y=this._liveElementId,S=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let $=0;$<S.length;$++){const le=S[$],Fe=le.getAttribute("aria-owns");this._trackedModals.add(le),Fe?-1===Fe.indexOf(y)&&le.setAttribute("aria-owns",Fe+" "+y):le.setAttribute("aria-owns",y)}}_clearFromModals(){this._trackedModals.forEach(y=>{const S=y.getAttribute("aria-owns");if(S){const $=S.replace(this._liveElementId,"").trim();$.length>0?y.setAttribute("aria-owns",$):y.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const y=this._elementRef.nativeElement.querySelector("[aria-hidden]"),S=this._elementRef.nativeElement.querySelector("[aria-live]");if(y&&S){let $=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&y.contains(document.activeElement)&&($=document.activeElement),y.removeAttribute("aria-hidden"),S.appendChild(y),$?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static{this.\u0275fac=function(S){return new(S||U)(d.rXU(d.SKi),d.rXU(d.aKT),d.rXU(d.gRc),d.rXU(ke),d.rXU(Hc))}}static{this.\u0275dir=d.FsC({type:U,viewQuery:function(S,$){if(1&S&&d.GBs(Ra,7),2&S){let le;d.mGM(le=d.lsd())&&($._portalOutlet=le.first)}},features:[d.Vt3]})}}return U})(),Au=(()=>{class U extends th{_afterPortalAttached(){super._afterPortalAttached();const y=this._label.nativeElement,S="mdc-snackbar__label";y.classList.toggle(S,!y.querySelector(`.${S}`))}static{this.\u0275fac=function(){let y;return function($){return(y||(y=d.xGo(U)))($||U)}}()}static{this.\u0275cmp=d.VBU({type:U,selectors:[["mat-snack-bar-container"]],viewQuery:function(S,$){if(1&S&&d.GBs(rd,7),2&S){let le;d.mGM(le=d.lsd())&&($._label=le.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(S,$){1&S&&d.Kam("@state.done",function(Fe){return $.onAnimationEnd(Fe)}),2&S&&d.zvX("@state",$._animationState)},features:[d.Vt3],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(S,$){1&S&&(d.j41(0,"div",0)(1,"div",1,2)(3,"div",3),d.DNE(4,_l,0,0,"ng-template",4),d.k0s(),d.nrm(5,"div"),d.k0s()()),2&S&&(d.R7$(5),d.BMQ("aria-live",$._live)("role",$._role)("id",$._liveElementId))},dependencies:[Ra],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;--mdc-snackbar-container-shape:4px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[Tu.snackBarState]}})}}return U})(),tf=(()=>{class U{static{this.\u0275fac=function(S){return new(S||U)}}static{this.\u0275mod=d.$C({type:U})}static{this.\u0275inj=d.G2t({imports:[Hl,rl,Te.MD,Sa,te,te]})}}return U})();const od=new d.nKC("mat-snack-bar-default-options",{providedIn:"root",factory:function sd(){return new Hc}});let zl=(()=>{class U{get _openedSnackBarRef(){const y=this._parentSnackBar;return y?y._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(y){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=y:this._snackBarRefAtThisLevel=y}constructor(y,S,$,le,Fe,Dt){this._overlay=y,this._live=S,this._injector=$,this._breakpointObserver=le,this._parentSnackBar=Fe,this._defaultConfig=Dt,this._snackBarRefAtThisLevel=null}openFromComponent(y,S){return this._attach(y,S)}openFromTemplate(y,S){return this._attach(y,S)}open(y,S="",$){const le={...this._defaultConfig,...$};return le.data={message:y,action:S},le.announcementMessage===y&&(le.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,le)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(y,S){const le=d.zZn.create({parent:S&&S.viewContainerRef&&S.viewContainerRef.injector||this._injector,providers:[{provide:Hc,useValue:S}]}),Fe=new cs(this.snackBarContainerComponent,S.viewContainerRef,le),Dt=y.attach(Fe);return Dt.instance.snackBarConfig=S,Dt.instance}_attach(y,S){const $={...new Hc,...this._defaultConfig,...S},le=this._createOverlay($),Fe=this._attachSnackBarContainer(le,$),Dt=new yl(Fe,le);if(y instanceof d.C4Q){const tn=new Po(y,null,{$implicit:$.data,snackBarRef:Dt});Dt.instance=Fe.attachTemplatePortal(tn)}else{const tn=this._createInjector($,Dt),gn=new cs(y,void 0,tn),An=Fe.attachComponentPortal(gn);Dt.instance=An.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe((0,vr.Q)(le.detachments())).subscribe(tn=>{le.overlayElement.classList.toggle(this.handsetCssClass,tn.matches)}),$.announcementMessage&&Fe._onAnnounce.subscribe(()=>{this._live.announce($.announcementMessage,$.politeness)}),this._animateSnackBar(Dt,$),this._openedSnackBarRef=Dt,this._openedSnackBarRef}_animateSnackBar(y,S){y.afterDismissed().subscribe(()=>{this._openedSnackBarRef==y&&(this._openedSnackBarRef=null),S.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{y.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):y.containerInstance.enter(),S.duration&&S.duration>0&&y.afterOpened().subscribe(()=>y._dismissAfter(S.duration))}_createOverlay(y){const S=new No;S.direction=y.direction;let $=this._overlay.position().global();const le="rtl"===y.direction,Fe="left"===y.horizontalPosition||"start"===y.horizontalPosition&&!le||"end"===y.horizontalPosition&&le,Dt=!Fe&&"center"!==y.horizontalPosition;return Fe?$.left("0"):Dt?$.right("0"):$.centerHorizontally(),"top"===y.verticalPosition?$.top("0"):$.bottom("0"),S.positionStrategy=$,this._overlay.create(S)}_createInjector(y,S){return d.zZn.create({parent:y&&y.viewContainerRef&&y.viewContainerRef.injector||this._injector,providers:[{provide:yl,useValue:S},{provide:$l,useValue:y.data}]})}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Bl),d.KVO(fn),d.KVO(d.zZn),d.KVO(Bi),d.KVO(U,12),d.KVO(od))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac})}}return U})(),Kl=(()=>{class U extends zl{constructor(y,S,$,le,Fe,Dt){super(y,S,$,le,Fe,Dt),this.simpleSnackBarComponent=eh,this.snackBarContainerComponent=Au,this.handsetCssClass="mat-mdc-snack-bar-handset"}static{this.\u0275fac=function(S){return new(S||U)(d.KVO(Bl),d.KVO(fn),d.KVO(d.zZn),d.KVO(Bi),d.KVO(U,12),d.KVO(od))}}static{this.\u0275prov=d.jDH({token:U,factory:U.\u0275fac,providedIn:tf})}}return U})()},345:(en,at,W)=>{W.d(at,{B7:()=>Ht,Bb:()=>xn,hE:()=>ri,sG:()=>Yt,up:()=>Zt});var d=W(7705),fe=W(177);class Te extends fe.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pe extends Te{static makeCurrent(){(0,fe.ZD)(new pe)}onAndCancel(ie,q,re){return ie.addEventListener(q,re),()=>{ie.removeEventListener(q,re)}}dispatchEvent(ie,q){ie.dispatchEvent(q)}remove(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}createElement(ie,q){return(q=q||this.getDefaultDocument()).createElement(ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ie){return ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(ie){return ie instanceof DocumentFragment}getGlobalEventTarget(ie,q){return"window"===q?window:"document"===q?ie:"body"===q?ie.body:null}getBaseHref(ie){const q=function Pe(){return ke=ke||document.querySelector("base"),ke?ke.getAttribute("href"):null}();return null==q?null:function Qe(vt){_e=_e||document.createElement("a"),_e.setAttribute("href",vt);const ie=_e.pathname;return"/"===ie.charAt(0)?ie:`/${ie}`}(q)}resetBaseElement(){ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(ie){return(0,fe._b)(document.cookie,ie)}}let _e,ke=null,be=(()=>{class vt{build(){return new XMLHttpRequest}static{this.\u0275fac=function(re){return new(re||vt)}}static{this.\u0275prov=d.jDH({token:vt,factory:vt.\u0275fac})}}return vt})();const Ce=new d.nKC("EventManagerPlugins");let Ve=(()=>{class vt{constructor(q,re){this._zone=re,this._eventNameToPlugin=new Map,q.forEach(De=>{De.manager=this}),this._plugins=q.slice().reverse()}addEventListener(q,re,De){return this._findPluginFor(re).addEventListener(q,re,De)}getZone(){return this._zone}_findPluginFor(q){let re=this._eventNameToPlugin.get(q);if(re)return re;if(re=this._plugins.find(Re=>Re.supports(q)),!re)throw new d.wOt(5101,!1);return this._eventNameToPlugin.set(q,re),re}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(Ce),d.KVO(d.SKi))}}static{this.\u0275prov=d.jDH({token:vt,factory:vt.\u0275fac})}}return vt})();class mt{constructor(ie){this._doc=ie}}const dt="ng-app-id";let St=(()=>{class vt{constructor(q,re,De,Re={}){this.doc=q,this.appId=re,this.nonce=De,this.platformId=Re,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,fe.Vy)(Re),this.resetHostNodes()}addStyles(q){for(const re of q)1===this.changeUsageCount(re,1)&&this.onStyleAdded(re)}removeStyles(q){for(const re of q)this.changeUsageCount(re,-1)<=0&&this.onStyleRemoved(re)}ngOnDestroy(){const q=this.styleNodesInDOM;q&&(q.forEach(re=>re.remove()),q.clear());for(const re of this.getAllStyles())this.onStyleRemoved(re);this.resetHostNodes()}addHost(q){this.hostNodes.add(q);for(const re of this.getAllStyles())this.addStyleToHost(q,re)}removeHost(q){this.hostNodes.delete(q)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(q){for(const re of this.hostNodes)this.addStyleToHost(re,q)}onStyleRemoved(q){const re=this.styleRef;re.get(q)?.elements?.forEach(De=>De.remove()),re.delete(q)}collectServerRenderedStyles(){const q=this.doc.head?.querySelectorAll(`style[${dt}="${this.appId}"]`);if(q?.length){const re=new Map;return q.forEach(De=>{null!=De.textContent&&re.set(De.textContent,De)}),re}return null}changeUsageCount(q,re){const De=this.styleRef;if(De.has(q)){const Re=De.get(q);return Re.usage+=re,Re.usage}return De.set(q,{usage:re,elements:[]}),re}getStyleElement(q,re){const De=this.styleNodesInDOM,Re=De?.get(re);if(Re?.parentNode===q)return De.delete(re),Re.removeAttribute(dt),Re;{const it=this.doc.createElement("style");return this.nonce&&it.setAttribute("nonce",this.nonce),it.textContent=re,this.platformIsServer&&it.setAttribute(dt,this.appId),it}}addStyleToHost(q,re){const De=this.getStyleElement(q,re);q.appendChild(De);const Re=this.styleRef,it=Re.get(re)?.elements;it?it.push(De):Re.set(re,{elements:[De],usage:1})}resetHostNodes(){const q=this.hostNodes;q.clear(),q.add(this.doc.head)}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(fe.qQ),d.KVO(d.sZ2),d.KVO(d.BIS,8),d.KVO(d.Agw))}}static{this.\u0275prov=d.jDH({token:vt,factory:vt.\u0275fac})}}return vt})();const It={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nt=/%COMP%/g,qe=new d.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function _t(vt,ie){return ie.map(q=>q.replace(Nt,vt))}let Ht=(()=>{class vt{constructor(q,re,De,Re,it,kt,Pn,Gt=null){this.eventManager=q,this.sharedStylesHost=re,this.appId=De,this.removeStylesOnCompDestroy=Re,this.doc=it,this.platformId=kt,this.ngZone=Pn,this.nonce=Gt,this.rendererByCompId=new Map,this.platformIsServer=(0,fe.Vy)(kt),this.defaultRenderer=new Jt(q,it,Pn,this.platformIsServer)}createRenderer(q,re){if(!q||!re)return this.defaultRenderer;this.platformIsServer&&re.encapsulation===d.gXe.ShadowDom&&(re={...re,encapsulation:d.gXe.Emulated});const De=this.getOrCreateRenderer(q,re);return De instanceof Yr?De.applyToHost(q):De instanceof ui&&De.applyStyles(),De}getOrCreateRenderer(q,re){const De=this.rendererByCompId;let Re=De.get(re.id);if(!Re){const it=this.doc,kt=this.ngZone,Pn=this.eventManager,Gt=this.sharedStylesHost,$t=this.removeStylesOnCompDestroy,cr=this.platformIsServer;switch(re.encapsulation){case d.gXe.Emulated:Re=new Yr(Pn,Gt,re,this.appId,$t,it,kt,cr);break;case d.gXe.ShadowDom:return new er(Pn,Gt,q,re,it,kt,this.nonce,cr);default:Re=new ui(Pn,Gt,re,$t,it,kt,cr)}De.set(re.id,Re)}return Re}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(Ve),d.KVO(St),d.KVO(d.sZ2),d.KVO(qe),d.KVO(fe.qQ),d.KVO(d.Agw),d.KVO(d.SKi),d.KVO(d.BIS))}}static{this.\u0275prov=d.jDH({token:vt,factory:vt.\u0275fac})}}return vt})();class Jt{constructor(ie,q,re,De){this.eventManager=ie,this.doc=q,this.ngZone=re,this.platformIsServer=De,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ie,q){return q?this.doc.createElementNS(It[q]||q,ie):this.doc.createElement(ie)}createComment(ie){return this.doc.createComment(ie)}createText(ie){return this.doc.createTextNode(ie)}appendChild(ie,q){(_r(ie)?ie.content:ie).appendChild(q)}insertBefore(ie,q,re){ie&&(_r(ie)?ie.content:ie).insertBefore(q,re)}removeChild(ie,q){ie&&ie.removeChild(q)}selectRootElement(ie,q){let re="string"==typeof ie?this.doc.querySelector(ie):ie;if(!re)throw new d.wOt(-5104,!1);return q||(re.textContent=""),re}parentNode(ie){return ie.parentNode}nextSibling(ie){return ie.nextSibling}setAttribute(ie,q,re,De){if(De){q=De+":"+q;const Re=It[De];Re?ie.setAttributeNS(Re,q,re):ie.setAttribute(q,re)}else ie.setAttribute(q,re)}removeAttribute(ie,q,re){if(re){const De=It[re];De?ie.removeAttributeNS(De,q):ie.removeAttribute(`${re}:${q}`)}else ie.removeAttribute(q)}addClass(ie,q){ie.classList.add(q)}removeClass(ie,q){ie.classList.remove(q)}setStyle(ie,q,re,De){De&(d.czy.DashCase|d.czy.Important)?ie.style.setProperty(q,re,De&d.czy.Important?"important":""):ie.style[q]=re}removeStyle(ie,q,re){re&d.czy.DashCase?ie.style.removeProperty(q):ie.style[q]=""}setProperty(ie,q,re){ie[q]=re}setValue(ie,q){ie.nodeValue=q}listen(ie,q,re){if("string"==typeof ie&&!(ie=(0,fe.QT)().getGlobalEventTarget(this.doc,ie)))throw new Error(`Unsupported event target ${ie} for event ${q}`);return this.eventManager.addEventListener(ie,q,this.decoratePreventDefault(re))}decoratePreventDefault(ie){return q=>{if("__ngUnwrap__"===q)return ie;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ie(q)):ie(q))&&q.preventDefault()}}}function _r(vt){return"TEMPLATE"===vt.tagName&&void 0!==vt.content}class er extends Jt{constructor(ie,q,re,De,Re,it,kt,Pn){super(ie,Re,it,Pn),this.sharedStylesHost=q,this.hostEl=re,this.shadowRoot=re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Gt=_t(De.id,De.styles);for(const $t of Gt){const cr=document.createElement("style");kt&&cr.setAttribute("nonce",kt),cr.textContent=$t,this.shadowRoot.appendChild(cr)}}nodeOrShadowRoot(ie){return ie===this.hostEl?this.shadowRoot:ie}appendChild(ie,q){return super.appendChild(this.nodeOrShadowRoot(ie),q)}insertBefore(ie,q,re){return super.insertBefore(this.nodeOrShadowRoot(ie),q,re)}removeChild(ie,q){return super.removeChild(this.nodeOrShadowRoot(ie),q)}parentNode(ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ie)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ui extends Jt{constructor(ie,q,re,De,Re,it,kt,Pn){super(ie,Re,it,kt),this.sharedStylesHost=q,this.removeStylesOnCompDestroy=De,this.styles=Pn?_t(Pn,re.styles):re.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Yr extends ui{constructor(ie,q,re,De,Re,it,kt,Pn){const Gt=De+"-"+re.id;super(ie,q,re,Re,it,kt,Pn,Gt),this.contentAttr=function Me(vt){return"_ngcontent-%COMP%".replace(Nt,vt)}(Gt),this.hostAttr=function gt(vt){return"_nghost-%COMP%".replace(Nt,vt)}(Gt)}applyToHost(ie){this.applyStyles(),this.setAttribute(ie,this.hostAttr,"")}createElement(ie,q){const re=super.createElement(ie,q);return super.setAttribute(re,this.contentAttr,""),re}}let On=(()=>{class vt extends mt{constructor(q){super(q)}supports(q){return!0}addEventListener(q,re,De){return q.addEventListener(re,De,!1),()=>this.removeEventListener(q,re,De)}removeEventListener(q,re,De){return q.removeEventListener(re,De)}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(fe.qQ))}}static{this.\u0275prov=d.jDH({token:vt,factory:vt.\u0275fac})}}return vt})();const Ln=["alt","control","meta","shift"],En={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ir={alt:vt=>vt.altKey,control:vt=>vt.ctrlKey,meta:vt=>vt.metaKey,shift:vt=>vt.shiftKey};let Ke=(()=>{class vt extends mt{constructor(q){super(q)}supports(q){return null!=vt.parseEventName(q)}addEventListener(q,re,De){const Re=vt.parseEventName(re),it=vt.eventCallback(Re.fullKey,De,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,fe.QT)().onAndCancel(q,Re.domEventName,it))}static parseEventName(q){const re=q.toLowerCase().split("."),De=re.shift();if(0===re.length||"keydown"!==De&&"keyup"!==De)return null;const Re=vt._normalizeKey(re.pop());let it="",kt=re.indexOf("code");if(kt>-1&&(re.splice(kt,1),it="code."),Ln.forEach(Gt=>{const $t=re.indexOf(Gt);$t>-1&&(re.splice($t,1),it+=Gt+".")}),it+=Re,0!=re.length||0===Re.length)return null;const Pn={};return Pn.domEventName=De,Pn.fullKey=it,Pn}static matchEventFullKeyCode(q,re){let De=En[q.key]||q.key,Re="";return re.indexOf("code.")>-1&&(De=q.code,Re="code."),!(null==De||!De)&&(De=De.toLowerCase()," "===De?De="space":"."===De&&(De="dot"),Ln.forEach(it=>{it!==De&&(0,ir[it])(q)&&(Re+=it+".")}),Re+=De,Re===re)}static eventCallback(q,re,De){return Re=>{vt.matchEventFullKeyCode(Re,q)&&De.runGuarded(()=>re(Re))}}static _normalizeKey(q){return"esc"===q?"escape":q}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(fe.qQ))}}static{this.\u0275prov=d.jDH({token:vt,factory:vt.\u0275fac})}}return vt})();const Yt=(0,d.oH4)(d.fpN,"browser",[{provide:d.Agw,useValue:fe.AJ},{provide:d.PLl,useValue:function Je(){pe.makeCurrent()},multi:!0},{provide:fe.qQ,useFactory:function Rn(){return(0,d.TL$)(document),document},deps:[]}]),mr=new d.nKC(""),yr=[{provide:d.e01,useClass:class $e{addToWindow(ie){d.JZv.getAngularTestability=(re,De=!0)=>{const Re=ie.findTestabilityInTree(re,De);if(null==Re)throw new d.wOt(5103,!1);return Re},d.JZv.getAllAngularTestabilities=()=>ie.getAllTestabilities(),d.JZv.getAllAngularRootElements=()=>ie.getAllRootElements(),d.JZv.frameworkStabilizers||(d.JZv.frameworkStabilizers=[]),d.JZv.frameworkStabilizers.push(re=>{const De=d.JZv.getAllAngularTestabilities();let Re=De.length,it=!1;const kt=function(Pn){it=it||Pn,Re--,0==Re&&re(it)};De.forEach(Pn=>{Pn.whenStable(kt)})})}findTestabilityInTree(ie,q,re){return null==q?null:ie.getTestability(q)??(re?(0,fe.QT)().isShadowRoot(q)?this.findTestabilityInTree(ie,q.host,!0):this.findTestabilityInTree(ie,q.parentElement,!0):null)}},deps:[]},{provide:d.WHO,useClass:d.NYb,deps:[d.SKi,d.giA,d.e01]},{provide:d.NYb,useClass:d.NYb,deps:[d.SKi,d.giA,d.e01]}],Ir=[{provide:d.H8p,useValue:"root"},{provide:d.zcH,useFactory:function Vt(){return new d.zcH},deps:[]},{provide:Ce,useClass:On,multi:!0,deps:[fe.qQ,d.SKi,d.Agw]},{provide:Ce,useClass:Ke,multi:!0,deps:[fe.qQ]},Ht,St,Ve,{provide:d._9s,useExisting:Ht},{provide:fe.N0,useClass:be,deps:[]},[]];let xn=(()=>{class vt{constructor(q){}static withServerTransition(q){return{ngModule:vt,providers:[{provide:d.sZ2,useValue:q.appId}]}}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(mr,12))}}static{this.\u0275mod=d.$C({type:vt})}static{this.\u0275inj=d.G2t({providers:[...Ir,...yr],imports:[fe.MD,d.Hbi]})}}return vt})(),ri=(()=>{class vt{constructor(q){this._doc=q}getTitle(){return this._doc.title}setTitle(q){this._doc.title=q||""}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(fe.qQ))}}static{this.\u0275prov=d.jDH({token:vt,factory:function(re){let De=null;return De=re?new re:function or(){return new ri((0,d.KVO)(fe.qQ))}(),De},providedIn:"root"})}}return vt})();typeof window<"u"&&window;let Zt=(()=>{class vt{static{this.\u0275fac=function(re){return new(re||vt)}}static{this.\u0275prov=d.jDH({token:vt,factory:function(re){let De=null;return De=re?new(re||vt):d.KVO(Lt),De},providedIn:"root"})}}return vt})(),Lt=(()=>{class vt extends Zt{constructor(q){super(),this._doc=q}sanitize(q,re){if(null==re)return null;switch(q){case d.WPN.NONE:return re;case d.WPN.HTML:return(0,d.ZF7)(re,"HTML")?(0,d.rcV)(re):(0,d.h9k)(this._doc,String(re)).toString();case d.WPN.STYLE:return(0,d.ZF7)(re,"Style")?(0,d.rcV)(re):re;case d.WPN.SCRIPT:if((0,d.ZF7)(re,"Script"))return(0,d.rcV)(re);throw new d.wOt(5200,!1);case d.WPN.URL:return(0,d.ZF7)(re,"URL")?(0,d.rcV)(re):(0,d.$MX)(String(re));case d.WPN.RESOURCE_URL:if((0,d.ZF7)(re,"ResourceURL"))return(0,d.rcV)(re);throw new d.wOt(5201,!1);default:throw new d.wOt(5202,!1)}}bypassSecurityTrustHtml(q){return(0,d.Kcf)(q)}bypassSecurityTrustStyle(q){return(0,d.cWb)(q)}bypassSecurityTrustScript(q){return(0,d.UyX)(q)}bypassSecurityTrustUrl(q){return(0,d.osQ)(q)}bypassSecurityTrustResourceUrl(q){return(0,d.e5t)(q)}static{this.\u0275fac=function(re){return new(re||vt)(d.KVO(fe.qQ))}}static{this.\u0275prov=d.jDH({token:vt,factory:function(re){let De=null;return De=re?new re:function ds(vt){return new Lt(vt.get(fe.qQ))}(d.KVO(d.zZn)),De},providedIn:"root"})}}return vt})()},9559:(en,at,W)=>{W.d(at,{nX:()=>es,wF:()=>xs,Ix:()=>Ks,Wk:()=>Ns,wQ:()=>Is,iI:()=>zo,n3:()=>_i});var d=W(7705),fe=W(1985),Te=W(8071),ke=W(8455),Pe=W(7673),_e=W(4412),Qe=W(4572),$e=W(9350),be=W(8793),Ce=W(8750);function Ve(v){return new fe.c(A=>{(0,Ce.Tg)(v()).subscribe(A)})}var mt=W(1203);function dt(v,A){const I=(0,Te.T)(v)?v:()=>v,M=V=>V.error(I());return new fe.c(A?V=>A.schedule(M,0,V):M)}var St=W(983),It=W(8359),Nt=W(9974),Mt=W(4360);function an(){return(0,Nt.N)((v,A)=>{let I=null;v._refCount++;const M=(0,Mt._)(A,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(I=null);const V=v._connection,ee=I;I=null,V&&(!ee||V===ee)&&V.unsubscribe(),A.unsubscribe()});v.subscribe(M),M.closed||(I=v.connect())})}class At extends fe.c{constructor(A,I){super(),this.source=A,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Nt.S)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new It.yU;const I=this.getSubject();A.add(this.source.subscribe((0,Mt._)(I,void 0,()=>{this._teardown(),I.complete()},M=>{this._teardown(),I.error(M)},()=>this._teardown()))),A.closed&&(this._connection=null,A=It.yU.EMPTY)}return A}refCount(){return an()(this)}}var me=W(1413),qe=W(177),Me=W(6354),gt=W(5558),_t=W(6697),Ht=W(9172),Jt=W(5964),ut=W(1397),Nn=W(1594),_r=W(274),er=W(8141);function ui(v){return(0,Nt.N)((A,I)=>{let ee,M=null,V=!1;M=A.subscribe((0,Mt._)(I,void 0,void 0,he=>{ee=(0,Ce.Tg)(v(he,ui(v)(A))),M?(M.unsubscribe(),M=null,ee.subscribe(I)):V=!0})),V&&(M.unsubscribe(),M=null,ee.subscribe(I))})}var Yr=W(2816),On=W(9901);function Ln(v){return v<=0?()=>St.w:(0,Nt.N)((A,I)=>{let M=[];A.subscribe((0,Mt._)(I,V=>{M.push(V),v<M.length&&M.shift()},()=>{for(const V of M)I.next(V);I.complete()},void 0,()=>{M=null}))})}var En=W(3774),ir=W(3669),ot=W(980),nt=W(6977),Ie=W(6365),Je=W(345);const Vt="primary",Rn=Symbol("RouteTitle");class dn{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const I=this.params[A];return Array.isArray(I)?I[0]:I}return null}getAll(A){if(this.has(A)){const I=this.params[A];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Yt(v){return new dn(v)}function mr(v,A,I){const M=I.path.split("/");if(M.length>v.length||"full"===I.pathMatch&&(A.hasChildren()||M.length<v.length))return null;const V={};for(let ee=0;ee<M.length;ee++){const he=M[ee],Ue=v[ee];if(he.startsWith(":"))V[he.substring(1)]=Ue;else if(he!==Ue.path)return null}return{consumed:v.slice(0,M.length),posParams:V}}function Ir(v,A){const I=v?Object.keys(v):void 0,M=A?Object.keys(A):void 0;if(!I||!M||I.length!=M.length)return!1;let V;for(let ee=0;ee<I.length;ee++)if(V=I[ee],!xn(v[V],A[V]))return!1;return!0}function xn(v,A){if(Array.isArray(v)&&Array.isArray(A)){if(v.length!==A.length)return!1;const I=[...v].sort(),M=[...A].sort();return I.every((V,ee)=>M[ee]===V)}return v===A}function dr(v){return v.length>0?v[v.length-1]:null}function Sr(v){return function pe(v){return!!v&&(v instanceof fe.c||(0,Te.T)(v.lift)&&(0,Te.T)(v.subscribe))}(v)?v:(0,d.jNT)(v)?(0,ke.H)(Promise.resolve(v)):(0,Pe.of)(v)}const Or={exact:function pi(v,A,I){if(!qs(v.segments,A.segments)||!Br(v.segments,A.segments,I)||v.numberOfChildren!==A.numberOfChildren)return!1;for(const M in A.children)if(!v.children[M]||!pi(v.children[M],A.children[M],I))return!1;return!0},subset:Zn},or={exact:function Si(v,A){return Ir(v,A)},subset:function Cn(v,A){return Object.keys(A).length<=Object.keys(v).length&&Object.keys(A).every(I=>xn(v[I],A[I]))},ignored:()=>!0};function ri(v,A,I){return Or[I.paths](v.root,A.root,I.matrixParams)&&or[I.queryParams](v.queryParams,A.queryParams)&&!("exact"===I.fragment&&v.fragment!==A.fragment)}function Zn(v,A,I){return Bn(v,A,A.segments,I)}function Bn(v,A,I,M){if(v.segments.length>I.length){const V=v.segments.slice(0,I.length);return!(!qs(V,I)||A.hasChildren()||!Br(V,I,M))}if(v.segments.length===I.length){if(!qs(v.segments,I)||!Br(v.segments,I,M))return!1;for(const V in A.children)if(!v.children[V]||!Zn(v.children[V],A.children[V],M))return!1;return!0}{const V=I.slice(0,v.segments.length),ee=I.slice(v.segments.length);return!!(qs(v.segments,V)&&Br(v.segments,V,M)&&v.children[Vt])&&Bn(v.children[Vt],A,ee,M)}}function Br(v,A,I){return A.every((M,V)=>or[I](v[V].parameters,M.parameters))}class rr{constructor(A=new Mn([],{}),I={},M=null){this.root=A,this.queryParams=I,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yt(this.queryParams)),this._queryParamMap}toString(){return Ds.serialize(this)}}class Mn{constructor(A,I){this.segments=A,this.children=I,this.parent=null,Object.values(I).forEach(M=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wt(this)}}class Un{constructor(A,I){this.path=A,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Yt(this.parameters)),this._parameterMap}toString(){return Fi(this)}}function qs(v,A){return v.length===A.length&&v.every((I,M)=>I.path===A[M].path)}let qn=(()=>{class v{static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:function(){return new Dn},providedIn:"root"})}}return v})();class Dn{parse(A){const I=new kt(A);return new rr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(A){const I=`/${Zt(A.root,!0)}`,M=function hs(v){const A=Object.keys(v).map(I=>{const M=v[I];return Array.isArray(M)?M.map(V=>`${Lt(I)}=${Lt(V)}`).join("&"):`${Lt(I)}=${Lt(M)}`}).filter(I=>!!I);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${I}${M}${"string"==typeof A.fragment?`#${function lt(v){return encodeURI(v)}(A.fragment)}`:""}`}}const Ds=new Dn;function Wt(v){return v.segments.map(A=>Fi(A)).join("/")}function Zt(v,A){if(!v.hasChildren())return Wt(v);if(A){const I=v.children[Vt]?Zt(v.children[Vt],!1):"",M=[];return Object.entries(v.children).forEach(([V,ee])=>{V!==Vt&&M.push(`${V}:${Zt(ee,!1)}`)}),M.length>0?`${I}(${M.join("//")})`:I}{const I=function rt(v,A){let I=[];return Object.entries(v.children).forEach(([M,V])=>{M===Vt&&(I=I.concat(A(V,M)))}),Object.entries(v.children).forEach(([M,V])=>{M!==Vt&&(I=I.concat(A(V,M)))}),I}(v,(M,V)=>V===Vt?[Zt(v.children[Vt],!1)]:[`${V}:${Zt(M,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Vt]?`${Wt(v)}/${I[0]}`:`${Wt(v)}/(${I.join("//")})`}}function ds(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lt(v){return ds(v).replace(/%3B/gi,";")}function Tt(v){return ds(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rr(v){return decodeURIComponent(v)}function mi(v){return Rr(v.replace(/\+/g,"%20"))}function Fi(v){return`${Tt(v.path)}${function ss(v){return Object.keys(v).map(A=>`;${Tt(A)}=${Tt(v[A])}`).join("")}(v.parameters)}`}const Us=/^[^\/()?;#]+/;function vt(v){const A=v.match(Us);return A?A[0]:""}const ie=/^[^\/()?;=#]+/,re=/^[^=?&#]+/,Re=/^[^&#]+/;class kt{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mn([],{}):new Mn([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(A.length>0||Object.keys(I).length>0)&&(M[Vt]=new Mn(A,I)),M}parseSegment(){const A=vt(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new d.wOt(4009,!1);return this.capture(A),new Un(Rr(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const I=function q(v){const A=v.match(ie);return A?A[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const V=vt(this.remaining);V&&(M=V,this.capture(M))}A[Rr(I)]=Rr(M)}parseQueryParam(A){const I=function De(v){const A=v.match(re);return A?A[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const he=function it(v){const A=v.match(Re);return A?A[0]:""}(this.remaining);he&&(M=he,this.capture(M))}const V=mi(I),ee=mi(M);if(A.hasOwnProperty(V)){let he=A[V];Array.isArray(he)||(he=[he],A[V]=he),he.push(ee)}else A[V]=ee}parseParens(A){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=vt(this.remaining),V=this.remaining[M.length];if("/"!==V&&")"!==V&&";"!==V)throw new d.wOt(4010,!1);let ee;M.indexOf(":")>-1?(ee=M.slice(0,M.indexOf(":")),this.capture(ee),this.capture(":")):A&&(ee=Vt);const he=this.parseChildren();I[ee]=1===Object.keys(he).length?he[Vt]:new Mn([],he),this.consumeOptional("//")}return I}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new d.wOt(4011,!1)}}function Pn(v){return v.segments.length>0?new Mn([],{[Vt]:v}):v}function Gt(v){const A={};for(const M of Object.keys(v.children)){const ee=Gt(v.children[M]);if(M===Vt&&0===ee.segments.length&&ee.hasChildren())for(const[he,Ue]of Object.entries(ee.children))A[he]=Ue;else(ee.segments.length>0||ee.hasChildren())&&(A[M]=ee)}return function $t(v){if(1===v.numberOfChildren&&v.children[Vt]){const A=v.children[Vt];return new Mn(v.segments.concat(A.segments),A.children)}return v}(new Mn(v.segments,A))}function cr(v){return v instanceof rr}function xi(v){let A;const V=Pn(function I(ee){const he={};for(const Ne of ee.children){const Pt=I(Ne);he[Ne.outlet]=Pt}const Ue=new Mn(ee.url,he);return ee===v&&(A=Ue),Ue}(v.root));return A??V}function Qn(v,A,I,M){let V=v;for(;V.parent;)V=V.parent;if(0===A.length)return Li(V,V,V,I,M);const ee=function Sn(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new wi(!0,0,v);let A=0,I=!1;const M=v.reduce((V,ee,he)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const Ue={};return Object.entries(ee.outlets).forEach(([Ne,Pt])=>{Ue[Ne]="string"==typeof Pt?Pt.split("/"):Pt}),[...V,{outlets:Ue}]}if(ee.segmentPath)return[...V,ee.segmentPath]}return"string"!=typeof ee?[...V,ee]:0===he?(ee.split("/").forEach((Ue,Ne)=>{0==Ne&&"."===Ue||(0==Ne&&""===Ue?I=!0:".."===Ue?A++:""!=Ue&&V.push(Ue))}),V):[...V,ee]},[]);return new wi(I,A,M)}(A);if(ee.toRoot())return Li(V,V,new Mn([],{}),I,M);const he=function Xe(v,A,I){if(v.isAbsolute)return new Ss(A,!0,0);if(!I)return new Ss(A,!1,NaN);if(null===I.parent)return new Ss(I,!0,0);const M=Ut(v.commands[0])?0:1;return function Ye(v,A,I){let M=v,V=A,ee=I;for(;ee>V;){if(ee-=V,M=M.parent,!M)throw new d.wOt(4005,!1);V=M.segments.length}return new Ss(M,!1,V-ee)}(I,I.segments.length-1+M,v.numberOfDoubleDots)}(ee,V,v),Ue=he.processChildren?_n(he.segmentGroup,he.index,ee.commands):jt(he.segmentGroup,he.index,ee.commands);return Li(V,he.segmentGroup,Ue,I,M)}function Ut(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function Nr(v){return"object"==typeof v&&null!=v&&v.outlets}function Li(v,A,I,M,V){let he,ee={};M&&Object.entries(M).forEach(([Ne,Pt])=>{ee[Ne]=Array.isArray(Pt)?Pt.map(ln=>`${ln}`):`${Pt}`}),he=v===A?I:Ui(v,A,I);const Ue=Pn(Gt(he));return new rr(Ue,ee,V)}function Ui(v,A,I){const M={};return Object.entries(v.children).forEach(([V,ee])=>{M[V]=ee===A?I:Ui(ee,A,I)}),new Mn(v.segments,M)}class wi{constructor(A,I,M){if(this.isAbsolute=A,this.numberOfDoubleDots=I,this.commands=M,A&&M.length>0&&Ut(M[0]))throw new d.wOt(4003,!1);const V=M.find(Nr);if(V&&V!==dr(M))throw new d.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ss{constructor(A,I,M){this.segmentGroup=A,this.processChildren=I,this.index=M}}function jt(v,A,I){if(v||(v=new Mn([],{})),0===v.segments.length&&v.hasChildren())return _n(v,A,I);const M=function Kn(v,A,I){let M=0,V=A;const ee={match:!1,pathIndex:0,commandIndex:0};for(;V<v.segments.length;){if(M>=I.length)return ee;const he=v.segments[V],Ue=I[M];if(Nr(Ue))break;const Ne=`${Ue}`,Pt=M<I.length-1?I[M+1]:null;if(V>0&&void 0===Ne)break;if(Ne&&Pt&&"object"==typeof Pt&&void 0===Pt.outlets){if(!ze(Ne,Pt,he))return ee;M+=2}else{if(!ze(Ne,{},he))return ee;M++}V++}return{match:!0,pathIndex:V,commandIndex:M}}(v,A,I),V=I.slice(M.commandIndex);if(M.match&&M.pathIndex<v.segments.length){const ee=new Mn(v.segments.slice(0,M.pathIndex),{});return ee.children[Vt]=new Mn(v.segments.slice(M.pathIndex),v.children),_n(ee,0,V)}return M.match&&0===V.length?new Mn(v.segments,{}):M.match&&!v.hasChildren()?$n(v,A,I):M.match?_n(v,0,V):$n(v,A,I)}function _n(v,A,I){if(0===I.length)return new Mn(v.segments,{});{const M=function wt(v){return Nr(v[0])?v[0].outlets:{[Vt]:v}}(I),V={};if(Object.keys(M).some(ee=>ee!==Vt)&&v.children[Vt]&&1===v.numberOfChildren&&0===v.children[Vt].segments.length){const ee=_n(v.children[Vt],A,I);return new Mn(v.segments,ee.children)}return Object.entries(M).forEach(([ee,he])=>{"string"==typeof he&&(he=[he]),null!==he&&(V[ee]=jt(v.children[ee],A,he))}),Object.entries(v.children).forEach(([ee,he])=>{void 0===M[ee]&&(V[ee]=he)}),new Mn(v.segments,V)}}function $n(v,A,I){const M=v.segments.slice(0,A);let V=0;for(;V<I.length;){const ee=I[V];if(Nr(ee)){const Ne=hr(ee.outlets);return new Mn(M,Ne)}if(0===V&&Ut(I[0])){M.push(new Un(v.segments[A].path,Ar(I[0]))),V++;continue}const he=Nr(ee)?ee.outlets[Vt]:`${ee}`,Ue=V<I.length-1?I[V+1]:null;he&&Ue&&Ut(Ue)?(M.push(new Un(he,Ar(Ue))),V+=2):(M.push(new Un(he,{})),V++)}return new Mn(M,{})}function hr(v){const A={};return Object.entries(v).forEach(([I,M])=>{"string"==typeof M&&(M=[M]),null!==M&&(A[I]=$n(new Mn([],{}),0,M))}),A}function Ar(v){const A={};return Object.entries(v).forEach(([I,M])=>A[I]=`${M}`),A}function ze(v,A,I){return v==I.path&&Ir(A,I.parameters)}const Xn="imperative";class di{constructor(A,I){this.id=A,this.url=I}}class Rs extends di{constructor(A,I,M="imperative",V=null){super(A,I),this.type=0,this.navigationTrigger=M,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xs extends di{constructor(A,I,M){super(A,I),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gs extends di{constructor(A,I,M,V){super(A,I),this.reason=M,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Kr extends di{constructor(A,I,M,V){super(A,I),this.reason=M,this.code=V,this.type=16}}class no extends di{constructor(A,I,M,V){super(A,I),this.error=M,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ii extends di{constructor(A,I,M,V){super(A,I),this.urlAfterRedirects=M,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ms extends di{constructor(A,I,M,V){super(A,I),this.urlAfterRedirects=M,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class To extends di{constructor(A,I,M,V,ee){super(A,I),this.urlAfterRedirects=M,this.state=V,this.shouldActivate=ee,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pa extends di{constructor(A,I,M,V){super(A,I),this.urlAfterRedirects=M,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fo extends di{constructor(A,I,M,V){super(A,I),this.urlAfterRedirects=M,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gi{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ro{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bs{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ta{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class si{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oa{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qs{constructor(A,I,M){this.routerEvent=A,this.position=I,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _s{}class Ao{constructor(A){this.url=A}}class Vo{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new io,this.attachRef=null}}let io=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(I,M){const V=this.getOrCreateContext(I);V.outlet=M,this.contexts.set(I,V)}onChildOutletDestroyed(I){const M=this.getContext(I);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let M=this.getContext(I);return M||(M=new Vo,this.contexts.set(I,M)),M}getContext(I){return this.contexts.get(I)||null}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})();class Xo{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const I=this.pathFromRoot(A);return I.length>1?I[I.length-2]:null}children(A){const I=js(A,this._root);return I?I.children.map(M=>M.value):[]}firstChild(A){const I=js(A,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(A){const I=po(A,this._root);return I.length<2?[]:I[I.length-2].children.map(V=>V.value).filter(V=>V!==A)}pathFromRoot(A){return po(A,this._root).map(I=>I.value)}}function js(v,A){if(v===A.value)return A;for(const I of A.children){const M=js(v,I);if(M)return M}return null}function po(v,A){if(v===A.value)return[A];for(const I of A.children){const M=po(v,I);if(M.length)return M.unshift(A),M}return[]}class Yn{constructor(A,I){this.value=A,this.children=I}toString(){return`TreeNode(${this.value})`}}function Ei(v){const A={};return v&&v.children.forEach(I=>A[I.value.outlet]=I),A}class Wr extends Xo{constructor(A,I){super(A),this.snapshot=I,vr(this,A)}toString(){return this.snapshot.toString()}}function Xs(v,A){const I=function Mi(v,A){const he=new Hs([],{},{},"",{},Vt,A,null,{});return new so("",new Yn(he,[]))}(0,A),M=new _e.t([new Un("",{})]),V=new _e.t({}),ee=new _e.t({}),he=new _e.t({}),Ue=new _e.t(""),Ne=new es(M,V,he,Ue,ee,Vt,A,I.root);return Ne.snapshot=I.root,new Wr(new Yn(Ne,[]),I)}class es{constructor(A,I,M,V,ee,he,Ue,Ne){this.urlSubject=A,this.paramsSubject=I,this.queryParamsSubject=M,this.fragmentSubject=V,this.dataSubject=ee,this.outlet=he,this.component=Ue,this._futureSnapshot=Ne,this.title=this.dataSubject?.pipe((0,Me.T)(Pt=>Pt[Rn]))??(0,Pe.of)(void 0),this.url=A,this.params=I,this.queryParams=M,this.fragment=V,this.data=ee}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Me.T)(A=>Yt(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Me.T)(A=>Yt(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ps(v,A="emptyOnly"){const I=v.pathFromRoot;let M=0;if("always"!==A)for(M=I.length-1;M>=1;){const V=I[M],ee=I[M-1];if(V.routeConfig&&""===V.routeConfig.path)M--;else{if(ee.component)break;M--}}return function Ii(v){return v.reduce((A,I)=>({params:{...A.params,...I.params},data:{...A.data,...I.data},resolve:{...I.data,...A.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(M))}class Hs{get title(){return this.data?.[Rn]}constructor(A,I,M,V,ee,he,Ue,Ne,Pt){this.url=A,this.params=I,this.queryParams=M,this.fragment=V,this.data=ee,this.outlet=he,this.component=Ue,this.routeConfig=Ne,this._resolve=Pt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class so extends Xo{constructor(A,I){super(I),this.url=A,vr(this,I)}toString(){return Qt(this._root)}}function vr(v,A){A.value._routerState=v,A.children.forEach(I=>vr(v,I))}function Qt(v){const A=v.children.length>0?` { ${v.children.map(Qt).join(", ")} } `:"";return`${v.value}${A}`}function In(v){if(v.snapshot){const A=v.snapshot,I=v._futureSnapshot;v.snapshot=I,Ir(A.queryParams,I.queryParams)||v.queryParamsSubject.next(I.queryParams),A.fragment!==I.fragment&&v.fragmentSubject.next(I.fragment),Ir(A.params,I.params)||v.paramsSubject.next(I.params),function yr(v,A){if(v.length!==A.length)return!1;for(let I=0;I<v.length;++I)if(!Ir(v[I],A[I]))return!1;return!0}(A.url,I.url)||v.urlSubject.next(I.url),Ir(A.data,I.data)||v.dataSubject.next(I.data)}else v.snapshot=v._futureSnapshot,v.dataSubject.next(v._futureSnapshot.data)}function gr(v,A){const I=Ir(v.params,A.params)&&function Ri(v,A){return qs(v,A)&&v.every((I,M)=>Ir(I.parameters,A[M].parameters))}(v.url,A.url);return I&&!(!v.parent!=!A.parent)&&(!v.parent||gr(v.parent,A.parent))}let _i=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=Vt,this.activateEvents=new d.bkB,this.deactivateEvents=new d.bkB,this.attachEvents=new d.bkB,this.detachEvents=new d.bkB,this.parentContexts=(0,d.WQX)(io),this.location=(0,d.WQX)(d.c1b),this.changeDetector=(0,d.WQX)(d.gRc),this.environmentInjector=(0,d.WQX)(d.uvJ),this.inputBinder=(0,d.WQX)(Zr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:M,previousValue:V}=I.name;if(M)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.wOt(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,M){this.activated=I,this._activatedRoute=M,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,M){if(this.isActivated)throw new d.wOt(4013,!1);this._activatedRoute=I;const V=this.location,he=I.snapshot.component,Ue=this.parentContexts.getOrCreateContext(this.name).children,Ne=new jr(I,Ue,V.injector);this.activated=V.createComponent(he,{index:V.length,injector:Ne,environmentInjector:M??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275dir=d.FsC({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.OA$]})}}return v})();class jr{constructor(A,I,M){this.route=A,this.childContexts=I,this.parent=M}get(A,I){return A===es?this.route:A===io?this.childContexts:this.parent.get(A,I)}}const Zr=new d.nKC("");let mo=(()=>{class v{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:M}=I,V=(0,Qe.z)([M.queryParams,M.params,M.data]).pipe((0,gt.n)(([ee,he,Ue],Ne)=>(Ue={...ee,...he,...Ue},0===Ne?(0,Pe.of)(Ue):Promise.resolve(Ue)))).subscribe(ee=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==M||null===M.component)return void this.unsubscribeFromRouteData(I);const he=(0,d.HJs)(M.component);if(he)for(const{templateName:Ue}of he.inputs)I.activatedComponentRef.setInput(Ue,ee[Ue]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,V)}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac})}}return v})();function xr(v,A,I){if(I&&v.shouldReuseRoute(A.value,I.value.snapshot)){const M=I.value;M._futureSnapshot=A.value;const V=function os(v,A,I){return A.children.map(M=>{for(const V of I.children)if(v.shouldReuseRoute(M.value,V.value.snapshot))return xr(v,M,V);return xr(v,M)})}(v,A,I);return new Yn(M,V)}{if(v.shouldAttach(A.value)){const ee=v.retrieve(A.value);if(null!==ee){const he=ee.route;return he.value._futureSnapshot=A.value,he.children=A.children.map(Ue=>xr(v,Ue)),he}}const M=function wn(v){return new es(new _e.t(v.url),new _e.t(v.params),new _e.t(v.queryParams),new _e.t(v.fragment),new _e.t(v.data),v.outlet,v.component,v)}(A.value),V=A.children.map(ee=>xr(v,ee));return new Yn(M,V)}}const fs="ngNavigationCancelingError";function ys(v,A){const{redirectTo:I,navigationBehaviorOptions:M}=cr(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,V=Wn(!1,0,A);return V.url=I,V.navigationBehaviorOptions=M,V}function Wn(v,A,I){const M=new Error("NavigationCancelingError: "+(v||""));return M[fs]=!0,M.cancellationCode=A,I&&(M.url=I),M}function Jr(v){return v&&v[fs]}let Gn=(()=>{class v{static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275cmp=d.VBU({type:v,selectors:[["ng-component"]],standalone:!0,features:[d.aNF],decls:1,vars:0,template:function(M,V){1&M&&d.nrm(0,"router-outlet")},dependencies:[_i],encapsulation:2})}}return v})();function Gr(v){const A=v.children&&v.children.map(Gr),I=A?{...v,children:A}:{...v};return!I.component&&!I.loadComponent&&(A||I.loadChildren)&&I.outlet&&I.outlet!==Vt&&(I.component=Gn),I}function Ti(v){return v.outlet||Vt}function oi(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let A=v.parent;A;A=A.parent){const I=A.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class Cr{constructor(A,I,M,V,ee){this.routeReuseStrategy=A,this.futureState=I,this.currState=M,this.forwardEvent=V,this.inputBindingEnabled=ee}activate(A){const I=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,M,A),In(this.futureState.root),this.activateChildRoutes(I,M,A)}deactivateChildRoutes(A,I,M){const V=Ei(I);A.children.forEach(ee=>{const he=ee.value.outlet;this.deactivateRoutes(ee,V[he],M),delete V[he]}),Object.values(V).forEach(ee=>{this.deactivateRouteAndItsChildren(ee,M)})}deactivateRoutes(A,I,M){const V=A.value,ee=I?I.value:null;if(V===ee)if(V.component){const he=M.getContext(V.outlet);he&&this.deactivateChildRoutes(A,I,he.children)}else this.deactivateChildRoutes(A,I,M);else ee&&this.deactivateRouteAndItsChildren(I,M)}deactivateRouteAndItsChildren(A,I){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,I):this.deactivateRouteAndOutlet(A,I)}detachAndStoreRouteSubtree(A,I){const M=I.getContext(A.value.outlet),V=M&&A.value.component?M.children:I,ee=Ei(A);for(const he of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[he],V);if(M&&M.outlet){const he=M.outlet.detach(),Ue=M.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:he,route:A,contexts:Ue})}}deactivateRouteAndOutlet(A,I){const M=I.getContext(A.value.outlet),V=M&&A.value.component?M.children:I,ee=Ei(A);for(const he of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[he],V);M&&(M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated()),M.attachRef=null,M.route=null)}activateChildRoutes(A,I,M){const V=Ei(I);A.children.forEach(ee=>{this.activateRoutes(ee,V[ee.value.outlet],M),this.forwardEvent(new oa(ee.value.snapshot))}),A.children.length&&this.forwardEvent(new Ta(A.value.snapshot))}activateRoutes(A,I,M){const V=A.value,ee=I?I.value:null;if(In(V),V===ee)if(V.component){const he=M.getOrCreateContext(V.outlet);this.activateChildRoutes(A,I,he.children)}else this.activateChildRoutes(A,I,M);else if(V.component){const he=M.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Ue=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),he.children.onOutletReAttached(Ue.contexts),he.attachRef=Ue.componentRef,he.route=Ue.route.value,he.outlet&&he.outlet.attach(Ue.componentRef,Ue.route.value),In(Ue.route.value),this.activateChildRoutes(A,null,he.children)}else{const Ue=oi(V.snapshot);he.attachRef=null,he.route=V,he.injector=Ue,he.outlet&&he.outlet.activateWith(V,he.injector),this.activateChildRoutes(A,null,he.children)}}else this.activateChildRoutes(A,null,M)}}class Os{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class Mr{constructor(A,I){this.component=A,this.route=I}}function Pr(v,A,I){const M=v._root;return zs(M,A?A._root:null,I,[M.value])}function vi(v,A){const I=Symbol(),M=A.get(v,I);return M===I?"function"!=typeof v||(0,d.LfX)(v)?A.get(v):v:M}function zs(v,A,I,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const ee=Ei(A);return v.children.forEach(he=>{(function qi(v,A,I,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const ee=v.value,he=A?A.value:null,Ue=I?I.getContext(v.value.outlet):null;if(he&&ee.routeConfig===he.routeConfig){const Ne=function oo(v,A,I){if("function"==typeof I)return I(v,A);switch(I){case"pathParamsChange":return!qs(v.url,A.url);case"pathParamsOrQueryParamsChange":return!qs(v.url,A.url)||!Ir(v.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gr(v,A)||!Ir(v.queryParams,A.queryParams);default:return!gr(v,A)}}(he,ee,ee.routeConfig.runGuardsAndResolvers);Ne?V.canActivateChecks.push(new Os(M)):(ee.data=he.data,ee._resolvedData=he._resolvedData),zs(v,A,ee.component?Ue?Ue.children:null:I,M,V),Ne&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&V.canDeactivateChecks.push(new Mr(Ue.outlet.component,he))}else he&&bs(A,Ue,V),V.canActivateChecks.push(new Os(M)),zs(v,null,ee.component?Ue?Ue.children:null:I,M,V)})(he,ee[he.value.outlet],I,M.concat([he.value]),V),delete ee[he.value.outlet]}),Object.entries(ee).forEach(([he,Ue])=>bs(Ue,I.getContext(he),V)),V}function bs(v,A,I){const M=Ei(v),V=v.value;Object.entries(M).forEach(([ee,he])=>{bs(he,V.component?A?A.children.getContext(ee):null:A,I)}),I.canDeactivateChecks.push(new Mr(V.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,V))}function bi(v){return"function"==typeof v}function yt(v){return v instanceof $e.G||"EmptyError"===v?.name}const L=Symbol("INITIAL_VALUE");function z(){return(0,gt.n)(v=>(0,Qe.z)(v.map(A=>A.pipe((0,_t.s)(1),(0,Ht.Z)(L)))).pipe((0,Me.T)(A=>{for(const I of A)if(!0!==I){if(I===L)return L;if(!1===I||I instanceof rr)return I}return!0}),(0,Jt.p)(A=>A!==L),(0,_t.s)(1)))}function ai(v){return(0,mt.F)((0,er.M)(A=>{if(cr(A))throw ys(0,A)}),(0,Me.T)(A=>!0===A))}class hi{constructor(A){this.segmentGroup=A||null}}class kn{constructor(A){this.urlTree=A}}function fn(v){return dt(new hi(v))}function Xi(v){return dt(new kn(v))}class Lo{constructor(A,I){this.urlSerializer=A,this.urlTree=I}noMatchError(A){return new d.wOt(4002,!1)}lineralizeSegments(A,I){let M=[],V=I.root;for(;;){if(M=M.concat(V.segments),0===V.numberOfChildren)return(0,Pe.of)(M);if(V.numberOfChildren>1||!V.children[Vt])return dt(new d.wOt(4e3,!1));V=V.children[Vt]}}applyRedirectCommands(A,I,M){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),A,M)}applyRedirectCreateUrlTree(A,I,M,V){const ee=this.createSegmentGroup(A,I.root,M,V);return new rr(ee,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(A,I){const M={};return Object.entries(A).forEach(([V,ee])=>{if("string"==typeof ee&&ee.startsWith(":")){const Ue=ee.substring(1);M[V]=I[Ue]}else M[V]=ee}),M}createSegmentGroup(A,I,M,V){const ee=this.createSegments(A,I.segments,M,V);let he={};return Object.entries(I.children).forEach(([Ue,Ne])=>{he[Ue]=this.createSegmentGroup(A,Ne,M,V)}),new Mn(ee,he)}createSegments(A,I,M,V){return I.map(ee=>ee.path.startsWith(":")?this.findPosParam(A,ee,V):this.findOrReturn(ee,M))}findPosParam(A,I,M){const V=M[I.path.substring(1)];if(!V)throw new d.wOt(4001,!1);return V}findOrReturn(A,I){let M=0;for(const V of I){if(V.path===A.path)return I.splice(M),V;M++}return A}}const Co={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yo(v,A,I,M,V){const ee=Uo(v,A,I);return ee.matched?(M=function Bi(v,A){return v.providers&&!v._injector&&(v._injector=(0,d.Ol2)(v.providers,A,`Route: ${v.path}`)),v._injector??A}(A,M),function Ni(v,A,I,M){const V=A.canMatch;if(!V||0===V.length)return(0,Pe.of)(!0);const ee=V.map(he=>{const Ue=vi(he,v);return Sr(function ue(v){return v&&bi(v.canMatch)}(Ue)?Ue.canMatch(A,I):v.runInContext(()=>Ue(A,I)))});return(0,Pe.of)(ee).pipe(z(),ai())}(M,A,I).pipe((0,Me.T)(he=>!0===he?ee:{...Co}))):(0,Pe.of)(ee)}function Uo(v,A,I){if(""===A.path)return"full"===A.pathMatch&&(v.hasChildren()||I.length>0)?{...Co}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const V=(A.matcher||mr)(I,v,A);if(!V)return{...Co};const ee={};Object.entries(V.posParams??{}).forEach(([Ue,Ne])=>{ee[Ue]=Ne.path});const he=V.consumed.length>0?{...ee,...V.consumed[V.consumed.length-1].parameters}:ee;return{matched:!0,consumedSegments:V.consumed,remainingSegments:I.slice(V.consumed.length),parameters:he,positionalParamSegments:V.posParams??{}}}function Bo(v,A,I,M){return I.length>0&&function Oa(v,A,I){return I.some(M=>Zo(v,A,M)&&Ti(M)!==Vt)}(v,I,M)?{segmentGroup:new Mn(A,Xa(M,new Mn(I,v.children))),slicedSegments:[]}:0===I.length&&function la(v,A,I){return I.some(M=>Zo(v,A,M))}(v,I,M)?{segmentGroup:new Mn(v.segments,ca(v,0,I,M,v.children)),slicedSegments:I}:{segmentGroup:new Mn(v.segments,v.children),slicedSegments:I}}function ca(v,A,I,M,V){const ee={};for(const he of M)if(Zo(v,I,he)&&!V[Ti(he)]){const Ue=new Mn([],{});ee[Ti(he)]=Ue}return{...V,...ee}}function Xa(v,A){const I={};I[Vt]=A;for(const M of v)if(""===M.path&&Ti(M)!==Vt){const V=new Mn([],{});I[Ti(M)]=V}return I}function Zo(v,A,I){return(!(v.hasChildren()||A.length>0)||"full"!==I.pathMatch)&&""===I.path}class fa{constructor(A,I,M,V,ee,he,Ue){this.injector=A,this.configLoader=I,this.rootComponentType=M,this.config=V,this.urlTree=ee,this.paramsInheritanceStrategy=he,this.urlSerializer=Ue,this.allowRedirects=!0,this.applyRedirects=new Lo(this.urlSerializer,this.urlTree)}noMatchError(A){return new d.wOt(4002,!1)}recognize(){const A=Bo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,Vt).pipe(ui(I=>{if(I instanceof kn)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof hi?this.noMatchError(I):I}),(0,Me.T)(I=>{const M=new Hs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,{}),V=new Yn(M,I),ee=new so("",V),he=function Xt(v,A,I=null,M=null){return Qn(xi(v),A,I,M)}(M,[],this.urlTree.queryParams,this.urlTree.fragment);return he.queryParams=this.urlTree.queryParams,ee.url=this.urlSerializer.serialize(he),this.inheritParamsAndData(ee._root),{state:ee,tree:he}}))}match(A){return this.processSegmentGroup(this.injector,this.config,A.root,Vt).pipe(ui(M=>{throw M instanceof hi?this.noMatchError(M):M}))}inheritParamsAndData(A){const I=A.value,M=Ps(I,this.paramsInheritanceStrategy);I.params=Object.freeze(M.params),I.data=Object.freeze(M.data),A.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(A,I,M,V){return 0===M.segments.length&&M.hasChildren()?this.processChildren(A,I,M):this.processSegment(A,I,M,M.segments,V,!0)}processChildren(A,I,M){const V=[];for(const ee of Object.keys(M.children))"primary"===ee?V.unshift(ee):V.push(ee);return(0,ke.H)(V).pipe((0,_r.H)(ee=>{const he=M.children[ee],Ue=function yi(v,A){const I=v.filter(M=>Ti(M)===A);return I.push(...v.filter(M=>Ti(M)!==A)),I}(I,ee);return this.processSegmentGroup(A,Ue,he,ee)}),(0,Yr.S)((ee,he)=>(ee.push(...he),ee)),(0,On.U)(null),function Ke(v,A){const I=arguments.length>=2;return M=>M.pipe(v?(0,Jt.p)((V,ee)=>v(V,ee,M)):ir.D,Ln(1),I?(0,On.U)(A):(0,En.v)(()=>new $e.G))}(),(0,ut.Z)(ee=>{if(null===ee)return fn(M);const he=Aa(ee);return function Jo(v){v.sort((A,I)=>A.value.outlet===Vt?-1:I.value.outlet===Vt?1:A.value.outlet.localeCompare(I.value.outlet))}(he),(0,Pe.of)(he)}))}processSegment(A,I,M,V,ee,he){return(0,ke.H)(I).pipe((0,_r.H)(Ue=>this.processSegmentAgainstRoute(Ue._injector??A,I,Ue,M,V,ee,he).pipe(ui(Ne=>{if(Ne instanceof hi)return(0,Pe.of)(null);throw Ne}))),(0,Nn.$)(Ue=>!!Ue),ui(Ue=>{if(yt(Ue))return function da(v,A,I){return 0===A.length&&!v.children[I]}(M,V,ee)?(0,Pe.of)([]):fn(M);throw Ue}))}processSegmentAgainstRoute(A,I,M,V,ee,he,Ue){return function ua(v,A,I,M){return!!(Ti(v)===M||M!==Vt&&Zo(A,I,v))&&("**"===v.path||Uo(A,v,I).matched)}(M,V,ee,he)?void 0===M.redirectTo?this.matchSegmentAgainstRoute(A,V,M,ee,he,Ue):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,V,I,M,ee,he):fn(V):fn(V)}expandSegmentAgainstRouteUsingRedirect(A,I,M,V,ee,he){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,M,V,he):this.expandRegularSegmentAgainstRouteUsingRedirect(A,I,M,V,ee,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,I,M,V){const ee=this.applyRedirects.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Xi(ee):this.applyRedirects.lineralizeSegments(M,ee).pipe((0,ut.Z)(he=>{const Ue=new Mn(he,{});return this.processSegment(A,I,Ue,he,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,I,M,V,ee,he){const{matched:Ue,consumedSegments:Ne,remainingSegments:Pt,positionalParamSegments:ln}=Uo(I,V,ee);if(!Ue)return fn(I);const nr=this.applyRedirects.applyRedirectCommands(Ne,V.redirectTo,ln);return V.redirectTo.startsWith("/")?Xi(nr):this.applyRedirects.lineralizeSegments(V,nr).pipe((0,ut.Z)(yn=>this.processSegment(A,M,I,yn.concat(Pt),he,!1)))}matchSegmentAgainstRoute(A,I,M,V,ee,he){let Ue;if("**"===M.path){const Ne=V.length>0?dr(V).parameters:{},Pt=new Hs(V,Ne,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pa(M),Ti(M),M.component??M._loadedComponent??null,M,ic(M));Ue=(0,Pe.of)({snapshot:Pt,consumedSegments:[],remainingSegments:[]}),I.children={}}else Ue=Yo(I,M,V,A).pipe((0,Me.T)(({matched:Ne,consumedSegments:Pt,remainingSegments:ln,parameters:nr})=>Ne?{snapshot:new Hs(Pt,nr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pa(M),Ti(M),M.component??M._loadedComponent??null,M,ic(M)),consumedSegments:Pt,remainingSegments:ln}:null));return Ue.pipe((0,gt.n)(Ne=>null===Ne?fn(I):this.getChildConfig(A=M._injector??A,M,V).pipe((0,gt.n)(({routes:Pt})=>{const ln=M._loadedInjector??A,{snapshot:nr,consumedSegments:yn,remainingSegments:ti}=Ne,{segmentGroup:lo,slicedSegments:ps}=Bo(I,yn,ti,Pt);if(0===ps.length&&lo.hasChildren())return this.processChildren(ln,Pt,lo).pipe((0,Me.T)(ks=>null===ks?null:[new Yn(nr,ks)]));if(0===Pt.length&&0===ps.length)return(0,Pe.of)([new Yn(nr,[])]);const zi=Ti(M)===ee;return this.processSegment(ln,Pt,lo,ps,zi?Vt:ee,!0).pipe((0,Me.T)(ks=>[new Yn(nr,ks)]))}))))}getChildConfig(A,I,M){return I.children?(0,Pe.of)({routes:I.children,injector:A}):I.loadChildren?void 0!==I._loadedRoutes?(0,Pe.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function qr(v,A,I,M){const V=A.canLoad;if(void 0===V||0===V.length)return(0,Pe.of)(!0);const ee=V.map(he=>{const Ue=vi(he,v);return Sr(function aa(v){return v&&bi(v.canLoad)}(Ue)?Ue.canLoad(A,I):v.runInContext(()=>Ue(A,I)))});return(0,Pe.of)(ee).pipe(z(),ai())}(A,I,M).pipe((0,ut.Z)(V=>V?this.configLoader.loadChildren(A,I).pipe((0,er.M)(ee=>{I._loadedRoutes=ee.routes,I._loadedInjector=ee.injector})):function Es(v){return dt(Wn(!1,3))}())):(0,Pe.of)({routes:[],injector:A})}}function Ya(v){const A=v.value.routeConfig;return A&&""===A.path}function Aa(v){const A=[],I=new Set;for(const M of v){if(!Ya(M)){A.push(M);continue}const V=A.find(ee=>M.value.routeConfig===ee.value.routeConfig);void 0!==V?(V.children.push(...M.children),I.add(V)):A.push(M)}for(const M of I){const V=Aa(M.children);A.push(new Yn(M.value,V))}return A.filter(M=>!I.has(M))}function pa(v){return v.data||{}}function ic(v){return v.resolve||{}}function Ho(v){return"string"==typeof v.title||null===v.title}function x(v){return(0,gt.n)(A=>{const I=v(A);return I?(0,ke.H)(I).pipe((0,Me.T)(()=>A)):(0,Pe.of)(A)})}const te=new d.nKC("ROUTES");let B=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.WQX)(d.Ql9)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,Pe.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const M=Sr(I.loadComponent()).pipe((0,Me.T)(ft),(0,er.M)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=ee}),(0,ot.j)(()=>{this.componentLoaders.delete(I)})),V=new At(M,()=>new me.B).pipe(an());return this.componentLoaders.set(I,V),V}loadChildren(I,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,Pe.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const ee=function J(v,A,I,M){return Sr(v.loadChildren()).pipe((0,Me.T)(ft),(0,ut.Z)(V=>V instanceof d.Co$||Array.isArray(V)?(0,Pe.of)(V):(0,ke.H)(A.compileModuleAsync(V))),(0,Me.T)(V=>{M&&M(v);let ee,he,Ue=!1;return Array.isArray(V)?(he=V,!0):(ee=V.create(I).injector,he=ee.get(te,[],{optional:!0,self:!0}).flat()),{routes:he.map(Gr),injector:ee}}))}(M,this.compiler,I,this.onLoadEndListener).pipe((0,ot.j)(()=>{this.childrenLoaders.delete(M)})),he=new At(ee,()=>new me.B).pipe(an());return this.childrenLoaders.set(M,he),he}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})();function ft(v){return function Ae(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let Ct=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new me.B,this.transitionAbortSubject=new me.B,this.configLoader=(0,d.WQX)(B),this.environmentInjector=(0,d.WQX)(d.uvJ),this.urlSerializer=(0,d.WQX)(qn),this.rootContexts=(0,d.WQX)(io),this.inputBindingEnabled=null!==(0,d.WQX)(Zr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Pe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new ro(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new gi(V))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const M=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:M})}setupNavigations(I,M,V){return this.transitions=new _e.t({id:0,currentUrlTree:M,currentRawUrl:M,currentBrowserUrl:M,extractedUrl:I.urlHandlingStrategy.extract(M),urlAfterRedirects:I.urlHandlingStrategy.extract(M),rawUrl:M,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xn,restoredState:null,currentSnapshot:V.snapshot,targetSnapshot:null,currentRouterState:V,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Jt.p)(ee=>0!==ee.id),(0,Me.T)(ee=>({...ee,extractedUrl:I.urlHandlingStrategy.extract(ee.rawUrl)})),(0,gt.n)(ee=>{this.currentTransition=ee;let he=!1,Ue=!1;return(0,Pe.of)(ee).pipe((0,er.M)(Ne=>{this.currentNavigation={id:Ne.id,initialUrl:Ne.rawUrl,extractedUrl:Ne.extractedUrl,trigger:Ne.source,extras:Ne.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,gt.n)(Ne=>{const Pt=Ne.currentBrowserUrl.toString(),ln=!I.navigated||Ne.extractedUrl.toString()!==Pt||Pt!==Ne.currentUrlTree.toString();if(!ln&&"reload"!==(Ne.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const yn="";return this.events.next(new Kr(Ne.id,this.urlSerializer.serialize(Ne.rawUrl),yn,0)),Ne.resolve(null),St.w}if(I.urlHandlingStrategy.shouldProcessUrl(Ne.rawUrl))return(0,Pe.of)(Ne).pipe((0,gt.n)(yn=>{const ti=this.transitions?.getValue();return this.events.next(new Rs(yn.id,this.urlSerializer.serialize(yn.extractedUrl),yn.source,yn.restoredState)),ti!==this.transitions?.getValue()?St.w:Promise.resolve(yn)}),function sc(v,A,I,M,V,ee){return(0,ut.Z)(he=>function ha(v,A,I,M,V,ee,he="emptyOnly"){return new fa(v,A,I,M,V,he,ee).recognize()}(v,A,I,M,he.extractedUrl,V,ee).pipe((0,Me.T)(({state:Ue,tree:Ne})=>({...he,targetSnapshot:Ue,urlAfterRedirects:Ne}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,er.M)(yn=>{ee.targetSnapshot=yn.targetSnapshot,ee.urlAfterRedirects=yn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:yn.urlAfterRedirects};const ti=new ii(yn.id,this.urlSerializer.serialize(yn.extractedUrl),this.urlSerializer.serialize(yn.urlAfterRedirects),yn.targetSnapshot);this.events.next(ti)}));if(ln&&I.urlHandlingStrategy.shouldProcessUrl(Ne.currentRawUrl)){const{id:yn,extractedUrl:ti,source:lo,restoredState:ps,extras:zi}=Ne,ks=new Rs(yn,this.urlSerializer.serialize(ti),lo,ps);this.events.next(ks);const uo=Xs(0,this.rootComponentType).snapshot;return this.currentTransition=ee={...Ne,targetSnapshot:uo,urlAfterRedirects:ti,extras:{...zi,skipLocationChange:!1,replaceUrl:!1}},(0,Pe.of)(ee)}{const yn="";return this.events.next(new Kr(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),yn,1)),Ne.resolve(null),St.w}}),(0,er.M)(Ne=>{const Pt=new Ms(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),this.urlSerializer.serialize(Ne.urlAfterRedirects),Ne.targetSnapshot);this.events.next(Pt)}),(0,Me.T)(Ne=>(this.currentTransition=ee={...Ne,guards:Pr(Ne.targetSnapshot,Ne.currentSnapshot,this.rootContexts)},ee)),function N(v,A){return(0,ut.Z)(I=>{const{targetSnapshot:M,currentSnapshot:V,guards:{canActivateChecks:ee,canDeactivateChecks:he}}=I;return 0===he.length&&0===ee.length?(0,Pe.of)({...I,guardsResult:!0}):function ne(v,A,I,M){return(0,ke.H)(v).pipe((0,ut.Z)(V=>function ei(v,A,I,M,V){const ee=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,Pe.of)(!0);const he=ee.map(Ue=>{const Ne=oi(A)??V,Pt=vi(Ue,Ne);return Sr(function G(v){return v&&bi(v.canDeactivate)}(Pt)?Pt.canDeactivate(v,A,I,M):Ne.runInContext(()=>Pt(v,A,I,M))).pipe((0,Nn.$)())});return(0,Pe.of)(he).pipe(z())}(V.component,V.route,I,A,M)),(0,Nn.$)(V=>!0!==V,!0))}(he,M,V,v).pipe((0,ut.Z)(Ue=>Ue&&function go(v){return"boolean"==typeof v}(Ue)?function we(v,A,I,M){return(0,ke.H)(A).pipe((0,_r.H)(V=>(0,be.x)(function sn(v,A){return null!==v&&A&&A(new Bs(v)),(0,Pe.of)(!0)}(V.route.parent,M),function Ot(v,A){return null!==v&&A&&A(new si(v)),(0,Pe.of)(!0)}(V.route,M),function fr(v,A,I){const M=A[A.length-1],ee=A.slice(0,A.length-1).reverse().map(he=>function vs(v){const A=v.routeConfig?v.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:v,guards:A}:null}(he)).filter(he=>null!==he).map(he=>Ve(()=>{const Ue=he.guards.map(Ne=>{const Pt=oi(he.node)??I,ln=vi(Ne,Pt);return Sr(function Y(v){return v&&bi(v.canActivateChild)}(ln)?ln.canActivateChild(M,v):Pt.runInContext(()=>ln(M,v))).pipe((0,Nn.$)())});return(0,Pe.of)(Ue).pipe(z())}));return(0,Pe.of)(ee).pipe(z())}(v,V.path,I),function hn(v,A,I){const M=A.routeConfig?A.routeConfig.canActivate:null;if(!M||0===M.length)return(0,Pe.of)(!0);const V=M.map(ee=>Ve(()=>{const he=oi(A)??I,Ue=vi(ee,he);return Sr(function Qi(v){return v&&bi(v.canActivate)}(Ue)?Ue.canActivate(A,v):he.runInContext(()=>Ue(A,v))).pipe((0,Nn.$)())}));return(0,Pe.of)(V).pipe(z())}(v,V.route,I))),(0,Nn.$)(V=>!0!==V,!0))}(M,ee,v,A):(0,Pe.of)(Ue)),(0,Me.T)(Ue=>({...I,guardsResult:Ue})))})}(this.environmentInjector,Ne=>this.events.next(Ne)),(0,er.M)(Ne=>{if(ee.guardsResult=Ne.guardsResult,cr(Ne.guardsResult))throw ys(0,Ne.guardsResult);const Pt=new To(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),this.urlSerializer.serialize(Ne.urlAfterRedirects),Ne.targetSnapshot,!!Ne.guardsResult);this.events.next(Pt)}),(0,Jt.p)(Ne=>!!Ne.guardsResult||(this.cancelNavigationTransition(Ne,"",3),!1)),x(Ne=>{if(Ne.guards.canActivateChecks.length)return(0,Pe.of)(Ne).pipe((0,er.M)(Pt=>{const ln=new Pa(Pt.id,this.urlSerializer.serialize(Pt.extractedUrl),this.urlSerializer.serialize(Pt.urlAfterRedirects),Pt.targetSnapshot);this.events.next(ln)}),(0,gt.n)(Pt=>{let ln=!1;return(0,Pe.of)(Pt).pipe(function _o(v,A){return(0,ut.Z)(I=>{const{targetSnapshot:M,guards:{canActivateChecks:V}}=I;if(!V.length)return(0,Pe.of)(I);let ee=0;return(0,ke.H)(V).pipe((0,_r.H)(he=>function el(v,A,I,M){const V=v.routeConfig,ee=v._resolve;return void 0!==V?.title&&!Ho(V)&&(ee[Rn]=V.title),function jo(v,A,I,M){const V=function Cc(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===V.length)return(0,Pe.of)({});const ee={};return(0,ke.H)(V).pipe((0,ut.Z)(he=>function Na(v,A,I,M){const V=oi(A)??M,ee=vi(v,V);return Sr(ee.resolve?ee.resolve(A,I):V.runInContext(()=>ee(A,I)))}(v[he],A,I,M).pipe((0,Nn.$)(),(0,er.M)(Ue=>{ee[he]=Ue}))),Ln(1),function tt(v){return(0,Me.T)(()=>v)}(ee),ui(he=>yt(he)?St.w:dt(he)))}(ee,v,A,M).pipe((0,Me.T)(he=>(v._resolvedData=he,v.data=Ps(v,I).resolve,V&&Ho(V)&&(v.data[Rn]=V.title),null)))}(he.route,M,v,A)),(0,er.M)(()=>ee++),Ln(1),(0,ut.Z)(he=>ee===V.length?(0,Pe.of)(I):St.w))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,er.M)({next:()=>ln=!0,complete:()=>{ln||this.cancelNavigationTransition(Pt,"",2)}}))}),(0,er.M)(Pt=>{const ln=new fo(Pt.id,this.urlSerializer.serialize(Pt.extractedUrl),this.urlSerializer.serialize(Pt.urlAfterRedirects),Pt.targetSnapshot);this.events.next(ln)}))}),x(Ne=>{const Pt=ln=>{const nr=[];ln.routeConfig?.loadComponent&&!ln.routeConfig._loadedComponent&&nr.push(this.configLoader.loadComponent(ln.routeConfig).pipe((0,er.M)(yn=>{ln.component=yn}),(0,Me.T)(()=>{})));for(const yn of ln.children)nr.push(...Pt(yn));return nr};return(0,Qe.z)(Pt(Ne.targetSnapshot.root)).pipe((0,On.U)(),(0,_t.s)(1))}),x(()=>this.afterPreactivation()),(0,Me.T)(Ne=>{const Pt=function kr(v,A,I){const M=xr(v,A._root,I?I._root:void 0);return new Wr(M,A)}(I.routeReuseStrategy,Ne.targetSnapshot,Ne.currentRouterState);return this.currentTransition=ee={...Ne,targetRouterState:Pt},ee}),(0,er.M)(()=>{this.events.next(new _s)}),((v,A,I,M)=>(0,Me.T)(V=>(new Cr(A,V.targetRouterState,V.currentRouterState,I,M).activate(v),V)))(this.rootContexts,I.routeReuseStrategy,Ne=>this.events.next(Ne),this.inputBindingEnabled),(0,_t.s)(1),(0,er.M)({next:Ne=>{he=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xs(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),this.urlSerializer.serialize(Ne.urlAfterRedirects))),I.titleStrategy?.updateTitle(Ne.targetRouterState.snapshot),Ne.resolve(!0)},complete:()=>{he=!0}}),(0,nt.Q)(this.transitionAbortSubject.pipe((0,er.M)(Ne=>{throw Ne}))),(0,ot.j)(()=>{he||Ue||this.cancelNavigationTransition(ee,"",1),this.currentNavigation?.id===ee.id&&(this.currentNavigation=null)}),ui(Ne=>{if(Ue=!0,Jr(Ne))this.events.next(new gs(ee.id,this.urlSerializer.serialize(ee.extractedUrl),Ne.message,Ne.cancellationCode)),function Fr(v){return Jr(v)&&cr(v.url)}(Ne)?this.events.next(new Ao(Ne.url)):ee.resolve(!1);else{this.events.next(new no(ee.id,this.urlSerializer.serialize(ee.extractedUrl),Ne,ee.targetSnapshot??void 0));try{ee.resolve(I.errorHandler(Ne))}catch(Pt){ee.reject(Pt)}}return St.w}))}))}cancelNavigationTransition(I,M,V){const ee=new gs(I.id,this.urlSerializer.serialize(I.extractedUrl),M,V);this.events.next(ee),I.resolve(!1)}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})();function cn(v){return v!==Xn}let Hr=(()=>{class v{buildTitle(I){let M,V=I.root;for(;void 0!==V;)M=this.getResolvedTitleForRoute(V)??M,V=V.children.find(ee=>ee.outlet===Vt);return M}getResolvedTitleForRoute(I){return I.data[Rn]}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:function(){return(0,d.WQX)(ci)},providedIn:"root"})}}return v})(),ci=(()=>{class v extends Hr{constructor(I){super(),this.title=I}updateTitle(I){const M=this.buildTitle(I);void 0!==M&&this.title.setTitle(M)}static{this.\u0275fac=function(M){return new(M||v)(d.KVO(Je.hE))}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})(),Qr=(()=>{class v{static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:function(){return(0,d.WQX)($r)},providedIn:"root"})}}return v})();class lr{shouldDetach(A){return!1}store(A,I){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,I){return A.routeConfig===I.routeConfig}}let $r=(()=>{class v extends lr{static{this.\u0275fac=function(){let I;return function(V){return(I||(I=d.xGo(v)))(V||v)}}()}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})();const ur=new d.nKC("",{providedIn:"root",factory:()=>({})});let Lr=(()=>{class v{static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:function(){return(0,d.WQX)(ns)},providedIn:"root"})}}return v})(),ns=(()=>{class v{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,M){return I}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})();var $i=function(v){return v[v.COMPLETE=0]="COMPLETE",v[v.FAILED=1]="FAILED",v[v.REDIRECTING=2]="REDIRECTING",v}($i||{});function ea(v,A){v.events.pipe((0,Jt.p)(I=>I instanceof xs||I instanceof gs||I instanceof no||I instanceof Kr),(0,Me.T)(I=>I instanceof xs||I instanceof Kr?$i.COMPLETE:I instanceof gs&&(0===I.code||1===I.code)?$i.REDIRECTING:$i.FAILED),(0,Jt.p)(I=>I!==$i.REDIRECTING),(0,_t.s)(1)).subscribe(()=>{A()})}function ji(v){throw v}function Do(v,A,I){return A.parse("/")}const Yi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ma={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ks=(()=>{class v{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.WQX)(d.H3F),this.isNgZoneEnabled=!1,this._events=new me.B,this.options=(0,d.WQX)(ur,{optional:!0})||{},this.pendingTasks=(0,d.WQX)(d.$K3),this.errorHandler=this.options.errorHandler||ji,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Do,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.WQX)(Lr),this.routeReuseStrategy=(0,d.WQX)(Qr),this.titleStrategy=(0,d.WQX)(Hr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.WQX)(te,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.WQX)(Ct),this.urlSerializer=(0,d.WQX)(qn),this.location=(0,d.WQX)(qe.aZ),this.componentInputBindingEnabled=!!(0,d.WQX)(Zr,{optional:!0}),this.eventsSubscription=new It.yU,this.isNgZoneEnabled=(0,d.WQX)(d.SKi)instanceof d.SKi&&d.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new rr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xs(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(M=>{try{const{currentTransition:V}=this.navigationTransitions;if(null===V)return void(Dc(M)&&this._events.next(M));if(M instanceof Rs)cn(V.source)&&(this.browserUrlTree=V.extractedUrl);else if(M instanceof Kr)this.rawUrlTree=V.rawUrl;else if(M instanceof ii){if("eager"===this.urlUpdateStrategy){if(!V.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl);this.setBrowserUrl(ee,V)}this.browserUrlTree=V.urlAfterRedirects}}else if(M instanceof _s)this.currentUrlTree=V.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl),this.routerState=V.targetRouterState,"deferred"===this.urlUpdateStrategy&&(V.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,V),this.browserUrlTree=V.urlAfterRedirects);else if(M instanceof gs)0!==M.code&&1!==M.code&&(this.navigated=!0),(3===M.code||2===M.code)&&this.restoreHistory(V);else if(M instanceof Ao){const ee=this.urlHandlingStrategy.merge(M.url,V.currentRawUrl),he={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cn(V.source)};this.scheduleNavigation(ee,Xn,null,he,{resolve:V.resolve,reject:V.reject,promise:V.promise})}M instanceof no&&this.restoreHistory(V,!0),M instanceof xs&&(this.navigated=!0),Dc(M)&&this._events.next(M)}catch(V){this.navigationTransitions.transitionAbortSubject.next(V)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Xn,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const M="popstate"===I.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,M,I.state)},0)}))}navigateToSyncWithBrowser(I,M,V){const ee={replaceUrl:!0},he=V?.navigationId?V:null;if(V){const Ne={...V};delete Ne.navigationId,delete Ne.\u0275routerPageId,0!==Object.keys(Ne).length&&(ee.state=Ne)}const Ue=this.parseUrl(I);this.scheduleNavigation(Ue,M,he,ee)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(Gr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,M={}){const{relativeTo:V,queryParams:ee,fragment:he,queryParamsHandling:Ue,preserveFragment:Ne}=M,Pt=Ne?this.currentUrlTree.fragment:he;let nr,ln=null;switch(Ue){case"merge":ln={...this.currentUrlTree.queryParams,...ee};break;case"preserve":ln=this.currentUrlTree.queryParams;break;default:ln=ee||null}null!==ln&&(ln=this.removeEmptyProps(ln));try{nr=xi(V?V.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),nr=this.currentUrlTree.root}return Qn(nr,I,ln,Pt??null)}navigateByUrl(I,M={skipLocationChange:!1}){const V=cr(I)?I:this.parseUrl(I),ee=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(ee,Xn,null,M)}navigate(I,M={skipLocationChange:!1}){return function mn(v){for(let A=0;A<v.length;A++)if(null==v[A])throw new d.wOt(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,M),M)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let M;try{M=this.urlSerializer.parse(I)}catch(V){M=this.malformedUriErrorHandler(V,this.urlSerializer,I)}return M}isActive(I,M){let V;if(V=!0===M?{...Yi}:!1===M?{...ma}:M,cr(I))return ri(this.currentUrlTree,I,V);const ee=this.parseUrl(I);return ri(this.currentUrlTree,ee,V)}removeEmptyProps(I){return Object.keys(I).reduce((M,V)=>{const ee=I[V];return null!=ee&&(M[V]=ee),M},{})}scheduleNavigation(I,M,V,ee,he){if(this.disposed)return Promise.resolve(!1);let Ue,Ne,Pt;he?(Ue=he.resolve,Ne=he.reject,Pt=he.promise):Pt=new Promise((nr,yn)=>{Ue=nr,Ne=yn});const ln=this.pendingTasks.add();return ea(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(ln))}),this.navigationTransitions.handleNavigationRequest({source:M,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:ee,resolve:Ue,reject:Ne,promise:Pt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pt.catch(nr=>Promise.reject(nr))}setBrowserUrl(I,M){const V=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(V)||M.extras.replaceUrl){const he={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId)};this.location.replaceState(V,"",he)}else{const ee={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId+1)};this.location.go(V,"",ee)}}restoreHistory(I,M=!1){if("computed"===this.canceledNavigationResolution){const ee=this.currentPageId-this.browserPageId;0!==ee?this.location.historyGo(ee):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===ee&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,M){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:M}:{navigationId:I}}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})();function Dc(v){return!(v instanceof _s||v instanceof Ao)}let Ns=(()=>{class v{constructor(I,M,V,ee,he,Ue){this.router=I,this.route=M,this.tabIndexAttribute=V,this.renderer=ee,this.el=he,this.locationStrategy=Ue,this.href=null,this.commands=null,this.onChanges=new me.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ne=he.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ne||"area"===Ne,this.isAnchorElement?this.subscription=I.events.subscribe(Pt=>{Pt instanceof xs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,M,V,ee,he){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||M||V||ee||he||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,d.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,M){const V=this.renderer,ee=this.el.nativeElement;null!==M?V.setAttribute(ee,I,M):V.removeAttribute(ee,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(M){return new(M||v)(d.rXU(Ks),d.rXU(es),d.kS0("tabindex"),d.rXU(d.sFG),d.rXU(d.aKT),d.rXU(qe.hb))}}static{this.\u0275dir=d.FsC({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(M,V){1&M&&d.bIt("click",function(he){return V.onClick(he.button,he.ctrlKey,he.shiftKey,he.altKey,he.metaKey)}),2&M&&d.BMQ("target",V.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.L39],skipLocationChange:["skipLocationChange","skipLocationChange",d.L39],replaceUrl:["replaceUrl","replaceUrl",d.L39],routerLink:"routerLink"},standalone:!0,features:[d.GFd,d.OA$]})}}return v})(),Is=(()=>{class v{get isActive(){return this._isActive}constructor(I,M,V,ee,he){this.router=I,this.element=M,this.renderer=V,this.cdr=ee,this.link=he,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.bkB,this.routerEventsSubscription=I.events.subscribe(Ue=>{Ue instanceof xs&&this.update()})}ngAfterContentInit(){(0,Pe.of)(this.links.changes,(0,Pe.of)(null)).pipe((0,Ie.U)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),this.link].filter(M=>!!M).map(M=>M.onChanges);this.linkInputChangesSubscription=(0,ke.H)(I).pipe((0,Ie.U)()).subscribe(M=>{this._isActive!==this.isLinkActive(this.router)(M)&&this.update()})}set routerLinkActive(I){const M=Array.isArray(I)?I:I.split(" ");this.classes=M.filter(V=>!!V)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const I=this.hasActiveLinks();this._isActive!==I&&(this._isActive=I,this.cdr.markForCheck(),this.classes.forEach(M=>{I?this.renderer.addClass(this.element.nativeElement,M):this.renderer.removeClass(this.element.nativeElement,M)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const M=function ao(v){return!!v.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return V=>!!V.urlTree&&I.isActive(V.urlTree,M)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.links.some(I)}static{this.\u0275fac=function(M){return new(M||v)(d.rXU(Ks),d.rXU(d.aKT),d.rXU(d.sFG),d.rXU(d.gRc),d.rXU(Ns,8))}}static{this.\u0275dir=d.FsC({type:v,selectors:[["","routerLinkActive",""]],contentQueries:function(M,V,ee){if(1&M&&d.wni(ee,Ns,5),2&M){let he;d.mGM(he=d.lsd())&&(V.links=he)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.OA$]})}}return v})();class ta{}let xl=(()=>{class v{constructor(I,M,V,ee,he){this.router=I,this.injector=V,this.preloadingStrategy=ee,this.loader=he}setUpPreloading(){this.subscription=this.router.events.pipe((0,Jt.p)(I=>I instanceof xs),(0,_r.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,M){const V=[];for(const ee of M){ee.providers&&!ee._injector&&(ee._injector=(0,d.Ol2)(ee.providers,I,`Route: ${ee.path}`));const he=ee._injector??I,Ue=ee._loadedInjector??he;(ee.loadChildren&&!ee._loadedRoutes&&void 0===ee.canLoad||ee.loadComponent&&!ee._loadedComponent)&&V.push(this.preloadConfig(he,ee)),(ee.children||ee._loadedRoutes)&&V.push(this.processRoutes(Ue,ee.children??ee._loadedRoutes))}return(0,ke.H)(V).pipe((0,Ie.U)())}preloadConfig(I,M){return this.preloadingStrategy.preload(M,()=>{let V;V=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(I,M):(0,Pe.of)(null);const ee=V.pipe((0,ut.Z)(he=>null===he?(0,Pe.of)(void 0):(M._loadedRoutes=he.routes,M._loadedInjector=he.injector,this.processRoutes(he.injector??I,he.routes))));if(M.loadComponent&&!M._loadedComponent){const he=this.loader.loadComponent(M);return(0,ke.H)([ee,he]).pipe((0,Ie.U)())}return ee})}static{this.\u0275fac=function(M){return new(M||v)(d.KVO(Ks),d.KVO(d.Ql9),d.KVO(d.uvJ),d.KVO(ta),d.KVO(B))}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})();const oc=new d.nKC("");let ga=(()=>{class v{constructor(I,M,V,ee,he={}){this.urlSerializer=I,this.transitions=M,this.viewportScroller=V,this.zone=ee,this.options=he,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},he.scrollPositionRestoration=he.scrollPositionRestoration||"disabled",he.anchorScrolling=he.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Rs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof xs?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Kr&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Qs&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,M){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qs(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(M){d.QTQ()}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac})}}return v})();function ws(v,A){return{\u0275kind:v,\u0275providers:A}}function zn(){const v=(0,d.WQX)(d.zZn);return A=>{const I=v.get(d.o8S);if(A!==I.components[0])return;const M=v.get(Ks),V=v.get(tl);1===v.get(Rc)&&M.initialNavigation(),v.get(ac,null,d.$GK.Optional)?.setUpPreloading(),v.get(oc,null,d.$GK.Optional)?.init(),M.resetRootComponentType(I.componentTypes[0]),V.closed||(V.next(),V.complete(),V.unsubscribe())}}const tl=new d.nKC("",{factory:()=>new me.B}),Rc=new d.nKC("",{providedIn:"root",factory:()=>1}),ac=new d.nKC("");function Ua(v){return ws(0,[{provide:ac,useExisting:xl},{provide:ta,useExisting:v}])}const Ft=new d.nKC("ROUTER_FORROOT_GUARD"),wr=[qe.aZ,{provide:qn,useClass:Dn},Ks,io,{provide:es,useFactory:function co(v){return v.routerState.root},deps:[Ks]},B,[]];function $o(){return new d.NEm("Router",Ks)}let zo=(()=>{class v{constructor(I){}static forRoot(I,M){return{ngModule:v,providers:[wr,[],{provide:te,multi:!0,useValue:I},{provide:Ft,useFactory:Ro,deps:[[Ks,new d.Xx1,new d.kdw]]},{provide:ur,useValue:M||{}},M?.useHash?{provide:qe.hb,useClass:qe.fw}:{provide:qe.hb,useClass:qe.Sm},{provide:oc,useFactory:()=>{const v=(0,d.WQX)(qe.Xr),A=(0,d.WQX)(d.SKi),I=(0,d.WQX)(ur),M=(0,d.WQX)(Ct),V=(0,d.WQX)(qn);return I.scrollOffset&&v.setOffset(I.scrollOffset),new ga(V,M,v,A,I)}},M?.preloadingStrategy?Ua(M.preloadingStrategy).\u0275providers:[],{provide:d.NEm,multi:!0,useFactory:$o},M?.initialNavigation?Ba(M):[],M?.bindToComponentInputs?ws(8,[mo,{provide:Zr,useExisting:mo}]).\u0275providers:[],[{provide:uc,useFactory:zn},{provide:d.iLQ,multi:!0,useExisting:uc}]]}}static forChild(I){return{ngModule:v,providers:[{provide:te,multi:!0,useValue:I}]}}static{this.\u0275fac=function(M){return new(M||v)(d.KVO(Ft,8))}}static{this.\u0275mod=d.$C({type:v})}static{this.\u0275inj=d.G2t({})}}return v})();function Ro(v){return"guarded"}function Ba(v){return["disabled"===v.initialNavigation?ws(3,[{provide:d.hnV,multi:!0,useFactory:()=>{const A=(0,d.WQX)(Ks);return()=>{A.setUpLocationChangeListener()}}},{provide:Rc,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?ws(2,[{provide:Rc,useValue:0},{provide:d.hnV,multi:!0,deps:[d.zZn],useFactory:A=>{const I=A.get(qe.hj,Promise.resolve());return()=>I.then(()=>new Promise(M=>{const V=A.get(Ks),ee=A.get(tl);ea(V,()=>{M(!0)}),A.get(Ct).afterPreactivation=()=>(M(!0),ee.closed?(0,Pe.of)(void 0):ee),V.initialNavigation()}))}}]).\u0275providers:[]]}const uc=new d.nKC("")},3345:(en,at,W)=>{W.d(at,{A:()=>St});var d=W(1076),fe=W(1362),Te=W(7852),pe=W(8041);class ke{constructor(Nt,Mt){this._delegate=Nt,this.firebase=Mt,(0,Te._addComponent)(Nt,new fe.uA("app-compat",()=>this,"PUBLIC")),this.container=Nt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Nt){this._delegate.automaticDataCollectionEnabled=Nt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Nt=>{this._delegate.checkDestroyed(),Nt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Te.deleteApp)(this._delegate)))}_getService(Nt,Mt=Te._DEFAULT_ENTRY_NAME){var an;this._delegate.checkDestroyed();const At=this._delegate.container.getProvider(Nt);return!At.isInitialized()&&"EXPLICIT"===(null===(an=At.getComponent())||void 0===an?void 0:an.instantiationMode)&&At.initialize(),At.getImmediate({identifier:Mt})}_removeServiceInstance(Nt,Mt=Te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Nt).clearInstance(Mt)}_addComponent(Nt){(0,Te._addComponent)(this._delegate,Nt)}_addOrOverwriteComponent(Nt){(0,Te._addOrOverwriteComponent)(this._delegate,Nt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new d.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),be=function $e(){const It=function Qe(It){const Nt={},Mt={__esModule:!0,initializeApp:function me(_t,Ht={}){const Jt=Te.initializeApp(_t,Ht);if((0,d.gR)(Nt,Jt.name))return Nt[Jt.name];const ut=new It(Jt,Mt);return Nt[Jt.name]=ut,ut},app:At,registerVersion:Te.registerVersion,setLogLevel:Te.setLogLevel,onLog:Te.onLog,apps:null,SDK_VERSION:Te.SDK_VERSION,INTERNAL:{registerComponent:function Me(_t){const Ht=_t.name,Jt=Ht.replace("-compat","");if(Te._registerComponent(_t)&&"PUBLIC"===_t.type){const ut=(Nn=At())=>{if("function"!=typeof Nn[Jt])throw _e.create("invalid-app-argument",{appName:Ht});return Nn[Jt]()};void 0!==_t.serviceProps&&(0,d.zw)(ut,_t.serviceProps),Mt[Jt]=ut,It.prototype[Jt]=function(...Nn){return this._getService.bind(this,Ht).apply(this,_t.multipleInstances?Nn:[])}}return"PUBLIC"===_t.type?Mt[Jt]:null},removeApp:function an(_t){delete Nt[_t]},useAsService:function gt(_t,Ht){return"serverAuth"===Ht?null:Ht},modularAPIs:Te}};function At(_t){if(!(0,d.gR)(Nt,_t=_t||Te._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:_t});return Nt[_t]}return Mt.default=Mt,Object.defineProperty(Mt,"apps",{get:function qe(){return Object.keys(Nt).map(_t=>Nt[_t])}}),At.App=It,Mt}(ke);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function Nt(Mt){(0,d.zw)(It,Mt)},createSubscribe:d.tD,ErrorFactory:d.FA,deepExtend:d.zw}),It}(),Ce=new pe.Vy("@firebase/app-compat");try{const It=(0,d.mS)();if(void 0!==It.firebase){Ce.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Nt=It.firebase.SDK_VERSION;Nt&&Nt.indexOf("LITE")>=0&&Ce.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const St=be;!function dt(It){(0,Te.registerVersion)("@firebase/app-compat","0.2.43",It)}()},7852:(en,at,W)=>{W.r(at),W.d(at,{FirebaseError:()=>pe.g,SDK_VERSION:()=>Rr,_DEFAULT_ENTRY_NAME:()=>Bn,_addComponent:()=>Ri,_addOrOverwriteComponent:()=>qs,_apps:()=>rr,_clearComponents:()=>Zt,_components:()=>Un,_getProvider:()=>qn,_isFirebaseApp:()=>Ds,_isFirebaseServerApp:()=>Wt,_registerComponent:()=>rt,_removeServiceInstance:()=>Dn,_serverApps:()=>Mn,deleteApp:()=>Us,getApp:()=>ss,getApps:()=>hs,initializeApp:()=>mi,initializeServerApp:()=>Fi,onLog:()=>q,registerVersion:()=>ie,setLogLevel:()=>re});var d=W(467),fe=W(1362),Te=W(8041),pe=W(1076);const ke=(Xe,Ye)=>Ye.some(wt=>Xe instanceof wt);let Pe,_e;const be=new WeakMap,Ce=new WeakMap,Ve=new WeakMap,mt=new WeakMap,dt=new WeakMap;let Nt={get(Xe,Ye,wt){if(Xe instanceof IDBTransaction){if("done"===Ye)return Ce.get(Xe);if("objectStoreNames"===Ye)return Xe.objectStoreNames||Ve.get(Xe);if("store"===Ye)return wt.objectStoreNames[1]?void 0:wt.objectStore(wt.objectStoreNames[0])}return me(Xe[Ye])},set:(Xe,Ye,wt)=>(Xe[Ye]=wt,!0),has:(Xe,Ye)=>Xe instanceof IDBTransaction&&("done"===Ye||"store"===Ye)||Ye in Xe};function At(Xe){return"function"==typeof Xe?function an(Xe){return Xe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $e(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Xe)?function(...Ye){return Xe.apply(qe(this),Ye),me(be.get(this))}:function(...Ye){return me(Xe.apply(qe(this),Ye))}:function(Ye,...wt){const jt=Xe.call(qe(this),Ye,...wt);return Ve.set(jt,Ye.sort?Ye.sort():[Ye]),me(jt)}}(Xe):(Xe instanceof IDBTransaction&&function It(Xe){if(Ce.has(Xe))return;const Ye=new Promise((wt,jt)=>{const _n=()=>{Xe.removeEventListener("complete",Kn),Xe.removeEventListener("error",$n),Xe.removeEventListener("abort",$n)},Kn=()=>{wt(),_n()},$n=()=>{jt(Xe.error||new DOMException("AbortError","AbortError")),_n()};Xe.addEventListener("complete",Kn),Xe.addEventListener("error",$n),Xe.addEventListener("abort",$n)});Ce.set(Xe,Ye)}(Xe),ke(Xe,function Qe(){return Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Xe,Nt):Xe)}function me(Xe){if(Xe instanceof IDBRequest)return function St(Xe){const Ye=new Promise((wt,jt)=>{const _n=()=>{Xe.removeEventListener("success",Kn),Xe.removeEventListener("error",$n)},Kn=()=>{wt(me(Xe.result)),_n()},$n=()=>{jt(Xe.error),_n()};Xe.addEventListener("success",Kn),Xe.addEventListener("error",$n)});return Ye.then(wt=>{wt instanceof IDBCursor&&be.set(wt,Xe)}).catch(()=>{}),dt.set(Ye,Xe),Ye}(Xe);if(mt.has(Xe))return mt.get(Xe);const Ye=At(Xe);return Ye!==Xe&&(mt.set(Xe,Ye),dt.set(Ye,Xe)),Ye}const qe=Xe=>dt.get(Xe),_t=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],Jt=new Map;function ut(Xe,Ye){if(!(Xe instanceof IDBDatabase)||Ye in Xe||"string"!=typeof Ye)return;if(Jt.get(Ye))return Jt.get(Ye);const wt=Ye.replace(/FromIndex$/,""),jt=Ye!==wt,_n=Ht.includes(wt);if(!(wt in(jt?IDBIndex:IDBObjectStore).prototype)||!_n&&!_t.includes(wt))return;const Kn=function(){var $n=(0,d.A)(function*(hr,...Ar){const ze=this.transaction(hr,_n?"readwrite":"readonly");let Xn=ze.store;return jt&&(Xn=Xn.index(Ar.shift())),(yield Promise.all([Xn[wt](...Ar),_n&&ze.done]))[0]});return function(Ar){return $n.apply(this,arguments)}}();return Jt.set(Ye,Kn),Kn}!function Mt(Xe){Nt=Xe(Nt)}(Xe=>({...Xe,get:(Ye,wt,jt)=>ut(Ye,wt)||Xe.get(Ye,wt,jt),has:(Ye,wt)=>!!ut(Ye,wt)||Xe.has(Ye,wt)}));class Nn{constructor(Ye){this.container=Ye}getPlatformInfoString(){return this.container.getProviders().map(wt=>{if(function _r(Xe){const Ye=Xe.getComponent();return"VERSION"===Ye?.type}(wt)){const jt=wt.getImmediate();return`${jt.library}/${jt.version}`}return null}).filter(wt=>wt).join(" ")}}const er="@firebase/app",ui="0.10.13",Yr=new Te.Vy("@firebase/app"),Bn="[DEFAULT]",Br={[er]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},rr=new Map,Mn=new Map,Un=new Map;function Ri(Xe,Ye){try{Xe.container.addComponent(Ye)}catch(wt){Yr.debug(`Component ${Ye.name} failed to register with FirebaseApp ${Xe.name}`,wt)}}function qs(Xe,Ye){Xe.container.addOrOverwriteComponent(Ye)}function rt(Xe){const Ye=Xe.name;if(Un.has(Ye))return Yr.debug(`There were multiple attempts to register component ${Ye}.`),!1;Un.set(Ye,Xe);for(const wt of rr.values())Ri(wt,Xe);for(const wt of Mn.values())Ri(wt,Xe);return!0}function qn(Xe,Ye){const wt=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return wt&&wt.triggerHeartbeat(),Xe.container.getProvider(Ye)}function Dn(Xe,Ye,wt=Bn){qn(Xe,Ye).clearInstance(wt)}function Ds(Xe){return void 0!==Xe.options}function Wt(Xe){return void 0!==Xe.settings}function Zt(){Un.clear()}const Lt=new pe.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class lt{constructor(Ye,wt,jt){this._isDeleted=!1,this._options=Object.assign({},Ye),this._config=Object.assign({},wt),this._name=wt.name,this._automaticDataCollectionEnabled=wt.automaticDataCollectionEnabled,this._container=jt,this.container.addComponent(new fe.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ye}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ye){this._isDeleted=Ye}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}class Tt extends lt{constructor(Ye,wt,jt,_n){const Kn=void 0!==wt.automaticDataCollectionEnabled&&wt.automaticDataCollectionEnabled,$n={name:jt,automaticDataCollectionEnabled:Kn};super(void 0!==Ye.apiKey?Ye:Ye.options,$n,_n),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Kn},wt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,wt.releaseOnDeref=void 0,ie(er,ui,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ye){this.isDeleted||(this._refCount++,void 0!==Ye&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ye,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Us(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Lt.create("server-app-deleted")}}const Rr="10.14.1";function mi(Xe,Ye={}){let wt=Xe;"object"!=typeof Ye&&(Ye={name:Ye});const jt=Object.assign({name:Bn,automaticDataCollectionEnabled:!1},Ye),_n=jt.name;if("string"!=typeof _n||!_n)throw Lt.create("bad-app-name",{appName:String(_n)});if(wt||(wt=(0,pe.T9)()),!wt)throw Lt.create("no-options");const Kn=rr.get(_n);if(Kn){if((0,pe.bD)(wt,Kn.options)&&(0,pe.bD)(jt,Kn.config))return Kn;throw Lt.create("duplicate-app",{appName:_n})}const $n=new fe.h1(_n);for(const Ar of Un.values())$n.addComponent(Ar);const hr=new lt(wt,jt,$n);return rr.set(_n,hr),hr}function Fi(Xe,Ye){if((0,pe.Bd)()&&!(0,pe.p7)())throw Lt.create("invalid-server-app-environment");let wt;void 0===Ye.automaticDataCollectionEnabled&&(Ye.automaticDataCollectionEnabled=!1),wt=Ds(Xe)?Xe.options:Xe;const jt=Object.assign(Object.assign({},Ye),wt);if(void 0!==jt.releaseOnDeref&&delete jt.releaseOnDeref,void 0!==Ye.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Lt.create("finalization-registry-not-supported",{});const Kn=""+(ze=JSON.stringify(jt),[...ze].reduce((Xn,di)=>Math.imul(31,Xn)+di.charCodeAt(0)|0,0)),$n=Mn.get(Kn);var ze;if($n)return $n.incRefCount(Ye.releaseOnDeref),$n;const hr=new fe.h1(Kn);for(const ze of Un.values())hr.addComponent(ze);const Ar=new Tt(wt,Ye,Kn,hr);return Mn.set(Kn,Ar),Ar}function ss(Xe=Bn){const Ye=rr.get(Xe);if(!Ye&&Xe===Bn&&(0,pe.T9)())return mi();if(!Ye)throw Lt.create("no-app",{appName:Xe});return Ye}function hs(){return Array.from(rr.values())}function Us(Xe){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.A)(function*(Xe){let Ye=!1;const wt=Xe.name;rr.has(wt)?(Ye=!0,rr.delete(wt)):Mn.has(wt)&&Xe.decRefCount()<=0&&(Mn.delete(wt),Ye=!0),Ye&&(yield Promise.all(Xe.container.getProviders().map(jt=>jt.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function ie(Xe,Ye,wt){var jt;let _n=null!==(jt=Br[Xe])&&void 0!==jt?jt:Xe;wt&&(_n+=`-${wt}`);const Kn=_n.match(/\s|\//),$n=Ye.match(/\s|\//);if(Kn||$n){const hr=[`Unable to register library "${_n}" with version "${Ye}":`];return Kn&&hr.push(`library name "${_n}" contains illegal characters (whitespace or "/")`),Kn&&$n&&hr.push("and"),$n&&hr.push(`version name "${Ye}" contains illegal characters (whitespace or "/")`),void Yr.warn(hr.join(" "))}rt(new fe.uA(`${_n}-version`,()=>({library:_n,version:Ye}),"VERSION"))}function q(Xe,Ye){if(null!==Xe&&"function"!=typeof Xe)throw Lt.create("invalid-log-argument");(0,Te.Ey)(Xe,Ye)}function re(Xe){(0,Te.He)(Xe)}const De="firebase-heartbeat-database",Re=1,it="firebase-heartbeat-store";let kt=null;function Pn(){return kt||(kt=function Me(Xe,Ye,{blocked:wt,upgrade:jt,blocking:_n,terminated:Kn}={}){const $n=indexedDB.open(Xe,Ye),hr=me($n);return jt&&$n.addEventListener("upgradeneeded",Ar=>{jt(me($n.result),Ar.oldVersion,Ar.newVersion,me($n.transaction),Ar)}),wt&&$n.addEventListener("blocked",Ar=>wt(Ar.oldVersion,Ar.newVersion,Ar)),hr.then(Ar=>{Kn&&Ar.addEventListener("close",()=>Kn()),_n&&Ar.addEventListener("versionchange",ze=>_n(ze.oldVersion,ze.newVersion,ze))}).catch(()=>{}),hr}(De,Re,{upgrade:(Xe,Ye)=>{if(0===Ye)try{Xe.createObjectStore(it)}catch(wt){console.warn(wt)}}}).catch(Xe=>{throw Lt.create("idb-open",{originalErrorMessage:Xe.message})})),kt}function $t(){return($t=(0,d.A)(function*(Xe){try{const wt=(yield Pn()).transaction(it),jt=yield wt.objectStore(it).get(xi(Xe));return yield wt.done,jt}catch(Ye){if(Ye instanceof pe.g)Yr.warn(Ye.message);else{const wt=Lt.create("idb-get",{originalErrorMessage:Ye?.message});Yr.warn(wt.message)}}})).apply(this,arguments)}function cr(Xe,Ye){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,d.A)(function*(Xe,Ye){try{const jt=(yield Pn()).transaction(it,"readwrite");yield jt.objectStore(it).put(Ye,xi(Xe)),yield jt.done}catch(wt){if(wt instanceof pe.g)Yr.warn(wt.message);else{const jt=Lt.create("idb-set",{originalErrorMessage:wt?.message});Yr.warn(jt.message)}}})).apply(this,arguments)}function xi(Xe){return`${Xe.name}!${Xe.options.appId}`}class Nr{constructor(Ye){this.container=Ye,this._heartbeatsCache=null;const wt=this.container.getProvider("app").getImmediate();this._storage=new wi(wt),this._heartbeatsCachePromise=this._storage.read().then(jt=>(this._heartbeatsCache=jt,jt))}triggerHeartbeat(){var Ye=this;return(0,d.A)(function*(){var wt,jt;try{const Kn=Ye.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$n=Li();return null==(null===(wt=Ye._heartbeatsCache)||void 0===wt?void 0:wt.heartbeats)&&(Ye._heartbeatsCache=yield Ye._heartbeatsCachePromise,null==(null===(jt=Ye._heartbeatsCache)||void 0===jt?void 0:jt.heartbeats))||Ye._heartbeatsCache.lastSentHeartbeatDate===$n||Ye._heartbeatsCache.heartbeats.some(hr=>hr.date===$n)?void 0:(Ye._heartbeatsCache.heartbeats.push({date:$n,agent:Kn}),Ye._heartbeatsCache.heartbeats=Ye._heartbeatsCache.heartbeats.filter(hr=>{const Ar=new Date(hr.date).valueOf();return Date.now()-Ar<=2592e6}),Ye._storage.overwrite(Ye._heartbeatsCache))}catch(_n){Yr.warn(_n)}})()}getHeartbeatsHeader(){var Ye=this;return(0,d.A)(function*(){var wt;try{if(null===Ye._heartbeatsCache&&(yield Ye._heartbeatsCachePromise),null==(null===(wt=Ye._heartbeatsCache)||void 0===wt?void 0:wt.heartbeats)||0===Ye._heartbeatsCache.heartbeats.length)return"";const jt=Li(),{heartbeatsToSend:_n,unsentEntries:Kn}=function Ui(Xe,Ye=1024){const wt=[];let jt=Xe.slice();for(const _n of Xe){const Kn=wt.find($n=>$n.agent===_n.agent);if(Kn){if(Kn.dates.push(_n.date),Sn(wt)>Ye){Kn.dates.pop();break}}else if(wt.push({agent:_n.agent,dates:[_n.date]}),Sn(wt)>Ye){wt.pop();break}jt=jt.slice(1)}return{heartbeatsToSend:wt,unsentEntries:jt}}(Ye._heartbeatsCache.heartbeats),$n=(0,pe.Uj)(JSON.stringify({version:2,heartbeats:_n}));return Ye._heartbeatsCache.lastSentHeartbeatDate=jt,Kn.length>0?(Ye._heartbeatsCache.heartbeats=Kn,yield Ye._storage.overwrite(Ye._heartbeatsCache)):(Ye._heartbeatsCache.heartbeats=[],Ye._storage.overwrite(Ye._heartbeatsCache)),$n}catch(jt){return Yr.warn(jt),""}})()}}function Li(){return(new Date).toISOString().substring(0,10)}class wi{constructor(Ye){this.app=Ye,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.A)(function*(){return!!(0,pe.zW)()&&(0,pe.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ye=this;return(0,d.A)(function*(){if(yield Ye._canUseIndexedDBPromise){const jt=yield function Gt(Xe){return $t.apply(this,arguments)}(Ye.app);return jt?.heartbeats?jt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ye){var wt=this;return(0,d.A)(function*(){var jt;if(yield wt._canUseIndexedDBPromise){const Kn=yield wt.read();return cr(wt.app,{lastSentHeartbeatDate:null!==(jt=Ye.lastSentHeartbeatDate)&&void 0!==jt?jt:Kn.lastSentHeartbeatDate,heartbeats:Ye.heartbeats})}})()}add(Ye){var wt=this;return(0,d.A)(function*(){var jt;if(yield wt._canUseIndexedDBPromise){const Kn=yield wt.read();return cr(wt.app,{lastSentHeartbeatDate:null!==(jt=Ye.lastSentHeartbeatDate)&&void 0!==jt?jt:Kn.lastSentHeartbeatDate,heartbeats:[...Kn.heartbeats,...Ye.heartbeats]})}})()}}function Sn(Xe){return(0,pe.Uj)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Ss(Xe){rt(new fe.uA("platform-logger",Ye=>new Nn(Ye),"PRIVATE")),rt(new fe.uA("heartbeat",Ye=>new Nr(Ye),"PRIVATE")),ie(er,ui,Xe),ie(er,ui,"esm2017"),ie("fire-js","")}("")},1362:(en,at,W)=>{W.d(at,{h1:()=>Qe,uA:()=>Te});var d=W(467),fe=W(1076);class Te{constructor(be,Ce,Ve){this.name=be,this.instanceFactory=Ce,this.type=Ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(be){return this.instantiationMode=be,this}setMultipleInstances(be){return this.multipleInstances=be,this}setServiceProps(be){return this.serviceProps=be,this}setInstanceCreatedCallback(be){return this.onInstanceCreated=be,this}}const pe="[DEFAULT]";class ke{constructor(be,Ce){this.name=be,this.container=Ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(be){const Ce=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(Ce)){const Ve=new fe.cY;if(this.instancesDeferred.set(Ce,Ve),this.isInitialized(Ce)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:Ce});mt&&Ve.resolve(mt)}catch{}}return this.instancesDeferred.get(Ce).promise}getImmediate(be){var Ce;const Ve=this.normalizeInstanceIdentifier(be?.identifier),mt=null!==(Ce=be?.optional)&&void 0!==Ce&&Ce;if(!this.isInitialized(Ve)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ve})}catch(dt){if(mt)return null;throw dt}}getComponent(){return this.component}setComponent(be){if(be.name!==this.name)throw Error(`Mismatching Component ${be.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=be,this.shouldAutoInitialize()){if(function _e($e){return"EAGER"===$e.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[Ce,Ve]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(Ce);try{const dt=this.getOrInitializeService({instanceIdentifier:mt});Ve.resolve(dt)}catch{}}}}clearInstance(be=pe){this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}delete(){var be=this;return(0,d.A)(function*(){const Ce=Array.from(be.instances.values());yield Promise.all([...Ce.filter(Ve=>"INTERNAL"in Ve).map(Ve=>Ve.INTERNAL.delete()),...Ce.filter(Ve=>"_delete"in Ve).map(Ve=>Ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(be=pe){return this.instances.has(be)}getOptions(be=pe){return this.instancesOptions.get(be)||{}}initialize(be={}){const{options:Ce={}}=be,Ve=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(Ve))throw Error(`${this.name}(${Ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:Ve,options:Ce});for(const[dt,St]of this.instancesDeferred.entries())Ve===this.normalizeInstanceIdentifier(dt)&&St.resolve(mt);return mt}onInit(be,Ce){var Ve;const mt=this.normalizeInstanceIdentifier(Ce),dt=null!==(Ve=this.onInitCallbacks.get(mt))&&void 0!==Ve?Ve:new Set;dt.add(be),this.onInitCallbacks.set(mt,dt);const St=this.instances.get(mt);return St&&be(St,mt),()=>{dt.delete(be)}}invokeOnInitCallbacks(be,Ce){const Ve=this.onInitCallbacks.get(Ce);if(Ve)for(const mt of Ve)try{mt(be,Ce)}catch{}}getOrInitializeService({instanceIdentifier:be,options:Ce={}}){let Ve=this.instances.get(be);if(!Ve&&this.component&&(Ve=this.component.instanceFactory(this.container,{instanceIdentifier:($e=be,$e===pe?void 0:$e),options:Ce}),this.instances.set(be,Ve),this.instancesOptions.set(be,Ce),this.invokeOnInitCallbacks(Ve,be),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,be,Ve)}catch{}var $e;return Ve||null}normalizeInstanceIdentifier(be=pe){return this.component?this.component.multipleInstances?be:pe:be}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qe{constructor(be){this.name=be,this.providers=new Map}addComponent(be){const Ce=this.getProvider(be.name);if(Ce.isComponentSet())throw new Error(`Component ${be.name} has already been registered with ${this.name}`);Ce.setComponent(be)}addOrOverwriteComponent(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}getProvider(be){if(this.providers.has(be))return this.providers.get(be);const Ce=new ke(be,this);return this.providers.set(be,Ce),Ce}getProviders(){return Array.from(this.providers.values())}}},8041:(en,at,W)=>{W.d(at,{$b:()=>fe,Ey:()=>$e,He:()=>Qe,Vy:()=>_e});const d=[];var fe=function(be){return be[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",be}(fe||{});const Te={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},pe=fe.INFO,ke={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},Pe=(be,Ce,...Ve)=>{if(Ce<be.logLevel)return;const mt=(new Date).toISOString(),dt=ke[Ce];if(!dt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ce})`);console[dt](`[${mt}]  ${be.name}:`,...Ve)};class _e{constructor(Ce){this.name=Ce,this._logLevel=pe,this._logHandler=Pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(Ce){if(!(Ce in fe))throw new TypeError(`Invalid value "${Ce}" assigned to \`logLevel\``);this._logLevel=Ce}setLogLevel(Ce){this._logLevel="string"==typeof Ce?Te[Ce]:Ce}get logHandler(){return this._logHandler}set logHandler(Ce){if("function"!=typeof Ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ce){this._userLogHandler=Ce}debug(...Ce){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...Ce),this._logHandler(this,fe.DEBUG,...Ce)}log(...Ce){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...Ce),this._logHandler(this,fe.VERBOSE,...Ce)}info(...Ce){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...Ce),this._logHandler(this,fe.INFO,...Ce)}warn(...Ce){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...Ce),this._logHandler(this,fe.WARN,...Ce)}error(...Ce){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...Ce),this._logHandler(this,fe.ERROR,...Ce)}}function Qe(be){d.forEach(Ce=>{Ce.setLogLevel(be)})}function $e(be,Ce){for(const Ve of d){let mt=null;Ce&&Ce.level&&(mt=Te[Ce.level]),Ve.userLogHandler=null===be?null:(dt,St,...It)=>{const Nt=It.map(Mt=>{if(null==Mt)return null;if("string"==typeof Mt)return Mt;if("number"==typeof Mt||"boolean"==typeof Mt)return Mt.toString();if(Mt instanceof Error)return Mt.message;try{return JSON.stringify(Mt)}catch{return null}}).filter(Mt=>Mt).join(" ");St>=(mt??dt.logLevel)&&be({level:fe[St].toLowerCase(),message:Nt,args:It,type:dt.name})}}}},7935:(en,at,W)=>{W.d(at,{A:()=>d.A});var d=W(3345);d.A.registerVersion("firebase","10.14.1","app-compat")},7955:(en,at,W)=>{var d=W(467),fe=W(3345),Te=W(7852),pe=W(1076),ke=W(8041),Pe=W(1635),_e=W(1362);const $e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const St=function mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},It=function dt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Nt=new pe.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),an=new ke.Vy("@firebase/auth");function me(b,...u){an.logLevel<=ke.$b.ERROR&&an.error(`Auth (${Te.SDK_VERSION}): ${b}`,...u)}function qe(b,...u){throw Jt(b,...u)}function Me(b,...u){return Jt(b,...u)}function gt(b,u,f){const T=Object.assign(Object.assign({},It()),{[u]:f});return new pe.FA("auth","Firebase",T).create(u,{appName:b.name})}function _t(b){return gt(b,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ht(b,u,f){if(!(u instanceof f))throw f.name!==u.constructor.name&&qe(b,"argument-error"),gt(b,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jt(b,...u){if("string"!=typeof b){const f=u[0],T=[...u.slice(1)];return T[0]&&(T[0].appName=b.name),b._errorFactory.create(f,...T)}return Nt.create(b,...u)}function ut(b,u,...f){if(!b)throw Jt(u,...f)}function Nn(b){const u="INTERNAL ASSERTION FAILED: "+b;throw me(u),new Error(u)}function _r(b,u){b||Nn(u)}function er(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ui(){return"http:"===Yr()||"https:"===Yr()}function Yr(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class En{constructor(u,f){this.shortDelay=u,this.longDelay=f,_r(f>u,"Short delay should be less than long delay!"),this.isMobile=(0,pe.jZ)()||(0,pe.lV)()}get(){return function On(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ui()||(0,pe.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ir(b,u){_r(b.emulator,"Emulator should always be set here");const{url:f}=b.emulator;return u?`${f}${u.startsWith("/")?u.slice(1):u}`:f}class Ke{static initialize(u,f,T){this.fetchImpl=u,f&&(this.headersImpl=f),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ot=new En(3e4,6e4);function nt(b,u){return b.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:b.tenantId}):u}function Ie(b,u,f,T){return Je.apply(this,arguments)}function Je(){return(Je=(0,d.A)(function*(b,u,f,T,H={}){return Vt(b,H,(0,d.A)(function*(){let oe={},xe={};T&&("GET"===u?xe=T:oe={body:JSON.stringify(T)});const We=(0,pe.Am)(Object.assign({key:b.config.apiKey},xe)).slice(1),bt=yield b._getAdditionalHeaders();bt["Content-Type"]="application/json",b.languageCode&&(bt["X-Firebase-Locale"]=b.languageCode);const nn=Object.assign({method:u,headers:bt},oe);return(0,pe.c1)()||(nn.referrerPolicy="no-referrer"),Ke.fetch()(mr(b,b.config.apiHost,f,We),nn)}))})).apply(this,arguments)}function Vt(b,u,f){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.A)(function*(b,u,f){b._canInitEmulator=!1;const T=Object.assign(Object.assign({},tt),u);try{const H=new Ir(b),oe=yield Promise.race([f(),H.promise]);H.clearNetworkTimeout();const xe=yield oe.json();if("needConfirmation"in xe)throw xn(b,"account-exists-with-different-credential",xe);if(oe.ok&&!("errorMessage"in xe))return xe;{const We=oe.ok?xe.errorMessage:xe.error.message,[bt,nn]=We.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===bt)throw xn(b,"credential-already-in-use",xe);if("EMAIL_EXISTS"===bt)throw xn(b,"email-already-in-use",xe);if("USER_DISABLED"===bt)throw xn(b,"user-disabled",xe);const Vn=T[bt]||bt.toLowerCase().replace(/[_\s]+/g,"-");if(nn)throw gt(b,Vn,nn);qe(b,Vn)}}catch(H){if(H instanceof pe.g)throw H;qe(b,"network-request-failed",{message:String(H)})}})).apply(this,arguments)}function dn(b,u,f,T){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,d.A)(function*(b,u,f,T,H={}){const oe=yield Ie(b,u,f,T,H);return"mfaPendingCredential"in oe&&qe(b,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function mr(b,u,f,T){const H=`${u}${f}?${T}`;return b.config.emulator?ir(b.config,H):`${b.config.apiScheme}://${H}`}function yr(b){switch(b){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ir{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((f,T)=>{this.timer=setTimeout(()=>T(Me(this.auth,"network-request-failed")),ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(b,u,f){const T={appName:b.name};f.email&&(T.email=f.email),f.phoneNumber&&(T.phoneNumber=f.phoneNumber);const H=Me(b,u,T);return H.customData._tokenResponse=f,H}function dr(b){return void 0!==b&&void 0!==b.getResponse}function Sr(b){return void 0!==b&&void 0!==b.enterprise}class Or{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===u)return yr(f.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function ri(){return(ri=(0,d.A)(function*(b){return(yield Ie(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Si(b,u){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.A)(function*(b,u){return Ie(b,"GET","/v2/recaptchaConfig",nt(b,u))})).apply(this,arguments)}function Zn(){return(Zn=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Br(){return(Br=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function rr(b,u){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Un(b){if(b)try{const u=new Date(Number(b));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function rt(){return(rt=(0,d.A)(function*(b,u=!1){const f=(0,pe.Ku)(b),T=yield f.getIdToken(u),H=Dn(T);ut(H&&H.exp&&H.auth_time&&H.iat,f.auth,"internal-error");const oe="object"==typeof H.firebase?H.firebase:void 0,xe=oe?.sign_in_provider;return{claims:H,token:T,authTime:Un(qn(H.auth_time)),issuedAtTime:Un(qn(H.iat)),expirationTime:Un(qn(H.exp)),signInProvider:xe||null,signInSecondFactor:oe?.sign_in_second_factor||null}})).apply(this,arguments)}function qn(b){return 1e3*Number(b)}function Dn(b){const[u,f,T]=b.split(".");if(void 0===u||void 0===f||void 0===T)return me("JWT malformed, contained fewer than 3 sections"),null;try{const H=(0,pe.u)(f);return H?JSON.parse(H):(me("Failed to decode base64 JWT payload"),null)}catch(H){return me("Caught error parsing JWT payload as JSON",H?.toString()),null}}function Ds(b){const u=Dn(b);return ut(u,"internal-error"),ut(typeof u.exp<"u","internal-error"),ut(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function Wt(b,u){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.A)(function*(b,u,f=!1){if(f)return u;try{return yield u}catch(T){throw T instanceof pe.g&&function ds({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(T)&&b.auth.currentUser===b&&(yield b.auth.signOut()),T}})).apply(this,arguments)}class Lt{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var f;if(u){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const H=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,H)}}schedule(u=!1){var f=this;if(!this.isRunning)return;const T=this.getInterval(u);this.timerId=setTimeout((0,d.A)(function*(){yield f.iteration()}),T)}iteration(){var u=this;return(0,d.A)(function*(){try{yield u.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&u.schedule(!0))}u.schedule()})()}}class lt{constructor(u,f){this.createdAt=u,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tt(b){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,d.A)(function*(b){var u;const f=b.auth,T=yield b.getIdToken(),H=yield Wt(b,rr(f,{idToken:T}));ut(H?.users.length,f,"internal-error");const oe=H.users[0];b._notifyReloadListener(oe);const xe=null!==(u=oe.providerUserInfo)&&void 0!==u&&u.length?hs(oe.providerUserInfo):[],We=function ss(b,u){return[...b.filter(T=>!u.some(H=>H.providerId===T.providerId)),...u]}(b.providerData,xe),Vn=!!b.isAnonymous&&!(b.email&&oe.passwordHash||We?.length),un={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:We,metadata:new lt(oe.createdAt,oe.lastLoginAt),isAnonymous:Vn};Object.assign(b,un)})).apply(this,arguments)}function Fi(){return(Fi=(0,d.A)(function*(b){const u=(0,pe.Ku)(b);yield Tt(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function hs(b){return b.map(u=>{var{providerId:f}=u,T=(0,Pe.Tt)(u,["providerId"]);return{providerId:f,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function vt(){return(vt=(0,d.A)(function*(b,u){const f=yield Vt(b,{},(0,d.A)(function*(){const T=(0,pe.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:H,apiKey:oe}=b.config,xe=mr(b,H,"/v1/token",`key=${oe}`),We=yield b._getAdditionalHeaders();return We["Content-Type"]="application/x-www-form-urlencoded",Ke.fetch()(xe,{method:"POST",headers:We,body:T})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function q(){return(q=(0,d.A)(function*(b,u){return Ie(b,"POST","/v2/accounts:revokeToken",nt(b,u))})).apply(this,arguments)}class re{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){ut(u.idToken,"internal-error"),ut(typeof u.idToken<"u","internal-error"),ut(typeof u.refreshToken<"u","internal-error");const f="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):Ds(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,f)}updateFromIdToken(u){ut(0!==u.length,"internal-error");const f=Ds(u);this.updateTokensAndExpiration(u,null,f)}getToken(u){var f=this;return(0,d.A)(function*(T,H=!1){return H||!f.accessToken||f.isExpired?(ut(f.refreshToken,T,"user-token-expired"),f.refreshToken?(yield f.refresh(T,f.refreshToken),f.accessToken):null):f.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(u,f){var T=this;return(0,d.A)(function*(){const{accessToken:H,refreshToken:oe,expiresIn:xe}=yield function Us(b,u){return vt.apply(this,arguments)}(u,f);T.updateTokensAndExpiration(H,oe,Number(xe))})()}updateTokensAndExpiration(u,f,T){this.refreshToken=f||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(u,f){const{refreshToken:T,accessToken:H,expirationTime:oe}=f,xe=new re;return T&&(ut("string"==typeof T,"internal-error",{appName:u}),xe.refreshToken=T),H&&(ut("string"==typeof H,"internal-error",{appName:u}),xe.accessToken=H),oe&&(ut("number"==typeof oe,"internal-error",{appName:u}),xe.expirationTime=oe),xe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new re,this.toJSON())}_performRefresh(){return Nn("not implemented")}}function De(b,u){ut("string"==typeof b||typeof b>"u","internal-error",{appName:u})}class Re{constructor(u){var{uid:f,auth:T,stsTokenManager:H}=u,oe=(0,Pe.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=T,this.stsTokenManager=H,this.accessToken=H.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new lt(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(u){var f=this;return(0,d.A)(function*(){const T=yield Wt(f,f.stsTokenManager.getToken(f.auth,u));return ut(T,f.auth,"internal-error"),f.accessToken!==T&&(f.accessToken=T,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),T})()}getIdTokenResult(u){return function qs(b){return rt.apply(this,arguments)}(this,u)}reload(){return function mi(b){return Fi.apply(this,arguments)}(this)}_assign(u){this!==u&&(ut(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(f=>Object.assign({},f)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const f=new Re(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(u){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u){var f=this;return(0,d.A)(function*(T,H=!1){let oe=!1;T.idToken&&T.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(T),oe=!0),H&&(yield Tt(f)),yield f.auth._persistUserIfCurrent(f),oe&&f.auth._notifyListenersIfCurrent(f)}).apply(this,arguments)}delete(){var u=this;return(0,d.A)(function*(){if((0,Te._isFirebaseServerApp)(u.auth.app))return Promise.reject(_t(u.auth));const f=yield u.getIdToken();return yield Wt(u,function Cn(b,u){return Zn.apply(this,arguments)}(u.auth,{idToken:f})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,f){var T,H,oe,xe,We,bt,nn,Vn;const un=null!==(T=f.displayName)&&void 0!==T?T:void 0,ni=null!==(H=f.email)&&void 0!==H?H:void 0,Qo=null!==(oe=f.phoneNumber)&&void 0!==oe?oe:void 0,Yl=null!==(xe=f.photoURL)&&void 0!==xe?xe:void 0,ba=null!==(We=f.tenantId)&&void 0!==We?We:void 0,oh=null!==(bt=f._redirectEventId)&&void 0!==bt?bt:void 0,ld=null!==(nn=f.createdAt)&&void 0!==nn?nn:void 0,hp=null!==(Vn=f.lastLoginAt)&&void 0!==Vn?Vn:void 0,{uid:ah,emailVerified:ud,isAnonymous:ch,providerData:dd,stsTokenManager:hd}=f;ut(ah&&hd,u,"internal-error");const lh=re.fromJSON(this.name,hd);ut("string"==typeof ah,u,"internal-error"),De(un,u.name),De(ni,u.name),ut("boolean"==typeof ud,u,"internal-error"),ut("boolean"==typeof ch,u,"internal-error"),De(Qo,u.name),De(Yl,u.name),De(ba,u.name),De(oh,u.name),De(ld,u.name),De(hp,u.name);const Zl=new Re({uid:ah,auth:u,email:ni,emailVerified:ud,displayName:un,isAnonymous:ch,photoURL:Yl,phoneNumber:Qo,tenantId:ba,stsTokenManager:lh,createdAt:ld,lastLoginAt:hp});return dd&&Array.isArray(dd)&&(Zl.providerData=dd.map(Jl=>Object.assign({},Jl))),oh&&(Zl._redirectEventId=oh),Zl}static _fromIdTokenResponse(u,f){return(0,d.A)(function*(T,H,oe=!1){const xe=new re;xe.updateFromServerResponse(H);const We=new Re({uid:H.localId,auth:T,stsTokenManager:xe,isAnonymous:oe});return yield Tt(We),We}).apply(this,arguments)}static _fromGetAccountInfoResponse(u,f,T){return(0,d.A)(function*(){const H=f.users[0];ut(void 0!==H.localId,"internal-error");const oe=void 0!==H.providerUserInfo?hs(H.providerUserInfo):[],xe=!(H.email&&H.passwordHash||oe?.length),We=new re;We.updateFromIdToken(T);const bt=new Re({uid:H.localId,auth:u,stsTokenManager:We,isAnonymous:xe}),nn={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:oe,metadata:new lt(H.createdAt,H.lastLoginAt),isAnonymous:!(H.email&&H.passwordHash||oe?.length)};return Object.assign(bt,nn),bt})()}}const it=new Map;function kt(b){_r(b instanceof Function,"Expected a class definition");let u=it.get(b);return u?(_r(u instanceof b,"Instance stored in cache mismatched with class"),u):(u=new b,it.set(b,u),u)}const Gt=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.A)(function*(){return!0})()}_set(f,T){var H=this;return(0,d.A)(function*(){H.storage[f]=T})()}_get(f){var T=this;return(0,d.A)(function*(){const H=T.storage[f];return void 0===H?null:H})()}_remove(f){var T=this;return(0,d.A)(function*(){delete T.storage[f]})()}_addListener(f,T){}_removeListener(f,T){}}return b.type="NONE",b})();function $t(b,u,f){return`firebase:${b}:${u}:${f}`}class cr{constructor(u,f,T){this.persistence=u,this.auth=f,this.userKey=T;const{config:H,name:oe}=this.auth;this.fullUserKey=$t(this.userKey,H.apiKey,oe),this.fullPersistenceKey=$t("persistence",H.apiKey,oe),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,d.A)(function*(){const f=yield u.persistence._get(u.fullUserKey);return f?Re._fromJSON(u.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var f=this;return(0,d.A)(function*(){if(f.persistence===u)return;const T=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=u,T?f.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,f){return(0,d.A)(function*(T,H,oe="authUser"){if(!H.length)return new cr(kt(Gt),T,oe);const xe=(yield Promise.all(H.map(function(){var un=(0,d.A)(function*(ni){if(yield ni._isAvailable())return ni});return function(ni){return un.apply(this,arguments)}}()))).filter(un=>un);let We=xe[0]||kt(Gt);const bt=$t(oe,T.config.apiKey,T.name);let nn=null;for(const un of H)try{const ni=yield un._get(bt);if(ni){const Qo=Re._fromJSON(T,ni);un!==We&&(nn=Qo),We=un;break}}catch{}const Vn=xe.filter(un=>un._shouldAllowMigration);return We._shouldAllowMigration&&Vn.length?(We=Vn[0],nn&&(yield We._set(bt,nn.toJSON())),yield Promise.all(H.map(function(){var un=(0,d.A)(function*(ni){if(ni!==We)try{yield ni._remove(bt)}catch{}});return function(ni){return un.apply(this,arguments)}}())),new cr(We,T,oe)):new cr(We,T,oe)}).apply(this,arguments)}}function Xt(b){const u=b.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Nr(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(xi(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Ui(u))return"Blackberry";if(wi(u))return"Webos";if(Qn(u))return"Safari";if((u.includes("chrome/")||Ut(u))&&!u.includes("edge/"))return"Chrome";if(Li(u))return"Android";{const T=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function xi(b=(0,pe.ZQ)()){return/firefox\//i.test(b)}function Qn(b=(0,pe.ZQ)()){const u=b.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function Ut(b=(0,pe.ZQ)()){return/crios\//i.test(b)}function Nr(b=(0,pe.ZQ)()){return/iemobile/i.test(b)}function Li(b=(0,pe.ZQ)()){return/android/i.test(b)}function Ui(b=(0,pe.ZQ)()){return/blackberry/i.test(b)}function wi(b=(0,pe.ZQ)()){return/webos/i.test(b)}function Sn(b=(0,pe.ZQ)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function wt(b=(0,pe.ZQ)()){return Sn(b)||Li(b)||wi(b)||Ui(b)||/windows phone/i.test(b)||Nr(b)}function jt(b,u=[]){let f;switch(b){case"Browser":f=Xt((0,pe.ZQ)());break;case"Worker":f=`${Xt((0,pe.ZQ)())}-${b}`;break;default:f=b}const T=u.length?u.join(","):"FirebaseCore-web";return`${f}/JsCore/${Te.SDK_VERSION}/${T}`}class _n{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,f){const T=oe=>new Promise((xe,We)=>{try{xe(u(oe))}catch(bt){We(bt)}});T.onAbort=f,this.queue.push(T);const H=this.queue.length-1;return()=>{this.queue[H]=()=>Promise.resolve()}}runMiddleware(u){var f=this;return(0,d.A)(function*(){if(f.auth.currentUser===u)return;const T=[];try{for(const H of f.queue)yield H(u),H.onAbort&&T.push(H.onAbort)}catch(H){T.reverse();for(const oe of T)try{oe()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:H?.message})}})()}}function $n(){return($n=(0,d.A)(function*(b,u={}){return Ie(b,"GET","/v2/passwordPolicy",nt(b,u))})).apply(this,arguments)}class Ar{constructor(u){var f,T,H,oe;const xe=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=xe.minPasswordLength)&&void 0!==f?f:6,xe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=xe.maxPasswordLength),void 0!==xe.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=xe.containsLowercaseCharacter),void 0!==xe.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=xe.containsUppercaseCharacter),void 0!==xe.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=xe.containsNumericCharacter),void 0!==xe.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=xe.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(H=null===(T=u.allowedNonAlphanumericCharacters)||void 0===T?void 0:T.join(""))&&void 0!==H?H:"",this.forceUpgradeOnSignin=null!==(oe=u.forceUpgradeOnSignin)&&void 0!==oe&&oe,this.schemaVersion=u.schemaVersion}validatePassword(u){var f,T,H,oe,xe,We;const bt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,bt),this.validatePasswordCharacterOptions(u,bt),bt.isValid&&(bt.isValid=null===(f=bt.meetsMinPasswordLength)||void 0===f||f),bt.isValid&&(bt.isValid=null===(T=bt.meetsMaxPasswordLength)||void 0===T||T),bt.isValid&&(bt.isValid=null===(H=bt.containsLowercaseLetter)||void 0===H||H),bt.isValid&&(bt.isValid=null===(oe=bt.containsUppercaseLetter)||void 0===oe||oe),bt.isValid&&(bt.isValid=null===(xe=bt.containsNumericCharacter)||void 0===xe||xe),bt.isValid&&(bt.isValid=null===(We=bt.containsNonAlphanumericCharacter)||void 0===We||We),bt}validatePasswordLengthOptions(u,f){const T=this.customStrengthOptions.minPasswordLength,H=this.customStrengthOptions.maxPasswordLength;T&&(f.meetsMinPasswordLength=u.length>=T),H&&(f.meetsMaxPasswordLength=u.length<=H)}validatePasswordCharacterOptions(u,f){let T;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let H=0;H<u.length;H++)T=u.charAt(H),this.updatePasswordCharacterOptionsStatuses(f,T>="a"&&T<="z",T>="A"&&T<="Z",T>="0"&&T<="9",this.allowedNonAlphanumericCharacters.includes(T))}updatePasswordCharacterOptionsStatuses(u,f,T,H,oe){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=T)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=H)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=oe))}}class ze{constructor(u,f,T,H){this.app=u,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=T,this.config=H,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new di(this),this.idTokenSubscription=new di(this),this.beforeStateQueue=new _n(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=H.sdkClientVersion}_initializeWithPersistence(u,f){var T=this;return f&&(this._popupRedirectResolver=kt(f)),this._initializationPromise=this.queue((0,d.A)(function*(){var H,oe;if(!T._deleted&&(T.persistenceManager=yield cr.create(T,u),!T._deleted)){if(null!==(H=T._popupRedirectResolver)&&void 0!==H&&H._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(f),T.lastNotifiedUid=(null===(oe=T.currentUser)||void 0===oe?void 0:oe.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,d.A)(function*(){if(u._deleted)return;const f=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||f){if(u.currentUser&&f&&u.currentUser.uid===f.uid)return u._currentUser._assign(f),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(u){var f=this;return(0,d.A)(function*(){try{const T=yield rr(f,{idToken:u}),H=yield Re._fromGetAccountInfoResponse(f,T,u);yield f.directlySetCurrentUser(H)}catch(T){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",T),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var f=this;return(0,d.A)(function*(){var T;if((0,Te._isFirebaseServerApp)(f.app)){const We=f.app.settings.authIdToken;return We?new Promise(bt=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(We).then(bt,bt))}):f.directlySetCurrentUser(null)}const H=yield f.assertedPersistence.getCurrentUser();let oe=H,xe=!1;if(u&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const We=null===(T=f.redirectUser)||void 0===T?void 0:T._redirectEventId,bt=oe?._redirectEventId,nn=yield f.tryRedirectSignIn(u);(!We||We===bt)&&nn?.user&&(oe=nn.user,xe=!0)}if(!oe)return f.directlySetCurrentUser(null);if(!oe._redirectEventId){if(xe)try{yield f.beforeStateQueue.runMiddleware(oe)}catch(We){oe=H,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(We))}return oe?f.reloadAndSetCurrentUserOrClear(oe):f.directlySetCurrentUser(null)}return ut(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===oe._redirectEventId?f.directlySetCurrentUser(oe):f.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(u){var f=this;return(0,d.A)(function*(){let T=null;try{T=yield f._popupRedirectResolver._completeRedirectFn(f,u,!0)}catch{yield f._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(u){var f=this;return(0,d.A)(function*(){try{yield Tt(u)}catch(T){if("auth/network-request-failed"!==T?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Ln(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var u=this;return(0,d.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var f=this;return(0,d.A)(function*(){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(_t(f));const T=u?(0,pe.Ku)(u):null;return T&&ut(T.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(T&&T._clone(f))})()}_updateCurrentUser(u){var f=this;return(0,d.A)(function*(T,H=!1){if(!f._deleted)return T&&ut(f.tenantId===T.tenantId,f,"tenant-id-mismatch"),H||(yield f.beforeStateQueue.runMiddleware(T)),f.queue((0,d.A)(function*(){yield f.directlySetCurrentUser(T),f.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var u=this;return(0,d.A)(function*(){return(0,Te._isFirebaseServerApp)(u.app)?Promise.reject(_t(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var f=this;return(0,Te._isFirebaseServerApp)(this.app)?Promise.reject(_t(this)):this.queue((0,d.A)(function*(){yield f.assertedPersistence.setPersistence(kt(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var f=this;return(0,d.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const T=f._getPasswordPolicyInternal();return T.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):T.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,d.A)(function*(){const f=yield function Kn(b){return $n.apply(this,arguments)}(u),T=new Ar(f);null===u.tenantId?u._projectPasswordPolicy=T:u._tenantPasswordPolicies[u.tenantId]=T})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new pe.FA("auth","Firebase",u())}onAuthStateChanged(u,f,T){return this.registerStateListener(this.authStateSubscription,u,f,T)}beforeAuthStateChanged(u,f){return this.beforeStateQueue.pushCallback(u,f)}onIdTokenChanged(u,f,T){return this.registerStateListener(this.idTokenSubscription,u,f,T)}authStateReady(){return new Promise((u,f)=>{if(this.currentUser)u();else{const T=this.onAuthStateChanged(()=>{T(),u()},f)}})}revokeAccessToken(u){var f=this;return(0,d.A)(function*(){if(f.currentUser){const T=yield f.currentUser.getIdToken(),H={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:T};null!=f.tenantId&&(H.tenantId=f.tenantId),yield function ie(b,u){return q.apply(this,arguments)}(f,H)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,f){var T=this;return(0,d.A)(function*(){const H=yield T.getOrInitRedirectPersistenceManager(f);return null===u?H.removeCurrentUser():H.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var f=this;return(0,d.A)(function*(){if(!f.redirectPersistenceManager){const T=u&&kt(u)||f._popupRedirectResolver;ut(T,f,"argument-error"),f.redirectPersistenceManager=yield cr.create(f,[kt(T._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(u){var f=this;return(0,d.A)(function*(){var T,H;return f._isInitialized&&(yield f.queue((0,d.A)(function*(){}))),(null===(T=f._currentUser)||void 0===T?void 0:T._redirectEventId)===u?f._currentUser:(null===(H=f.redirectUser)||void 0===H?void 0:H._redirectEventId)===u?f.redirectUser:null})()}_persistUserIfCurrent(u){var f=this;return(0,d.A)(function*(){if(u===f.currentUser)return f.queue((0,d.A)(function*(){return f.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(f=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,f,T,H){if(this._deleted)return()=>{};const oe="function"==typeof f?f:f.next.bind(f);let xe=!1;const We=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(We,this,"internal-error"),We.then(()=>{xe||oe(this.currentUser)}),"function"==typeof f){const bt=u.addObserver(f,T,H);return()=>{xe=!0,bt()}}{const bt=u.addObserver(f);return()=>{xe=!0,bt()}}}directlySetCurrentUser(u){var f=this;return(0,d.A)(function*(){f.currentUser&&f.currentUser!==u&&f._currentUser._stopProactiveRefresh(),u&&f.isProactiveRefreshEnabled&&u._startProactiveRefresh(),f.currentUser=u,u?yield f.assertedPersistence.setCurrentUser(u):yield f.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=jt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,d.A)(function*(){var f;const T={"X-Client-Version":u.clientVersion};u.app.options.appId&&(T["X-Firebase-gmpid"]=u.app.options.appId);const H=yield null===(f=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();H&&(T["X-Firebase-Client"]=H);const oe=yield u._getAppCheckToken();return oe&&(T["X-Firebase-AppCheck"]=oe),T})()}_getAppCheckToken(){var u=this;return(0,d.A)(function*(){var f;const T=yield null===(f=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return T?.error&&function At(b,...u){an.logLevel<=ke.$b.WARN&&an.warn(`Auth (${Te.SDK_VERSION}): ${b}`,...u)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function Xn(b){return(0,pe.Ku)(b)}class di{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,pe.tD)(f=>this.observer=f)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rs={loadJS:()=>(0,d.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gs(b){return Rs.loadJS(b)}function Ms(b){return`__${b}${Math.floor(1e6*Math.random())}`}class fo{constructor(u){this.type="recaptcha-enterprise",this.auth=Xn(u)}verify(){var u=this;return(0,d.A)(function*(f="verify",T=!1){function oe(){return oe=(0,d.A)(function*(We){if(!T){if(null==We.tenantId&&null!=We._agentRecaptchaConfig)return We._agentRecaptchaConfig.siteKey;if(null!=We.tenantId&&void 0!==We._tenantRecaptchaConfigs[We.tenantId])return We._tenantRecaptchaConfigs[We.tenantId].siteKey}return new Promise(function(){var bt=(0,d.A)(function*(nn,Vn){Si(We,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(un=>{if(void 0!==un.recaptchaKey){const ni=new Or(un);return null==We.tenantId?We._agentRecaptchaConfig=ni:We._tenantRecaptchaConfigs[We.tenantId]=ni,nn(ni.siteKey)}Vn(new Error("recaptcha Enterprise site key undefined"))}).catch(un=>{Vn(un)})});return function(nn,Vn){return bt.apply(this,arguments)}}())}),oe.apply(this,arguments)}function xe(We,bt,nn){const Vn=window.grecaptcha;Sr(Vn)?Vn.enterprise.ready(()=>{Vn.enterprise.execute(We,{action:f}).then(un=>{bt(un)}).catch(()=>{bt("NO_RECAPTCHA")})}):nn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((We,bt)=>{(function H(We){return oe.apply(this,arguments)})(u.auth).then(nn=>{if(!T&&Sr(window.grecaptcha))xe(nn,We,bt);else{if(typeof window>"u")return void bt(new Error("RecaptchaVerifier is only supported in browser"));let Vn=function no(){return Rs.recaptchaEnterpriseScript}();0!==Vn.length&&(Vn+=nn),gs(Vn).then(()=>{xe(nn,We,bt)}).catch(un=>{bt(un)})}}).catch(nn=>{bt(nn)})})}).apply(this,arguments)}}function gi(b,u,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,d.A)(function*(b,u,f,T=!1){const H=new fo(b);let oe;try{oe=yield H.verify(f)}catch{oe=yield H.verify(f,!0)}const xe=Object.assign({},u);return Object.assign(xe,T?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(xe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(xe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),xe})).apply(this,arguments)}function Bs(b,u,f,T){return Ta.apply(this,arguments)}function Ta(){return Ta=(0,d.A)(function*(b,u,f,T){var H;if(null!==(H=b._getRecaptchaConfig())&&void 0!==H&&H.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const oe=yield gi(b,u,f,"getOobCode"===f);return T(b,oe)}return T(b,u).catch(function(){var oe=(0,d.A)(function*(xe){if("auth/missing-recaptcha-token"===xe.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const We=yield gi(b,u,f,"getOobCode"===f);return T(b,We)}return Promise.reject(xe)});return function(xe){return oe.apply(this,arguments)}}())}),Ta.apply(this,arguments)}function Fo(b){const u=b.indexOf(":");return u<0?"":b.substr(0,u+1)}function io(b){if(!b)return null;const u=Number(b);return isNaN(u)?null:u}class js{constructor(u,f){this.providerId=u,this.signInMethod=f}toJSON(){return Nn("not implemented")}_getIdTokenResponse(u){return Nn("not implemented")}_linkToIdToken(u,f){return Nn("not implemented")}_getReauthenticationResolver(u){return Nn("not implemented")}}function po(b,u){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:resetPassword",nt(b,u))})).apply(this,arguments)}function Wr(){return(Wr=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Xs(b,u){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function Ps(){return(Ps=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:update",nt(b,u))})).apply(this,arguments)}function Ii(b,u){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signInWithPassword",nt(b,u))})).apply(this,arguments)}function so(b,u){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:sendOobCode",nt(b,u))})).apply(this,arguments)}function In(){return(In=(0,d.A)(function*(b,u){return so(b,u)})).apply(this,arguments)}function gr(b,u){return _i.apply(this,arguments)}function _i(){return(_i=(0,d.A)(function*(b,u){return so(b,u)})).apply(this,arguments)}function jr(b,u){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.A)(function*(b,u){return so(b,u)})).apply(this,arguments)}function kr(){return(kr=(0,d.A)(function*(b,u){return so(b,u)})).apply(this,arguments)}function os(){return(os=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signInWithEmailLink",nt(b,u))})).apply(this,arguments)}function fs(){return(fs=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signInWithEmailLink",nt(b,u))})).apply(this,arguments)}class ys extends js{constructor(u,f,T,H=null){super("password",T),this._email=u,this._password=f,this._tenantId=H}static _fromEmailAndPassword(u,f){return new ys(u,f,"password")}static _fromEmailAndCode(u,f,T=null){return new ys(u,f,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const f="string"==typeof u?JSON.parse(u):u;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(u){var f=this;return(0,d.A)(function*(){switch(f.signInMethod){case"password":return Bs(u,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ii);case"emailLink":return function xr(b,u){return os.apply(this,arguments)}(u,{email:f._email,oobCode:f._password});default:qe(u,"internal-error")}})()}_linkToIdToken(u,f){var T=this;return(0,d.A)(function*(){switch(T.signInMethod){case"password":return Bs(u,{idToken:f,returnSecureToken:!0,email:T._email,password:T._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xs);case"emailLink":return function wn(b,u){return fs.apply(this,arguments)}(u,{idToken:f,email:T._email,oobCode:T._password});default:qe(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Wn(b,u){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signInWithIdp",nt(b,u))})).apply(this,arguments)}class Gn extends js{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const f=new Gn(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(f.idToken=u.idToken),u.accessToken&&(f.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(f.nonce=u.nonce),u.pendingToken&&(f.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(f.accessToken=u.oauthToken,f.secret=u.oauthTokenSecret):qe("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const f="string"==typeof u?JSON.parse(u):u,{providerId:T,signInMethod:H}=f,oe=(0,Pe.Tt)(f,["providerId","signInMethod"]);if(!T||!H)return null;const xe=new Gn(T,H);return xe.idToken=oe.idToken||void 0,xe.accessToken=oe.accessToken||void 0,xe.secret=oe.secret,xe.nonce=oe.nonce,xe.pendingToken=oe.pendingToken||null,xe}_getIdTokenResponse(u){return Wn(u,this.buildRequest())}_linkToIdToken(u,f){const T=this.buildRequest();return T.idToken=f,Wn(u,T)}_getReauthenticationResolver(u){const f=this.buildRequest();return f.autoCreate=!1,Wn(u,f)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),u.postBody=(0,pe.Am)(f)}return u}}function Wi(){return(Wi=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:sendVerificationCode",nt(b,u))})).apply(this,arguments)}function Pi(){return(Pi=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signInWithPhoneNumber",nt(b,u))})).apply(this,arguments)}function br(){return(br=(0,d.A)(function*(b,u){const f=yield dn(b,"POST","/v1/accounts:signInWithPhoneNumber",nt(b,u));if(f.temporaryProof)throw xn(b,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Ys={USER_NOT_FOUND:"user-not-found"};function Vr(){return(Vr=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signInWithPhoneNumber",nt(b,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Ys)})).apply(this,arguments)}class Gr extends js{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,f){return new Gr({verificationId:u,verificationCode:f})}static _fromTokenResponse(u,f){return new Gr({phoneNumber:u,temporaryProof:f})}_getIdTokenResponse(u){return function Gi(b,u){return Pi.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,f){return function ts(b,u){return br.apply(this,arguments)}(u,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function Fn(b,u){return Vr.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:f,verificationId:T,verificationCode:H}=this.params;return u&&f?{temporaryProof:u,phoneNumber:f}:{sessionInfo:T,code:H}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:f,verificationCode:T,phoneNumber:H,temporaryProof:oe}=u;return T||f||H||oe?new Gr({verificationId:f,verificationCode:T,phoneNumber:H,temporaryProof:oe}):null}}class oi{constructor(u){var f,T,H,oe,xe,We;const bt=(0,pe.I9)((0,pe.hp)(u)),nn=null!==(f=bt.apiKey)&&void 0!==f?f:null,Vn=null!==(T=bt.oobCode)&&void 0!==T?T:null,un=function Ti(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(H=bt.mode)&&void 0!==H?H:null);ut(nn&&Vn&&un,"argument-error"),this.apiKey=nn,this.operation=un,this.code=Vn,this.continueUrl=null!==(oe=bt.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(xe=bt.languageCode)&&void 0!==xe?xe:null,this.tenantId=null!==(We=bt.tenantId)&&void 0!==We?We:null}static parseLink(u){const f=function yi(b){const u=(0,pe.I9)((0,pe.hp)(b)).link,f=u?(0,pe.I9)((0,pe.hp)(u)).deep_link_id:null,T=(0,pe.I9)((0,pe.hp)(b)).deep_link_id;return(T?(0,pe.I9)((0,pe.hp)(T)).link:null)||T||f||u||b}(u);try{return new oi(f)}catch{return null}}}let Oi=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(f,T){return ys._fromEmailAndPassword(f,T)}static credentialWithLink(f,T){const H=oi.parseLink(T);return ut(H,"argument-error"),ys._fromEmailAndCode(f,H.code,H.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Cr{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Os extends Cr{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Mr extends Os{static credentialFromJSON(u){const f="string"==typeof u?JSON.parse(u):u;return ut("providerId"in f&&"signInMethod"in f,"argument-error"),Gn._fromParams(f)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return ut(u.idToken||u.accessToken,"argument-error"),Gn._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Mr.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Mr.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:f,oauthAccessToken:T,oauthTokenSecret:H,pendingToken:oe,nonce:xe,providerId:We}=u;if(!T&&!H&&!f&&!oe||!We)return null;try{return new Mr(We)._credential({idToken:f,accessToken:T,nonce:xe,pendingToken:oe})}catch{return null}}}let Pr=(()=>{class b extends Os{constructor(){super("facebook.com")}static credential(f){return Gn._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return b.credentialFromTaggedObject(f)}static credentialFromError(f){return b.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return b.credential(f.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),vs=(()=>{class b extends Os{constructor(){super("google.com"),this.addScope("profile")}static credential(f,T){return Gn._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:T})}static credentialFromResult(f){return b.credentialFromTaggedObject(f)}static credentialFromError(f){return b.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:T,oauthAccessToken:H}=f;if(!T&&!H)return null;try{return b.credential(T,H)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),vi=(()=>{class b extends Os{constructor(){super("github.com")}static credential(f){return Gn._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return b.credentialFromTaggedObject(f)}static credentialFromError(f){return b.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return b.credential(f.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class qi extends js{constructor(u,f){super(u,u),this.pendingToken=f}_getIdTokenResponse(u){return Wn(u,this.buildRequest())}_linkToIdToken(u,f){const T=this.buildRequest();return T.idToken=f,Wn(u,T)}_getReauthenticationResolver(u){const f=this.buildRequest();return f.autoCreate=!1,Wn(u,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const f="string"==typeof u?JSON.parse(u):u,{providerId:T,signInMethod:H,pendingToken:oe}=f;return T&&H&&oe&&T===H?new qi(T,oe):null}static _create(u,f){return new qi(u,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bs extends Cr{constructor(u){ut(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return bs.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return bs.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const f=qi.fromJSON(u);return ut(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:f,providerId:T}=u;if(!f||!T)return null;try{return qi._create(T,f)}catch{return null}}}let bi=(()=>{class b extends Os{constructor(){super("twitter.com")}static credential(f,T){return Gn._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:T})}static credentialFromResult(f){return b.credentialFromTaggedObject(f)}static credentialFromError(f){return b.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:T,oauthTokenSecret:H}=f;if(!T||!H)return null;try{return b.credential(T,H)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function go(b,u){return aa.apply(this,arguments)}function aa(){return(aa=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signUp",nt(b,u))})).apply(this,arguments)}class Qi{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,f,T){return(0,d.A)(function*(H,oe,xe,We=!1){const bt=yield Re._fromIdTokenResponse(H,xe,We),nn=Y(xe);return new Qi({user:bt,providerId:nn,_tokenResponse:xe,operationType:oe})}).apply(this,arguments)}static _forOperation(u,f,T){return(0,d.A)(function*(){yield u._updateTokensIfNecessary(T,!0);const H=Y(T);return new Qi({user:u,providerId:H,_tokenResponse:T,operationType:f})})()}}function Y(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function ue(){return(ue=(0,d.A)(function*(b){var u;if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const f=Xn(b);if(yield f._initializationPromise,null!==(u=f.currentUser)&&void 0!==u&&u.isAnonymous)return new Qi({user:f.currentUser,providerId:null,operationType:"signIn"});const T=yield go(f,{returnSecureToken:!0}),H=yield Qi._fromIdTokenResponse(f,"signIn",T,!0);return yield f._updateCurrentUser(H.user),H})).apply(this,arguments)}class ve extends pe.g{constructor(u,f,T,H){var oe;super(f.code,f.message),this.operationType=T,this.user=H,Object.setPrototypeOf(this,ve.prototype),this.customData={appName:u.name,tenantId:null!==(oe=u.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:f.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(u,f,T,H){return new ve(u,f,T,H)}}function je(b,u,f,T){return("reauthenticate"===u?f._getReauthenticationResolver(b):f._getIdTokenResponse(b)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?ve._fromErrorAndOperation(b,oe,u,T):oe})}function yt(b){return new Set(b.map(({providerId:u})=>u).filter(u=>!!u))}function z(){return z=(0,d.A)(function*(b,u){const f=(0,pe.Ku)(b);yield we(!0,f,u);const{providerUserInfo:T}=yield function Bn(b,u){return Br.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[u]}),H=yt(T||[]);return f.providerData=f.providerData.filter(oe=>H.has(oe.providerId)),H.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),z.apply(this,arguments)}function N(b,u){return ne.apply(this,arguments)}function ne(){return(ne=(0,d.A)(function*(b,u,f=!1){const T=yield Wt(b,u._linkToIdToken(b.auth,yield b.getIdToken()),f);return Qi._forOperation(b,"link",T)})).apply(this,arguments)}function we(b,u,f){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.A)(function*(b,u,f){yield Tt(u);const H=!1===b?"provider-already-linked":"no-such-provider";ut(yt(u.providerData).has(f)===b,u.auth,H)})).apply(this,arguments)}function sn(b,u){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.A)(function*(b,u,f=!1){const{auth:T}=b;if((0,Te._isFirebaseServerApp)(T.app))return Promise.reject(_t(T));const H="reauthenticate";try{const oe=yield Wt(b,je(T,H,u,b),f);ut(oe.idToken,T,"internal-error");const xe=Dn(oe.idToken);ut(xe,T,"internal-error");const{sub:We}=xe;return ut(b.uid===We,T,"user-mismatch"),Qi._forOperation(b,H,oe)}catch(oe){throw"auth/user-not-found"===oe?.code&&qe(T,"user-mismatch"),oe}})).apply(this,arguments)}function fr(b,u){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.A)(function*(b,u,f=!1){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const T="signIn",H=yield je(b,T,u),oe=yield Qi._fromIdTokenResponse(b,T,H);return f||(yield b._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function qr(b,u){return ai.apply(this,arguments)}function ai(){return(ai=(0,d.A)(function*(b,u){return fr(Xn(b),u)})).apply(this,arguments)}function Ni(b,u){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.A)(function*(b,u){const f=(0,pe.Ku)(b);return yield we(!1,f,u.providerId),N(f,u)})).apply(this,arguments)}function kn(b,u){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.A)(function*(b,u){return sn((0,pe.Ku)(b),u)})).apply(this,arguments)}function ki(){return(ki=(0,d.A)(function*(b,u){return dn(b,"POST","/v1/accounts:signInWithCustomToken",nt(b,u))})).apply(this,arguments)}function Lo(){return Lo=(0,d.A)(function*(b,u){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const f=Xn(b),T=yield function Xi(b,u){return ki.apply(this,arguments)}(f,{token:u,returnSecureToken:!0}),H=yield Qi._fromIdTokenResponse(f,"signIn",T);return yield f._updateCurrentUser(H.user),H}),Lo.apply(this,arguments)}class Co{constructor(u,f){this.factorId=u,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(u,f){return"phoneInfo"in f?Yo._fromServerResponse(u,f):"totpInfo"in f?Uo._fromServerResponse(u,f):qe(u,"internal-error")}}class Yo extends Co{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,f){return new Yo(f)}}class Uo extends Co{constructor(u){super("totp",u)}static _fromServerResponse(u,f){return new Uo(f)}}function Bo(b,u,f){var T;ut((null===(T=f.url)||void 0===T?void 0:T.length)>0,b,"invalid-continue-uri"),ut(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),u.continueUrl=f.url,u.dynamicLinkDomain=f.dynamicLinkDomain,u.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ut(f.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),u.iOSBundleId=f.iOS.bundleId),f.android&&(ut(f.android.packageName.length>0,b,"missing-android-pkg-name"),u.androidInstallApp=f.android.installApp,u.androidMinimumVersionCode=f.android.minimumVersion,u.androidPackageName=f.android.packageName)}function ca(b){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,d.A)(function*(b){const u=Xn(b);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function la(){return(la=(0,d.A)(function*(b,u,f){const T=Xn(b),H={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};f&&Bo(T,H,f),yield Bs(T,H,"getOobCode",gr)})).apply(this,arguments)}function ua(){return ua=(0,d.A)(function*(b,u,f){yield po((0,pe.Ku)(b),{oobCode:u,newPassword:f}).catch(function(){var T=(0,d.A)(function*(H){throw"auth/password-does-not-meet-requirements"===H.code&&ca(b),H});return function(H){return T.apply(this,arguments)}}())}),ua.apply(this,arguments)}function ha(){return ha=(0,d.A)(function*(b,u){yield function es(b,u){return Ps.apply(this,arguments)}((0,pe.Ku)(b),{oobCode:u})}),ha.apply(this,arguments)}function fa(b,u){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,d.A)(function*(b,u){const f=(0,pe.Ku)(b),T=yield po(f,{oobCode:u}),H=T.requestType;switch(ut(H,f,"internal-error"),H){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ut(T.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ut(T.mfaInfo,f,"internal-error");default:ut(T.email,f,"internal-error")}let oe=null;return T.mfaInfo&&(oe=Co._fromServerResponse(Xn(f),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:oe},operation:H}})).apply(this,arguments)}function Aa(){return(Aa=(0,d.A)(function*(b,u){const{data:f}=yield fa((0,pe.Ku)(b),u);return f.email})).apply(this,arguments)}function pa(){return(pa=(0,d.A)(function*(b,u,f){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const T=Xn(b),xe=yield Bs(T,{returnSecureToken:!0,email:u,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",go).catch(bt=>{throw"auth/password-does-not-meet-requirements"===bt.code&&ca(b),bt}),We=yield Qi._fromIdTokenResponse(T,"signIn",xe);return yield T._updateCurrentUser(We.user),We})).apply(this,arguments)}function _o(){return(_o=(0,d.A)(function*(b,u,f){const T=Xn(b),H={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function oe(xe,We){ut(We.handleCodeInApp,T,"argument-error"),We&&Bo(T,xe,We)})(H,f),yield Bs(T,H,"getOobCode",jr)})).apply(this,arguments)}function Cc(){return(Cc=(0,d.A)(function*(b,u,f){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const T=(0,pe.Ku)(b),H=Oi.credentialWithLink(u,f||er());return ut(H._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),qr(T,H)})).apply(this,arguments)}function Ho(){return(Ho=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:createAuthUri",nt(b,u))})).apply(this,arguments)}function te(){return te=(0,d.A)(function*(b,u){const T={identifier:u,continueUri:ui()?er():"http://localhost"},{signinMethods:H}=yield function Na(b,u){return Ho.apply(this,arguments)}((0,pe.Ku)(b),T);return H||[]}),te.apply(this,arguments)}function J(){return J=(0,d.A)(function*(b,u){const f=(0,pe.Ku)(b),H={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};u&&Bo(f.auth,H,u);const{email:oe}=yield function Qt(b,u){return In.apply(this,arguments)}(f.auth,H);oe!==b.email&&(yield b.reload())}),J.apply(this,arguments)}function ft(){return ft=(0,d.A)(function*(b,u,f){const T=(0,pe.Ku)(b),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:u};f&&Bo(T.auth,oe,f);const{email:xe}=yield function mo(b,u){return kr.apply(this,arguments)}(T.auth,oe);xe!==b.email&&(yield b.reload())}),ft.apply(this,arguments)}function cn(){return(cn=(0,d.A)(function*(b,u){return Ie(b,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ci(){return ci=(0,d.A)(function*(b,{displayName:u,photoURL:f}){if(void 0===u&&void 0===f)return;const T=(0,pe.Ku)(b),oe={idToken:yield T.getIdToken(),displayName:u,photoUrl:f,returnSecureToken:!0},xe=yield Wt(T,function Ct(b,u){return cn.apply(this,arguments)}(T.auth,oe));T.displayName=xe.displayName||null,T.photoURL=xe.photoUrl||null;const We=T.providerData.find(({providerId:bt})=>"password"===bt);We&&(We.displayName=T.displayName,We.photoURL=T.photoURL),yield T._updateTokensIfNecessary(xe)}),ci.apply(this,arguments)}function $r(b,u,f){return ur.apply(this,arguments)}function ur(){return ur=(0,d.A)(function*(b,u,f){const{auth:T}=b,oe={idToken:yield b.getIdToken(),returnSecureToken:!0};u&&(oe.email=u),f&&(oe.password=f);const xe=yield Wt(b,function Ei(b,u){return Wr.apply(this,arguments)}(T,oe));yield b._updateTokensIfNecessary(xe,!0)}),ur.apply(this,arguments)}class ns{constructor(u,f,T={}){this.isNewUser=u,this.providerId=f,this.profile=T}}class $i extends ns{constructor(u,f,T,H){super(u,f,T),this.username=H}}class ea extends ns{constructor(u,f){super(u,"facebook.com",f)}}class ji extends $i{constructor(u,f){super(u,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Do extends ns{constructor(u,f){super(u,"google.com",f)}}class Yi extends $i{constructor(u,f,T){super(u,"twitter.com",f,T)}}function ma(b){const{user:u,_tokenResponse:f}=b;return u.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Lr(b){var u,f;if(!b)return null;const{providerId:T}=b,H=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},oe=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!T&&b?.idToken){const xe=null===(f=null===(u=Dn(b.idToken))||void 0===u?void 0:u.firebase)||void 0===f?void 0:f.sign_in_provider;if(xe)return new ns(oe,"anonymous"!==xe&&"custom"!==xe?xe:null)}if(!T)return null;switch(T){case"facebook.com":return new ea(oe,H);case"github.com":return new ji(oe,H);case"google.com":return new Do(oe,H);case"twitter.com":return new Yi(oe,H,b.screenName||null);case"custom":case"anonymous":return new ns(oe,null);default:return new ns(oe,T,H)}}(f)}class co{constructor(u,f,T){this.type=u,this.credential=f,this.user=T}static _fromIdtoken(u,f){return new co("enroll",u,f)}static _fromMfaPendingCredential(u){return new co("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var f,T;if(u?.multiFactorSession){if(null!==(f=u.multiFactorSession)&&void 0!==f&&f.pendingCredential)return co._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(T=u.multiFactorSession)&&void 0!==T&&T.idToken)return co._fromIdtoken(u.multiFactorSession.idToken)}return null}}class ws{constructor(u,f,T){this.session=u,this.hints=f,this.signInResolver=T}static _fromError(u,f){const T=Xn(u),H=f.customData._serverResponse,oe=(H.mfaInfo||[]).map(We=>Co._fromServerResponse(T,We));ut(H.mfaPendingCredential,T,"internal-error");const xe=co._fromMfaPendingCredential(H.mfaPendingCredential);return new ws(xe,oe,function(){var We=(0,d.A)(function*(bt){const nn=yield bt._process(T,xe);delete H.mfaInfo,delete H.mfaPendingCredential;const Vn=Object.assign(Object.assign({},H),{idToken:nn.idToken,refreshToken:nn.refreshToken});switch(f.operationType){case"signIn":const un=yield Qi._fromIdTokenResponse(T,f.operationType,Vn);return yield T._updateCurrentUser(un.user),un;case"reauthenticate":return ut(f.user,T,"internal-error"),Qi._forOperation(f.user,f.operationType,Vn);default:qe(T,"internal-error")}});return function(bt){return We.apply(this,arguments)}}())}resolveSignIn(u){var f=this;return(0,d.A)(function*(){return f.signInResolver(u)})()}}class Rc{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(T=>Co._fromServerResponse(u.auth,T)))})}static _fromUser(u){return new Rc(u)}getSession(){var u=this;return(0,d.A)(function*(){return co._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,f){var T=this;return(0,d.A)(function*(){const H=u,oe=yield T.getSession(),xe=yield Wt(T.user,H._process(T.user.auth,oe,f));return yield T.user._updateTokensIfNecessary(xe),T.user.reload()})()}unenroll(u){var f=this;return(0,d.A)(function*(){const T="string"==typeof u?u:u.uid,H=yield f.user.getIdToken();try{const oe=yield Wt(f.user,function tl(b,u){return Ie(b,"POST","/v2/accounts/mfaEnrollment:withdraw",nt(b,u))}(f.user.auth,{idToken:H,mfaEnrollmentId:T}));f.enrolledFactors=f.enrolledFactors.filter(({uid:xe})=>xe!==T),yield f.user._updateTokensIfNecessary(oe),yield f.user.reload()}catch(oe){throw oe}})()}}const Ai=new WeakMap,La="__sak";class ac{constructor(u,f){this.storageRetriever=u,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(La,"1"),this.storage.removeItem(La),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,f){return this.storage.setItem(u,JSON.stringify(f)),Promise.resolve()}_get(u){const f=this.storage.getItem(u);return Promise.resolve(f?JSON.parse(f):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mc=(()=>{class b extends ac{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,T)=>this.onStorageEvent(f,T),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const T of Object.keys(this.listeners)){const H=this.storage.getItem(T),oe=this.localCache[T];H!==oe&&f(T,oe,H)}}onStorageEvent(f,T=!1){if(!f.key)return void this.forAllChangedKeys((We,bt,nn)=>{this.notifyListeners(We,nn)});const H=f.key;T?this.detachListener():this.stopPolling();const oe=()=>{const We=this.storage.getItem(H);!T&&this.localCache[H]===We||this.notifyListeners(H,We)},xe=this.storage.getItem(H);!function Ye(){return(0,pe.lT)()&&10===document.documentMode}()||xe===f.newValue||f.newValue===f.oldValue?oe():setTimeout(oe,10)}notifyListeners(f,T){this.localCache[f]=T;const H=this.listeners[f];if(H)for(const oe of Array.from(H))oe(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,T,H)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:T,newValue:H}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(T)}_removeListener(f,T){this.listeners[f]&&(this.listeners[f].delete(T),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,T){var H=()=>super._set,oe=this;return(0,d.A)(function*(){yield H().call(oe,f,T),oe.localCache[f]=JSON.stringify(T)})()}_get(f){var T=()=>super._get,H=this;return(0,d.A)(function*(){const oe=yield T().call(H,f);return H.localCache[f]=JSON.stringify(oe),oe})()}_remove(f){var T=()=>super._remove,H=this;return(0,d.A)(function*(){yield T().call(H,f),delete H.localCache[f]})()}}return b.type="LOCAL",b})(),Zs=(()=>{class b extends ac{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,T){}_removeListener(f,T){}}return b.type="SESSION",b})();let wr=(()=>{class b{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const T=this.receivers.find(oe=>oe.isListeningto(f));if(T)return T;const H=new b(f);return this.receivers.push(H),H}isListeningto(f){return this.eventTarget===f}handleEvent(f){var T=this;return(0,d.A)(function*(){const H=f,{eventId:oe,eventType:xe,data:We}=H.data,bt=T.handlersMap[xe];if(!bt?.size)return;H.ports[0].postMessage({status:"ack",eventId:oe,eventType:xe});const nn=Array.from(bt).map(function(){var un=(0,d.A)(function*(ni){return ni(H.origin,We)});return function(ni){return un.apply(this,arguments)}}()),Vn=yield function Ft(b){return Promise.all(b.map(function(){var u=(0,d.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(T){return{fulfilled:!1,reason:T}}});return function(f){return u.apply(this,arguments)}}()))}(nn);H.ports[0].postMessage({status:"done",eventId:oe,eventType:xe,response:Vn})})()}_subscribe(f,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(T)}_unsubscribe(f,T){this.handlersMap[f]&&T&&this.handlersMap[f].delete(T),(!T||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function $o(b="",u=10){let f="";for(let T=0;T<u;T++)f+=Math.floor(10*Math.random());return b+f}class zo{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,f){var T=this;return(0,d.A)(function*(H,oe,xe=50){const We=typeof MessageChannel<"u"?new MessageChannel:null;if(!We)throw new Error("connection_unavailable");let bt,nn;return new Promise((Vn,un)=>{const ni=$o("",20);We.port1.start();const Qo=setTimeout(()=>{un(new Error("unsupported_event"))},xe);nn={messageChannel:We,onMessage(Yl){const ba=Yl;if(ba.data.eventId===ni)switch(ba.data.status){case"ack":clearTimeout(Qo),bt=setTimeout(()=>{un(new Error("timeout"))},3e3);break;case"done":clearTimeout(bt),Vn(ba.data.response);break;default:clearTimeout(Qo),clearTimeout(bt),un(new Error("invalid_response"))}}},T.handlers.add(nn),We.port1.addEventListener("message",nn.onMessage),T.target.postMessage({eventType:H,eventId:ni,data:oe},[We.port2])}).finally(()=>{nn&&T.removeMessageHandler(nn)})}).apply(this,arguments)}}function pr(){return window}function So(){return typeof pr().WorkerGlobalScope<"u"&&"function"==typeof pr().importScripts}function Ba(){return(Ba=(0,d.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const g="firebaseLocalStorageDb",P="firebaseLocalStorage",Q="fbase_key";class se{constructor(u){this.request=u}toPromise(){return new Promise((u,f)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function ge(b,u){return b.transaction([P],u?"readwrite":"readonly").objectStore(P)}function A(){const b=indexedDB.open(g,1);return new Promise((u,f)=>{b.addEventListener("error",()=>{f(b.error)}),b.addEventListener("upgradeneeded",()=>{const T=b.result;try{T.createObjectStore(P,{keyPath:Q})}catch(H){f(H)}}),b.addEventListener("success",(0,d.A)(function*(){const T=b.result;T.objectStoreNames.contains(P)?u(T):(T.close(),yield function v(){const b=indexedDB.deleteDatabase(g);return new se(b).toPromise()}(),u(yield A()))}))})}function I(b,u,f){return M.apply(this,arguments)}function M(){return(M=(0,d.A)(function*(b,u,f){const T=ge(b,!0).put({[Q]:u,value:f});return new se(T).toPromise()})).apply(this,arguments)}function ee(){return(ee=(0,d.A)(function*(b,u){const f=ge(b,!1).get(u),T=yield new se(f).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function he(b,u){const f=ge(b,!0).delete(u);return new se(f).toPromise()}const ln=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,d.A)(function*(){return f.db||(f.db=yield A()),f.db})()}_withRetries(f){var T=this;return(0,d.A)(function*(){let H=0;for(;;)try{const oe=yield T._openDb();return yield f(oe)}catch(oe){if(H++>3)throw oe;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,d.A)(function*(){return So()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,d.A)(function*(){f.receiver=wr._getInstance(function j(){return So()?self:null}()),f.receiver._subscribe("keyChanged",function(){var T=(0,d.A)(function*(H,oe){return{keyProcessed:(yield f._poll()).includes(oe.key)}});return function(H,oe){return T.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var T=(0,d.A)(function*(H,oe){return["keyChanged"]});return function(H,oe){return T.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,d.A)(function*(){var T,H;if(f.activeServiceWorker=yield function Ro(){return Ba.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new zo(f.activeServiceWorker);const oe=yield f.sender._send("ping",{},800);oe&&null!==(T=oe[0])&&void 0!==T&&T.fulfilled&&null!==(H=oe[0])&&void 0!==H&&H.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var T=this;return(0,d.A)(function*(){if(T.sender&&T.activeServiceWorker&&function uc(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:f},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.A)(function*(){try{if(!indexedDB)return!1;const f=yield A();return yield I(f,La,"1"),yield he(f,La),!0}catch{}return!1})()}_withPendingWrite(f){var T=this;return(0,d.A)(function*(){T.pendingWrites++;try{yield f()}finally{T.pendingWrites--}})()}_set(f,T){var H=this;return(0,d.A)(function*(){return H._withPendingWrite((0,d.A)(function*(){return yield H._withRetries(oe=>I(oe,f,T)),H.localCache[f]=T,H.notifyServiceWorker(f)}))})()}_get(f){var T=this;return(0,d.A)(function*(){const H=yield T._withRetries(oe=>function V(b,u){return ee.apply(this,arguments)}(oe,f));return T.localCache[f]=H,H})()}_remove(f){var T=this;return(0,d.A)(function*(){return T._withPendingWrite((0,d.A)(function*(){return yield T._withRetries(H=>he(H,f)),delete T.localCache[f],T.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,d.A)(function*(){const T=yield f._withRetries(xe=>{const We=ge(xe,!1).getAll();return new se(We).toPromise()});if(!T)return[];if(0!==f.pendingWrites)return[];const H=[],oe=new Set;if(0!==T.length)for(const{fbase_key:xe,value:We}of T)oe.add(xe),JSON.stringify(f.localCache[xe])!==JSON.stringify(We)&&(f.notifyListeners(xe,We),H.push(xe));for(const xe of Object.keys(f.localCache))f.localCache[xe]&&!oe.has(xe)&&(f.notifyListeners(xe,null),H.push(xe));return H})()}notifyListeners(f,T){this.localCache[f]=T;const H=this.listeners[f];if(H)for(const oe of Array.from(H))oe(T)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,d.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(T)}_removeListener(f,T){this.listeners[f]&&(this.listeners[f].delete(T),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})(),zi=1e12;class ks{constructor(u){this.auth=u,this.counter=zi,this._widgets=new Map}render(u,f){const T=this.counter;return this._widgets.set(T,new uo(u,this.auth.name,f||{})),this.counter++,T}reset(u){var f;const T=u||zi;null===(f=this._widgets.get(T))||void 0===f||f.delete(),this._widgets.delete(T)}getResponse(u){var f;return(null===(f=this._widgets.get(u||zi))||void 0===f?void 0:f.getResponse())||""}execute(u){var f=this;return(0,d.A)(function*(){var T;return null===(T=f._widgets.get(u||zi))||void 0===T||T.execute(),""})()}}class uo{constructor(u,f,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const H="string"==typeof u?document.getElementById(u):u;ut(H,"argument-error",{appName:f}),this.container=H,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Zi(b){const u=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<b;T++)u.push(f.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":f}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Da=Ms("rcb"),sr=new En(3e4,6e4);class Sa{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=pr().grecaptcha)||void 0===u||!u.render)}load(u,f=""){return ut(function xo(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(f),u,"argument-error"),this.shouldResolveImmediately(f)&&dr(pr().grecaptcha)?Promise.resolve(pr().grecaptcha):new Promise((T,H)=>{const oe=pr().setTimeout(()=>{H(Me(u,"network-request-failed"))},sr.get());pr()[Da]=()=>{pr().clearTimeout(oe),delete pr()[Da];const We=pr().grecaptcha;if(!We||!dr(We))return void H(Me(u,"internal-error"));const bt=We.render;We.render=(nn,Vn)=>{const un=bt(nn,Vn);return this.counter++,un},this.hostLanguage=f,T(We)},gs(`${function Kr(){return Rs.recaptchaV2Script}()}?${(0,pe.Am)({onload:Da,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(oe),H(Me(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var f;return!(null===(f=pr().grecaptcha)||void 0===f||!f.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class uu{load(u){return(0,d.A)(function*(){return new ks(u)})()}clearedOneInstance(){}}const vn="recaptcha",Tn={theme:"light",type:"image"};class tr{constructor(u,f,T=Object.assign({},Tn)){this.parameters=T,this.type=vn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(u),this.isInvisible="invisible"===this.parameters.size,ut(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const H="string"==typeof f?document.getElementById(f):f;ut(H,this.auth,"argument-error"),this.container=H,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uu:new Sa,this.validateStartingState()}verify(){var u=this;return(0,d.A)(function*(){u.assertNotDestroyed();const f=yield u.render(),T=u.getAssertedRecaptcha();return T.getResponse(f)||new Promise(oe=>{const xe=We=>{We&&(u.tokenChangeListeners.delete(xe),oe(We))};u.tokenChangeListeners.add(xe),u.isInvisible&&T.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){ut(!this.parameters.sitekey,this.auth,"argument-error"),ut(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ut(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return f=>{if(this.tokenChangeListeners.forEach(T=>T(f)),"function"==typeof u)u(f);else if("string"==typeof u){const T=pr()[u];"function"==typeof T&&T(f)}}}assertNotDestroyed(){ut(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,d.A)(function*(){if(yield u.init(),!u.widgetId){let f=u.container;if(!u.isInvisible){const T=document.createElement("div");f.appendChild(T),f=T}u.widgetId=u.getAssertedRecaptcha().render(f,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,d.A)(function*(){ut(ui()&&!So(),u.auth,"internal-error"),yield function Ur(){let b=null;return new Promise(u=>{"complete"!==document.readyState?(b=()=>u(),window.addEventListener("load",b)):u()}).catch(u=>{throw b&&window.removeEventListener("load",b),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const f=yield function or(b){return ri.apply(this,arguments)}(u.auth);ut(f,u.auth,"internal-error"),u.parameters.sitekey=f})()}getAssertedRecaptcha(){return ut(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ci{constructor(u,f){this.verificationId=u,this.onConfirmation=f}confirm(u){const f=Gr._fromVerification(this.verificationId,u);return this.onConfirmation(f)}}function cs(){return(cs=(0,d.A)(function*(b,u,f){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const T=Xn(b),H=yield rs(T,u,(0,pe.Ku)(f));return new Ci(H,oe=>qr(T,oe))})).apply(this,arguments)}function Di(){return(Di=(0,d.A)(function*(b,u,f){const T=(0,pe.Ku)(b);yield we(!1,T,"phone");const H=yield rs(T.auth,u,(0,pe.Ku)(f));return new Ci(H,oe=>Ni(T,oe))})).apply(this,arguments)}function Za(){return(Za=(0,d.A)(function*(b,u,f){const T=(0,pe.Ku)(b);if((0,Te._isFirebaseServerApp)(T.auth.app))return Promise.reject(_t(T.auth));const H=yield rs(T.auth,u,(0,pe.Ku)(f));return new Ci(H,oe=>kn(T,oe))})).apply(this,arguments)}function rs(b,u,f){return ja.apply(this,arguments)}function ja(){return ja=(0,d.A)(function*(b,u,f){var T;const H=yield f.verify();try{let oe;if(ut("string"==typeof H,b,"argument-error"),ut(f.type===vn,b,"argument-error"),oe="string"==typeof u?{phoneNumber:u}:u,"session"in oe){const xe=oe.session;if("phoneNumber"in oe)return ut("enroll"===xe.type,b,"internal-error"),(yield function Fa(b,u){return Ie(b,"POST","/v2/accounts/mfaEnrollment:start",nt(b,u))}(b,{idToken:xe.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:H}})).phoneSessionInfo.sessionInfo;{ut("signin"===xe.type,b,"internal-error");const We=(null===(T=oe.multiFactorHint)||void 0===T?void 0:T.uid)||oe.multiFactorUid;return ut(We,b,"missing-multi-factor-info"),(yield function nr(b,u){return Ie(b,"POST","/v2/accounts/mfaSignIn:start",nt(b,u))}(b,{mfaPendingCredential:xe.credential,mfaEnrollmentId:We,phoneSignInInfo:{recaptchaToken:H}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:xe}=yield function Bi(b,u){return Wi.apply(this,arguments)}(b,{phoneNumber:oe.phoneNumber,recaptchaToken:H});return xe}}finally{f._reset()}}),ja.apply(this,arguments)}function Ko(){return(Ko=(0,d.A)(function*(b,u){const f=(0,pe.Ku)(b);if((0,Te._isFirebaseServerApp)(f.auth.app))return Promise.reject(_t(f.auth));yield N(f,u)})).apply(this,arguments)}let Ra=(()=>{class b{constructor(f){this.providerId=b.PROVIDER_ID,this.auth=Xn(f)}verifyPhoneNumber(f,T){return rs(this.auth,f,(0,pe.Ku)(T))}static credential(f,T){return Gr._fromVerification(f,T)}static credentialFromResult(f){return b.credentialFromTaggedObject(f)}static credentialFromError(f){return b.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:T,temporaryProof:H}=f;return T&&H?Gr._fromTokenResponse(T,H):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function nl(b,u){return u?kt(u):(ut(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class rl extends js{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Wn(u,this._buildIdpRequest())}_linkToIdToken(u,f){return Wn(u,this._buildIdpRequest(f))}_getReauthenticationResolver(u){return Wn(u,this._buildIdpRequest())}_buildIdpRequest(u){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(f.idToken=u),f}}function tp(b){return fr(b.auth,new rl(b),b.bypassAuthState)}function jd(b){const{auth:u,user:f}=b;return ut(f,u,"internal-error"),sn(f,new rl(b),b.bypassAuthState)}function qh(b){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,d.A)(function*(b){const{auth:u,user:f}=b;return ut(f,u,"internal-error"),N(f,new rl(b),b.bypassAuthState)})).apply(this,arguments)}class Wo{constructor(u,f,T,H,oe=!1){this.auth=u,this.resolver=T,this.user=H,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var u=this;return new Promise(function(){var f=(0,d.A)(function*(T,H){u.pendingPromise={resolve:T,reject:H};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(oe){u.reject(oe)}});return function(T,H){return f.apply(this,arguments)}}())}onAuthEvent(u){var f=this;return(0,d.A)(function*(){const{urlResponse:T,sessionId:H,postBody:oe,tenantId:xe,error:We,type:bt}=u;if(We)return void f.reject(We);const nn={auth:f.auth,requestUri:T,sessionId:H,tenantId:xe||void 0,postBody:oe||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(bt)(nn))}catch(Vn){f.reject(Vn)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return tp;case"linkViaPopup":case"linkViaRedirect":return qh;case"reauthViaPopup":case"reauthViaRedirect":return jd;default:qe(this.auth,"internal-error")}}resolve(u){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hc=new En(2e3,1e4);function zu(){return(zu=(0,d.A)(function*(b,u,f){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(Me(b,"operation-not-supported-in-this-environment"));const T=Xn(b);Ht(b,u,Cr);const H=nl(T,f);return new Ml(T,"signInViaPopup",u,H).executeNotNull()})).apply(this,arguments)}function Oo(){return(Oo=(0,d.A)(function*(b,u,f){const T=(0,pe.Ku)(b);if((0,Te._isFirebaseServerApp)(T.auth.app))return Promise.reject(Me(T.auth,"operation-not-supported-in-this-environment"));Ht(T.auth,u,Cr);const H=nl(T.auth,f);return new Ml(T.auth,"reauthViaPopup",u,H,T).executeNotNull()})).apply(this,arguments)}function $d(){return($d=(0,d.A)(function*(b,u,f){const T=(0,pe.Ku)(b);Ht(T.auth,u,Cr);const H=nl(T.auth,f);return new Ml(T.auth,"linkViaPopup",u,H,T).executeNotNull()})).apply(this,arguments)}let Ml=(()=>{class b extends Wo{constructor(f,T,H,oe,xe){super(f,T,oe,xe),this.provider=H,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var f=this;return(0,d.A)(function*(){const T=yield f.execute();return ut(T,f.auth,"internal-error"),T})()}onExecution(){var f=this;return(0,d.A)(function*(){_r(1===f.filter.length,"Popup operations only handle one event");const T=$o();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],T),f.authWindow.associatedEvent=T,f.resolver._originValidation(f.auth).catch(H=>{f.reject(H)}),f.resolver._isIframeWebStorageSupported(f.auth,H=>{H||f.reject(Me(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const f=()=>{var T,H;this.pollId=null!==(H=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==H&&H.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,hc.get())};f()}}return b.currentPopupAction=null,b})();const Pl="pendingRedirect",_a=new Map;class Fs extends Wo{constructor(u,f,T=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,T),this.eventId=null}execute(){var u=()=>super.execute,f=this;return(0,d.A)(function*(){let T=_a.get(f.auth._key());if(!T){try{const oe=(yield function Pc(b,u){return xa.apply(this,arguments)}(f.resolver,f.auth))?yield u().call(f):null;T=()=>Promise.resolve(oe)}catch(H){T=()=>Promise.reject(H)}_a.set(f.auth._key(),T)}return f.bypassAuthState||_a.set(f.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(u){var f=()=>super.onAuthEvent,T=this;return(0,d.A)(function*(){if("signInViaRedirect"===u.type)return f().call(T,u);if("unknown"!==u.type){if(u.eventId){const H=yield T.auth._redirectUserForId(u.eventId);if(H)return T.user=H,f().call(T,u);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,d.A)(function*(){})()}cleanUp(){}}function xa(){return(xa=(0,d.A)(function*(b,u){const f=ul(u),T=Nl(b);if(!(yield T._isAvailable()))return!1;const H="true"===(yield T._get(f));return yield T._remove(f),H})).apply(this,arguments)}function al(b,u){return cl.apply(this,arguments)}function cl(){return(cl=(0,d.A)(function*(b,u){return Nl(b)._set(ul(u),"true")})).apply(this,arguments)}function ll(b,u){_a.set(b._key(),u)}function Nl(b){return kt(b._redirectPersistence)}function ul(b){return $t(Pl,b.config.apiKey,b.name)}function du(b,u,f){return function Ku(b,u,f){return dl.apply(this,arguments)}(b,u,f)}function dl(){return(dl=(0,d.A)(function*(b,u,f){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const T=Xn(b);Ht(b,u,Cr),yield T._initializationPromise;const H=nl(T,f);return yield al(H,T),H._openRedirect(T,u,"signInViaRedirect")})).apply(this,arguments)}function kl(b,u,f){return function hu(b,u,f){return Js.apply(this,arguments)}(b,u,f)}function Js(){return(Js=(0,d.A)(function*(b,u,f){const T=(0,pe.Ku)(b);if(Ht(T.auth,u,Cr),(0,Te._isFirebaseServerApp)(T.auth.app))return Promise.reject(_t(T.auth));yield T.auth._initializationPromise;const H=nl(T.auth,f);yield al(H,T.auth);const oe=yield $a(T);return H._openRedirect(T.auth,u,"reauthViaRedirect",oe)})).apply(this,arguments)}function Qh(b,u,f){return function Wu(b,u,f){return fu.apply(this,arguments)}(b,u,f)}function fu(){return(fu=(0,d.A)(function*(b,u,f){const T=(0,pe.Ku)(b);Ht(T.auth,u,Cr),yield T.auth._initializationPromise;const H=nl(T.auth,f);yield we(!1,T,u.providerId),yield al(H,T.auth);const oe=yield $a(T);return H._openRedirect(T.auth,u,"linkViaRedirect",oe)})).apply(this,arguments)}function Gu(){return(Gu=(0,d.A)(function*(b,u){return yield Xn(b)._initializationPromise,ms(b,u,!1)})).apply(this,arguments)}function ms(b,u){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,d.A)(function*(b,u,f=!1){if((0,Te._isFirebaseServerApp)(b.app))return Promise.reject(_t(b));const T=Xn(b),H=nl(T,u),xe=yield new Fs(T,H,f).execute();return xe&&!f&&(delete xe.user._redirectEventId,yield T._persistUserIfCurrent(xe.user),yield T._setRedirectUser(null,u)),xe})).apply(this,arguments)}function $a(b){return hl.apply(this,arguments)}function hl(){return(hl=(0,d.A)(function*(b){const u=$o(`${b.uid}:::`);return b._redirectEventId=u,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),u})).apply(this,arguments)}class Qu{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let f=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(u,T)&&(f=!0,this.sendToConsumer(u,T),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Oc(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fc(b);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=u,f=!0)),f}sendToConsumer(u,f){var T;if(u.error&&!fc(u)){const H=(null===(T=u.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";f.onError(Me(this.auth,H))}else f.onAuthEvent(u)}isEventForConsumer(u,f){const T=null===f.eventId||!!u.eventId&&u.eventId===f.eventId;return f.filter.includes(u.type)&&T}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xu(u))}saveEventToCache(u){this.cachedEventUids.add(Xu(u)),this.lastProcessedEventTime=Date.now()}}function Xu(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(u=>u).join("-")}function fc({type:b,error:u}){return"unknown"===b&&"auth/no-auth-event"===u?.code}function Nc(b){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,d.A)(function*(b,u={}){return Ie(b,"GET","/v1/projects",u)})).apply(this,arguments)}const Vl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kc=/^https?/;function Yu(){return(Yu=(0,d.A)(function*(b){if(b.config.emulator)return;const{authorizedDomains:u}=yield Nc(b);for(const f of u)try{if(Zu(f))return}catch{}qe(b,"unauthorized-domain")})).apply(this,arguments)}function Zu(b){const u=er(),{protocol:f,hostname:T}=new URL(u);if(b.startsWith("chrome-extension://")){const xe=new URL(b);return""===xe.hostname&&""===T?"chrome-extension:"===f&&b.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===f&&xe.hostname===T}if(!kc.test(f))return!1;if(Vl.test(b))return T===b;const H=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+H+"|"+H+")$","i").test(T)}const Kd=new En(3e4,6e4);function np(){const b=pr().___jsl;if(b?.H)for(const u of Object.keys(b.H))if(b.H[u].r=b.H[u].r||[],b.H[u].L=b.H[u].L||[],b.H[u].r=[...b.H[u].L],b.CP)for(let f=0;f<b.CP.length;f++)b.CP[f]=null}let Fc=null;const za=new En(5e3,15e3),Xh="__/auth/iframe",Yh="emulator/auth/iframe",fi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ed=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ja(b){const u=b.config;ut(u.authDomain,b,"auth-domain-config-required");const f=u.emulator?ir(u,Yh):`https://${b.config.authDomain}/${Xh}`,T={apiKey:u.apiKey,appName:b.name,v:Te.SDK_VERSION},H=ed.get(b.config.apiHost);H&&(T.eid=H);const oe=b._getFrameworks();return oe.length&&(T.fw=oe.join(",")),`${f}?${(0,pe.Am)(T).slice(1)}`}function vo(){return vo=(0,d.A)(function*(b){const u=yield function Ju(b){return Fc=Fc||function rp(b){return new Promise((u,f)=>{var T,H,oe;function xe(){np(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{np(),f(Me(b,"network-request-failed"))},timeout:Kd.get()})}if(null!==(H=null===(T=pr().gapi)||void 0===T?void 0:T.iframes)&&void 0!==H&&H.Iframe)u(gapi.iframes.getContext());else{if(null===(oe=pr().gapi)||void 0===oe||!oe.load){const We=Ms("iframefcb");return pr()[We]=()=>{gapi.load?xe():f(Me(b,"network-request-failed"))},gs(`${function ii(){return Rs.gapiScript}()}?onload=${We}`).catch(bt=>f(bt))}xe()}}).catch(u=>{throw Fc=null,u})}(b),Fc}(b),f=pr().gapi;return ut(f,b,"internal-error"),u.open({where:document.body,url:Ja(b),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fi,dontclear:!0},T=>new Promise(function(){var H=(0,d.A)(function*(oe,xe){yield T.restyle({setHideOnLeave:!1});const We=Me(b,"network-request-failed"),bt=pr().setTimeout(()=>{xe(We)},za.get());function nn(){pr().clearTimeout(bt),oe(T)}T.ping(nn).then(nn,()=>{xe(We)})});return function(oe,xe){return H.apply(this,arguments)}}()))}),vo.apply(this,arguments)}const na={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vc{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const No="__/auth/handler",Gd="emulator/auth/handler",pl=encodeURIComponent("fac");function qd(b,u,f,T,H,oe){return gu.apply(this,arguments)}function gu(){return(gu=(0,d.A)(function*(b,u,f,T,H,oe){ut(b.config.authDomain,b,"auth-domain-config-required"),ut(b.config.apiKey,b,"invalid-api-key");const xe={apiKey:b.config.apiKey,appName:b.name,authType:f,redirectUrl:T,v:Te.SDK_VERSION,eventId:H};if(u instanceof Cr){u.setDefaultLanguage(b.languageCode),xe.providerId=u.providerId||"",(0,pe.Im)(u.getCustomParameters())||(xe.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Vn,un]of Object.entries(oe||{}))xe[Vn]=un}if(u instanceof Os){const Vn=u.getScopes().filter(un=>""!==un);Vn.length>0&&(xe.scopes=Vn.join(","))}b.tenantId&&(xe.tid=b.tenantId);const We=xe;for(const Vn of Object.keys(We))void 0===We[Vn]&&delete We[Vn];const bt=yield b._getAppCheckToken(),nn=bt?`#${pl}=${encodeURIComponent(bt)}`:"";return`${function ip({config:b}){return b.emulator?ir(b,Gd):`https://${b.authDomain}/${No}`}(b)}?${(0,pe.Am)(We).slice(1)}${nn}`})).apply(this,arguments)}const Uc="webStorageSupport",Xd=class Qd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zs,this._completeRedirectFn=ms,this._overrideRedirectResult=ll}_openPopup(u,f,T,H){var oe=this;return(0,d.A)(function*(){var xe;_r(null===(xe=oe.eventManagers[u._key()])||void 0===xe?void 0:xe.manager,"_initialize() not called before _openPopup()");const We=yield qd(u,f,T,er(),H);return function Wd(b,u,f,T=500,H=600){const oe=Math.max((window.screen.availHeight-H)/2,0).toString(),xe=Math.max((window.screen.availWidth-T)/2,0).toString();let We="";const bt=Object.assign(Object.assign({},na),{width:T.toString(),height:H.toString(),top:oe,left:xe}),nn=(0,pe.ZQ)().toLowerCase();f&&(We=Ut(nn)?"_blank":f),xi(nn)&&(u=u||"http://localhost",bt.scrollbars="yes");const Vn=Object.entries(bt).reduce((ni,[Qo,Yl])=>`${ni}${Qo}=${Yl},`,"");if(function Xe(b=(0,pe.ZQ)()){var u;return Sn(b)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(nn)&&"_self"!==We)return function Lc(b,u){const f=document.createElement("a");f.href=b,f.target=u;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(T)}(u||"",We),new Vc(null);const un=window.open(u||"",We,Vn);ut(un,b,"popup-blocked");try{un.focus()}catch{}return new Vc(un)}(u,We,$o())})()}_openRedirect(u,f,T,H){var oe=this;return(0,d.A)(function*(){return yield oe._originValidation(u),function lc(b){pr().location.href=b}(yield qd(u,f,T,er(),H)),new Promise(()=>{})})()}_initialize(u){const f=u._key();if(this.eventManagers[f]){const{manager:H,promise:oe}=this.eventManagers[f];return H?Promise.resolve(H):(_r(oe,"If manager is not set, promise should be"),oe)}const T=this.initAndGetManager(u);return this.eventManagers[f]={promise:T},T.catch(()=>{delete this.eventManagers[f]}),T}initAndGetManager(u){var f=this;return(0,d.A)(function*(){const T=yield function mu(b){return vo.apply(this,arguments)}(u),H=new Qu(u);return T.register("authEvent",oe=>(ut(oe?.authEvent,u,"invalid-auth-event"),{status:H.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[u._key()]={manager:H},f.iframes[u._key()]=T,H})()}_isIframeWebStorageSupported(u,f){this.iframes[u._key()].send(Uc,{type:Uc},H=>{var oe;const xe=null===(oe=H?.[0])||void 0===oe?void 0:oe[Uc];void 0!==xe&&f(!!xe),qe(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const f=u._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function zd(b){return Yu.apply(this,arguments)}(u)),this.originValidationPromises[f]}get _shouldInitProactively(){return wt()||Qn()||Sn()}};class _u{constructor(u){this.factorId=u}_process(u,f,T){switch(f.type){case"enroll":return this._finalizeEnroll(u,f.credential,T);case"signin":return this._finalizeSignIn(u,f.credential);default:return Nn("unexpected MultiFactorSessionType")}}}class nd extends _u{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new nd(u)}_finalizeEnroll(u,f,T){return function Sc(b,u){return Ie(b,"POST","/v2/accounts/mfaEnrollment:finalize",nt(b,u))}(u,{idToken:f,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,f){return function yn(b,u){return Ie(b,"POST","/v2/accounts/mfaSignIn:finalize",nt(b,u))}(u,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ul=(()=>{class b{constructor(){}static assertion(f){return nd._fromCredential(f)}}return b.FACTOR_ID="phone",b})();var gl="@firebase/auth";class Zh{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var f=this;return(0,d.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const f=this.auth.onIdTokenChanged(T=>{u(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,f),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const f=this.internalListeners.get(u);f&&(this.internalListeners.delete(u),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jc(){return window}(0,pe.XA)("authIdTokenMaxAge"),function xs(b){Rs=b}({loadJS:b=>new Promise((u,f)=>{const T=document.createElement("script");T.setAttribute("src",b),T.onload=u,T.onerror=H=>{const oe=Me("internal-error");oe.customData=H,f(oe)},T.type="text/javascript",T.charset="UTF-8",function sp(){var b,u;return null!==(u=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==u?u:document}().appendChild(T)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function vu(b){(0,Te._registerComponent)(new _e.uA("auth",(u,{options:f})=>{const T=u.getProvider("app").getImmediate(),H=u.getProvider("heartbeat"),oe=u.getProvider("app-check-internal"),{apiKey:xe,authDomain:We}=T.options;ut(xe&&!xe.includes(":"),"invalid-api-key",{appName:T.name});const bt={apiKey:xe,authDomain:We,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jt(b)},nn=new ze(T,H,oe,bt);return function _s(b,u){const f=u?.persistence||[],T=(Array.isArray(f)?f:[f]).map(kt);u?.errorMap&&b._updateErrorMap(u.errorMap),b._initializeWithPersistence(T,u?.popupRedirectResolver)}(nn,f),nn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,f,T)=>{u.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new _e.uA("auth-internal",u=>{const f=Xn(u.getProvider("auth").getImmediate());return new Zh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(gl,"1.7.9",function yu(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(b)),(0,Te.registerVersion)(gl,"1.7.9","esm2017")}("Browser");function Hl(){return Hl=(0,d.A)(function*(b,u,f){var T;const{BuildInfo:H}=jc();_r(u.sessionId,"AuthEvent did not contain a session ID");const oe=yield function $l(b){return Hc.apply(this,arguments)}(u.sessionId),xe={};return Sn()?xe.ibi=H.packageName:Li()?xe.apn=H.packageName:qe(b,"operation-not-supported-in-this-environment"),H.displayName&&(xe.appDisplayName=H.displayName),xe.sessionId=oe,qd(b,f,u.type,void 0,null!==(T=u.eventId)&&void 0!==T?T:void 0,xe)}),Hl.apply(this,arguments)}function wu(){return(wu=(0,d.A)(function*(b){const{BuildInfo:u}=jc(),f={};Sn()?f.iosBundleId=u.packageName:Li()?f.androidPackageName=u.packageName:qe(b,"operation-not-supported-in-this-environment"),yield Nc(b,f)})).apply(this,arguments)}function pc(){return(pc=(0,d.A)(function*(b,u,f){const{cordova:T}=jc();let H=()=>{};try{yield new Promise((oe,xe)=>{let We=null;function bt(){var un;oe();const ni=null===(un=T.plugins.browsertab)||void 0===un?void 0:un.close;"function"==typeof ni&&ni(),"function"==typeof f?.close&&f.close()}function nn(){We||(We=window.setTimeout(()=>{xe(Me(b,"redirect-cancelled-by-user"))},2e3))}function Vn(){"visible"===document?.visibilityState&&nn()}u.addPassiveListener(bt),document.addEventListener("resume",nn,!1),Li()&&document.addEventListener("visibilitychange",Vn,!1),H=()=>{u.removePassiveListener(bt),document.removeEventListener("resume",nn,!1),document.removeEventListener("visibilitychange",Vn,!1),We&&window.clearTimeout(We)}})}finally{H()}})).apply(this,arguments)}function Hc(){return(Hc=(0,d.A)(function*(b){const u=function Jd(b){if(_r(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const u=new ArrayBuffer(b.length),f=new Uint8Array(u);for(let T=0;T<b.length;T++)f[T]=b.charCodeAt(T);return f}(b),f=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(f)).map(H=>H.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ef extends Qu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(f=>f(u)),super.onEvent(u)}initialized(){var u=this;return(0,d.A)(function*(){yield u.initPromise})()}}function id(b){return th.apply(this,arguments)}function th(){return(th=(0,d.A)(function*(b){const u=yield sd()._get(od(b));return u&&(yield sd()._remove(od(b))),u})).apply(this,arguments)}function tf(){const b=[];for(let f=0;f<20;f++){const T=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(T))}return b.join("")}function sd(){return kt(Mc)}function od(b){return $t("authEvent",b.config.apiKey,b.name)}function U(b){if(!b?.includes("?"))return{};const[u,...f]=b.split("?");return(0,pe.I9)(f.join("?"))}const S=class y{constructor(){this._redirectPersistence=Zs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ms,this._overrideRedirectResult=ll}_initialize(u){var f=this;return(0,d.A)(function*(){const T=u._key();let H=f.eventManagers.get(T);return H||(H=new ef(u),f.eventManagers.set(T,H),f.attachCallbackListeners(u,H)),H})()}_openPopup(u){qe(u,"operation-not-supported-in-this-environment")}_openRedirect(u,f,T,H){var oe=this;return(0,d.A)(function*(){!function yl(b){var u,f,T,H,oe,xe,We,bt,nn,Vn;const un=jc();ut("function"==typeof(null===(u=un?.universalLinks)||void 0===u?void 0:u.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ut(typeof(null===(f=un?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ut("function"==typeof(null===(oe=null===(H=null===(T=un?.cordova)||void 0===T?void 0:T.plugins)||void 0===H?void 0:H.browsertab)||void 0===oe?void 0:oe.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ut("function"==typeof(null===(bt=null===(We=null===(xe=un?.cordova)||void 0===xe?void 0:xe.plugins)||void 0===We?void 0:We.browsertab)||void 0===bt?void 0:bt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ut("function"==typeof(null===(Vn=null===(nn=un?.cordova)||void 0===nn?void 0:nn.InAppBrowser)||void 0===Vn?void 0:Vn.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const xe=yield oe._initialize(u);yield xe.initialized(),xe.resetRedirect(),function Ol(){_a.clear()}(),yield oe._originValidation(u);const We=function eh(b,u,f=null){return{type:u,eventId:f,urlResponse:null,sessionId:tf(),postBody:null,tenantId:b.tenantId,error:Me(b,"no-auth-event")}}(u,T,H);yield function Tu(b,u){return sd()._set(od(b),u)}(u,We);const bt=yield function Iu(b,u,f){return Hl.apply(this,arguments)}(u,We,f),nn=yield function rd(b){const{cordova:u}=jc();return new Promise(f=>{u.plugins.browsertab.isAvailable(T=>{let H=null;T?u.plugins.browsertab.openUrl(b):H=u.InAppBrowser.open(b,function Ss(b=(0,pe.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),f(H)})})}(bt);return function _l(b,u,f){return pc.apply(this,arguments)}(u,xe,nn)})()}_isIframeWebStorageSupported(u,f){throw new Error("Method not implemented.")}_originValidation(u){const f=u._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function op(b){return wu.apply(this,arguments)}(u)),this.originValidationPromises[f]}attachCallbackListeners(u,f){const{universalLinks:T,handleOpenURL:H,BuildInfo:oe}=jc(),xe=setTimeout((0,d.A)(function*(){yield id(u),f.onEvent($())}),500),We=function(){var Vn=(0,d.A)(function*(un){clearTimeout(xe);const ni=yield id(u);let Qo=null;ni&&un?.url&&(Qo=function Au(b,u){var f,T;const H=function Kl(b){const u=U(b),f=u.link?decodeURIComponent(u.link):void 0,T=U(f).link,H=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return U(H).link||H||T||f||b}(u);if(H.includes("/__/auth/callback")){const oe=U(H),xe=oe.firebaseError?function zl(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(oe.firebaseError)):null,We=null===(T=null===(f=xe?.code)||void 0===f?void 0:f.split("auth/"))||void 0===T?void 0:T[1],bt=We?Me(We):null;return bt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:bt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:H,postBody:null}}return null}(ni,un.url)),f.onEvent(Qo||$())});return function(ni){return Vn.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,We);const bt=H,nn=`${oe.packageName.toLowerCase()}://`;jc().handleOpenURL=function(){var Vn=(0,d.A)(function*(un){if(un.toLowerCase().startsWith(nn)&&We({url:un}),"function"==typeof bt)try{bt(un)}catch(ni){console.error(ni)}});return function(un){return Vn.apply(this,arguments)}}()}};function $(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Me("no-auth-event")}}function gn(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function zr(b=(0,pe.ZQ)()){return!("file:"!==gn()&&"ionic:"!==gn()&&"capacitor:"!==gn()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ka(){try{const b=self.localStorage,u=$o();if(b)return b.setItem(u,"1"),b.removeItem(u),!function As(b=(0,pe.ZQ)()){return function Ts(){return(0,pe.lT)()&&11===document?.documentMode}()||function Vs(b=(0,pe.ZQ)()){return/Edge\/\d+/.test(b)}(b)}()||(0,pe.zW)()}catch{return vl()&&(0,pe.zW)()}return!1}function vl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wl(){return(function An(){return"http:"===gn()||"https:"===gn()}()||(0,pe.sr)()||zr())&&!function Go(){return(0,pe.lV)()||(0,pe.Ll)()}()&&Ka()&&!vl()}function ap(){return zr()&&typeof document<"u"}function Cu(){return(Cu=(0,d.A)(function*(){return!!ap()&&new Promise(b=>{const u=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),b(!0)})})})).apply(this,arguments)}const is={LOCAL:"local",NONE:"none",SESSION:"session"},Gl=ut,bo="persistence";function ho(b){return mc.apply(this,arguments)}function mc(){return(mc=(0,d.A)(function*(b){yield b._initializationPromise;const u=ad(),f=$t(bo,b.config.apiKey,b.name);u&&u.setItem(f,b._getPersistence())})).apply(this,arguments)}function ad(){var b;try{return(null===(b=function rf(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const cp=ut;class $c{constructor(){this.browserResolver=kt(Xd),this.cordovaResolver=kt(S),this.underlyingResolver=null,this._redirectPersistence=Zs,this._completeRedirectFn=ms,this._overrideRedirectResult=ll}_initialize(u){var f=this;return(0,d.A)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,f,T,H){var oe=this;return(0,d.A)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(u,f,T,H)})()}_openRedirect(u,f,T,H){var oe=this;return(0,d.A)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(u,f,T,H)})()}_isIframeWebStorageSupported(u,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,f)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return ap()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,d.A)(function*(){if(u.underlyingResolver)return;const f=yield function nf(){return Cu.apply(this,arguments)}();u.underlyingResolver=f?u.cordovaResolver:u.browserResolver})()}}function lp(b){return b.unwrap()}function xm(b){return Su(b)}function Su(b){const{_tokenResponse:u}=b instanceof pe.g?b.customData:b;if(!u)return null;if(!(b instanceof pe.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Ra.credentialFromResult(b);const f=u.providerId;if(!f||f===$e.PASSWORD)return null;let T;switch(f){case $e.GOOGLE:T=vs;break;case $e.FACEBOOK:T=Pr;break;case $e.GITHUB:T=vi;break;case $e.TWITTER:T=bi;break;default:const{oauthIdToken:H,oauthAccessToken:oe,oauthTokenSecret:xe,pendingToken:We,nonce:bt}=u;return oe||xe||H||We?We?f.startsWith("saml.")?qi._create(f,We):Gn._fromParams({providerId:f,signInMethod:f,pendingToken:We,idToken:H,accessToken:oe}):new Mr(f).credential({idToken:H,accessToken:oe,rawNonce:bt}):null}return b instanceof pe.g?T.credentialFromError(b):T.credentialFromResult(b)}function qo(b,u){return u.catch(f=>{throw f instanceof pe.g&&function dp(b,u){var f;const T=null===(f=u.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new nh(b,function ka(b,u){var f;const T=(0,pe.Ku)(b),H=u;return ut(u.customData.operationType,T,"argument-error"),ut(null===(f=H.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,T,"argument-error"),ws._fromError(T,H)}(b,u));else if(T){const H=Su(u),oe=u;H&&(oe.credential=H,oe.tenantId=T.tenantId||void 0,oe.email=T.email||void 0,oe.phoneNumber=T.phoneNumber||void 0)}}(b,f),f}).then(f=>{const H=f.user;return{operationType:f.operationType,credential:xm(f),additionalUserInfo:ma(f),user:Eo.getOrCreate(H)}})}function gc(b,u){return ql.apply(this,arguments)}function ql(){return(ql=(0,d.A)(function*(b,u){const f=yield u;return{verificationId:f.verificationId,confirm:T=>qo(b,f.confirm(T))}})).apply(this,arguments)}class nh{constructor(u,f){this.resolver=f,this.auth=function up(b){return b.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return qo(lp(this.auth),this.resolver.resolveSignIn(u))}}class Eo{constructor(u){this._delegate=u,this.multiFactor=function Va(b){const u=(0,pe.Ku)(b);return Ai.has(u)||Ai.set(u,Rc._fromUser(u)),Ai.get(u)}(u)}static getOrCreate(u){return Eo.USER_MAP.has(u)||Eo.USER_MAP.set(u,new Eo(u)),Eo.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var f=this;return(0,d.A)(function*(){return qo(f.auth,Ni(f._delegate,u))})()}linkWithPhoneNumber(u,f){var T=this;return(0,d.A)(function*(){return gc(T.auth,function Po(b,u,f){return Di.apply(this,arguments)}(T._delegate,u,f))})()}linkWithPopup(u){var f=this;return(0,d.A)(function*(){return qo(f.auth,function ol(b,u,f){return $d.apply(this,arguments)}(f._delegate,u,$c))})()}linkWithRedirect(u){var f=this;return(0,d.A)(function*(){return yield ho(Xn(f.auth)),Qh(f._delegate,u,$c)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var f=this;return(0,d.A)(function*(){return qo(f.auth,kn(f._delegate,u))})()}reauthenticateWithPhoneNumber(u,f){return gc(this.auth,function dc(b,u,f){return Za.apply(this,arguments)}(this._delegate,u,f))}reauthenticateWithPopup(u){return qo(this.auth,function sl(b,u,f){return Oo.apply(this,arguments)}(this._delegate,u,$c))}reauthenticateWithRedirect(u){var f=this;return(0,d.A)(function*(){return yield ho(Xn(f.auth)),kl(f._delegate,u,$c)})()}sendEmailVerification(u){return function B(b,u){return J.apply(this,arguments)}(this._delegate,u)}unlink(u){var f=this;return(0,d.A)(function*(){return yield function L(b,u){return z.apply(this,arguments)}(f._delegate,u),f})()}updateEmail(u){return function Qr(b,u){const f=(0,pe.Ku)(b);return(0,Te._isFirebaseServerApp)(f.auth.app)?Promise.reject(_t(f.auth)):$r(f,u,null)}(this._delegate,u)}updatePassword(u){return function lr(b,u){return $r((0,pe.Ku)(b),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function Ws(b,u){return Ko.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Hr(b,u){return ci.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,f){return function Ae(b,u,f){return ft.apply(this,arguments)}(this._delegate,u,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Eo.USER_MAP=new WeakMap;const Ql=ut;let af=(()=>{class b{constructor(f,T){if(this.app=f,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:H}=f.options;Ql(H,"invalid-api-key",{appName:f.name}),Ql(H,"invalid-api-key",{appName:f.name});const oe=typeof window<"u"?$c:void 0;this._delegate=T.initialize({options:{persistence:rh(H,f.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(St),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,T){!function Ao(b,u,f){const T=Xn(b);ut(T._canInitEmulator,T,"emulator-config-failed"),ut(/^https?:\/\//.test(u),T,"invalid-emulator-scheme");const H=!!f?.disableWarnings,oe=Fo(u),{host:xe,port:We}=function Vo(b){const u=Fo(b),f=/(\/\/)?([^?#/]+)/.exec(b.substr(u.length));if(!f)return{host:"",port:null};const T=f[2].split("@").pop()||"",H=/^(\[[^\]]+\])(:|$)/.exec(T);if(H){const oe=H[1];return{host:oe,port:io(T.substr(oe.length+1))}}{const[oe,xe]=T.split(":");return{host:oe,port:io(xe)}}}(u);T.config.emulator={url:`${oe}//${xe}${null===We?"":`:${We}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:xe,port:We,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:H})}),H||function Xo(){function b(){const u=document.createElement("p"),f=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,f,T)}applyActionCode(f){return function da(b,u){return ha.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return fa(this._delegate,f)}confirmPasswordReset(f,T){return function Zo(b,u,f){return ua.apply(this,arguments)}(this._delegate,f,T)}createUserWithEmailAndPassword(f,T){var H=this;return(0,d.A)(function*(){return qo(H._delegate,function Ac(b,u,f){return pa.apply(this,arguments)}(H._delegate,f,T))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function x(b,u){return te.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function el(b,u){const f=oi.parseLink(u);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,d.A)(function*(){Ql(Wl(),f._delegate,"operation-not-supported-in-this-environment");const T=yield function pu(b,u){return Gu.apply(this,arguments)}(f._delegate,$c);return T?qo(f._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function le(b,u){Xn(b)._logFramework(u)}(this._delegate,f)}onAuthStateChanged(f,T,H){const{next:oe,error:xe,complete:We}=cd(f,T,H);return this._delegate.onAuthStateChanged(oe,xe,We)}onIdTokenChanged(f,T,H){const{next:oe,error:xe,complete:We}=cd(f,T,H);return this._delegate.onIdTokenChanged(oe,xe,We)}sendSignInLinkToEmail(f,T){return function sc(b,u,f){return _o.apply(this,arguments)}(this._delegate,f,T)}sendPasswordResetEmail(f,T){return function Oa(b,u,f){return la.apply(this,arguments)}(this._delegate,f,T||void 0)}setPersistence(f){var T=this;return(0,d.A)(function*(){let H;switch(function sf(b,u){Gl(Object.values(is).includes(u),b,"invalid-persistence-type"),(0,pe.lV)()?Gl(u!==is.SESSION,b,"unsupported-persistence-type"):(0,pe.Ll)()?Gl(u===is.NONE,b,"unsupported-persistence-type"):vl()?Gl(u===is.NONE||u===is.LOCAL&&(0,pe.zW)(),b,"unsupported-persistence-type"):Gl(u===is.NONE||Ka(),b,"unsupported-persistence-type")}(T._delegate,f),f){case is.SESSION:H=Zs;break;case is.LOCAL:H=(yield kt(ln)._isAvailable())?ln:Mc;break;case is.NONE:H=Gt;break;default:return qe("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(H)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return qo(this._delegate,function G(b){return ue.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return qo(this._delegate,qr(this._delegate,f))}signInWithCustomToken(f){return qo(this._delegate,function Es(b,u){return Lo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,T){return qo(this._delegate,function ic(b,u,f){return(0,Te._isFirebaseServerApp)(b.app)?Promise.reject(_t(b)):qr((0,pe.Ku)(b),Oi.credential(u,f)).catch(function(){var T=(0,d.A)(function*(H){throw"auth/password-does-not-meet-requirements"===H.code&&ca(b),H});return function(H){return T.apply(this,arguments)}}())}(this._delegate,f,T))}signInWithEmailLink(f,T){return qo(this._delegate,function jo(b,u,f){return Cc.apply(this,arguments)}(this._delegate,f,T))}signInWithPhoneNumber(f,T){return gc(this._delegate,function Mo(b,u,f){return cs.apply(this,arguments)}(this._delegate,f,T))}signInWithPopup(f){var T=this;return(0,d.A)(function*(){return Ql(Wl(),T._delegate,"operation-not-supported-in-this-environment"),qo(T._delegate,function il(b,u,f){return zu.apply(this,arguments)}(T._delegate,f,$c))})()}signInWithRedirect(f){var T=this;return(0,d.A)(function*(){return Ql(Wl(),T._delegate,"operation-not-supported-in-this-environment"),yield ho(T._delegate),du(T._delegate,f,$c)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Ya(b,u){return Aa.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=is,b})();function cd(b,u,f){let T=b;"function"!=typeof b&&({next:T,error:u,complete:f}=b);const H=T;return{next:xe=>H(xe&&Eo.getOrCreate(xe)),error:u,complete:f}}function rh(b,u){const f=function Du(b,u){const f=ad();if(!f)return[];const T=$t(bo,b,u);switch(f.getItem(T)){case is.NONE:return[Gt];case is.LOCAL:return[ln,Zs];case is.SESSION:return[Zs];default:return[]}}(b,u);if(typeof self<"u"&&!f.includes(ln)&&f.push(ln),typeof window<"u")for(const T of[Mc,Zs])f.includes(T)||f.push(T);return f.includes(Gt)||f.push(Gt),f}class tc{constructor(){this.providerId="phone",this._delegate=new Ra(lp(fe.A.auth()))}static credential(u,f){return Ra.credential(u,f)}verifyPhoneNumber(u,f){return this._delegate.verifyPhoneNumber(u,f)}unwrap(){return this._delegate}}tc.PHONE_SIGN_IN_METHOD=Ra.PHONE_SIGN_IN_METHOD,tc.PROVIDER_ID=Ra.PROVIDER_ID;const Xl=ut;class ih{constructor(u,f,T=fe.A.app()){var H;Xl(null===(H=T.options)||void 0===H?void 0:H.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new tr(T.auth(),u,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cf(b){b.INTERNAL.registerComponent(new _e.uA("auth-compat",u=>{const f=u.getProvider("app-compat").getImmediate(),T=u.getProvider("auth");return new af(f,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Oi,FacebookAuthProvider:Pr,GithubAuthProvider:vi,GoogleAuthProvider:vs,OAuthProvider:Mr,SAMLAuthProvider:bs,PhoneAuthProvider:tc,PhoneMultiFactorGenerator:Ul,RecaptchaVerifier:ih,TwitterAuthProvider:bi,Auth:af,AuthCredential:js,Error:pe.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.14")}(fe.A)},467:(en,at,W)=>{function d(Te,pe,ke,Pe,_e,Qe,$e){try{var be=Te[Qe]($e),Ce=be.value}catch(Ve){return void ke(Ve)}be.done?pe(Ce):Promise.resolve(Ce).then(Pe,_e)}function fe(Te){return function(){var pe=this,ke=arguments;return new Promise(function(Pe,_e){var Qe=Te.apply(pe,ke);function $e(Ce){d(Qe,Pe,_e,$e,be,"next",Ce)}function be(Ce){d(Qe,Pe,_e,$e,be,"throw",Ce)}$e(void 0)})}}W.d(at,{A:()=>fe})},1635:(en,at,W)=>{function pe(Ke,tt){var ot={};for(var nt in Ke)Object.prototype.hasOwnProperty.call(Ke,nt)&&tt.indexOf(nt)<0&&(ot[nt]=Ke[nt]);if(null!=Ke&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(nt=Object.getOwnPropertySymbols(Ke);Ie<nt.length;Ie++)tt.indexOf(nt[Ie])<0&&Object.prototype.propertyIsEnumerable.call(Ke,nt[Ie])&&(ot[nt[Ie]]=Ke[nt[Ie]])}return ot}function Ve(Ke,tt,ot,nt){return new(ot||(ot=Promise))(function(Je,Vt){function Rn(mr){try{Yt(nt.next(mr))}catch(yr){Vt(yr)}}function dn(mr){try{Yt(nt.throw(mr))}catch(yr){Vt(yr)}}function Yt(mr){mr.done?Je(mr.value):function Ie(Je){return Je instanceof ot?Je:new ot(function(Vt){Vt(Je)})}(mr.value).then(Rn,dn)}Yt((nt=nt.apply(Ke,tt||[])).next())})}function me(Ke){return this instanceof me?(this.v=Ke,this):new me(Ke)}function qe(Ke,tt,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,nt=ot.apply(Ke,tt||[]),Je=[];return Ie=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Rn("next"),Rn("throw"),Rn("return",function Vt(xn){return function(dr){return Promise.resolve(dr).then(xn,yr)}}),Ie[Symbol.asyncIterator]=function(){return this},Ie;function Rn(xn,dr){nt[xn]&&(Ie[xn]=function(Sr){return new Promise(function(Or,or){Je.push([xn,Sr,Or,or])>1||dn(xn,Sr)})},dr&&(Ie[xn]=dr(Ie[xn])))}function dn(xn,dr){try{!function Yt(xn){xn.value instanceof me?Promise.resolve(xn.value.v).then(mr,yr):Ir(Je[0][2],xn)}(nt[xn](dr))}catch(Sr){Ir(Je[0][3],Sr)}}function mr(xn){dn("next",xn)}function yr(xn){dn("throw",xn)}function Ir(xn,dr){xn(dr),Je.shift(),Je.length&&dn(Je[0][0],Je[0][1])}}function gt(Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,tt=Ke[Symbol.asyncIterator];return tt?tt.call(Ke):(Ke=function It(Ke){var tt="function"==typeof Symbol&&Symbol.iterator,ot=tt&&Ke[tt],nt=0;if(ot)return ot.call(Ke);if(Ke&&"number"==typeof Ke.length)return{next:function(){return Ke&&nt>=Ke.length&&(Ke=void 0),{value:Ke&&Ke[nt++],done:!Ke}}};throw new TypeError(tt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ke),ot={},nt("next"),nt("throw"),nt("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function nt(Je){ot[Je]=Ke[Je]&&function(Vt){return new Promise(function(Rn,dn){!function Ie(Je,Vt,Rn,dn){Promise.resolve(dn).then(function(Yt){Je({value:Yt,done:Rn})},Vt)}(Rn,dn,(Vt=Ke[Je](Vt)).done,Vt.value)})}}}W.d(at,{AQ:()=>qe,N3:()=>me,Tt:()=>pe,sH:()=>Ve,xN:()=>gt}),"function"==typeof SuppressedError&&SuppressedError}},en=>{en(en.s=3877)}]);