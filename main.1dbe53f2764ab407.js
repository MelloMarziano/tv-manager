"use strict";(self.webpackChunktv_manager=self.webpackChunktv_manager||[]).push([[792],{1076:(nn,tt,j)=>{j.d(tt,{Am:()=>_t,Bd:()=>pt,FA:()=>lt,Fy:()=>Je,I9:()=>Tt,Im:()=>Pt,Ku:()=>fe,Ll:()=>Ht,T9:()=>de,Uj:()=>De,XA:()=>Ue,ZQ:()=>We,bD:()=>Me,c1:()=>$n,cY:()=>Ne,eX:()=>Ye,g:()=>Ee,gR:()=>Ar,hp:()=>on,jZ:()=>It,lT:()=>Rn,lV:()=>Dr,mS:()=>ht,nr:()=>Wt,p7:()=>ln,sr:()=>br,tD:()=>Tn,u:()=>ce,zW:()=>Ve,zw:()=>Pe});const Y=function(O){const N=[];let W=0;for(let _e=0;_e<O.length;_e++){let Ae=O.charCodeAt(_e);Ae<128?N[W++]=Ae:Ae<2048?(N[W++]=Ae>>6|192,N[W++]=63&Ae|128):55296==(64512&Ae)&&_e+1<O.length&&56320==(64512&O.charCodeAt(_e+1))?(Ae=65536+((1023&Ae)<<10)+(1023&O.charCodeAt(++_e)),N[W++]=Ae>>18|240,N[W++]=Ae>>12&63|128,N[W++]=Ae>>6&63|128,N[W++]=63&Ae|128):(N[W++]=Ae>>12|224,N[W++]=Ae>>6&63|128,N[W++]=63&Ae|128)}return N},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(O,N){if(!Array.isArray(O))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=N?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let Ae=0;Ae<O.length;Ae+=3){const ue=O[Ae],me=Ae+1<O.length,le=me?O[Ae+1]:0,be=Ae+2<O.length,je=be?O[Ae+2]:0;let Ie=(15&le)<<2|je>>6,Se=63&je;be||(Se=64,me||(Ie=64)),_e.push(W[ue>>2],W[(3&ue)<<4|le>>4],W[Ie],W[Se])}return _e.join("")},encodeString(O,N){return this.HAS_NATIVE_SUPPORT&&!N?btoa(O):this.encodeByteArray(Y(O),N)},decodeString(O,N){return this.HAS_NATIVE_SUPPORT&&!N?atob(O):function(O){const N=[];let W=0,_e=0;for(;W<O.length;){const Ae=O[W++];if(Ae<128)N[_e++]=String.fromCharCode(Ae);else if(Ae>191&&Ae<224){const ue=O[W++];N[_e++]=String.fromCharCode((31&Ae)<<6|63&ue)}else if(Ae>239&&Ae<365){const be=((7&Ae)<<18|(63&O[W++])<<12|(63&O[W++])<<6|63&O[W++])-65536;N[_e++]=String.fromCharCode(55296+(be>>10)),N[_e++]=String.fromCharCode(56320+(1023&be))}else{const ue=O[W++],me=O[W++];N[_e++]=String.fromCharCode((15&Ae)<<12|(63&ue)<<6|63&me)}}return N.join("")}(this.decodeStringToByteArray(O,N))},decodeStringToByteArray(O,N){this.init_();const W=N?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let Ae=0;Ae<O.length;){const ue=W[O.charAt(Ae++)],le=Ae<O.length?W[O.charAt(Ae)]:0;++Ae;const je=Ae<O.length?W[O.charAt(Ae)]:64;++Ae;const pe=Ae<O.length?W[O.charAt(Ae)]:64;if(++Ae,null==ue||null==le||null==je||null==pe)throw new ve;_e.push(ue<<2|le>>4),64!==je&&(_e.push(le<<4&240|je>>2),64!==pe&&_e.push(je<<6&192|pe))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let O=0;O<this.ENCODED_VALS.length;O++)this.byteToCharMap_[O]=this.ENCODED_VALS.charAt(O),this.charToByteMap_[this.byteToCharMap_[O]]=O,this.byteToCharMapWebSafe_[O]=this.ENCODED_VALS_WEBSAFE.charAt(O),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[O]]=O,O>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(O)]=O,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(O)]=O)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(O){return function(O){const N=Y(O);return Le.encodeByteArray(N,!0)}(O).replace(/\./g,"")},ce=function(O){try{return Le.decodeString(O,!0)}catch(N){console.error("base64Decode failed: ",N)}return null};function Pe(O,N){if(!(N instanceof Object))return N;switch(N.constructor){case Date:return new Date(N.getTime());case Object:void 0===O&&(O={});break;case Array:O=[];break;default:return N}for(const W in N)!N.hasOwnProperty(W)||!$e(W)||(O[W]=Pe(O[W],N[W]));return O}function $e(O){return"__proto__"!==O}function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const St=()=>{try{return ht().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const O=process.env.__FIREBASE_DEFAULTS__;return O?JSON.parse(O):void 0})()||(()=>{if(typeof document>"u")return;let O;try{O=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const N=O&&ce(O[1]);return N&&JSON.parse(N)})()}catch(O){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${O}`)}},de=()=>{var O;return null===(O=St())||void 0===O?void 0:O.config},Ue=O=>{var N;return null===(N=St())||void 0===N?void 0:N[`_${O}`]};class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((N,W)=>{this.resolve=N,this.reject=W})}wrapCallback(N){return(W,_e)=>{W?this.reject(W):this.resolve(_e),"function"==typeof N&&(this.promise.catch(()=>{}),1===N.length?N(W):N(W,_e))}}}function Je(O,N){if(O.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=N||"demo-project",Ae=O.iat||0,ue=O.sub||O.user_id;if(!ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:Ae,exp:Ae+3600,auth_time:Ae,sub:ue,user_id:ue,firebase:{sign_in_provider:"custom",identities:{}}},O);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(me)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function It(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Ht(){var O;const N=null===(O=St())||void 0===O?void 0:O.forceEnvironment;if("node"===N)return!0;if("browser"===N)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pt(){return typeof window<"u"||ln()}function ln(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $n(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function br(){const O="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof O&&void 0!==O.id}function Dr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Rn(){const O=We();return O.indexOf("MSIE ")>=0||O.indexOf("Trident/")>=0}function Wt(){return!Ht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Ye(){return new Promise((O,N)=>{try{let W=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",Ae=self.indexedDB.open(_e);Ae.onsuccess=()=>{Ae.result.close(),W||self.indexedDB.deleteDatabase(_e),O(!0)},Ae.onupgradeneeded=()=>{W=!1},Ae.onerror=()=>{var ue;N((null===(ue=Ae.error)||void 0===ue?void 0:ue.message)||"")}}catch(W){N(W)}})}class Ee extends Error{constructor(N,W,_e){super(W),this.code=N,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}}class lt{constructor(N,W,_e){this.service=N,this.serviceName=W,this.errors=_e}create(N,...W){const _e=W[0]||{},Ae=`${this.service}/${N}`,ue=this.errors[N],me=ue?function fn(O,N){return O.replace(zn,(W,_e)=>{const Ae=N[_e];return null!=Ae?String(Ae):`<${_e}?>`})}(ue,_e):"Error";return new Ee(Ae,`${this.serviceName}: ${me} (${Ae}).`,_e)}}const zn=/\{\$([^}]+)}/g;function Ar(O,N){return Object.prototype.hasOwnProperty.call(O,N)}function Pt(O){for(const N in O)if(Object.prototype.hasOwnProperty.call(O,N))return!1;return!0}function Me(O,N){if(O===N)return!0;const W=Object.keys(O),_e=Object.keys(N);for(const Ae of W){if(!_e.includes(Ae))return!1;const ue=O[Ae],me=N[Ae];if(qe(ue)&&qe(me)){if(!Me(ue,me))return!1}else if(ue!==me)return!1}for(const Ae of _e)if(!W.includes(Ae))return!1;return!0}function qe(O){return null!==O&&"object"==typeof O}function _t(O){const N=[];for(const[W,_e]of Object.entries(O))Array.isArray(_e)?_e.forEach(Ae=>{N.push(encodeURIComponent(W)+"="+encodeURIComponent(Ae))}):N.push(encodeURIComponent(W)+"="+encodeURIComponent(_e));return N.length?"&"+N.join("&"):""}function Tt(O){const N={};return O.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[Ae,ue]=_e.split("=");N[decodeURIComponent(Ae)]=decodeURIComponent(ue)}}),N}function on(O){const N=O.indexOf("?");if(!N)return"";const W=O.indexOf("#",N);return O.substring(N,W>0?W:void 0)}function Tn(O,N){const W=new Zt(O,N);return W.subscribe.bind(W)}class Zt{constructor(N,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{N(this)}).catch(_e=>{this.error(_e)})}next(N){this.forEachObserver(W=>{W.next(N)})}error(N){this.forEachObserver(W=>{W.error(N)}),this.close(N)}complete(){this.forEachObserver(N=>{N.complete()}),this.close()}subscribe(N,W,_e){let Ae;if(void 0===N&&void 0===W&&void 0===_e)throw new Error("Missing Observer.");Ae=function oi(O,N){if("object"!=typeof O||null===O)return!1;for(const W of N)if(W in O&&"function"==typeof O[W])return!0;return!1}(N,["next","error","complete"])?N:{next:N,error:W,complete:_e},void 0===Ae.next&&(Ae.next=et),void 0===Ae.error&&(Ae.error=et),void 0===Ae.complete&&(Ae.complete=et);const ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ae.error(this.finalError):Ae.complete()}catch{}}),this.observers.push(Ae),ue}unsubscribeOne(N){void 0===this.observers||void 0===this.observers[N]||(delete this.observers[N],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(N){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,N)}sendOne(N,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[N])try{W(this.observers[N])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(N){this.finalized||(this.finalized=!0,void 0!==N&&(this.finalError=N),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function et(){}function fe(O){return O&&O._delegate?O._delegate:O}},536:(nn,tt,j)=>{var p=j(345),J=j(9253),oe=j(8515),Y=j(3383),Oe=j(9417),Le=j(17),ve=j(7705);const Te=[{path:"private",loadChildren:()=>j.e(970).then(j.bind(j,7970)).then(Z=>Z.PrivateModule)},{path:"",redirectTo:"private",pathMatch:"full"}];let De=(()=>{class Z{static{this.\u0275fac=function(V){return new(V||Z)}}static{this.\u0275mod=ve.$C({type:Z})}static{this.\u0275inj=ve.G2t({imports:[Le.iI.forRoot(Te),Le.iI]})}}return Z})(),ce=(()=>{class Z{constructor(){this.title="tv-manager"}static{this.\u0275fac=function(V){return new(V||Z)}}static{this.\u0275cmp=ve.VBU({type:Z,selectors:[["app-root"]],decls:1,vars:0,template:function(V,X){1&V&&ve.nrm(0,"router-outlet")},dependencies:[Le.n3]})}}return Z})();const ge_firebase={apiKey:"AIzaSyBwC4ZdMVSmEjWlI9qalrNgaMJCAjJOP9E",authDomain:"tv-menu-97213.firebaseapp.com",projectId:"tv-menu-97213",storageBucket:"tv-menu-97213.firebasestorage.app",messagingSenderId:"222980467261",appId:"1:222980467261:web:8b12cb8c3046db0cfed854",measurementId:"G-JM6PJ5GKGE"};var Pe=j(1626),$e=j(9969);function Ot(Z){return new ve.wOt(3e3,!1)}function Yn(Z){switch(Z.length){case 0:return new $e.sf;case 1:return Z[0];default:return new $e.ui(Z)}}function Ar(Z,w,C=new Map,V=new Map){const X=[],_=[];let L=-1,R=null;if(w.forEach(B=>{const ee=B.get("offset"),He=ee==L,st=He&&R||new Map;B.forEach((qt,Dn)=>{let mn=Dn,yn=qt;if("offset"!==Dn)switch(mn=Z.normalizePropertyName(mn,X),yn){case $e.FX:yn=C.get(Dn);break;case $e.kp:yn=V.get(Dn);break;default:yn=Z.normalizeStyleValue(Dn,mn,yn,X)}st.set(mn,yn)}),He||_.push(st),R=st,L=ee}),X.length)throw function Ye(Z){return new ve.wOt(3502,!1)}();return _}function Er(Z,w,C,V){switch(w){case"start":Z.onStart(()=>V(C&&Pt(C,"start",Z)));break;case"done":Z.onDone(()=>V(C&&Pt(C,"done",Z)));break;case"destroy":Z.onDestroy(()=>V(C&&Pt(C,"destroy",Z)))}}function Pt(Z,w,C){const _=ae(Z.element,Z.triggerName,Z.fromState,Z.toState,w||Z.phaseName,C.totalTime??Z.totalTime,!!C.disabled),L=Z._data;return null!=L&&(_._data=L),_}function ae(Z,w,C,V,X="",_=0,L){return{element:Z,triggerName:w,fromState:C,toState:V,phaseName:X,totalTime:_,disabled:!!L}}function Me(Z,w,C){let V=Z.get(w);return V||Z.set(w,V=C),V}function qe(Z){const w=Z.indexOf(":");return[Z.substring(1,w),Z.slice(w+1)]}const it=(()=>typeof document>"u"?null:document.documentElement)();function _t(Z){const w=Z.parentNode||Z.host||null;return w===it?null:w}let on=null,En=!1;function oi(Z,w){for(;w;){if(w===Z)return!0;w=_t(w)}return!1}function et(Z,w,C){if(C)return Array.from(Z.querySelectorAll(w));const V=Z.querySelector(w);return V?[V]:[]}let _n=(()=>{class Z{validateStyleProperty(C){return function Tn(Z){on||(on=function Ln(){return typeof document<"u"?document.body:null}()||{},En=!!on.style&&"WebkitAppearance"in on.style);let w=!0;return on.style&&!function Tt(Z){return"ebkit"==Z.substring(1,6)}(Z)&&(w=Z in on.style,!w&&En&&(w="Webkit"+Z.charAt(0).toUpperCase()+Z.slice(1)in on.style)),w}(C)}matchesElement(C,V){return!1}containsElement(C,V){return oi(C,V)}getParentElement(C){return _t(C)}query(C,V,X){return et(C,V,X)}computeStyle(C,V,X){return X||""}animate(C,V,X,_,L,R=[],B){return new $e.sf(X,_)}static{this.\u0275fac=function(V){return new(V||Z)}}static{this.\u0275prov=ve.jDH({token:Z,factory:Z.\u0275fac})}}return Z})(),ri=(()=>{class Z{static{this.NOOP=new _n}}return Z})();const $t=1e3,Fe="ng-enter",ie="ng-leave",Re="ng-trigger",kt=".ng-trigger",sn="ng-animating",Hn=".ng-animating";function ar(Z){if("number"==typeof Z)return Z;const w=Z.match(/^(-?[\.\d]+)(m?s)/);return!w||w.length<2?0:hr(parseFloat(w[1]),w[2])}function hr(Z,w){return"s"===w?Z*$t:Z}function At(Z,w,C){return Z.hasOwnProperty("duration")?Z:function fe(Z,w,C){let X,_=0,L="";if("string"==typeof Z){const R=Z.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===R)return w.push(Ot()),{duration:0,delay:0,easing:""};X=hr(parseFloat(R[1]),R[2]);const B=R[3];null!=B&&(_=hr(parseFloat(B),R[4]));const ee=R[5];ee&&(L=ee)}else X=Z;if(!C){let R=!1,B=w.length;X<0&&(w.push(function Et(){return new ve.wOt(3100,!1)}()),R=!0),_<0&&(w.push(function yt(){return new ve.wOt(3101,!1)}()),R=!0),R&&w.splice(B,0,Ot())}return{duration:X,delay:_,easing:L}}(Z,w,C)}function O(Z,w={}){return Object.keys(Z).forEach(C=>{w[C]=Z[C]}),w}function N(Z){const w=new Map;return Object.keys(Z).forEach(C=>{w.set(C,Z[C])}),w}function Ae(Z,w=new Map,C){if(C)for(let[V,X]of C)w.set(V,X);for(let[V,X]of Z)w.set(V,X);return w}function ue(Z,w,C){w.forEach((V,X)=>{const _=Ke(X);C&&!C.has(X)&&C.set(X,Z.style[_]),Z.style[_]=V})}function me(Z,w){w.forEach((C,V)=>{const X=Ke(V);Z.style[X]=""})}function le(Z){return Array.isArray(Z)?1==Z.length?Z[0]:(0,$e.K2)(Z):Z}const je=new RegExp("{{\\s*(.+?)\\s*}}","g");function Bt(Z){let w=[];if("string"==typeof Z){let C;for(;C=je.exec(Z);)w.push(C[1]);je.lastIndex=0}return w}function pe(Z,w,C){const V=Z.toString(),X=V.replace(je,(_,L)=>{let R=w[L];return null==R&&(C.push(function Yt(Z){return new ve.wOt(3003,!1)}()),R=""),R.toString()});return X==V?Z:X}function Ie(Z){const w=[];let C=Z.next();for(;!C.done;)w.push(C.value),C=Z.next();return w}const Se=/-+([a-z0-9])/g;function Ke(Z){return Z.replace(Se,(...w)=>w[1].toUpperCase())}function qn(Z,w,C){switch(w.type){case 7:return Z.visitTrigger(w,C);case 0:return Z.visitState(w,C);case 1:return Z.visitTransition(w,C);case 2:return Z.visitSequence(w,C);case 3:return Z.visitGroup(w,C);case 4:return Z.visitAnimate(w,C);case 5:return Z.visitKeyframes(w,C);case 6:return Z.visitStyle(w,C);case 8:return Z.visitReference(w,C);case 9:return Z.visitAnimateChild(w,C);case 10:return Z.visitAnimateRef(w,C);case 11:return Z.visitQuery(w,C);case 12:return Z.visitStagger(w,C);default:throw function Rt(Z){return new ve.wOt(3004,!1)}()}}function tn(Z,w){return window.getComputedStyle(Z)[w]}const pn="*";function In(Z,w){const C=[];return"string"==typeof Z?Z.split(/\s*,\s*/).forEach(V=>function ir(Z,w,C){if(":"==Z[0]){const B=function dr(Z,w){switch(Z){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(C,V)=>parseFloat(V)>parseFloat(C);case":decrement":return(C,V)=>parseFloat(V)<parseFloat(C);default:return w.push(function un(Z){return new ve.wOt(3016,!1)}()),"* => *"}}(Z,C);if("function"==typeof B)return void w.push(B);Z=B}const V=Z.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==V||V.length<4)return C.push(function Rn(Z){return new ve.wOt(3015,!1)}()),w;const X=V[1],_=V[2],L=V[3];w.push(Gr(X,L));"<"==_[0]&&!(X==pn&&L==pn)&&w.push(Gr(L,X))}(V,C,w)):C.push(Z),C}const Xe=new Set(["true","1"]),Vn=new Set(["false","0"]);function Gr(Z,w){const C=Xe.has(Z)||Vn.has(Z),V=Xe.has(w)||Vn.has(w);return(X,_)=>{let L=Z==pn||Z==X,R=w==pn||w==_;return!L&&C&&"boolean"==typeof X&&(L=X?Xe.has(Z):Vn.has(Z)),!R&&V&&"boolean"==typeof _&&(R=_?Xe.has(w):Vn.has(w)),L&&R}}const ys=new RegExp("s*:selfs*,?","g");function Ri(Z,w,C,V){return new Ds(Z).build(w,C,V)}class Ds{constructor(w){this._driver=w}build(w,C,V){const X=new go(C);return this._resetContextStyleTimingState(X),qn(this,le(w),X)}_resetContextStyleTimingState(w){w.currentQuerySelector="",w.collectedStyles=new Map,w.collectedStyles.set("",new Map),w.currentTime=0}visitTrigger(w,C){let V=C.queryCount=0,X=C.depCount=0;const _=[],L=[];return"@"==w.name.charAt(0)&&C.errors.push(function Ue(){return new ve.wOt(3006,!1)}()),w.definitions.forEach(R=>{if(this._resetContextStyleTimingState(C),0==R.type){const B=R,ee=B.name;ee.toString().split(/\s*,\s*/).forEach(He=>{B.name=He,_.push(this.visitState(B,C))}),B.name=ee}else if(1==R.type){const B=this.visitTransition(R,C);V+=B.queryCount,X+=B.depCount,L.push(B)}else C.errors.push(function Ne(){return new ve.wOt(3007,!1)}())}),{type:7,name:w.name,states:_,transitions:L,queryCount:V,depCount:X,options:null}}visitState(w,C){const V=this.visitStyle(w.styles,C),X=w.options&&w.options.params||null;if(V.containsDynamicStyles){const _=new Set,L=X||{};V.styles.forEach(R=>{R instanceof Map&&R.forEach(B=>{Bt(B).forEach(ee=>{L.hasOwnProperty(ee)||_.add(ee)})})}),_.size&&(Ie(_.values()),C.errors.push(function Je(Z,w){return new ve.wOt(3008,!1)}()))}return{type:0,name:w.name,style:V,options:X?{params:X}:null}}visitTransition(w,C){C.queryCount=0,C.depCount=0;const V=qn(this,le(w.animation),C);return{type:1,matchers:In(w.expr,C.errors),animation:V,queryCount:C.queryCount,depCount:C.depCount,options:Br(w.options)}}visitSequence(w,C){return{type:2,steps:w.steps.map(V=>qn(this,V,C)),options:Br(w.options)}}visitGroup(w,C){const V=C.currentTime;let X=0;const _=w.steps.map(L=>{C.currentTime=V;const R=qn(this,L,C);return X=Math.max(X,C.currentTime),R});return C.currentTime=X,{type:3,steps:_,options:Br(w.options)}}visitAnimate(w,C){const V=function xo(Z,w){if(Z.hasOwnProperty("duration"))return Z;if("number"==typeof Z)return rs(At(Z,w).duration,0,"");const C=Z;if(C.split(/\s+/).some(_=>"{"==_.charAt(0)&&"{"==_.charAt(1))){const _=rs(0,0,"");return _.dynamic=!0,_.strValue=C,_}const X=At(C,w);return rs(X.duration,X.delay,X.easing)}(w.timings,C.errors);C.currentAnimateTimings=V;let X,_=w.styles?w.styles:(0,$e.iF)({});if(5==_.type)X=this.visitKeyframes(_,C);else{let L=w.styles,R=!1;if(!L){R=!0;const ee={};V.easing&&(ee.easing=V.easing),L=(0,$e.iF)(ee)}C.currentTime+=V.duration+V.delay;const B=this.visitStyle(L,C);B.isEmptyStep=R,X=B}return C.currentAnimateTimings=null,{type:4,timings:V,style:X,options:null}}visitStyle(w,C){const V=this._makeStyleAst(w,C);return this._validateStyleAst(V,C),V}_makeStyleAst(w,C){const V=[],X=Array.isArray(w.styles)?w.styles:[w.styles];for(let R of X)"string"==typeof R?R===$e.kp?V.push(R):C.errors.push(new ve.wOt(3002,!1)):V.push(N(R));let _=!1,L=null;return V.forEach(R=>{if(R instanceof Map&&(R.has("easing")&&(L=R.get("easing"),R.delete("easing")),!_))for(let B of R.values())if(B.toString().indexOf("{{")>=0){_=!0;break}}),{type:6,styles:V,easing:L,offset:w.offset,containsDynamicStyles:_,options:null}}_validateStyleAst(w,C){const V=C.currentAnimateTimings;let X=C.currentTime,_=C.currentTime;V&&_>0&&(_-=V.duration+V.delay),w.styles.forEach(L=>{"string"!=typeof L&&L.forEach((R,B)=>{const ee=C.collectedStyles.get(C.currentQuerySelector),He=ee.get(B);let st=!0;He&&(_!=X&&_>=He.startTime&&X<=He.endTime&&(C.errors.push(function Ht(Z,w,C,V,X){return new ve.wOt(3010,!1)}()),st=!1),_=He.startTime),st&&ee.set(B,{startTime:_,endTime:X}),C.options&&function be(Z,w,C){const V=w.params||{},X=Bt(Z);X.length&&X.forEach(_=>{V.hasOwnProperty(_)||C.push(function St(Z){return new ve.wOt(3001,!1)}())})}(R,C.options,C.errors)})})}visitKeyframes(w,C){const V={type:5,styles:[],options:null};if(!C.currentAnimateTimings)return C.errors.push(function pt(){return new ve.wOt(3011,!1)}()),V;let _=0;const L=[];let R=!1,B=!1,ee=0;const He=w.steps.map(cr=>{const lr=this._makeStyleAst(cr,C);let gr=null!=lr.offset?lr.offset:function ma(Z){if("string"==typeof Z)return null;let w=null;if(Array.isArray(Z))Z.forEach(C=>{if(C instanceof Map&&C.has("offset")){const V=C;w=parseFloat(V.get("offset")),V.delete("offset")}});else if(Z instanceof Map&&Z.has("offset")){const C=Z;w=parseFloat(C.get("offset")),C.delete("offset")}return w}(lr.styles),Qr=0;return null!=gr&&(_++,Qr=lr.offset=gr),B=B||Qr<0||Qr>1,R=R||Qr<ee,ee=Qr,L.push(Qr),lr});B&&C.errors.push(function ln(){return new ve.wOt(3012,!1)}()),R&&C.errors.push(function $n(){return new ve.wOt(3200,!1)}());const st=w.steps.length;let qt=0;_>0&&_<st?C.errors.push(function br(){return new ve.wOt(3202,!1)}()):0==_&&(qt=1/(st-1));const Dn=st-1,mn=C.currentTime,yn=C.currentAnimateTimings,jn=yn.duration;return He.forEach((cr,lr)=>{const gr=qt>0?lr==Dn?1:qt*lr:L[lr],Qr=gr*jn;C.currentTime=mn+yn.delay+Qr,yn.duration=Qr,this._validateStyleAst(cr,C),cr.offset=gr,V.styles.push(cr)}),V}visitReference(w,C){return{type:8,animation:qn(this,le(w.animation),C),options:Br(w.options)}}visitAnimateChild(w,C){return C.depCount++,{type:9,options:Br(w.options)}}visitAnimateRef(w,C){return{type:10,animation:this.visitReference(w.animation,C),options:Br(w.options)}}visitQuery(w,C){const V=C.currentQuerySelector,X=w.options||{};C.queryCount++,C.currentQuery=w;const[_,L]=function fi(Z){const w=!!Z.split(/\s*,\s*/).find(C=>":self"==C);return w&&(Z=Z.replace(ys,"")),Z=Z.replace(/@\*/g,kt).replace(/@\w+/g,C=>kt+"-"+C.slice(1)).replace(/:animating/g,Hn),[Z,w]}(w.selector);C.currentQuerySelector=V.length?V+" "+_:_,Me(C.collectedStyles,C.currentQuerySelector,new Map);const R=qn(this,le(w.animation),C);return C.currentQuery=null,C.currentQuerySelector=V,{type:11,selector:_,limit:X.limit||0,optional:!!X.optional,includeSelf:L,animation:R,originalSelector:w.selector,options:Br(w.options)}}visitStagger(w,C){C.currentQuery||C.errors.push(function Dr(){return new ve.wOt(3013,!1)}());const V="full"===w.timings?{duration:0,delay:0,easing:"full"}:At(w.timings,C.errors,!0);return{type:12,animation:qn(this,le(w.animation),C),timings:V,options:null}}}class go{constructor(w){this.errors=w,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Br(Z){return Z?(Z=O(Z)).params&&(Z.params=function Ss(Z){return Z?O(Z):null}(Z.params)):Z={},Z}function rs(Z,w,C){return{duration:Z,delay:w,easing:C}}function is(Z,w,C,V,X,_,L=null,R=!1){return{type:1,element:Z,keyframes:w,preStyleProps:C,postStyleProps:V,duration:X,delay:_,totalTime:X+_,easing:L,subTimeline:R}}class Rs{constructor(){this._map=new Map}get(w){return this._map.get(w)||[]}append(w,C){let V=this._map.get(w);V||this._map.set(w,V=[]),V.push(...C)}has(w){return this._map.has(w)}clear(){this._map.clear()}}const xs=new RegExp(":enter","g"),$s=new RegExp(":leave","g");function Ms(Z,w,C,V,X,_=new Map,L=new Map,R,B,ee=[]){return(new zs).buildKeyframes(Z,w,C,V,X,_,L,R,B,ee)}class zs{buildKeyframes(w,C,V,X,_,L,R,B,ee,He=[]){ee=ee||new Rs;const st=new Gi(w,C,ee,X,_,He,[]);st.options=B;const qt=B.delay?ar(B.delay):0;st.currentTimeline.delayNextStep(qt),st.currentTimeline.setStyles([L],null,st.errors,B),qn(this,V,st);const Dn=st.timelines.filter(mn=>mn.containsAnimation());if(Dn.length&&R.size){let mn;for(let yn=Dn.length-1;yn>=0;yn--){const jn=Dn[yn];if(jn.element===C){mn=jn;break}}mn&&!mn.allowOnlyTimelineStyles()&&mn.setStyles([R],null,st.errors,B)}return Dn.length?Dn.map(mn=>mn.buildKeyframes()):[is(C,[],[],[],0,qt,"",!1)]}visitTrigger(w,C){}visitState(w,C){}visitTransition(w,C){}visitAnimateChild(w,C){const V=C.subInstructions.get(C.element);if(V){const X=C.createSubContext(w.options),_=C.currentTimeline.currentTime,L=this._visitSubInstructions(V,X,X.options);_!=L&&C.transformIntoNewTimeline(L)}C.previousNode=w}visitAnimateRef(w,C){const V=C.createSubContext(w.options);V.transformIntoNewTimeline(),this._applyAnimationRefDelays([w.options,w.animation.options],C,V),this.visitReference(w.animation,V),C.transformIntoNewTimeline(V.currentTimeline.currentTime),C.previousNode=w}_applyAnimationRefDelays(w,C,V){for(const X of w){const _=X?.delay;if(_){const L="number"==typeof _?_:ar(pe(_,X?.params??{},C.errors));V.delayNextStep(L)}}}_visitSubInstructions(w,C,V){let _=C.currentTimeline.currentTime;const L=null!=V.duration?ar(V.duration):null,R=null!=V.delay?ar(V.delay):null;return 0!==L&&w.forEach(B=>{const ee=C.appendInstructionToTimeline(B,L,R);_=Math.max(_,ee.duration+ee.delay)}),_}visitReference(w,C){C.updateOptions(w.options,!0),qn(this,w.animation,C),C.previousNode=w}visitSequence(w,C){const V=C.subContextCount;let X=C;const _=w.options;if(_&&(_.params||_.delay)&&(X=C.createSubContext(_),X.transformIntoNewTimeline(),null!=_.delay)){6==X.previousNode.type&&(X.currentTimeline.snapshotCurrentStyles(),X.previousNode=Ks);const L=ar(_.delay);X.delayNextStep(L)}w.steps.length&&(w.steps.forEach(L=>qn(this,L,X)),X.currentTimeline.applyStylesToKeyframe(),X.subContextCount>V&&X.transformIntoNewTimeline()),C.previousNode=w}visitGroup(w,C){const V=[];let X=C.currentTimeline.currentTime;const _=w.options&&w.options.delay?ar(w.options.delay):0;w.steps.forEach(L=>{const R=C.createSubContext(w.options);_&&R.delayNextStep(_),qn(this,L,R),X=Math.max(X,R.currentTimeline.currentTime),V.push(R.currentTimeline)}),V.forEach(L=>C.currentTimeline.mergeTimelineCollectedStyles(L)),C.transformIntoNewTimeline(X),C.previousNode=w}_visitTiming(w,C){if(w.dynamic){const V=w.strValue;return At(C.params?pe(V,C.params,C.errors):V,C.errors)}return{duration:w.duration,delay:w.delay,easing:w.easing}}visitAnimate(w,C){const V=C.currentAnimateTimings=this._visitTiming(w.timings,C),X=C.currentTimeline;V.delay&&(C.incrementTime(V.delay),X.snapshotCurrentStyles());const _=w.style;5==_.type?this.visitKeyframes(_,C):(C.incrementTime(V.duration),this.visitStyle(_,C),X.applyStylesToKeyframe()),C.currentAnimateTimings=null,C.previousNode=w}visitStyle(w,C){const V=C.currentTimeline,X=C.currentAnimateTimings;!X&&V.hasCurrentStyleProperties()&&V.forwardFrame();const _=X&&X.easing||w.easing;w.isEmptyStep?V.applyEmptyStep(_):V.setStyles(w.styles,_,C.errors,C.options),C.previousNode=w}visitKeyframes(w,C){const V=C.currentAnimateTimings,X=C.currentTimeline.duration,_=V.duration,R=C.createSubContext().currentTimeline;R.easing=V.easing,w.styles.forEach(B=>{R.forwardTime((B.offset||0)*_),R.setStyles(B.styles,B.easing,C.errors,C.options),R.applyStylesToKeyframe()}),C.currentTimeline.mergeTimelineCollectedStyles(R),C.transformIntoNewTimeline(X+_),C.previousNode=w}visitQuery(w,C){const V=C.currentTimeline.currentTime,X=w.options||{},_=X.delay?ar(X.delay):0;_&&(6===C.previousNode.type||0==V&&C.currentTimeline.hasCurrentStyleProperties())&&(C.currentTimeline.snapshotCurrentStyles(),C.previousNode=Ks);let L=V;const R=C.invokeQuery(w.selector,w.originalSelector,w.limit,w.includeSelf,!!X.optional,C.errors);C.currentQueryTotal=R.length;let B=null;R.forEach((ee,He)=>{C.currentQueryIndex=He;const st=C.createSubContext(w.options,ee);_&&st.delayNextStep(_),ee===C.element&&(B=st.currentTimeline),qn(this,w.animation,st),st.currentTimeline.applyStylesToKeyframe(),L=Math.max(L,st.currentTimeline.currentTime)}),C.currentQueryIndex=0,C.currentQueryTotal=0,C.transformIntoNewTimeline(L),B&&(C.currentTimeline.mergeTimelineCollectedStyles(B),C.currentTimeline.snapshotCurrentStyles()),C.previousNode=w}visitStagger(w,C){const V=C.parentContext,X=C.currentTimeline,_=w.timings,L=Math.abs(_.duration),R=L*(C.currentQueryTotal-1);let B=L*C.currentQueryIndex;switch(_.duration<0?"reverse":_.easing){case"reverse":B=R-B;break;case"full":B=V.currentStaggerTime}const He=C.currentTimeline;B&&He.delayNextStep(B);const st=He.currentTime;qn(this,w.animation,C),C.previousNode=w,V.currentStaggerTime=X.currentTime-st+(X.startTime-V.currentTimeline.startTime)}}const Ks={};class Gi{constructor(w,C,V,X,_,L,R,B){this._driver=w,this.element=C,this.subInstructions=V,this._enterClassName=X,this._leaveClassName=_,this.errors=L,this.timelines=R,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ks,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=B||new Vi(this._driver,C,0),R.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(w,C){if(!w)return;const V=w;let X=this.options;null!=V.duration&&(X.duration=ar(V.duration)),null!=V.delay&&(X.delay=ar(V.delay));const _=V.params;if(_){let L=X.params;L||(L=this.options.params={}),Object.keys(_).forEach(R=>{(!C||!L.hasOwnProperty(R))&&(L[R]=pe(_[R],L,this.errors))})}}_copyOptions(){const w={};if(this.options){const C=this.options.params;if(C){const V=w.params={};Object.keys(C).forEach(X=>{V[X]=C[X]})}}return w}createSubContext(w=null,C,V){const X=C||this.element,_=new Gi(this._driver,X,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(X,V||0));return _.previousNode=this.previousNode,_.currentAnimateTimings=this.currentAnimateTimings,_.options=this._copyOptions(),_.updateOptions(w),_.currentQueryIndex=this.currentQueryIndex,_.currentQueryTotal=this.currentQueryTotal,_.parentContext=this,this.subContextCount++,_}transformIntoNewTimeline(w){return this.previousNode=Ks,this.currentTimeline=this.currentTimeline.fork(this.element,w),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(w,C,V){const X={duration:C??w.duration,delay:this.currentTimeline.currentTime+(V??0)+w.delay,easing:""},_=new Ws(this._driver,w.element,w.keyframes,w.preStyleProps,w.postStyleProps,X,w.stretchStartingKeyframe);return this.timelines.push(_),X}incrementTime(w){this.currentTimeline.forwardTime(this.currentTimeline.duration+w)}delayNextStep(w){w>0&&this.currentTimeline.delayNextStep(w)}invokeQuery(w,C,V,X,_,L){let R=[];if(X&&R.push(this.element),w.length>0){w=(w=w.replace(xs,"."+this._enterClassName)).replace($s,"."+this._leaveClassName);let ee=this._driver.query(this.element,w,1!=V);0!==V&&(ee=V<0?ee.slice(ee.length+V,ee.length):ee.slice(0,V)),R.push(...ee)}return!_&&0==R.length&&L.push(function mr(Z){return new ve.wOt(3014,!1)}()),R}}class Vi{constructor(w,C,V,X){this._driver=w,this.element=C,this.startTime=V,this._elementTimelineStylesLookup=X,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(C),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(C,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(w){const C=1===this._keyframes.size&&this._pendingStyles.size;this.duration||C?(this.forwardTime(this.currentTime+w),C&&this.snapshotCurrentStyles()):this.startTime+=w}fork(w,C){return this.applyStylesToKeyframe(),new Vi(this._driver,w,C||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(w){this.applyStylesToKeyframe(),this.duration=w,this._loadKeyframe()}_updateStyle(w,C){this._localTimelineStyles.set(w,C),this._globalTimelineStyles.set(w,C),this._styleSummary.set(w,{time:this.currentTime,value:C})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(w){w&&this._previousKeyframe.set("easing",w);for(let[C,V]of this._globalTimelineStyles)this._backFill.set(C,V||$e.kp),this._currentKeyframe.set(C,$e.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(w,C,V,X){C&&this._previousKeyframe.set("easing",C);const _=X&&X.params||{},L=function Pi(Z,w){const C=new Map;let V;return Z.forEach(X=>{if("*"===X){V=V||w.keys();for(let _ of V)C.set(_,$e.kp)}else Ae(X,C)}),C}(w,this._globalTimelineStyles);for(let[R,B]of L){const ee=pe(B,_,V);this._pendingStyles.set(R,ee),this._localTimelineStyles.has(R)||this._backFill.set(R,this._globalTimelineStyles.get(R)??$e.kp),this._updateStyle(R,ee)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((w,C)=>{this._currentKeyframe.set(C,w)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((w,C)=>{this._currentKeyframe.has(C)||this._currentKeyframe.set(C,w)}))}snapshotCurrentStyles(){for(let[w,C]of this._localTimelineStyles)this._pendingStyles.set(w,C),this._updateStyle(w,C)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const w=[];for(let C in this._currentKeyframe)w.push(C);return w}mergeTimelineCollectedStyles(w){w._styleSummary.forEach((C,V)=>{const X=this._styleSummary.get(V);(!X||C.time>X.time)&&this._updateStyle(V,C.value)})}buildKeyframes(){this.applyStylesToKeyframe();const w=new Set,C=new Set,V=1===this._keyframes.size&&0===this.duration;let X=[];this._keyframes.forEach((R,B)=>{const ee=Ae(R,new Map,this._backFill);ee.forEach((He,st)=>{He===$e.FX?w.add(st):He===$e.kp&&C.add(st)}),V||ee.set("offset",B/this.duration),X.push(ee)});const _=w.size?Ie(w.values()):[],L=C.size?Ie(C.values()):[];if(V){const R=X[0],B=new Map(R);R.set("offset",0),B.set("offset",1),X=[R,B]}return is(this.element,X,_,L,this.duration,this.startTime,this.easing,!1)}}class Ws extends Vi{constructor(w,C,V,X,_,L,R=!1){super(w,C,L.delay),this.keyframes=V,this.preStyleProps=X,this.postStyleProps=_,this._stretchStartingKeyframe=R,this.timings={duration:L.duration,delay:L.delay,easing:L.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let w=this.keyframes,{delay:C,duration:V,easing:X}=this.timings;if(this._stretchStartingKeyframe&&C){const _=[],L=V+C,R=C/L,B=Ae(w[0]);B.set("offset",0),_.push(B);const ee=Ae(w[0]);ee.set("offset",_r(R)),_.push(ee);const He=w.length-1;for(let st=1;st<=He;st++){let qt=Ae(w[st]);const Dn=qt.get("offset");qt.set("offset",_r((C+Dn*V)/L)),_.push(qt)}V=L,C=0,X="",w=_}return is(this.element,w,this.preStyleProps,this.postStyleProps,V,C,X,!0)}}function _r(Z,w=3){const C=Math.pow(10,w-1);return Math.round(Z*C)/C}class vs{}const Zs=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ps extends vs{normalizePropertyName(w,C){return Ke(w)}normalizeStyleValue(w,C,V,X){let _="";const L=V.toString().trim();if(Zs.has(C)&&0!==V&&"0"!==V)if("number"==typeof V)_="px";else{const R=V.match(/^[+-]?[\d\.]+([a-z]*)$/);R&&0==R[1].length&&X.push(function de(Z,w){return new ve.wOt(3005,!1)}())}return L+_}}function Gs(Z,w,C,V,X,_,L,R,B,ee,He,st,qt){return{type:0,element:Z,triggerName:w,isRemovalTransition:X,fromState:C,fromStyles:_,toState:V,toStyles:L,timelines:R,queriedElements:B,preStyleProps:ee,postStyleProps:He,totalTime:st,errors:qt}}const bs={};class Es{constructor(w,C,V){this._triggerName=w,this.ast=C,this._stateStyles=V}match(w,C,V,X){return function hn(Z,w,C,V,X){return Z.some(_=>_(w,C,V,X))}(this.ast.matchers,w,C,V,X)}buildStyles(w,C,V){let X=this._stateStyles.get("*");return void 0!==w&&(X=this._stateStyles.get(w?.toString())||X),X?X.buildStyles(C,V):new Map}build(w,C,V,X,_,L,R,B,ee,He){const st=[],qt=this.ast.options&&this.ast.options.params||bs,mn=this.buildStyles(V,R&&R.params||bs,st),yn=B&&B.params||bs,jn=this.buildStyles(X,yn,st),cr=new Set,lr=new Map,gr=new Map,Qr="void"===X,Ui={params:sr(yn,qt),delay:this.ast.options?.delay},Ji=He?[]:Ms(w,C,this.ast.animation,_,L,mn,jn,Ui,ee,st);let Fr=0;if(Ji.forEach(li=>{Fr=Math.max(li.duration+li.delay,Fr)}),st.length)return Gs(C,this._triggerName,V,X,Qr,mn,jn,[],[],lr,gr,Fr,st);Ji.forEach(li=>{const es=li.element,ba=Me(lr,es,new Set);li.preStyleProps.forEach(No=>ba.add(No));const Mn=Me(gr,es,new Set);li.postStyleProps.forEach(No=>Mn.add(No)),es!==C&&cr.add(es)});const ci=Ie(cr.values());return Gs(C,this._triggerName,V,X,Qr,mn,jn,Ji,ci,lr,gr,Fr)}}function sr(Z,w){const C=O(w);for(const V in Z)Z.hasOwnProperty(V)&&null!=Z[V]&&(C[V]=Z[V]);return C}class Or{constructor(w,C,V){this.styles=w,this.defaultParams=C,this.normalizer=V}buildStyles(w,C){const V=new Map,X=O(this.defaultParams);return Object.keys(w).forEach(_=>{const L=w[_];null!==L&&(X[_]=L)}),this.styles.styles.forEach(_=>{"string"!=typeof _&&_.forEach((L,R)=>{L&&(L=pe(L,X,C));const B=this.normalizer.normalizePropertyName(R,C);L=this.normalizer.normalizeStyleValue(R,B,L,C),V.set(R,L)})}),V}}class ds{constructor(w,C,V){this.name=w,this.ast=C,this._normalizer=V,this.transitionFactories=[],this.states=new Map,C.states.forEach(X=>{this.states.set(X.name,new Or(X.style,X.options&&X.options.params||{},V))}),Js(this.states,"true","1"),Js(this.states,"false","0"),C.transitions.forEach(X=>{this.transitionFactories.push(new Es(w,X,this.states))}),this.fallbackTransition=function yi(Z,w,C){return new Es(Z,{type:1,animation:{type:2,steps:[],options:null},matchers:[(L,R)=>!0],options:null,queryCount:0,depCount:0},w)}(w,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(w,C,V,X){return this.transitionFactories.find(L=>L.match(w,C,V,X))||null}matchStyles(w,C,V){return this.fallbackTransition.buildStyles(w,C,V)}}function Js(Z,w,C){Z.has(w)?Z.has(C)||Z.set(C,Z.get(w)):Z.has(C)&&Z.set(w,Z.get(C))}const Zr=new Rs;class Kr{constructor(w,C,V){this.bodyNode=w,this._driver=C,this._normalizer=V,this._animations=new Map,this._playersById=new Map,this.players=[]}register(w,C){const V=[],_=Ri(this._driver,C,V,[]);if(V.length)throw function ut(Z){return new ve.wOt(3503,!1)}();this._animations.set(w,_)}_buildPlayer(w,C,V){const X=w.element,_=Ar(this._normalizer,w.keyframes,C,V);return this._driver.animate(X,_,w.duration,w.delay,w.easing,[],!0)}create(w,C,V={}){const X=[],_=this._animations.get(w);let L;const R=new Map;if(_?(L=Ms(this._driver,C,_,Fe,ie,new Map,new Map,V,Zr,X),L.forEach(He=>{const st=Me(R,He.element,new Map);He.postStyleProps.forEach(qt=>st.set(qt,null))})):(X.push(function ze(){return new ve.wOt(3300,!1)}()),L=[]),X.length)throw function Ee(Z){return new ve.wOt(3504,!1)}();R.forEach((He,st)=>{He.forEach((qt,Dn)=>{He.set(Dn,this._driver.computeStyle(st,Dn,$e.kp))})});const ee=Yn(L.map(He=>{const st=R.get(He.element);return this._buildPlayer(He,new Map,st)}));return this._playersById.set(w,ee),ee.onDestroy(()=>this.destroy(w)),this.players.push(ee),ee}destroy(w){const C=this._getPlayer(w);C.destroy(),this._playersById.delete(w);const V=this.players.indexOf(C);V>=0&&this.players.splice(V,1)}_getPlayer(w){const C=this._playersById.get(w);if(!C)throw function lt(Z){return new ve.wOt(3301,!1)}();return C}listen(w,C,V,X){const _=ae(C,"","","");return Er(this._getPlayer(w),V,_,X),()=>{}}command(w,C,V,X){if("register"==V)return void this.register(w,X[0]);if("create"==V)return void this.create(w,C,X[0]||{});const _=this._getPlayer(w);switch(V){case"play":_.play();break;case"pause":_.pause();break;case"reset":_.reset();break;case"restart":_.restart();break;case"finish":_.finish();break;case"init":_.init();break;case"setPosition":_.setPosition(parseFloat(X[0]));break;case"destroy":this.destroy(w)}}}const hs="ng-animate-queued",os="ng-animate-disabled",bi=[],fr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ws={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},mi="__ng_removed";class Hi{get params(){return this.options.params}constructor(w,C=""){this.namespaceId=C;const V=w&&w.hasOwnProperty("value");if(this.value=function jr(Z){return Z??null}(V?w.value:w),V){const _=O(w);delete _.value,this.options=_}else this.options={};this.options.params||(this.options.params={})}absorbOptions(w){const C=w.params;if(C){const V=this.options.params;Object.keys(C).forEach(X=>{null==V[X]&&(V[X]=C[X])})}}}const qi="void",Yi=new Hi(qi);class Nr{constructor(w,C,V){this.id=w,this.hostElement=C,this._engine=V,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+w,yr(C,this._hostClassName)}listen(w,C,V,X){if(!this._triggers.has(C))throw function fn(Z,w){return new ve.wOt(3302,!1)}();if(null==V||0==V.length)throw function zn(Z){return new ve.wOt(3303,!1)}();if(!function $i(Z){return"start"==Z||"done"==Z}(V))throw function dn(Z,w){return new ve.wOt(3400,!1)}();const _=Me(this._elementListeners,w,[]),L={name:C,phase:V,callback:X};_.push(L);const R=Me(this._engine.statesByElement,w,new Map);return R.has(C)||(yr(w,Re),yr(w,Re+"-"+C),R.set(C,Yi)),()=>{this._engine.afterFlush(()=>{const B=_.indexOf(L);B>=0&&_.splice(B,1),this._triggers.has(C)||R.delete(C)})}}register(w,C){return!this._triggers.has(w)&&(this._triggers.set(w,C),!0)}_getTrigger(w){const C=this._triggers.get(w);if(!C)throw function en(Z){return new ve.wOt(3401,!1)}();return C}trigger(w,C,V,X=!0){const _=this._getTrigger(C),L=new Un(this.id,C,w);let R=this._engine.statesByElement.get(w);R||(yr(w,Re),yr(w,Re+"-"+C),this._engine.statesByElement.set(w,R=new Map));let B=R.get(C);const ee=new Hi(V,this.id);if(!(V&&V.hasOwnProperty("value"))&&B&&ee.absorbOptions(B.options),R.set(C,ee),B||(B=Yi),ee.value!==qi&&B.value===ee.value){if(!function Bi(Z,w){const C=Object.keys(Z),V=Object.keys(w);if(C.length!=V.length)return!1;for(let X=0;X<C.length;X++){const _=C[X];if(!w.hasOwnProperty(_)||Z[_]!==w[_])return!1}return!0}(B.params,ee.params)){const yn=[],jn=_.matchStyles(B.value,B.params,yn),cr=_.matchStyles(ee.value,ee.params,yn);yn.length?this._engine.reportError(yn):this._engine.afterFlush(()=>{me(w,jn),ue(w,cr)})}return}const qt=Me(this._engine.playersByElement,w,[]);qt.forEach(yn=>{yn.namespaceId==this.id&&yn.triggerName==C&&yn.queued&&yn.destroy()});let Dn=_.matchTransition(B.value,ee.value,w,ee.params),mn=!1;if(!Dn){if(!X)return;Dn=_.fallbackTransition,mn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:w,triggerName:C,transition:Dn,fromState:B,toState:ee,player:L,isFallbackTransition:mn}),mn||(yr(w,hs),L.onStart(()=>{cs(w,hs)})),L.onDone(()=>{let yn=this.players.indexOf(L);yn>=0&&this.players.splice(yn,1);const jn=this._engine.playersByElement.get(w);if(jn){let cr=jn.indexOf(L);cr>=0&&jn.splice(cr,1)}}),this.players.push(L),qt.push(L),L}deregister(w){this._triggers.delete(w),this._engine.statesByElement.forEach(C=>C.delete(w)),this._elementListeners.forEach((C,V)=>{this._elementListeners.set(V,C.filter(X=>X.name!=w))})}clearElementCache(w){this._engine.statesByElement.delete(w),this._elementListeners.delete(w);const C=this._engine.playersByElement.get(w);C&&(C.forEach(V=>V.destroy()),this._engine.playersByElement.delete(w))}_signalRemovalForInnerTriggers(w,C){const V=this._engine.driver.query(w,kt,!0);V.forEach(X=>{if(X[mi])return;const _=this._engine.fetchNamespacesByElement(X);_.size?_.forEach(L=>L.triggerLeaveAnimation(X,C,!1,!0)):this.clearElementCache(X)}),this._engine.afterFlushAnimationsDone(()=>V.forEach(X=>this.clearElementCache(X)))}triggerLeaveAnimation(w,C,V,X){const _=this._engine.statesByElement.get(w),L=new Map;if(_){const R=[];if(_.forEach((B,ee)=>{if(L.set(ee,B.value),this._triggers.has(ee)){const He=this.trigger(w,ee,qi,X);He&&R.push(He)}}),R.length)return this._engine.markElementAsRemoved(this.id,w,!0,C,L),V&&Yn(R).onDone(()=>this._engine.processLeaveNode(w)),!0}return!1}prepareLeaveAnimationListeners(w){const C=this._elementListeners.get(w),V=this._engine.statesByElement.get(w);if(C&&V){const X=new Set;C.forEach(_=>{const L=_.name;if(X.has(L))return;X.add(L);const B=this._triggers.get(L).fallbackTransition,ee=V.get(L)||Yi,He=new Hi(qi),st=new Un(this.id,L,w);this._engine.totalQueuedPlayers++,this._queue.push({element:w,triggerName:L,transition:B,fromState:ee,toState:He,player:st,isFallbackTransition:!0})})}}removeNode(w,C){const V=this._engine;if(w.childElementCount&&this._signalRemovalForInnerTriggers(w,C),this.triggerLeaveAnimation(w,C,!0))return;let X=!1;if(V.totalAnimations){const _=V.players.length?V.playersByQueriedElement.get(w):[];if(_&&_.length)X=!0;else{let L=w;for(;L=L.parentNode;)if(V.statesByElement.get(L)){X=!0;break}}}if(this.prepareLeaveAnimationListeners(w),X)V.markElementAsRemoved(this.id,w,!1,C);else{const _=w[mi];(!_||_===fr)&&(V.afterFlush(()=>this.clearElementCache(w)),V.destroyInnerAnimations(w),V._onRemovalComplete(w,C))}}insertNode(w,C){yr(w,this._hostClassName)}drainQueuedTransitions(w){const C=[];return this._queue.forEach(V=>{const X=V.player;if(X.destroyed)return;const _=V.element,L=this._elementListeners.get(_);L&&L.forEach(R=>{if(R.name==V.triggerName){const B=ae(_,V.triggerName,V.fromState.value,V.toState.value);B._data=w,Er(V.player,R.phase,B,R.callback)}}),X.markedForDestroy?this._engine.afterFlush(()=>{X.destroy()}):C.push(V)}),this._queue=[],C.sort((V,X)=>{const _=V.transition.ast.depCount,L=X.transition.ast.depCount;return 0==_||0==L?_-L:this._engine.driver.containsElement(V.element,X.element)?1:-1})}destroy(w){this.players.forEach(C=>C.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,w)}}class Ts{_onRemovalComplete(w,C){this.onRemovalComplete(w,C)}constructor(w,C,V){this.bodyNode=w,this.driver=C,this._normalizer=V,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(X,_)=>{}}get queuedPlayers(){const w=[];return this._namespaceList.forEach(C=>{C.players.forEach(V=>{V.queued&&w.push(V)})}),w}createNamespace(w,C){const V=new Nr(w,C,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,C)?this._balanceNamespaceList(V,C):(this.newHostElements.set(C,V),this.collectEnterElement(C)),this._namespaceLookup[w]=V}_balanceNamespaceList(w,C){const V=this._namespaceList,X=this.namespacesByHostElement;if(V.length-1>=0){let L=!1,R=this.driver.getParentElement(C);for(;R;){const B=X.get(R);if(B){const ee=V.indexOf(B);V.splice(ee+1,0,w),L=!0;break}R=this.driver.getParentElement(R)}L||V.unshift(w)}else V.push(w);return X.set(C,w),w}register(w,C){let V=this._namespaceLookup[w];return V||(V=this.createNamespace(w,C)),V}registerTrigger(w,C,V){let X=this._namespaceLookup[w];X&&X.register(C,V)&&this.totalAnimations++}destroy(w,C){w&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const V=this._fetchNamespace(w);this.namespacesByHostElement.delete(V.hostElement);const X=this._namespaceList.indexOf(V);X>=0&&this._namespaceList.splice(X,1),V.destroy(C),delete this._namespaceLookup[w]}))}_fetchNamespace(w){return this._namespaceLookup[w]}fetchNamespacesByElement(w){const C=new Set,V=this.statesByElement.get(w);if(V)for(let X of V.values())if(X.namespaceId){const _=this._fetchNamespace(X.namespaceId);_&&C.add(_)}return C}trigger(w,C,V,X){if(as(C)){const _=this._fetchNamespace(w);if(_)return _.trigger(C,V,X),!0}return!1}insertNode(w,C,V,X){if(!as(C))return;const _=C[mi];if(_&&_.setForRemoval){_.setForRemoval=!1,_.setForMove=!0;const L=this.collectedLeaveElements.indexOf(C);L>=0&&this.collectedLeaveElements.splice(L,1)}if(w){const L=this._fetchNamespace(w);L&&L.insertNode(C,V)}X&&this.collectEnterElement(C)}collectEnterElement(w){this.collectedEnterElements.push(w)}markElementAsDisabled(w,C){C?this.disabledNodes.has(w)||(this.disabledNodes.add(w),yr(w,os)):this.disabledNodes.has(w)&&(this.disabledNodes.delete(w),cs(w,os))}removeNode(w,C,V){if(as(C)){const X=w?this._fetchNamespace(w):null;X?X.removeNode(C,V):this.markElementAsRemoved(w,C,!1,V);const _=this.namespacesByHostElement.get(C);_&&_.id!==w&&_.removeNode(C,V)}else this._onRemovalComplete(C,V)}markElementAsRemoved(w,C,V,X,_){this.collectedLeaveElements.push(C),C[mi]={namespaceId:w,setForRemoval:X,hasAnimation:V,removedBeforeQueried:!1,previousTriggersValues:_}}listen(w,C,V,X,_){return as(C)?this._fetchNamespace(w).listen(C,V,X,_):()=>{}}_buildInstruction(w,C,V,X,_){return w.transition.build(this.driver,w.element,w.fromState.value,w.toState.value,V,X,w.fromState.options,w.toState.options,C,_)}destroyInnerAnimations(w){let C=this.driver.query(w,kt,!0);C.forEach(V=>this.destroyActiveAnimationsForElement(V)),0!=this.playersByQueriedElement.size&&(C=this.driver.query(w,Hn,!0),C.forEach(V=>this.finishActiveQueriedAnimationOnElement(V)))}destroyActiveAnimationsForElement(w){const C=this.playersByElement.get(w);C&&C.forEach(V=>{V.queued?V.markedForDestroy=!0:V.destroy()})}finishActiveQueriedAnimationOnElement(w){const C=this.playersByQueriedElement.get(w);C&&C.forEach(V=>V.finish())}whenRenderingDone(){return new Promise(w=>{if(this.players.length)return Yn(this.players).onDone(()=>w());w()})}processLeaveNode(w){const C=w[mi];if(C&&C.setForRemoval){if(w[mi]=fr,C.namespaceId){this.destroyInnerAnimations(w);const V=this._fetchNamespace(C.namespaceId);V&&V.clearElementCache(w)}this._onRemovalComplete(w,C.setForRemoval)}w.classList?.contains(os)&&this.markElementAsDisabled(w,!1),this.driver.query(w,".ng-animate-disabled",!0).forEach(V=>{this.markElementAsDisabled(V,!1)})}flush(w=-1){let C=[];if(this.newHostElements.size&&(this.newHostElements.forEach((V,X)=>this._balanceNamespaceList(V,X)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let V=0;V<this.collectedEnterElements.length;V++)yr(this.collectedEnterElements[V],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const V=[];try{C=this._flushAnimations(V,w)}finally{for(let X=0;X<V.length;X++)V[X]()}}else for(let V=0;V<this.collectedLeaveElements.length;V++)this.processLeaveNode(this.collectedLeaveElements[V]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(V=>V()),this._flushFns=[],this._whenQuietFns.length){const V=this._whenQuietFns;this._whenQuietFns=[],C.length?Yn(C).onDone(()=>{V.forEach(X=>X())}):V.forEach(X=>X())}}reportError(w){throw function Pn(Z){return new ve.wOt(3402,!1)}()}_flushAnimations(w,C){const V=new Rs,X=[],_=new Map,L=[],R=new Map,B=new Map,ee=new Map,He=new Set;this.disabledNodes.forEach(Kn=>{He.add(Kn);const rr=this.driver.query(Kn,".ng-animate-queued",!0);for(let Qn=0;Qn<rr.length;Qn++)He.add(rr[Qn])});const st=this.bodyNode,qt=Array.from(this.statesByElement.keys()),Dn=Ni(qt,this.collectedEnterElements),mn=new Map;let yn=0;Dn.forEach((Kn,rr)=>{const Qn=Fe+yn++;mn.set(rr,Qn),Kn.forEach(Ir=>yr(Ir,Qn))});const jn=[],cr=new Set,lr=new Set;for(let Kn=0;Kn<this.collectedLeaveElements.length;Kn++){const rr=this.collectedLeaveElements[Kn],Qn=rr[mi];Qn&&Qn.setForRemoval&&(jn.push(rr),cr.add(rr),Qn.hasAnimation?this.driver.query(rr,".ng-star-inserted",!0).forEach(Ir=>cr.add(Ir)):lr.add(rr))}const gr=new Map,Qr=Ni(qt,Array.from(cr));Qr.forEach((Kn,rr)=>{const Qn=ie+yn++;gr.set(rr,Qn),Kn.forEach(Ir=>yr(Ir,Qn))}),w.push(()=>{Dn.forEach((Kn,rr)=>{const Qn=mn.get(rr);Kn.forEach(Ir=>cs(Ir,Qn))}),Qr.forEach((Kn,rr)=>{const Qn=gr.get(rr);Kn.forEach(Ir=>cs(Ir,Qn))}),jn.forEach(Kn=>{this.processLeaveNode(Kn)})});const Ui=[],Ji=[];for(let Kn=this._namespaceList.length-1;Kn>=0;Kn--)this._namespaceList[Kn].drainQueuedTransitions(C).forEach(Qn=>{const Ir=Qn.player,ms=Qn.element;if(Ui.push(Ir),this.collectedEnterElements.length){const Fi=ms[mi];if(Fi&&Fi.setForMove){if(Fi.previousTriggersValues&&Fi.previousTriggersValues.has(Qn.triggerName)){const vo=Fi.previousTriggersValues.get(Qn.triggerName),ks=this.statesByElement.get(Qn.element);if(ks&&ks.has(Qn.triggerName)){const Zn=ks.get(Qn.triggerName);Zn.value=vo,ks.set(Qn.triggerName,Zn)}}return void Ir.destroy()}}const lo=!st||!this.driver.containsElement(st,ms),Ai=gr.get(ms),ki=mn.get(ms),ui=this._buildInstruction(Qn,V,ki,Ai,lo);if(ui.errors&&ui.errors.length)return void Ji.push(ui);if(lo)return Ir.onStart(()=>me(ms,ui.fromStyles)),Ir.onDestroy(()=>ue(ms,ui.toStyles)),void X.push(Ir);if(Qn.isFallbackTransition)return Ir.onStart(()=>me(ms,ui.fromStyles)),Ir.onDestroy(()=>ue(ms,ui.toStyles)),void X.push(Ir);const Co=[];ui.timelines.forEach(Fi=>{Fi.stretchStartingKeyframe=!0,this.disabledNodes.has(Fi.element)||Co.push(Fi)}),ui.timelines=Co,V.append(ms,ui.timelines),L.push({instruction:ui,player:Ir,element:ms}),ui.queriedElements.forEach(Fi=>Me(R,Fi,[]).push(Ir)),ui.preStyleProps.forEach((Fi,vo)=>{if(Fi.size){let ks=B.get(vo);ks||B.set(vo,ks=new Set),Fi.forEach((Zn,$a)=>ks.add($a))}}),ui.postStyleProps.forEach((Fi,vo)=>{let ks=ee.get(vo);ks||ee.set(vo,ks=new Set),Fi.forEach((Zn,$a)=>ks.add($a))})});if(Ji.length){const Kn=[];Ji.forEach(rr=>{Kn.push(function Tr(Z,w){return new ve.wOt(3505,!1)}())}),Ui.forEach(rr=>rr.destroy()),this.reportError(Kn)}const Fr=new Map,ci=new Map;L.forEach(Kn=>{const rr=Kn.element;V.has(rr)&&(ci.set(rr,rr),this._beforeAnimationBuild(Kn.player.namespaceId,Kn.instruction,Fr))}),X.forEach(Kn=>{const rr=Kn.element;this._getPreviousPlayers(rr,!1,Kn.namespaceId,Kn.triggerName,null).forEach(Ir=>{Me(Fr,rr,[]).push(Ir),Ir.destroy()})});const li=jn.filter(Kn=>fs(Kn,B,ee)),es=new Map;Os(es,this.driver,lr,ee,$e.kp).forEach(Kn=>{fs(Kn,B,ee)&&li.push(Kn)});const Mn=new Map;Dn.forEach((Kn,rr)=>{Os(Mn,this.driver,new Set(Kn),B,$e.FX)}),li.forEach(Kn=>{const rr=es.get(Kn),Qn=Mn.get(Kn);es.set(Kn,new Map([...rr?.entries()??[],...Qn?.entries()??[]]))});const No=[],yo=[],ps={};L.forEach(Kn=>{const{element:rr,player:Qn,instruction:Ir}=Kn;if(V.has(rr)){if(He.has(rr))return Qn.onDestroy(()=>ue(rr,Ir.toStyles)),Qn.disabled=!0,Qn.overrideTotalTime(Ir.totalTime),void X.push(Qn);let ms=ps;if(ci.size>1){let Ai=rr;const ki=[];for(;Ai=Ai.parentNode;){const ui=ci.get(Ai);if(ui){ms=ui;break}ki.push(Ai)}ki.forEach(ui=>ci.set(ui,ms))}const lo=this._buildAnimation(Qn.namespaceId,Ir,Fr,_,Mn,es);if(Qn.setRealPlayer(lo),ms===ps)No.push(Qn);else{const Ai=this.playersByElement.get(ms);Ai&&Ai.length&&(Qn.parentPlayer=Yn(Ai)),X.push(Qn)}}else me(rr,Ir.fromStyles),Qn.onDestroy(()=>ue(rr,Ir.toStyles)),yo.push(Qn),He.has(rr)&&X.push(Qn)}),yo.forEach(Kn=>{const rr=_.get(Kn.element);if(rr&&rr.length){const Qn=Yn(rr);Kn.setRealPlayer(Qn)}}),X.forEach(Kn=>{Kn.parentPlayer?Kn.syncPlayerEvents(Kn.parentPlayer):Kn.destroy()});for(let Kn=0;Kn<jn.length;Kn++){const rr=jn[Kn],Qn=rr[mi];if(cs(rr,ie),Qn&&Qn.hasAnimation)continue;let Ir=[];if(R.size){let lo=R.get(rr);lo&&lo.length&&Ir.push(...lo);let Ai=this.driver.query(rr,Hn,!0);for(let ki=0;ki<Ai.length;ki++){let ui=R.get(Ai[ki]);ui&&ui.length&&Ir.push(...ui)}}const ms=Ir.filter(lo=>!lo.destroyed);ms.length?kr(this,rr,ms):this.processLeaveNode(rr)}return jn.length=0,No.forEach(Kn=>{this.players.push(Kn),Kn.onDone(()=>{Kn.destroy();const rr=this.players.indexOf(Kn);this.players.splice(rr,1)}),Kn.play()}),No}afterFlush(w){this._flushFns.push(w)}afterFlushAnimationsDone(w){this._whenQuietFns.push(w)}_getPreviousPlayers(w,C,V,X,_){let L=[];if(C){const R=this.playersByQueriedElement.get(w);R&&(L=R)}else{const R=this.playersByElement.get(w);if(R){const B=!_||_==qi;R.forEach(ee=>{ee.queued||!B&&ee.triggerName!=X||L.push(ee)})}}return(V||X)&&(L=L.filter(R=>!(V&&V!=R.namespaceId||X&&X!=R.triggerName))),L}_beforeAnimationBuild(w,C,V){const _=C.element,L=C.isRemovalTransition?void 0:w,R=C.isRemovalTransition?void 0:C.triggerName;for(const B of C.timelines){const ee=B.element,He=ee!==_,st=Me(V,ee,[]);this._getPreviousPlayers(ee,He,L,R,C.toState).forEach(Dn=>{const mn=Dn.getRealPlayer();mn.beforeDestroy&&mn.beforeDestroy(),Dn.destroy(),st.push(Dn)})}me(_,C.fromStyles)}_buildAnimation(w,C,V,X,_,L){const R=C.triggerName,B=C.element,ee=[],He=new Set,st=new Set,qt=C.timelines.map(mn=>{const yn=mn.element;He.add(yn);const jn=yn[mi];if(jn&&jn.removedBeforeQueried)return new $e.sf(mn.duration,mn.delay);const cr=yn!==B,lr=function Hr(Z){const w=[];return As(Z,w),w}((V.get(yn)||bi).map(Fr=>Fr.getRealPlayer())).filter(Fr=>!!Fr.element&&Fr.element===yn),gr=_.get(yn),Qr=L.get(yn),Ui=Ar(this._normalizer,mn.keyframes,gr,Qr),Ji=this._buildPlayer(mn,Ui,lr);if(mn.subTimeline&&X&&st.add(yn),cr){const Fr=new Un(w,R,yn);Fr.setRealPlayer(Ji),ee.push(Fr)}return Ji});ee.forEach(mn=>{Me(this.playersByQueriedElement,mn.element,[]).push(mn),mn.onDone(()=>function Jr(Z,w,C){let V=Z.get(w);if(V){if(V.length){const X=V.indexOf(C);V.splice(X,1)}0==V.length&&Z.delete(w)}return V}(this.playersByQueriedElement,mn.element,mn))}),He.forEach(mn=>yr(mn,sn));const Dn=Yn(qt);return Dn.onDestroy(()=>{He.forEach(mn=>cs(mn,sn)),ue(B,C.toStyles)}),st.forEach(mn=>{Me(X,mn,[]).push(Dn)}),Dn}_buildPlayer(w,C,V){return C.length>0?this.driver.animate(w.element,C,w.duration,w.delay,w.easing,V):new $e.sf(w.duration,w.delay)}}class Un{constructor(w,C,V){this.namespaceId=w,this.triggerName=C,this.element=V,this._player=new $e.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(w){this._containsRealPlayer||(this._player=w,this._queuedCallbacks.forEach((C,V)=>{C.forEach(X=>Er(w,V,void 0,X))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(w.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(w){this.totalTime=w}syncPlayerEvents(w){const C=this._player;C.triggerCallback&&w.onStart(()=>C.triggerCallback("start")),w.onDone(()=>this.finish()),w.onDestroy(()=>this.destroy())}_queueEvent(w,C){Me(this._queuedCallbacks,w,[]).push(C)}onDone(w){this.queued&&this._queueEvent("done",w),this._player.onDone(w)}onStart(w){this.queued&&this._queueEvent("start",w),this._player.onStart(w)}onDestroy(w){this.queued&&this._queueEvent("destroy",w),this._player.onDestroy(w)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(w){this.queued||this._player.setPosition(w)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(w){const C=this._player;C.triggerCallback&&C.triggerCallback(w)}}function as(Z){return Z&&1===Z.nodeType}function Zi(Z,w){const C=Z.style.display;return Z.style.display=w??"none",C}function Os(Z,w,C,V,X){const _=[];C.forEach(B=>_.push(Zi(B)));const L=[];V.forEach((B,ee)=>{const He=new Map;B.forEach(st=>{const qt=w.computeStyle(ee,st,X);He.set(st,qt),(!qt||0==qt.length)&&(ee[mi]=ws,L.push(ee))}),Z.set(ee,He)});let R=0;return C.forEach(B=>Zi(B,_[R++])),L}function Ni(Z,w){const C=new Map;if(Z.forEach(R=>C.set(R,[])),0==w.length)return C;const X=new Set(w),_=new Map;function L(R){if(!R)return 1;let B=_.get(R);if(B)return B;const ee=R.parentNode;return B=C.has(ee)?ee:X.has(ee)?1:L(ee),_.set(R,B),B}return w.forEach(R=>{const B=L(R);1!==B&&C.get(B).push(R)}),C}function yr(Z,w){Z.classList?.add(w)}function cs(Z,w){Z.classList?.remove(w)}function kr(Z,w,C){Yn(C).onDone(()=>Z.processLeaveNode(w))}function As(Z,w){for(let C=0;C<Z.length;C++){const V=Z[C];V instanceof $e.ui?As(V.players,w):w.push(V)}}function fs(Z,w,C){const V=C.get(Z);if(!V)return!1;let X=w.get(Z);return X?V.forEach(_=>X.add(_)):w.set(Z,V),C.delete(Z),!0}class ai{constructor(w,C,V){this.bodyNode=w,this._driver=C,this._normalizer=V,this._triggerCache={},this.onRemovalComplete=(X,_)=>{},this._transitionEngine=new Ts(w,C,V),this._timelineEngine=new Kr(w,C,V),this._transitionEngine.onRemovalComplete=(X,_)=>this.onRemovalComplete(X,_)}registerTrigger(w,C,V,X,_){const L=w+"-"+X;let R=this._triggerCache[L];if(!R){const B=[],He=Ri(this._driver,_,B,[]);if(B.length)throw function Ve(Z,w){return new ve.wOt(3404,!1)}();R=function xi(Z,w,C){return new ds(Z,w,C)}(X,He,this._normalizer),this._triggerCache[L]=R}this._transitionEngine.registerTrigger(C,X,R)}register(w,C){this._transitionEngine.register(w,C)}destroy(w,C){this._transitionEngine.destroy(w,C)}onInsert(w,C,V,X){this._transitionEngine.insertNode(w,C,V,X)}onRemove(w,C,V){this._transitionEngine.removeNode(w,C,V)}disableAnimations(w,C){this._transitionEngine.markElementAsDisabled(w,C)}process(w,C,V,X){if("@"==V.charAt(0)){const[_,L]=qe(V);this._timelineEngine.command(_,C,L,X)}else this._transitionEngine.trigger(w,C,V,X)}listen(w,C,V,X,_){if("@"==V.charAt(0)){const[L,R]=qe(V);return this._timelineEngine.listen(L,C,R,_)}return this._transitionEngine.listen(w,C,V,X,_)}flush(w=-1){this._transitionEngine.flush(w)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(w){this._transitionEngine.afterFlushAnimationsDone(w)}}let oo=(()=>{class Z{static{this.initialStylesByElement=new WeakMap}constructor(C,V,X){this._element=C,this._startStyles=V,this._endStyles=X,this._state=0;let _=Z.initialStylesByElement.get(C);_||Z.initialStylesByElement.set(C,_=new Map),this._initialStyles=_}start(){this._state<1&&(this._startStyles&&ue(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ue(this._element,this._initialStyles),this._endStyles&&(ue(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Z.initialStylesByElement.delete(this._element),this._startStyles&&(me(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(me(this._element,this._endStyles),this._endStyles=null),ue(this._element,this._initialStyles),this._state=3)}}return Z})();function eo(Z){let w=null;return Z.forEach((C,V)=>{(function ao(Z){return"display"===Z||"position"===Z})(V)&&(w=w||new Map,w.set(V,C))}),w}class to{constructor(w,C,V,X){this.element=w,this.keyframes=C,this.options=V,this._specialStyles=X,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=V.duration,this._delay=V.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(w=>w()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const w=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,w,this.options),this._finalKeyframe=w.length?w[w.length-1]:new Map;const C=()=>this._onFinish();this.domPlayer.addEventListener("finish",C),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",C)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(w){const C=[];return w.forEach(V=>{C.push(Object.fromEntries(V))}),C}_triggerWebAnimation(w,C,V){return w.animate(this._convertKeyframesToObject(C),V)}onStart(w){this._originalOnStartFns.push(w),this._onStartFns.push(w)}onDone(w){this._originalOnDoneFns.push(w),this._onDoneFns.push(w)}onDestroy(w){this._onDestroyFns.push(w)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(w=>w()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(w=>w()),this._onDestroyFns=[])}setPosition(w){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=w*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const w=new Map;this.hasStarted()&&this._finalKeyframe.forEach((V,X)=>{"offset"!==X&&w.set(X,this._finished?V:tn(this.element,X))}),this.currentSnapshot=w}triggerCallback(w){const C="start"===w?this._onStartFns:this._onDoneFns;C.forEach(V=>V()),C.length=0}}class G{validateStyleProperty(w){return!0}validateAnimatableStyleProperty(w){return!0}matchesElement(w,C){return!1}containsElement(w,C){return oi(w,C)}getParentElement(w){return _t(w)}query(w,C,V){return et(w,C,V)}computeStyle(w,C,V){return window.getComputedStyle(w)[C]}animate(w,C,V,X,_,L=[]){const B={duration:V,delay:X,fill:0==X?"both":"forwards"};_&&(B.easing=_);const ee=new Map,He=L.filter(Dn=>Dn instanceof to);(function an(Z,w){return 0===Z||0===w})(V,X)&&He.forEach(Dn=>{Dn.currentSnapshot.forEach((mn,yn)=>ee.set(yn,mn))});let st=function W(Z){return Z.length?Z[0]instanceof Map?Z:Z.map(w=>N(w)):[]}(C).map(Dn=>Ae(Dn));st=function Qt(Z,w,C){if(C.size&&w.length){let V=w[0],X=[];if(C.forEach((_,L)=>{V.has(L)||X.push(L),V.set(L,_)}),X.length)for(let _=1;_<w.length;_++){let L=w[_];X.forEach(R=>L.set(R,tn(Z,R)))}}return w}(w,st,ee);const qt=function qs(Z,w){let C=null,V=null;return Array.isArray(w)&&w.length?(C=eo(w[0]),w.length>1&&(V=eo(w[w.length-1]))):w instanceof Map&&(C=eo(w)),C||V?new oo(Z,C,V):null}(w,st);return new to(w,st,B,qt)}}var E=j(177);let g=(()=>{class Z extends $e.S6{constructor(C,V){super(),this._nextAnimationId=0,this._renderer=C.createRenderer(V.body,{id:"0",encapsulation:ve.gXe.None,styles:[],data:{animation:[]}})}build(C){const V=this._nextAnimationId.toString();this._nextAnimationId++;const X=Array.isArray(C)?(0,$e.K2)(C):C;return Ce(this._renderer,null,V,"register",[X]),new M(V,this._renderer)}static{this.\u0275fac=function(V){return new(V||Z)(ve.KVO(ve._9s),ve.KVO(E.qQ))}}static{this.\u0275prov=ve.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();class M extends $e.Ro{constructor(w,C){super(),this._id=w,this._renderer=C}create(w,C){return new z(this._id,w,C||{},this._renderer)}}class z{constructor(w,C,V,X){this.id=w,this.element=C,this._renderer=X,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",V)}_listen(w,C){return this._renderer.listen(this.element,`@@${this.id}:${w}`,C)}_command(w,...C){return Ce(this._renderer,this.element,this.id,w,C)}onDone(w){this._listen("done",w)}onStart(w){this._listen("start",w)}onDestroy(w){this._listen("destroy",w)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(w){this._command("setPosition",w)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ce(Z,w,C,V,X){return Z.setProperty(w,`@@${C}:${V}`,X)}const Ut="@.disabled";let kn=(()=>{class Z{constructor(C,V,X){this.delegate=C,this.engine=V,this._zone=X,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,V.onRemovalComplete=(_,L)=>{const R=L?.parentNode(_);R&&L.removeChild(R,_)}}createRenderer(C,V){const _=this.delegate.createRenderer(C,V);if(!(C&&V&&V.data&&V.data.animation)){let He=this._rendererCache.get(_);return He||(He=new Cn("",_,this.engine,()=>this._rendererCache.delete(_)),this._rendererCache.set(_,He)),He}const L=V.id,R=V.id+"-"+this._currentId;this._currentId++,this.engine.register(R,C);const B=He=>{Array.isArray(He)?He.forEach(B):this.engine.registerTrigger(L,R,C,He.name,He)};return V.data.animation.forEach(B),new pr(this,R,_,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(C,V,X){C>=0&&C<this._microtaskId?this._zone.run(()=>V(X)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(_=>{const[L,R]=_;L(R)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([V,X]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static{this.\u0275fac=function(V){return new(V||Z)(ve.KVO(ve._9s),ve.KVO(ai),ve.KVO(ve.SKi))}}static{this.\u0275prov=ve.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();class Cn{constructor(w,C,V,X){this.namespaceId=w,this.delegate=C,this.engine=V,this._onDestroy=X}get data(){return this.delegate.data}destroyNode(w){this.delegate.destroyNode?.(w)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(w,C){return this.delegate.createElement(w,C)}createComment(w){return this.delegate.createComment(w)}createText(w){return this.delegate.createText(w)}appendChild(w,C){this.delegate.appendChild(w,C),this.engine.onInsert(this.namespaceId,C,w,!1)}insertBefore(w,C,V,X=!0){this.delegate.insertBefore(w,C,V),this.engine.onInsert(this.namespaceId,C,w,X)}removeChild(w,C,V){this.engine.onRemove(this.namespaceId,C,this.delegate)}selectRootElement(w,C){return this.delegate.selectRootElement(w,C)}parentNode(w){return this.delegate.parentNode(w)}nextSibling(w){return this.delegate.nextSibling(w)}setAttribute(w,C,V,X){this.delegate.setAttribute(w,C,V,X)}removeAttribute(w,C,V){this.delegate.removeAttribute(w,C,V)}addClass(w,C){this.delegate.addClass(w,C)}removeClass(w,C){this.delegate.removeClass(w,C)}setStyle(w,C,V,X){this.delegate.setStyle(w,C,V,X)}removeStyle(w,C,V){this.delegate.removeStyle(w,C,V)}setProperty(w,C,V){"@"==C.charAt(0)&&C==Ut?this.disableAnimations(w,!!V):this.delegate.setProperty(w,C,V)}setValue(w,C){this.delegate.setValue(w,C)}listen(w,C,V){return this.delegate.listen(w,C,V)}disableAnimations(w,C){this.engine.disableAnimations(w,C)}}class pr extends Cn{constructor(w,C,V,X,_){super(C,V,X,_),this.factory=w,this.namespaceId=C}setProperty(w,C,V){"@"==C.charAt(0)?"."==C.charAt(1)&&C==Ut?this.disableAnimations(w,V=void 0===V||!!V):this.engine.process(this.namespaceId,w,C.slice(1),V):this.delegate.setProperty(w,C,V)}listen(w,C,V){if("@"==C.charAt(0)){const X=function Sr(Z){switch(Z){case"body":return document.body;case"document":return document;case"window":return window;default:return Z}}(w);let _=C.slice(1),L="";return"@"!=_.charAt(0)&&([_,L]=function Cr(Z){const w=Z.indexOf(".");return[Z.substring(0,w),Z.slice(w+1)]}(_)),this.engine.listen(this.namespaceId,X,_,L,R=>{this.factory.scheduleListenerCallback(R._data||-1,V,R)})}return this.delegate.listen(w,C,V)}}const Wi=[{provide:$e.S6,useClass:g},{provide:vs,useFactory:function or(){return new Ps}},{provide:ai,useClass:(()=>{class Z extends ai{constructor(C,V,X,_){super(C.body,V,X)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(V){return new(V||Z)(ve.KVO(E.qQ),ve.KVO(ri),ve.KVO(vs),ve.KVO(ve.o8S))}}static{this.\u0275prov=ve.jDH({token:Z,factory:Z.\u0275fac})}}return Z})()},{provide:ve._9s,useFactory:function ei(Z,w,C){return new kn(Z,w,C)},deps:[p.B7,ai,ve.SKi]}],ti=[{provide:ri,useFactory:()=>new G},{provide:ve.bc$,useValue:"BrowserAnimations"},...Wi],vi=[{provide:ri,useClass:_n},{provide:ve.bc$,useValue:"NoopAnimations"},...Wi];let _i=(()=>{class Z{static withConfig(C){return{ngModule:Z,providers:C.disableAnimations?vi:ti}}static{this.\u0275fac=function(V){return new(V||Z)}}static{this.\u0275mod=ve.$C({type:Z})}static{this.\u0275inj=ve.G2t({providers:ti,imports:[p.Bb]})}}return Z})();var Qi=j(8834),Ti=j(6939),co=j(7987),Qs=j(6600);let Oo=(()=>{class Z{static{this.\u0275fac=function(V){return new(V||Z)}}static{this.\u0275mod=ve.$C({type:Z})}static{this.\u0275inj=ve.G2t({imports:[co.z_,Ti.jc,E.MD,Qi.Hl,Qs.yE,Qs.yE]})}}return Z})(),Ns=(()=>{class Z{static{this.\u0275fac=function(V){return new(V||Z)}}static{this.\u0275mod=ve.$C({type:Z,bootstrap:[ce]})}static{this.\u0275inj=ve.G2t({imports:[p.Bb,De,Pe.q1,Le.iI,Oe.YN,Oe.X1,Oo,_i,J.bf.initializeApp(ge_firebase),oe.cM,Y.y5]})}}return Z})();p.sG().bootstrapModule(Ns).catch(Z=>console.error(Z))},4412:(nn,tt,j)=>{j.d(tt,{t:()=>J});var p=j(1413);class J extends p.B{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){const Oe=super._subscribe(Y);return!Oe.closed&&Y.next(this._value),Oe}getValue(){const{hasError:Y,thrownError:Oe,_value:Le}=this;if(Y)throw Oe;return this._throwIfClosed(),Le}next(Y){super.next(this._value=Y)}}},1985:(nn,tt,j)=>{j.d(tt,{c:()=>Te});var p=j(7707),J=j(8359),oe=j(3494),Y=j(1203),Oe=j(1026),Le=j(8071),ve=j(9786);let Te=(()=>{class Pe{constructor(ht){ht&&(this._subscribe=ht)}lift(ht){const Ot=new Pe;return Ot.source=this,Ot.operator=ht,Ot}subscribe(ht,Ot,Et){const yt=function ge(Pe){return Pe&&Pe instanceof p.vU||function ce(Pe){return Pe&&(0,Le.T)(Pe.next)&&(0,Le.T)(Pe.error)&&(0,Le.T)(Pe.complete)}(Pe)&&(0,J.Uv)(Pe)}(ht)?ht:new p.Ms(ht,Ot,Et);return(0,ve.Y)(()=>{const{operator:St,source:Yt}=this;yt.add(St?St.call(yt,Yt):Yt?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(ht){try{return this._subscribe(ht)}catch(Ot){ht.error(Ot)}}forEach(ht,Ot){return new(Ot=De(Ot))((Et,yt)=>{const St=new p.Ms({next:Yt=>{try{ht(Yt)}catch(Rt){yt(Rt),St.unsubscribe()}},error:yt,complete:Et});this.subscribe(St)})}_subscribe(ht){var Ot;return null===(Ot=this.source)||void 0===Ot?void 0:Ot.subscribe(ht)}[oe.s](){return this}pipe(...ht){return(0,Y.m)(ht)(this)}toPromise(ht){return new(ht=De(ht))((Ot,Et)=>{let yt;this.subscribe(St=>yt=St,St=>Et(St),()=>Ot(yt))})}}return Pe.create=$e=>new Pe($e),Pe})();function De(Pe){var $e;return null!==($e=Pe??Oe.$.Promise)&&void 0!==$e?$e:Promise}},1413:(nn,tt,j)=>{j.d(tt,{B:()=>ve});var p=j(1985),J=j(8359);const Y=(0,j(1853).L)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=j(7908),Le=j(9786);let ve=(()=>{class De extends p.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ge){const Pe=new Te(this,this);return Pe.operator=ge,Pe}_throwIfClosed(){if(this.closed)throw new Y}next(ge){(0,Le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(ge)}})}error(ge){(0,Le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ge;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(ge)}})}complete(){(0,Le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ge}=this;for(;ge.length;)ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ge;return(null===(ge=this.observers)||void 0===ge?void 0:ge.length)>0}_trySubscribe(ge){return this._throwIfClosed(),super._trySubscribe(ge)}_subscribe(ge){return this._throwIfClosed(),this._checkFinalizedStatuses(ge),this._innerSubscribe(ge)}_innerSubscribe(ge){const{hasError:Pe,isStopped:$e,observers:ht}=this;return Pe||$e?J.Kn:(this.currentObservers=null,ht.push(ge),new J.yU(()=>{this.currentObservers=null,(0,Oe.o)(ht,ge)}))}_checkFinalizedStatuses(ge){const{hasError:Pe,thrownError:$e,isStopped:ht}=this;Pe?ge.error($e):ht&&ge.complete()}asObservable(){const ge=new p.c;return ge.source=this,ge}}return De.create=(ce,ge)=>new Te(ce,ge),De})();class Te extends ve{constructor(ce,ge){super(),this.destination=ce,this.source=ge}next(ce){var ge,Pe;null===(Pe=null===(ge=this.destination)||void 0===ge?void 0:ge.next)||void 0===Pe||Pe.call(ge,ce)}error(ce){var ge,Pe;null===(Pe=null===(ge=this.destination)||void 0===ge?void 0:ge.error)||void 0===Pe||Pe.call(ge,ce)}complete(){var ce,ge;null===(ge=null===(ce=this.destination)||void 0===ce?void 0:ce.complete)||void 0===ge||ge.call(ce)}_subscribe(ce){var ge,Pe;return null!==(Pe=null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(ce))&&void 0!==Pe?Pe:J.Kn}}},7707:(nn,tt,j)=>{j.d(tt,{Ms:()=>Et,vU:()=>Pe});var p=j(8071),J=j(8359),oe=j(1026),Y=j(5334),Oe=j(5343);const Le=De("C",void 0,void 0);function De(de,Ue,Ne){return{kind:de,value:Ue,error:Ne}}var ce=j(9270),ge=j(9786);class Pe extends J.yU{constructor(Ue){super(),this.isStopped=!1,Ue?(this.destination=Ue,(0,J.Uv)(Ue)&&Ue.add(this)):this.destination=Rt}static create(Ue,Ne,Je){return new Et(Ue,Ne,Je)}next(Ue){this.isStopped?Yt(function Te(de){return De("N",de,void 0)}(Ue),this):this._next(Ue)}error(Ue){this.isStopped?Yt(function ve(de){return De("E",void 0,de)}(Ue),this):(this.isStopped=!0,this._error(Ue))}complete(){this.isStopped?Yt(Le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ue){this.destination.next(Ue)}_error(Ue){try{this.destination.error(Ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function ht(de,Ue){return $e.call(de,Ue)}class Ot{constructor(Ue){this.partialObserver=Ue}next(Ue){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(Ue)}catch(Je){yt(Je)}}error(Ue){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(Ue)}catch(Je){yt(Je)}else yt(Ue)}complete(){const{partialObserver:Ue}=this;if(Ue.complete)try{Ue.complete()}catch(Ne){yt(Ne)}}}class Et extends Pe{constructor(Ue,Ne,Je){let We;if(super(),(0,p.T)(Ue)||!Ue)We={next:Ue??void 0,error:Ne??void 0,complete:Je??void 0};else{let It;this&&oe.$.useDeprecatedNextContext?(It=Object.create(Ue),It.unsubscribe=()=>this.unsubscribe(),We={next:Ue.next&&ht(Ue.next,It),error:Ue.error&&ht(Ue.error,It),complete:Ue.complete&&ht(Ue.complete,It)}):We=Ue}this.destination=new Ot(We)}}function yt(de){oe.$.useDeprecatedSynchronousErrorHandling?(0,ge.l)(de):(0,Y.m)(de)}function Yt(de,Ue){const{onStoppedNotification:Ne}=oe.$;Ne&&ce.f.setTimeout(()=>Ne(de,Ue))}const Rt={closed:!0,next:Oe.l,error:function St(de){throw de},complete:Oe.l}},8359:(nn,tt,j)=>{j.d(tt,{Kn:()=>Le,yU:()=>Oe,Uv:()=>ve});var p=j(8071);const oe=(0,j(1853).L)(De=>function(ge){De(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((Pe,$e)=>`${$e+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge});var Y=j(7908);class Oe{constructor(ce){this.initialTeardown=ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ce;if(!this.closed){this.closed=!0;const{_parentage:ge}=this;if(ge)if(this._parentage=null,Array.isArray(ge))for(const ht of ge)ht.remove(this);else ge.remove(this);const{initialTeardown:Pe}=this;if((0,p.T)(Pe))try{Pe()}catch(ht){ce=ht instanceof oe?ht.errors:[ht]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const ht of $e)try{Te(ht)}catch(Ot){ce=ce??[],Ot instanceof oe?ce=[...ce,...Ot.errors]:ce.push(Ot)}}if(ce)throw new oe(ce)}}add(ce){var ge;if(ce&&ce!==this)if(this.closed)Te(ce);else{if(ce instanceof Oe){if(ce.closed||ce._hasParent(this))return;ce._addParent(this)}(this._finalizers=null!==(ge=this._finalizers)&&void 0!==ge?ge:[]).push(ce)}}_hasParent(ce){const{_parentage:ge}=this;return ge===ce||Array.isArray(ge)&&ge.includes(ce)}_addParent(ce){const{_parentage:ge}=this;this._parentage=Array.isArray(ge)?(ge.push(ce),ge):ge?[ge,ce]:ce}_removeParent(ce){const{_parentage:ge}=this;ge===ce?this._parentage=null:Array.isArray(ge)&&(0,Y.o)(ge,ce)}remove(ce){const{_finalizers:ge}=this;ge&&(0,Y.o)(ge,ce),ce instanceof Oe&&ce._removeParent(this)}}Oe.EMPTY=(()=>{const De=new Oe;return De.closed=!0,De})();const Le=Oe.EMPTY;function ve(De){return De instanceof Oe||De&&"closed"in De&&(0,p.T)(De.remove)&&(0,p.T)(De.add)&&(0,p.T)(De.unsubscribe)}function Te(De){(0,p.T)(De)?De():De.unsubscribe()}},1026:(nn,tt,j)=>{j.d(tt,{$:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2398:(nn,tt,j)=>{j.d(tt,{G:()=>Le});var p=j(1985),J=j(8359),oe=j(9898),Y=j(4360),Oe=j(9974);class Le extends p.c{constructor(Te,De){super(),this.source=Te,this.subjectFactory=De,this._subject=null,this._refCount=0,this._connection=null,(0,Oe.S)(Te)&&(this.lift=Te.lift)}_subscribe(Te){return this.getSubject().subscribe(Te)}getSubject(){const Te=this._subject;return(!Te||Te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:Te}=this;this._subject=this._connection=null,Te?.unsubscribe()}connect(){let Te=this._connection;if(!Te){Te=this._connection=new J.yU;const De=this.getSubject();Te.add(this.source.subscribe((0,Y._)(De,void 0,()=>{this._teardown(),De.complete()},ce=>{this._teardown(),De.error(ce)},()=>this._teardown()))),Te.closed&&(this._connection=null,Te=J.yU.EMPTY)}return Te}refCount(){return(0,oe.B)()(this)}}},4572:(nn,tt,j)=>{j.d(tt,{z:()=>ce});var p=j(1985),J=j(3073),oe=j(8455),Y=j(3669),Oe=j(6450),Le=j(9326),ve=j(8496),Te=j(4360),De=j(5225);function ce(...$e){const ht=(0,Le.lI)($e),Ot=(0,Le.ms)($e),{args:Et,keys:yt}=(0,J.D)($e);if(0===Et.length)return(0,oe.H)([],ht);const St=new p.c(function ge($e,ht,Ot=Y.D){return Et=>{Pe(ht,()=>{const{length:yt}=$e,St=new Array(yt);let Yt=yt,Rt=yt;for(let de=0;de<yt;de++)Pe(ht,()=>{const Ue=(0,oe.H)($e[de],ht);let Ne=!1;Ue.subscribe((0,Te._)(Et,Je=>{St[de]=Je,Ne||(Ne=!0,Rt--),Rt||Et.next(Ot(St.slice()))},()=>{--Yt||Et.complete()}))},Et)},Et)}}(Et,ht,yt?Yt=>(0,ve.e)(yt,Yt):Y.D));return Ot?St.pipe((0,Oe.I)(Ot)):St}function Pe($e,ht,Ot){$e?(0,De.N)(Ot,$e,ht):ht()}},8793:(nn,tt,j)=>{j.d(tt,{x:()=>Oe});var p=j(6365),oe=j(9326),Y=j(8455);function Oe(...Le){return function J(){return(0,p.U)(1)}()((0,Y.H)(Le,(0,oe.lI)(Le)))}},9030:(nn,tt,j)=>{j.d(tt,{v:()=>oe});var p=j(1985),J=j(8750);function oe(Y){return new p.c(Oe=>{(0,J.Tg)(Y()).subscribe(Oe)})}},983:(nn,tt,j)=>{j.d(tt,{w:()=>J});const J=new(j(1985).c)(Oe=>Oe.complete())},7468:(nn,tt,j)=>{j.d(tt,{p:()=>Te});var p=j(1985),J=j(3073),oe=j(8750),Y=j(9326),Oe=j(4360),Le=j(6450),ve=j(8496);function Te(...De){const ce=(0,Y.ms)(De),{args:ge,keys:Pe}=(0,J.D)(De),$e=new p.c(ht=>{const{length:Ot}=ge;if(!Ot)return void ht.complete();const Et=new Array(Ot);let yt=Ot,St=Ot;for(let Yt=0;Yt<Ot;Yt++){let Rt=!1;(0,oe.Tg)(ge[Yt]).subscribe((0,Oe._)(ht,de=>{Rt||(Rt=!0,St--),Et[Yt]=de},()=>yt--,void 0,()=>{(!yt||!Rt)&&(St||ht.next(Pe?(0,ve.e)(Pe,Et):Et),ht.complete())}))}});return ce?$e.pipe((0,Le.I)(ce)):$e}},8455:(nn,tt,j)=>{j.d(tt,{H:()=>Ue});var p=j(8750),J=j(941),oe=j(6745),Le=j(1985),Te=j(4761),De=j(8071),ce=j(5225);function Pe(Ne,Je){if(!Ne)throw new Error("Iterable cannot be null");return new Le.c(We=>{(0,ce.N)(We,Je,()=>{const It=Ne[Symbol.asyncIterator]();(0,ce.N)(We,Je,()=>{It.next().then(Ht=>{Ht.done?We.complete():We.next(Ht.value)})},0,!0)})})}var $e=j(5055),ht=j(9858),Ot=j(7441),Et=j(5397),yt=j(7953),St=j(591),Yt=j(5196);function Ue(Ne,Je){return Je?function de(Ne,Je){if(null!=Ne){if((0,$e.l)(Ne))return function Y(Ne,Je){return(0,p.Tg)(Ne).pipe((0,oe._)(Je),(0,J.Q)(Je))}(Ne,Je);if((0,Ot.X)(Ne))return function ve(Ne,Je){return new Le.c(We=>{let It=0;return Je.schedule(function(){It===Ne.length?We.complete():(We.next(Ne[It++]),We.closed||this.schedule())})})}(Ne,Je);if((0,ht.y)(Ne))return function Oe(Ne,Je){return(0,p.Tg)(Ne).pipe((0,oe._)(Je),(0,J.Q)(Je))}(Ne,Je);if((0,yt.T)(Ne))return Pe(Ne,Je);if((0,Et.x)(Ne))return function ge(Ne,Je){return new Le.c(We=>{let It;return(0,ce.N)(We,Je,()=>{It=Ne[Te.l](),(0,ce.N)(We,Je,()=>{let Ht,pt;try{({value:Ht,done:pt}=It.next())}catch(ln){return void We.error(ln)}pt?We.complete():We.next(Ht)},0,!0)}),()=>(0,De.T)(It?.return)&&It.return()})}(Ne,Je);if((0,Yt.U)(Ne))return function Rt(Ne,Je){return Pe((0,Yt.C)(Ne),Je)}(Ne,Je)}throw(0,St.L)(Ne)}(Ne,Je):(0,p.Tg)(Ne)}},8750:(nn,tt,j)=>{j.d(tt,{Tg:()=>$e});var p=j(1635),J=j(7441),oe=j(9858),Y=j(1985),Oe=j(5055),Le=j(7953),ve=j(591),Te=j(5397),De=j(5196),ce=j(8071),ge=j(5334),Pe=j(3494);function $e(de){if(de instanceof Y.c)return de;if(null!=de){if((0,Oe.l)(de))return function ht(de){return new Y.c(Ue=>{const Ne=de[Pe.s]();if((0,ce.T)(Ne.subscribe))return Ne.subscribe(Ue);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(de);if((0,J.X)(de))return function Ot(de){return new Y.c(Ue=>{for(let Ne=0;Ne<de.length&&!Ue.closed;Ne++)Ue.next(de[Ne]);Ue.complete()})}(de);if((0,oe.y)(de))return function Et(de){return new Y.c(Ue=>{de.then(Ne=>{Ue.closed||(Ue.next(Ne),Ue.complete())},Ne=>Ue.error(Ne)).then(null,ge.m)})}(de);if((0,Le.T)(de))return St(de);if((0,Te.x)(de))return function yt(de){return new Y.c(Ue=>{for(const Ne of de)if(Ue.next(Ne),Ue.closed)return;Ue.complete()})}(de);if((0,De.U)(de))return function Yt(de){return St((0,De.C)(de))}(de)}throw(0,ve.L)(de)}function St(de){return new Y.c(Ue=>{(function Rt(de,Ue){var Ne,Je,We,It;return(0,p.sH)(this,void 0,void 0,function*(){try{for(Ne=(0,p.xN)(de);!(Je=yield Ne.next()).done;)if(Ue.next(Je.value),Ue.closed)return}catch(Ht){We={error:Ht}}finally{try{Je&&!Je.done&&(It=Ne.return)&&(yield It.call(Ne))}finally{if(We)throw We.error}}Ue.complete()})})(de,Ue).catch(Ne=>Ue.error(Ne))})}},7786:(nn,tt,j)=>{j.d(tt,{h:()=>Le});var p=j(6365),J=j(8750),oe=j(983),Y=j(9326),Oe=j(8455);function Le(...ve){const Te=(0,Y.lI)(ve),De=(0,Y.R0)(ve,1/0),ce=ve;return ce.length?1===ce.length?(0,J.Tg)(ce[0]):(0,p.U)(De)((0,Oe.H)(ce,Te)):oe.w}},7673:(nn,tt,j)=>{j.d(tt,{of:()=>oe});var p=j(9326),J=j(8455);function oe(...Y){const Oe=(0,p.lI)(Y);return(0,J.H)(Y,Oe)}},8810:(nn,tt,j)=>{j.d(tt,{$:()=>oe});var p=j(1985),J=j(8071);function oe(Y,Oe){const Le=(0,J.T)(Y)?Y:()=>Y,ve=Te=>Te.error(Le());return new p.c(Oe?Te=>Oe.schedule(ve,0,Te):ve)}},4360:(nn,tt,j)=>{j.d(tt,{_:()=>J});var p=j(7707);function J(Y,Oe,Le,ve,Te){return new oe(Y,Oe,Le,ve,Te)}class oe extends p.vU{constructor(Oe,Le,ve,Te,De,ce){super(Oe),this.onFinalize=De,this.shouldUnsubscribe=ce,this._next=Le?function(ge){try{Le(ge)}catch(Pe){Oe.error(Pe)}}:super._next,this._error=Te?function(ge){try{Te(ge)}catch(Pe){Oe.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(ge){Oe.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Le}=this;super.unsubscribe(),!Le&&(null===(Oe=this.onFinalize)||void 0===Oe||Oe.call(this))}}}},9437:(nn,tt,j)=>{j.d(tt,{W:()=>Y});var p=j(8750),J=j(4360),oe=j(9974);function Y(Oe){return(0,oe.N)((Le,ve)=>{let ce,Te=null,De=!1;Te=Le.subscribe((0,J._)(ve,void 0,void 0,ge=>{ce=(0,p.Tg)(Oe(ge,Y(Oe)(Le))),Te?(Te.unsubscribe(),Te=null,ce.subscribe(ve)):De=!0})),De&&(Te.unsubscribe(),Te=null,ce.subscribe(ve))})}},274:(nn,tt,j)=>{j.d(tt,{H:()=>oe});var p=j(1397),J=j(8071);function oe(Y,Oe){return(0,J.T)(Oe)?(0,p.Z)(Y,Oe,1):(0,p.Z)(Y,1)}},152:(nn,tt,j)=>{j.d(tt,{B:()=>Y});var p=j(3236),J=j(9974),oe=j(4360);function Y(Oe,Le=p.E){return(0,J.N)((ve,Te)=>{let De=null,ce=null,ge=null;const Pe=()=>{if(De){De.unsubscribe(),De=null;const ht=ce;ce=null,Te.next(ht)}};function $e(){const ht=ge+Oe,Ot=Le.now();if(Ot<ht)return De=this.schedule(void 0,ht-Ot),void Te.add(De);Pe()}ve.subscribe((0,oe._)(Te,ht=>{ce=ht,ge=Le.now(),De||(De=Le.schedule($e,Oe),Te.add(De))},()=>{Pe(),Te.complete()},void 0,()=>{ce=De=null}))})}},9901:(nn,tt,j)=>{j.d(tt,{U:()=>oe});var p=j(9974),J=j(4360);function oe(Y){return(0,p.N)((Oe,Le)=>{let ve=!1;Oe.subscribe((0,J._)(Le,Te=>{ve=!0,Le.next(Te)},()=>{ve||Le.next(Y),Le.complete()}))})}},3294:(nn,tt,j)=>{j.d(tt,{F:()=>Y});var p=j(3669),J=j(9974),oe=j(4360);function Y(Le,ve=p.D){return Le=Le??Oe,(0,J.N)((Te,De)=>{let ce,ge=!0;Te.subscribe((0,oe._)(De,Pe=>{const $e=ve(Pe);(ge||!Le(ce,$e))&&(ge=!1,ce=$e,De.next(Pe))}))})}function Oe(Le,ve){return Le===ve}},5964:(nn,tt,j)=>{j.d(tt,{p:()=>oe});var p=j(9974),J=j(4360);function oe(Y,Oe){return(0,p.N)((Le,ve)=>{let Te=0;Le.subscribe((0,J._)(ve,De=>Y.call(Oe,De,Te++)&&ve.next(De)))})}},980:(nn,tt,j)=>{j.d(tt,{j:()=>J});var p=j(9974);function J(oe){return(0,p.N)((Y,Oe)=>{try{Y.subscribe(Oe)}finally{Oe.add(oe)}})}},1594:(nn,tt,j)=>{j.d(tt,{$:()=>ve});var p=j(9350),J=j(5964),oe=j(6697),Y=j(9901),Oe=j(3774),Le=j(3669);function ve(Te,De){const ce=arguments.length>=2;return ge=>ge.pipe(Te?(0,J.p)((Pe,$e)=>Te(Pe,$e,ge)):Le.D,(0,oe.s)(1),ce?(0,Y.U)(De):(0,Oe.v)(()=>new p.G))}},6354:(nn,tt,j)=>{j.d(tt,{T:()=>oe});var p=j(9974),J=j(4360);function oe(Y,Oe){return(0,p.N)((Le,ve)=>{let Te=0;Le.subscribe((0,J._)(ve,De=>{ve.next(Y.call(Oe,De,Te++))}))})}},6365:(nn,tt,j)=>{j.d(tt,{U:()=>oe});var p=j(1397),J=j(3669);function oe(Y=1/0){return(0,p.Z)(J.D,Y)}},1397:(nn,tt,j)=>{j.d(tt,{Z:()=>Te});var p=j(6354),J=j(8750),oe=j(9974),Y=j(5225),Oe=j(4360),ve=j(8071);function Te(De,ce,ge=1/0){return(0,ve.T)(ce)?Te((Pe,$e)=>(0,p.T)((ht,Ot)=>ce(Pe,ht,$e,Ot))((0,J.Tg)(De(Pe,$e))),ge):("number"==typeof ce&&(ge=ce),(0,oe.N)((Pe,$e)=>function Le(De,ce,ge,Pe,$e,ht,Ot,Et){const yt=[];let St=0,Yt=0,Rt=!1;const de=()=>{Rt&&!yt.length&&!St&&ce.complete()},Ue=Je=>St<Pe?Ne(Je):yt.push(Je),Ne=Je=>{ht&&ce.next(Je),St++;let We=!1;(0,J.Tg)(ge(Je,Yt++)).subscribe((0,Oe._)(ce,It=>{$e?.(It),ht?Ue(It):ce.next(It)},()=>{We=!0},void 0,()=>{if(We)try{for(St--;yt.length&&St<Pe;){const It=yt.shift();Ot?(0,Y.N)(ce,Ot,()=>Ne(It)):Ne(It)}de()}catch(It){ce.error(It)}}))};return De.subscribe((0,Oe._)(ce,Ue,()=>{Rt=!0,de()})),()=>{Et?.()}}(Pe,$e,De,ge)))}},941:(nn,tt,j)=>{j.d(tt,{Q:()=>Y});var p=j(5225),J=j(9974),oe=j(4360);function Y(Oe,Le=0){return(0,J.N)((ve,Te)=>{ve.subscribe((0,oe._)(Te,De=>(0,p.N)(Te,Oe,()=>Te.next(De),Le),()=>(0,p.N)(Te,Oe,()=>Te.complete(),Le),De=>(0,p.N)(Te,Oe,()=>Te.error(De),Le)))})}},9898:(nn,tt,j)=>{j.d(tt,{B:()=>oe});var p=j(9974),J=j(4360);function oe(){return(0,p.N)((Y,Oe)=>{let Le=null;Y._refCount++;const ve=(0,J._)(Oe,void 0,void 0,void 0,()=>{if(!Y||Y._refCount<=0||0<--Y._refCount)return void(Le=null);const Te=Y._connection,De=Le;Le=null,Te&&(!De||Te===De)&&Te.unsubscribe(),Oe.unsubscribe()});Y.subscribe(ve),ve.closed||(Le=Y.connect())})}},2816:(nn,tt,j)=>{j.d(tt,{S:()=>Y});var p=j(9974),J=j(4360);function Y(Oe,Le){return(0,p.N)(function oe(Oe,Le,ve,Te,De){return(ce,ge)=>{let Pe=ve,$e=Le,ht=0;ce.subscribe((0,J._)(ge,Ot=>{const Et=ht++;$e=Pe?Oe($e,Ot,Et):(Pe=!0,Ot),Te&&ge.next($e)},De&&(()=>{Pe&&ge.next($e),ge.complete()})))}}(Oe,Le,arguments.length>=2,!0))}},7647:(nn,tt,j)=>{j.d(tt,{u:()=>Oe});var p=j(8750),J=j(1413),oe=j(7707),Y=j(9974);function Oe(ve={}){const{connector:Te=(()=>new J.B),resetOnError:De=!0,resetOnComplete:ce=!0,resetOnRefCountZero:ge=!0}=ve;return Pe=>{let $e,ht,Ot,Et=0,yt=!1,St=!1;const Yt=()=>{ht?.unsubscribe(),ht=void 0},Rt=()=>{Yt(),$e=Ot=void 0,yt=St=!1},de=()=>{const Ue=$e;Rt(),Ue?.unsubscribe()};return(0,Y.N)((Ue,Ne)=>{Et++,!St&&!yt&&Yt();const Je=Ot=Ot??Te();Ne.add(()=>{Et--,0===Et&&!St&&!yt&&(ht=Le(de,ge))}),Je.subscribe(Ne),!$e&&Et>0&&($e=new oe.Ms({next:We=>Je.next(We),error:We=>{St=!0,Yt(),ht=Le(Rt,De,We),Je.error(We)},complete:()=>{yt=!0,Yt(),ht=Le(Rt,ce),Je.complete()}}),(0,p.Tg)(Ue).subscribe($e))})(Pe)}}function Le(ve,Te,...De){if(!0===Te)return void ve();if(!1===Te)return;const ce=new oe.Ms({next:()=>{ce.unsubscribe(),ve()}});return(0,p.Tg)(Te(...De)).subscribe(ce)}},9172:(nn,tt,j)=>{j.d(tt,{Z:()=>Y});var p=j(8793),J=j(9326),oe=j(9974);function Y(...Oe){const Le=(0,J.lI)(Oe);return(0,oe.N)((ve,Te)=>{(Le?(0,p.x)(Oe,ve,Le):(0,p.x)(Oe,ve)).subscribe(Te)})}},6745:(nn,tt,j)=>{j.d(tt,{_:()=>J});var p=j(9974);function J(oe,Y=0){return(0,p.N)((Oe,Le)=>{Le.add(oe.schedule(()=>Oe.subscribe(Le),Y))})}},5558:(nn,tt,j)=>{j.d(tt,{n:()=>Y});var p=j(8750),J=j(9974),oe=j(4360);function Y(Oe,Le){return(0,J.N)((ve,Te)=>{let De=null,ce=0,ge=!1;const Pe=()=>ge&&!De&&Te.complete();ve.subscribe((0,oe._)(Te,$e=>{De?.unsubscribe();let ht=0;const Ot=ce++;(0,p.Tg)(Oe($e,Ot)).subscribe(De=(0,oe._)(Te,Et=>Te.next(Le?Le($e,Et,Ot,ht++):Et),()=>{De=null,Pe()}))},()=>{ge=!0,Pe()}))})}},6697:(nn,tt,j)=>{j.d(tt,{s:()=>Y});var p=j(983),J=j(9974),oe=j(4360);function Y(Oe){return Oe<=0?()=>p.w:(0,J.N)((Le,ve)=>{let Te=0;Le.subscribe((0,oe._)(ve,De=>{++Te<=Oe&&(ve.next(De),Oe<=Te&&ve.complete())}))})}},6977:(nn,tt,j)=>{j.d(tt,{Q:()=>Oe});var p=j(9974),J=j(4360),oe=j(8750),Y=j(5343);function Oe(Le){return(0,p.N)((ve,Te)=>{(0,oe.Tg)(Le).subscribe((0,J._)(Te,()=>Te.complete(),Y.l)),!Te.closed&&ve.subscribe(Te)})}},8141:(nn,tt,j)=>{j.d(tt,{M:()=>Oe});var p=j(8071),J=j(9974),oe=j(4360),Y=j(3669);function Oe(Le,ve,Te){const De=(0,p.T)(Le)||ve||Te?{next:Le,error:ve,complete:Te}:Le;return De?(0,J.N)((ce,ge)=>{var Pe;null===(Pe=De.subscribe)||void 0===Pe||Pe.call(De);let $e=!0;ce.subscribe((0,oe._)(ge,ht=>{var Ot;null===(Ot=De.next)||void 0===Ot||Ot.call(De,ht),ge.next(ht)},()=>{var ht;$e=!1,null===(ht=De.complete)||void 0===ht||ht.call(De),ge.complete()},ht=>{var Ot;$e=!1,null===(Ot=De.error)||void 0===Ot||Ot.call(De,ht),ge.error(ht)},()=>{var ht,Ot;$e&&(null===(ht=De.unsubscribe)||void 0===ht||ht.call(De)),null===(Ot=De.finalize)||void 0===Ot||Ot.call(De)}))}):Y.D}},3774:(nn,tt,j)=>{j.d(tt,{v:()=>Y});var p=j(9350),J=j(9974),oe=j(4360);function Y(Le=Oe){return(0,J.N)((ve,Te)=>{let De=!1;ve.subscribe((0,oe._)(Te,ce=>{De=!0,Te.next(ce)},()=>De?Te.complete():Te.error(Le())))})}function Oe(){return new p.G}},6780:(nn,tt,j)=>{j.d(tt,{R:()=>Oe});var p=j(8359);class J extends p.yU{constructor(ve,Te){super()}schedule(ve,Te=0){return this}}const oe={setInterval(Le,ve,...Te){const{delegate:De}=oe;return De?.setInterval?De.setInterval(Le,ve,...Te):setInterval(Le,ve,...Te)},clearInterval(Le){const{delegate:ve}=oe;return(ve?.clearInterval||clearInterval)(Le)},delegate:void 0};var Y=j(7908);class Oe extends J{constructor(ve,Te){super(ve,Te),this.scheduler=ve,this.work=Te,this.pending=!1}schedule(ve,Te=0){var De;if(this.closed)return this;this.state=ve;const ce=this.id,ge=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(ge,ce,Te)),this.pending=!0,this.delay=Te,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(ge,this.id,Te),this}requestAsyncId(ve,Te,De=0){return oe.setInterval(ve.flush.bind(ve,this),De)}recycleAsyncId(ve,Te,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return Te;null!=Te&&oe.clearInterval(Te)}execute(ve,Te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(ve,Te);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Te){let ce,De=!1;try{this.work(ve)}catch(ge){De=!0,ce=ge||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),ce}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Te}=this,{actions:De}=Te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.o)(De,this),null!=ve&&(this.id=this.recycleAsyncId(Te,ve,null)),this.delay=null,super.unsubscribe()}}}},9687:(nn,tt,j)=>{j.d(tt,{q:()=>oe});var p=j(6129);class J{constructor(Oe,Le=J.now){this.schedulerActionCtor=Oe,this.now=Le}schedule(Oe,Le=0,ve){return new this.schedulerActionCtor(this,Oe).schedule(ve,Le)}}J.now=p.U.now;class oe extends J{constructor(Oe,Le=J.now){super(Oe,Le),this.actions=[],this._active=!1}flush(Oe){const{actions:Le}=this;if(this._active)return void Le.push(Oe);let ve;this._active=!0;do{if(ve=Oe.execute(Oe.state,Oe.delay))break}while(Oe=Le.shift());if(this._active=!1,ve){for(;Oe=Le.shift();)Oe.unsubscribe();throw ve}}}},3236:(nn,tt,j)=>{j.d(tt,{E:()=>oe,b:()=>Y});var p=j(6780);const oe=new(j(9687).q)(p.R),Y=oe},6129:(nn,tt,j)=>{j.d(tt,{U:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},9270:(nn,tt,j)=>{j.d(tt,{f:()=>p});const p={setTimeout(J,oe,...Y){const{delegate:Oe}=p;return Oe?.setTimeout?Oe.setTimeout(J,oe,...Y):setTimeout(J,oe,...Y)},clearTimeout(J){const{delegate:oe}=p;return(oe?.clearTimeout||clearTimeout)(J)},delegate:void 0}},4761:(nn,tt,j)=>{j.d(tt,{l:()=>J});const J=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(nn,tt,j)=>{j.d(tt,{s:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(nn,tt,j)=>{j.d(tt,{G:()=>J});const J=(0,j(1853).L)(oe=>function(){oe(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(nn,tt,j)=>{j.d(tt,{R0:()=>Le,lI:()=>Oe,ms:()=>Y});var p=j(8071),J=j(9470);function oe(ve){return ve[ve.length-1]}function Y(ve){return(0,p.T)(oe(ve))?ve.pop():void 0}function Oe(ve){return(0,J.m)(oe(ve))?ve.pop():void 0}function Le(ve,Te){return"number"==typeof oe(ve)?ve.pop():Te}},3073:(nn,tt,j)=>{j.d(tt,{D:()=>Oe});const{isArray:p}=Array,{getPrototypeOf:J,prototype:oe,keys:Y}=Object;function Oe(ve){if(1===ve.length){const Te=ve[0];if(p(Te))return{args:Te,keys:null};if(function Le(ve){return ve&&"object"==typeof ve&&J(ve)===oe}(Te)){const De=Y(Te);return{args:De.map(ce=>Te[ce]),keys:De}}}return{args:ve,keys:null}}},7908:(nn,tt,j)=>{function p(J,oe){if(J){const Y=J.indexOf(oe);0<=Y&&J.splice(Y,1)}}j.d(tt,{o:()=>p})},1853:(nn,tt,j)=>{function p(J){const Y=J(Oe=>{Error.call(Oe),Oe.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}j.d(tt,{L:()=>p})},8496:(nn,tt,j)=>{function p(J,oe){return J.reduce((Y,Oe,Le)=>(Y[Oe]=oe[Le],Y),{})}j.d(tt,{e:()=>p})},9786:(nn,tt,j)=>{j.d(tt,{Y:()=>oe,l:()=>Y});var p=j(1026);let J=null;function oe(Oe){if(p.$.useDeprecatedSynchronousErrorHandling){const Le=!J;if(Le&&(J={errorThrown:!1,error:null}),Oe(),Le){const{errorThrown:ve,error:Te}=J;if(J=null,ve)throw Te}}else Oe()}function Y(Oe){p.$.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=Oe)}},5225:(nn,tt,j)=>{function p(J,oe,Y,Oe=0,Le=!1){const ve=oe.schedule(function(){Y(),Le?J.add(this.schedule(null,Oe)):this.unsubscribe()},Oe);if(J.add(ve),!Le)return ve}j.d(tt,{N:()=>p})},3669:(nn,tt,j)=>{function p(J){return J}j.d(tt,{D:()=>p})},7441:(nn,tt,j)=>{j.d(tt,{X:()=>p});const p=J=>J&&"number"==typeof J.length&&"function"!=typeof J},7953:(nn,tt,j)=>{j.d(tt,{T:()=>J});var p=j(8071);function J(oe){return Symbol.asyncIterator&&(0,p.T)(oe?.[Symbol.asyncIterator])}},8071:(nn,tt,j)=>{function p(J){return"function"==typeof J}j.d(tt,{T:()=>p})},5055:(nn,tt,j)=>{j.d(tt,{l:()=>oe});var p=j(3494),J=j(8071);function oe(Y){return(0,J.T)(Y[p.s])}},5397:(nn,tt,j)=>{j.d(tt,{x:()=>oe});var p=j(4761),J=j(8071);function oe(Y){return(0,J.T)(Y?.[p.l])}},4402:(nn,tt,j)=>{j.d(tt,{A:()=>oe});var p=j(1985),J=j(8071);function oe(Y){return!!Y&&(Y instanceof p.c||(0,J.T)(Y.lift)&&(0,J.T)(Y.subscribe))}},9858:(nn,tt,j)=>{j.d(tt,{y:()=>J});var p=j(8071);function J(oe){return(0,p.T)(oe?.then)}},5196:(nn,tt,j)=>{j.d(tt,{C:()=>oe,U:()=>Y});var p=j(1635),J=j(8071);function oe(Oe){return(0,p.AQ)(this,arguments,function*(){const ve=Oe.getReader();try{for(;;){const{value:Te,done:De}=yield(0,p.N3)(ve.read());if(De)return yield(0,p.N3)(void 0);yield yield(0,p.N3)(Te)}}finally{ve.releaseLock()}})}function Y(Oe){return(0,J.T)(Oe?.getReader)}},9470:(nn,tt,j)=>{j.d(tt,{m:()=>J});var p=j(8071);function J(oe){return oe&&(0,p.T)(oe.schedule)}},9974:(nn,tt,j)=>{j.d(tt,{N:()=>oe,S:()=>J});var p=j(8071);function J(Y){return(0,p.T)(Y?.lift)}function oe(Y){return Oe=>{if(J(Oe))return Oe.lift(function(Le){try{return Y(Le,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(nn,tt,j)=>{j.d(tt,{I:()=>Y});var p=j(6354);const{isArray:J}=Array;function Y(Oe){return(0,p.T)(Le=>function oe(Oe,Le){return J(Le)?Oe(...Le):Oe(Le)}(Oe,Le))}},5343:(nn,tt,j)=>{function p(){}j.d(tt,{l:()=>p})},1203:(nn,tt,j)=>{j.d(tt,{F:()=>J,m:()=>oe});var p=j(3669);function J(...Y){return oe(Y)}function oe(Y){return 0===Y.length?p.D:1===Y.length?Y[0]:function(Le){return Y.reduce((ve,Te)=>Te(ve),Le)}}},5334:(nn,tt,j)=>{j.d(tt,{m:()=>oe});var p=j(1026),J=j(9270);function oe(Y){J.f.setTimeout(()=>{const{onUnhandledError:Oe}=p.$;if(!Oe)throw Y;Oe(Y)})}},591:(nn,tt,j)=>{function p(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(tt,{L:()=>p})},9969:(nn,tt,j)=>{j.d(tt,{FX:()=>Yt,K2:()=>ve,MA:()=>$e,Os:()=>Le,P:()=>Ot,Ro:()=>J,S6:()=>p,hZ:()=>Y,i0:()=>Oe,i7:()=>ce,iF:()=>Te,kY:()=>ge,kp:()=>oe,sf:()=>yt,ui:()=>St,wk:()=>De});class p{}class J{}const oe="*";function Y(Rt,de){return{type:7,name:Rt,definitions:de,options:{}}}function Oe(Rt,de=null){return{type:4,styles:de,timings:Rt}}function Le(Rt,de=null){return{type:3,steps:Rt,options:de}}function ve(Rt,de=null){return{type:2,steps:Rt,options:de}}function Te(Rt){return{type:6,styles:Rt,offset:null}}function De(Rt,de,Ue){return{type:0,name:Rt,styles:de,options:Ue}}function ce(Rt){return{type:5,steps:Rt}}function ge(Rt,de,Ue=null){return{type:1,expr:Rt,animation:de,options:Ue}}function $e(Rt=null){return{type:9,options:Rt}}function Ot(Rt,de,Ue=null){return{type:11,selector:Rt,animation:de,options:Ue}}class yt{constructor(de=0,Ue=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=de+Ue}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(de=>de()),this._onDoneFns=[])}onStart(de){this._originalOnStartFns.push(de),this._onStartFns.push(de)}onDone(de){this._originalOnDoneFns.push(de),this._onDoneFns.push(de)}onDestroy(de){this._onDestroyFns.push(de)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(de=>de()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(de=>de()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(de){this._position=this.totalTime?de*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(de){const Ue="start"==de?this._onStartFns:this._onDoneFns;Ue.forEach(Ne=>Ne()),Ue.length=0}}class St{constructor(de){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=de;let Ue=0,Ne=0,Je=0;const We=this.players.length;0==We?queueMicrotask(()=>this._onFinish()):this.players.forEach(It=>{It.onDone(()=>{++Ue==We&&this._onFinish()}),It.onDestroy(()=>{++Ne==We&&this._onDestroy()}),It.onStart(()=>{++Je==We&&this._onStart()})}),this.totalTime=this.players.reduce((It,Ht)=>Math.max(It,Ht.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(de=>de()),this._onDoneFns=[])}init(){this.players.forEach(de=>de.init())}onStart(de){this._onStartFns.push(de)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(de=>de()),this._onStartFns=[])}onDone(de){this._onDoneFns.push(de)}onDestroy(de){this._onDestroyFns.push(de)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(de=>de.play())}pause(){this.players.forEach(de=>de.pause())}restart(){this.players.forEach(de=>de.restart())}finish(){this._onFinish(),this.players.forEach(de=>de.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(de=>de.destroy()),this._onDestroyFns.forEach(de=>de()),this._onDestroyFns=[])}reset(){this.players.forEach(de=>de.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(de){const Ue=de*this.totalTime;this.players.forEach(Ne=>{const Je=Ne.totalTime?Math.min(1,Ue/Ne.totalTime):1;Ne.setPosition(Je)})}getPosition(){const de=this.players.reduce((Ue,Ne)=>null===Ue||Ne.totalTime>Ue.totalTime?Ne:Ue,null);return null!=de?de.getPosition():0}beforeDestroy(){this.players.forEach(de=>{de.beforeDestroy&&de.beforeDestroy()})}triggerCallback(de){const Ue="start"==de?this._onStartFns:this._onDoneFns;Ue.forEach(Ne=>Ne()),Ue.length=0}}const Yt="!"},7645:(nn,tt,j)=>{j.d(tt,{Pd:()=>Ae,Bu:()=>zn,FN:()=>At,GX:()=>Tt,Q_:()=>_e,Z7:()=>en,_G:()=>et,w6:()=>xn});var p=j(177),J=j(7705),oe=j(6860),Y=j(1413),Oe=j(8359),Le=j(4412),ve=j(7673),Te=j(7336),De=j(8141),ce=j(152),ge=j(5964),Pe=j(6354),$e=j(6697);function ht(ue){return(0,ge.p)((me,le)=>ue<=le)}var Ot=j(3294),Et=j(6977),yt=j(4085),St=j(2318),Yt=j(4572),Rt=j(8793),de=j(1985),Ue=j(9172);const Je=new Set;let We,It=(()=>{class ue{constructor(le,be){this._platform=le,this._nonce=be,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):pt}matchMedia(le){return(this._platform.WEBKIT||this._platform.BLINK)&&function Ht(ue,me){if(!Je.has(ue))try{We||(We=document.createElement("style"),me&&(We.nonce=me),We.setAttribute("type","text/css"),document.head.appendChild(We)),We.sheet&&(We.sheet.insertRule(`@media ${ue} {body{ }}`,0),Je.add(ue))}catch(le){console.error(le)}}(le,this._nonce),this._matchMedia(le)}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(oe.OD),J.KVO(J.BIS,8))}}static{this.\u0275prov=J.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})();function pt(ue){return{matches:"all"===ue||""===ue,media:ue,addListener:()=>{},removeListener:()=>{}}}let ln=(()=>{class ue{constructor(le,be){this._mediaMatcher=le,this._zone=be,this._queries=new Map,this._destroySubject=new Y.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(le){return $n((0,yt.FG)(le)).some(je=>this._registerQuery(je).mql.matches)}observe(le){const je=$n((0,yt.FG)(le)).map(pe=>this._registerQuery(pe).observable);let Bt=(0,Yt.z)(je);return Bt=(0,Rt.x)(Bt.pipe((0,$e.s)(1)),Bt.pipe(ht(1),(0,ce.B)(0))),Bt.pipe((0,Pe.T)(pe=>{const Ie={matches:!1,breakpoints:{}};return pe.forEach(({matches:Se,query:Ke})=>{Ie.matches=Ie.matches||Se,Ie.breakpoints[Ke]=Se}),Ie}))}_registerQuery(le){if(this._queries.has(le))return this._queries.get(le);const be=this._mediaMatcher.matchMedia(le),Bt={observable:new de.c(pe=>{const Ie=Se=>this._zone.run(()=>pe.next(Se));return be.addListener(Ie),()=>{be.removeListener(Ie)}}).pipe((0,Ue.Z)(be),(0,Pe.T)(({matches:pe})=>({query:le,matches:pe})),(0,Et.Q)(this._destroySubject)),mql:be};return this._queries.set(le,Bt),Bt}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(It),J.KVO(J.SKi))}}static{this.\u0275prov=J.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})();function $n(ue){return ue.map(me=>me.split(",")).reduce((me,le)=>me.concat(le)).map(me=>me.trim())}class lt{constructor(me){this._items=me,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Y.B,this._typeaheadSubscription=Oe.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=le=>le.disabled,this._pressedLetters=[],this.tabOut=new Y.B,this.change=new Y.B,me instanceof J.rOR&&(this._itemChangesSubscription=me.changes.subscribe(le=>{if(this._activeItem){const je=le.toArray().indexOf(this._activeItem);je>-1&&je!==this._activeItemIndex&&(this._activeItemIndex=je)}}))}skipPredicate(me){return this._skipPredicateFn=me,this}withWrap(me=!0){return this._wrap=me,this}withVerticalOrientation(me=!0){return this._vertical=me,this}withHorizontalOrientation(me){return this._horizontal=me,this}withAllowedModifierKeys(me){return this._allowedModifierKeys=me,this}withTypeAhead(me=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,De.M)(le=>this._pressedLetters.push(le)),(0,ce.B)(me),(0,ge.p)(()=>this._pressedLetters.length>0),(0,Pe.T)(()=>this._pressedLetters.join(""))).subscribe(le=>{const be=this._getItemsArray();for(let je=1;je<be.length+1;je++){const Bt=(this._activeItemIndex+je)%be.length,pe=be[Bt];if(!this._skipPredicateFn(pe)&&0===pe.getLabel().toUpperCase().trim().indexOf(le)){this.setActiveItem(Bt);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(me=!0){return this._homeAndEnd=me,this}withPageUpDown(me=!0,le=10){return this._pageUpAndDown={enabled:me,delta:le},this}setActiveItem(me){const le=this._activeItem;this.updateActiveItem(me),this._activeItem!==le&&this.change.next(this._activeItemIndex)}onKeydown(me){const le=me.keyCode,je=["altKey","ctrlKey","metaKey","shiftKey"].every(Bt=>!me[Bt]||this._allowedModifierKeys.indexOf(Bt)>-1);switch(le){case Te.wn:return void this.tabOut.next();case Te.n6:if(this._vertical&&je){this.setNextItemActive();break}return;case Te.i7:if(this._vertical&&je){this.setPreviousItemActive();break}return;case Te.LE:if(this._horizontal&&je){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Te.UQ:if(this._horizontal&&je){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Te.yZ:if(this._homeAndEnd&&je){this.setFirstItemActive();break}return;case Te.Kp:if(this._homeAndEnd&&je){this.setLastItemActive();break}return;case Te.w_:if(this._pageUpAndDown.enabled&&je){const Bt=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(Bt>0?Bt:0,1);break}return;case Te.dB:if(this._pageUpAndDown.enabled&&je){const Bt=this._activeItemIndex+this._pageUpAndDown.delta,pe=this._getItemsArray().length;this._setActiveItemByIndex(Bt<pe?Bt:pe-1,-1);break}return;default:return void((je||(0,Te.rp)(me,"shiftKey"))&&(me.key&&1===me.key.length?this._letterKeyStream.next(me.key.toLocaleUpperCase()):(le>=Te.A&&le<=Te.Z||le>=Te.f2&&le<=Te.bn)&&this._letterKeyStream.next(String.fromCharCode(le))))}this._pressedLetters=[],me.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(me){const le=this._getItemsArray(),be="number"==typeof me?me:le.indexOf(me);this._activeItem=le[be]??null,this._activeItemIndex=be}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(me){this._wrap?this._setActiveInWrapMode(me):this._setActiveInDefaultMode(me)}_setActiveInWrapMode(me){const le=this._getItemsArray();for(let be=1;be<=le.length;be++){const je=(this._activeItemIndex+me*be+le.length)%le.length;if(!this._skipPredicateFn(le[je]))return void this.setActiveItem(je)}}_setActiveInDefaultMode(me){this._setActiveItemByIndex(this._activeItemIndex+me,me)}_setActiveItemByIndex(me,le){const be=this._getItemsArray();if(be[me]){for(;this._skipPredicateFn(be[me]);)if(!be[me+=le])return;this.setActiveItem(me)}}_getItemsArray(){return this._items instanceof J.rOR?this._items.toArray():this._items}}class zn extends lt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(me){return this._origin=me,this}setActiveItem(me){super.setActiveItem(me),this.activeItem&&this.activeItem.focus(this._origin)}}let en=(()=>{class ue{constructor(le){this._platform=le}isDisabled(le){return le.hasAttribute("disabled")}isVisible(le){return function Gn(ue){return!!(ue.offsetWidth||ue.offsetHeight||"function"==typeof ue.getClientRects&&ue.getClientRects().length)}(le)&&"visible"===getComputedStyle(le).visibility}isTabbable(le){if(!this._platform.isBrowser)return!1;const be=function Pn(ue){try{return ue.frameElement}catch{return null}}(function it(ue){return ue.ownerDocument&&ue.ownerDocument.defaultView||window}(le));if(be&&(-1===ae(be)||!this.isVisible(be)))return!1;let je=le.nodeName.toLowerCase(),Bt=ae(le);return le.hasAttribute("contenteditable")?-1!==Bt:!("iframe"===je||"object"===je||this._platform.WEBKIT&&this._platform.IOS&&!function Me(ue){let me=ue.nodeName.toLowerCase(),le="input"===me&&ue.type;return"text"===le||"password"===le||"select"===me||"textarea"===me}(le))&&("audio"===je?!!le.hasAttribute("controls")&&-1!==Bt:"video"===je?-1!==Bt&&(null!==Bt||this._platform.FIREFOX||le.hasAttribute("controls")):le.tabIndex>=0)}isFocusable(le,be){return function qe(ue){return!function On(ue){return function Ar(ue){return"input"==ue.nodeName.toLowerCase()}(ue)&&"hidden"==ue.type}(ue)&&(function Tr(ue){let me=ue.nodeName.toLowerCase();return"input"===me||"select"===me||"button"===me||"textarea"===me}(ue)||function Yn(ue){return function Er(ue){return"a"==ue.nodeName.toLowerCase()}(ue)&&ue.hasAttribute("href")}(ue)||ue.hasAttribute("contenteditable")||Pt(ue))}(le)&&!this.isDisabled(le)&&(be?.ignoreVisibility||this.isVisible(le))}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(oe.OD))}}static{this.\u0275prov=J.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})();function Pt(ue){if(!ue.hasAttribute("tabindex")||void 0===ue.tabIndex)return!1;let me=ue.getAttribute("tabindex");return!(!me||isNaN(parseInt(me,10)))}function ae(ue){if(!Pt(ue))return null;const me=parseInt(ue.getAttribute("tabindex")||"",10);return isNaN(me)?-1:me}class _t{get enabled(){return this._enabled}set enabled(me){this._enabled=me,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(me,this._startAnchor),this._toggleAnchorTabIndex(me,this._endAnchor))}constructor(me,le,be,je,Bt=!1){this._element=me,this._checker=le,this._ngZone=be,this._document=je,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Bt||this.attachAnchors()}destroy(){const me=this._startAnchor,le=this._endAnchor;me&&(me.removeEventListener("focus",this.startAnchorListener),me.remove()),le&&(le.removeEventListener("focus",this.endAnchorListener),le.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(me){return new Promise(le=>{this._executeOnStable(()=>le(this.focusInitialElement(me)))})}focusFirstTabbableElementWhenReady(me){return new Promise(le=>{this._executeOnStable(()=>le(this.focusFirstTabbableElement(me)))})}focusLastTabbableElementWhenReady(me){return new Promise(le=>{this._executeOnStable(()=>le(this.focusLastTabbableElement(me)))})}_getRegionBoundary(me){const le=this._element.querySelectorAll(`[cdk-focus-region-${me}], [cdkFocusRegion${me}], [cdk-focus-${me}]`);return"start"==me?le.length?le[0]:this._getFirstTabbableElement(this._element):le.length?le[le.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(me){const le=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(le){if(!this._checker.isFocusable(le)){const be=this._getFirstTabbableElement(le);return be?.focus(me),!!be}return le.focus(me),!0}return this.focusFirstTabbableElement(me)}focusFirstTabbableElement(me){const le=this._getRegionBoundary("start");return le&&le.focus(me),!!le}focusLastTabbableElement(me){const le=this._getRegionBoundary("end");return le&&le.focus(me),!!le}hasAttached(){return this._hasAttached}_getFirstTabbableElement(me){if(this._checker.isFocusable(me)&&this._checker.isTabbable(me))return me;const le=me.children;for(let be=0;be<le.length;be++){const je=le[be].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(le[be]):null;if(je)return je}return null}_getLastTabbableElement(me){if(this._checker.isFocusable(me)&&this._checker.isTabbable(me))return me;const le=me.children;for(let be=le.length-1;be>=0;be--){const je=le[be].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(le[be]):null;if(je)return je}return null}_createAnchor(){const me=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,me),me.classList.add("cdk-visually-hidden"),me.classList.add("cdk-focus-trap-anchor"),me.setAttribute("aria-hidden","true"),me}_toggleAnchorTabIndex(me,le){me?le.setAttribute("tabindex","0"):le.removeAttribute("tabindex")}toggleAnchors(me){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(me,this._startAnchor),this._toggleAnchorTabIndex(me,this._endAnchor))}_executeOnStable(me){this._ngZone.isStable?me():this._ngZone.onStable.pipe((0,$e.s)(1)).subscribe(me)}}let Tt=(()=>{class ue{constructor(le,be,je){this._checker=le,this._ngZone=be,this._document=je}create(le,be=!1){return new _t(le,this._checker,this._ngZone,this._document,be)}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(en),J.KVO(J.SKi),J.KVO(p.qQ))}}static{this.\u0275prov=J.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})();function et(ue){return 0===ue.buttons||0===ue.detail}function xn(ue){const me=ue.touches&&ue.touches[0]||ue.changedTouches&&ue.changedTouches[0];return!(!me||-1!==me.identifier||null!=me.radiusX&&1!==me.radiusX||null!=me.radiusY&&1!==me.radiusY)}const _n=new J.nKC("cdk-input-modality-detector-options"),ri={ignoreKeys:[Te.A$,Te.W3,Te.eg,Te.Ge,Te.FX]},rn=(0,oe.BQ)({passive:!0,capture:!0});let Ft=(()=>{class ue{get mostRecentModality(){return this._modality.value}constructor(le,be,je,Bt){this._platform=le,this._mostRecentTarget=null,this._modality=new Le.t(null),this._lastTouchMs=0,this._onKeydown=pe=>{this._options?.ignoreKeys?.some(Ie=>Ie===pe.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,oe.Fb)(pe))},this._onMousedown=pe=>{Date.now()-this._lastTouchMs<650||(this._modality.next(et(pe)?"keyboard":"mouse"),this._mostRecentTarget=(0,oe.Fb)(pe))},this._onTouchstart=pe=>{xn(pe)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,oe.Fb)(pe))},this._options={...ri,...Bt},this.modalityDetected=this._modality.pipe(ht(1)),this.modalityChanged=this.modalityDetected.pipe((0,Ot.F)()),le.isBrowser&&be.runOutsideAngular(()=>{je.addEventListener("keydown",this._onKeydown,rn),je.addEventListener("mousedown",this._onMousedown,rn),je.addEventListener("touchstart",this._onTouchstart,rn)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,rn),document.removeEventListener("mousedown",this._onMousedown,rn),document.removeEventListener("touchstart",this._onTouchstart,rn))}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(oe.OD),J.KVO(J.SKi),J.KVO(p.qQ),J.KVO(_n,8))}}static{this.\u0275prov=J.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})();const ar=new J.nKC("cdk-focus-monitor-default-options"),hr=(0,oe.BQ)({passive:!0,capture:!0});let At=(()=>{class ue{constructor(le,be,je,Bt,pe){this._ngZone=le,this._platform=be,this._inputModalityDetector=je,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Y.B,this._rootNodeFocusAndBlurListener=Ie=>{for(let Ke=(0,oe.Fb)(Ie);Ke;Ke=Ke.parentElement)"focus"===Ie.type?this._onFocus(Ie,Ke):this._onBlur(Ie,Ke)},this._document=Bt,this._detectionMode=pe?.detectionMode||0}monitor(le,be=!1){const je=(0,yt.i8)(le);if(!this._platform.isBrowser||1!==je.nodeType)return(0,ve.of)();const Bt=(0,oe.KT)(je)||this._getDocument(),pe=this._elementInfo.get(je);if(pe)return be&&(pe.checkChildren=!0),pe.subject;const Ie={checkChildren:be,subject:new Y.B,rootNode:Bt};return this._elementInfo.set(je,Ie),this._registerGlobalListeners(Ie),Ie.subject}stopMonitoring(le){const be=(0,yt.i8)(le),je=this._elementInfo.get(be);je&&(je.subject.complete(),this._setClasses(be),this._elementInfo.delete(be),this._removeGlobalListeners(je))}focusVia(le,be,je){const Bt=(0,yt.i8)(le);Bt===this._getDocument().activeElement?this._getClosestElementsInfo(Bt).forEach(([Ie,Se])=>this._originChanged(Ie,be,Se)):(this._setOrigin(be),"function"==typeof Bt.focus&&Bt.focus(je))}ngOnDestroy(){this._elementInfo.forEach((le,be)=>this.stopMonitoring(be))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(le){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(le)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:le&&this._isLastInteractionFromInputLabel(le)?"mouse":"program"}_shouldBeAttributedToTouch(le){return 1===this._detectionMode||!!le?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(le,be){le.classList.toggle("cdk-focused",!!be),le.classList.toggle("cdk-touch-focused","touch"===be),le.classList.toggle("cdk-keyboard-focused","keyboard"===be),le.classList.toggle("cdk-mouse-focused","mouse"===be),le.classList.toggle("cdk-program-focused","program"===be)}_setOrigin(le,be=!1){this._ngZone.runOutsideAngular(()=>{this._origin=le,this._originFromTouchInteraction="touch"===le&&be,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(le,be){const je=this._elementInfo.get(be),Bt=(0,oe.Fb)(le);!je||!je.checkChildren&&be!==Bt||this._originChanged(be,this._getFocusOrigin(Bt),je)}_onBlur(le,be){const je=this._elementInfo.get(be);!je||je.checkChildren&&le.relatedTarget instanceof Node&&be.contains(le.relatedTarget)||(this._setClasses(be),this._emitOrigin(je,null))}_emitOrigin(le,be){le.subject.observers.length&&this._ngZone.run(()=>le.subject.next(be))}_registerGlobalListeners(le){if(!this._platform.isBrowser)return;const be=le.rootNode,je=this._rootNodeFocusListenerCount.get(be)||0;je||this._ngZone.runOutsideAngular(()=>{be.addEventListener("focus",this._rootNodeFocusAndBlurListener,hr),be.addEventListener("blur",this._rootNodeFocusAndBlurListener,hr)}),this._rootNodeFocusListenerCount.set(be,je+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Et.Q)(this._stopInputModalityDetector)).subscribe(Bt=>{this._setOrigin(Bt,!0)}))}_removeGlobalListeners(le){const be=le.rootNode;if(this._rootNodeFocusListenerCount.has(be)){const je=this._rootNodeFocusListenerCount.get(be);je>1?this._rootNodeFocusListenerCount.set(be,je-1):(be.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hr),be.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hr),this._rootNodeFocusListenerCount.delete(be))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(le,be,je){this._setClasses(le,be),this._emitOrigin(je,be),this._lastFocusOrigin=be}_getClosestElementsInfo(le){const be=[];return this._elementInfo.forEach((je,Bt)=>{(Bt===le||je.checkChildren&&Bt.contains(le))&&be.push([Bt,je])}),be}_isLastInteractionFromInputLabel(le){const{_mostRecentTarget:be,mostRecentModality:je}=this._inputModalityDetector;if("mouse"!==je||!be||be===le||"INPUT"!==le.nodeName&&"TEXTAREA"!==le.nodeName||le.disabled)return!1;const Bt=le.labels;if(Bt)for(let pe=0;pe<Bt.length;pe++)if(Bt[pe].contains(be))return!0;return!1}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(J.SKi),J.KVO(oe.OD),J.KVO(Ft),J.KVO(p.qQ,8),J.KVO(ar,8))}}static{this.\u0275prov=J.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})();const O="cdk-high-contrast-black-on-white",N="cdk-high-contrast-white-on-black",W="cdk-high-contrast-active";let _e=(()=>{class ue{constructor(le,be){this._platform=le,this._document=be,this._breakpointSubscription=(0,J.WQX)(ln).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const le=this._document.createElement("div");le.style.backgroundColor="rgb(1,2,3)",le.style.position="absolute",this._document.body.appendChild(le);const be=this._document.defaultView||window,je=be&&be.getComputedStyle?be.getComputedStyle(le):null,Bt=(je&&je.backgroundColor||"").replace(/ /g,"");switch(le.remove(),Bt){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const le=this._document.body.classList;le.remove(W,O,N),this._hasCheckedHighContrastMode=!0;const be=this.getHighContrastMode();1===be?le.add(W,O):2===be&&le.add(W,N)}}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(oe.OD),J.KVO(p.qQ))}}static{this.\u0275prov=J.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})(),Ae=(()=>{class ue{constructor(le){le._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(be){return new(be||ue)(J.KVO(_e))}}static{this.\u0275mod=J.$C({type:ue})}static{this.\u0275inj=J.G2t({imports:[St.w5]})}}return ue})()},8203:(nn,tt,j)=>{j.d(tt,{dS:()=>ve,jI:()=>De});var p=j(7705),J=j(177);const oe=new p.nKC("cdk-dir-doc",{providedIn:"root",factory:function Y(){return(0,p.WQX)(J.qQ)}}),Oe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ve=(()=>{class ce{constructor(Pe){this.value="ltr",this.change=new p.bkB,Pe&&(this.value=function Le(ce){const ge=ce?.toLowerCase()||"";return"auto"===ge&&typeof navigator<"u"&&navigator?.language?Oe.test(navigator.language)?"rtl":"ltr":"rtl"===ge?"rtl":"ltr"}((Pe.body?Pe.body.dir:null)||(Pe.documentElement?Pe.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function($e){return new($e||ce)(p.KVO(oe,8))}}static{this.\u0275prov=p.jDH({token:ce,factory:ce.\u0275fac,providedIn:"root"})}}return ce})(),De=(()=>{class ce{static{this.\u0275fac=function($e){return new($e||ce)}}static{this.\u0275mod=p.$C({type:ce})}static{this.\u0275inj=p.G2t({})}}return ce})()},4085:(nn,tt,j)=>{j.d(tt,{FG:()=>Oe,OE:()=>oe,a1:()=>Le,he:()=>J,i8:()=>ve,o1:()=>Y});var p=j(7705);function J(De){return null!=De&&"false"!=`${De}`}function oe(De,ce=0){return Y(De)?Number(De):ce}function Y(De){return!isNaN(parseFloat(De))&&!isNaN(Number(De))}function Oe(De){return Array.isArray(De)?De:[De]}function Le(De){return null==De?"":"string"==typeof De?De:`${De}px`}function ve(De){return De instanceof p.aKT?De.nativeElement:De}},7336:(nn,tt,j)=>{j.d(tt,{A:()=>Ye,A$:()=>Te,FX:()=>Le,Fm:()=>Oe,G_:()=>J,Ge:()=>Zt,Kp:()=>Ot,LE:()=>Yt,SJ:()=>Je,UQ:()=>yt,W3:()=>ve,Z:()=>Tn,_f:()=>ge,bn:()=>Rn,dB:()=>ht,eg:()=>ys,f2:()=>We,i7:()=>St,n6:()=>Rt,rp:()=>Ri,t6:()=>Pe,w_:()=>$e,wn:()=>oe,yZ:()=>Et});const J=8,oe=9,Oe=13,Le=16,ve=17,Te=18,ge=27,Pe=32,$e=33,ht=34,Ot=35,Et=36,yt=37,St=38,Yt=39,Rt=40,Je=46,We=48,Rn=57,Ye=65,Tn=90,Zt=91,ys=224;function Ri(zr,...Ds){return Ds.length?Ds.some(fi=>zr[fi]):zr.altKey||zr.shiftKey||zr.ctrlKey||zr.metaKey}},2318:(nn,tt,j)=>{j.d(tt,{w5:()=>Oe});var p=j(7705);let J=(()=>{class Le{create(Te){return typeof MutationObserver>"u"?null:new MutationObserver(Te)}static{this.\u0275fac=function(De){return new(De||Le)}}static{this.\u0275prov=p.jDH({token:Le,factory:Le.\u0275fac,providedIn:"root"})}}return Le})(),Oe=(()=>{class Le{static{this.\u0275fac=function(De){return new(De||Le)}}static{this.\u0275mod=p.$C({type:Le})}static{this.\u0275inj=p.G2t({providers:[J]})}}return Le})()},7987:(nn,tt,j)=>{j.d(tt,{Sf:()=>Dr,hJ:()=>dn,rR:()=>Ne,yY:()=>mr,z_:()=>Ar});var p=j(4955),J=j(177),oe=j(7705),Y=j(4085),Oe=j(6860),Le=j(5964),ve=j(6697),Te=j(6977),De=j(8203),ce=j(6939),ge=j(1413),Pe=j(8359),$e=j(7786);const ht=(0,Oe.CZ)();class Ot{constructor(ae,Me){this._viewportRuler=ae,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=Me}attach(){}enable(){if(this._canBeEnabled()){const ae=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=ae.style.left||"",this._previousHTMLStyles.top=ae.style.top||"",ae.style.left=(0,Y.a1)(-this._previousScrollPosition.left),ae.style.top=(0,Y.a1)(-this._previousScrollPosition.top),ae.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const ae=this._document.documentElement,qe=ae.style,it=this._document.body.style,_t=qe.scrollBehavior||"",Tt=it.scrollBehavior||"";this._isEnabled=!1,qe.left=this._previousHTMLStyles.left,qe.top=this._previousHTMLStyles.top,ae.classList.remove("cdk-global-scrollblock"),ht&&(qe.scrollBehavior=it.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ht&&(qe.scrollBehavior=_t,it.scrollBehavior=Tt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const Me=this._document.body,qe=this._viewportRuler.getViewportSize();return Me.scrollHeight>qe.height||Me.scrollWidth>qe.width}}class yt{constructor(ae,Me,qe,it){this._scrollDispatcher=ae,this._ngZone=Me,this._viewportRuler=qe,this._config=it,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(ae){this._overlayRef=ae}enable(){if(this._scrollSubscription)return;const ae=this._scrollDispatcher.scrolled(0).pipe((0,Le.p)(Me=>!Me||!this._overlayRef.overlayElement.contains(Me.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=ae.subscribe(()=>{const Me=this._viewportRuler.getViewportScrollPosition().top;Math.abs(Me-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=ae.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class St{enable(){}disable(){}attach(){}}function Yt(Pt,ae){return ae.some(Me=>Pt.bottom<Me.top||Pt.top>Me.bottom||Pt.right<Me.left||Pt.left>Me.right)}function Rt(Pt,ae){return ae.some(Me=>Pt.top<Me.top||Pt.bottom>Me.bottom||Pt.left<Me.left||Pt.right>Me.right)}class de{constructor(ae,Me,qe,it){this._scrollDispatcher=ae,this._viewportRuler=Me,this._ngZone=qe,this._config=it,this._scrollSubscription=null}attach(ae){this._overlayRef=ae}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const Me=this._overlayRef.overlayElement.getBoundingClientRect(),{width:qe,height:it}=this._viewportRuler.getViewportSize();Yt(Me,[{width:qe,height:it,bottom:it,right:qe,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ue=(()=>{class Pt{constructor(Me,qe,it,_t){this._scrollDispatcher=Me,this._viewportRuler=qe,this._ngZone=it,this.noop=()=>new St,this.close=Tt=>new yt(this._scrollDispatcher,this._ngZone,this._viewportRuler,Tt),this.block=()=>new Ot(this._viewportRuler,this._document),this.reposition=Tt=>new de(this._scrollDispatcher,this._viewportRuler,this._ngZone,Tt),this._document=_t}static{this.\u0275fac=function(qe){return new(qe||Pt)(oe.KVO(p.R),oe.KVO(p.Xj),oe.KVO(oe.SKi),oe.KVO(J.qQ))}}static{this.\u0275prov=oe.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}return Pt})();class Ne{constructor(ae){if(this.scrollStrategy=new St,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,ae){const Me=Object.keys(ae);for(const qe of Me)void 0!==ae[qe]&&(this[qe]=ae[qe])}}}class It{constructor(ae,Me){this.connectionPair=ae,this.scrollableViewProperties=Me}}let ln=(()=>{class Pt{constructor(Me){this._attachedOverlays=[],this._document=Me}ngOnDestroy(){this.detach()}add(Me){this.remove(Me),this._attachedOverlays.push(Me)}remove(Me){const qe=this._attachedOverlays.indexOf(Me);qe>-1&&this._attachedOverlays.splice(qe,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(qe){return new(qe||Pt)(oe.KVO(J.qQ))}}static{this.\u0275prov=oe.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}return Pt})(),$n=(()=>{class Pt extends ln{constructor(Me,qe){super(Me),this._ngZone=qe,this._keydownListener=it=>{const _t=this._attachedOverlays;for(let Tt=_t.length-1;Tt>-1;Tt--)if(_t[Tt]._keydownEvents.observers.length>0){const on=_t[Tt]._keydownEvents;this._ngZone?this._ngZone.run(()=>on.next(it)):on.next(it);break}}}add(Me){super.add(Me),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(qe){return new(qe||Pt)(oe.KVO(J.qQ),oe.KVO(oe.SKi,8))}}static{this.\u0275prov=oe.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}return Pt})(),br=(()=>{class Pt extends ln{constructor(Me,qe,it){super(Me),this._platform=qe,this._ngZone=it,this._cursorStyleIsSet=!1,this._pointerDownListener=_t=>{this._pointerDownEventTarget=(0,Oe.Fb)(_t)},this._clickListener=_t=>{const Tt=(0,Oe.Fb)(_t),on="click"===_t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Tt;this._pointerDownEventTarget=null;const En=this._attachedOverlays.slice();for(let Tn=En.length-1;Tn>-1;Tn--){const Zt=En[Tn];if(Zt._outsidePointerEvents.observers.length<1||!Zt.hasAttached())continue;if(Zt.overlayElement.contains(Tt)||Zt.overlayElement.contains(on))break;const Ln=Zt._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Ln.next(_t)):Ln.next(_t)}}}add(Me){if(super.add(Me),!this._isAttached){const qe=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(qe)):this._addEventListeners(qe),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=qe.style.cursor,qe.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const Me=this._document.body;Me.removeEventListener("pointerdown",this._pointerDownListener,!0),Me.removeEventListener("click",this._clickListener,!0),Me.removeEventListener("auxclick",this._clickListener,!0),Me.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(Me.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(Me){Me.addEventListener("pointerdown",this._pointerDownListener,!0),Me.addEventListener("click",this._clickListener,!0),Me.addEventListener("auxclick",this._clickListener,!0),Me.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(qe){return new(qe||Pt)(oe.KVO(J.qQ),oe.KVO(Oe.OD),oe.KVO(oe.SKi,8))}}static{this.\u0275prov=oe.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}return Pt})(),Dr=(()=>{class Pt{constructor(Me,qe){this._platform=qe,this._document=Me}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Me="cdk-overlay-container";if(this._platform.isBrowser||(0,Oe.v8)()){const it=this._document.querySelectorAll(`.${Me}[platform="server"], .${Me}[platform="test"]`);for(let _t=0;_t<it.length;_t++)it[_t].remove()}const qe=this._document.createElement("div");qe.classList.add(Me),(0,Oe.v8)()?qe.setAttribute("platform","test"):this._platform.isBrowser||qe.setAttribute("platform","server"),this._document.body.appendChild(qe),this._containerElement=qe}static{this.\u0275fac=function(qe){return new(qe||Pt)(oe.KVO(J.qQ),oe.KVO(Oe.OD))}}static{this.\u0275prov=oe.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}return Pt})();class mr{constructor(ae,Me,qe,it,_t,Tt,on,En,Tn,Zt=!1){this._portalOutlet=ae,this._host=Me,this._pane=qe,this._config=it,this._ngZone=_t,this._keyboardDispatcher=Tt,this._document=on,this._location=En,this._outsideClickDispatcher=Tn,this._animationsDisabled=Zt,this._backdropElement=null,this._backdropClick=new ge.B,this._attachments=new ge.B,this._detachments=new ge.B,this._locationChanges=Pe.yU.EMPTY,this._backdropClickHandler=Ln=>this._backdropClick.next(Ln),this._backdropTransitionendHandler=Ln=>{this._disposeBackdrop(Ln.target)},this._keydownEvents=new ge.B,this._outsidePointerEvents=new ge.B,it.scrollStrategy&&(this._scrollStrategy=it.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=it.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(ae){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const Me=this._portalOutlet.attach(ae);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ve.s)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof Me?.onDestroy&&Me.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),Me}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const ae=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),ae}dispose(){const ae=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,ae&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(ae){ae!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=ae,this.hasAttached()&&(ae.attach(this),this.updatePosition()))}updateSize(ae){this._config={...this._config,...ae},this._updateElementSize()}setDirection(ae){this._config={...this._config,direction:ae},this._updateElementDirection()}addPanelClass(ae){this._pane&&this._toggleClasses(this._pane,ae,!0)}removePanelClass(ae){this._pane&&this._toggleClasses(this._pane,ae,!1)}getDirection(){const ae=this._config.direction;return ae?"string"==typeof ae?ae:ae.value:"ltr"}updateScrollStrategy(ae){ae!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=ae,this.hasAttached()&&(ae.attach(this),ae.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const ae=this._pane.style;ae.width=(0,Y.a1)(this._config.width),ae.height=(0,Y.a1)(this._config.height),ae.minWidth=(0,Y.a1)(this._config.minWidth),ae.minHeight=(0,Y.a1)(this._config.minHeight),ae.maxWidth=(0,Y.a1)(this._config.maxWidth),ae.maxHeight=(0,Y.a1)(this._config.maxHeight)}_togglePointerEvents(ae){this._pane.style.pointerEvents=ae?"":"none"}_attachBackdrop(){const ae="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(ae)})}):this._backdropElement.classList.add(ae)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const ae=this._backdropElement;if(ae){if(this._animationsDisabled)return void this._disposeBackdrop(ae);ae.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{ae.addEventListener("transitionend",this._backdropTransitionendHandler)}),ae.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(ae)},500))}}_toggleClasses(ae,Me,qe){const it=(0,Y.FG)(Me||[]).filter(_t=>!!_t);it.length&&(qe?ae.classList.add(...it):ae.classList.remove(...it))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const ae=this._ngZone.onStable.pipe((0,Te.Q)((0,$e.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),ae.unsubscribe())})})}_disposeScrollStrategy(){const ae=this._scrollStrategy;ae&&(ae.disable(),ae.detach&&ae.detach())}_disposeBackdrop(ae){ae&&(ae.removeEventListener("click",this._backdropClickHandler),ae.removeEventListener("transitionend",this._backdropTransitionendHandler),ae.remove(),this._backdropElement===ae&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Rn="cdk-overlay-connected-position-bounding-box",un=/([A-Za-z%]+)$/;class gn{get positions(){return this._preferredPositions}constructor(ae,Me,qe,it,_t){this._viewportRuler=Me,this._document=qe,this._platform=it,this._overlayContainer=_t,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ge.B,this._resizeSubscription=Pe.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(ae)}attach(ae){this._validatePositions(),ae.hostElement.classList.add(Rn),this._overlayRef=ae,this._boundingBox=ae.hostElement,this._pane=ae.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const ae=this._originRect,Me=this._overlayRect,qe=this._viewportRect,it=this._containerRect,_t=[];let Tt;for(let on of this._preferredPositions){let En=this._getOriginPoint(ae,it,on),Tn=this._getOverlayPoint(En,Me,on),Zt=this._getOverlayFit(Tn,Me,qe,on);if(Zt.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(on,En);this._canFitWithFlexibleDimensions(Zt,Tn,qe)?_t.push({position:on,origin:En,overlayRect:Me,boundingBoxRect:this._calculateBoundingBoxRect(En,on)}):(!Tt||Tt.overlayFit.visibleArea<Zt.visibleArea)&&(Tt={overlayFit:Zt,overlayPoint:Tn,originPoint:En,position:on,overlayRect:Me})}if(_t.length){let on=null,En=-1;for(const Tn of _t){const Zt=Tn.boundingBoxRect.width*Tn.boundingBoxRect.height*(Tn.position.weight||1);Zt>En&&(En=Zt,on=Tn)}return this._isPushed=!1,void this._applyPosition(on.position,on.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Tt.position,Tt.originPoint);this._applyPosition(Tt.position,Tt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Wt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Rn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const ae=this._lastPosition;if(ae){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Me=this._getOriginPoint(this._originRect,this._containerRect,ae);this._applyPosition(ae,Me)}else this.apply()}withScrollableContainers(ae){return this._scrollables=ae,this}withPositions(ae){return this._preferredPositions=ae,-1===ae.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(ae){return this._viewportMargin=ae,this}withFlexibleDimensions(ae=!0){return this._hasFlexibleDimensions=ae,this}withGrowAfterOpen(ae=!0){return this._growAfterOpen=ae,this}withPush(ae=!0){return this._canPush=ae,this}withLockedPosition(ae=!0){return this._positionLocked=ae,this}setOrigin(ae){return this._origin=ae,this}withDefaultOffsetX(ae){return this._offsetX=ae,this}withDefaultOffsetY(ae){return this._offsetY=ae,this}withTransformOriginOn(ae){return this._transformOriginSelector=ae,this}_getOriginPoint(ae,Me,qe){let it,_t;if("center"==qe.originX)it=ae.left+ae.width/2;else{const Tt=this._isRtl()?ae.right:ae.left,on=this._isRtl()?ae.left:ae.right;it="start"==qe.originX?Tt:on}return Me.left<0&&(it-=Me.left),_t="center"==qe.originY?ae.top+ae.height/2:"top"==qe.originY?ae.top:ae.bottom,Me.top<0&&(_t-=Me.top),{x:it,y:_t}}_getOverlayPoint(ae,Me,qe){let it,_t;return it="center"==qe.overlayX?-Me.width/2:"start"===qe.overlayX?this._isRtl()?-Me.width:0:this._isRtl()?0:-Me.width,_t="center"==qe.overlayY?-Me.height/2:"top"==qe.overlayY?0:-Me.height,{x:ae.x+it,y:ae.y+_t}}_getOverlayFit(ae,Me,qe,it){const _t=Ye(Me);let{x:Tt,y:on}=ae,En=this._getOffset(it,"x"),Tn=this._getOffset(it,"y");En&&(Tt+=En),Tn&&(on+=Tn);let oi=0-on,et=on+_t.height-qe.height,xn=this._subtractOverflows(_t.width,0-Tt,Tt+_t.width-qe.width),_n=this._subtractOverflows(_t.height,oi,et),ri=xn*_n;return{visibleArea:ri,isCompletelyWithinViewport:_t.width*_t.height===ri,fitsInViewportVertically:_n===_t.height,fitsInViewportHorizontally:xn==_t.width}}_canFitWithFlexibleDimensions(ae,Me,qe){if(this._hasFlexibleDimensions){const it=qe.bottom-Me.y,_t=qe.right-Me.x,Tt=Ve(this._overlayRef.getConfig().minHeight),on=Ve(this._overlayRef.getConfig().minWidth);return(ae.fitsInViewportVertically||null!=Tt&&Tt<=it)&&(ae.fitsInViewportHorizontally||null!=on&&on<=_t)}return!1}_pushOverlayOnScreen(ae,Me,qe){if(this._previousPushAmount&&this._positionLocked)return{x:ae.x+this._previousPushAmount.x,y:ae.y+this._previousPushAmount.y};const it=Ye(Me),_t=this._viewportRect,Tt=Math.max(ae.x+it.width-_t.width,0),on=Math.max(ae.y+it.height-_t.height,0),En=Math.max(_t.top-qe.top-ae.y,0),Tn=Math.max(_t.left-qe.left-ae.x,0);let Zt=0,Ln=0;return Zt=it.width<=_t.width?Tn||-Tt:ae.x<this._viewportMargin?_t.left-qe.left-ae.x:0,Ln=it.height<=_t.height?En||-on:ae.y<this._viewportMargin?_t.top-qe.top-ae.y:0,this._previousPushAmount={x:Zt,y:Ln},{x:ae.x+Zt,y:ae.y+Ln}}_applyPosition(ae,Me){if(this._setTransformOrigin(ae),this._setOverlayElementStyles(Me,ae),this._setBoundingBoxStyles(Me,ae),ae.panelClass&&this._addPanelClasses(ae.panelClass),this._lastPosition=ae,this._positionChanges.observers.length){const qe=this._getScrollVisibility(),it=new It(ae,qe);this._positionChanges.next(it)}this._isInitialRender=!1}_setTransformOrigin(ae){if(!this._transformOriginSelector)return;const Me=this._boundingBox.querySelectorAll(this._transformOriginSelector);let qe,it=ae.overlayY;qe="center"===ae.overlayX?"center":this._isRtl()?"start"===ae.overlayX?"right":"left":"start"===ae.overlayX?"left":"right";for(let _t=0;_t<Me.length;_t++)Me[_t].style.transformOrigin=`${qe} ${it}`}_calculateBoundingBoxRect(ae,Me){const qe=this._viewportRect,it=this._isRtl();let _t,Tt,on,Zt,Ln,oi;if("top"===Me.overlayY)Tt=ae.y,_t=qe.height-Tt+this._viewportMargin;else if("bottom"===Me.overlayY)on=qe.height-ae.y+2*this._viewportMargin,_t=qe.height-on+this._viewportMargin;else{const et=Math.min(qe.bottom-ae.y+qe.top,ae.y),xn=this._lastBoundingBoxSize.height;_t=2*et,Tt=ae.y-et,_t>xn&&!this._isInitialRender&&!this._growAfterOpen&&(Tt=ae.y-xn/2)}if("end"===Me.overlayX&&!it||"start"===Me.overlayX&&it)oi=qe.width-ae.x+this._viewportMargin,Zt=ae.x-this._viewportMargin;else if("start"===Me.overlayX&&!it||"end"===Me.overlayX&&it)Ln=ae.x,Zt=qe.right-ae.x;else{const et=Math.min(qe.right-ae.x+qe.left,ae.x),xn=this._lastBoundingBoxSize.width;Zt=2*et,Ln=ae.x-et,Zt>xn&&!this._isInitialRender&&!this._growAfterOpen&&(Ln=ae.x-xn/2)}return{top:Tt,left:Ln,bottom:on,right:oi,width:Zt,height:_t}}_setBoundingBoxStyles(ae,Me){const qe=this._calculateBoundingBoxRect(ae,Me);!this._isInitialRender&&!this._growAfterOpen&&(qe.height=Math.min(qe.height,this._lastBoundingBoxSize.height),qe.width=Math.min(qe.width,this._lastBoundingBoxSize.width));const it={};if(this._hasExactPosition())it.top=it.left="0",it.bottom=it.right=it.maxHeight=it.maxWidth="",it.width=it.height="100%";else{const _t=this._overlayRef.getConfig().maxHeight,Tt=this._overlayRef.getConfig().maxWidth;it.height=(0,Y.a1)(qe.height),it.top=(0,Y.a1)(qe.top),it.bottom=(0,Y.a1)(qe.bottom),it.width=(0,Y.a1)(qe.width),it.left=(0,Y.a1)(qe.left),it.right=(0,Y.a1)(qe.right),it.alignItems="center"===Me.overlayX?"center":"end"===Me.overlayX?"flex-end":"flex-start",it.justifyContent="center"===Me.overlayY?"center":"bottom"===Me.overlayY?"flex-end":"flex-start",_t&&(it.maxHeight=(0,Y.a1)(_t)),Tt&&(it.maxWidth=(0,Y.a1)(Tt))}this._lastBoundingBoxSize=qe,Wt(this._boundingBox.style,it)}_resetBoundingBoxStyles(){Wt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Wt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(ae,Me){const qe={},it=this._hasExactPosition(),_t=this._hasFlexibleDimensions,Tt=this._overlayRef.getConfig();if(it){const Zt=this._viewportRuler.getViewportScrollPosition();Wt(qe,this._getExactOverlayY(Me,ae,Zt)),Wt(qe,this._getExactOverlayX(Me,ae,Zt))}else qe.position="static";let on="",En=this._getOffset(Me,"x"),Tn=this._getOffset(Me,"y");En&&(on+=`translateX(${En}px) `),Tn&&(on+=`translateY(${Tn}px)`),qe.transform=on.trim(),Tt.maxHeight&&(it?qe.maxHeight=(0,Y.a1)(Tt.maxHeight):_t&&(qe.maxHeight="")),Tt.maxWidth&&(it?qe.maxWidth=(0,Y.a1)(Tt.maxWidth):_t&&(qe.maxWidth="")),Wt(this._pane.style,qe)}_getExactOverlayY(ae,Me,qe){let it={top:"",bottom:""},_t=this._getOverlayPoint(Me,this._overlayRect,ae);return this._isPushed&&(_t=this._pushOverlayOnScreen(_t,this._overlayRect,qe)),"bottom"===ae.overlayY?it.bottom=this._document.documentElement.clientHeight-(_t.y+this._overlayRect.height)+"px":it.top=(0,Y.a1)(_t.y),it}_getExactOverlayX(ae,Me,qe){let Tt,it={left:"",right:""},_t=this._getOverlayPoint(Me,this._overlayRect,ae);return this._isPushed&&(_t=this._pushOverlayOnScreen(_t,this._overlayRect,qe)),Tt=this._isRtl()?"end"===ae.overlayX?"left":"right":"end"===ae.overlayX?"right":"left","right"===Tt?it.right=this._document.documentElement.clientWidth-(_t.x+this._overlayRect.width)+"px":it.left=(0,Y.a1)(_t.x),it}_getScrollVisibility(){const ae=this._getOriginRect(),Me=this._pane.getBoundingClientRect(),qe=this._scrollables.map(it=>it.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Rt(ae,qe),isOriginOutsideView:Yt(ae,qe),isOverlayClipped:Rt(Me,qe),isOverlayOutsideView:Yt(Me,qe)}}_subtractOverflows(ae,...Me){return Me.reduce((qe,it)=>qe-Math.max(it,0),ae)}_getNarrowedViewportRect(){const ae=this._document.documentElement.clientWidth,Me=this._document.documentElement.clientHeight,qe=this._viewportRuler.getViewportScrollPosition();return{top:qe.top+this._viewportMargin,left:qe.left+this._viewportMargin,right:qe.left+ae-this._viewportMargin,bottom:qe.top+Me-this._viewportMargin,width:ae-2*this._viewportMargin,height:Me-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(ae,Me){return"x"===Me?null==ae.offsetX?this._offsetX:ae.offsetX:null==ae.offsetY?this._offsetY:ae.offsetY}_validatePositions(){}_addPanelClasses(ae){this._pane&&(0,Y.FG)(ae).forEach(Me=>{""!==Me&&-1===this._appliedPanelClasses.indexOf(Me)&&(this._appliedPanelClasses.push(Me),this._pane.classList.add(Me))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(ae=>{this._pane.classList.remove(ae)}),this._appliedPanelClasses=[])}_getOriginRect(){const ae=this._origin;if(ae instanceof oe.aKT)return ae.nativeElement.getBoundingClientRect();if(ae instanceof Element)return ae.getBoundingClientRect();const Me=ae.width||0,qe=ae.height||0;return{top:ae.y,bottom:ae.y+qe,left:ae.x,right:ae.x+Me,height:qe,width:Me}}}function Wt(Pt,ae){for(let Me in ae)ae.hasOwnProperty(Me)&&(Pt[Me]=ae[Me]);return Pt}function Ve(Pt){if("number"!=typeof Pt&&null!=Pt){const[ae,Me]=Pt.split(un);return Me&&"px"!==Me?null:parseFloat(ae)}return Pt||null}function Ye(Pt){return{top:Math.floor(Pt.top),right:Math.floor(Pt.right),bottom:Math.floor(Pt.bottom),left:Math.floor(Pt.left),width:Math.floor(Pt.width),height:Math.floor(Pt.height)}}const Ee="cdk-global-overlay-wrapper";class lt{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(ae){const Me=ae.getConfig();this._overlayRef=ae,this._width&&!Me.width&&ae.updateSize({width:this._width}),this._height&&!Me.height&&ae.updateSize({height:this._height}),ae.hostElement.classList.add(Ee),this._isDisposed=!1}top(ae=""){return this._bottomOffset="",this._topOffset=ae,this._alignItems="flex-start",this}left(ae=""){return this._xOffset=ae,this._xPosition="left",this}bottom(ae=""){return this._topOffset="",this._bottomOffset=ae,this._alignItems="flex-end",this}right(ae=""){return this._xOffset=ae,this._xPosition="right",this}start(ae=""){return this._xOffset=ae,this._xPosition="start",this}end(ae=""){return this._xOffset=ae,this._xPosition="end",this}width(ae=""){return this._overlayRef?this._overlayRef.updateSize({width:ae}):this._width=ae,this}height(ae=""){return this._overlayRef?this._overlayRef.updateSize({height:ae}):this._height=ae,this}centerHorizontally(ae=""){return this.left(ae),this._xPosition="center",this}centerVertically(ae=""){return this.top(ae),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const ae=this._overlayRef.overlayElement.style,Me=this._overlayRef.hostElement.style,qe=this._overlayRef.getConfig(),{width:it,height:_t,maxWidth:Tt,maxHeight:on}=qe,En=!("100%"!==it&&"100vw"!==it||Tt&&"100%"!==Tt&&"100vw"!==Tt),Tn=!("100%"!==_t&&"100vh"!==_t||on&&"100%"!==on&&"100vh"!==on),Zt=this._xPosition,Ln=this._xOffset,oi="rtl"===this._overlayRef.getConfig().direction;let et="",xn="",_n="";En?_n="flex-start":"center"===Zt?(_n="center",oi?xn=Ln:et=Ln):oi?"left"===Zt||"end"===Zt?(_n="flex-end",et=Ln):("right"===Zt||"start"===Zt)&&(_n="flex-start",xn=Ln):"left"===Zt||"start"===Zt?(_n="flex-start",et=Ln):("right"===Zt||"end"===Zt)&&(_n="flex-end",xn=Ln),ae.position=this._cssPosition,ae.marginLeft=En?"0":et,ae.marginTop=Tn?"0":this._topOffset,ae.marginBottom=this._bottomOffset,ae.marginRight=En?"0":xn,Me.justifyContent=_n,Me.alignItems=Tn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const ae=this._overlayRef.overlayElement.style,Me=this._overlayRef.hostElement,qe=Me.style;Me.classList.remove(Ee),qe.justifyContent=qe.alignItems=ae.marginTop=ae.marginBottom=ae.marginLeft=ae.marginRight=ae.position="",this._overlayRef=null,this._isDisposed=!0}}let fn=(()=>{class Pt{constructor(Me,qe,it,_t){this._viewportRuler=Me,this._document=qe,this._platform=it,this._overlayContainer=_t}global(){return new lt}flexibleConnectedTo(Me){return new gn(Me,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(qe){return new(qe||Pt)(oe.KVO(p.Xj),oe.KVO(J.qQ),oe.KVO(Oe.OD),oe.KVO(Dr))}}static{this.\u0275prov=oe.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}return Pt})(),zn=0,dn=(()=>{class Pt{constructor(Me,qe,it,_t,Tt,on,En,Tn,Zt,Ln,oi,et){this.scrollStrategies=Me,this._overlayContainer=qe,this._componentFactoryResolver=it,this._positionBuilder=_t,this._keyboardDispatcher=Tt,this._injector=on,this._ngZone=En,this._document=Tn,this._directionality=Zt,this._location=Ln,this._outsideClickDispatcher=oi,this._animationsModuleType=et}create(Me){const qe=this._createHostElement(),it=this._createPaneElement(qe),_t=this._createPortalOutlet(it),Tt=new Ne(Me);return Tt.direction=Tt.direction||this._directionality.value,new mr(_t,qe,it,Tt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(Me){const qe=this._document.createElement("div");return qe.id="cdk-overlay-"+zn++,qe.classList.add("cdk-overlay-pane"),Me.appendChild(qe),qe}_createHostElement(){const Me=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(Me),Me}_createPortalOutlet(Me){return this._appRef||(this._appRef=this._injector.get(oe.o8S)),new ce.aI(Me,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(qe){return new(qe||Pt)(oe.KVO(Ue),oe.KVO(Dr),oe.KVO(oe.OM3),oe.KVO(fn),oe.KVO($n),oe.KVO(oe.zZn),oe.KVO(oe.SKi),oe.KVO(J.qQ),oe.KVO(De.dS),oe.KVO(J.aZ),oe.KVO(br),oe.KVO(oe.bc$,8))}}static{this.\u0275prov=oe.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}return Pt})();const Yn={provide:new oe.nKC("cdk-connected-overlay-scroll-strategy"),deps:[dn],useFactory:function On(Pt){return()=>Pt.scrollStrategies.reposition()}};let Ar=(()=>{class Pt{static{this.\u0275fac=function(qe){return new(qe||Pt)}}static{this.\u0275mod=oe.$C({type:Pt})}static{this.\u0275inj=oe.G2t({providers:[dn,Yn],imports:[De.jI,ce.jc,p.E9,p.E9]})}}return Pt})()},6860:(nn,tt,j)=>{j.d(tt,{BQ:()=>ge,CZ:()=>ht,Fb:()=>Rt,KT:()=>St,OD:()=>Y,v8:()=>de,vc:()=>Yt});var p=j(7705),J=j(177);let oe;try{oe=typeof Intl<"u"&&Intl.v8BreakIterator}catch{oe=!1}let De,$e,Et,Y=(()=>{class Ue{constructor(Je){this._platformId=Je,this.isBrowser=this._platformId?(0,J.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!oe)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(We){return new(We||Ue)(p.KVO(p.Agw))}}static{this.\u0275prov=p.jDH({token:Ue,factory:Ue.\u0275fac,providedIn:"root"})}}return Ue})();function ge(Ue){return function ce(){if(null==De&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>De=!0}))}finally{De=De||!1}return De}()?Ue:!!Ue.capture}function ht(){if(null==$e){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return $e=!1,$e;if("scrollBehavior"in document.documentElement.style)$e=!0;else{const Ue=Element.prototype.scrollTo;$e=!!Ue&&!/\{\s*\[native code\]\s*\}/.test(Ue.toString())}}return $e}function St(Ue){if(function yt(){if(null==Et){const Ue=typeof document<"u"?document.head:null;Et=!(!Ue||!Ue.createShadowRoot&&!Ue.attachShadow)}return Et}()){const Ne=Ue.getRootNode?Ue.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Ne instanceof ShadowRoot)return Ne}return null}function Yt(){let Ue=typeof document<"u"&&document?document.activeElement:null;for(;Ue&&Ue.shadowRoot;){const Ne=Ue.shadowRoot.activeElement;if(Ne===Ue)break;Ue=Ne}return Ue}function Rt(Ue){return Ue.composedPath?Ue.composedPath()[0]:Ue.target}function de(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6939:(nn,tt,j)=>{j.d(tt,{A8:()=>ce,I3:()=>Yt,VA:()=>ge,aI:()=>Ot,jc:()=>de,lb:()=>$e});var p=j(7705),J=j(177);class De{attach(Je){return this._attachedHost=Je,Je.attach(this)}detach(){let Je=this._attachedHost;null!=Je&&(this._attachedHost=null,Je.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Je){this._attachedHost=Je}}class ce extends De{constructor(Je,We,It,Ht,pt){super(),this.component=Je,this.viewContainerRef=We,this.injector=It,this.componentFactoryResolver=Ht,this.projectableNodes=pt}}class ge extends De{constructor(Je,We,It,Ht){super(),this.templateRef=Je,this.viewContainerRef=We,this.context=It,this.injector=Ht}get origin(){return this.templateRef.elementRef}attach(Je,We=this.context){return this.context=We,super.attach(Je)}detach(){return this.context=void 0,super.detach()}}class Pe extends De{constructor(Je){super(),this.element=Je instanceof p.aKT?Je.nativeElement:Je}}class $e{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Je){return Je instanceof ce?(this._attachedPortal=Je,this.attachComponentPortal(Je)):Je instanceof ge?(this._attachedPortal=Je,this.attachTemplatePortal(Je)):this.attachDomPortal&&Je instanceof Pe?(this._attachedPortal=Je,this.attachDomPortal(Je)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Je){this._disposeFn=Je}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ot extends $e{constructor(Je,We,It,Ht,pt){super(),this.outletElement=Je,this._componentFactoryResolver=We,this._appRef=It,this._defaultInjector=Ht,this.attachDomPortal=ln=>{const $n=ln.element,br=this._document.createComment("dom-portal");$n.parentNode.insertBefore(br,$n),this.outletElement.appendChild($n),this._attachedPortal=ln,super.setDisposeFn(()=>{br.parentNode&&br.parentNode.replaceChild($n,br)})},this._document=pt}attachComponentPortal(Je){const It=(Je.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Je.component);let Ht;return Je.viewContainerRef?(Ht=Je.viewContainerRef.createComponent(It,Je.viewContainerRef.length,Je.injector||Je.viewContainerRef.injector,Je.projectableNodes||void 0),this.setDisposeFn(()=>Ht.destroy())):(Ht=It.create(Je.injector||this._defaultInjector||p.zZn.NULL),this._appRef.attachView(Ht.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(Ht.hostView),Ht.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Ht)),this._attachedPortal=Je,Ht}attachTemplatePortal(Je){let We=Je.viewContainerRef,It=We.createEmbeddedView(Je.templateRef,Je.context,{injector:Je.injector});return It.rootNodes.forEach(Ht=>this.outletElement.appendChild(Ht)),It.detectChanges(),this.setDisposeFn(()=>{let Ht=We.indexOf(It);-1!==Ht&&We.remove(Ht)}),this._attachedPortal=Je,It}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(Je){return Je.hostView.rootNodes[0]}}let Yt=(()=>{class Ne extends $e{constructor(We,It,Ht){super(),this._componentFactoryResolver=We,this._viewContainerRef=It,this._isInitialized=!1,this.attached=new p.bkB,this.attachDomPortal=pt=>{const ln=pt.element,$n=this._document.createComment("dom-portal");pt.setAttachedHost(this),ln.parentNode.insertBefore($n,ln),this._getRootNode().appendChild(ln),this._attachedPortal=pt,super.setDisposeFn(()=>{$n.parentNode&&$n.parentNode.replaceChild(ln,$n)})},this._document=Ht}get portal(){return this._attachedPortal}set portal(We){this.hasAttached()&&!We&&!this._isInitialized||(this.hasAttached()&&super.detach(),We&&super.attach(We),this._attachedPortal=We||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(We){We.setAttachedHost(this);const It=null!=We.viewContainerRef?We.viewContainerRef:this._viewContainerRef,pt=(We.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(We.component),ln=It.createComponent(pt,It.length,We.injector||It.injector,We.projectableNodes||void 0);return It!==this._viewContainerRef&&this._getRootNode().appendChild(ln.hostView.rootNodes[0]),super.setDisposeFn(()=>ln.destroy()),this._attachedPortal=We,this._attachedRef=ln,this.attached.emit(ln),ln}attachTemplatePortal(We){We.setAttachedHost(this);const It=this._viewContainerRef.createEmbeddedView(We.templateRef,We.context,{injector:We.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=We,this._attachedRef=It,this.attached.emit(It),It}_getRootNode(){const We=this._viewContainerRef.element.nativeElement;return We.nodeType===We.ELEMENT_NODE?We:We.parentNode}static{this.\u0275fac=function(It){return new(It||Ne)(p.rXU(p.OM3),p.rXU(p.c1b),p.rXU(J.qQ))}}static{this.\u0275dir=p.FsC({type:Ne,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[p.Vt3]})}}return Ne})(),de=(()=>{class Ne{static{this.\u0275fac=function(It){return new(It||Ne)}}static{this.\u0275mod=p.$C({type:Ne})}static{this.\u0275inj=p.G2t({})}}return Ne})()},4955:(nn,tt,j)=>{j.d(tt,{Gj:()=>$t,R:()=>it,E9:()=>rn,Xj:()=>on});var p=j(4085),J=j(7705),oe=j(1413),Y=j(7673),Oe=j(1985),Le=j(8750),ve=j(1397),Te=j(7441),De=j(8071),ce=j(6450);const ge=["addListener","removeListener"],Pe=["addEventListener","removeEventListener"],$e=["on","off"];function ht(Ft,Fe,ie,Re){if((0,De.T)(ie)&&(Re=ie,ie=void 0),Re)return ht(Ft,Fe,ie).pipe((0,ce.I)(Re));const[kt,sn]=function St(Ft){return(0,De.T)(Ft.addEventListener)&&(0,De.T)(Ft.removeEventListener)}(Ft)?Pe.map(Hn=>ar=>Ft[Hn](Fe,ar,ie)):function Et(Ft){return(0,De.T)(Ft.addListener)&&(0,De.T)(Ft.removeListener)}(Ft)?ge.map(Ot(Ft,Fe)):function yt(Ft){return(0,De.T)(Ft.on)&&(0,De.T)(Ft.off)}(Ft)?$e.map(Ot(Ft,Fe)):[];if(!kt&&(0,Te.X)(Ft))return(0,ve.Z)(Hn=>ht(Hn,Fe,ie))((0,Le.Tg)(Ft));if(!kt)throw new TypeError("Invalid event target");return new Oe.c(Hn=>{const ar=(...hr)=>Hn.next(1<hr.length?hr:hr[0]);return kt(ar),()=>sn(ar)})}function Ot(Ft,Fe){return ie=>Re=>Ft[ie](Fe,Re)}var Yt=j(6780),Rt=j(8359);const de={schedule(Ft){let Fe=requestAnimationFrame,ie=cancelAnimationFrame;const{delegate:Re}=de;Re&&(Fe=Re.requestAnimationFrame,ie=Re.cancelAnimationFrame);const kt=Fe(sn=>{ie=void 0,Ft(sn)});return new Rt.yU(()=>ie?.(kt))},requestAnimationFrame(...Ft){const{delegate:Fe}=de;return(Fe?.requestAnimationFrame||requestAnimationFrame)(...Ft)},cancelAnimationFrame(...Ft){const{delegate:Fe}=de;return(Fe?.cancelAnimationFrame||cancelAnimationFrame)(...Ft)},delegate:void 0};var Ne=j(9687);new class Je extends Ne.q{flush(Fe){let ie;this._active=!0,Fe?ie=Fe.id:(ie=this._scheduled,this._scheduled=void 0);const{actions:Re}=this;let kt;Fe=Fe||Re.shift();do{if(kt=Fe.execute(Fe.state,Fe.delay))break}while((Fe=Re[0])&&Fe.id===ie&&Re.shift());if(this._active=!1,kt){for(;(Fe=Re[0])&&Fe.id===ie&&Re.shift();)Fe.unsubscribe();throw kt}}}(class Ue extends Yt.R{constructor(Fe,ie){super(Fe,ie),this.scheduler=Fe,this.work=ie}requestAsyncId(Fe,ie,Re=0){return null!==Re&&Re>0?super.requestAsyncId(Fe,ie,Re):(Fe.actions.push(this),Fe._scheduled||(Fe._scheduled=de.requestAnimationFrame(()=>Fe.flush(void 0))))}recycleAsyncId(Fe,ie,Re=0){var kt;if(null!=Re?Re>0:this.delay>0)return super.recycleAsyncId(Fe,ie,Re);const{actions:sn}=Fe;null!=ie&&ie===Fe._scheduled&&(null===(kt=sn[sn.length-1])||void 0===kt?void 0:kt.id)!==ie&&(de.cancelAnimationFrame(ie),Fe._scheduled=void 0)}});let pt,Ht=1;const ln={};function $n(Ft){return Ft in ln&&(delete ln[Ft],!0)}const br={setImmediate(Ft){const Fe=Ht++;return ln[Fe]=!0,pt||(pt=Promise.resolve()),pt.then(()=>$n(Fe)&&Ft()),Fe},clearImmediate(Ft){$n(Ft)}},{setImmediate:mr,clearImmediate:Rn}=br,un={setImmediate(...Ft){const{delegate:Fe}=un;return(Fe?.setImmediate||mr)(...Ft)},clearImmediate(Ft){const{delegate:Fe}=un;return(Fe?.clearImmediate||Rn)(Ft)},delegate:void 0};new class Wt extends Ne.q{flush(Fe){this._active=!0;const ie=this._scheduled;this._scheduled=void 0;const{actions:Re}=this;let kt;Fe=Fe||Re.shift();do{if(kt=Fe.execute(Fe.state,Fe.delay))break}while((Fe=Re[0])&&Fe.id===ie&&Re.shift());if(this._active=!1,kt){for(;(Fe=Re[0])&&Fe.id===ie&&Re.shift();)Fe.unsubscribe();throw kt}}}(class gn extends Yt.R{constructor(Fe,ie){super(Fe,ie),this.scheduler=Fe,this.work=ie}requestAsyncId(Fe,ie,Re=0){return null!==Re&&Re>0?super.requestAsyncId(Fe,ie,Re):(Fe.actions.push(this),Fe._scheduled||(Fe._scheduled=un.setImmediate(Fe.flush.bind(Fe,void 0))))}recycleAsyncId(Fe,ie,Re=0){var kt;if(null!=Re?Re>0:this.delay>0)return super.recycleAsyncId(Fe,ie,Re);const{actions:sn}=Fe;null!=ie&&(null===(kt=sn[sn.length-1])||void 0===kt?void 0:kt.id)!==ie&&(un.clearImmediate(ie),Fe._scheduled===ie&&(Fe._scheduled=void 0))}});var ut=j(3236),ze=j(9974),Ee=j(4360),fn=j(9470);function en(Ft,Fe=ut.E){return function lt(Ft){return(0,ze.N)((Fe,ie)=>{let Re=!1,kt=null,sn=null,Hn=!1;const ar=()=>{if(sn?.unsubscribe(),sn=null,Re){Re=!1;const At=kt;kt=null,ie.next(At)}Hn&&ie.complete()},hr=()=>{sn=null,Hn&&ie.complete()};Fe.subscribe((0,Ee._)(ie,At=>{Re=!0,kt=At,sn||(0,Le.Tg)(Ft(At)).subscribe(sn=(0,Ee._)(ie,ar,hr))},()=>{Hn=!0,(!Re||!sn||sn.closed)&&ie.complete()}))})}(()=>function dn(Ft=0,Fe,ie=ut.b){let Re=-1;return null!=Fe&&((0,fn.m)(Fe)?ie=Fe:Re=Fe),new Oe.c(kt=>{let sn=function zn(Ft){return Ft instanceof Date&&!isNaN(Ft)}(Ft)?+Ft-ie.now():Ft;sn<0&&(sn=0);let Hn=0;return ie.schedule(function(){kt.closed||(kt.next(Hn++),0<=Re?this.schedule(void 0,Re):kt.complete())},sn)})}(Ft,Fe))}var Pn=j(5964),Gn=j(6860),Tr=j(177),On=j(8203);let it=(()=>{class Ft{constructor(ie,Re,kt){this._ngZone=ie,this._platform=Re,this._scrolled=new oe.B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=kt}register(ie){this.scrollContainers.has(ie)||this.scrollContainers.set(ie,ie.elementScrolled().subscribe(()=>this._scrolled.next(ie)))}deregister(ie){const Re=this.scrollContainers.get(ie);Re&&(Re.unsubscribe(),this.scrollContainers.delete(ie))}scrolled(ie=20){return this._platform.isBrowser?new Oe.c(Re=>{this._globalSubscription||this._addGlobalListener();const kt=ie>0?this._scrolled.pipe(en(ie)).subscribe(Re):this._scrolled.subscribe(Re);return this._scrolledCount++,()=>{kt.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Y.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((ie,Re)=>this.deregister(Re)),this._scrolled.complete()}ancestorScrolled(ie,Re){const kt=this.getAncestorScrollContainers(ie);return this.scrolled(Re).pipe((0,Pn.p)(sn=>!sn||kt.indexOf(sn)>-1))}getAncestorScrollContainers(ie){const Re=[];return this.scrollContainers.forEach((kt,sn)=>{this._scrollableContainsElement(sn,ie)&&Re.push(sn)}),Re}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(ie,Re){let kt=(0,p.i8)(Re),sn=ie.getElementRef().nativeElement;do{if(kt==sn)return!0}while(kt=kt.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ht(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(Re){return new(Re||Ft)(J.KVO(J.SKi),J.KVO(Gn.OD),J.KVO(Tr.qQ,8))}}static{this.\u0275prov=J.jDH({token:Ft,factory:Ft.\u0275fac,providedIn:"root"})}}return Ft})(),on=(()=>{class Ft{constructor(ie,Re,kt){this._platform=ie,this._change=new oe.B,this._changeListener=sn=>{this._change.next(sn)},this._document=kt,Re.runOutsideAngular(()=>{if(ie.isBrowser){const sn=this._getWindow();sn.addEventListener("resize",this._changeListener),sn.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const ie=this._getWindow();ie.removeEventListener("resize",this._changeListener),ie.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const ie={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),ie}getViewportRect(){const ie=this.getViewportScrollPosition(),{width:Re,height:kt}=this.getViewportSize();return{top:ie.top,left:ie.left,bottom:ie.top+kt,right:ie.left+Re,height:kt,width:Re}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const ie=this._document,Re=this._getWindow(),kt=ie.documentElement,sn=kt.getBoundingClientRect();return{top:-sn.top||ie.body.scrollTop||Re.scrollY||kt.scrollTop||0,left:-sn.left||ie.body.scrollLeft||Re.scrollX||kt.scrollLeft||0}}change(ie=20){return ie>0?this._change.pipe(en(ie)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const ie=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:ie.innerWidth,height:ie.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(Re){return new(Re||Ft)(J.KVO(Gn.OD),J.KVO(J.SKi),J.KVO(Tr.qQ,8))}}static{this.\u0275prov=J.jDH({token:Ft,factory:Ft.\u0275fac,providedIn:"root"})}}return Ft})(),$t=(()=>{class Ft{static{this.\u0275fac=function(Re){return new(Re||Ft)}}static{this.\u0275mod=J.$C({type:Ft})}static{this.\u0275inj=J.G2t({})}}return Ft})(),rn=(()=>{class Ft{static{this.\u0275fac=function(Re){return new(Re||Ft)}}static{this.\u0275mod=J.$C({type:Ft})}static{this.\u0275inj=J.G2t({imports:[On.jI,$t,On.jI,$t]})}}return Ft})()},177:(nn,tt,j)=>{j.d(tt,{AJ:()=>Zr,B3:()=>rs,MD:()=>Js,N0:()=>qi,QT:()=>oe,QX:()=>qr,Sm:()=>Ot,Sq:()=>Vn,TG:()=>Ps,UE:()=>os,VF:()=>Oe,Vy:()=>Is,Xr:()=>fr,YU:()=>In,ZD:()=>Y,_b:()=>zt,aZ:()=>yt,bT:()=>ys,e1:()=>Ss,fw:()=>Et,hb:()=>$e,hj:()=>Te,qQ:()=>Le,ux:()=>fi});var p=j(7705);let J=null;function oe(){return J}function Y(_){J||(J=_)}class Oe{}const Le=new p.nKC("DocumentToken");let ve=(()=>{class _{historyGo(R){throw new Error("Not implemented")}static{this.\u0275fac=function(B){return new(B||_)}}static{this.\u0275prov=p.jDH({token:_,factory:function(){return(0,p.WQX)(De)},providedIn:"platform"})}}return _})();const Te=new p.nKC("Location Initialized");let De=(()=>{class _ extends ve{constructor(){super(),this._doc=(0,p.WQX)(Le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oe().getBaseHref(this._doc)}onPopState(R){const B=oe().getGlobalEventTarget(this._doc,"window");return B.addEventListener("popstate",R,!1),()=>B.removeEventListener("popstate",R)}onHashChange(R){const B=oe().getGlobalEventTarget(this._doc,"window");return B.addEventListener("hashchange",R,!1),()=>B.removeEventListener("hashchange",R)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(R){this._location.pathname=R}pushState(R,B,ee){this._history.pushState(R,B,ee)}replaceState(R,B,ee){this._history.replaceState(R,B,ee)}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}static{this.\u0275fac=function(B){return new(B||_)}}static{this.\u0275prov=p.jDH({token:_,factory:function(){return new _},providedIn:"platform"})}}return _})();function ce(_,L){if(0==_.length)return L;if(0==L.length)return _;let R=0;return _.endsWith("/")&&R++,L.startsWith("/")&&R++,2==R?_+L.substring(1):1==R?_+L:_+"/"+L}function ge(_){const L=_.match(/#|\?|$/),R=L&&L.index||_.length;return _.slice(0,R-("/"===_[R-1]?1:0))+_.slice(R)}function Pe(_){return _&&"?"!==_[0]?"?"+_:_}let $e=(()=>{class _{historyGo(R){throw new Error("Not implemented")}static{this.\u0275fac=function(B){return new(B||_)}}static{this.\u0275prov=p.jDH({token:_,factory:function(){return(0,p.WQX)(Ot)},providedIn:"root"})}}return _})();const ht=new p.nKC("appBaseHref");let Ot=(()=>{class _ extends $e{constructor(R,B){super(),this._platformLocation=R,this._removeListenerFns=[],this._baseHref=B??this._platformLocation.getBaseHrefFromDOM()??(0,p.WQX)(Le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return ce(this._baseHref,R)}path(R=!1){const B=this._platformLocation.pathname+Pe(this._platformLocation.search),ee=this._platformLocation.hash;return ee&&R?`${B}${ee}`:B}pushState(R,B,ee,He){const st=this.prepareExternalUrl(ee+Pe(He));this._platformLocation.pushState(R,B,st)}replaceState(R,B,ee,He){const st=this.prepareExternalUrl(ee+Pe(He));this._platformLocation.replaceState(R,B,st)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static{this.\u0275fac=function(B){return new(B||_)(p.KVO(ve),p.KVO(ht,8))}}static{this.\u0275prov=p.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})(),Et=(()=>{class _ extends $e{constructor(R,B){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=B&&(this._baseHref=B)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let B=this._platformLocation.hash;return null==B&&(B="#"),B.length>0?B.substring(1):B}prepareExternalUrl(R){const B=ce(this._baseHref,R);return B.length>0?"#"+B:B}pushState(R,B,ee,He){let st=this.prepareExternalUrl(ee+Pe(He));0==st.length&&(st=this._platformLocation.pathname),this._platformLocation.pushState(R,B,st)}replaceState(R,B,ee,He){let st=this.prepareExternalUrl(ee+Pe(He));0==st.length&&(st=this._platformLocation.pathname),this._platformLocation.replaceState(R,B,st)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static{this.\u0275fac=function(B){return new(B||_)(p.KVO(ve),p.KVO(ht,8))}}static{this.\u0275prov=p.jDH({token:_,factory:_.\u0275fac})}}return _})(),yt=(()=>{class _{constructor(R){this._subject=new p.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=R;const B=this._locationStrategy.getBaseHref();this._basePath=function de(_){if(new RegExp("^(https?:)?//").test(_)){const[,R]=_.split(/\/\/[^\/]+/);return R}return _}(ge(Rt(B))),this._locationStrategy.onPopState(ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:ee.state,type:ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(R=!1){return this.normalize(this._locationStrategy.path(R))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(R,B=""){return this.path()==this.normalize(R+Pe(B))}normalize(R){return _.stripTrailingSlash(function Yt(_,L){if(!_||!L.startsWith(_))return L;const R=L.substring(_.length);return""===R||["/",";","?","#"].includes(R[0])?R:L}(this._basePath,Rt(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._locationStrategy.prepareExternalUrl(R)}go(R,B="",ee=null){this._locationStrategy.pushState(ee,"",R,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+Pe(B)),ee)}replaceState(R,B="",ee=null){this._locationStrategy.replaceState(ee,"",R,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+Pe(B)),ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(R=0){this._locationStrategy.historyGo?.(R)}onUrlChange(R){return this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(B=>{this._notifyUrlChangeListeners(B.url,B.state)})),()=>{const B=this._urlChangeListeners.indexOf(R);this._urlChangeListeners.splice(B,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(R="",B){this._urlChangeListeners.forEach(ee=>ee(R,B))}subscribe(R,B,ee){return this._subject.subscribe({next:R,error:B,complete:ee})}static{this.normalizeQueryParams=Pe}static{this.joinWithSlash=ce}static{this.stripTrailingSlash=ge}static{this.\u0275fac=function(B){return new(B||_)(p.KVO($e))}}static{this.\u0275prov=p.jDH({token:_,factory:function(){return function St(){return new yt((0,p.KVO)($e))}()},providedIn:"root"})}}return _})();function Rt(_){return _.replace(/\/index.html$/,"")}var Ne=function(_){return _[_.Decimal=0]="Decimal",_[_.Percent=1]="Percent",_[_.Currency=2]="Currency",_[_.Scientific=3]="Scientific",_}(Ne||{}),pt=function(_){return _[_.Decimal=0]="Decimal",_[_.Group=1]="Group",_[_.List=2]="List",_[_.PercentSign=3]="PercentSign",_[_.PlusSign=4]="PlusSign",_[_.MinusSign=5]="MinusSign",_[_.Exponential=6]="Exponential",_[_.SuperscriptingExponent=7]="SuperscriptingExponent",_[_.PerMille=8]="PerMille",_[_.Infinity=9]="Infinity",_[_.NaN=10]="NaN",_[_.TimeSeparator=11]="TimeSeparator",_[_.CurrencyDecimal=12]="CurrencyDecimal",_[_.CurrencyGroup=13]="CurrencyGroup",_}(pt||{});function ut(_,L){const R=(0,p.H5H)(_),B=R[p.KH2.NumberSymbols][L];if(typeof B>"u"){if(L===pt.CurrencyDecimal)return R[p.KH2.NumberSymbols][pt.Decimal];if(L===pt.CurrencyGroup)return R[p.KH2.NumberSymbols][pt.Group]}return B}const W=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function tn(_){const L=parseInt(_);if(isNaN(L))throw new Error("Invalid integer literal when parsing "+_);return L}function zt(_,L){L=encodeURIComponent(L);for(const R of _.split(";")){const B=R.indexOf("="),[ee,He]=-1==B?[R,""]:[R.slice(0,B),R.slice(B+1)];if(ee.trim()===L)return decodeURIComponent(He)}return null}const Fn=/\s+/,pn=[];let In=(()=>{class _{constructor(R,B,ee,He){this._iterableDiffers=R,this._keyValueDiffers=B,this._ngEl=ee,this._renderer=He,this.initialClasses=pn,this.stateMap=new Map}set klass(R){this.initialClasses=null!=R?R.trim().split(Fn):pn}set ngClass(R){this.rawClass="string"==typeof R?R.trim().split(Fn):R}ngDoCheck(){for(const B of this.initialClasses)this._updateState(B,!0);const R=this.rawClass;if(Array.isArray(R)||R instanceof Set)for(const B of R)this._updateState(B,!0);else if(null!=R)for(const B of Object.keys(R))this._updateState(B,!!R[B]);this._applyStateDiff()}_updateState(R,B){const ee=this.stateMap.get(R);void 0!==ee?(ee.enabled!==B&&(ee.changed=!0,ee.enabled=B),ee.touched=!0):this.stateMap.set(R,{enabled:B,changed:!0,touched:!0})}_applyStateDiff(){for(const R of this.stateMap){const B=R[0],ee=R[1];ee.changed?(this._toggleClass(B,ee.enabled),ee.changed=!1):ee.touched||(ee.enabled&&this._toggleClass(B,!1),this.stateMap.delete(B)),ee.touched=!1}}_toggleClass(R,B){(R=R.trim()).length>0&&R.split(Fn).forEach(ee=>{B?this._renderer.addClass(this._ngEl.nativeElement,ee):this._renderer.removeClass(this._ngEl.nativeElement,ee)})}static{this.\u0275fac=function(B){return new(B||_)(p.rXU(p._q3),p.rXU(p.MKu),p.rXU(p.aKT),p.rXU(p.sFG))}}static{this.\u0275dir=p.FsC({type:_,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return _})();class Xe{constructor(L,R,B,ee){this.$implicit=L,this.ngForOf=R,this.index=B,this.count=ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class _{set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}constructor(R,B,ee){this._viewContainer=R,this._template=B,this._differs=ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const B=this._viewContainer;R.forEachOperation((ee,He,st)=>{if(null==ee.previousIndex)B.createEmbeddedView(this._template,new Xe(ee.item,this._ngForOf,-1,-1),null===st?void 0:st);else if(null==st)B.remove(null===He?void 0:He);else if(null!==He){const qt=B.get(He);B.move(qt,st),Gr(qt,ee)}});for(let ee=0,He=B.length;ee<He;ee++){const qt=B.get(ee).context;qt.index=ee,qt.count=He,qt.ngForOf=this._ngForOf}R.forEachIdentityChange(ee=>{Gr(B.get(ee.currentIndex),ee)})}static ngTemplateContextGuard(R,B){return!0}static{this.\u0275fac=function(B){return new(B||_)(p.rXU(p.c1b),p.rXU(p.C4Q),p.rXU(p._q3))}}static{this.\u0275dir=p.FsC({type:_,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return _})();function Gr(_,L){_.context.$implicit=L.item}let ys=(()=>{class _{constructor(R,B){this._viewContainer=R,this._context=new Ri,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=B}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){zr("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){zr("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,B){return!0}static{this.\u0275fac=function(B){return new(B||_)(p.rXU(p.c1b),p.rXU(p.C4Q))}}static{this.\u0275dir=p.FsC({type:_,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return _})();class Ri{constructor(){this.$implicit=null,this.ngIf=null}}function zr(_,L){if(L&&!L.createEmbeddedView)throw new Error(`${_} must be a TemplateRef, but received '${(0,p.Tbb)(L)}'.`)}class Ds{constructor(L,R){this._viewContainerRef=L,this._templateRef=R,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(L){L&&!this._created?this.create():!L&&this._created&&this.destroy()}}let fi=(()=>{class _{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(R){this._ngSwitch=R,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(R){this._defaultViews.push(R)}_matchCase(R){const B=R==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||B,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),B}_updateDefaultCases(R){if(this._defaultViews.length>0&&R!==this._defaultUsed){this._defaultUsed=R;for(const B of this._defaultViews)B.enforceState(R)}}static{this.\u0275fac=function(B){return new(B||_)}}static{this.\u0275dir=p.FsC({type:_,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return _})(),Ss=(()=>{class _{constructor(R,B,ee){this.ngSwitch=ee,ee._addCase(),this._view=new Ds(R,B)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(B){return new(B||_)(p.rXU(p.c1b),p.rXU(p.C4Q),p.rXU(fi,9))}}static{this.\u0275dir=p.FsC({type:_,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return _})(),rs=(()=>{class _{constructor(R,B,ee){this._ngEl=R,this._differs=B,this._renderer=ee,this._ngStyle=null,this._differ=null}set ngStyle(R){this._ngStyle=R,!this._differ&&R&&(this._differ=this._differs.find(R).create())}ngDoCheck(){if(this._differ){const R=this._differ.diff(this._ngStyle);R&&this._applyChanges(R)}}_setStyle(R,B){const[ee,He]=R.split("."),st=-1===ee.indexOf("-")?void 0:p.czy.DashCase;null!=B?this._renderer.setStyle(this._ngEl.nativeElement,ee,He?`${B}${He}`:B,st):this._renderer.removeStyle(this._ngEl.nativeElement,ee,st)}_applyChanges(R){R.forEachRemovedItem(B=>this._setStyle(B.key,null)),R.forEachAddedItem(B=>this._setStyle(B.key,B.currentValue)),R.forEachChangedItem(B=>this._setStyle(B.key,B.currentValue))}static{this.\u0275fac=function(B){return new(B||_)(p.rXU(p.aKT),p.rXU(p.MKu),p.rXU(p.sFG))}}static{this.\u0275dir=p.FsC({type:_,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return _})();let Ps=(()=>{class _{transform(R){return JSON.stringify(R,null,2)}static{this.\u0275fac=function(B){return new(B||_)}}static{this.\u0275pipe=p.EJ8({name:"json",type:_,pure:!1,standalone:!0})}}return _})(),qr=(()=>{class _{constructor(R){this._locale=R}transform(R,B,ee){if(!function Or(_){return!(null==_||""===_||_!=_)}(R))return null;ee=ee||this._locale;try{return function Ke(_,L,R){return function pe(_,L,R,B,ee,He,st=!1){let qt="",Dn=!1;if(isFinite(_)){let mn=function Qt(_){let B,ee,He,st,qt,L=Math.abs(_)+"",R=0;for((ee=L.indexOf("."))>-1&&(L=L.replace(".","")),(He=L.search(/e/i))>0?(ee<0&&(ee=He),ee+=+L.slice(He+1),L=L.substring(0,He)):ee<0&&(ee=L.length),He=0;"0"===L.charAt(He);He++);if(He===(qt=L.length))B=[0],ee=1;else{for(qt--;"0"===L.charAt(qt);)qt--;for(ee-=He,B=[],st=0;He<=qt;He++,st++)B[st]=Number(L.charAt(He))}return ee>22&&(B=B.splice(0,21),R=ee-1,ee=1),{digits:B,exponent:R,integerLen:ee}}(_);st&&(mn=function an(_){if(0===_.digits[0])return _;const L=_.digits.length-_.integerLen;return _.exponent?_.exponent+=2:(0===L?_.digits.push(0,0):1===L&&_.digits.push(0),_.integerLen+=2),_}(mn));let yn=L.minInt,jn=L.minFrac,cr=L.maxFrac;if(He){const Fr=He.match(W);if(null===Fr)throw new Error(`${He} is not a valid digit info`);const ci=Fr[1],li=Fr[3],es=Fr[5];null!=ci&&(yn=tn(ci)),null!=li&&(jn=tn(li)),null!=es?cr=tn(es):null!=li&&jn>cr&&(cr=jn)}!function qn(_,L,R){if(L>R)throw new Error(`The minimum number of digits after fraction (${L}) is higher than the maximum (${R}).`);let B=_.digits,ee=B.length-_.integerLen;const He=Math.min(Math.max(L,ee),R);let st=He+_.integerLen,qt=B[st];if(st>0){B.splice(Math.max(_.integerLen,st));for(let jn=st;jn<B.length;jn++)B[jn]=0}else{ee=Math.max(0,ee),_.integerLen=1,B.length=Math.max(1,st=He+1),B[0]=0;for(let jn=1;jn<st;jn++)B[jn]=0}if(qt>=5)if(st-1<0){for(let jn=0;jn>st;jn--)B.unshift(0),_.integerLen++;B.unshift(1),_.integerLen++}else B[st-1]++;for(;ee<Math.max(0,He);ee++)B.push(0);let Dn=0!==He;const mn=L+_.integerLen,yn=B.reduceRight(function(jn,cr,lr,gr){return gr[lr]=(cr+=jn)<10?cr:cr-10,Dn&&(0===gr[lr]&&lr>=mn?gr.pop():Dn=!1),cr>=10?1:0},0);yn&&(B.unshift(yn),_.integerLen++)}(mn,jn,cr);let lr=mn.digits,gr=mn.integerLen;const Qr=mn.exponent;let Ui=[];for(Dn=lr.every(Fr=>!Fr);gr<yn;gr++)lr.unshift(0);for(;gr<0;gr++)lr.unshift(0);gr>0?Ui=lr.splice(gr,lr.length):(Ui=lr,lr=[0]);const Ji=[];for(lr.length>=L.lgSize&&Ji.unshift(lr.splice(-L.lgSize,lr.length).join(""));lr.length>L.gSize;)Ji.unshift(lr.splice(-L.gSize,lr.length).join(""));lr.length&&Ji.unshift(lr.join("")),qt=Ji.join(ut(R,B)),Ui.length&&(qt+=ut(R,ee)+Ui.join("")),Qr&&(qt+=ut(R,pt.Exponential)+"+"+Qr)}else qt=ut(R,pt.Infinity);return qt=_<0&&!Dn?L.negPre+qt+L.negSuf:L.posPre+qt+L.posSuf,qt}(_,function jt(_,L="-"){const R={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},B=_.split(";"),ee=B[0],He=B[1],st=-1!==ee.indexOf(".")?ee.split("."):[ee.substring(0,ee.lastIndexOf("0")+1),ee.substring(ee.lastIndexOf("0")+1)],qt=st[0],Dn=st[1]||"";R.posPre=qt.substring(0,qt.indexOf("#"));for(let yn=0;yn<Dn.length;yn++){const jn=Dn.charAt(yn);"0"===jn?R.minFrac=R.maxFrac=yn+1:"#"===jn?R.maxFrac=yn+1:R.posSuf+=jn}const mn=qt.split(",");if(R.gSize=mn[1]?mn[1].length:0,R.lgSize=mn[2]||mn[1]?(mn[2]||mn[1]).length:0,He){const yn=ee.length-R.posPre.length-R.posSuf.length,jn=He.indexOf("#");R.negPre=He.substring(0,jn).replace(/'/g,""),R.negSuf=He.slice(jn+yn).replace(/'/g,"")}else R.negPre=L+R.posPre,R.negSuf=R.posSuf;return R}(function ze(_,L){return(0,p.H5H)(_)[p.KH2.NumberFormats][L]}(L,Ne.Decimal),ut(L,pt.MinusSign)),L,pt.Group,pt.Decimal,R)}(function xi(_){if("string"==typeof _&&!isNaN(Number(_)-parseFloat(_)))return Number(_);if("number"!=typeof _)throw new Error(`${_} is not a number`);return _}(R),ee,B)}catch(He){throw function Ur(_,L){return new p.wOt(2100,!1)}()}}static{this.\u0275fac=function(B){return new(B||_)(p.rXU(p.xe9,16))}}static{this.\u0275pipe=p.EJ8({name:"number",type:_,pure:!0,standalone:!0})}}return _})();let Js=(()=>{class _{static{this.\u0275fac=function(B){return new(B||_)}}static{this.\u0275mod=p.$C({type:_})}static{this.\u0275inj=p.G2t({})}}return _})();const Zr="browser",Kr="server";function os(_){return _===Zr}function Is(_){return _===Kr}let fr=(()=>{class _{static{this.\u0275prov=(0,p.jDH)({token:_,providedIn:"root",factory:()=>new ws((0,p.KVO)(Le),window)})}}return _})();class ws{constructor(L,R){this.document=L,this.window=R,this.offset=()=>[0,0]}setOffset(L){this.offset=Array.isArray(L)?()=>L:L}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(L){this.supportsScrolling()&&this.window.scrollTo(L[0],L[1])}scrollToAnchor(L){if(!this.supportsScrolling())return;const R=function mi(_,L){const R=_.getElementById(L)||_.getElementsByName(L)[0];if(R)return R;if("function"==typeof _.createTreeWalker&&_.body&&"function"==typeof _.body.attachShadow){const B=_.createTreeWalker(_.body,NodeFilter.SHOW_ELEMENT);let ee=B.currentNode;for(;ee;){const He=ee.shadowRoot;if(He){const st=He.getElementById(L)||He.querySelector(`[name="${L}"]`);if(st)return st}ee=B.nextNode()}}return null}(this.document,L);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration(L){this.supportsScrolling()&&(this.window.history.scrollRestoration=L)}scrollToElement(L){const R=L.getBoundingClientRect(),B=R.left+this.window.pageXOffset,ee=R.top+this.window.pageYOffset,He=this.offset();this.window.scrollTo(B-He[0],ee-He[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class qi{}},1626:(nn,tt,j)=>{j.d(tt,{Qq:()=>gn,q1:()=>W});var p=j(7705),J=j(7673),oe=j(8455),Y=j(1985),Oe=j(274),Le=j(5964),ve=j(6354),Te=j(980),De=j(5558),ce=j(177);class ge{}class Pe{}class $e{constructor(Ie){this.normalizedNames=new Map,this.lazyUpdate=null,Ie?"string"==typeof Ie?this.lazyInit=()=>{this.headers=new Map,Ie.split("\n").forEach(Se=>{const Ke=Se.indexOf(":");if(Ke>0){const jt=Se.slice(0,Ke),an=jt.toLowerCase(),Qt=Se.slice(Ke+1).trim();this.maybeSetNormalizedName(jt,an),this.headers.has(an)?this.headers.get(an).push(Qt):this.headers.set(an,[Qt])}})}:typeof Headers<"u"&&Ie instanceof Headers?(this.headers=new Map,Ie.forEach((Se,Ke)=>{this.setHeaderEntries(Ke,Se)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(Ie).forEach(([Se,Ke])=>{this.setHeaderEntries(Se,Ke)})}:this.headers=new Map}has(Ie){return this.init(),this.headers.has(Ie.toLowerCase())}get(Ie){this.init();const Se=this.headers.get(Ie.toLowerCase());return Se&&Se.length>0?Se[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ie){return this.init(),this.headers.get(Ie.toLowerCase())||null}append(Ie,Se){return this.clone({name:Ie,value:Se,op:"a"})}set(Ie,Se){return this.clone({name:Ie,value:Se,op:"s"})}delete(Ie,Se){return this.clone({name:Ie,value:Se,op:"d"})}maybeSetNormalizedName(Ie,Se){this.normalizedNames.has(Se)||this.normalizedNames.set(Se,Ie)}init(){this.lazyInit&&(this.lazyInit instanceof $e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ie=>this.applyUpdate(Ie)),this.lazyUpdate=null))}copyFrom(Ie){Ie.init(),Array.from(Ie.headers.keys()).forEach(Se=>{this.headers.set(Se,Ie.headers.get(Se)),this.normalizedNames.set(Se,Ie.normalizedNames.get(Se))})}clone(Ie){const Se=new $e;return Se.lazyInit=this.lazyInit&&this.lazyInit instanceof $e?this.lazyInit:this,Se.lazyUpdate=(this.lazyUpdate||[]).concat([Ie]),Se}applyUpdate(Ie){const Se=Ie.name.toLowerCase();switch(Ie.op){case"a":case"s":let Ke=Ie.value;if("string"==typeof Ke&&(Ke=[Ke]),0===Ke.length)return;this.maybeSetNormalizedName(Ie.name,Se);const jt=("a"===Ie.op?this.headers.get(Se):void 0)||[];jt.push(...Ke),this.headers.set(Se,jt);break;case"d":const an=Ie.value;if(an){let Qt=this.headers.get(Se);if(!Qt)return;Qt=Qt.filter(qn=>-1===an.indexOf(qn)),0===Qt.length?(this.headers.delete(Se),this.normalizedNames.delete(Se)):this.headers.set(Se,Qt)}else this.headers.delete(Se),this.normalizedNames.delete(Se)}}setHeaderEntries(Ie,Se){const Ke=(Array.isArray(Se)?Se:[Se]).map(an=>an.toString()),jt=Ie.toLowerCase();this.headers.set(jt,Ke),this.maybeSetNormalizedName(Ie,jt)}forEach(Ie){this.init(),Array.from(this.normalizedNames.keys()).forEach(Se=>Ie(this.normalizedNames.get(Se),this.headers.get(Se)))}}class Ot{encodeKey(Ie){return Yt(Ie)}encodeValue(Ie){return Yt(Ie)}decodeKey(Ie){return decodeURIComponent(Ie)}decodeValue(Ie){return decodeURIComponent(Ie)}}const yt=/%(\d[a-f0-9])/gi,St={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Yt(pe){return encodeURIComponent(pe).replace(yt,(Ie,Se)=>St[Se]??Ie)}function Rt(pe){return`${pe}`}class de{constructor(Ie={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ie.encoder||new Ot,Ie.fromString){if(Ie.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Et(pe,Ie){const Se=new Map;return pe.length>0&&pe.replace(/^\?/,"").split("&").forEach(jt=>{const an=jt.indexOf("="),[Qt,qn]=-1==an?[Ie.decodeKey(jt),""]:[Ie.decodeKey(jt.slice(0,an)),Ie.decodeValue(jt.slice(an+1))],tn=Se.get(Qt)||[];tn.push(qn),Se.set(Qt,tn)}),Se}(Ie.fromString,this.encoder)}else Ie.fromObject?(this.map=new Map,Object.keys(Ie.fromObject).forEach(Se=>{const Ke=Ie.fromObject[Se],jt=Array.isArray(Ke)?Ke.map(Rt):[Rt(Ke)];this.map.set(Se,jt)})):this.map=null}has(Ie){return this.init(),this.map.has(Ie)}get(Ie){this.init();const Se=this.map.get(Ie);return Se?Se[0]:null}getAll(Ie){return this.init(),this.map.get(Ie)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ie,Se){return this.clone({param:Ie,value:Se,op:"a"})}appendAll(Ie){const Se=[];return Object.keys(Ie).forEach(Ke=>{const jt=Ie[Ke];Array.isArray(jt)?jt.forEach(an=>{Se.push({param:Ke,value:an,op:"a"})}):Se.push({param:Ke,value:jt,op:"a"})}),this.clone(Se)}set(Ie,Se){return this.clone({param:Ie,value:Se,op:"s"})}delete(Ie,Se){return this.clone({param:Ie,value:Se,op:"d"})}toString(){return this.init(),this.keys().map(Ie=>{const Se=this.encoder.encodeKey(Ie);return this.map.get(Ie).map(Ke=>Se+"="+this.encoder.encodeValue(Ke)).join("&")}).filter(Ie=>""!==Ie).join("&")}clone(Ie){const Se=new de({encoder:this.encoder});return Se.cloneFrom=this.cloneFrom||this,Se.updates=(this.updates||[]).concat(Ie),Se}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ie=>this.map.set(Ie,this.cloneFrom.map.get(Ie))),this.updates.forEach(Ie=>{switch(Ie.op){case"a":case"s":const Se=("a"===Ie.op?this.map.get(Ie.param):void 0)||[];Se.push(Rt(Ie.value)),this.map.set(Ie.param,Se);break;case"d":if(void 0===Ie.value){this.map.delete(Ie.param);break}{let Ke=this.map.get(Ie.param)||[];const jt=Ke.indexOf(Rt(Ie.value));-1!==jt&&Ke.splice(jt,1),Ke.length>0?this.map.set(Ie.param,Ke):this.map.delete(Ie.param)}}}),this.cloneFrom=this.updates=null)}}class Ne{constructor(){this.map=new Map}set(Ie,Se){return this.map.set(Ie,Se),this}get(Ie){return this.map.has(Ie)||this.map.set(Ie,Ie.defaultValue()),this.map.get(Ie)}delete(Ie){return this.map.delete(Ie),this}has(Ie){return this.map.has(Ie)}keys(){return this.map.keys()}}function We(pe){return typeof ArrayBuffer<"u"&&pe instanceof ArrayBuffer}function It(pe){return typeof Blob<"u"&&pe instanceof Blob}function Ht(pe){return typeof FormData<"u"&&pe instanceof FormData}class ln{constructor(Ie,Se,Ke,jt){let an;if(this.url=Se,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ie.toUpperCase(),function Je(pe){switch(pe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||jt?(this.body=void 0!==Ke?Ke:null,an=jt):an=Ke,an&&(this.reportProgress=!!an.reportProgress,this.withCredentials=!!an.withCredentials,an.responseType&&(this.responseType=an.responseType),an.headers&&(this.headers=an.headers),an.context&&(this.context=an.context),an.params&&(this.params=an.params)),this.headers||(this.headers=new $e),this.context||(this.context=new Ne),this.params){const Qt=this.params.toString();if(0===Qt.length)this.urlWithParams=Se;else{const qn=Se.indexOf("?");this.urlWithParams=Se+(-1===qn?"?":qn<Se.length-1?"&":"")+Qt}}else this.params=new de,this.urlWithParams=Se}serializeBody(){return null===this.body?null:We(this.body)||It(this.body)||Ht(this.body)||function pt(pe){return typeof URLSearchParams<"u"&&pe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof de?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ht(this.body)?null:It(this.body)?this.body.type||null:We(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof de?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ie={}){const Se=Ie.method||this.method,Ke=Ie.url||this.url,jt=Ie.responseType||this.responseType,an=void 0!==Ie.body?Ie.body:this.body,Qt=void 0!==Ie.withCredentials?Ie.withCredentials:this.withCredentials,qn=void 0!==Ie.reportProgress?Ie.reportProgress:this.reportProgress;let tn=Ie.headers||this.headers,hi=Ie.params||this.params;const gt=Ie.context??this.context;return void 0!==Ie.setHeaders&&(tn=Object.keys(Ie.setHeaders).reduce((rt,xt)=>rt.set(xt,Ie.setHeaders[xt]),tn)),Ie.setParams&&(hi=Object.keys(Ie.setParams).reduce((rt,xt)=>rt.set(xt,Ie.setParams[xt]),hi)),new ln(Se,Ke,an,{params:hi,headers:tn,context:gt,reportProgress:qn,responseType:jt,withCredentials:Qt})}}var $n=function(pe){return pe[pe.Sent=0]="Sent",pe[pe.UploadProgress=1]="UploadProgress",pe[pe.ResponseHeader=2]="ResponseHeader",pe[pe.DownloadProgress=3]="DownloadProgress",pe[pe.Response=4]="Response",pe[pe.User=5]="User",pe}($n||{});class br{constructor(Ie,Se=200,Ke="OK"){this.headers=Ie.headers||new $e,this.status=void 0!==Ie.status?Ie.status:Se,this.statusText=Ie.statusText||Ke,this.url=Ie.url||null,this.ok=this.status>=200&&this.status<300}}class Dr extends br{constructor(Ie={}){super(Ie),this.type=$n.ResponseHeader}clone(Ie={}){return new Dr({headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class mr extends br{constructor(Ie={}){super(Ie),this.type=$n.Response,this.body=void 0!==Ie.body?Ie.body:null}clone(Ie={}){return new mr({body:void 0!==Ie.body?Ie.body:this.body,headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class Rn extends br{constructor(Ie){super(Ie,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ie.url||"(unknown url)"}`:`Http failure response for ${Ie.url||"(unknown url)"}: ${Ie.status} ${Ie.statusText}`,this.error=Ie.error||null}}function un(pe,Ie){return{body:Ie,headers:pe.headers,context:pe.context,observe:pe.observe,params:pe.params,reportProgress:pe.reportProgress,responseType:pe.responseType,withCredentials:pe.withCredentials}}let gn=(()=>{class pe{constructor(Se){this.handler=Se}request(Se,Ke,jt={}){let an;if(Se instanceof ln)an=Se;else{let tn,hi;tn=jt.headers instanceof $e?jt.headers:new $e(jt.headers),jt.params&&(hi=jt.params instanceof de?jt.params:new de({fromObject:jt.params})),an=new ln(Se,Ke,void 0!==jt.body?jt.body:null,{headers:tn,context:jt.context,params:hi,reportProgress:jt.reportProgress,responseType:jt.responseType||"json",withCredentials:jt.withCredentials})}const Qt=(0,J.of)(an).pipe((0,Oe.H)(tn=>this.handler.handle(tn)));if(Se instanceof ln||"events"===jt.observe)return Qt;const qn=Qt.pipe((0,Le.p)(tn=>tn instanceof mr));switch(jt.observe||"body"){case"body":switch(an.responseType){case"arraybuffer":return qn.pipe((0,ve.T)(tn=>{if(null!==tn.body&&!(tn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return tn.body}));case"blob":return qn.pipe((0,ve.T)(tn=>{if(null!==tn.body&&!(tn.body instanceof Blob))throw new Error("Response is not a Blob.");return tn.body}));case"text":return qn.pipe((0,ve.T)(tn=>{if(null!==tn.body&&"string"!=typeof tn.body)throw new Error("Response is not a string.");return tn.body}));default:return qn.pipe((0,ve.T)(tn=>tn.body))}case"response":return qn;default:throw new Error(`Unreachable: unhandled observe type ${jt.observe}}`)}}delete(Se,Ke={}){return this.request("DELETE",Se,Ke)}get(Se,Ke={}){return this.request("GET",Se,Ke)}head(Se,Ke={}){return this.request("HEAD",Se,Ke)}jsonp(Se,Ke){return this.request("JSONP",Se,{params:(new de).append(Ke,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Se,Ke={}){return this.request("OPTIONS",Se,Ke)}patch(Se,Ke,jt={}){return this.request("PATCH",Se,un(jt,Ke))}post(Se,Ke,jt={}){return this.request("POST",Se,un(jt,Ke))}put(Se,Ke,jt={}){return this.request("PUT",Se,un(jt,Ke))}static{this.\u0275fac=function(Ke){return new(Ke||pe)(p.KVO(ge))}}static{this.\u0275prov=p.jDH({token:pe,factory:pe.\u0275fac})}}return pe})();function fn(pe,Ie){return Ie(pe)}function zn(pe,Ie){return(Se,Ke)=>Ie.intercept(Se,{handle:jt=>pe(jt,Ke)})}const en=new p.nKC(""),Pn=new p.nKC(""),Gn=new p.nKC("");function Tr(){let pe=null;return(Ie,Se)=>{null===pe&&(pe=((0,p.WQX)(en,{optional:!0})??[]).reduceRight(zn,fn));const Ke=(0,p.WQX)(p.$K3),jt=Ke.add();return pe(Ie,Se).pipe((0,Te.j)(()=>Ke.remove(jt)))}}let On=(()=>{class pe extends ge{constructor(Se,Ke){super(),this.backend=Se,this.injector=Ke,this.chain=null,this.pendingTasks=(0,p.WQX)(p.$K3)}handle(Se){if(null===this.chain){const jt=Array.from(new Set([...this.injector.get(Pn),...this.injector.get(Gn,[])]));this.chain=jt.reduceRight((an,Qt)=>function dn(pe,Ie,Se){return(Ke,jt)=>Se.runInContext(()=>Ie(Ke,an=>pe(an,jt)))}(an,Qt,this.injector),fn)}const Ke=this.pendingTasks.add();return this.chain(Se,jt=>this.backend.handle(jt)).pipe((0,Te.j)(()=>this.pendingTasks.remove(Ke)))}static{this.\u0275fac=function(Ke){return new(Ke||pe)(p.KVO(Pe),p.KVO(p.uvJ))}}static{this.\u0275prov=p.jDH({token:pe,factory:pe.\u0275fac})}}return pe})();const En=/^\)\]\}',?\n/;let Zt=(()=>{class pe{constructor(Se){this.xhrFactory=Se}handle(Se){if("JSONP"===Se.method)throw new p.wOt(-2800,!1);const Ke=this.xhrFactory;return(Ke.\u0275loadImpl?(0,oe.H)(Ke.\u0275loadImpl()):(0,J.of)(null)).pipe((0,De.n)(()=>new Y.c(an=>{const Qt=Ke.build();if(Qt.open(Se.method,Se.urlWithParams),Se.withCredentials&&(Qt.withCredentials=!0),Se.headers.forEach((pn,In)=>Qt.setRequestHeader(pn,In.join(","))),Se.headers.has("Accept")||Qt.setRequestHeader("Accept","application/json, text/plain, */*"),!Se.headers.has("Content-Type")){const pn=Se.detectContentTypeHeader();null!==pn&&Qt.setRequestHeader("Content-Type",pn)}if(Se.responseType){const pn=Se.responseType.toLowerCase();Qt.responseType="json"!==pn?pn:"text"}const qn=Se.serializeBody();let tn=null;const hi=()=>{if(null!==tn)return tn;const pn=Qt.statusText||"OK",In=new $e(Qt.getAllResponseHeaders()),ir=function Tn(pe){return"responseURL"in pe&&pe.responseURL?pe.responseURL:/^X-Request-URL:/m.test(pe.getAllResponseHeaders())?pe.getResponseHeader("X-Request-URL"):null}(Qt)||Se.url;return tn=new Dr({headers:In,status:Qt.status,statusText:pn,url:ir}),tn},gt=()=>{let{headers:pn,status:In,statusText:ir,url:dr}=hi(),Xe=null;204!==In&&(Xe=typeof Qt.response>"u"?Qt.responseText:Qt.response),0===In&&(In=Xe?200:0);let Vn=In>=200&&In<300;if("json"===Se.responseType&&"string"==typeof Xe){const Gr=Xe;Xe=Xe.replace(En,"");try{Xe=""!==Xe?JSON.parse(Xe):null}catch(wi){Xe=Gr,Vn&&(Vn=!1,Xe={error:wi,text:Xe})}}Vn?(an.next(new mr({body:Xe,headers:pn,status:In,statusText:ir,url:dr||void 0})),an.complete()):an.error(new Rn({error:Xe,headers:pn,status:In,statusText:ir,url:dr||void 0}))},rt=pn=>{const{url:In}=hi(),ir=new Rn({error:pn,status:Qt.status||0,statusText:Qt.statusText||"Unknown Error",url:In||void 0});an.error(ir)};let xt=!1;const zt=pn=>{xt||(an.next(hi()),xt=!0);let In={type:$n.DownloadProgress,loaded:pn.loaded};pn.lengthComputable&&(In.total=pn.total),"text"===Se.responseType&&Qt.responseText&&(In.partialText=Qt.responseText),an.next(In)},Fn=pn=>{let In={type:$n.UploadProgress,loaded:pn.loaded};pn.lengthComputable&&(In.total=pn.total),an.next(In)};return Qt.addEventListener("load",gt),Qt.addEventListener("error",rt),Qt.addEventListener("timeout",rt),Qt.addEventListener("abort",rt),Se.reportProgress&&(Qt.addEventListener("progress",zt),null!==qn&&Qt.upload&&Qt.upload.addEventListener("progress",Fn)),Qt.send(qn),an.next({type:$n.Sent}),()=>{Qt.removeEventListener("error",rt),Qt.removeEventListener("abort",rt),Qt.removeEventListener("load",gt),Qt.removeEventListener("timeout",rt),Se.reportProgress&&(Qt.removeEventListener("progress",zt),null!==qn&&Qt.upload&&Qt.upload.removeEventListener("progress",Fn)),Qt.readyState!==Qt.DONE&&Qt.abort()}})))}static{this.\u0275fac=function(Ke){return new(Ke||pe)(p.KVO(ce.N0))}}static{this.\u0275prov=p.jDH({token:pe,factory:pe.\u0275fac})}}return pe})();const Ln=new p.nKC("XSRF_ENABLED"),et=new p.nKC("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),_n=new p.nKC("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ri{}let $t=(()=>{class pe{constructor(Se,Ke,jt){this.doc=Se,this.platform=Ke,this.cookieName=jt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Se=this.doc.cookie||"";return Se!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ce._b)(Se,this.cookieName),this.lastCookieString=Se),this.lastToken}static{this.\u0275fac=function(Ke){return new(Ke||pe)(p.KVO(ce.qQ),p.KVO(p.Agw),p.KVO(et))}}static{this.\u0275prov=p.jDH({token:pe,factory:pe.\u0275fac})}}return pe})();function rn(pe,Ie){const Se=pe.url.toLowerCase();if(!(0,p.WQX)(Ln)||"GET"===pe.method||"HEAD"===pe.method||Se.startsWith("http://")||Se.startsWith("https://"))return Ie(pe);const Ke=(0,p.WQX)(ri).getToken(),jt=(0,p.WQX)(_n);return null!=Ke&&!pe.headers.has(jt)&&(pe=pe.clone({headers:pe.headers.set(jt,Ke)})),Ie(pe)}var Fe=function(pe){return pe[pe.Interceptors=0]="Interceptors",pe[pe.LegacyInterceptors=1]="LegacyInterceptors",pe[pe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",pe[pe.NoXsrfProtection=3]="NoXsrfProtection",pe[pe.JsonpSupport=4]="JsonpSupport",pe[pe.RequestsMadeViaParent=5]="RequestsMadeViaParent",pe[pe.Fetch=6]="Fetch",pe}(Fe||{});function ie(pe,Ie){return{\u0275kind:pe,\u0275providers:Ie}}function Re(...pe){const Ie=[gn,Zt,On,{provide:ge,useExisting:On},{provide:Pe,useExisting:Zt},{provide:Pn,useValue:rn,multi:!0},{provide:Ln,useValue:!0},{provide:ri,useClass:$t}];for(const Se of pe)Ie.push(...Se.\u0275providers);return(0,p.EmA)(Ie)}const sn=new p.nKC("LEGACY_INTERCEPTOR_FN");let W=(()=>{class pe{static{this.\u0275fac=function(Ke){return new(Ke||pe)}}static{this.\u0275mod=p.$C({type:pe})}static{this.\u0275inj=p.G2t({providers:[Re(ie(Fe.LegacyInterceptors,[{provide:sn,useFactory:Tr},{provide:Pn,useExisting:sn,multi:!0}]))]})}}return pe})()},7705:(nn,tt,j)=>{j.d(tt,{$C:()=>zs,$GK:()=>it,$K3:()=>LI,$MX:()=>vd,AVh:()=>yf,Agw:()=>ig,B4B:()=>Vh,BIS:()=>L_,BMQ:()=>Ct,C4Q:()=>l_,C5r:()=>yI,Co$:()=>O0,DNE:()=>df,EFF:()=>sm,EJ8:()=>Ws,EmA:()=>wl,FsC:()=>Vi,G2t:()=>Gn,GBs:()=>hI,GFd:()=>Jt,H3F:()=>FI,H5H:()=>Kb,H8p:()=>bd,HJs:()=>WC,Hbi:()=>OC,JRh:()=>am,JZv:()=>Zt,Jv_:()=>P0,KH2:()=>dm,KVO:()=>me,Kcf:()=>Pv,L39:()=>zC,LfX:()=>On,Lme:()=>cm,MKu:()=>TE,Mr5:()=>zb,NAR:()=>jg,NEm:()=>lC,NYb:()=>sC,Njj:()=>Ia,O8t:()=>He,OA$:()=>jn,OM3:()=>Lo,Ocv:()=>NA,Ol2:()=>k0,PLl:()=>F_,QTQ:()=>xp,Ql9:()=>LA,QuC:()=>vs,R7$:()=>yg,RV6:()=>Vg,Rfq:()=>Ot,RxE:()=>ag,SKi:()=>_s,SdG:()=>Qp,SpI:()=>uc,TL$:()=>g_,Tbb:()=>Pe,UyX:()=>Ov,VBU:()=>xs,Vns:()=>Tf,Vt3:()=>a,WHO:()=>jI,WPN:()=>mu,WQX:()=>be,XpG:()=>Ug,Xx1:()=>fl,Y8G:()=>xu,Z63:()=>nc,ZF7:()=>yd,ZvI:()=>Nu,_9s:()=>Wh,_q3:()=>wE,aKT:()=>Oa,aNF:()=>F0,bIt:()=>Wp,bMT:()=>Z0,bVm:()=>ff,bc$:()=>Wv,bkB:()=>ka,c1b:()=>bv,cWb:()=>jm,czy:()=>Rc,e01:()=>HI,e5t:()=>E_,eBV:()=>Ea,eq3:()=>z0,eu8:()=>zp,fpN:()=>PC,gRc:()=>yC,gXe:()=>Qt,giA:()=>$I,h9k:()=>ap,hnV:()=>kI,i5U:()=>J0,iLQ:()=>_E,j41:()=>zc,jDH:()=>en,jNT:()=>Bg,joV:()=>ih,k0s:()=>Hp,kS0:()=>$u,kdw:()=>Ql,lJ4:()=>$0,lNU:()=>Rt,lsd:()=>pI,mGM:()=>dI,mq5:()=>r0,n$t:()=>cp,nI1:()=>Y0,nKC:()=>et,naY:()=>_C,nrm:()=>kg,o8S:()=>mm,oH4:()=>GI,osQ:()=>Hm,plB:()=>aE,qSk:()=>Bu,qex:()=>La,rOR:()=>_v,rXU:()=>Fa,rcV:()=>Pa,sFG:()=>rb,sMw:()=>K0,sZ2:()=>k_,sdS:()=>Wd,uvJ:()=>aa,w6W:()=>wT,wOt:()=>de,wni:()=>fI,xGo:()=>ia,xc7:()=>em,xe9:()=>Iv,xvI:()=>Gh,zZn:()=>la,zcH:()=>Na,zjR:()=>pf});var p=j(1413),J=j(8359),oe=j(1985),Y=j(7786),Oe=j(4412),Le=j(7673),ve=j(7647),Te=j(5558),De=j(3294);function ce(t){for(let n in t)if(t[n]===ce)return n;throw Error("Could not find renamed property on target object.")}function ge(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function Pe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Pe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function $e(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const ht=ce({__forward_ref__:ce});function Ot(t){return t.__forward_ref__=Ot,t.toString=function(){return Pe(this())},t}function Et(t){return yt(t)?t():t}function yt(t){return"function"==typeof t&&t.hasOwnProperty(ht)&&t.__forward_ref__===Ot}function St(t){return t&&!!t.\u0275providers}const Rt="https://g.co/ng/security#xss";class de extends Error{constructor(n,i){super(function Ue(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function Ne(t){return"string"==typeof t?t:null==t?"":String(t)}function pt(t,n){throw new de(-201,!1)}function Ee(t,n){null==t&&function lt(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function en(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Tr(t){return Yn(t,Pt)||Yn(t,Me)}function On(t){return null!==Tr(t)}function Yn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Er(t){return t&&(t.hasOwnProperty(ae)||t.hasOwnProperty(qe))?t[ae]:null}const Pt=ce({\u0275prov:ce}),ae=ce({\u0275inj:ce}),Me=ce({ngInjectableDef:ce}),qe=ce({ngInjectorDef:ce});var it=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(it||{});let _t;function on(t){const n=_t;return _t=t,n}function En(t,n,i){const o=Tr(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&it.Optional?null:void 0!==n?n:void pt(Pe(t))}const Zt=globalThis;class et{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=en({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Hn={},ar="__NG_DI_FLAG__",hr="ngTempTokenPath",fe=/\n/gm,N="__source";let W;function Ae(t){const n=W;return W=t,n}function ue(t,n=it.Default){if(void 0===W)throw new de(-203,!1);return null===W?En(t,void 0,n):W.get(t,n&it.Optional?null:void 0,n)}function me(t,n=it.Default){return(function Tt(){return _t}()||ue)(Et(t),n)}function be(t,n=it.Default){return me(t,je(n))}function je(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Bt(t){const n=[];for(let i=0;i<t.length;i++){const o=Et(t[i]);if(Array.isArray(o)){if(0===o.length)throw new de(900,!1);let l,f=it.Default;for(let b=0;b<o.length;b++){const A=o[b],x=Ie(A);"number"==typeof x?-1===x?l=A.token:f|=x:l=A}n.push(me(l,f))}else n.push(me(o))}return n}function pe(t,n){return t[ar]=n,t.prototype[ar]=n,t}function Ie(t){return t[ar]}function jt(t){return{toString:t}.toString()}var an=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(an||{}),Qt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Qt||{});const qn={},tn=[],hi=ce({\u0275cmp:ce}),gt=ce({\u0275dir:ce}),rt=ce({\u0275pipe:ce}),xt=ce({\u0275mod:ce}),zt=ce({\u0275fac:ce}),Fn=ce({__NG_ELEMENT_ID__:ce}),pn=ce({__NG_ENV_ID__:ce});function In(t,n,i){let o=t.length;for(;;){const l=t.indexOf(n,i);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const f=n.length;if(l+f===o||t.charCodeAt(l+f)<=32)return l}i=l+1}}function ir(t,n,i){let o=0;for(;o<i.length;){const l=i[o];if("number"==typeof l){if(0!==l)break;o++;const f=i[o++],b=i[o++],A=i[o++];t.setAttribute(n,b,A,f)}else{const f=l,b=i[++o];Xe(f)?t.setProperty(n,f,b):t.setAttribute(n,f,b),o++}}return o}function dr(t){return 3===t||4===t||6===t}function Xe(t){return 64===t.charCodeAt(0)}function Vn(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const l=n[o];"number"==typeof l?i=l:0===i||Gr(t,i,l,null,-1===i||2===i?n[++o]:null)}}return t}function Gr(t,n,i,o,l){let f=0,b=t.length;if(-1===n)b=-1;else for(;f<t.length;){const A=t[f++];if("number"==typeof A){if(A===n){b=-1;break}if(A>n){b=f-1;break}}}for(;f<t.length;){const A=t[f];if("number"==typeof A)break;if(A===i){if(null===o)return void(null!==l&&(t[f+1]=l));if(o===t[f+1])return void(t[f+2]=l)}f++,null!==o&&f++,null!==l&&f++}-1!==b&&(t.splice(b,0,n),f=b+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==l&&t.splice(f++,0,l)}const wi="ng-template";function ys(t,n,i){let o=0,l=!0;for(;o<t.length;){let f=t[o++];if("string"==typeof f&&l){const b=t[o++];if(i&&"class"===f&&-1!==In(b.toLowerCase(),n,0))return!0}else{if(1===f){for(;o<t.length&&"string"==typeof(f=t[o++]);)if(f.toLowerCase()===n)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function Ri(t){return 4===t.type&&t.value!==wi}function zr(t,n,i){return n===(4!==t.type||i?t.value:wi)}function Ds(t,n,i){let o=4;const l=t.attrs||[],f=function xo(t){for(let n=0;n<t.length;n++)if(dr(t[n]))return n;return t.length}(l);let b=!1;for(let A=0;A<n.length;A++){const x=n[A];if("number"!=typeof x){if(!b)if(4&o){if(o=2|1&o,""!==x&&!zr(t,x,i)||""===x&&1===n.length){if(fi(o))return!1;b=!0}}else{const $=8&o?x:n[++A];if(8&o&&null!==t.attrs){if(!ys(t.attrs,$,i)){if(fi(o))return!1;b=!0}continue}const we=Ss(8&o?"class":x,l,Ri(t),i);if(-1===we){if(fi(o))return!1;b=!0;continue}if(""!==$){let nt;nt=we>f?"":l[we+1].toLowerCase();const mt=8&o?nt:null;if(mt&&-1!==In(mt,$,0)||2&o&&$!==nt){if(fi(o))return!1;b=!0}}}}else{if(!b&&!fi(o)&&!fi(x))return!1;if(b&&fi(x))continue;b=!1,o=x|1&o}}return fi(o)||b}function fi(t){return 0==(1&t)}function Ss(t,n,i,o){if(null===n)return-1;let l=0;if(o||!i){let f=!1;for(;l<n.length;){const b=n[l];if(b===t)return l;if(3===b||6===b)f=!0;else{if(1===b||2===b){let A=n[++l];for(;"string"==typeof A;)A=n[++l];continue}if(4===b)break;if(0===b){l+=4;continue}}l+=f?1:2}return-1}return function Br(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function go(t,n,i=!1){for(let o=0;o<n.length;o++)if(Ds(t,n[o],i))return!0;return!1}function rs(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let l=0;l<t.length;l++)if(t[l]!==o[l])continue e;return!0}}return!1}function is(t,n){return t?":not("+n.trim()+")":n}function Rs(t){let n=t[0],i=1,o=2,l="",f=!1;for(;i<t.length;){let b=t[i];if("string"==typeof b)if(2&o){const A=t[++i];l+="["+b+(A.length>0?'="'+A+'"':"")+"]"}else 8&o?l+="."+b:4&o&&(l+=" "+b);else""!==l&&!fi(b)&&(n+=is(f,l),l=""),o=b,f=f||!fi(o);i++}return""!==l&&(n+=is(f,l)),n}function xs(t){return jt(()=>{const n=Zs(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===an.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Qt.Emulated,styles:t.styles||tn,_:null,schemas:t.schemas||null,tView:null,id:""};Ps(i);const o=t.dependencies;return i.directiveDefs=Gs(o,!1),i.pipeDefs=Gs(o,!0),i.id=function Es(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of i)n=Math.imul(31,n)+l.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function $s(t){return _r(t)||Pi(t)}function Ms(t){return null!==t}function zs(t){return jt(()=>({type:t.type,bootstrap:t.bootstrap||tn,declarations:t.declarations||tn,imports:t.imports||tn,exports:t.exports||tn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Gi(t,n){if(null==t)return qn;const i={};for(const o in t)if(t.hasOwnProperty(o)){let l=t[o],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),i[l]=o,n&&(n[l]=f)}return i}function Vi(t){return jt(()=>{const n=Zs(t);return Ps(n),n})}function Ws(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function _r(t){return t[hi]||null}function Pi(t){return t[gt]||null}function pi(t){return t[rt]||null}function vs(t){const n=_r(t)||Pi(t)||pi(t);return null!==n&&n.standalone}function Oi(t,n){const i=t[xt]||null;if(!i&&!0===n)throw new Error(`Type ${Pe(t)} does not have '\u0275mod' property.`);return i}function Zs(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||qn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||tn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Gi(t.inputs,n),outputs:Gi(t.outputs)}}function Ps(t){t.features?.forEach(n=>n(t))}function Gs(t,n){if(!t)return null;const i=n?pi:$s;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(Ms)}const qr=0,hn=1,sr=2,Or=3,xi=4,ds=5,yi=6,Js=7,Zr=8,Kr=9,hs=10,Wn=11,os=12,Is=13,vr=14,Vr=15,bi=16,fr=17,ws=18,mi=19,Hi=20,qi=21,Yi=22,Nr=23,Ts=24,Un=25,jr=1,as=2,$i=7,Os=9,yr=11;function kr(t){return Array.isArray(t)&&"object"==typeof t[jr]}function Hr(t){return Array.isArray(t)&&!0===t[jr]}function As(t){return 0!=(4&t.flags)}function Bi(t){return t.componentOffset>-1}function fs(t){return 1==(1&t.flags)}function ai(t){return!!t.template}function qs(t){return 0!=(512&t[sr])}function vi(t,n){return t.hasOwnProperty(zt)?t[zt]:null}let nr=null,Qi=!1;function Ti(t){const n=nr;return nr=t,n}const co={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function _o(t){if(!Jo(t)||t.dirty){if(!t.producerMustRecompute(t)&&!dc(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Ho(t){t.dirty=!0,function jo(t){if(void 0===t.liveConsumerNode)return;const n=Qi;Qi=!0;try{for(const i of t.liveConsumerNode)i.dirty||Ho(i)}finally{Qi=n}}(t),t.consumerMarkedDirty?.(t)}function ga(t){return t&&(t.nextProducerIndex=0),Ti(t)}function Mo(t,n){if(Ti(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Jo(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)$o(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function dc(t){Po(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(_o(i),o!==i.version))return!0}return!1}function _a(t){if(Po(t),Jo(t))for(let n=0;n<t.producerNode.length;n++)$o(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function $o(t,n){if(function ya(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Po(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)$o(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],l=t.liveConsumerNode[n];Po(l),l.producerIndexOfThis[o]=n}}function Jo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Po(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let hc=null;function He(t){const n=Ti(null);try{return t()}finally{Ti(n)}}const qt=()=>{},Dn=(()=>({...co,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:qt}))();class yn{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function jn(){return cr}function cr(t){return t.type.prototype.ngOnChanges&&(t.setInput=gr),lr}function lr(){const t=Ui(this),n=t?.current;if(n){const i=t.previous;if(i===qn)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function gr(t,n,i,o){const l=this.declaredInputs[i],f=Ui(t)||function Ji(t,n){return t[Qr]=n}(t,{previous:qn,current:null}),b=f.current||(f.current={}),A=f.previous,x=A[l];b[l]=new yn(x&&x.currentValue,n,A===qn),t[o]=n}jn.ngInherit=!0;const Qr="__ngSimpleChanges__";function Ui(t){return t[Qr]||null}const li=function(t,n,i){},es="svg";function Mn(t){for(;Array.isArray(t);)t=t[qr];return t}function yo(t,n){return Mn(n[t])}function ps(t,n){return Mn(n[t.index])}function rr(t,n){return t.data[n]}function Qn(t,n){return t[n]}function Ir(t,n){const i=n[t];return kr(i)?i:i[qr]}function ki(t,n){return null==n?null:t[n]}function ui(t){t[fr]=0}function Co(t){1024&t[sr]||(t[sr]|=1024,Fi(t,1))}function qc(t){1024&t[sr]&&(t[sr]&=-1025,Fi(t,-1))}function Fi(t,n){let i=t[Or];if(null===i)return;i[ds]+=n;let o=i;for(i=i[Or];null!==i&&(1===n&&1===o[ds]||-1===n&&0===o[ds]);)i[ds]+=n,o=i,i=i[Or]}const Zn={lFrame:Yc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Fl(){return Zn.bindingsEnabled}function fc(){return null!==Zn.skipHydrationRootTNode}function Gt(){return Zn.lFrame.lView}function Xr(){return Zn.lFrame.tView}function Ea(t){return Zn.lFrame.contextLView=t,t[Zr]}function Ia(t){return Zn.lFrame.contextLView=null,t}function $r(){let t=Xc();for(;null!==t&&64===t.type;)t=t.parent;return t}function Xc(){return Zn.lFrame.currentTNode}function bo(t,n){const i=Zn.lFrame;i.currentTNode=t,i.isParent=n}function gc(){return Zn.lFrame.isParent}function Fu(){Zn.lFrame.isParent=!1}function gs(){const t=Zn.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function T(){return Zn.lFrame.bindingIndex++}function P(t){const n=Zn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function xe(t,n){const i=Zn.lFrame;i.bindingIndex=i.bindingRootIndex=t,wt(n)}function wt(t){Zn.lFrame.currentDirectiveIndex=t}function Rr(){return Zn.lFrame.currentQueryIndex}function Di(t){Zn.lFrame.currentQueryIndex=t}function si(t){const n=t[hn];return 2===n.type?n.declTNode:1===n.type?t[yi]:null}function Xs(t,n,i){if(i&it.SkipSelf){let l=n,f=t;for(;!(l=l.parent,null!==l||i&it.Host||(l=si(f),null===l||(f=f[vr],10&l.type))););if(null===l)return!1;n=l,t=f}const o=Zn.lFrame=wa();return o.currentTNode=n,o.lView=t,!0}function ta(t){const n=wa(),i=t[hn];Zn.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function wa(){const t=Zn.lFrame,n=null===t?null:t.child;return null===n?Yc(t):n}function Yc(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Ta(){const t=Zn.lFrame;return Zn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Vu=Ta;function Zc(){const t=Ta();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function no(){return Zn.lFrame.selectedIndex}function Aa(t){Zn.lFrame.selectedIndex=t}function Mr(){const t=Zn.lFrame;return rr(t.tView,t.selectedIndex)}function Bu(){Zn.lFrame.currentNamespace=es}function ih(){!function el(){Zn.lFrame.currentNamespace=null}()}let sh=!0;function Ll(){return sh}function Fo(t){sh=t}function _c(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:A,ngAfterViewInit:x,ngAfterViewChecked:$,ngOnDestroy:re}=f;b&&(t.contentHooks??=[]).push(-i,b),A&&((t.contentHooks??=[]).push(i,A),(t.contentCheckHooks??=[]).push(i,A)),x&&(t.viewHooks??=[]).push(-i,x),$&&((t.viewHooks??=[]).push(i,$),(t.viewCheckHooks??=[]).push(i,$)),null!=re&&(t.destroyHooks??=[]).push(i,re)}}function Vl(t,n,i){Wa(t,n,3,i)}function tl(t,n,i,o){(3&t[sr])===i&&Wa(t,n,i,o)}function oh(t,n){let i=t[sr];(3&i)===n&&(i&=8191,i+=1,t[sr]=i)}function Wa(t,n,i,o){const f=o??-1,b=n.length-1;let A=0;for(let x=void 0!==o?65535&t[fr]:0;x<b;x++)if("number"==typeof n[x+1]){if(A=n[x],null!=o&&A>=o)break}else n[x]<0&&(t[fr]+=65536),(A<f||-1==f)&&(ah(t,i,n,x),t[fr]=(4294901760&t[fr])+x+2),x++}function yc(t,n){li(4,t,n);const i=Ti(null);try{n.call(t)}finally{Ti(i),li(5,t,n)}}function ah(t,n,i,o){const l=i[o]<0,f=i[o+1],A=t[l?-i[o]:i[o]];l?t[sr]>>13<t[fr]>>16&&(3&t[sr])===n&&(t[sr]+=8192,yc(A,f)):yc(A,f)}const vc=-1;class na{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function qa(t){return t!==vc}function rl(t){return 32767&t}function il(t,n){let i=function ch(t){return t>>16}(t),o=n;for(;i>0;)o=o[vr],i--;return o}let Do=!0;function Ul(t){const n=Do;return Do=t,n}const jl=255,Hl=5;let Wo=0;const ro={};function ra(t,n){const i=ol(t,n);if(-1!==i)return i;const o=n[hn];o.firstCreatePass&&(t.injectorIndex=n.length,sl(o.data,t),sl(n,null),sl(o.blueprint,null));const l=al(t,n),f=t.injectorIndex;if(qa(l)){const b=rl(l),A=il(l,n),x=A[hn].data;for(let $=0;$<8;$++)n[f+$]=A[b+$]|x[b+$]}return n[f+8]=l,f}function sl(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ol(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function al(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,l=n;for(;null!==l;){if(o=Hu(l),null===o)return vc;if(i++,l=l[vr],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return vc}function cl(t,n,i){!function Ec(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(Fn)&&(o=i[Fn]),null==o&&(o=i[Fn]=Wo++);const l=o&jl;n.data[t+(l>>Hl)]|=1<<l}(t,n,i)}function uh(t,n,i){if(i&it.Optional||void 0!==t)return t;pt()}function dh(t,n,i,o){if(i&it.Optional&&void 0===o&&(o=null),!(i&(it.Self|it.Host))){const l=t[Kr],f=on(void 0);try{return l?l.get(n,o,i&it.Optional):En(n,o,i&it.Optional)}finally{on(f)}}return uh(o,0,i)}function hh(t,n,i,o=it.Default,l){if(null!==t){if(2048&n[sr]&&!(o&it.Self)){const b=function Rf(t,n,i,o,l){let f=t,b=n;for(;null!==f&&null!==b&&2048&b[sr]&&!(512&b[sr]);){const A=Ic(f,b,i,o|it.Self,ro);if(A!==ro)return A;let x=f.parent;if(!x){const $=b[Hi];if($){const re=$.get(i,ro,o);if(re!==ro)return re}x=Hu(b),b=b[vr]}f=x}return l}(t,n,i,o,ro);if(b!==ro)return b}const f=Ic(t,n,i,o,ro);if(f!==ro)return f}return dh(n,i,o,l)}function Ic(t,n,i,o,l){const f=function Em(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Fn)?t[Fn]:void 0;return"number"==typeof n?n>=0?n&jl:Ca:n}(i);if("function"==typeof f){if(!Xs(n,t,o))return o&it.Host?uh(l,0,o):dh(n,i,o,l);try{let b;if(b=f(o),null!=b||o&it.Optional)return b;pt()}finally{Vu()}}else if("number"==typeof f){let b=null,A=ol(t,n),x=vc,$=o&it.Host?n[Vr][yi]:null;for((-1===A||o&it.SkipSelf)&&(x=-1===A?al(t,n):n[A+8],x!==vc&&ju(o,!1)?(b=n[hn],A=rl(x),n=il(x,n)):A=-1);-1!==A;){const re=n[hn];if(fh(f,A,re.data)){const we=$l(A,n,i,b,o,$);if(we!==ro)return we}x=n[A+8],x!==vc&&ju(o,n[hn].data[A+8]===$)&&fh(f,A,n)?(b=re,A=rl(x),n=il(x,n)):A=-1}}return l}function $l(t,n,i,o,l,f){const b=n[hn],A=b.data[t+8],re=Uu(A,b,i,null==o?Bi(A)&&Do:o!=b&&0!=(3&A.type),l&it.Host&&f===A);return null!==re?uo(n,b,re,A):ro}function Uu(t,n,i,o,l){const f=t.providerIndexes,b=n.data,A=1048575&f,x=t.directiveStart,re=f>>20,nt=l?A+re:t.directiveEnd;for(let mt=o?A:A+re;mt<nt;mt++){const Vt=b[mt];if(mt<x&&i===Vt||mt>=x&&Vt.type===i)return mt}if(l){const mt=b[x];if(mt&&ai(mt)&&mt.type===i)return x}return null}function uo(t,n,i,o){let l=t[i];const f=n.data;if(function nl(t){return t instanceof na}(l)){const b=l;b.resolving&&function We(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new de(-200,`Circular dependency in DI detected for ${t}${i}`)}(function Je(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ne(t)}(f[i]));const A=Ul(b.canSeeViewProviders);b.resolving=!0;const $=b.injectImpl?on(b.injectImpl):null;Xs(t,o,it.Default);try{l=t[i]=b.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function Cf(t,n,i){const{ngOnChanges:o,ngOnInit:l,ngDoCheck:f}=n.type.prototype;if(o){const b=cr(n);(i.preOrderHooks??=[]).push(t,b),(i.preOrderCheckHooks??=[]).push(t,b)}l&&(i.preOrderHooks??=[]).push(0-t,l),f&&((i.preOrderHooks??=[]).push(t,f),(i.preOrderCheckHooks??=[]).push(t,f))}(i,f[i],n)}finally{null!==$&&on($),Ul(A),b.resolving=!1,Vu()}}return l}function fh(t,n,i){return!!(i[n+(t>>Hl)]&1<<t)}function ju(t,n){return!(t&it.Self||t&it.Host&&n)}class ts{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return hh(this._tNode,this._lView,n,je(o),i)}}function Ca(){return new ts($r(),Gt())}function ia(t){return jt(()=>{const n=t.prototype.constructor,i=n[zt]||ll(n),o=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==o;){const f=l[zt]||ll(l);if(f&&f!==i)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function ll(t){return yt(t)?()=>{const n=ll(Et(t));return n&&n()}:vi(t)}function Hu(t){const n=t[hn],i=n.type;return 2===i?n.declTNode:1===i?t[yi]:null}function $u(t){return function lh(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let l=0;for(;l<o;){const f=i[l];if(dr(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<o&&"string"==typeof i[l];)l++;else{if(f===n)return i[l+1];l+=2}}}return null}($r(),t)}const Qa="__parameters__";function wc(t,n,i){return jt(()=>{const o=function Kl(t){return function(...i){if(t){const o=t(...i);for(const l in o)this[l]=o[l]}}}(n);function l(...f){if(this instanceof l)return o.apply(this,f),this;const b=new l(...f);return A.annotation=b,A;function A(x,$,re){const we=x.hasOwnProperty(Qa)?x[Qa]:Object.defineProperty(x,Qa,{value:[]})[Qa];for(;we.length<=re;)we.push(null);return(we[re]=we[re]||[]).push(b),x}}return i&&(l.prototype=Object.create(i.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function So(t,n){t.forEach(i=>Array.isArray(i)?So(i,n):n(i))}function Tc(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Wl(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function qo(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function Eo(t,n,i){let o=Cc(t,n);return o>=0?t[1|o]=i:(o=~o,function Nf(t,n,i,o){let l=t.length;if(l==n)t.push(i,o);else if(1===l)t.push(o,t[0]),t[0]=i;else{for(l--,t.push(t[l-1],t[l]);l>n;)t[l]=t[l-2],l--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function yh(t,n){const i=Cc(t,n);if(i>=0)return t[1|i]}function Cc(t,n){return function Gl(t,n,i){let o=0,l=t.length>>i;for(;l!==o;){const f=o+(l-o>>1),b=t[f<<i];if(n===b)return f<<i;b>n?l=f:o=f+1}return~(l<<i)}(t,n,1)}const fl=pe(wc("Optional"),8),Ql=pe(wc("SkipSelf"),4);function Ra(t){return 128==(128&t.flags)}var Rc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Rc||{});const sd=/^>|^->|<!--|-->|--!>|<!-$/g,tu=/(<|>)/g,od="\u200b$1\u200b";const _l=new Map;let nu=0;const Rh="__ngContext__";function Cs(t,n){kr(n)?(t[Rh]=n[mi],function Gf(t){_l.set(t[mi],t)}(n)):t[Rh]=n}let oa;function Mc(t,n){return oa(t,n)}function Bs(t){const n=t[Or];return Hr(n)?n[Or]:n}function iu(t){return Qo(t[os])}function ud(t){return Qo(t[xi])}function Qo(t){for(;null!==t&&!Hr(t);)t=t[xi];return t}function Oc(t,n,i,o,l){if(null!=o){let f,b=!1;Hr(o)?f=o:kr(o)&&(b=!0,o=o[qr]);const A=Mn(o);0===t&&null!==i?null==l?fd(n,i,A):Io(n,i,A,l||null,!0):1===t&&null!==i?Io(n,i,A,l||null,!0):2===t?function Ph(t,n,i){const o=ou(t,n);o&&function Zf(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,A,b):3===t&&n.destroyNode(A),null!=f&&function Pm(t,n,i,o,l){const f=i[$i];f!==Mn(i)&&Oc(n,t,o,f,l);for(let A=yr;A<i.length;A++){const x=i[A];Oh(x[hn],x,t,n,o,f)}}(n,t,f,i,l)}}function Mh(t,n){return t.createComment(function ad(t){return t.replace(sd,n=>n.replace(tu,od))}(n))}function v(t,n,i){return t.createElement(n,i)}function at(t,n){const i=t[Os],o=i.indexOf(n);qc(n),i.splice(o,1)}function Mt(t,n){if(t.length<=yr)return;const i=yr+n,o=t[i];if(o){const l=o[bi];null!==l&&l!==t&&at(l,o),n>0&&(t[i-1][xi]=o[xi]);const f=Wl(t,yr+n);!function u(t,n){Oh(t,n,n[Wn],2,null,null),n[qr]=null,n[yi]=null}(o[hn],o);const b=f[ws];null!==b&&b.detachView(f[hn]),o[Or]=null,o[xi]=null,o[sr]&=-129}return o}function vn(t,n){if(!(256&n[sr])){const i=n[Wn];n[Nr]&&_a(n[Nr]),n[Ts]&&_a(n[Ts]),i.destroyNode&&Oh(t,n,i,3,null,null),function H(t){let n=t[os];if(!n)return Xn(t[hn],t);for(;n;){let i=null;if(kr(n))i=n[os];else{const o=n[yr];o&&(i=o)}if(!i){for(;n&&!n[xi]&&n!==t;)kr(n)&&Xn(n[hn],n),n=n[Or];null===n&&(n=t),kr(n)&&Xn(n[hn],n),i=n&&n[xi]}n=i}}(n)}}function Xn(t,n){if(!(256&n[sr])){n[sr]&=-129,n[sr]|=256,function Yr(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const l=n[i[o]];if(!(l instanceof na)){const f=i[o+1];if(Array.isArray(f))for(let b=0;b<f.length;b+=2){const A=l[f[b]],x=f[b+1];li(4,A,x);try{x.call(A)}finally{li(5,A,x)}}else{li(4,l,f);try{f.call(l)}finally{li(5,l,f)}}}}}(t,n),function Sn(t,n){const i=t.cleanup,o=n[Js];if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const b=i[f+3];b>=0?o[b]():o[-b].unsubscribe(),f+=2}else i[f].call(o[i[f+1]]);null!==o&&(n[Js]=null);const l=n[qi];if(null!==l){n[qi]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(t,n),1===n[hn].type&&n[Wn].destroy();const i=n[bi];if(null!==i&&Hr(n[Or])){i!==n[Or]&&at(i,n);const o=n[ws];null!==o&&o.detachView(t)}!function yl(t){_l.delete(t[mi])}(n)}}function so(t,n,i){return function Nc(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[qr];{const{componentOffset:l}=o;if(l>-1){const{encapsulation:f}=t.data[o.directiveStart+l];if(f===Qt.None||f===Qt.Emulated)return null}return ps(o,i)}}(t,n.parent,i)}function Io(t,n,i,o,l){t.insertBefore(n,i,o,l)}function fd(t,n,i){t.appendChild(n,i)}function su(t,n,i,o,l){null!==o?Io(t,n,i,o,l):fd(t,n,i)}function ou(t,n){return t.parentNode(n)}function au(t,n,i){return gd(t,n,i)}let kc,_d,ep,kh,gd=function cu(t,n,i){return 40&t.type?ps(t,i):null};function Ma(t,n,i,o){const l=so(t,o,n),f=n[Wn],A=au(o.parent||n[yi],o,n);if(null!=l)if(Array.isArray(i))for(let x=0;x<i.length;x++)su(f,l,i[x],A,!1);else su(f,l,i,A,!1);void 0!==kc&&kc(f,o,n,i,l)}function lu(t,n){if(null!==n){const i=n.type;if(3&i)return ps(n,t);if(4&i)return El(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return lu(t,o);{const l=t[n.index];return Hr(l)?El(-1,l):Mn(l)}}if(32&i)return Mc(n,t)()||Mn(t[n.index]);{const o=uu(t,n);return null!==o?Array.isArray(o)?o[0]:lu(Bs(t[Vr]),o):lu(t,n.next)}}return null}function uu(t,n){return null!==n?t[Vr][yi].projection[n.projection]:null}function El(t,n){const i=yr+t+1;if(i<n.length){const o=n[i],l=o[hn].firstChild;if(null!==l)return lu(o,l)}return n[$i]}function Mm(t,n,i,o,l,f,b){for(;null!=i;){const A=o[i.index],x=i.type;if(b&&0===n&&(A&&Cs(Mn(A),o),i.flags|=2),32!=(32&i.flags))if(8&x)Mm(t,n,i.child,o,l,f,!1),Oc(n,t,l,A,f);else if(32&x){const $=Mc(i,o);let re;for(;re=$();)Oc(n,t,l,re,f);Oc(n,t,l,A,f)}else 16&x?Jf(t,n,o,i,l,f):Oc(n,t,l,A,f);i=b?i.projectionNext:i.next}}function Oh(t,n,i,o,l,f){Mm(i,o,t.firstChild,n,l,f,!1)}function Jf(t,n,i,o,l,f){const b=i[Vr],x=b[yi].projection[o.projection];if(Array.isArray(x))for(let $=0;$<x.length;$++)Oc(n,t,l,x[$],f);else{let $=x;const re=b[Or];Ra(o)&&($.flags|=128),Mm(t,n,$,re,l,f,!0)}}function p_(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function m_(t,n,i){const{mergedAttrs:o,classes:l,styles:f}=i;null!==o&&ir(t,n,o),null!==l&&p_(t,n,l),null!==f&&function Nm(t,n,i){t.setAttribute(n,"style",i)}(t,n,f)}function hu(t){return function Nh(){if(void 0===_d&&(_d=null,Zt.trustedTypes))try{_d=Zt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _d}()?.createHTML(t)||t}function g_(t){ep=t}function v_(t){return function Fm(){if(void 0===kh&&(kh=null,Zt.trustedTypes))try{kh=Zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kh}()?.createScriptURL(t)||t}class Lc{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rt})`}}class Mv extends Lc{getTypeName(){return"HTML"}}class Lm extends Lc{getTypeName(){return"Style"}}class b_ extends Lc{getTypeName(){return"Script"}}class Vm extends Lc{getTypeName(){return"URL"}}class Bm extends Lc{getTypeName(){return"ResourceURL"}}function Pa(t){return t instanceof Lc?t.changingThisBreaksApplicationSecurity:t}function yd(t,n){const i=function Um(t){return t instanceof Lc&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${Rt})`)}return i===n}function Pv(t){return new Mv(t)}function jm(t){return new Lm(t)}function Ov(t){return new b_(t)}function Hm(t){return new Vm(t)}function E_(t){return new Bm(t)}class I_{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(hu(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch{return null}}}class Nv{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const i=this.inertDocument.createElement("template");return i.innerHTML=hu(n),i}}const kv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vd(t){return(t=String(t)).match(kv)?t:"unsafe:"+t}function Vc(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function pu(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const w_=Vc("area,br,col,hr,img,wbr"),np=Vc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rp=Vc("rp,rt"),Lh=pu(w_,pu(np,Vc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pu(rp,Vc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pu(rp,np)),zm=Vc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ip=pu(zm,Vc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lv=Vc("script,style,template");class Km{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let l=this.checkClobberedElement(i,i.nextSibling);if(l){i=l;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!Lh.hasOwnProperty(i))return this.sanitizedSomething=!0,!Lv.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let l=0;l<o.length;l++){const f=o.item(l),b=f.name,A=b.toLowerCase();if(!ip.hasOwnProperty(A)){this.sanitizedSomething=!0;continue}let x=f.value;zm[A]&&(x=vd(x)),this.buf.push(" ",b,'="',sp(x),'"')}return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();Lh.hasOwnProperty(i)&&!w_.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(sp(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const Vv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bv=/([^\#-~ |!])/g;function sp(t){return t.replace(/&/g,"&amp;").replace(Vv,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Bv,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let op;function ap(t,n){let i=null;try{op=op||function tp(t){const n=new Nv(t);return function $m(){try{return!!(new window.DOMParser).parseFromString(hu(""),"text/html")}catch{return!1}}()?new I_(n):n}(t);let o=n?String(n):"";i=op.getInertBodyElement(o);let l=5,f=o;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,o=f,f=i.innerHTML,i=op.getInertBodyElement(o)}while(o!==f);return hu((new Km).sanitizeChildren(Wm(i)||i))}finally{if(i){const o=Wm(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function Wm(t){return"content"in t&&function Gm(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var mu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(mu||{});function Vh(t){const n=Bh();return n?n.sanitize(mu.URL,t)||"":yd(t,"URL")?Pa(t):vd(Ne(t))}function Qm(t){const n=Bh();if(n)return v_(n.sanitize(mu.RESOURCE_URL,t)||"");if(yd(t,"ResourceURL"))return v_(Pa(t));throw new de(904,!1)}function cp(t,n,i){return function Hv(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Qm:Vh}(n,i)(t)}function Bh(){const t=Gt();return t&&t[hs].sanitizer}const nc=new et("ENVIRONMENT_INITIALIZER"),S_=new et("INJECTOR",-1),lp=new et("INJECTOR_DEF_TYPES");class up{get(n,i=Hn){if(i===Hn){const o=new Error(`NullInjectorError: No provider for ${Pe(n)}!`);throw o.name="NullInjectorError",o}return i}}function wl(t){return{\u0275providers:t}}function R_(...t){return{\u0275providers:Uh(0,t),\u0275fromNgModule:!0}}function Uh(t,...n){const i=[],o=new Set;let l;const f=b=>{i.push(b)};return So(n,b=>{const A=b;dp(A,f,[],o)&&(l||=[],l.push(A))}),void 0!==l&&x_(l,f),i}function x_(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:l}=t[i];Zm(l,f=>{n(f,o)})}}function dp(t,n,i,o){if(!(t=Et(t)))return!1;let l=null,f=Er(t);const b=!f&&_r(t);if(f||b){if(b&&!b.standalone)return!1;l=t}else{const x=t.ngModule;if(f=Er(x),!f)return!1;l=x}const A=o.has(l);if(b){if(A)return!1;if(o.add(l),b.dependencies){const x="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const $ of x)dp($,n,i,o)}}else{if(!f)return!1;{if(null!=f.imports&&!A){let $;o.add(l);try{So(f.imports,re=>{dp(re,n,i,o)&&($||=[],$.push(re))})}finally{}void 0!==$&&x_($,n)}if(!A){const $=vi(l)||(()=>new l);n({provide:l,useFactory:$,deps:tn},l),n({provide:lp,useValue:l,multi:!0},l),n({provide:nc,useValue:()=>me(l),multi:!0},l)}const x=f.providers;if(null!=x&&!A){const $=t;Zm(x,re=>{n(re,$)})}}}return l!==t&&void 0!==t.providers}function Zm(t,n){for(let i of t)St(i)&&(i=i.\u0275providers),Array.isArray(i)?Zm(i,n):n(i)}const Jm=ce({provide:String,useValue:ce});function jh(t){return null!==t&&"object"==typeof t&&Jm in t}function Bc(t){return"function"==typeof t}const bd=new et("Set Injector scope."),Ed={},M_={};let Tl;function Hh(){return void 0===Tl&&(Tl=new up),Tl}class aa{}class gu extends aa{get destroyed(){return this._destroyed}constructor(n,i,o,l){super(),this.parent=i,this.source=o,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rg(n,b=>this.processProvider(b)),this.records.set(S_,Id(void 0,this)),l.has("environment")&&this.records.set(aa,Id(void 0,this));const f=this.records.get(bd);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(lp.multi,tn,it.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=Ae(this),o=on(void 0);try{return n()}finally{Ae(i),on(o)}}get(n,i=Hn,o=it.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(pn))return n[pn](this);o=je(o);const f=Ae(this),b=on(void 0);try{if(!(o&it.SkipSelf)){let x=this.records.get(n);if(void 0===x){const $=function N_(t){return"function"==typeof t||"object"==typeof t&&t instanceof et}(n)&&Tr(n);x=$&&this.injectableDefInScope($)?Id(Al(n),Ed):null,this.records.set(n,x)}if(null!=x)return this.hydrate(n,x)}return(o&it.Self?Hh():this.parent).get(n,i=o&it.Optional&&i===Hn?null:i)}catch(A){if("NullInjectorError"===A.name){if((A[hr]=A[hr]||[]).unshift(Pe(n)),f)throw A;return function Se(t,n,i,o){const l=t[hr];throw n[N]&&l.unshift(n[N]),t.message=function Ke(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=Pe(n);if(Array.isArray(n))l=n.map(Pe).join(" -> ");else if("object"==typeof n){let f=[];for(let b in n)if(n.hasOwnProperty(b)){let A=n[b];f.push(b+":"+("string"==typeof A?JSON.stringify(A):Pe(A)))}l=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${l}]: ${t.replace(fe,"\n  ")}`}("\n"+t.message,l,i,o),t.ngTokenPath=l,t[hr]=null,t}(A,n,"R3InjectorError",this.source)}throw A}finally{on(b),Ae(f)}}resolveInjectorInitializers(){const n=Ae(this),i=on(void 0);try{const l=this.get(nc.multi,tn,it.Self);for(const f of l)f()}finally{Ae(n),on(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(Pe(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(n){let i=Bc(n=Et(n))?n:Et(n&&n.provide);const o=function $v(t){return jh(t)?Id(void 0,t.useValue):Id(P_(t),Ed)}(n);if(Bc(n)||!0!==n.multi)this.records.get(i);else{let l=this.records.get(i);l||(l=Id(void 0,Ed,!0),l.factory=()=>Bt(l.multi),this.records.set(i,l)),i=n,l.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===Ed&&(i.value=M_,i.value=i.factory()),"object"==typeof i.value&&i.value&&function zv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Et(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Al(t){const n=Tr(t),i=null!==n?n.factory:vi(t);if(null!==i)return i;if(t instanceof et)throw new de(204,!1);if(t instanceof Function)return function ng(t){const n=t.length;if(n>0)throw qo(n,"?"),new de(204,!1);const i=function Ar(t){return t&&(t[Pt]||t[Me])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new de(204,!1)}function P_(t,n,i){let o;if(Bc(t)){const l=Et(t);return vi(l)||Al(l)}if(jh(t))o=()=>Et(t.useValue);else if(function hp(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Bt(t.deps||[]));else if(function eg(t){return!(!t||!t.useExisting)}(t))o=()=>me(Et(t.useExisting));else{const l=Et(t&&(t.useClass||t.provide));if(!function O_(t){return!!t.deps}(t))return vi(l)||Al(l);o=()=>new l(...Bt(t.deps))}return o}function Id(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function rg(t,n){for(const i of t)Array.isArray(i)?rg(i,n):i&&St(i)?rg(i.\u0275providers,n):n(i)}const k_=new et("AppId",{providedIn:"root",factory:()=>Kv}),Kv="ng",F_=new et("Platform Initializer"),ig=new et("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wv=new et("AnimationModuleType"),L_=new et("CSP nonce",{providedIn:"root",factory:()=>function fu(){if(void 0!==ep)return ep;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let _p=(t,n,i)=>null;function Li(t,n,i=!1){return _p(t,n,i)}class Jv{}class eb{}class nb{resolveComponentFactory(n){throw function tb(t){const n=Error(`No component factory found for ${Pe(t)}.`);return n.ngComponent=t,n}(n)}}let Lo=(()=>{class t{static{this.NULL=new nb}}return t})();function Uc(){return Kh($r(),Gt())}function Kh(t,n){return new Oa(ps(t,n))}let Oa=(()=>{class t{constructor(i){this.nativeElement=i}static{this.__NG_ELEMENT_ID__=Uc}}return t})();function Ep(t){return t instanceof Oa?t.nativeElement:t}class Wh{}let rb=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function ib(){const t=Gt(),i=Ir($r().index,t);return(kr(i)?i:t)[Wn]}()}}return t})(),K_=(()=>{class t{static{this.\u0275prov=en({token:t,providedIn:"root",factory:()=>null})}}return t})();class ag{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Gh=new ag("16.2.12"),cg={};function Cl(t,n=null,i=null,o){const l=fg(t,n,i,o);return l.resolveInjectorInitializers(),l}function fg(t,n=null,i=null,o,l=new Set){const f=[i||tn,R_(t)];return o=o||("object"==typeof t?void 0:Pe(t)),new gu(f,n||Hh(),o||null,l)}let la=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Hn}static{this.NULL=new up}static create(i,o){if(Array.isArray(i))return Cl({name:""},o,i,"");{const l=i.name??"";return Cl({name:l},i.parent,i.providers,l)}}static{this.\u0275prov=en({token:t,providedIn:"any",factory:()=>me(S_)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function pg(t){return t.ngOriginalError}class Na{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&pg(n);for(;i&&pg(i);)i=pg(i);return i||null}}function Sd(t){return n=>{setTimeout(t,void 0,n)}}const ka=class ob extends p.B{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let l=n,f=i||(()=>null),b=o;if(n&&"object"==typeof n){const x=n;l=x.next?.bind(x),f=x.error?.bind(x),b=x.complete?.bind(x)}this.__isAsync&&(f=Sd(f),l&&(l=Sd(l)),b&&(b=Sd(b)));const A=super.subscribe({next:l,error:f,complete:b});return n instanceof J.yU&&n.add(A),A}};function Cp(...t){}class _s{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ka(!1),this.onMicrotaskEmpty=new ka(!1),this.onStable=new ka(!1),this.onError=new ka(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&i,l.shouldCoalesceRunChangeDetection=o,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Qh(){const t="function"==typeof Zt.requestAnimationFrame;let n=Zt[t?"requestAnimationFrame":"setTimeout"],i=Zt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ME(t){const n=()=>{!function xE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Zt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Xh(t),t.isCheckStableRunning=!0,Dl(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Xh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,l,f,b,A)=>{if(function lb(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(A))return i.invokeTask(l,f,b,A);try{return q_(t),i.invokeTask(l,f,b,A)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),Yh(t)}},onInvoke:(i,o,l,f,b,A,x)=>{try{return q_(t),i.invoke(l,f,b,A,x)}finally{t.shouldCoalesceRunChangeDetection&&n(),Yh(t)}},onHasTask:(i,o,l,f)=>{i.hasTask(l,f),o===l&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,Xh(t),Dl(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,l,f)=>(i.handleError(l,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_s.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(_s.isInAngularZone())throw new de(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,l){const f=this._inner,b=f.scheduleEventTask("NgZoneEvent: "+l,n,ab,Cp,Cp);try{return f.runTask(b,i,o)}finally{f.cancelTask(b)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const ab={};function Dl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Xh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function q_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Yh(t){t._nesting--,Dl(t)}class cb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ka,this.onMicrotaskEmpty=new ka,this.onStable=new ka,this.onError=new ka}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,l){return n.apply(i,o)}}const Q_=new et("",{providedIn:"root",factory:Zh});function Zh(){const t=be(_s);let n=!0;const i=new oe.c(l=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(n),l.complete()})}),o=new oe.c(l=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{_s.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,l.next(!0))})})});const b=t.onUnstable.subscribe(()=>{_s.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),b.unsubscribe()}});return(0,Y.h)(i,o.pipe((0,ve.u)()))}function rc(t){return t instanceof Function?t():t}let xd=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=en({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Jh(t){for(;t;){t[sr]|=64;const n=Bs(t);if(qs(t)&&!n)return t;t=n}return null}const J_=new et("",{providedIn:"root",factory:()=>!1});let Rp=null;function ty(t,n){return t[n]??iy()}function ny(t,n){const i=iy();i.producerNode?.length&&(t[n]=Rp,i.lView=t,Rp=_g())}const ry={...co,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Jh(t.lView)},lView:null};function _g(){return Object.create(ry)}function iy(){return Rp??=_g(),Rp}const Lr={};function yg(t){sy(Xr(),Gt(),no()+t,!1)}function sy(t,n,i,o){if(!o)if(3==(3&n[sr])){const f=t.preOrderCheckHooks;null!==f&&Vl(n,f,i)}else{const f=t.preOrderHooks;null!==f&&tl(n,f,0,i)}Aa(i)}function Fa(t,n=it.Default){const i=Gt();return null===i?me(t,n):hh($r(),i,Et(t),n)}function xp(){throw new Error("invalid")}function Mp(t,n,i,o,l,f,b,A,x,$,re){const we=n.blueprint.slice();return we[qr]=l,we[sr]=140|o,(null!==$||t&&2048&t[sr])&&(we[sr]|=2048),ui(we),we[Or]=we[vr]=t,we[Zr]=i,we[hs]=b||t&&t[hs],we[Wn]=A||t&&t[Wn],we[Kr]=x||t&&t[Kr]||null,we[yi]=f,we[mi]=function cd(){return nu++}(),we[Yi]=re,we[Hi]=$,we[Vr]=2==n.type?t[Vr]:we,we}function Pd(t,n,i,o,l){let f=t.data[n];if(null===f)f=function vg(t,n,i,o,l){const f=Xc(),b=gc(),x=t.data[n]=function yb(t,n,i,o,l,f){let b=n?n.injectorIndex:-1,A=0;return fc()&&(A|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:b,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:A,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?f:f&&f.parent,i,n,o,l);return null===t.firstChild&&(t.firstChild=x),null!==f&&(b?null==f.child&&null!==x.parent&&(f.child=x):null===f.next&&(f.next=x,x.prev=f)),x}(t,n,i,o,l),function K(){return Zn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=i,f.value=o,f.attrs=l;const b=function ko(){const t=Zn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===b?-1:b.injectorIndex}return bo(f,!0),f}function ef(t,n,i,o){if(0===i)return-1;const l=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return l}function oy(t,n,i,o,l){const f=ty(n,Nr),b=no(),A=2&o;try{Aa(-1),A&&n.length>Un&&sy(t,n,Un,!1),li(A?2:0,l);const $=A?f:null,re=ga($);try{null!==$&&($.dirty=!1),i(o,l)}finally{Mo($,re)}}finally{A&&null===n[Nr]&&ny(n,Nr),Aa(b),li(A?3:1,l)}}function ay(t,n,i){if(As(n)){const o=Ti(null);try{const f=n.directiveEnd;for(let b=n.directiveStart;b<f;b++){const A=t.data[b];A.contentQueries&&A.contentQueries(1,i[b],b)}}finally{Ti(o)}}}function cy(t,n,i){Fl()&&(function HE(t,n,i,o){const l=i.directiveStart,f=i.directiveEnd;Bi(i)&&function Ib(t,n,i){const o=ps(n,t),l=pb(i);let b=16;i.signals?b=4096:i.onPush&&(b=64);const A=kp(t,Mp(t,l,null,b,o,n,null,t[hs].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=A}(n,i,t.data[l+i.componentOffset]),t.firstCreatePass||ra(i,n),Cs(o,n);const b=i.initialInputs;for(let A=l;A<f;A++){const x=t.data[A],$=uo(n,t,A,i);Cs($,n),null!==b&&yy(0,A-l,$,x,0,b),ai(x)&&(Ir(i.index,n)[Zr]=uo(n,t,A,i))}}(t,n,i,ps(i,n)),64==(64&i.flags)&&Eb(t,n,i))}function ly(t,n,i=ps){const o=n.localNames;if(null!==o){let l=n.index+1;for(let f=0;f<o.length;f+=2){const b=o[f+1],A=-1===b?i(n,t):t[b];t[l++]=A}}}function pb(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=bg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function bg(t,n,i,o,l,f,b,A,x,$,re){const we=Un+o,nt=we+l,mt=function mb(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:Lr);return i}(we,nt),Vt="function"==typeof $?$():$;return mt[hn]={type:t,blueprint:mt,template:i,queries:null,viewQuery:A,declTNode:n,data:mt.slice().fill(null,we),bindingStartIndex:we,expandoStartIndex:nt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:x,consts:Vt,incompleteFirstPass:!1,ssrId:re}}let uy=t=>null;function hy(t,n,i,o){for(let l in t)if(t.hasOwnProperty(l)){i=null===i?{}:i;const f=t[l];null===o?fy(i,n,l,f):o.hasOwnProperty(l)&&fy(i,n,o[l],f)}return i}function fy(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function Xo(t,n,i,o,l,f,b,A){const x=ps(n,i);let re,$=n.inputs;!A&&null!=$&&(re=$[o])?(Vo(t,i,re,o,l),Bi(n)&&function VE(t,n){const i=Ir(n,t);16&i[sr]||(i[sr]|=64)}(i,n.index)):3&n.type&&(o=function bb(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),l=null!=b?b(l,n.value||"",o):l,f.setProperty(x,o,l))}function Pp(t,n,i,o){if(Fl()){const l=null===o?null:{"":-1},f=function gy(t,n){const i=t.directiveRegistry;let o=null,l=null;if(i)for(let f=0;f<i.length;f++){const b=i[f];if(go(n,b.selectors,!1))if(o||(o=[]),ai(b))if(null!==b.findHostDirectiveDefs){const A=[];l=l||new Map,b.findHostDirectiveDefs(b,A,l),o.unshift(...A,b),_y(t,n,A.length)}else o.unshift(b),_y(t,n,0);else l=l||new Map,b.findHostDirectiveDefs?.(b,o,l),o.push(b)}return null===o?null:[o,l]}(t,i);let b,A;null===f?b=A=null:[b,A]=f,null!==b&&py(t,n,i,b,l,A),l&&function $E(t,n,i){if(n){const o=t.localNames=[];for(let l=0;l<n.length;l+=2){const f=i[n[l+1]];if(null==f)throw new de(-301,!1);o.push(n[l],f)}}}(i,o,l)}i.mergedAttrs=Vn(i.mergedAttrs,i.attrs)}function py(t,n,i,o,l,f){for(let $=0;$<o.length;$++)cl(ra(i,n),t,o[$].type);!function Eg(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let $=0;$<o.length;$++){const re=o[$];re.providersResolver&&re.providersResolver(re)}let b=!1,A=!1,x=ef(t,n,o.length,null);for(let $=0;$<o.length;$++){const re=o[$];i.mergedAttrs=Vn(i.mergedAttrs,re.hostAttrs),Op(t,i,n,x,re),zE(x,re,l),null!==re.contentQueries&&(i.flags|=4),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(i.flags|=64);const we=re.type.prototype;!b&&(we.ngOnChanges||we.ngOnInit||we.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),b=!0),!A&&(we.ngOnChanges||we.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),A=!0),x++}!function vb(t,n,i){const l=n.directiveEnd,f=t.data,b=n.attrs,A=[];let x=null,$=null;for(let re=n.directiveStart;re<l;re++){const we=f[re],nt=i?i.get(we):null,Vt=nt?nt.outputs:null;x=hy(we.inputs,re,x,nt?nt.inputs:null),$=hy(we.outputs,re,$,Vt);const cn=null===x||null===b||Ri(n)?null:nf(x,re,b);A.push(cn)}null!==x&&(x.hasOwnProperty("class")&&(n.flags|=8),x.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=A,n.inputs=x,n.outputs=$}(t,i,f)}function Eb(t,n,i){const o=i.directiveStart,l=i.directiveEnd,f=i.index,b=function Dt(){return Zn.lFrame.currentDirectiveIndex}();try{Aa(f);for(let A=o;A<l;A++){const x=t.data[A],$=n[A];wt(A),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&my(x,$)}}finally{Aa(-1),wt(b)}}function my(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function _y(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function zE(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;ai(n)&&(i[""]=t)}}function Op(t,n,i,o,l){t.data[o]=l;const f=l.factory||(l.factory=vi(l.type)),b=new na(f,ai(l),Fa);t.blueprint[o]=b,i[o]=b,function UE(t,n,i,o,l){const f=l.hostBindings;if(f){let b=t.hostBindingOpCodes;null===b&&(b=t.hostBindingOpCodes=[]);const A=~n.index;(function jE(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(b)!=A&&b.push(A),b.push(i,o,f)}}(t,n,o,ef(t,i,l.hostVars,Lr),l)}function ic(t,n,i,o,l,f){const b=ps(t,n);!function tf(t,n,i,o,l,f,b){if(null==f)t.removeAttribute(n,l,i);else{const A=null==b?Ne(f):b(f,o||"",l);t.setAttribute(n,l,A,i)}}(n[Wn],b,f,t.value,i,o,l)}function yy(t,n,i,o,l,f){const b=f[n];if(null!==b)for(let A=0;A<b.length;)Ig(o,i,b[A++],b[A++],b[A++])}function Ig(t,n,i,o,l){const f=Ti(null);try{const b=t.inputTransforms;null!==b&&b.hasOwnProperty(o)&&(l=b[o].call(n,l)),null!==t.setInput?t.setInput(n,l,i,o):n[o]=l}finally{Ti(f)}}function nf(t,n,i){let o=null,l=0;for(;l<i.length;){const f=i[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===o&&(o=[]);const b=t[f];for(let A=0;A<b.length;A+=2)if(b[A]===n){o.push(f,b[A+1],i[l+1]);break}}l+=2}else l+=2;else l+=4}return o}function Np(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function vy(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const f=i[o+1];if(-1!==f){const b=t.data[f];Di(i[o]),b.contentQueries(2,n[f],f)}}}function kp(t,n){return t[os]?t[Is][xi]=n:t[os]=n,t[Is]=n,n}function Fp(t,n,i){Di(0);const o=Ti(null);try{n(t,i)}finally{Ti(o)}}function by(t){return t[Js]||(t[Js]=[])}function Tg(t){return t.cleanup||(t.cleanup=[])}function Rl(t,n){const i=t[Kr],o=i?i.get(Na,null):null;o&&o.handleError(n)}function Vo(t,n,i,o,l){for(let f=0;f<i.length;){const b=i[f++],A=i[f++];Ig(t.data[b],n[b],o,A,l)}}function us(t,n,i){const o=yo(n,t);!function hd(t,n,i){t.setValue(n,i)}(t[Wn],o,i)}function Ey(t,n){const i=Ir(n,t),o=i[hn];!function Iy(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const l=i[qr];null!==l&&null===i[Yi]&&(i[Yi]=Li(l,i[Kr])),Au(o,i,i[Zr])}function Au(t,n,i){ta(n);try{const o=t.viewQuery;null!==o&&Fp(1,o,i);const l=t.template;null!==l&&oy(t,n,l,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&vy(t,n),t.staticViewQueries&&Fp(2,t.viewQuery,i);const f=t.components;null!==f&&function rf(t,n){for(let i=0;i<n.length;i++)Ey(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[sr]&=-5,Zc()}}let wo=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,l){const f=typeof Zone>"u"?null:Zone.current,b=function st(t,n,i){const o=Object.create(Dn);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const l=b=>{o.cleanupFn=b};return o.ref={notify:()=>Ho(o),run:()=>{if(o.dirty=!1,o.hasRun&&!dc(o))return;o.hasRun=!0;const b=ga(o);try{o.cleanupFn(),o.cleanupFn=qt,o.fn(l)}finally{Mo(o,b)}},cleanup:()=>o.cleanupFn()},o.ref}(i,$=>{this.all.has($)&&this.queue.set($,f)},l);let A;this.all.add(b),b.notify();const x=()=>{b.cleanup(),A?.(),this.all.delete(b),this.queue.delete(b)};return A=o?.onDestroy(x),{destroy:x}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=en({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Od(t,n,i){let o=i?t.styles:null,l=i?t.classes:null,f=0;if(null!==n)for(let b=0;b<n.length;b++){const A=n[b];"number"==typeof A?f=A:1==f?l=$e(l,A):2==f&&(o=$e(o,A+": "+n[++b]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=l:t.classesWithoutHost=l}function sc(t,n,i,o,l=!1){for(;null!==i;){const f=n[i.index];null!==f&&o.push(Mn(f)),Hr(f)&&xl(f,o);const b=i.type;if(8&b)sc(t,n,i.child,o);else if(32&b){const A=Mc(i,n);let x;for(;x=A();)o.push(x)}else if(16&b){const A=uu(n,i);if(Array.isArray(A))o.push(...A);else{const x=Bs(n[Vr]);sc(x[hn],x,A,o,!0)}}i=l?i.projectionNext:i.next}return o}function xl(t,n){for(let i=yr;i<t.length;i++){const o=t[i],l=o[hn].firstChild;null!==l&&sc(o[hn],o,l,n)}t[$i]!==t[qr]&&n.push(t[$i])}function Nd(t,n,i,o=!0){const l=n[hs],f=l.rendererFactory,b=l.afterRenderEventManager;f.begin?.(),b?.begin();try{wy(t,n,t.template,i)}catch(x){throw o&&Rl(n,x),x}finally{f.end?.(),l.effectManager?.flush(),b?.end()}}function wy(t,n,i,o){const l=n[sr];if(256!=(256&l)){n[hs].effectManager?.flush(),ta(n);try{ui(n),function k(t){return Zn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&oy(t,n,i,2,o);const b=3==(3&l);if(b){const $=t.preOrderCheckHooks;null!==$&&Vl(n,$,null)}else{const $=t.preOrderHooks;null!==$&&tl(n,$,0,null),oh(n,0)}if(function Ab(t){for(let n=iu(t);null!==n;n=ud(n)){if(!n[as])continue;const i=n[Os];for(let o=0;o<i.length;o++){Co(i[o])}}}(n),Ty(n,2),null!==t.contentQueries&&vy(t,n),b){const $=t.contentCheckHooks;null!==$&&Vl(n,$)}else{const $=t.contentHooks;null!==$&&tl(n,$,1),oh(n,1)}!function FE(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=ty(n,Ts);try{for(let l=0;l<i.length;l++){const f=i[l];if(f<0)Aa(~f);else{const b=f,A=i[++l],x=i[++l];xe(A,b),o.dirty=!1;const $=ga(o);try{x(2,n[b])}finally{Mo(o,$)}}}}finally{null===n[Ts]&&ny(n,Ts),Aa(-1)}}(t,n);const A=t.components;null!==A&&Lp(n,A,0);const x=t.viewQuery;if(null!==x&&Fp(2,x,o),b){const $=t.viewCheckHooks;null!==$&&Vl(n,$)}else{const $=t.viewHooks;null!==$&&tl(n,$,2),oh(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[sr]&=-73,qc(n)}finally{Zc()}}}function Ty(t,n){for(let i=iu(t);null!==i;i=ud(i))for(let o=yr;o<i.length;o++)Cy(i[o],n)}function Ay(t,n,i){Cy(Ir(n,t),i)}function Cy(t,n){if(!function lo(t){return 128==(128&t[sr])}(t))return;const i=t[hn],o=t[sr];if(80&o&&0===n||1024&o||2===n)wy(i,t,i.template,t[Zr]);else if(t[ds]>0){Ty(t,1);const l=i.components;null!==l&&Lp(t,l,1)}}function Lp(t,n,i){for(let o=0;o<n.length;o++)Ay(t,n[o],i)}class Fd{get rootNodes(){const n=this._lView,i=n[hn];return sc(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zr]}set context(n){this._lView[Zr]=n}get destroyed(){return 256==(256&this._lView[sr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Or];if(Hr(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(Mt(n,o),Wl(i,o))}this._attachedToViewContainer=!1}vn(this._lView[hn],this._lView)}onDestroy(n){!function vo(t,n){if(256==(256&t[sr]))throw new de(911,!1);null===t[qi]&&(t[qi]=[]),t[qi].push(n)}(this._lView,n)}markForCheck(){Jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[sr]&=-129}reattach(){this._lView[sr]|=128}detectChanges(){Nd(this._lView[hn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I(t,n){Oh(t,n,n[Wn],2,null,null)}(this._lView[hn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=n}}class Vp extends Fd{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Nd(n[hn],n,n[Zr],!1)}checkNoChanges(){}get context(){return null}}class Cg extends Lo{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=_r(n);return new Ld(i,this.ngModule)}}function Dy(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class Cb{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=je(o);const l=this.injector.get(n,cg,o);return l!==cg||i===cg?l:this.parentInjector.get(n,i,o)}}class Ld extends eb{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=Dy(n.inputs);if(null!==i)for(const l of o)i.hasOwnProperty(l.propName)&&(l.transform=i[l.propName]);return o}get outputs(){return Dy(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function Ur(t){return t.map(Rs).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,l){let f=(l=l||this.ngModule)instanceof aa?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const b=f?new Cb(n,f):n,A=b.get(Wh,null);if(null===A)throw new de(407,!1);const we={rendererFactory:A,sanitizer:b.get(K_,null),effectManager:b.get(wo,null),afterRenderEventManager:b.get(xd,null)},nt=A.createRenderer(null,this.componentDef),mt=this.componentDef.selectors[0][0]||"div",Vt=o?function gb(t,n,i,o){const f=o.get(J_,!1)||i===Qt.ShadowDom,b=t.selectRootElement(n,f);return function LE(t){uy(t)}(b),b}(nt,o,this.componentDef.encapsulation,b):v(nt,mt,function Dg(t){const n=t.toLowerCase();return"svg"===n?es:"math"===n?"math":null}(mt)),ur=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Xt=null;null!==Vt&&(Xt=Li(Vt,b,!0));const Pr=bg(0,null,null,1,0,null,null,null,null,null,null),ni=Mp(null,Pr,null,ur,null,null,we,nt,b,null,Xt);let Ki,pa;ta(ni);try{const ku=this.componentDef;let gm,CE=null;ku.findHostDirectiveDefs?(gm=[],CE=new Map,ku.findHostDirectiveDefs(ku,gm,CE),gm.push(ku)):gm=[ku];const GC=function Db(t,n){const i=t[hn],o=Un;return t[o]=n,Pd(i,o,2,"#host",null)}(ni,Vt),qC=function Ry(t,n,i,o,l,f,b){const A=l[hn];!function xy(t,n,i,o){for(const l of t)n.mergedAttrs=Vn(n.mergedAttrs,l.hostAttrs);null!==n.mergedAttrs&&(Od(n,n.mergedAttrs,!0),null!==i&&m_(o,i,n))}(o,t,n,b);let x=null;null!==n&&(x=Li(n,l[Kr]));const $=f.rendererFactory.createRenderer(n,i);let re=16;i.signals?re=4096:i.onPush&&(re=64);const we=Mp(l,pb(i),null,re,l[t.index],t,f,$,null,null,x);return A.firstCreatePass&&_y(A,t,o.length-1),kp(l,we),l[t.index]=we}(GC,Vt,ku,gm,ni,we,nt);pa=rr(Pr,Un),Vt&&function Rb(t,n,i,o){if(o)ir(t,i,["ng-version",Gh.full]);else{const{attrs:l,classes:f}=function Hs(t){const n=[],i=[];let o=1,l=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===l?""!==f&&n.push(f,t[++o]):8===l&&i.push(f);else{if(!fi(l))break;l=f}o++}return{attrs:n,classes:i}}(n.selectors[0]);l&&ir(t,i,l),f&&f.length>0&&p_(t,i,f.join(" "))}}(nt,ku,Vt,o),void 0!==i&&function My(t,n,i){const o=t.projection=[];for(let l=0;l<n.length;l++){const f=i[l];o.push(null!=f?Array.from(f):null)}}(pa,this.ngContentSelectors,i),Ki=function Sb(t,n,i,o,l,f){const b=$r(),A=l[hn],x=ps(b,l);py(A,l,b,i,null,o);for(let re=0;re<i.length;re++)Cs(uo(l,A,b.directiveStart+re,b),l);Eb(A,l,b),x&&Cs(x,l);const $=uo(l,A,b.directiveStart+b.componentOffset,b);if(t[Zr]=l[Zr]=$,null!==f)for(const re of f)re($,n);return ay(A,b,t),$}(qC,ku,gm,CE,ni,[Py]),Au(Pr,ni,null)}finally{Zc()}return new Sy(this.componentType,Ki,Kh(pa,ni),ni,pa)}}class Sy extends Jv{constructor(n,i,o,l,f){super(),this.location=o,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Vp(l),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let l;if(null!==o&&(l=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const f=this._rootLView;Vo(f[hn],f,l,n,i),this.previousInputValues.set(n,i),Jh(Ir(this._tNode.index,f))}}get injector(){return new ts(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Py(){const t=$r();_c(Gt()[hn],t)}function a(t){let n=function Oy(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let l;if(ai(t))l=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new de(903,!1);l=n.\u0275dir}if(l){if(i){o.push(l);const b=t;b.inputs=r(t.inputs),b.inputTransforms=r(t.inputTransforms),b.declaredInputs=r(t.declaredInputs),b.outputs=r(t.outputs);const A=l.hostBindings;A&&d(t,A);const x=l.viewQuery,$=l.contentQueries;if(x&&s(t,x),$&&c(t,$),ge(t.inputs,l.inputs),ge(t.declaredInputs,l.declaredInputs),ge(t.outputs,l.outputs),null!==l.inputTransforms&&(null===b.inputTransforms&&(b.inputTransforms={}),ge(b.inputTransforms,l.inputTransforms)),ai(l)&&l.data.animation){const re=t.data;re.animation=(re.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let b=0;b<f.length;b++){const A=f[b];A&&A.ngInherit&&A(t),A===a&&(i=!1)}}n=Object.getPrototypeOf(n)}!function e(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const l=t[o];l.hostVars=n+=l.hostVars,l.hostAttrs=Vn(l.hostAttrs,i=Vn(i,l.hostAttrs))}}(o)}function r(t){return t===qn?{}:t===tn?[]:t}function s(t,n){const i=t.viewQuery;t.viewQuery=i?(o,l)=>{n(o,l),i(o,l)}:n}function c(t,n){const i=t.contentQueries;t.contentQueries=i?(o,l,f)=>{n(o,l,f),i(o,l,f)}:n}function d(t,n){const i=t.hostBindings;t.hostBindings=i?(o,l)=>{n(o,l),i(o,l)}:n}function Jt(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const l=n[o];Array.isArray(l)&&l[2]&&(i[o]=l[2])}t.inputTransforms=i}function Bn(t){return!!er(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function er(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wr(t,n,i){return t[n]=i}function ke(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Ze(t,n,i,o){const l=ke(t,n,i);return ke(t,n+1,o)||l}function Ct(t,n,i,o){const l=Gt();return ke(l,T(),n)&&(Xr(),ic(Mr(),l,t,n,i,o)),Ct}function Bo(t,n,i,o){return ke(t,T(),i)?n+Ne(i)+o:Lr}function oc(t,n,i,o,l,f){const A=Ze(t,function D(){return Zn.lFrame.bindingIndex}(),i,l);return P(2),A?n+Ne(i)+o+Ne(l)+f:Lr}function df(t,n,i,o,l,f,b,A){const x=Gt(),$=Xr(),re=t+Un,we=$.firstCreatePass?function Qy(t,n,i,o,l,f,b,A,x){const $=n.consts,re=Pd(n,t,4,b||null,ki($,A));Pp(n,i,re,ki($,x)),_c(n,re);const we=re.tView=bg(2,re,o,l,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,$,null);return null!==n.queries&&(n.queries.template(n,re),we.queries=n.queries.embeddedTView(re)),re}(re,$,x,n,i,o,l,f,b):$.data[re];bo(we,!1);const nt=Og($,x,we,t);Ll()&&Ma($,x,nt,we),Cs(nt,x),kp(x,x[re]=Np(nt,x,nt,we)),fs(we)&&cy($,x,we),null!=b&&ly(x,we,A)}let Og=function Kd(t,n,i,o){return Fo(!0),n[Wn].createComment("")};function Wd(t){return Qn(function ls(){return Zn.lFrame.contextLView}(),Un+t)}function xu(t,n,i){const o=Gt();return ke(o,T(),n)&&Xo(Xr(),Mr(),o,t,n,o[Wn],i,!1),xu}function Ng(t,n,i,o,l){const b=l?"class":"style";Vo(t,i,n.inputs[b],b,o)}function zc(t,n,i,o){const l=Gt(),f=Xr(),b=Un+t,A=l[Wn],x=f.firstCreatePass?function Nb(t,n,i,o,l,f){const b=n.consts,x=Pd(n,t,2,o,ki(b,l));return Pp(n,i,x,ki(b,f)),null!==x.attrs&&Od(x,x.attrs,!1),null!==x.mergedAttrs&&Od(x,x.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,x),x}(b,f,l,n,i,o):f.data[b],$=hf(f,l,x,A,n,t);l[b]=$;const re=fs(x);return bo(x,!0),m_(A,$,x),32!=(32&x.flags)&&Ll()&&Ma(f,l,$,x),0===function Ci(){return Zn.lFrame.elementDepthCount}()&&Cs($,l),function Qc(){Zn.lFrame.elementDepthCount++}(),re&&(cy(f,l,x),ay(f,x,l)),null!==o&&ly(l,x),zc}function Hp(){let t=$r();gc()?Fu():(t=t.parent,bo(t,!1));const n=t;(function pc(t){return Zn.skipHydrationRootTNode===t})(n)&&function Fs(){Zn.skipHydrationRootTNode=null}(),function za(){Zn.lFrame.elementDepthCount--}();const i=Xr();return i.firstCreatePass&&(_c(i,t),As(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function vm(t){return 0!=(8&t.flags)}(n)&&Ng(i,n,Gt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function bm(t){return 0!=(16&t.flags)}(n)&&Ng(i,n,Gt(),n.stylesWithoutHost,!1),Hp}function kg(t,n,i,o){return zc(t,n,i,o),Hp(),kg}let hf=(t,n,i,o,l,f)=>(Fo(!0),v(o,l,function Ko(){return Zn.lFrame.currentNamespace}()));function La(t,n,i){const o=Gt(),l=Xr(),f=t+Un,b=l.firstCreatePass?function $p(t,n,i,o,l){const f=n.consts,b=ki(f,o),A=Pd(n,t,8,"ng-container",b);return null!==b&&Od(A,b,!0),Pp(n,i,A,ki(f,l)),null!==n.queries&&n.queries.elementStart(n,A),A}(f,l,o,n,i):l.data[f];bo(b,!0);const A=Kp(l,o,b,t);return o[f]=A,Ll()&&Ma(l,o,A,b),Cs(A,o),fs(b)&&(cy(l,o,b),ay(l,b,o)),null!=i&&ly(o,b),La}function ff(){let t=$r();const n=Xr();return gc()?Fu():(t=t.parent,bo(t,!1)),n.firstCreatePass&&(_c(n,t),As(t)&&n.queries.elementEnd(t)),ff}function zp(t,n,i){return La(t,n,i),ff(),zp}let Kp=(t,n,i,o)=>(Fo(!0),Mh(n[Wn],""));function Vg(){return Gt()}function Bg(t){return!!t&&"function"==typeof t.then}function pf(t){return!!t&&"function"==typeof t.subscribe}function Wp(t,n,i,o){const l=Gt(),f=Xr(),b=$r();return function Pl(t,n,i,o,l,f,b){const A=fs(o),$=t.firstCreatePass&&Tg(t),re=n[Zr],we=by(n);let nt=!0;if(3&o.type||b){const cn=ps(o,n),Nn=b?b(cn):cn,ur=we.length,Xt=b?ni=>b(Mn(ni[o.index])):o.index;let Pr=null;if(!b&&A&&(Pr=function mf(t,n,i,o){const l=t.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const b=l[f];if(b===i&&l[f+1]===o){const A=n[Js],x=l[f+2];return A.length>x?A[x]:null}"string"==typeof b&&(f+=2)}return null}(t,n,l,o.index)),null!==Pr)(Pr.__ngLastListenerFn__||Pr).__ngNextListenerFn__=f,Pr.__ngLastListenerFn__=f,nt=!1;else{f=ev(o,n,re,f,!1);const ni=i.listen(Nn,l,f);we.push(f,ni),$&&$.push(l,Xt,ur,ur+1)}}else f=ev(o,n,re,f,!1);const mt=o.outputs;let Vt;if(nt&&null!==mt&&(Vt=mt[l])){const cn=Vt.length;if(cn)for(let Nn=0;Nn<cn;Nn+=2){const Ki=n[Vt[Nn]][Vt[Nn+1]].subscribe(f),pa=we.length;we.push(f,Ki),$&&$.push(l,o.index,pa,-(pa+1))}}}(f,l,l[Wn],b,t,n,o),Wp}function qp(t,n,i,o){try{return li(6,n,i),!1!==i(o)}catch(l){return Rl(t,l),!1}finally{li(7,n,i)}}function ev(t,n,i,o,l){return function f(b){if(b===Function)return o;Jh(t.componentOffset>-1?Ir(t.index,n):n);let x=qp(n,i,o,b),$=f.__ngNextListenerFn__;for(;$;)x=qp(n,i,$,b)&&x,$=$.__ngNextListenerFn__;return l&&!1===x&&b.preventDefault(),x}}function Ug(t=1){return function nh(t){return(Zn.lFrame.contextLView=function Jc(t,n){for(;t>0;)n=n[vr],t--;return n}(t,Zn.lFrame.contextLView))[Zr]}(t)}function tv(t,n){let i=null;const o=function ma(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(!(1&i))return n[i+1]}return null}(t);for(let l=0;l<n.length;l++){const f=n[l];if("*"!==f){if(null===o?go(t,f,!0):rs(o,f))return l}else i=l}return i}function jg(t){const n=Gt()[Vr][yi];if(!n.projection){const o=n.projection=qo(t?t.length:1,null),l=o.slice();let f=n.child;for(;null!==f;){const b=t?tv(f,t):0;null!==b&&(l[b]?l[b].projectionNext=f:o[b]=f,l[b]=f),f=f.next}}}function Qp(t,n=0,i){const o=Gt(),l=Xr(),f=Pd(l,Un+t,16,null,i||null);null===f.projection&&(f.projection=n),Fu(),(!o[Yi]||fc())&&32!=(32&f.flags)&&function f_(t,n,i){Jf(n[Wn],0,n,i,so(t,i,n),au(i.parent||n[yi],i,n))}(l,o,f)}function Mu(t,n){return t<<17|n<<2}function Va(t){return t>>17&32767}function Gd(t){return 2|t}function Ba(t){return(131068&t)>>2}function Pu(t,n){return-131069&t|n<<2}function Zp(t){return 1|t}function qd(t,n,i,o,l){const f=t[i+1],b=null===n;let A=o?Va(f):Ba(f),x=!1;for(;0!==A&&(!1===x||b);){const re=t[A+1];Nl(t[A],n)&&(x=!0,t[A+1]=o?Zp(re):Gd(re)),A=o?Va(re):Ba(re)}x&&(t[i+1]=o?Gd(f):Zp(f))}function Nl(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Cc(t,n)>=0}const js={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kg(t){return t.substring(js.key,js.keyEnd)}function av(t,n){const i=js.textEnd;return i===n?-1:(n=js.keyEnd=function Bb(t,n,i){for(;n<i&&t.charCodeAt(n)>32;)n++;return n}(t,js.key=n,i),Xd(t,n,i))}function Xd(t,n,i){for(;n<i&&t.charCodeAt(n)<=32;)n++;return n}function em(t,n,i){return ua(t,n,i,!1),em}function yf(t,n){return ua(t,n,null,!0),yf}function Ua(t,n){for(let i=function Qd(t){return function Kc(t){js.key=0,js.keyEnd=0,js.value=0,js.valueEnd=0,js.textEnd=t.length}(t),av(t,Xd(t,0,js.textEnd))}(n);i>=0;i=av(n,i))Eo(t,Kg(n),!0)}function ua(t,n,i,o){const l=Gt(),f=Xr(),b=P(2);f.firstUpdatePass&&Wg(f,t,b,o),n!==Lr&&ke(l,b,n)&&qg(f,f.data[no()],l,l[Wn],t,l[b+1]=function dv(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Pe(Pa(t)))),t}(n,i),o,b)}function vf(t,n){return n>=t.expandoStartIndex}function Wg(t,n,i,o){const l=t.data;if(null===l[i+1]){const f=l[no()],b=vf(t,i);im(f,o)&&null===n&&!b&&(n=!1),n=function Wc(t,n,i,o){const l=function wn(t){const n=Zn.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===l)0===(o?n.classBindings:n.styleBindings)&&(i=Ou(i=tm(null,t,n,i,o),n.attrs,o),f=null);else{const b=n.directiveStylingLast;if(-1===b||t[b]!==l)if(i=tm(l,t,n,i,o),null===f){let x=function uv(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Ba(o))return t[Va(o)]}(t,n,o);void 0!==x&&Array.isArray(x)&&(x=tm(null,t,n,x[1],o),x=Ou(x,n.attrs,o),function Hb(t,n,i,o){t[Va(i?n.classBindings:n.styleBindings)]=o}(t,n,o,x))}else f=function bf(t,n,i){let o;const l=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<l;f++)o=Ou(o,t[f].hostAttrs,i);return Ou(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(l,f,n,o),function Fb(t,n,i,o,l,f){let b=f?n.classBindings:n.styleBindings,A=Va(b),x=Ba(b);t[o]=i;let re,$=!1;if(Array.isArray(i)?(re=i[1],(null===re||Cc(i,re)>0)&&($=!0)):re=i,l)if(0!==x){const nt=Va(t[A+1]);t[o+1]=Mu(nt,A),0!==nt&&(t[nt+1]=Pu(t[nt+1],o)),t[A+1]=function Xi(t,n){return 131071&t|n<<17}(t[A+1],o)}else t[o+1]=Mu(A,0),0!==A&&(t[A+1]=Pu(t[A+1],o)),A=o;else t[o+1]=Mu(x,0),0===A?A=o:t[x+1]=Pu(t[x+1],o),x=o;$&&(t[o+1]=Gd(t[o+1])),qd(t,re,o,!0),qd(t,re,o,!1),function Lb(t,n,i,o,l){const f=l?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&Cc(f,n)>=0&&(i[o+1]=Zp(i[o+1]))}(n,re,t,o,f),b=Mu(A,x),f?n.classBindings=b:n.styleBindings=b}(l,f,n,i,b,o)}}function tm(t,n,i,o,l){let f=null;const b=i.directiveEnd;let A=i.directiveStylingLast;for(-1===A?A=i.directiveStart:A++;A<b&&(f=n[A],o=Ou(o,f.hostAttrs,l),f!==t);)A++;return null!==t&&(i.directiveStylingLast=A),o}function Ou(t,n,i){const o=i?1:2;let l=-1;if(null!==n)for(let f=0;f<n.length;f++){const b=n[f];"number"==typeof b?l=b:l===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Eo(t,b,!!i||n[++f]))}return void 0===t?null:t}function qg(t,n,i,o,l,f,b,A){if(!(3&n.type))return;const x=t.data,$=x[A+1],re=function kb(t){return 1==(1&t)}($)?Zd(x,n,i,l,Ba($),b):void 0;Ef(re)||(Ef(f)||function sv(t){return 2==(2&t)}($)&&(f=Zd(x,null,i,l,A,b)),function Om(t,n,i,o,l){if(n)l?t.addClass(i,o):t.removeClass(i,o);else{let f=-1===o.indexOf("-")?void 0:Rc.DashCase;null==l?t.removeStyle(i,o,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Rc.Important),t.setStyle(i,o,l,f))}}(o,b,yo(no(),i),l,f))}function Zd(t,n,i,o,l,f){const b=null===n;let A;for(;l>0;){const x=t[l],$=Array.isArray(x),re=$?x[1]:x,we=null===re;let nt=i[l+1];nt===Lr&&(nt=we?tn:void 0);let mt=we?yh(nt,o):re===o?nt:void 0;if($&&!Ef(mt)&&(mt=yh(x,o)),Ef(mt)&&(A=mt,b))return A;const Vt=t[l+1];l=b?Va(Vt):Ba(Vt)}if(null!==n){let x=f?n.residualClasses:n.residualStyles;null!=x&&(A=yh(x,o))}return A}function Ef(t){return void 0!==t}function im(t,n){return 0!=(t.flags&(n?8:16))}function sm(t,n=""){const i=Gt(),o=Xr(),l=t+Un,f=o.firstCreatePass?Pd(o,l,1,n,null):o.data[l],b=Qg(o,i,f,n,t);i[l]=b,Ll()&&Ma(o,i,b,f),bo(f,!1)}let Qg=(t,n,i,o,l)=>(Fo(!0),function dd(t,n){return t.createText(n)}(n[Wn],o));function am(t){return uc("",t,""),am}function uc(t,n,i){const o=Gt(),l=Bo(o,t,n,i);return l!==Lr&&us(o,no(),l),uc}function cm(t,n,i,o,l){const f=Gt(),b=oc(f,t,n,i,o,l);return b!==Lr&&us(f,no(),b),cm}function Nu(t,n,i){!function da(t,n,i,o){const l=Xr(),f=P(2);l.firstUpdatePass&&Wg(l,null,f,o);const b=Gt();if(i!==Lr&&ke(b,f,i)){const A=l.data[no()];if(im(A,o)&&!vf(l,f)){let x=o?A.classesWithoutHost:A.stylesWithoutHost;null!==x&&(i=$e(x,i||"")),Ng(l,A,b,i,o)}else!function $b(t,n,i,o,l,f,b,A){l===Lr&&(l=tn);let x=0,$=0,re=0<l.length?l[0]:null,we=0<f.length?f[0]:null;for(;null!==re||null!==we;){const nt=x<l.length?l[x+1]:void 0,mt=$<f.length?f[$+1]:void 0;let cn,Vt=null;re===we?(x+=2,$+=2,nt!==mt&&(Vt=we,cn=mt)):null===we||null!==re&&re<we?(x+=2,Vt=re):($+=2,Vt=we,cn=mt),null!==Vt&&qg(t,n,i,o,Vt,cn,b,A),re=x<l.length?l[x]:null,we=$<f.length?f[$]:null}}(l,A,b,b[Wn],b[f+1],b[f+1]=function nm(t,n,i){if(null==i||""===i)return tn;const o=[],l=Pa(i);if(Array.isArray(l))for(let f=0;f<l.length;f++)t(o,l[f],!0);else if("object"==typeof l)for(const f in l)l.hasOwnProperty(f)&&t(o,f,l[f]);else"string"==typeof l&&n(o,l);return o}(t,n,i),o,f)}}(Eo,Ua,Bo(Gt(),t,n,i),!0)}function zb(t,n,i){const o=Gt();return ke(o,T(),n)&&Xo(Xr(),Mr(),o,t,n,o[Wn],i,!0),zb}const wf=void 0;var ww=["en",[["a","p"],["AM","PM"],wf],[["AM","PM"],wf,wf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wf,"{1} 'at' {0}",wf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Iw(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let um={};function Kb(t){const n=function Tw(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=s0(n);if(i)return i;const o=n.split("-")[0];if(i=s0(o),i)return i;if("en"===o)return ww;throw new de(701,!1)}function r0(t){return Kb(t)[dm.PluralCase]}function s0(t){return t in um||(um[t]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[t]),um[t]}var dm=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(dm||{});const hm="en-US";let o0=hm;function qb(t,n,i,o,l){if(t=Et(t),Array.isArray(t))for(let f=0;f<t.length;f++)qb(t[f],n,i,o,l);else{const f=Xr(),b=Gt(),A=$r();let x=Bc(t)?t:Et(t.provide);const $=P_(t),re=1048575&A.providerIndexes,we=A.directiveStart,nt=A.providerIndexes>>20;if(Bc(t)||!t.multi){const mt=new na($,l,Fa),Vt=Xb(x,n,l?re:re+nt,we);-1===Vt?(cl(ra(A,b),f,x),Qb(f,t,n.length),n.push(x),A.directiveStart++,A.directiveEnd++,l&&(A.providerIndexes+=1048576),i.push(mt),b.push(mt)):(i[Vt]=mt,b[Vt]=mt)}else{const mt=Xb(x,n,re+nt,we),Vt=Xb(x,n,re,re+nt),Nn=Vt>=0&&i[Vt];if(l&&!Nn||!l&&!(mt>=0&&i[mt])){cl(ra(A,b),f,x);const ur=function IT(t,n,i,o,l){const f=new na(t,i,Fa);return f.multi=[],f.index=n,f.componentProviders=0,M0(f,l,o&&!i),f}(l?ET:bT,i.length,l,o,$);!l&&Nn&&(i[Vt].providerFactory=ur),Qb(f,t,n.length,0),n.push(x),A.directiveStart++,A.directiveEnd++,l&&(A.providerIndexes+=1048576),i.push(ur),b.push(ur)}else Qb(f,t,mt>-1?mt:Vt,M0(i[l?Vt:mt],$,!l&&o));!l&&o&&Nn&&i[Vt].componentProviders++}}}function Qb(t,n,i,o){const l=Bc(n),f=function tg(t){return!!t.useClass}(n);if(l||f){const x=(f?Et(n.useClass):n).prototype.ngOnDestroy;if(x){const $=t.destroyHooks||(t.destroyHooks=[]);if(!l&&n.multi){const re=$.indexOf(i);-1===re?$.push(i,[o,x]):$[re+1].push(o,x)}else $.push(i,x)}}}function M0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function Xb(t,n,i,o){for(let l=i;l<o;l++)if(n[l]===t)return l;return-1}function bT(t,n,i,o){return Yb(this.multi,[])}function ET(t,n,i,o){const l=this.multi;let f;if(this.providerFactory){const b=this.providerFactory.componentProviders,A=uo(i,i[hn],this.providerFactory.index,o);f=A.slice(0,b),Yb(l,f);for(let x=b;x<A.length;x++)f.push(A[x])}else f=[],Yb(l,f);return f}function Yb(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function P0(t,n=[]){return i=>{i.providersResolver=(o,l)=>function vT(t,n,i){const o=Xr();if(o.firstCreatePass){const l=ai(t);qb(i,o.data,o.blueprint,l,!0),qb(n,o.data,o.blueprint,l,!1)}}(o,l?l(t):t,n)}}class Tf{}class O0{}function wT(t,n){return new Zb(t,n??null,[])}class Zb extends Tf{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cg(this);const l=Oi(n);this._bootstrapComponents=rc(l.bootstrap),this._r3Injector=fg(n,i,[{provide:Tf,useValue:this},{provide:Lo,useValue:this.componentFactoryResolver},...o],Pe(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Jb extends O0{constructor(n){super(),this.moduleType=n}create(n){return new Zb(this.moduleType,n,[])}}class N0 extends Tf{constructor(n){super(),this.componentFactoryResolver=new Cg(this),this.instance=null;const i=new gu([...n.providers,{provide:Tf,useValue:this},{provide:Lo,useValue:this.componentFactoryResolver}],n.parent||Hh(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function k0(t,n,i=null){return new N0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let AT=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=Uh(0,i.type),l=o.length>0?k0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,l)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=en({token:t,providedIn:"environment",factory:()=>new t(me(aa))})}}return t})();function F0(t){t.getStandaloneInjector=n=>n.get(AT).getOrCreateStandaloneInjector(t)}function $0(t,n,i){const o=gs()+t,l=Gt();return l[o]===Lr?wr(l,o,i?n.call(i):n()):function ct(t,n){return t[n]}(l,o)}function z0(t,n,i,o){return W0(Gt(),gs(),t,n,i,o)}function K0(t,n,i,o,l,f){return function q0(t,n,i,o,l,f,b,A){const x=n+i;return function dt(t,n,i,o,l){const f=Ze(t,n,i,o);return ke(t,n+2,l)||f}(t,x,l,f,b)?wr(t,x+3,A?o.call(A,l,f,b):o(l,f,b)):a_(t,x+3)}(Gt(),gs(),t,n,i,o,l,f)}function a_(t,n){const i=t[n];return i===Lr?void 0:i}function W0(t,n,i,o,l,f){const b=n+i;return ke(t,b,l)?wr(t,b+1,f?o.call(f,l):o(l)):a_(t,b+1)}function Y0(t,n){const i=Xr();let o;const l=t+Un;i.firstCreatePass?(o=function jT(t,n){if(n)for(let i=n.length-1;i>=0;i--){const o=n[i];if(t===o.name)return o}}(n,i.pipeRegistry),i.data[l]=o,o.onDestroy&&(i.destroyHooks??=[]).push(l,o.onDestroy)):o=i.data[l];const f=o.factory||(o.factory=vi(o.type)),A=on(Fa);try{const x=Ul(!1),$=f();return Ul(x),function Yy(t,n,i,o){i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),n[i]=o}(i,Gt(),l,$),$}finally{on(A)}}function Z0(t,n,i){const o=t+Un,l=Gt(),f=Qn(l,o);return c_(l,o)?W0(l,gs(),n,f.transform,i,f):f.transform(i)}function J0(t,n,i,o){const l=t+Un,f=Gt(),b=Qn(f,l);return c_(f,l)?function G0(t,n,i,o,l,f,b){const A=n+i;return Ze(t,A,l,f)?wr(t,A+2,b?o.call(b,l,f):o(l,f)):a_(t,A+2)}(f,gs(),n,b.transform,i,o,b):b.transform(i,o)}function c_(t,n){return t[hn].data[n].pure}function KT(){return this._results[Symbol.iterator]()}class _v{get changes(){return this._changes||(this._changes=new ka)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=_v.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=KT)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const l=function ho(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Ku(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let l=t[o],f=n[o];if(i&&(l=i(l),f=i(f)),f!==l)return!1}return!0}(o._results,l,i))&&(o._results=l,o.length=l.length,o.last=l[this.length-1],o.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GT(t,n,i,o=!0){const l=n[hn];if(function te(t,n,i,o){const l=yr+o,f=i.length;o>0&&(i[l-1][xi]=n),o<f-yr?(n[xi]=i[l],Tc(i,yr+o,n)):(i.push(n),n[xi]=null),n[Or]=i;const b=n[bi];null!==b&&i!==b&&function Be(t,n){const i=t[Os];n[Vr]!==n[Or][Or][Vr]&&(t[as]=!0),null===i?t[Os]=[n]:i.push(n)}(b,n);const A=n[ws];null!==A&&A.insertView(t),n[sr]|=128}(l,n,t,i),o){const f=El(i,t),b=n[Wn],A=ou(b,t[$i]);null!==A&&function h(t,n,i,o,l,f){o[qr]=l,o[yi]=n,Oh(t,o,i,1,l,f)}(l,t[yi],b,n,A,f)}}let l_=(()=>{class t{static{this.__NG_ELEMENT_ID__=XT}}return t})();const qT=l_,QT=class extends qT{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const l=function WT(t,n,i,o){const l=n.tView,A=Mp(t,l,i,4096&t[sr]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);A[bi]=t[n.index];const $=t[ws];return null!==$&&(A[ws]=$.createEmbeddedView(l)),Au(l,A,i),A}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new Fd(l)}};function XT(){return yv($r(),Gt())}function yv(t,n){return 4&t.type?new QT(n,t,Kh(t,n)):null}let bv=(()=>{class t{static{this.__NG_ELEMENT_ID__=nA}}return t})();function nA(){return oI($r(),Gt())}const rA=bv,iI=class extends rA{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Kh(this._hostTNode,this._hostLView)}get injector(){return new ts(this._hostTNode,this._hostLView)}get parentInjector(){const n=al(this._hostTNode,this._hostLView);if(qa(n)){const i=il(n,this._hostLView),o=rl(n);return new ts(i[hn].data[o+8],i)}return new ts(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=sI(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-yr}createEmbeddedView(n,i,o){let l,f;"number"==typeof o?l=o:null!=o&&(l=o.index,f=o.injector);const A=n.createEmbeddedViewImpl(i||{},f,null);return this.insertImpl(A,l,false),A}createComponent(n,i,o,l,f){const b=n&&!function Za(t){return"function"==typeof t}(n);let A;if(b)A=i;else{const cn=i||{};A=cn.index,o=cn.injector,l=cn.projectableNodes,f=cn.environmentInjector||cn.ngModuleRef}const x=b?n:new Ld(_r(n)),$=o||this.parentInjector;if(!f&&null==x.ngModule){const Nn=(b?$:this.parentInjector).get(aa,null);Nn&&(f=Nn)}_r(x.componentType??{});const mt=x.create($,l,null,f);return this.insertImpl(mt.hostView,A,false),mt}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const l=n._lView;if(function Ai(t){return Hr(t[Or])}(l)){const x=this.indexOf(n);if(-1!==x)this.detach(x);else{const $=l[Or],re=new iI($,$[yi],$[Or]);re.detach(re.indexOf(n))}}const b=this._adjustIndex(i),A=this._lContainer;return GT(A,l,b,!o),n.attachToViewContainerRef(),Tc(tE(A),b,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=sI(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=Mt(this._lContainer,i);o&&(Wl(tE(this._lContainer),i),vn(o[hn],o))}detach(n){const i=this._adjustIndex(n,-1),o=Mt(this._lContainer,i);return o&&null!=Wl(tE(this._lContainer),i)?new Fd(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function sI(t){return t[8]}function tE(t){return t[8]||(t[8]=[])}function oI(t,n){let i;const o=n[t.index];return Hr(o)?i=o:(i=Np(o,n,null,t),n[t.index]=i,kp(n,i)),aI(i,n,t,o),new iI(i,t,n)}let aI=function cI(t,n,i,o){if(t[$i])return;let l;l=8&i.type?Mn(o):function iA(t,n){const i=t[Wn],o=i.createComment(""),l=ps(n,t);return Io(i,ou(i,l),o,function md(t,n){return t.nextSibling(n)}(i,l),!1),o}(n,i),t[$i]=l};class nE{constructor(n){this.queryList=n,this.matches=null}clone(){return new nE(this.queryList)}setDirty(){this.queryList.setDirty()}}class rE{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,l=[];for(let f=0;f<o;f++){const b=i.getByIndex(f);l.push(this.queries[b.indexInDeclarationView].clone())}return new rE(l)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==_I(n,i).matches&&this.queries[i].setDirty()}}class lI{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class iE{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const l=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,l);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new iE(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class sE{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new sE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let l=0;l<o.length;l++){const f=o[l];this.matchTNodeWithReadOption(n,i,aA(i,f)),this.matchTNodeWithReadOption(n,i,Uu(i,n,f,!1,!1))}else o===l_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Uu(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const l=this.metadata.read;if(null!==l)if(l===Oa||l===bv||l===l_&&4&i.type)this.addMatch(i.index,-2);else{const f=Uu(i,n,l,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function aA(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function lA(t,n,i,o){return-1===i?function cA(t,n){return 11&t.type?Kh(t,n):4&t.type?yv(t,n):null}(n,t):-2===i?function uA(t,n,i){return i===Oa?Kh(n,t):i===l_?yv(n,t):i===bv?oI(n,t):void 0}(t,n,o):uo(t,t[hn],i,n)}function uI(t,n,i,o){const l=n[ws].queries[o];if(null===l.matches){const f=t.data,b=i.matches,A=[];for(let x=0;x<b.length;x+=2){const $=b[x];A.push($<0?null:lA(n,f[$],b[x+1],i.metadata.read))}l.matches=A}return l.matches}function oE(t,n,i,o){const l=t.queries.getByIndex(i),f=l.matches;if(null!==f){const b=uI(t,n,l,i);for(let A=0;A<f.length;A+=2){const x=f[A];if(x>0)o.push(b[A/2]);else{const $=f[A+1],re=n[-x];for(let we=yr;we<re.length;we++){const nt=re[we];nt[bi]===nt[Or]&&oE(nt[hn],nt,$,o)}if(null!==re[Os]){const we=re[Os];for(let nt=0;nt<we.length;nt++){const mt=we[nt];oE(mt[hn],mt,$,o)}}}}}return o}function dI(t){const n=Gt(),i=Xr(),o=Rr();Di(o+1);const l=_I(i,o);if(t.dirty&&function ms(t){return 4==(4&t[sr])}(n)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const f=l.crossesNgTemplate?oE(i,n,o,[]):uI(i,n,l,o);t.reset(f,Ep),t.notifyOnChanges()}return!0}return!1}function hI(t,n,i){const o=Xr();o.firstCreatePass&&(gI(o,new lI(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),mI(o,Gt(),n)}function fI(t,n,i,o){const l=Xr();if(l.firstCreatePass){const f=$r();gI(l,new lI(n,i,o),f.index),function hA(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(l,t),2==(2&i)&&(l.staticContentQueries=!0)}mI(l,Gt(),i)}function pI(){return function dA(t,n){return t[ws].queries[n].queryList}(Gt(),Rr())}function mI(t,n,i){const o=new _v(4==(4&i));(function _b(t,n,i,o){const l=by(n);l.push(i),t.firstCreatePass&&Tg(t).push(o,l.length-1)})(t,n,o,o.destroy),null===n[ws]&&(n[ws]=new rE),n[ws].queries.push(new nE(o))}function gI(t,n,i){null===t.queries&&(t.queries=new iE),t.queries.track(new sE(n,i))}function _I(t,n){return t.queries.getByIndex(n)}function yI(t,n){return yv(t,n)}function aE(t){return!!Oi(t)}const kI=new et("Application Initializer");let hE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=be(kI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const l of this.appInits){const f=l();if(Bg(f))i.push(f);else if(pf(f)){const b=new Promise((A,x)=>{f.subscribe({complete:A,error:x})});i.push(b)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(l=>{this.reject(l)}),0===i.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),FI=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const Iv=new et("LocaleId",{providedIn:"root",factory:()=>be(Iv,it.Optional|it.SkipSelf)||function OA(){return typeof $localize<"u"&&$localize.locale||hm}()}),NA=new et("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let LI=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Oe.t(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class FA{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let LA=(()=>{class t{compileModuleSync(i){return new Jb(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),f=rc(Oi(i).declarations).reduce((b,A)=>{const x=_r(A);return x&&b.push(new Ld(x)),b},[]);return new FA(o,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const jI=new et(""),HI=new et("");let mE,sC=(()=>{class t{constructor(i,o,l){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mE||(function oC(t){mE=t}(l),l.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_s.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,l){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:l})}whenStable(i,o,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,l){return[]}static{this.\u0275fac=function(o){return new(o||t)(me(_s),me($I),me(HI))}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac})}}return t})(),$I=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return mE?.findTestabilityInTree(this,i,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),eh=null;const zI=new et("AllowMultipleToken"),gE=new et("PlatformDestroyListeners"),_E=new et("appBootstrapListener");class lC{constructor(n,i){this.name=n,this.token=i}}function GI(t,n,i=[]){const o=`Platform: ${n}`,l=new et(o);return(f=[])=>{let b=yE();if(!b||b.injector.get(zI,!1)){const A=[...i,...f,{provide:l,useValue:!0}];t?t(A):function uC(t){if(eh&&!eh.get(zI,!1))throw new de(400,!1);(function KI(){!function Z(t){hc=t}(()=>{throw new de(600,!1)})})(),eh=t;const n=t.get(QI);(function WI(t){t.get(F_,null)?.forEach(i=>i())})(t)}(function qI(t=[],n){return la.create({name:n,providers:[{provide:bd,useValue:"platform"},{provide:gE,useValue:new Set([()=>eh=null])},...t]})}(A,o))}return function hC(t){const n=yE();if(!n)throw new de(401,!1);return n}()}}function yE(){return eh?.get(QI)??null}let QI=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const l=function fC(t="zone.js",n){return"noop"===t?new cb:"zone.js"===t?new _s(n):t}(o?.ngZone,function XI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return l.run(()=>{const f=function TT(t,n,i){return new Zb(t,n,i)}(i.moduleType,this.injector,function tw(t){return[{provide:_s,useFactory:t},{provide:nc,multi:!0,useFactory:()=>{const n=be(mC,{optional:!0});return()=>n.initialize()}},{provide:ew,useFactory:pC},{provide:Q_,useFactory:Zh}]}(()=>l)),b=f.injector.get(Na,null);return l.runOutsideAngular(()=>{const A=l.onError.subscribe({next:x=>{b.handleError(x)}});f.onDestroy(()=>{Tv(this._modules,f),A.unsubscribe()})}),function YI(t,n,i){try{const o=i();return Bg(o)?o.catch(l=>{throw n.runOutsideAngular(()=>t.handleError(l)),l}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(b,l,()=>{const A=f.injector.get(hE);return A.runInitializers(),A.donePromise.then(()=>(function a0(t){Ee(t,"Expected localeId to be defined"),"string"==typeof t&&(o0=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Iv,hm)||hm),this._moduleDoBootstrap(f),f))})})}bootstrapModule(i,o=[]){const l=ZI({},o);return function aC(t,n,i){const o=new Jb(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(i){const o=i.injector.get(mm);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!i.instance.ngDoBootstrap)throw new de(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(gE,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(o){return new(o||t)(me(la))}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function ZI(t,n){return Array.isArray(n)?n.reduce(ZI,t):{...t,...n}}let mm=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(ew),this.zoneIsStable=be(Q_),this.componentTypes=[],this.components=[],this.isStable=be(LI).hasPendingTasks.pipe((0,Te.n)(i=>i?(0,Le.of)(!1):this.zoneIsStable),(0,De.F)(),(0,ve.u)()),this._injector=be(aa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const l=i instanceof eb;if(!this._injector.get(hE).done)throw!l&&vs(i),new de(405,!1);let b;b=l?i:this._injector.get(Lo).resolveComponentFactory(i),this.componentTypes.push(b.componentType);const A=function cC(t){return t.isBoundToModule}(b)?void 0:this._injector.get(Tf),$=b.create(la.NULL,[],o||b.selector,A),re=$.location.nativeElement,we=$.injector.get(jI,null);return we?.registerApplication(re),$.onDestroy(()=>{this.detachView($.hostView),Tv(this.components,$),we?.unregisterApplication(re)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;Tv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(_E,[]);o.push(...this._bootstrapListeners),o.forEach(l=>l(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Tv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new de(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Tv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const ew=new et("",{providedIn:"root",factory:()=>be(Na).handleError.bind(void 0)});function pC(){const t=be(_s),n=be(Na);return i=>t.runOutsideAngular(()=>n.handleError(i))}let mC=(()=>{class t{constructor(){this.zone=be(_s),this.applicationRef=be(mm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _C(){return!1}let yC=(()=>{class t{static{this.__NG_ELEMENT_ID__=vC}}return t})();function vC(t){return function bC(t,n,i){if(Bi(t)&&!i){const o=Ir(t.index,n);return new Fd(o,o)}return 47&t.type?new Fd(n[Vr],n):null}($r(),Gt(),16==(16&t))}class ow{constructor(){}supports(n){return Bn(n)}create(n){return new AC(n)}}const TC=(t,n)=>n;class AC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||TC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,l=0,f=null;for(;i||o;){const b=!o||i&&i.currentIndex<cw(o,l,f)?i:o,A=cw(b,l,f),x=b.currentIndex;if(b===o)l--,o=o._nextRemoved;else if(i=i._next,null==b.previousIndex)l++;else{f||(f=[]);const $=A-l,re=x-l;if($!=re){for(let nt=0;nt<$;nt++){const mt=nt<f.length?f[nt]:f[nt]=0,Vt=mt+nt;re<=Vt&&Vt<$&&(f[nt]=mt+1)}f[b.previousIndex]=re-$}}A!==x&&n(b,A,x)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Bn(n))throw new de(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let l,f,b,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let A=0;A<this.length;A++)f=n[A],b=this._trackByFn(A,f),null!==i&&Object.is(i.trackById,b)?(o&&(i=this._verifyReinsertion(i,f,b,A)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,b,A),o=!0),i=i._next}else l=0,function bn(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,A=>{b=this._trackByFn(l,A),null!==i&&Object.is(i.trackById,b)?(o&&(i=this._verifyReinsertion(i,A,b,l)),Object.is(i.item,A)||this._addIdentityChange(i,A)):(i=this._mismatch(i,A,b,l),o=!0),i=i._next,l++}),this.length=l;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,l){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,l)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,l))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,l)):n=this._addAfter(new CC(i,o),f,l),n}_verifyReinsertion(n,i,o,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,l):n.currentIndex!=l&&(n.currentIndex=l,this._addToMoves(n,l)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const l=n._prevRemoved,f=n._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const l=null===i?this._itHead:i._next;return n._next=l,n._prev=i,null===l?this._itTail=n:l._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new aw),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class aw{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new DC,this.map.set(i,o)),o.add(n)}get(n,i){const l=this.map.get(n);return l?l.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cw(t,n,i){const o=t.previousIndex;if(null===o)return o;let l=0;return i&&o<i.length&&(l=i[o]),o+n+l}class lw{constructor(){}supports(n){return n instanceof Map||er(n)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||er(n)))throw new de(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,l)=>{if(i&&i.key===l)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(l,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const l=this._records.get(n);this._maybeAddToChanges(l,i);const f=l._prev,b=l._next;return f&&(f._next=b),b&&(b._prev=f),l._next=null,l._prev=null,l}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uw(){return new wE([new ow])}let wE=(()=>{class t{static{this.\u0275prov=en({token:t,providedIn:"root",factory:uw})}constructor(i){this.factories=i}static create(i,o){if(null!=o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||uw()),deps:[[t,new Ql,new fl]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(null!=o)return o;throw new de(901,!1)}}return t})();function dw(){return new TE([new lw])}let TE=(()=>{class t{static{this.\u0275prov=en({token:t,providedIn:"root",factory:dw})}constructor(i){this.factories=i}static create(i,o){if(o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||dw()),deps:[[t,new Ql,new fl]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(o)return o;throw new de(901,!1)}}return t})();const PC=GI(null,"core",[]);let OC=(()=>{class t{constructor(i){}static{this.\u0275fac=function(o){return new(o||t)(me(mm))}}static{this.\u0275mod=zs({type:t})}static{this.\u0275inj=Gn({})}}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const n=_r(t);if(!n)return null;const i=new Ld(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},8515:(nn,tt,j)=>{j.d(tt,{Qe:()=>Py,cM:()=>Oy});var p=j(177),J=j(7705),oe=j(1825),Y=j(9253),Le=(j(7955),j(1413)),ve=j(7673),Te=j(1985),De=j(8455),ce=j(7786),ge=j(941),Pe=j(5558),$e=j(6354),ht=j(6129);class Ot extends Le.B{constructor(e=1/0,r=1/0,s=ht.U){super(),this._bufferSize=e,this._windowTime=r,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,r)}next(e){const{isStopped:r,_buffer:s,_infiniteTimeWindow:c,_timestampProvider:d,_windowTime:y}=this;r||(s.push(e),!c&&s.push(d.now()+y)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:c}=this,d=c.slice();for(let y=0;y<d.length&&!e.closed;y+=s?1:2)e.next(d[y]);return this._checkFinalizedStatuses(e),r}_trimBuffer(){const{_bufferSize:e,_timestampProvider:r,_buffer:s,_infiniteTimeWindow:c}=this,d=(c?1:2)*e;if(e<1/0&&d<s.length&&s.splice(0,s.length-d),!c){const y=r.now();let S=0;for(let F=1;F<s.length&&s[F]<=y;F+=2)S=F;S&&s.splice(0,S+1)}}}var Et=j(7647);function yt(a,e,r){let s,c=!1;return a&&"object"==typeof a?({bufferSize:s=1/0,windowTime:e=1/0,refCount:c=!1,scheduler:r}=a):s=a??1/0,(0,Et.u)({connector:()=>new Ot(s,e,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}var St=j(1594),Yt=j(8071);function Rt(a,e){return(0,Yt.T)(e)?(0,Pe.n)(()=>a,e):(0,Pe.n)(()=>a)}var de=j(6745),Ue=j(5964),Ne=j(7935);const We=new J.nKC("angularfire2.auth.use-emulator"),It=new J.nKC("angularfire2.auth.settings"),Ht=new J.nKC("angularfire2.auth.tenant-id"),pt=new J.nKC("angularfire2.auth.langugage-code"),ln=new J.nKC("angularfire2.auth.use-device-language"),$n=new J.nKC("angularfire.auth.persistence"),br=(a,e,r,s,c,d,y,S)=>(0,Y.BM)(`${a.name}.auth`,"AngularFireAuth",a.name,()=>{const F=e.runOutsideAngular(()=>a.auth());if(r&&F.useEmulator(...r),s&&(F.tenantId=s),F.languageCode=c,d&&F.useDeviceLanguage(),y)for(const[q,ne]of Object.entries(y))F.settings[q]=ne;return S&&F.setPersistence(S),F},[r,s,c,d,y,S]);let Dr=(()=>{class a{authState;idToken;user;idTokenResult;credential;constructor(r,s,c,d,y,S,F,q,ne,ye,Ge,bt){const Lt=new Le.B,Jt=(0,ve.of)(void 0).pipe((0,ge.Q)(y.outsideAngular),(0,Pe.n)(()=>d.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,7955)))),(0,$e.T)(()=>(0,Y.iB)(r,d,s)),(0,$e.T)(Kt=>br(Kt,d,S,q,ne,ye,F,Ge)),yt({bufferSize:1,refCount:!1}));if((0,p.Vy)(c))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ve.of)(null);else{Jt.pipe((0,St.$)()).subscribe();const Kt=Jt.pipe((0,Pe.n)(bn=>bn.getRedirectResult().then(er=>er,()=>null)),oe.U0,yt({bufferSize:1,refCount:!1})),Bn=Jt.pipe((0,Pe.n)(bn=>new Te.c(er=>({unsubscribe:d.runOutsideAngular(()=>bn.onAuthStateChanged(xr=>er.next(xr),xr=>er.error(xr),()=>er.complete()))})))),Jn=Jt.pipe((0,Pe.n)(bn=>new Te.c(er=>({unsubscribe:d.runOutsideAngular(()=>bn.onIdTokenChanged(xr=>er.next(xr),xr=>er.error(xr),()=>er.complete()))}))));this.authState=Kt.pipe(Rt(Bn),(0,de._)(y.outsideAngular),(0,ge.Q)(y.insideAngular)),this.user=Kt.pipe(Rt(Jn),(0,de._)(y.outsideAngular),(0,ge.Q)(y.insideAngular)),this.idToken=this.user.pipe((0,Pe.n)(bn=>bn?(0,De.H)(bn.getIdToken()):(0,ve.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.n)(bn=>bn?(0,De.H)(bn.getIdTokenResult()):(0,ve.of)(null))),this.credential=(0,ce.h)(Kt,Lt,this.authState.pipe((0,Ue.p)(bn=>!bn))).pipe((0,$e.T)(bn=>bn?.user?bn:null),(0,de._)(y.outsideAngular),(0,ge.Q)(y.insideAngular))}return(0,Y.Gt)(this,Jt,d,{spy:{apply:(Kt,Bn,Jn)=>{(Kt.startsWith("signIn")||Kt.startsWith("createUser"))&&Jn.then(bn=>Lt.next(bn))}}})}static \u0275fac=function(s){return new(s||a)(J.KVO(Y.rx),J.KVO(Y.uP,8),J.KVO(J.Agw),J.KVO(J.SKi),J.KVO(oe.u0),J.KVO(We,8),J.KVO(It,8),J.KVO(Ht,8),J.KVO(pt,8),J.KVO(ln,8),J.KVO($n,8),J.KVO(oe.Jv,8))};static \u0275prov=J.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})();var Rn=j(3236),un=j(9172),gn=j(9974),Wt=j(4360);function Ve(){return(0,gn.N)((a,e)=>{let r,s=!1;a.subscribe((0,Wt._)(e,c=>{const d=r;r=c,s&&e.next([d,c]),s=!0}))})}var Gn,Tr,Ye=j(2816),ut=j(3294),ze=j(3345),Ee=j(467),lt=j(7852),fn=j(1362),zn=j(8041),dn=j(1076),en=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pn={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function c(ct,ke,Ze){Ze||(Ze=0);var dt=Array(16);if("string"==typeof ke)for(var ft=0;16>ft;++ft)dt[ft]=ke.charCodeAt(Ze++)|ke.charCodeAt(Ze++)<<8|ke.charCodeAt(Ze++)<<16|ke.charCodeAt(Ze++)<<24;else for(ft=0;16>ft;++ft)dt[ft]=ke[Ze++]|ke[Ze++]<<8|ke[Ze++]<<16|ke[Ze++]<<24;var Ct=ct.g[3],Qe=(ke=ct.g[0])+(Ct^(Ze=ct.g[1])&((ft=ct.g[2])^Ct))+dt[0]+3614090360&4294967295;Qe=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=(Ze=(ft=(Ct=(ke=Ze+(Qe<<7&4294967295|Qe>>>25))+((Qe=Ct+(ft^ke&(Ze^ft))+dt[1]+3905402710&4294967295)<<12&4294967295|Qe>>>20))+((Qe=ft+(Ze^Ct&(ke^Ze))+dt[2]+606105819&4294967295)<<17&4294967295|Qe>>>15))+((Qe=Ze+(ke^ft&(Ct^ke))+dt[3]+3250441966&4294967295)<<22&4294967295|Qe>>>10))+((Qe=ke+(Ct^Ze&(ft^Ct))+dt[4]+4118548399&4294967295)<<7&4294967295|Qe>>>25))+((Qe=Ct+(ft^ke&(Ze^ft))+dt[5]+1200080426&4294967295)<<12&4294967295|Qe>>>20))+((Qe=ft+(Ze^Ct&(ke^Ze))+dt[6]+2821735955&4294967295)<<17&4294967295|Qe>>>15))+((Qe=Ze+(ke^ft&(Ct^ke))+dt[7]+4249261313&4294967295)<<22&4294967295|Qe>>>10))+((Qe=ke+(Ct^Ze&(ft^Ct))+dt[8]+1770035416&4294967295)<<7&4294967295|Qe>>>25))+((Qe=Ct+(ft^ke&(Ze^ft))+dt[9]+2336552879&4294967295)<<12&4294967295|Qe>>>20))+((Qe=ft+(Ze^Ct&(ke^Ze))+dt[10]+4294925233&4294967295)<<17&4294967295|Qe>>>15))+((Qe=Ze+(ke^ft&(Ct^ke))+dt[11]+2304563134&4294967295)<<22&4294967295|Qe>>>10))+((Qe=ke+(Ct^Ze&(ft^Ct))+dt[12]+1804603682&4294967295)<<7&4294967295|Qe>>>25))+((Qe=Ct+(ft^ke&(Ze^ft))+dt[13]+4254626195&4294967295)<<12&4294967295|Qe>>>20))+((Qe=ft+(Ze^Ct&(ke^Ze))+dt[14]+2792965006&4294967295)<<17&4294967295|Qe>>>15))+((Qe=Ze+(ke^ft&(Ct^ke))+dt[15]+1236535329&4294967295)<<22&4294967295|Qe>>>10))+((Qe=ke+(ft^Ct&(Ze^ft))+dt[1]+4129170786&4294967295)<<5&4294967295|Qe>>>27))+((Qe=Ct+(Ze^ft&(ke^Ze))+dt[6]+3225465664&4294967295)<<9&4294967295|Qe>>>23))+((Qe=ft+(ke^Ze&(Ct^ke))+dt[11]+643717713&4294967295)<<14&4294967295|Qe>>>18))+((Qe=Ze+(Ct^ke&(ft^Ct))+dt[0]+3921069994&4294967295)<<20&4294967295|Qe>>>12))+((Qe=ke+(ft^Ct&(Ze^ft))+dt[5]+3593408605&4294967295)<<5&4294967295|Qe>>>27))+((Qe=Ct+(Ze^ft&(ke^Ze))+dt[10]+38016083&4294967295)<<9&4294967295|Qe>>>23))+((Qe=ft+(ke^Ze&(Ct^ke))+dt[15]+3634488961&4294967295)<<14&4294967295|Qe>>>18))+((Qe=Ze+(Ct^ke&(ft^Ct))+dt[4]+3889429448&4294967295)<<20&4294967295|Qe>>>12))+((Qe=ke+(ft^Ct&(Ze^ft))+dt[9]+568446438&4294967295)<<5&4294967295|Qe>>>27))+((Qe=Ct+(Ze^ft&(ke^Ze))+dt[14]+3275163606&4294967295)<<9&4294967295|Qe>>>23))+((Qe=ft+(ke^Ze&(Ct^ke))+dt[3]+4107603335&4294967295)<<14&4294967295|Qe>>>18))+((Qe=Ze+(Ct^ke&(ft^Ct))+dt[8]+1163531501&4294967295)<<20&4294967295|Qe>>>12))+((Qe=ke+(ft^Ct&(Ze^ft))+dt[13]+2850285829&4294967295)<<5&4294967295|Qe>>>27))+((Qe=Ct+(Ze^ft&(ke^Ze))+dt[2]+4243563512&4294967295)<<9&4294967295|Qe>>>23))+((Qe=ft+(ke^Ze&(Ct^ke))+dt[7]+1735328473&4294967295)<<14&4294967295|Qe>>>18))+((Qe=Ze+(Ct^ke&(ft^Ct))+dt[12]+2368359562&4294967295)<<20&4294967295|Qe>>>12))+((Qe=ke+(Ze^ft^Ct)+dt[5]+4294588738&4294967295)<<4&4294967295|Qe>>>28))+((Qe=Ct+(ke^Ze^ft)+dt[8]+2272392833&4294967295)<<11&4294967295|Qe>>>21))+((Qe=ft+(Ct^ke^Ze)+dt[11]+1839030562&4294967295)<<16&4294967295|Qe>>>16))+((Qe=Ze+(ft^Ct^ke)+dt[14]+4259657740&4294967295)<<23&4294967295|Qe>>>9))+((Qe=ke+(Ze^ft^Ct)+dt[1]+2763975236&4294967295)<<4&4294967295|Qe>>>28))+((Qe=Ct+(ke^Ze^ft)+dt[4]+1272893353&4294967295)<<11&4294967295|Qe>>>21))+((Qe=ft+(Ct^ke^Ze)+dt[7]+4139469664&4294967295)<<16&4294967295|Qe>>>16))+((Qe=Ze+(ft^Ct^ke)+dt[10]+3200236656&4294967295)<<23&4294967295|Qe>>>9))+((Qe=ke+(Ze^ft^Ct)+dt[13]+681279174&4294967295)<<4&4294967295|Qe>>>28))+((Qe=Ct+(ke^Ze^ft)+dt[0]+3936430074&4294967295)<<11&4294967295|Qe>>>21))+((Qe=ft+(Ct^ke^Ze)+dt[3]+3572445317&4294967295)<<16&4294967295|Qe>>>16))+((Qe=Ze+(ft^Ct^ke)+dt[6]+76029189&4294967295)<<23&4294967295|Qe>>>9))+((Qe=ke+(Ze^ft^Ct)+dt[9]+3654602809&4294967295)<<4&4294967295|Qe>>>28))+((Qe=Ct+(ke^Ze^ft)+dt[12]+3873151461&4294967295)<<11&4294967295|Qe>>>21))+((Qe=ft+(Ct^ke^Ze)+dt[15]+530742520&4294967295)<<16&4294967295|Qe>>>16))+((Qe=Ze+(ft^Ct^ke)+dt[2]+3299628645&4294967295)<<23&4294967295|Qe>>>9))+((Qe=ke+(ft^(Ze|~Ct))+dt[0]+4096336452&4294967295)<<6&4294967295|Qe>>>26))+((Qe=Ct+(Ze^(ke|~ft))+dt[7]+1126891415&4294967295)<<10&4294967295|Qe>>>22))+((Qe=ft+(ke^(Ct|~Ze))+dt[14]+2878612391&4294967295)<<15&4294967295|Qe>>>17))+((Qe=Ze+(Ct^(ft|~ke))+dt[5]+4237533241&4294967295)<<21&4294967295|Qe>>>11))+((Qe=ke+(ft^(Ze|~Ct))+dt[12]+1700485571&4294967295)<<6&4294967295|Qe>>>26))+((Qe=Ct+(Ze^(ke|~ft))+dt[3]+2399980690&4294967295)<<10&4294967295|Qe>>>22))+((Qe=ft+(ke^(Ct|~Ze))+dt[10]+4293915773&4294967295)<<15&4294967295|Qe>>>17))+((Qe=Ze+(Ct^(ft|~ke))+dt[1]+2240044497&4294967295)<<21&4294967295|Qe>>>11))+((Qe=ke+(ft^(Ze|~Ct))+dt[8]+1873313359&4294967295)<<6&4294967295|Qe>>>26))+((Qe=Ct+(Ze^(ke|~ft))+dt[15]+4264355552&4294967295)<<10&4294967295|Qe>>>22))+((Qe=ft+(ke^(Ct|~Ze))+dt[6]+2734768916&4294967295)<<15&4294967295|Qe>>>17))+((Qe=Ze+(Ct^(ft|~ke))+dt[13]+1309151649&4294967295)<<21&4294967295|Qe>>>11))+((Ct=(ke=Ze+((Qe=ke+(ft^(Ze|~Ct))+dt[4]+4149444226&4294967295)<<6&4294967295|Qe>>>26))+((Qe=Ct+(Ze^(ke|~ft))+dt[11]+3174756917&4294967295)<<10&4294967295|Qe>>>22))^((ft=Ct+((Qe=ft+(ke^(Ct|~Ze))+dt[2]+718787259&4294967295)<<15&4294967295|Qe>>>17))|~ke))+dt[9]+3951481745&4294967295,ct.g[0]=ct.g[0]+ke&4294967295,ct.g[1]=ct.g[1]+(ft+(Qe<<21&4294967295|Qe>>>11))&4294967295,ct.g[2]=ct.g[2]+ft&4294967295,ct.g[3]=ct.g[3]+Ct&4294967295}function y(ct,ke){this.h=ke;for(var Ze=[],dt=!0,ft=ct.length-1;0<=ft;ft--){var Ct=0|ct[ft];dt&&Ct==ke||(Ze[ft]=Ct,dt=!1)}this.g=Ze}(function e(ct,ke){function Ze(){}Ze.prototype=ke.prototype,ct.D=ke.prototype,ct.prototype=new Ze,ct.prototype.constructor=ct,ct.C=function(dt,ft,Ct){for(var Qe=Array(arguments.length-2),Bo=2;Bo<arguments.length;Bo++)Qe[Bo-2]=arguments[Bo];return ke.prototype[ft].apply(dt,Qe)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(ct,ke){void 0===ke&&(ke=ct.length);for(var Ze=ke-this.blockSize,dt=this.B,ft=this.h,Ct=0;Ct<ke;){if(0==ft)for(;Ct<=Ze;)c(this,ct,Ct),Ct+=this.blockSize;if("string"==typeof ct){for(;Ct<ke;)if(dt[ft++]=ct.charCodeAt(Ct++),ft==this.blockSize){c(this,dt),ft=0;break}}else for(;Ct<ke;)if(dt[ft++]=ct[Ct++],ft==this.blockSize){c(this,dt),ft=0;break}}this.h=ft,this.o+=ke},s.prototype.v=function(){var ct=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ct[0]=128;for(var ke=1;ke<ct.length-8;++ke)ct[ke]=0;var Ze=8*this.o;for(ke=ct.length-8;ke<ct.length;++ke)ct[ke]=255&Ze,Ze/=256;for(this.u(ct),ct=Array(16),ke=Ze=0;4>ke;++ke)for(var dt=0;32>dt;dt+=8)ct[Ze++]=this.g[ke]>>>dt&255;return ct};var S={};function F(ct){return-128<=ct&&128>ct?function d(ct,ke){var Ze=S;return Object.prototype.hasOwnProperty.call(Ze,ct)?Ze[ct]:Ze[ct]=ke(ct)}(ct,function(ke){return new y([0|ke],0>ke?-1:0)}):new y([0|ct],0>ct?-1:0)}function q(ct){if(isNaN(ct)||!isFinite(ct))return ye;if(0>ct)return Kt(q(-ct));for(var ke=[],Ze=1,dt=0;ct>=Ze;dt++)ke[dt]=ct/Ze|0,Ze*=4294967296;return new y(ke,0)}var ye=F(0),Ge=F(1),bt=F(16777216);function Lt(ct){if(0!=ct.h)return!1;for(var ke=0;ke<ct.g.length;ke++)if(0!=ct.g[ke])return!1;return!0}function Jt(ct){return-1==ct.h}function Kt(ct){for(var ke=ct.g.length,Ze=[],dt=0;dt<ke;dt++)Ze[dt]=~ct.g[dt];return new y(Ze,~ct.h).add(Ge)}function Bn(ct,ke){return ct.add(Kt(ke))}function Jn(ct,ke){for(;(65535&ct[ke])!=ct[ke];)ct[ke+1]+=ct[ke]>>>16,ct[ke]&=65535,ke++}function bn(ct,ke){this.g=ct,this.h=ke}function er(ct,ke){if(Lt(ke))throw Error("division by zero");if(Lt(ct))return new bn(ye,ye);if(Jt(ct))return ke=er(Kt(ct),ke),new bn(Kt(ke.g),Kt(ke.h));if(Jt(ke))return ke=er(ct,Kt(ke)),new bn(Kt(ke.g),ke.h);if(30<ct.g.length){if(Jt(ct)||Jt(ke))throw Error("slowDivide_ only works with positive integers.");for(var Ze=Ge,dt=ke;0>=dt.l(ct);)Ze=xr(Ze),dt=xr(dt);var ft=wr(Ze,1),Ct=wr(dt,1);for(dt=wr(dt,2),Ze=wr(Ze,2);!Lt(dt);){var Qe=Ct.add(dt);0>=Qe.l(ct)&&(ft=ft.add(Ze),Ct=Qe),dt=wr(dt,1),Ze=wr(Ze,1)}return ke=Bn(ct,ft.j(ke)),new bn(ft,ke)}for(ft=ye;0<=ct.l(ke);){for(Ze=Math.max(1,Math.floor(ct.m()/ke.m())),dt=48>=(dt=Math.ceil(Math.log(Ze)/Math.LN2))?1:Math.pow(2,dt-48),Qe=(Ct=q(Ze)).j(ke);Jt(Qe)||0<Qe.l(ct);)Qe=(Ct=q(Ze-=dt)).j(ke);Lt(Ct)&&(Ct=Ge),ft=ft.add(Ct),ct=Bn(ct,Qe)}return new bn(ft,ct)}function xr(ct){for(var ke=ct.g.length+1,Ze=[],dt=0;dt<ke;dt++)Ze[dt]=ct.i(dt)<<1|ct.i(dt-1)>>>31;return new y(Ze,ct.h)}function wr(ct,ke){var Ze=ke>>5;ke%=32;for(var dt=ct.g.length-Ze,ft=[],Ct=0;Ct<dt;Ct++)ft[Ct]=0<ke?ct.i(Ct+Ze)>>>ke|ct.i(Ct+Ze+1)<<32-ke:ct.i(Ct+Ze);return new y(ft,ct.h)}(a=y.prototype).m=function(){if(Jt(this))return-Kt(this).m();for(var ct=0,ke=1,Ze=0;Ze<this.g.length;Ze++){var dt=this.i(Ze);ct+=(0<=dt?dt:4294967296+dt)*ke,ke*=4294967296}return ct},a.toString=function(ct){if(2>(ct=ct||10)||36<ct)throw Error("radix out of range: "+ct);if(Lt(this))return"0";if(Jt(this))return"-"+Kt(this).toString(ct);for(var ke=q(Math.pow(ct,6)),Ze=this,dt="";;){var ft=er(Ze,ke).g,Ct=((0<(Ze=Bn(Ze,ft.j(ke))).g.length?Ze.g[0]:Ze.h)>>>0).toString(ct);if(Lt(Ze=ft))return Ct+dt;for(;6>Ct.length;)Ct="0"+Ct;dt=Ct+dt}},a.i=function(ct){return 0>ct?0:ct<this.g.length?this.g[ct]:this.h},a.l=function(ct){return Jt(ct=Bn(this,ct))?-1:Lt(ct)?0:1},a.abs=function(){return Jt(this)?Kt(this):this},a.add=function(ct){for(var ke=Math.max(this.g.length,ct.g.length),Ze=[],dt=0,ft=0;ft<=ke;ft++){var Ct=dt+(65535&this.i(ft))+(65535&ct.i(ft)),Qe=(Ct>>>16)+(this.i(ft)>>>16)+(ct.i(ft)>>>16);dt=Qe>>>16,Ze[ft]=(Qe&=65535)<<16|(Ct&=65535)}return new y(Ze,-2147483648&Ze[Ze.length-1]?-1:0)},a.j=function(ct){if(Lt(this)||Lt(ct))return ye;if(Jt(this))return Jt(ct)?Kt(this).j(Kt(ct)):Kt(Kt(this).j(ct));if(Jt(ct))return Kt(this.j(Kt(ct)));if(0>this.l(bt)&&0>ct.l(bt))return q(this.m()*ct.m());for(var ke=this.g.length+ct.g.length,Ze=[],dt=0;dt<2*ke;dt++)Ze[dt]=0;for(dt=0;dt<this.g.length;dt++)for(var ft=0;ft<ct.g.length;ft++){var Ct=this.i(dt)>>>16,Qe=65535&this.i(dt),Bo=ct.i(ft)>>>16,oc=65535&ct.i(ft);Ze[2*dt+2*ft]+=Qe*oc,Jn(Ze,2*dt+2*ft),Ze[2*dt+2*ft+1]+=Ct*oc,Jn(Ze,2*dt+2*ft+1),Ze[2*dt+2*ft+1]+=Qe*Bo,Jn(Ze,2*dt+2*ft+1),Ze[2*dt+2*ft+2]+=Ct*Bo,Jn(Ze,2*dt+2*ft+2)}for(dt=0;dt<ke;dt++)Ze[dt]=Ze[2*dt+1]<<16|Ze[2*dt];for(dt=ke;dt<2*ke;dt++)Ze[dt]=0;return new y(Ze,0)},a.A=function(ct){return er(this,ct).h},a.and=function(ct){for(var ke=Math.max(this.g.length,ct.g.length),Ze=[],dt=0;dt<ke;dt++)Ze[dt]=this.i(dt)&ct.i(dt);return new y(Ze,this.h&ct.h)},a.or=function(ct){for(var ke=Math.max(this.g.length,ct.g.length),Ze=[],dt=0;dt<ke;dt++)Ze[dt]=this.i(dt)|ct.i(dt);return new y(Ze,this.h|ct.h)},a.xor=function(ct){for(var ke=Math.max(this.g.length,ct.g.length),Ze=[],dt=0;dt<ke;dt++)Ze[dt]=this.i(dt)^ct.i(dt);return new y(Ze,this.h^ct.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Tr=Pn.Md5=s,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.A,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=q,y.fromString=function ne(ct,ke){if(0==ct.length)throw Error("number format error: empty string");if(2>(ke=ke||10)||36<ke)throw Error("radix out of range: "+ke);if("-"==ct.charAt(0))return Kt(ne(ct.substring(1),ke));if(0<=ct.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ze=q(Math.pow(ke,8)),dt=ye,ft=0;ft<ct.length;ft+=8){var Ct=Math.min(8,ct.length-ft),Qe=parseInt(ct.substring(ft,ft+Ct),ke);8>Ct?(Ct=q(Math.pow(ke,Ct)),dt=dt.j(Ct).add(q(Qe))):dt=(dt=dt.j(Ze)).add(q(Qe))}return dt},Gn=Pn.Integer=y}).apply(typeof en<"u"?en:typeof self<"u"?self:typeof window<"u"?window:{});var Ar,Pt,ae,Me,qe,it,_t,Tt,On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yn={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(m,U,Q){return m==Array.prototype||m==Object.prototype||(m[U]=Q.value),m},s=function r(m){m=["object"==typeof globalThis&&globalThis,m,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof On&&On];for(var U=0;U<m.length;++U){var Q=m[U];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}(this);!function c(m,U){if(U)e:{var Q=s;m=m.split(".");for(var he=0;he<m.length-1;he++){var vt=m[he];if(!(vt in Q))break e;Q=Q[vt]}(U=U(he=Q[m=m[m.length-1]]))!=he&&null!=U&&e(Q,m,{configurable:!0,writable:!0,value:U})}}("Array.prototype.values",function(m){return m||function(){return function d(m,U){m instanceof String&&(m+="");var Q=0,he=!1,vt={next:function(){if(!he&&Q<m.length){var Nt=Q++;return{value:U(Nt,m[Nt]),done:!1}}return he=!0,{done:!0,value:void 0}}};return vt[Symbol.iterator]=function(){return vt},vt}(this,function(U,Q){return Q})}});var y=y||{},S=this||self;function F(m){var U=typeof m;return"array"==(U="object"!=U?U:m?Array.isArray(m)?"array":U:"null")||"object"==U&&"number"==typeof m.length}function q(m){var U=typeof m;return"object"==U&&null!=m||"function"==U}function ne(m,U,Q){return m.call.apply(m.bind,arguments)}function ye(m,U,Q){if(!m)throw Error();if(2<arguments.length){var he=Array.prototype.slice.call(arguments,2);return function(){var vt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(vt,he),m.apply(U,vt)}}return function(){return m.apply(U,arguments)}}function Ge(m,U,Q){return(Ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ne:ye).apply(null,arguments)}function bt(m,U){var Q=Array.prototype.slice.call(arguments,1);return function(){var he=Q.slice();return he.push.apply(he,arguments),m.apply(this,he)}}function Lt(m,U){function Q(){}Q.prototype=U.prototype,m.aa=U.prototype,m.prototype=new Q,m.prototype.constructor=m,m.Qb=function(he,vt,Nt){for(var An=Array(arguments.length-2),zi=2;zi<arguments.length;zi++)An[zi-2]=arguments[zi];return U.prototype[vt].apply(he,An)}}function Jt(m){const U=m.length;if(0<U){const Q=Array(U);for(let he=0;he<U;he++)Q[he]=m[he];return Q}return[]}function Kt(m,U){for(let Q=1;Q<arguments.length;Q++){const he=arguments[Q];if(F(he)){const vt=m.length||0,Nt=he.length||0;m.length=vt+Nt;for(let An=0;An<Nt;An++)m[vt+An]=he[An]}else m.push(he)}}function Jn(m){return/^[\s\xa0]*$/.test(m)}function bn(){var m=S.navigator;return m&&(m=m.userAgent)?m:""}function er(m){return er[" "](m),m}er[" "]=function(){};var xr=!(-1==bn().indexOf("Gecko")||-1!=bn().toLowerCase().indexOf("webkit")&&-1==bn().indexOf("Edge")||-1!=bn().indexOf("Trident")||-1!=bn().indexOf("MSIE")||-1!=bn().indexOf("Edge"));function wr(m,U,Q){for(const he in m)U.call(Q,m[he],he,m)}function ke(m){const U={};for(const Q in m)U[Q]=m[Q];return U}const Ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(m,U){let Q,he;for(let vt=1;vt<arguments.length;vt++){for(Q in he=arguments[vt],he)m[Q]=he[Q];for(let Nt=0;Nt<Ze.length;Nt++)Q=Ze[Nt],Object.prototype.hasOwnProperty.call(he,Q)&&(m[Q]=he[Q])}}function ft(m){var U=1;m=m.split(":");const Q=[];for(;0<U&&m.length;)Q.push(m.shift()),U--;return m.length&&Q.push(m.join(":")),Q}function Ct(m){S.setTimeout(()=>{throw m},0)}function Qe(){var m=Ml;let U=null;return m.g&&(U=m.g,m.g=m.g.next,m.g||(m.h=null),U.next=null),U}var oc=new class Bn{constructor(U,Q){this.i=U,this.j=Q,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}(()=>new Vd,m=>m.reset());class Vd{constructor(){this.next=this.g=this.h=null}set(U,Q){this.h=U,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let ac,cc=!1,Ml=new class Bo{constructor(){this.h=this.g=null}add(U,Q){const he=oc.get();he.set(U,Q),this.h?this.h.next=he:this.g=he,this.h=he}},Cu=()=>{const m=S.Promise.resolve(void 0);ac=()=>{m.then(Bd)}};var Bd=()=>{for(var m;m=Qe();){try{m.h.call(m.g)}catch(Q){Ct(Q)}var U=oc;U.j(m),100>U.h&&(U.h++,m.next=U.g,U.g=m)}cc=!1};function $c(){this.s=this.s,this.C=this.C}function fo(m,U){this.type=m,this.g=this.target=U,this.defaultPrevented=!1}$c.prototype.s=!1,$c.prototype.ma=function(){this.s||(this.s=!0,this.N())},$c.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},fo.prototype.h=function(){this.defaultPrevented=!0};var Ny=function(){if(!S.addEventListener||!Object.defineProperty)return!1;var m=!1,U=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const Q=()=>{};S.addEventListener("test",Q,U),S.removeEventListener("test",Q,U)}catch{}return m}();function Ud(m,U){if(fo.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var Q=this.type=m.type,he=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=U,U=m.relatedTarget){if(xr){e:{try{er(U.nodeName);var vt=!0;break e}catch{}vt=!1}vt||(U=null)}}else"mouseover"==Q?U=m.fromElement:"mouseout"==Q&&(U=m.toElement);this.relatedTarget=U,he?(this.clientX=void 0!==he.clientX?he.clientX:he.pageX,this.clientY=void 0!==he.clientY?he.clientY:he.pageY,this.screenX=he.screenX||0,this.screenY=he.screenY||0):(this.clientX=void 0!==m.clientX?m.clientX:m.pageX,this.clientY=void 0!==m.clientY?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType="string"==typeof m.pointerType?m.pointerType:ky[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ud.aa.h.call(this)}}Lt(Ud,fo);var ky={2:"touch",3:"pen",4:"mouse"};Ud.prototype.h=function(){Ud.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var jd="closure_listenable_"+(1e6*Math.random()|0),Fy=0;function Ly(m,U,Q,he,vt){this.listener=m,this.proxy=null,this.src=U,this.type=Q,this.capture=!!he,this.ha=vt,this.key=++Fy,this.da=this.fa=!1}function sf(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Hd(m){this.src=m,this.g={},this.h=0}function Sg(m,U){var Q=U.type;if(Q in m.g){var Nt,he=m.g[Q],vt=Array.prototype.indexOf.call(he,U,void 0);(Nt=0<=vt)&&Array.prototype.splice.call(he,vt,1),Nt&&(sf(U),0==m.g[Q].length&&(delete m.g[Q],m.h--))}}function Vy(m,U,Q,he){for(var vt=0;vt<m.length;++vt){var Nt=m[vt];if(!Nt.da&&Nt.listener==U&&Nt.capture==!!Q&&Nt.ha==he)return vt}return-1}Hd.prototype.add=function(m,U,Q,he,vt){var Nt=m.toString();(m=this.g[Nt])||(m=this.g[Nt]=[],this.h++);var An=Vy(m,U,he,vt);return-1<An?(U=m[An],Q||(U.fa=!1)):((U=new Ly(U,this.src,Nt,!!he,vt)).fa=Q,m.push(U)),U};var By="closure_lm_"+(1e6*Math.random()|0),Rg={};function Uy(m,U,Q,he,vt){if(he&&he.once)return Pb(m,U,Q,he,vt);if(Array.isArray(U)){for(var Nt=0;Nt<U.length;Nt++)Uy(m,U[Nt],Q,he,vt);return null}return Q=$d(Q),m&&m[jd]?m.K(U,Q,q(he)?!!he.capture:!!he,vt):xb(m,U,Q,!1,he,vt)}function xb(m,U,Q,he,vt,Nt){if(!U)throw Error("Invalid event type");var An=q(vt)?!!vt.capture:!!vt,zi=Du(m);if(zi||(m[By]=zi=new Hd(m)),(Q=zi.add(U,Q,he,An,Nt)).proxy)return Q;if(he=function Mb(){const U=Mg;return function m(Q){return U.call(m.src,m.listener,Q)}}(),Q.proxy=he,he.src=m,he.listener=Q,m.addEventListener)Ny||(vt=An),void 0===vt&&(vt=!1),m.addEventListener(U.toString(),he,vt);else if(m.attachEvent)m.attachEvent(Hy(U.toString()),he);else{if(!m.addListener||!m.removeListener)throw Error("addEventListener and attachEvent are unavailable.");m.addListener(he)}return Q}function Pb(m,U,Q,he,vt){if(Array.isArray(U)){for(var Nt=0;Nt<U.length;Nt++)Pb(m,U[Nt],Q,he,vt);return null}return Q=$d(Q),m&&m[jd]?m.L(U,Q,q(he)?!!he.capture:!!he,vt):xb(m,U,Q,!0,he,vt)}function jy(m,U,Q,he,vt){if(Array.isArray(U))for(var Nt=0;Nt<U.length;Nt++)jy(m,U[Nt],Q,he,vt);else he=q(he)?!!he.capture:!!he,Q=$d(Q),m&&m[jd]?(m=m.i,(U=String(U).toString())in m.g&&-1<(Q=Vy(Nt=m.g[U],Q,he,vt))&&(sf(Nt[Q]),Array.prototype.splice.call(Nt,Q,1),0==Nt.length&&(delete m.g[U],m.h--))):m&&(m=Du(m))&&(U=m.g[U.toString()],m=-1,U&&(m=Vy(U,Q,he,vt)),(Q=-1<m?U[m]:null)&&xg(Q))}function xg(m){if("number"!=typeof m&&m&&!m.da){var U=m.src;if(U&&U[jd])Sg(U.i,m);else{var Q=m.type,he=m.proxy;U.removeEventListener?U.removeEventListener(Q,he,m.capture):U.detachEvent?U.detachEvent(Hy(Q),he):U.addListener&&U.removeListener&&U.removeListener(he),(Q=Du(U))?(Sg(Q,m),0==Q.h&&(Q.src=null,U[By]=null)):sf(m)}}}function Hy(m){return m in Rg?Rg[m]:Rg[m]="on"+m}function Mg(m,U){if(m.da)m=!0;else{U=new Ud(U,this);var Q=m.listener,he=m.ha||m.src;m.fa&&xg(m),m=Q.call(he,U)}return m}function Du(m){return(m=m[By])instanceof Hd?m:null}var af="__closure_events_fn_"+(1e9*Math.random()>>>0);function $d(m){return"function"==typeof m?m:(m[af]||(m[af]=function(U){return m.handleEvent(U)}),m[af])}function po(){$c.call(this),this.i=new Hd(this),this.M=this,this.F=null}function Ys(m,U){var Q,he=m.F;if(he)for(Q=[];he;he=he.F)Q.push(he);if(m=m.M,he=U.type||U,"string"==typeof U)U=new fo(U,m);else if(U instanceof fo)U.target=U.target||m;else{var vt=U;dt(U=new fo(he,m),vt)}if(vt=!0,Q)for(var Nt=Q.length-1;0<=Nt;Nt--){var An=U.g=Q[Nt];vt=cf(An,he,!0,U)&&vt}if(vt=cf(An=U.g=m,he,!0,U)&&vt,vt=cf(An,he,!1,U)&&vt,Q)for(Nt=0;Nt<Q.length;Nt++)vt=cf(An=U.g=Q[Nt],he,!1,U)&&vt}function cf(m,U,Q,he){if(!(U=m.i.g[String(U)]))return!0;U=U.concat();for(var vt=!0,Nt=0;Nt<U.length;++Nt){var An=U[Nt];if(An&&!An.da&&An.capture==Q){var zi=An.listener,mo=An.ha||An.src;An.fa&&Sg(m.i,An),vt=!1!==zi.call(mo,he)&&vt}}return vt&&!he.defaultPrevented}function $y(m,U,Q){if("function"==typeof m)Q&&(m=Ge(m,Q));else{if(!m||"function"!=typeof m.handleEvent)throw Error("Invalid listener argument");m=Ge(m.handleEvent,m)}return 2147483647<Number(U)?-1:S.setTimeout(m,U||0)}function zd(m){m.g=$y(()=>{m.g=null,m.i&&(m.i=!1,zd(m))},m.l);const U=m.h;m.h=null,m.m.apply(null,U)}Lt(po,$c),po.prototype[jd]=!0,po.prototype.removeEventListener=function(m,U,Q,he){jy(this,m,U,Q,he)},po.prototype.N=function(){if(po.aa.N.call(this),this.i){var U,m=this.i;for(U in m.g){for(var Q=m.g[U],he=0;he<Q.length;he++)sf(Q[he]);delete m.g[U],m.h--}}this.F=null},po.prototype.K=function(m,U,Q,he){return this.i.add(String(m),U,!1,Q,he)},po.prototype.L=function(m,U,Q,he){return this.i.add(String(m),U,!0,Q,he)};class Ob extends $c{constructor(U,Q){super(),this.m=U,this.l=Q,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:zd(this)}N(){super.N(),this.g&&(S.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lf(m){$c.call(this),this.h=m,this.g={}}Lt(lf,$c);var zy=[];function Ky(m){wr(m.g,function(U,Q){this.g.hasOwnProperty(Q)&&xg(U)},m),m.g={}}lf.prototype.N=function(){lf.aa.N.call(this),Ky(this)},lf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uf=S.JSON.stringify,Bp=S.JSON.parse,Up=class{stringify(m){return S.JSON.stringify(m,void 0)}parse(m){return S.JSON.parse(m,void 0)}};function Wy(){}function qy(){}Wy.prototype.h=null;var Su={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pg(){fo.call(this,"d")}function jp(){fo.call(this,"c")}Lt(Pg,fo),Lt(jp,fo);var Ru={},Qy=null;function df(){return Qy=Qy||new po}function Og(m){fo.call(this,Ru.La,m)}function Kd(m){const U=df();Ys(U,new Og(U))}function Xy(m,U){fo.call(this,Ru.STAT_EVENT,m),this.stat=U}function Ro(m){const U=df();Ys(U,new Xy(U,m))}function Yy(m,U){fo.call(this,Ru.Ma,m),this.size=U}function Wd(m,U){if("function"!=typeof m)throw Error("Fn must not be null and must be a function");return S.setTimeout(function(){m()},U)}function xu(){this.g=!0}function zc(m,U,Q,he){m.info(function(){return"XMLHTTP TEXT ("+U+"): "+function kg(m,U){if(!m.g)return U;if(!U)return null;try{var Q=JSON.parse(U);if(Q)for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var he=Q[m];if(!(2>he.length)){var vt=he[1];if(Array.isArray(vt)&&!(1>vt.length)){var Nt=vt[0];if("noop"!=Nt&&"stop"!=Nt&&"close"!=Nt)for(var An=1;An<vt.length;An++)vt[An]=""}}}return uf(Q)}catch{return U}}(m,Q)+(he?" "+he:"")})}Ru.La="serverreachability",Lt(Og,fo),Ru.STAT_EVENT="statevent",Lt(Xy,fo),Ru.Ma="timingevent",Lt(Yy,fo),xu.prototype.xa=function(){this.g=!1},xu.prototype.info=function(){};var Fg,hf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function $p(){}function La(m,U,Q,he){this.j=m,this.i=U,this.l=Q,this.R=he||1,this.U=new lf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ff}function ff(){this.i=null,this.g="",this.h=!1}Lt($p,Wy),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},Fg=new $p;var zp={},Kp={};function Lg(m,U,Q){m.L=1,m.v=Gd(lc(U)),m.m=Q,m.P=!0,Jy(m,null)}function Jy(m,U){m.F=Date.now(),pf(m),m.A=lc(m.v);var Q=m.A,he=m.R;Array.isArray(he)||(he=[String(he)]),ov(Q.i,"t",he),m.C=0,Q=m.j.J,m.h=new ff,m.g=Yg(m.j,Q?U:null,!m.m),0<m.O&&(m.M=new Ob(Ge(m.Y,m,m.g),m.O)),U=m.U,Q=m.g,he=m.ca;var vt="readystatechange";Array.isArray(vt)||(vt&&(zy[0]=vt.toString()),vt=zy);for(var Nt=0;Nt<vt.length;Nt++){var An=Uy(Q,vt[Nt],he||U.handleEvent,!1,U.h||U);if(!An)break;U.g[An.key]=An}U=m.H?ke(m.H):{},m.m?(m.u||(m.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,U)):(m.u="GET",m.g.ea(m.A,m.u,null,U)),Kd(),function Ng(m,U,Q,he,vt,Nt){m.info(function(){if(m.g)if(Nt)for(var An="",zi=Nt.split("&"),mo=0;mo<zi.length;mo++){var Ii=zi[mo].split("=");if(1<Ii.length){var To=Ii[0];Ii=Ii[1];var Ao=To.split("_");An=2<=Ao.length&&"type"==Ao[1]?An+(To+"=")+Ii+"&":An+(To+"=redacted&")}}else An=null;else An=Nt;return"XMLHTTP REQ ("+he+") [attempt "+vt+"]: "+U+"\n"+Q+"\n"+An})}(m.i,m.u,m.A,m.l,m.R,m.m)}function Vg(m){return!!m.g&&"GET"==m.u&&2!=m.L&&m.j.Ca}function Bg(m,U){var Q=m.C,he=U.indexOf("\n",Q);return-1==he?Kp:(Q=Number(U.substring(Q,he)),isNaN(Q)?zp:(he+=1)+Q>U.length?Kp:(U=U.slice(he,he+Q),m.C=he+Q,U))}function pf(m){m.S=Date.now()+m.I,Wp(m,m.I)}function Wp(m,U){if(null!=m.B)throw Error("WatchDog timer not null");m.B=Wd(Ge(m.ba,m),U)}function Gp(m){m.B&&(S.clearTimeout(m.B),m.B=null)}function mf(m){0==m.j.G||m.J||hv(m.j,m)}function Pl(m){Gp(m);var U=m.M;U&&"function"==typeof U.ma&&U.ma(),m.M=null,Ky(m.U),m.g&&(U=m.g,m.g=null,U.abort(),U.ma())}function qp(m,U){try{var Q=m.j;if(0!=Q.G&&(Q.g==m||Qp(Q.h,m)))if(!m.K&&Qp(Q.h,m)&&3==Q.G){try{var he=Q.Da.g.parse(U)}catch{he=null}if(Array.isArray(he)&&3==he.length){var vt=he;if(0==vt[0]){e:if(!Q.u){if(Q.g){if(!(Q.g.F+3e3<m.F))break e;om(Q),nm(Q)}im(Q),Ro(18)}}else Q.za=vt[1],0<Q.za-Q.T&&37500>vt[2]&&Q.F&&0==Q.v&&!Q.C&&(Q.C=Wd(Ge(Q.Za,Q),6e3));if(1>=jg(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else uc(Q,11)}else if((m.K||Q.g==m)&&om(Q),!Jn(U))for(vt=Q.Da.g.parse(U),U=0;U<vt.length;U++){let Ii=vt[U];if(Q.T=Ii[0],Ii=Ii[1],2==Q.G)if("c"==Ii[0]){Q.K=Ii[1],Q.ia=Ii[2];const To=Ii[3];null!=To&&(Q.la=To,Q.j.info("VER="+Q.la));const Ao=Ii[4];null!=Ao&&(Q.Aa=Ao,Q.j.info("SVER="+Q.Aa));const Jd=Ii[5];null!=Jd&&"number"==typeof Jd&&0<Jd&&(Q.L=he=1.5*Jd,Q.j.info("backChannelRequestTimeoutMs_="+he)),he=Q;const ja=m.g;if(ja){const lm=ja.g?ja.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lm){var Nt=he.h;Nt.g||-1==lm.indexOf("spdy")&&-1==lm.indexOf("quic")&&-1==lm.indexOf("h2")||(Nt.j=Nt.l,Nt.g=new Set,Nt.h&&(Xp(Nt,Nt.h),Nt.h=null))}if(he.D){const t_=ja.g?ja.g.getResponseHeader("X-HTTP-Session-Id"):null;t_&&(he.ya=t_,Xi(he.I,he.D,t_))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-m.F,Q.j.info("Handshake RTT: "+Q.R+"ms"));var An=m;if((he=Q).qa=Xg(he,he.J?he.ia:null,he.W),An.K){Yp(he.h,An);var zi=An,mo=he.L;mo&&(zi.I=mo),zi.B&&(Gp(zi),pf(zi)),he.g=An}else dv(he);0<Q.i.length&&rm(Q)}else"stop"!=Ii[0]&&"close"!=Ii[0]||uc(Q,7);else 3==Q.G&&("stop"==Ii[0]||"close"==Ii[0]?"stop"==Ii[0]?uc(Q,7):Ou(Q):"noop"!=Ii[0]&&Q.l&&Q.l.ta(Ii),Q.v=0)}Kd()}catch{}}function Ug(m){this.l=m||10,m=S.PerformanceNavigationTiming?0<(m=S.performance.getEntriesByType("navigation")).length&&("hq"==m[0].nextHopProtocol||"h2"==m[0].nextHopProtocol):!!(S.chrome&&S.chrome.loadTimes&&S.chrome.loadTimes()&&S.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tv(m){return!!m.h||!!m.g&&m.g.size>=m.j}function jg(m){return m.h?1:m.g?m.g.size:0}function Qp(m,U){return m.h?m.h==U:!!m.g&&m.g.has(U)}function Xp(m,U){m.g?m.g.add(U):m.h=U}function Yp(m,U){m.h&&m.h==U?m.h=null:m.g&&m.g.has(U)&&m.g.delete(U)}function Hg(m){if(null!=m.h)return m.i.concat(m.h.D);if(null!=m.g&&0!==m.g.size){let U=m.i;for(const Q of m.g.values())U=U.concat(Q.D);return U}return Jt(m.i)}function $g(m,U){if(m.forEach&&"function"==typeof m.forEach)m.forEach(U,void 0);else if(F(m)||"string"==typeof m)Array.prototype.forEach.call(m,U,void 0);else for(var Q=function rv(m){if(m.na&&"function"==typeof m.na)return m.na();if(!m.V||"function"!=typeof m.V){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(F(m)||"string"==typeof m){var U=[];m=m.length;for(var Q=0;Q<m;Q++)U.push(Q);return U}U=[],Q=0;for(const he in m)U[Q++]=he;return U}}}(m),he=function nv(m){if(m.V&&"function"==typeof m.V)return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if("string"==typeof m)return m.split("");if(F(m)){for(var U=[],Q=m.length,he=0;he<Q;he++)U.push(m[he]);return U}for(he in U=[],Q=0,m)U[Q++]=m[he];return U}(m),vt=he.length,Nt=0;Nt<vt;Nt++)U.call(void 0,he[Nt],Q&&Q[Nt],m)}La.prototype.ca=function(m){m=m.target;const U=this.M;U&&3==Wc(m)?U.j():this.Y(m)},La.prototype.Y=function(m){try{if(m==this.g)e:{const Ao=Wc(this.g);var U=this.g.Ba();if(this.g.Z(),!(3>Ao)&&(3!=Ao||this.g&&(this.h.h||this.g.oa()||uv(this.g)))){this.J||4!=Ao||7==U||Kd(),Gp(this);var Q=this.g.Z();this.X=Q;t:if(Vg(this)){var he=uv(this.g);m="";var vt=he.length,Nt=4==Wc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pl(this),mf(this);var An="";break t}this.h.i=new S.TextDecoder}for(U=0;U<vt;U++)this.h.h=!0,m+=this.h.i.decode(he[U],{stream:!(Nt&&U==vt-1)});he.length=0,this.h.g+=m,this.C=0,An=this.h.g}else An=this.g.oa();if(this.o=200==Q,function Nb(m,U,Q,he,vt,Nt,An){m.info(function(){return"XMLHTTP RESP ("+he+") [ attempt "+vt+"]: "+U+"\n"+Q+"\n"+Nt+" "+An})}(this.i,this.u,this.A,this.l,this.R,Ao,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var zi,mo=this.g;if((zi=mo.g?mo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jn(zi)){var Ii=zi;break t}}Ii=null}if(!(Q=Ii)){this.o=!1,this.s=3,Ro(12),Pl(this),mf(this);break e}zc(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qp(this,Q)}if(this.P){let ja;for(Q=!0;!this.J&&this.C<An.length;){if(ja=Bg(this,An),ja==Kp){4==Ao&&(this.s=4,Ro(14),Q=!1),zc(this.i,this.l,null,"[Incomplete Response]");break}if(ja==zp){this.s=4,Ro(15),zc(this.i,this.l,An,"[Invalid Chunk]"),Q=!1;break}zc(this.i,this.l,ja,null),qp(this,ja)}if(Vg(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ao||0!=An.length||this.h.h||(this.s=1,Ro(16),Q=!1),this.o=this.o&&Q,Q){if(0<An.length&&!this.W){this.W=!0;var To=this.j;To.g==this&&To.ba&&!To.M&&(To.j.info("Great, no buffering proxy detected. Bytes received: "+An.length),sm(To),To.M=!0,Ro(11))}}else zc(this.i,this.l,An,"[Invalid Chunked Response]"),Pl(this),mf(this)}else zc(this.i,this.l,An,null),qp(this,An);4==Ao&&Pl(this),this.o&&!this.J&&(4==Ao?hv(this.j,this):(this.o=!1,pf(this)))}else(function Hb(m){const U={};m=(m.g&&2<=Wc(m)&&m.g.getAllResponseHeaders()||"").split("\r\n");for(let he=0;he<m.length;he++){if(Jn(m[he]))continue;var Q=ft(m[he]);const vt=Q[0];if("string"!=typeof(Q=Q[1]))continue;Q=Q.trim();const Nt=U[vt]||[];U[vt]=Nt,Nt.push(Q)}!function ct(m,U){for(const Q in m)U.call(void 0,m[Q],Q,m)}(U,function(he){return he.join(", ")})})(this.g),400==Q&&0<An.indexOf("Unknown SID")?(this.s=3,Ro(12)):(this.s=0,Ro(13)),Pl(this),mf(this)}}}catch{}},La.prototype.cancel=function(){this.J=!0,Pl(this)},La.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(function Hp(m,U){m.info(function(){return"TIMEOUT: "+U})}(this.i,this.A),2!=this.L&&(Kd(),Ro(17)),Pl(this),this.s=2,mf(this)):Wp(this,this.S-m)},Ug.prototype.cancel=function(){if(this.i=Hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const m of this.g.values())m.cancel();this.g.clear()}};var zg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ol(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ol){this.h=m.h,Mu(this,m.j),this.o=m.o,this.g=m.g,Va(this,m.s),this.l=m.l;var U=m.i,Q=new qd;Q.i=U.i,U.g&&(Q.g=new Map(U.g),Q.h=U.h),sv(this,Q),this.m=m.m}else m&&(U=String(m).match(zg))?(this.h=!1,Mu(this,U[1]||"",!0),this.o=Ba(U[2]||""),this.g=Ba(U[3]||"",!0),Va(this,U[4]),this.l=Ba(U[5]||"",!0),sv(this,U[6]||"",!0),this.m=Ba(U[7]||"")):(this.h=!1,this.i=new qd(null,this.h))}function lc(m){return new Ol(m)}function Mu(m,U,Q){m.j=Q?Ba(U,!0):U,m.j&&(m.j=m.j.replace(/:$/,""))}function Va(m,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);m.s=U}else m.s=null}function sv(m,U,Q){U instanceof qd?(m.i=U,function av(m,U){U&&!m.j&&(Nl(m),m.i=null,m.g.forEach(function(Q,he){var vt=he.toLowerCase();he!=vt&&(js(this,he),ov(this,vt,Q))},m)),m.j=U}(m.i,m.h)):(Q||(U=Pu(U,Fb)),m.i=new qd(U,m.h))}function Xi(m,U,Q){m.i.set(U,Q)}function Gd(m){return Xi(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ba(m,U){return m?U?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Pu(m,U,Q){return"string"==typeof m?(m=encodeURI(m).replace(U,kb),Q&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function kb(m){return"%"+((m=m.charCodeAt(0))>>4&15).toString(16)+(15&m).toString(16)}Ol.prototype.toString=function(){var m=[],U=this.j;U&&m.push(Pu(U,Zp,!0),":");var Q=this.g;return(Q||"file"==U)&&(m.push("//"),(U=this.o)&&m.push(Pu(U,Zp,!0),"@"),m.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(Q=this.s)&&m.push(":",String(Q))),(Q=this.l)&&(this.g&&"/"!=Q.charAt(0)&&m.push("/"),m.push(Pu(Q,"/"==Q.charAt(0)?WE:KE,!0))),(Q=this.i.toString())&&m.push("?",Q),(Q=this.m)&&m.push("#",Pu(Q,Lb)),m.join("")};var m,Zp=/[#\/\?@]/g,KE=/[#\?:]/g,WE=/[#\?]/g,Fb=/[#\?@]/g,Lb=/#/g;function qd(m,U){this.h=this.g=null,this.i=m||null,this.j=!!U}function Nl(m){m.g||(m.g=new Map,m.h=0,m.i&&function iv(m,U){if(m){m=m.split("&");for(var Q=0;Q<m.length;Q++){var he=m[Q].indexOf("="),vt=null;if(0<=he){var Nt=m[Q].substring(0,he);vt=m[Q].substring(he+1)}else Nt=m[Q];U(Nt,vt?decodeURIComponent(vt.replace(/\+/g," ")):"")}}}(m.i,function(U,Q){m.add(decodeURIComponent(U.replace(/\+/g," ")),Q)}))}function js(m,U){Nl(m),U=Qd(m,U),m.g.has(U)&&(m.i=null,m.h-=m.g.get(U).length,m.g.delete(U))}function Kg(m,U){return Nl(m),U=Qd(m,U),m.g.has(U)}function ov(m,U,Q){js(m,U),0<Q.length&&(m.i=null,m.g.set(Qd(m,U),Jt(Q)),m.h+=Q.length)}function Qd(m,U){return U=String(U),m.j&&(U=U.toLowerCase()),U}function Kc(m,U,Q,he,vt){try{vt&&(vt.onload=null,vt.onerror=null,vt.onabort=null,vt.ontimeout=null),he(Q)}catch{}}function Xd(){this.g=new Up}function Bb(m,U,Q){const he=Q||"";try{$g(m,function(vt,Nt){let An=vt;q(vt)&&(An=uf(vt)),U.push(he+Nt+"="+encodeURIComponent(An))})}catch(vt){throw U.push(he+"type="+encodeURIComponent("_badmap")),vt}}function gf(m){this.l=m.Ub||null,this.j=m.eb||!1}function _f(m,U){po.call(this),this.D=m,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function lv(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}function Yd(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Jp(m)}function Jp(m){m.onreadystatechange&&m.onreadystatechange.call(m)}function em(m){let U="";return wr(m,function(Q,he){U+=he,U+=":",U+=Q,U+="\r\n"}),U}function yf(m,U,Q){e:{for(he in Q){var he=!1;break e}he=!0}he||(Q=em(Q),"string"==typeof m?null!=Q&&encodeURIComponent(String(Q)):Xi(m,U,Q))}function Si(m){po.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=qd.prototype).add=function(m,U){Nl(this),this.i=null,m=Qd(this,m);var Q=this.g.get(m);return Q||this.g.set(m,Q=[]),Q.push(U),this.h+=1,this},a.forEach=function(m,U){Nl(this),this.g.forEach(function(Q,he){Q.forEach(function(vt){m.call(U,vt,he,this)},this)},this)},a.na=function(){Nl(this);const m=Array.from(this.g.values()),U=Array.from(this.g.keys()),Q=[];for(let he=0;he<U.length;he++){const vt=m[he];for(let Nt=0;Nt<vt.length;Nt++)Q.push(U[he])}return Q},a.V=function(m){Nl(this);let U=[];if("string"==typeof m)Kg(this,m)&&(U=U.concat(this.g.get(Qd(this,m))));else{m=Array.from(this.g.values());for(let Q=0;Q<m.length;Q++)U=U.concat(m[Q])}return U},a.set=function(m,U){return Nl(this),this.i=null,Kg(this,m=Qd(this,m))&&(this.h-=this.g.get(m).length),this.g.set(m,[U]),this.h+=1,this},a.get=function(m,U){return m&&0<(m=this.V(m)).length?String(m[0]):U},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],U=Array.from(this.g.keys());for(var Q=0;Q<U.length;Q++){var he=U[Q];const Nt=encodeURIComponent(String(he)),An=this.V(he);for(he=0;he<An.length;he++){var vt=Nt;""!==An[he]&&(vt+="="+encodeURIComponent(String(An[he]))),m.push(vt)}}return this.i=m.join("&")},Lt(gf,Wy),gf.prototype.g=function(){return new _f(this.l,this.j)},gf.prototype.i=(m={},function(){return m}),Lt(_f,po),(a=_f.prototype).open=function(m,U){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=U,this.readyState=1,Jp(this)},a.send=function(m){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(U.body=m),(this.D||S).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yd(this)),this.readyState=0},a.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Jp(this)),this.g&&(this.readyState=3,Jp(this),this.g)))if("arraybuffer"===this.responseType)m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof S.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lv(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var U=m.value?m.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!m.done}))&&(this.response=this.responseText+=U)}m.done?Yd(this):Jp(this),3==this.readyState&&lv(this)}},a.Ra=function(m){this.g&&(this.response=this.responseText=m,Yd(this))},a.Qa=function(m){this.g&&(this.response=m,Yd(this))},a.ga=function(){this.g&&Yd(this)},a.setRequestHeader=function(m,U){this.u.append(m,U)},a.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],U=this.h.entries();for(var Q=U.next();!Q.done;)m.push((Q=Q.value)[0]+": "+Q[1]),Q=U.next();return m.join("\r\n")},Object.defineProperty(_f.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(m){this.m=m?"include":"same-origin"}}),Lt(Si,po);var Ub=/^https?$/i,jb=["POST","PUT"];function Ua(m,U){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=U,m.m=5,ua(m),vf(m)}function ua(m){m.A||(m.A=!0,Ys(m,"complete"),Ys(m,"error"))}function da(m){if(m.h&&typeof y<"u"&&(!m.v[1]||4!=Wc(m)||2!=m.Z()))if(m.u&&4==Wc(m))$y(m.Ea,0,m);else if(Ys(m,"readystatechange"),4==Wc(m)){m.h=!1;try{const An=m.Z();e:switch(An){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var Q;if(!(Q=U)){var he;if(he=0===An){var vt=String(m.D).match(zg)[1]||null;!vt&&S.self&&S.self.location&&(vt=S.self.location.protocol.slice(0,-1)),he=!Ub.test(vt?vt.toLowerCase():"")}Q=he}if(Q)Ys(m,"complete"),Ys(m,"success");else{m.m=6;try{var Nt=2<Wc(m)?m.g.statusText:""}catch{Nt=""}m.l=Nt+" ["+m.Z()+"]",ua(m)}}finally{vf(m)}}}function vf(m,U){if(m.g){Wg(m);const Q=m.g,he=m.v[0]?()=>{}:null;m.g=null,m.v=null,U||Ys(m,"ready");try{Q.onreadystatechange=he}catch{}}}function Wg(m){m.I&&(S.clearTimeout(m.I),m.I=null)}function Wc(m){return m.g?m.g.readyState:0}function uv(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function bf(m,U,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[m]||U}function tm(m){this.Aa=0,this.i=[],this.j=new xu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bf("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bf("baseRetryDelayMs",5e3,m),this.cb=bf("retryDelaySeedMs",1e4,m),this.Wa=bf("forwardChannelMaxRetries",2,m),this.wa=bf("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ug(m&&m.concurrentRequestLimit),this.Da=new Xd,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ou(m){if(Gg(m),3==m.G){var U=m.U++,Q=lc(m.I);if(Xi(Q,"SID",m.K),Xi(Q,"RID",U),Xi(Q,"TYPE","terminate"),Zd(m,Q),(U=new La(m,m.j,U)).L=2,U.v=Gd(lc(Q)),Q=!1,S.navigator&&S.navigator.sendBeacon)try{Q=S.navigator.sendBeacon(U.v.toString(),"")}catch{}!Q&&S.Image&&((new Image).src=U.v,Q=!0),Q||(U.g=Yg(U.j,null),U.g.ea(U.v)),U.F=Date.now(),pf(U)}cm(m)}function nm(m){m.g&&(sm(m),m.g.cancel(),m.g=null)}function Gg(m){nm(m),m.u&&(S.clearTimeout(m.u),m.u=null),om(m),m.h.cancel(),m.s&&("number"==typeof m.s&&S.clearTimeout(m.s),m.s=null)}function rm(m){if(!tv(m.h)&&!m.s){m.s=!0;var U=m.Ga;ac||Cu(),cc||(ac(),cc=!0),Ml.add(U,m),m.B=0}}function qg(m,U){var Q;Q=U?U.l:m.U++;const he=lc(m.I);Xi(he,"SID",m.K),Xi(he,"RID",Q),Xi(he,"AID",m.T),Zd(m,he),m.m&&m.o&&yf(he,m.m,m.o),Q=new La(m,m.j,Q,m.B+1),null===m.m&&(Q.H=m.o),U&&(m.i=U.D.concat(m.i)),U=Ef(m,Q,1e3),Q.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Xp(m.h,Q),Lg(Q,he,U)}function Zd(m,U){m.H&&wr(m.H,function(Q,he){Xi(U,he,Q)}),m.l&&$g({},function(Q,he){Xi(U,he,Q)})}function Ef(m,U,Q){Q=Math.min(m.i.length,Q);var he=m.l?Ge(m.l.Na,m.l,m):null;e:{var vt=m.i;let Nt=-1;for(;;){const An=["count="+Q];-1==Nt?0<Q?(Nt=vt[0].g,An.push("ofs="+Nt)):Nt=0:An.push("ofs="+Nt);let zi=!0;for(let mo=0;mo<Q;mo++){let Ii=vt[mo].g;const To=vt[mo].map;if(Ii-=Nt,0>Ii)Nt=Math.max(0,vt[mo].g-100),zi=!1;else try{Bb(To,An,"req"+Ii+"_")}catch{he&&he(To)}}if(zi){he=An.join("&");break e}}}return m=m.i.splice(0,Q),U.D=m,he}function dv(m){if(!m.g&&!m.u){m.Y=1;var U=m.Fa;ac||Cu(),cc||(ac(),cc=!0),Ml.add(U,m),m.v=0}}function im(m){return!(m.g||m.u||3<=m.v||(m.Y++,m.u=Wd(Ge(m.Fa,m),am(m,m.v)),m.v++,0))}function sm(m){null!=m.A&&(S.clearTimeout(m.A),m.A=null)}function Qg(m){m.g=new La(m,m.j,"rpc",m.Y),null===m.m&&(m.g.H=m.o),m.g.O=0;var U=lc(m.qa);Xi(U,"RID","rpc"),Xi(U,"SID",m.K),Xi(U,"AID",m.T),Xi(U,"CI",m.F?"0":"1"),!m.F&&m.ja&&Xi(U,"TO",m.ja),Xi(U,"TYPE","xmlhttp"),Zd(m,U),m.m&&m.o&&yf(U,m.m,m.o),m.L&&(m.g.I=m.L);var Q=m.g;m=m.ia,Q.L=1,Q.v=Gd(lc(U)),Q.m=null,Q.P=!0,Jy(Q,m)}function om(m){null!=m.C&&(S.clearTimeout(m.C),m.C=null)}function hv(m,U){var Q=null;if(m.g==U){om(m),sm(m),m.g=null;var he=2}else{if(!Qp(m.h,U))return;Q=U.D,Yp(m.h,U),he=1}if(0!=m.G)if(U.o)if(1==he){Q=U.m?U.m.length:0,U=Date.now()-U.F;var vt=m.B;Ys(he=df(),new Yy(he,Q)),rm(m)}else dv(m);else if(3==(vt=U.s)||0==vt&&0<U.X||!(1==he&&function $b(m,U){return!(jg(m.h)>=m.h.j-(m.s?1:0)||(m.s?(m.i=U.D.concat(m.i),0):1==m.G||2==m.G||m.B>=(m.Va?0:m.Wa)||(m.s=Wd(Ge(m.Ga,m,U),am(m,m.B)),m.B++,0)))}(m,U)||2==he&&im(m)))switch(Q&&0<Q.length&&(U=m.h,U.i=U.i.concat(Q)),vt){case 1:uc(m,5);break;case 4:uc(m,10);break;case 3:uc(m,6);break;default:uc(m,2)}}function am(m,U){let Q=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(Q*=2),Q*U}function uc(m,U){if(m.j.info("Error code "+U),2==U){var Q=Ge(m.fb,m),he=m.Xa;const vt=!he;he=new Ol(he||"//www.google.com/images/cleardot.gif"),S.location&&"http"==S.location.protocol||Mu(he,"https"),Gd(he),vt?function Vb(m,U){const Q=new xu;if(S.Image){const he=new Image;he.onload=bt(Kc,Q,"TestLoadImage: loaded",!0,U,he),he.onerror=bt(Kc,Q,"TestLoadImage: error",!1,U,he),he.onabort=bt(Kc,Q,"TestLoadImage: abort",!1,U,he),he.ontimeout=bt(Kc,Q,"TestLoadImage: timeout",!1,U,he),S.setTimeout(function(){he.ontimeout&&he.ontimeout()},1e4),he.src=m}else U(!1)}(he.toString(),Q):function cv(m,U){new xu;const he=new AbortController,vt=setTimeout(()=>{he.abort(),Kc(0,0,!1,U)},1e4);fetch(m,{signal:he.signal}).then(Nt=>{clearTimeout(vt),Kc(0,0,!!Nt.ok,U)}).catch(()=>{clearTimeout(vt),Kc(0,0,!1,U)})}(he.toString(),Q)}else Ro(2);m.G=0,m.l&&m.l.sa(U),cm(m),Gg(m)}function cm(m){if(m.G=0,m.ka=[],m.l){const U=Hg(m.h);(0!=U.length||0!=m.i.length)&&(Kt(m.ka,U),Kt(m.ka,m.i),m.h.i.length=0,Jt(m.i),m.i.length=0),m.l.ra()}}function Xg(m,U,Q){var he=Q instanceof Ol?lc(Q):new Ol(Q);if(""!=he.g)U&&(he.g=U+"."+he.g),Va(he,he.s);else{var vt=S.location;he=vt.protocol,U=U?U+"."+vt.hostname:vt.hostname,vt=+vt.port;var Nt=new Ol(null);he&&Mu(Nt,he),U&&(Nt.g=U),vt&&Va(Nt,vt),Q&&(Nt.l=Q),he=Nt}return U=m.ya,(Q=m.D)&&U&&Xi(he,Q,U),Xi(he,"VER",m.la),Zd(m,he),he}function Yg(m,U,Q){if(U&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return(U=new Si(m.Ca&&!m.pa?new gf({eb:Q}):m.pa)).Ha(m.J),U}function Zg(){}function If(){}function Uo(m,U){po.call(this),this.g=new tm(U),this.l=m,this.h=U&&U.messageUrlParams||null,m=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(m?m["X-WebChannel-Content-Type"]=U.messageContentType:m={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(m?m["X-WebChannel-Client-Profile"]=U.va:m={"X-WebChannel-Client-Profile":U.va}),this.g.S=m,(m=U&&U.Sb)&&!Jn(m)&&(this.g.m=m),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!Jn(U)&&(this.g.D=U,null!==(m=this.h)&&U in m&&U in(m=this.h)&&delete m[U]),this.j=new Nu(this)}function Jg(m){Pg.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var U=m.__sm__;if(U){e:{for(const Q in U){m=Q;break e}m=void 0}(this.i=m)&&(m=this.i,U=null!==U&&m in U?U[m]:void 0),this.data=U}else this.data=m}function e_(){jp.call(this),this.status=1}function Nu(m){this.g=m}(a=Si.prototype).Ha=function(m){this.J=m},a.ea=function(m,U,Q,he){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);U=U?U.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fg.g(),this.v=function Gy(m){return m.h||(m.h=m.i())}(this.o?this.o:Fg),this.g.onreadystatechange=Ge(this.Ea,this);try{this.B=!0,this.g.open(U,String(m),!0),this.B=!1}catch(Nt){return void Ua(this,Nt)}if(m=Q||"",Q=new Map(this.headers),he)if(Object.getPrototypeOf(he)===Object.prototype)for(var vt in he)Q.set(vt,he[vt]);else{if("function"!=typeof he.keys||"function"!=typeof he.get)throw Error("Unknown input type for opt_headers: "+String(he));for(const Nt of he.keys())Q.set(Nt,he.get(Nt))}he=Array.from(Q.keys()).find(Nt=>"content-type"==Nt.toLowerCase()),vt=S.FormData&&m instanceof S.FormData,!(0<=Array.prototype.indexOf.call(jb,U,void 0))||he||vt||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Nt,An]of Q)this.g.setRequestHeader(Nt,An);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wg(this),this.u=!0,this.g.send(m),this.u=!1}catch(Nt){Ua(this,Nt)}},a.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ys(this,"complete"),Ys(this,"abort"),vf(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vf(this,!0)),Si.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},a.bb=function(){da(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Wc(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(m){if(this.g){var U=this.g.responseText;return m&&0==U.indexOf(m)&&(U=U.substring(m.length)),Bp(U)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=tm.prototype).la=8,a.G=1,a.connect=function(m,U,Q,he){Ro(0),this.W=m,this.H=U||{},Q&&void 0!==he&&(this.H.OSID=Q,this.H.OAID=he),this.F=this.X,this.I=Xg(this,null,this.W),rm(this)},a.Ga=function(m){if(this.s)if(this.s=null,1==this.G){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const vt=new La(this,this.j,m);let Nt=this.o;if(this.S&&(Nt?(Nt=ke(Nt),dt(Nt,this.S)):Nt=this.S),null!==this.m||this.O||(vt.H=Nt,Nt=null),this.P)e:{for(var U=0,Q=0;Q<this.i.length;Q++){var he=this.i[Q];if(void 0===(he="__data__"in he.map&&"string"==typeof(he=he.map.__data__)?he.length:void 0))break;if(4096<(U+=he)){U=Q;break e}if(4096===U||Q===this.i.length-1){U=Q+1;break e}}U=1e3}else U=1e3;U=Ef(this,vt,U),Xi(Q=lc(this.I),"RID",m),Xi(Q,"CVER",22),this.D&&Xi(Q,"X-HTTP-Session-Id",this.D),Zd(this,Q),Nt&&(this.O?U="headers="+encodeURIComponent(String(em(Nt)))+"&"+U:this.m&&yf(Q,this.m,Nt)),Xp(this.h,vt),this.Ua&&Xi(Q,"TYPE","init"),this.P?(Xi(Q,"$req",U),Xi(Q,"SID","null"),vt.T=!0,Lg(vt,Q,null)):Lg(vt,Q,U),this.G=2}}else 3==this.G&&(m?qg(this,m):0==this.i.length||tv(this.h)||qg(this))},a.Fa=function(){if(this.u=null,Qg(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Wd(Ge(this.ab,this),m)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ro(10),nm(this),Qg(this))},a.Za=function(){null!=this.C&&(this.C=null,nm(this),im(this),Ro(19))},a.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ro(2)):(this.j.info("Failed to ping google.com"),Ro(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=Zg.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},If.prototype.g=function(m,U){return new Uo(m,U)},Lt(Uo,po),Uo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Uo.prototype.close=function(){Ou(this.g)},Uo.prototype.o=function(m){var U=this.g;if("string"==typeof m){var Q={};Q.__data__=m,m=Q}else this.u&&((Q={}).__data__=uf(m),m=Q);U.i.push(new class{constructor(m,U){this.g=m,this.map=U}}(U.Ya++,m)),3==U.G&&rm(U)},Uo.prototype.N=function(){this.g.l=null,delete this.j,Ou(this.g),delete this.g,Uo.aa.N.call(this)},Lt(Jg,Pg),Lt(e_,jp),Lt(Nu,Zg),Nu.prototype.ua=function(){Ys(this.g,"a")},Nu.prototype.ta=function(m){Ys(this.g,new Jg(m))},Nu.prototype.sa=function(m){Ys(this.g,new e_)},Nu.prototype.ra=function(){Ys(this.g,"b")},If.prototype.createWebChannel=If.prototype.g,Uo.prototype.send=Uo.prototype.o,Uo.prototype.open=Uo.prototype.m,Uo.prototype.close=Uo.prototype.close,Tt=Yn.createWebChannelTransport=function(){return new If},_t=Yn.getStatEventTarget=function(){return df()},it=Yn.Event=Ru,qe=Yn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hf.NO_ERROR=0,hf.TIMEOUT=8,hf.HTTP_ERROR=6,Me=Yn.ErrorCode=hf,Zy.COMPLETE="complete",ae=Yn.EventType=Zy,qy.EventType=Su,Su.OPEN="a",Su.CLOSE="b",Su.ERROR="c",Su.MESSAGE="d",po.prototype.listen=po.prototype.K,Pt=Yn.WebChannel=qy,Yn.FetchXmlHttpFactory=gf,Si.prototype.listenOnce=Si.prototype.L,Si.prototype.getLastError=Si.prototype.Ka,Si.prototype.getLastErrorCode=Si.prototype.Ba,Si.prototype.getStatus=Si.prototype.Z,Si.prototype.getResponseJson=Si.prototype.Oa,Si.prototype.getResponseText=Si.prototype.oa,Si.prototype.send=Si.prototype.ea,Si.prototype.setWithCredentials=Si.prototype.Ha,Ar=Yn.XhrIo=Si}).apply(typeof On<"u"?On:typeof self<"u"?self:typeof window<"u"?window:{});const on="@firebase/firestore";class En{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");let Tn="10.14.0";const Zt=new zn.Vy("@firebase/firestore");function Ln(){return Zt.logLevel}function et(a,...e){if(Zt.logLevel<=zn.$b.DEBUG){const r=e.map(ri);Zt.debug(`Firestore (${Tn}): ${a}`,...r)}}function xn(a,...e){if(Zt.logLevel<=zn.$b.ERROR){const r=e.map(ri);Zt.error(`Firestore (${Tn}): ${a}`,...r)}}function _n(a,...e){if(Zt.logLevel<=zn.$b.WARN){const r=e.map(ri);Zt.warn(`Firestore (${Tn}): ${a}`,...r)}}function ri(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function $t(a="Unexpected state"){const e=`FIRESTORE (${Tn}) INTERNAL ASSERTION FAILED: `+a;throw xn(e),new Error(e)}function rn(a,e){a||$t()}function Fe(a,e){return a}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends dn.g{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kt{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class sn{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(En.UNAUTHENTICATED))}shutdown(){}}class ar{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class hr{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;rn(void 0===this.o);let c=this.i;const d=q=>this.i!==c?(c=this.i,r(q)):Promise.resolve();let y=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new kt,e.enqueueRetryable(()=>d(this.currentUser))};const S=()=>{const q=y;e.enqueueRetryable((0,Ee.A)(function*(){yield q.promise,yield d(s.currentUser)}))},F=q=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.o&&(this.auth.addAuthTokenListener(this.o),S())};this.t.onInit(q=>F(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?F(q):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new kt)}},0),S()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rn("string"==typeof s.accessToken),new sn(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(null===e||"string"==typeof e),new En(e)}}class At{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fe{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new At(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){rn(void 0===this.o);const s=d=>{null!=d.error&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const y=d.token!==this.R;return this.R=d.token,et("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?r(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const c=d=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>c(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?c(d):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(rn("string"==typeof r.token),this.R=r.token,new O(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _e(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class Ae{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const c=_e(40);for(let d=0;d<c.length;++d)s.length<20&&c[d]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c[d]%62))}return s}}function ue(a,e){return a<e?-1:a>e?1:0}function me(a,e,r){return a.length===e.length&&a.every((s,c)=>r(s,e[c]))}function le(a){return a+"\0"}class be{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Re(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Re(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Re(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return be.fromMillis(Date.now())}static fromDate(e){return be.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new be(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new je(e)}static min(){return new je(new be(0,0))}static max(){return new je(new be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bt{constructor(e,r,s){void 0===r?r=0:r>e.length&&$t(),void 0===s?s=e.length-r:s>e.length-r&&$t(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===Bt.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Bt?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let c=0;c<s;c++){const d=e.get(c),y=r.get(c);if(d<y)return-1;if(d>y)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class pe extends Bt{construct(e,r,s){return new pe(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new Re(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(c=>c.length>0))}return new pe(r)}static emptyPath(){return new pe([])}}const Ie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Se extends Bt{construct(e,r,s){return new Se(e,r,s)}static isValidIdentifier(e){return Ie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Se(["__name__"])}static fromServerFormat(e){const r=[];let s="",c=0;const d=()=>{if(0===s.length)throw new Re(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let y=!1;for(;c<e.length;){const S=e[c];if("\\"===S){if(c+1===e.length)throw new Re(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[c+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new Re(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=F,c+=2}else"`"===S?(y=!y,c++):"."!==S||y?(s+=S,c++):(d(),c++)}if(d(),y)throw new Re(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Se(r)}static emptyPath(){return new Se([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(pe.fromString(e))}static fromName(e){return new Ke(pe.fromString(e).popFirst(5))}static empty(){return new Ke(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pe.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return pe.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new pe(e.slice()))}}class jt{constructor(e,r,s,c){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=c}}function an(a){return a.fields.find(e=>2===e.kind)}function Qt(a){return a.fields.filter(e=>2!==e.kind)}jt.UNKNOWN_ID=-1;class tn{constructor(e,r){this.fieldPath=e,this.kind=r}}class gt{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new gt(0,zt.min())}}function rt(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,c=je.fromTimestamp(1e9===s?new be(r+1,0):new be(r,s));return new zt(c,Ke.empty(),e)}function xt(a){return new zt(a.readTime,a.key,-1)}class zt{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new zt(je.min(),Ke.empty(),-1)}static max(){return new zt(je.max(),Ke.empty(),-1)}}function Fn(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=Ke.comparator(a.documentKey,e.documentKey),0!==r?r:ue(a.largestBatchId,e.largestBatchId))}const pn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class In{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ir(a){return dr.apply(this,arguments)}function dr(){return(dr=(0,Ee.A)(function*(a){if(a.code!==ie.FAILED_PRECONDITION||a.message!==pn)throw a;et("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&$t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Xe((s,c)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,c)},this.catchCallback=d=>{this.wrapFailure(r,d).next(s,c)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Xe?r:Xe.resolve(r)}catch(r){return Xe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Xe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Xe.reject(r)}static resolve(e){return new Xe((r,s)=>{r(e)})}static reject(e){return new Xe((r,s)=>{s(e)})}static waitFor(e){return new Xe((r,s)=>{let c=0,d=0,y=!1;e.forEach(S=>{++c,S.next(()=>{++d,y&&d===c&&r()},F=>s(F))}),y=!0,d===c&&r()})}static or(e){let r=Xe.resolve(!1);for(const s of e)r=r.next(c=>c?Xe.resolve(c):s());return r}static forEach(e,r){const s=[];return e.forEach((c,d)=>{s.push(r.call(this,c,d))}),this.waitFor(s)}static mapArray(e,r){return new Xe((s,c)=>{const d=e.length,y=new Array(d);let S=0;for(let F=0;F<d;F++){const q=F;r(e[q]).next(ne=>{y[q]=ne,++S,S===d&&s(y)},ne=>c(ne))}})}static doWhile(e,r){return new Xe((s,c)=>{const d=()=>{!0===e()?r().next(()=>{d()},c):s()};d()})}}class Vn{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new kt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Ri(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const c=go(s.target.error);this.V.reject(new Ri(e,c))}}static open(e,r,s,c){try{return new Vn(r,e.transaction(c,s))}catch(d){throw new Ri(r,d)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Ds(r)}}class Gr{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===Gr.S((0,dn.ZQ)())&&xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return et("SimpleDb","Removing database:",e),fi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,dn.zW)())return!1;if(Gr.v())return!0;const e=(0,dn.ZQ)(),r=Gr.S(e),s=0<r&&r<10,c=wi(e),d=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,Ee.A)(function*(){return r.db||(et("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,c)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=y=>{s(y.target.result)},d.onblocked=()=>{c(new Ri(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=y=>{const S=y.target.error;c("VersionError"===S.name?new Re(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new Re(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new Ri(e,S))},d.onupgradeneeded=y=>{et("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',y.oldVersion),r.p.O(y.target.result,d.transaction,y.oldVersion,r.version).next(()=>{et("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,c){var d=this;return(0,Ee.A)(function*(){const y="readonly"===r;let S=0;for(;;){++S;try{d.db=yield d.M(e);const F=Vn.open(d.db,e,y?"readonly":"readwrite",s),q=c(F).next(ne=>(F.g(),ne)).catch(ne=>(F.abort(ne),Xe.reject(ne))).toPromise();return q.catch(()=>{}),yield F.m,q}catch(F){const q=F,ne="FirebaseError"!==q.name&&S<3;if(et("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ne),d.close(),!ne)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function wi(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class ys{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return fi(this.B.delete())}}class Ri extends Re{constructor(e,r){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function zr(a){return"IndexedDbTransactionError"===a.name}class Ds{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(et("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(et("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),fi(s)}add(e){return et("SimpleDb","ADD",this.store.name,e,e),fi(this.store.add(e))}get(e){return fi(this.store.get(e)).next(r=>(void 0===r&&(r=null),et("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return et("SimpleDb","DELETE",this.store.name,e),fi(this.store.delete(e))}count(){return et("SimpleDb","COUNT",this.store.name),fi(this.store.count())}U(e,r){const s=this.options(e,r),c=s.index?this.store.index(s.index):this.store;if("function"==typeof c.getAll){const d=c.getAll(s.range);return new Xe((y,S)=>{d.onerror=F=>{S(F.target.error)},d.onsuccess=F=>{y(F.target.result)}})}{const d=this.cursor(s),y=[];return this.W(d,(S,F)=>{y.push(F)}).next(()=>y)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new Xe((c,d)=>{s.onerror=y=>{d(y.target.error)},s.onsuccess=y=>{c(y.target.result)}})}j(e,r){et("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const c=this.cursor(s);return this.W(c,(d,y,S)=>S.delete())}J(e,r){let s;r?s=e:(s={},r=e);const c=this.cursor(s);return this.W(c,r)}Y(e){const r=this.cursor({});return new Xe((s,c)=>{r.onerror=d=>{const y=go(d.target.error);c(y)},r.onsuccess=d=>{const y=d.target.result;y?e(y.primaryKey,y.value).next(S=>{S?y.continue():s()}):s()}})}W(e,r){const s=[];return new Xe((c,d)=>{e.onerror=y=>{d(y.target.error)},e.onsuccess=y=>{const S=y.target.result;if(!S)return void c();const F=new ys(S),q=r(S.primaryKey,S.value,F);if(q instanceof Xe){const ne=q.catch(ye=>(F.done(),Xe.reject(ye)));s.push(ne)}F.isDone?c():null===F.K?S.continue():S.continue(F.K)}}).next(()=>Xe.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function fi(a){return new Xe((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const c=go(s.target.error);r(c)}})}let Ss=!1;function go(a){const e=Gr.S((0,dn.ZQ)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ss||(Ss=!0,setTimeout(()=>{throw s},0)),s}}return a}class ma{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;et("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.A)(function*(){r.task=null;try{et("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){zr(s)?et("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield ir(s)}yield r.X(6e4)}))}}class xo{constructor(e,r){this.localStore=e,this.persistence=r}ee(){var e=this;return(0,Ee.A)(function*(r=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>e.te(s,r))}).apply(this,arguments)}te(e,r){const s=new Set;let c=r,d=!0;return Xe.doWhile(()=>!0===d&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(y=>{if(null!==y&&!s.has(y))return et("IndexBackfiller",`Processing collection: ${y}`),this.ne(e,y,c).next(S=>{c-=S,s.add(y)});d=!1})).next(()=>r-c)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(c=>this.localStore.localDocuments.getNextDocuments(e,r,c,s).next(d=>{const y=d.changes;return this.localStore.indexManager.updateIndexEntries(e,y).next(()=>this.re(c,d)).next(S=>(et("IndexBackfiller",`Updating offset: ${S}`),this.localStore.indexManager.updateCollectionGroup(e,r,S))).next(()=>y.size)}))}re(e,r){let s=e;return r.changes.forEach((c,d)=>{const y=xt(d);Fn(y,s)>0&&(s=y)}),new zt(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let Br=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=c=>this.ie(c),this.se=c=>s.writeSequenceNumber(c))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function rs(a){return null==a}function is(a){return 0===a&&1/a==-1/0}function Rs(a){return"number"==typeof a&&Number.isInteger(a)&&!is(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Ur(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=xs(e)),e=Hs(a.get(r),e);return xs(e)}function Hs(a,e){let r=e;const s=a.length;for(let c=0;c<s;c++){const d=a.charAt(c);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function xs(a){return a+"\x01\x01"}function ss(a){const e=a.length;if(rn(e>=2),2===e)return rn("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),pe.emptyPath();const r=e-2,s=[];let c="";for(let d=0;d<e;){const y=a.indexOf("\x01",d);switch((y<0||y>r)&&$t(),a.charAt(y+1)){case"\x01":const S=a.substring(d,y);let F;0===c.length?F=S:(c+=S,F=c,c=""),s.push(F);break;case"\x10":c+=a.substring(d,y),c+="\0";break;case"\x11":c+=a.substring(d,y+1);break;default:$t()}d=y+2}return new pe(s)}const $s=["userId","batchId"];function Ms(a,e){return[a,Ur(e)]}function zs(a,e,r){return[a,Ur(e),r]}const Ks={},Gi=["prefixPath","collectionGroup","readTime","documentId"],Vi=["prefixPath","collectionGroup","documentId"],Ws=["collectionGroup","readTime","prefixPath","documentId"],_r=["canonicalId","targetId"],Pi=["targetId","path"],pi=["path","targetId"],vs=["collectionId","parent"],Oi=["indexId","uid"],Zs=["uid","sequenceNumber"],Ps=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gs=["indexId","uid","orderedDocumentKey"],bs=["userId","collectionPath","documentId"],Es=["userId","collectionPath","largestBatchId"],qr=["userId","collectionGroup","largestBatchId"],hn=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sr=[...hn,"documentOverlays"],Or=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xi=Or,ds=[...xi,"indexConfiguration","indexState","indexEntries"],yi=ds,Js=[...ds,"globals"];class Zr extends In{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Kr(a,e){const r=Fe(a);return Gr.F(r._e,e)}function hs(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function Wn(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function Is(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class vr{constructor(e,r){this.comparator=e,this.root=r||bi.EMPTY}insert(e,r){return new vr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return r+s.left.size;c<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vr(this.root,e,this.comparator,!0)}}class Vr{constructor(e,r,s,c){this.isReverse=c,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=r?s(e.key,r):1,r&&c&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,r,s,c,d){this.key=e,this.value=r,this.color=s??bi.RED,this.left=c??bi.EMPTY,this.right=d??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,c,d){return new bi(e??this.key,r??this.value,s??this.color,c??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let c=this;const d=s(e,c.key);return c=d<0?c.copy(null,null,null,c.left.insert(e,r,s),null):0===d?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(e,r,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,c=this;if(r(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,r),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===r(e,c.key)){if(c.right.isEmpty())return bi.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,r))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $t();const e=this.left.check();if(e!==this.right.check())throw $t();return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1,bi.EMPTY=new class{constructor(){this.size=0}get key(){throw $t()}get value(){throw $t()}get color(){throw $t()}get left(){throw $t()}get right(){throw $t()}copy(e,r,s,c,d){return this}insert(e,r,s){return new bi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;r(c.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ws(this.data.getIterator())}getIteratorFrom(e){return new ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const c=r.getNext().key,d=s.getNext().key;if(0!==this.comparator(c,d))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new fr(this.comparator);return r.data=e,r}}class ws{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mi(a){return a.hasNext()?a.getNext():void 0}class Hi{constructor(e){this.fields=e,e.sort(Se.comparator)}static empty(){return new Hi([])}unionWith(e){let r=new fr(Se.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new Hi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return me(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class qi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(c){try{return atob(c)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new qi("Invalid base64 string: "+d):d}}(e);return new Nr(r)}static fromUint8Array(e){const r=function(c){let d="";for(let y=0;y<c.length;++y)d+=String.fromCharCode(c[y]);return d}(e);return new Nr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let c=0;c<r.length;c++)s[c]=r.charCodeAt(c);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const Ts=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Un(a){if(rn(!!a),"string"==typeof a){let e=0;const r=Ts.exec(a);if(rn(!!r),r[1]){let c=r[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Jr(a.seconds),nanos:Jr(a.nanos)}}function Jr(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function jr(a){return"string"==typeof a?Nr.fromBase64String(a):Nr.fromUint8Array(a)}function as(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function $i(a){const e=a.mapValue.fields.__previous_value__;return as(e)?$i(e):e}function Zi(a){const e=Un(a.mapValue.fields.__local_write_time__.timestampValue);return new be(e.seconds,e.nanos)}class Os{constructor(e,r,s,c,d,y,S,F,q){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=c,this.ssl=d,this.forceLongPolling=y,this.autoDetectLongPolling=S,this.longPollingOptions=F,this.useFetchStreams=q}}class Ni{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ni("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ni&&e.projectId===this.projectId&&e.database===this.database}}const yr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cs={nullValue:"NULL_VALUE"};function kr(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?as(a)?4:ot(a)?9007199254740991:z(a)?10:11:$t()}function Hr(a,e){if(a===e)return!0;const r=kr(a);if(r!==kr(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Zi(a).isEqual(Zi(e));case 3:return function(c,d){if("string"==typeof c.timestampValue&&"string"==typeof d.timestampValue&&c.timestampValue.length===d.timestampValue.length)return c.timestampValue===d.timestampValue;const y=Un(c.timestampValue),S=Un(d.timestampValue);return y.seconds===S.seconds&&y.nanos===S.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return d=e,jr(a.bytesValue).isEqual(jr(d.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(c,d){return Jr(c.geoPointValue.latitude)===Jr(d.geoPointValue.latitude)&&Jr(c.geoPointValue.longitude)===Jr(d.geoPointValue.longitude)}(a,e);case 2:return function(c,d){if("integerValue"in c&&"integerValue"in d)return Jr(c.integerValue)===Jr(d.integerValue);if("doubleValue"in c&&"doubleValue"in d){const y=Jr(c.doubleValue),S=Jr(d.doubleValue);return y===S?is(y)===is(S):isNaN(y)&&isNaN(S)}return!1}(a,e);case 9:return me(a.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return function(c,d){const y=c.mapValue.fields||{},S=d.mapValue.fields||{};if(hs(y)!==hs(S))return!1;for(const F in y)if(y.hasOwnProperty(F)&&(void 0===S[F]||!Hr(y[F],S[F])))return!1;return!0}(a,e);default:return $t()}var d}function As(a,e){return void 0!==(a.values||[]).find(r=>Hr(r,e))}function Bi(a,e){if(a===e)return 0;const r=kr(a),s=kr(e);if(r!==s)return ue(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return ue(a.booleanValue,e.booleanValue);case 2:return function(d,y){const S=Jr(d.integerValue||d.doubleValue),F=Jr(y.integerValue||y.doubleValue);return S<F?-1:S>F?1:S===F?0:isNaN(S)?isNaN(F)?0:-1:1}(a,e);case 3:return fs(a.timestampValue,e.timestampValue);case 4:return fs(Zi(a),Zi(e));case 5:return ue(a.stringValue,e.stringValue);case 6:return function(d,y){const S=jr(d),F=jr(y);return S.compareTo(F)}(a.bytesValue,e.bytesValue);case 7:return function(d,y){const S=d.split("/"),F=y.split("/");for(let q=0;q<S.length&&q<F.length;q++){const ne=ue(S[q],F[q]);if(0!==ne)return ne}return ue(S.length,F.length)}(a.referenceValue,e.referenceValue);case 8:return function(d,y){const S=ue(Jr(d.latitude),Jr(y.latitude));return 0!==S?S:ue(Jr(d.longitude),Jr(y.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return ai(a.arrayValue,e.arrayValue);case 10:return function(d,y){var S,F,q,ne;const bt=null===(S=(d.fields||{}).value)||void 0===S?void 0:S.arrayValue,Lt=null===(F=(y.fields||{}).value)||void 0===F?void 0:F.arrayValue,Jt=ue((null===(q=bt?.values)||void 0===q?void 0:q.length)||0,(null===(ne=Lt?.values)||void 0===ne?void 0:ne.length)||0);return 0!==Jt?Jt:ai(bt,Lt)}(a.mapValue,e.mapValue);case 11:return function(d,y){if(d===yr.mapValue&&y===yr.mapValue)return 0;if(d===yr.mapValue)return 1;if(y===yr.mapValue)return-1;const S=d.fields||{},F=Object.keys(S),q=y.fields||{},ne=Object.keys(q);F.sort(),ne.sort();for(let ye=0;ye<F.length&&ye<ne.length;++ye){const Ge=ue(F[ye],ne[ye]);if(0!==Ge)return Ge;const bt=Bi(S[F[ye]],q[ne[ye]]);if(0!==bt)return bt}return ue(F.length,ne.length)}(a.mapValue,e.mapValue);default:throw $t()}}function fs(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return ue(a,e);const r=Un(a),s=Un(e),c=ue(r.seconds,s.seconds);return 0!==c?c:ue(r.nanos,s.nanos)}function ai(a,e){const r=a.values||[],s=e.values||[];for(let c=0;c<r.length&&c<s.length;++c){const d=Bi(r[c],s[c]);if(d)return d}return ue(r.length,s.length)}function qs(a){return oo(a)}function oo(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=Un(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?jr(a.bytesValue).toBase64():"referenceValue"in a?Ke.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",c=!0;for(const d of r.values||[])c?c=!1:s+=",",s+=oo(d);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let c="{",d=!0;for(const y of s)d?d=!1:c+=",",c+=`${y}:${oo(r.fields[y])}`;return c+"}"}(a.mapValue):$t()}function ao(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function to(a){return!!a&&"integerValue"in a}function G(a){return!!a&&"arrayValue"in a}function E(a){return!!a&&"nullValue"in a}function g(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function M(a){return!!a&&"mapValue"in a}function z(a){var e,r;return"__vector__"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ce(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Wn(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=Ce(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ce(a.arrayValue.values[r]);return e}return Object.assign({},a)}function ot(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Ut={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function kn(a){return"nullValue"in a?cs:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?ao(Ni.empty(),Ke.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?z(a)?Ut:{mapValue:{}}:$t()}function Cn(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?ao(Ni.empty(),Ke.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Ut:"mapValue"in a?z(a)?{mapValue:{}}:yr:$t()}function pr(a,e){const r=Bi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function Sr(a,e){const r=Bi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class Cr{constructor(e){this.value=e}static empty(){return new Cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!M(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ce(r)}setAll(e){let r=Se.emptyPath(),s={},c=[];e.forEach((y,S)=>{if(!r.isImmediateParentOf(S)){const F=this.getFieldsMap(r);this.applyChanges(F,s,c),s={},c=[],r=S.popLast()}y?s[S.lastSegment()]=Ce(y):c.push(S.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,s,c)}delete(e){const r=this.field(e.popLast());M(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=r.mapValue.fields[e.get(s)];M(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=c),r=c}return r.mapValue.fields}applyChanges(e,r,s){Wn(r,(c,d)=>e[c]=d);for(const c of s)delete e[c]}clone(){return new Cr(Ce(this.value))}}function gi(a){const e=[];return Wn(a.fields,(r,s)=>{const c=new Se([r]);if(M(s)){const d=gi(s.mapValue).fields;if(0===d.length)e.push(c);else for(const y of d)e.push(c.child(y))}else e.push(c)}),new Hi(e)}class or{constructor(e,r,s,c,d,y,S){this.key=e,this.documentType=r,this.version=s,this.readTime=c,this.createTime=d,this.data=y,this.documentState=S}static newInvalidDocument(e){return new or(e,0,je.min(),je.min(),je.min(),Cr.empty(),0)}static newFoundDocument(e,r,s,c){return new or(e,1,r,je.min(),s,c,0)}static newNoDocument(e,r){return new or(e,2,r,je.min(),je.min(),Cr.empty(),0)}static newUnknownDocument(e,r){return new or(e,3,r,je.min(),je.min(),Cr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(je.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ei{constructor(e,r){this.position=e,this.inclusive=r}}function Wi(a,e,r){let s=0;for(let c=0;c<a.position.length;c++){const d=e[c],y=a.position[c];if(s=d.field.isKeyField()?Ke.comparator(Ke.fromName(y.referenceValue),r.key):Bi(y,r.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function ti(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!Hr(a.position[r],e.position[r]))return!1;return!0}class vi{constructor(e,r="asc"){this.field=e,this.dir=r}}function _i(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Ei{}class tr extends Ei{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new ga(e,r,s):"array-contains"===r?new Gc(e,s):"in"===r?new $o(e,s):"not-in"===r?new Jo(e,s):"array-contains-any"===r?new Po(e,s):new tr(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new Mo(e,s):new dc(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(Bi(r,this.value)):null!==r&&kr(this.value)===kr(r)&&this.matchesComparison(Bi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends Ei{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new nr(e,r)}matches(e){return Qi(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qi(a){return"and"===a.op}function Ti(a){return"or"===a.op}function co(a){return Qs(a)&&Qi(a)}function Qs(a){for(const e of a.filters)if(e instanceof nr)return!1;return!0}function _o(a){if(a instanceof tr)return a.field.canonicalString()+a.op.toString()+qs(a.value);if(co(a))return a.filters.map(e=>_o(e)).join(",");{const e=a.filters.map(r=>_o(r)).join(",");return`${a.op}(${e})`}}function jo(a,e){return a instanceof tr?(s=a,(c=e)instanceof tr&&s.op===c.op&&s.field.isEqual(c.field)&&Hr(s.value,c.value)):a instanceof nr?function(s,c){return c instanceof nr&&s.op===c.op&&s.filters.length===c.filters.length&&s.filters.reduce((d,y,S)=>d&&jo(y,c.filters[S]),!0)}(a,e):void $t();var s,c}function Zo(a,e){const r=a.filters.concat(e);return nr.create(r,a.op)}function Ho(a){return a instanceof tr?`${(r=a).field.canonicalString()} ${r.op} ${qs(r.value)}`:a instanceof nr?function(r){return r.op.toString()+" {"+r.getFilters().map(Ho).join(" ,")+"}"}(a):"Filter";var r}class ga extends tr{constructor(e,r,s){super(e,r,s),this.key=Ke.fromName(s.referenceValue)}matches(e){const r=Ke.comparator(e.key,this.key);return this.matchesComparison(r)}}class Mo extends tr{constructor(e,r){super(e,"in",r),this.keys=_a(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class dc extends tr{constructor(e,r){super(e,"not-in",r),this.keys=_a(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function _a(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>Ke.fromName(s.referenceValue))}class Gc extends tr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return G(r)&&As(r.arrayValue,this.value)}}class $o extends tr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&As(this.value.arrayValue,r)}}class Jo extends tr{constructor(e,r){super(e,"not-in",r)}matches(e){if(As(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!As(this.value.arrayValue,r)}}class Po extends tr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!G(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>As(this.value.arrayValue,s))}}class ya{constructor(e,r=null,s=[],c=[],d=null,y=null,S=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=c,this.limit=d,this.startAt=y,this.endAt=S,this.ue=null}}function Ha(a,e=null,r=[],s=[],c=null,d=null,y=null){return new ya(a,e,r,s,c,d,y)}function zo(a){const e=Fe(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>_o(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),rs(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>qs(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>qs(s)).join(",")),e.ue=r}return e.ue}function Oo(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!_i(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!jo(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!ti(a.startAt,e.startAt)&&ti(a.endAt,e.endAt)}function va(a){return Ke.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function ea(a,e){return a.filters.filter(r=>r instanceof tr&&r.field.isEqual(e))}function kl(a,e,r){let s=cs,c=!0;for(const d of ea(a,e)){let y=cs,S=!0;switch(d.op){case"<":case"<=":y=kn(d.value);break;case"==":case"in":case">=":y=d.value;break;case">":y=d.value,S=!1;break;case"!=":case"not-in":y=cs}pr({value:s,inclusive:c},{value:y,inclusive:S})<0&&(s=y,c=S)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const y=r.position[d];pr({value:s,inclusive:c},{value:y,inclusive:r.inclusive})<0&&(s=y,c=r.inclusive);break}return{value:s,inclusive:c}}function hc(a,e,r){let s=yr,c=!0;for(const d of ea(a,e)){let y=yr,S=!0;switch(d.op){case">=":case">":y=Cn(d.value),S=!1;break;case"==":case"in":case"<=":y=d.value;break;case"<":y=d.value,S=!1;break;case"!=":case"not-in":y=yr}Sr({value:s,inclusive:c},{value:y,inclusive:S})>0&&(s=y,c=S)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const y=r.position[d];Sr({value:s,inclusive:c},{value:y,inclusive:r.inclusive})>0&&(s=y,c=r.inclusive);break}return{value:s,inclusive:c}}class Ns{constructor(e,r=null,s=[],c=[],d=null,y="F",S=null,F=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=c,this.limit=d,this.limitType=y,this.startAt=S,this.endAt=F,this.ce=null,this.le=null,this.he=null}}function Z(a,e,r,s,c,d,y,S){return new Ns(a,e,r,s,c,d,y,S)}function w(a){return new Ns(a)}function C(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function V(a){return null!==a.collectionGroup}function X(a){const e=Fe(a);if(null===e.ce){e.ce=[];const r=new Set;for(const d of e.explicitOrderBy)e.ce.push(d),r.add(d.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let S=new fr(Se.comparator);return y.filters.forEach(F=>{F.getFlattenedFilters().forEach(q=>{q.isInequality()&&(S=S.add(q.field))})}),S})(e).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||e.ce.push(new vi(d,s))}),r.has(Se.keyField().canonicalString())||e.ce.push(new vi(Se.keyField(),s))}return e.ce}function _(a){const e=Fe(a);return e.le||(e.le=function R(a,e){if("F"===a.limitType)return Ha(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(c=>new vi(c.field,"desc"===c.dir?"asc":"desc"));const r=a.endAt?new ei(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new ei(a.startAt.position,a.startAt.inclusive):null;return Ha(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,X(a))),e.le}function B(a,e){const r=a.filters.concat([e]);return new Ns(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function ee(a,e,r){return new Ns(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function He(a,e){return Oo(_(a),_(e))&&a.limitType===e.limitType}function st(a){return`${zo(_(a))}|lt:${a.limitType}`}function qt(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(c=>Ho(c)).join(", ")}]`),rs(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(c=>{return`${(y=c).field.canonicalString()} (${y.dir})`;var y}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(c=>qs(c)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(c=>qs(c)).join(",")),`Target(${s})`}(_(a))}; limitType=${a.limitType})`}function Dn(a,e){return e.isFoundDocument()&&function(s,c){const d=c.key.path;return null!==s.collectionGroup?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(d):Ke.isDocumentKey(s.path)?s.path.isEqual(d):s.path.isImmediateParentOf(d)}(a,e)&&function(s,c){for(const d of X(s))if(!d.field.isKeyField()&&null===c.data.field(d.field))return!1;return!0}(a,e)&&function(s,c){for(const d of s.filters)if(!d.matches(c))return!1;return!0}(a,e)&&(c=e,!((s=a).startAt&&!function(y,S,F){const q=Wi(y,S,F);return y.inclusive?q<=0:q<0}(s.startAt,X(s),c)||s.endAt&&!function(y,S,F){const q=Wi(y,S,F);return y.inclusive?q>=0:q>0}(s.endAt,X(s),c)));var s,c}function mn(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function yn(a){return(e,r)=>{let s=!1;for(const c of X(a)){const d=jn(c,e,r);if(0!==d)return d;s=s||c.field.isKeyField()}return 0}}function jn(a,e,r){const s=a.field.isKeyField()?Ke.comparator(e.key,r.key):function(d,y,S){const F=y.data.field(d),q=S.data.field(d);return null!==F&&null!==q?Bi(F,q):$t()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return $t()}}class cr{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[c,d]of s)if(this.equalsFn(c,e))return d}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,r]],void this.innerSize++;for(let d=0;d<c.length;d++)if(this.equalsFn(c[d][0],e))return void(c[d]=[e,r]);c.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[r]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Wn(this.inner,(r,s)=>{for(const[c,d]of s)e(c,d)})}isEmpty(){return Is(this.inner)}size(){return this.innerSize}}const lr=new vr(Ke.comparator);function gr(){return lr}const Qr=new vr(Ke.comparator);function Ui(...a){let e=Qr;for(const r of a)e=e.insert(r.key,r);return e}function Ji(a){let e=Qr;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function Fr(){return li()}function ci(){return li()}function li(){return new cr(a=>a.toString(),(a,e)=>a.isEqual(e))}const es=new vr(Ke.comparator),ba=new fr(Ke.comparator);function Mn(...a){let e=ba;for(const r of a)e=e.add(r);return e}const No=new fr(ue);function yo(){return No}function ps(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:is(e)?"-0":e}}function Kn(a){return{integerValue:""+a}}function rr(a,e){return Rs(e)?Kn(e):ps(a,e)}class Qn{constructor(){this._=void 0}}function Ir(a,e,r){return a instanceof Ai?function(c,d){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return d&&as(d)&&(d=$i(d)),d&&(y.fields.__previous_value__=d),{mapValue:y}}(r,e):a instanceof ki?ui(a,e):a instanceof Co?qc(a,e):function(c,d){const y=lo(c,d),S=vo(y)+vo(c.Pe);return to(y)&&to(c.Pe)?Kn(S):ps(c.serializer,S)}(a,e)}function ms(a,e,r){return a instanceof ki?ui(a,e):a instanceof Co?qc(a,e):r}function lo(a,e){return a instanceof Fi?to(s=e)||(d=s)&&"doubleValue"in d?e:{integerValue:0}:null;var s,d}class Ai extends Qn{}class ki extends Qn{constructor(e){super(),this.elements=e}}function ui(a,e){const r=ks(e);for(const s of a.elements)r.some(c=>Hr(c,s))||r.push(s);return{arrayValue:{values:r}}}class Co extends Qn{constructor(e){super(),this.elements=e}}function qc(a,e){let r=ks(e);for(const s of a.elements)r=r.filter(c=>!Hr(c,s));return{arrayValue:{values:r}}}class Fi extends Qn{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function vo(a){return Jr(a.integerValue||a.doubleValue)}function ks(a){return G(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Zn{constructor(e,r){this.field=e,this.transform=r}}class th{constructor(e,r){this.version=e,this.transformResults=r}}class Ci{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qc(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class za{}function Fl(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new Ia(a.key,Ci.none()):new mc(a.key,a.data,Ci.none());{const r=a.data,s=Cr.empty();let c=new fr(Se.comparator);for(let d of e.fields)if(!c.has(d)){let y=r.field(d);null===y&&d.length>1&&(d=d.popLast(),y=r.field(d)),null===y?s.delete(d):s.set(d,y),c=c.add(d)}return new Fs(a.key,s,new Hi(c.toArray()),Ci.none())}}function fc(a,e,r){a instanceof mc?function(c,d,y){const S=c.value.clone(),F=Xr(c.fieldTransforms,d,y.transformResults);S.setAll(F),d.convertToFoundDocument(y.version,S).setHasCommittedMutations()}(a,e,r):a instanceof Fs?function(c,d,y){if(!Qc(c.precondition,d))return void d.convertToUnknownDocument(y.version);const S=Xr(c.fieldTransforms,d,y.transformResults),F=d.data;F.setAll(Gt(c)),F.setAll(S),d.convertToFoundDocument(y.version,F).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function pc(a,e,r,s){return a instanceof mc?function(d,y,S,F){if(!Qc(d.precondition,y))return S;const q=d.value.clone(),ne=Ea(d.fieldTransforms,F,y);return q.setAll(ne),y.convertToFoundDocument(y.version,q).setHasLocalMutations(),null}(a,e,r,s):a instanceof Fs?function(d,y,S,F){if(!Qc(d.precondition,y))return S;const q=Ea(d.fieldTransforms,F,y),ne=y.data;return ne.setAll(Gt(d)),ne.setAll(q),y.convertToFoundDocument(y.version,ne).setHasLocalMutations(),null===S?null:S.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ye=>ye.field))}(a,e,r,s):(S=r,Qc(a.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):S);var y,S}function _m(a,e){let r=null;for(const s of a.fieldTransforms){const c=e.data.field(s.field),d=lo(s.transform,c||null);null!=d&&(null===r&&(r=Cr.empty()),r.set(s.field,d))}return r||null}function Ka(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===c||s&&c&&me(s,c,(d,y)=>function $a(a,e){return a.field.isEqual(e.field)&&(c=e.transform,(s=a.transform)instanceof ki&&c instanceof ki||s instanceof Co&&c instanceof Co?me(s.elements,c.elements,Hr):s instanceof Fi&&c instanceof Fi?Hr(s.Pe,c.Pe):s instanceof Ai&&c instanceof Ai);var s,c}(d,y))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,c}class mc extends za{constructor(e,r,s,c=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Fs extends za{constructor(e,r,s,c,d=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=c,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Gt(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function Xr(a,e,r){const s=new Map;rn(a.length===r.length);for(let c=0;c<r.length;c++){const d=a[c],y=d.transform,S=e.data.field(d.field);s.set(d.field,ms(y,S,r[c]))}return s}function Ea(a,e,r){const s=new Map;for(const c of a){const d=c.transform,y=r.data.field(c.field);s.set(c.field,Ir(d,y,e))}return s}class Ia extends za{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $r extends za{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xc{constructor(e,r,s,c){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let c=0;c<this.mutations.length;c++){const d=this.mutations[c];d.key.isEqual(e.key)&&fc(d,e,s[c])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=pc(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=pc(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=ci();return this.mutations.forEach(c=>{const d=e.get(c.key),y=d.overlayedDocument;let S=this.applyToLocalView(y,d.mutatedFields);S=r.has(c.key)?null:S;const F=Fl(y,S);null!==F&&s.set(c.key,F),y.isValidDocument()||y.convertToNoDocument(je.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Mn())}isEqual(e){return this.batchId===e.batchId&&me(this.mutations,e.mutations,(r,s)=>Ka(r,s))&&me(this.baseMutations,e.baseMutations,(r,s)=>Ka(r,s))}}class ko{constructor(e,r,s,c){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=c}static from(e,r,s){rn(e.mutations.length===s.length);let c=es;const d=e.mutations;for(let y=0;y<d.length;y++)c=c.insert(d[y].key,s[y].version);return new ko(e,r,s,c)}}class bo{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fu{constructor(e,r){this.count=e,this.unchangedNames=r}}var ls,ii;function Lu(a){switch(a){default:return $t();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function gs(a){if(void 0===a)return xn("GRPC error has no .code"),ie.UNKNOWN;switch(a){case ls.OK:return ie.OK;case ls.CANCELLED:return ie.CANCELLED;case ls.UNKNOWN:return ie.UNKNOWN;case ls.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case ls.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case ls.INTERNAL:return ie.INTERNAL;case ls.UNAVAILABLE:return ie.UNAVAILABLE;case ls.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case ls.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case ls.NOT_FOUND:return ie.NOT_FOUND;case ls.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case ls.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case ls.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case ls.ABORTED:return ie.ABORTED;case ls.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case ls.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case ls.DATA_LOSS:return ie.DATA_LOSS;default:return $t()}}(ii=ls||(ls={}))[ii.OK=0]="OK",ii[ii.CANCELLED=1]="CANCELLED",ii[ii.UNKNOWN=2]="UNKNOWN",ii[ii.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ii[ii.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ii[ii.NOT_FOUND=5]="NOT_FOUND",ii[ii.ALREADY_EXISTS=6]="ALREADY_EXISTS",ii[ii.PERMISSION_DENIED=7]="PERMISSION_DENIED",ii[ii.UNAUTHENTICATED=16]="UNAUTHENTICATED",ii[ii.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ii[ii.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ii[ii.ABORTED=10]="ABORTED",ii[ii.OUT_OF_RANGE=11]="OUT_OF_RANGE",ii[ii.UNIMPLEMENTED=12]="UNIMPLEMENTED",ii[ii.INTERNAL=13]="INTERNAL",ii[ii.UNAVAILABLE=14]="UNAVAILABLE",ii[ii.DATA_LOSS=15]="DATA_LOSS";function k(){return new TextEncoder}const T=new Gn([4294967295,4294967295],0);function P(a){const e=k().encode(a),r=new Tr;return r.update(e),new Uint8Array(r.digest())}function K(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new Gn([r,s],0),new Gn([c,d],0)]}class se{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new xe(`Invalid padding: ${r}`);if(s<0)throw new xe(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new xe(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new xe(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Gn.fromNumber(this.Ie)}Ee(e,r,s){let c=e.add(r.multiply(Gn.fromNumber(s)));return 1===c.compare(T)&&(c=new Gn([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=P(e),[s,c]=K(r);for(let d=0;d<this.hashCount;d++){const y=this.Ee(s,c,d);if(!this.de(y))return!1}return!0}static create(e,r,s){const c=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),y=new se(d,c,r);return s.forEach(S=>y.insert(S)),y}insert(e){if(0===this.Ie)return;const r=P(e),[s,c]=K(r);for(let d=0;d<this.hashCount;d++){const y=this.Ee(s,c,d);this.Ae(y)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class xe extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Dt{constructor(e,r,s,c,d){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const c=new Map;return c.set(e,wt.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new Dt(je.min(),c,new vr(ue),gr(),Mn())}}class wt{constructor(e,r,s,c,d){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new wt(s,r,Mn(),Mn(),Mn())}}class wn{constructor(e,r,s,c){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=c}}class Rr{constructor(e,r){this.targetId=e,this.me=r}}class Di{constructor(e,r,s=Nr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=c}}class si{constructor(){this.fe=0,this.ge=wa(),this.pe=Nr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Mn(),r=Mn(),s=Mn();return this.ge.forEach((c,d)=>{switch(d){case 0:e=e.add(c);break;case 2:r=r.add(c);break;case 1:s=s.add(c);break;default:$t()}}),new wt(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=wa()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xs{constructor(e){this.Le=e,this.Be=new Map,this.ke=gr(),this.qe=ta(),this.Qe=new vr(ue)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:$t()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,c)=>{this.ze(c)&&r(c)})}He(e){const r=e.targetId,s=e.me.count,c=this.Je(r);if(c){const d=c.target;if(va(d))if(0===s){const y=new Ke(d.path);this.Ue(r,y,or.newNoDocument(y,je.min()))}else rn(1===s);else{const y=this.Ye(r);if(y!==s){const S=this.Ze(e),F=S?this.Xe(S,e,y):1;0!==F&&(this.je(r),this.Qe=this.Qe.insert(r,2===F?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:d=0}=r;let y,S;try{y=jr(s).toUint8Array()}catch(F){if(F instanceof qi)return _n("Decoding the base64 bloom filter in existence filter failed ("+F.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw F}try{S=new se(y,c,d)}catch(F){return _n(F instanceof xe?"BloomFilter error: ":"Applying bloom filter failed: ",F),null}return 0===S.Ie?null:S}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let c=0;return s.forEach(d=>{const y=this.Le.tt(),S=`projects/${y.projectId}/databases/${y.database}/documents/${d.path.canonicalString()}`;e.mightContain(S)||(this.Ue(r,d,null),c++)}),c}rt(e){const r=new Map;this.Be.forEach((d,y)=>{const S=this.Je(y);if(S){if(d.current&&va(S.target)){const F=new Ke(S.target.path);null!==this.ke.get(F)||this.it(y,F)||this.Ue(y,F,or.newNoDocument(F,e))}d.be&&(r.set(y,d.ve()),d.Ce())}});let s=Mn();this.qe.forEach((d,y)=>{let S=!0;y.forEachWhile(F=>{const q=this.Je(F);return!q||"TargetPurposeLimboResolution"===q.purpose||(S=!1,!1)}),S&&(s=s.add(d))}),this.ke.forEach((d,y)=>y.setReadTime(e));const c=new Dt(e,r,this.Qe,this.ke,s);return this.ke=gr(),this.qe=ta(),this.Qe=new vr(ue),c}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const c=this.Ge(e);this.it(e,r)?c.Fe(r,1):c.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new si,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new fr(ue),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||et("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new si),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function ta(){return new vr(Ke.comparator)}function wa(){return new vr(Ke.comparator)}const Yc={asc:"ASCENDING",desc:"DESCENDING"},Ta={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vu={and:"AND",or:"OR"};class Zc{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function nh(a,e){return a.useProto3Json||rs(e)?e:{value:e}}function Jc(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function no(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function Aa(a,e){return Jc(a,e.toTimestamp())}function Mr(a){return rn(!!a),je.fromTimestamp(function(r){const s=Un(r);return new be(s.seconds,s.nanos)}(a))}function Bu(a,e){return rh(a,e).canonicalString()}function rh(a,e){const r=(c=a,new pe(["projects",c.projectId,"databases",c.database])).child("documents");var c;return void 0===e?r:r.child(e)}function ih(a){const e=pe.fromString(a);return rn(il(e)),e}function el(a,e){return Bu(a.databaseId,e.path)}function Ko(a,e){const r=ih(e);if(r.get(1)!==a.databaseId.projectId)throw new Re(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Re(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new Ke(Cf(r))}function sh(a,e){return Bu(a.databaseId,e)}function Ll(a){const e=ih(a);return 4===e.length?pe.emptyPath():Cf(e)}function Fo(a){return new pe(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Cf(a){return rn(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function _c(a,e,r){return{name:el(a,e),fields:r.value.mapValue.fields}}function Vl(a,e,r){const s=Ko(a,e.name),c=Mr(e.updateTime),d=e.createTime?Mr(e.createTime):je.min(),y=new Cr({mapValue:{fields:e.fields}}),S=or.newFoundDocument(s,c,d,y);return r&&S.setHasCommittedMutations(),r?S.setHasCommittedMutations():S}function Wa(a,e){let r;if(e instanceof mc)r={update:_c(a,e.key,e.value)};else if(e instanceof Ia)r={delete:el(a,e.key)};else if(e instanceof Fs)r={update:_c(a,e.key,e.data),updateMask:ch(e.fieldMask)};else{if(!(e instanceof $r))return $t();r={verify:el(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(d,y){const S=y.transform;if(S instanceof Ai)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof ki)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Co)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof Fi)return{fieldPath:y.field.canonicalString(),increment:S.Pe};throw $t()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Aa(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:$t()),r;var d}function yc(a,e){const r=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?Ci.updateTime(Mr(d.updateTime)):void 0!==d.exists?Ci.exists(d.exists):Ci.none():Ci.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(y,S){let F=null;"setToServerValue"in S?(rn("REQUEST_TIME"===S.setToServerValue),F=new Ai):"appendMissingElements"in S?F=new ki(S.appendMissingElements.values||[]):"removeAllFromArray"in S?F=new Co(S.removeAllFromArray.values||[]):"increment"in S?F=new Fi(y,S.increment):$t();const q=Se.fromServerFormat(S.fieldPath);return new Zn(q,F)}(a,c)):[];var d;if(e.update){const c=Ko(a,e.update.name),d=new Cr({mapValue:{fields:e.update.fields}});if(e.updateMask){const y=new Hi((e.updateMask.fieldPaths||[]).map(ne=>Se.fromServerFormat(ne)));return new Fs(c,d,y,r,s)}return new mc(c,d,r,s)}if(e.delete){const c=Ko(a,e.delete);return new Ia(c,r)}if(e.verify){const c=Ko(a,e.verify);return new $r(c,r)}return $t()}function vc(a,e){return{documents:[sh(a,e.path)]}}function na(a,e){const r={structuredQuery:{}},s=e.path;let c;null!==e.collectionGroup?(c=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=sh(a,c);const d=function(q){if(0!==q.length)return rl(nr.create(q,"and"))}(e.filters);d&&(r.structuredQuery.where=d);const y=function(q){if(0!==q.length)return q.map(ne=>{return{field:Ga((Ge=ne).field),direction:vm(Ge.dir)};var Ge})}(e.orderBy);y&&(r.structuredQuery.orderBy=y);const S=nh(a,e.limit);return null!==S&&(r.structuredQuery.limit=S),e.startAt&&(r.structuredQuery.startAt={before:(q=e.startAt).inclusive,values:q.position}),e.endAt&&(r.structuredQuery.endAt=function(q){return{before:!q.inclusive,values:q.position}}(e.endAt)),{_t:r,parent:c};var q}function bc(a){let e=Ll(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let c=null;if(s>0){rn(1===s);const ne=r.from[0];ne.allDescendants?c=ne.collectionId:e=e.child(ne.collectionId)}let d=[];r.where&&(d=function(ye){const Ge=ym(ye);return Ge instanceof nr&&co(Ge)?Ge.getFilters():[Ge]}(r.where));let y=[];r.orderBy&&(y=r.orderBy.map(Ge=>{return new vi(qa((Lt=Ge).field),function(Kt){switch(Kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Lt.direction));var Lt}));let S=null;r.limit&&(S=function(ye){let Ge;return Ge="object"==typeof ye?ye.value:ye,rs(Ge)?null:Ge}(r.limit));let F=null;var ye;r.startAt&&(F=new ei((ye=r.startAt).values||[],!!ye.before));let q=null;return r.endAt&&(q=function(ye){return new ei(ye.values||[],!ye.before)}(r.endAt)),Z(e,c,y,d,S,"F",F,q)}function ym(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=qa(r.unaryFilter.field);return tr.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=qa(r.unaryFilter.field);return tr.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=qa(r.unaryFilter.field);return tr.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=qa(r.unaryFilter.field);return tr.create(y,"!=",{nullValue:"NULL_VALUE"});default:return $t()}}(a):void 0!==a.fieldFilter?tr.create(qa((r=a).fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $t()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return nr.create(r.compositeFilter.filters.map(s=>ym(s)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return $t()}}(r.compositeFilter.op))}(a):$t();var r}function vm(a){return Yc[a]}function bm(a){return Ta[a]}function Df(a){return Vu[a]}function Ga(a){return{fieldPath:a.canonicalString()}}function qa(a){return Se.fromServerFormat(a.fieldPath)}function rl(a){return a instanceof tr?function(r){if("=="===r.op){if(g(r.value))return{unaryFilter:{field:Ga(r.field),op:"IS_NAN"}};if(E(r.value))return{unaryFilter:{field:Ga(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(g(r.value))return{unaryFilter:{field:Ga(r.field),op:"IS_NOT_NAN"}};if(E(r.value))return{unaryFilter:{field:Ga(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(r.field),op:bm(r.op),value:r.value}}}(a):a instanceof nr?function(r){const s=r.getFilters().map(c=>rl(c));return 1===s.length?s[0]:{compositeFilter:{op:Df(r.op),filters:s}}}(a):$t()}function ch(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function il(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class Do{constructor(e,r,s,c,d=je.min(),y=je.min(),S=Nr.EMPTY_BYTE_STRING,F=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=S,this.expectedCount=F}withSequenceNumber(e){return new Do(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ul{constructor(e){this.ct=e}}function jl(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Hl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:el(d=a.ct,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:Jc(d,y.version.toTimestamp()),createTime:Jc(d,y.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:Wo(e.version)};else{if(!e.isUnknownDocument())return $t();s.unknownDocument={path:r.path.toArray(),version:Wo(e.version)}}var d,y;return s}function Hl(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function Wo(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ro(a){const e=new be(a.seconds,a.nanoseconds);return je.fromTimestamp(e)}function Ec(a,e){const r=(e.baseMutations||[]).map(d=>yc(a.ct,d));for(let d=0;d<e.mutations.length-1;++d)d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(e.mutations[d].updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d);const s=e.mutations.map(d=>yc(a.ct,d)),c=be.fromMillis(e.localWriteTimeMs);return new Xc(e.batchId,c,r,s)}function ra(a){const e=ro(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?ro(a.lastLimboFreeSnapshotVersion):je.min();let s;return s=void 0!==a.query.documents?(rn(1===(d=a.query).documents.length),_(w(Ll(d.documents[0])))):function(d){return _(bc(d))}(a.query),new Do(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,Nr.fromBase64String(a.resumeToken));var d}function sl(a,e){const r=Wo(e.snapshotVersion),s=Wo(e.lastLimboFreeSnapshotVersion);let c;c=va(e.target)?vc(a.ct,e.target):na(a.ct,e.target)._t;const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zo(e.target),readTime:r,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function ol(a){const e=bc({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?ee(e,e.limit,"L"):e}function al(a,e){return new bo(e.largestBatchId,yc(a.ct,e.overlayMutation))}function cl(a,e){const r=e.path.lastSegment();return[a,Ur(e.path.popLast()),r]}function lh(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:Wo(s.readTime),documentKey:Ur(s.documentKey.path),largestBatchId:s.largestBatchId}}class uh{getBundleMetadata(e,r){return dh(e).get(r).next(s=>{if(s)return{id:(d=s).bundleId,createTime:ro(d.createTime),version:d.version};var d})}saveBundleMetadata(e,r){return dh(e).put({bundleId:(c=r).id,createTime:Wo(Mr(c.createTime)),version:c.version});var c}getNamedQuery(e,r){return hh(e).get(r).next(s=>{if(s)return{name:(d=s).name,query:ol(d.bundledQuery),readTime:ro(d.readTime)};var d})}saveNamedQuery(e,r){return hh(e).put({name:(c=r).name,readTime:Wo(Mr(c.readTime)),bundledQuery:c.bundledQuery});var c}}function dh(a){return Kr(a,"bundles")}function hh(a){return Kr(a,"namedQueries")}class Ic{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new Ic(e,r.uid||"")}getOverlay(e,r){return $l(e).get(cl(this.userId,r)).next(s=>s?al(this.serializer,s):null)}getOverlays(e,r){const s=Fr();return Xe.forEach(r,c=>this.getOverlay(e,c).next(d=>{null!==d&&s.set(c,d)})).next(()=>s)}saveOverlays(e,r,s){const c=[];return s.forEach((d,y)=>{const S=new bo(r,y);c.push(this.ht(e,S))}),Xe.waitFor(c)}removeOverlaysForBatchId(e,r,s){const c=new Set;r.forEach(y=>c.add(Ur(y.getCollectionPath())));const d=[];return c.forEach(y=>{const S=IDBKeyRange.bound([this.userId,y,s],[this.userId,y,s+1],!1,!0);d.push($l(e).j("collectionPathOverlayIndex",S))}),Xe.waitFor(d)}getOverlaysForCollection(e,r,s){const c=Fr(),d=Ur(r),y=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return $l(e).U("collectionPathOverlayIndex",y).next(S=>{for(const F of S){const q=al(this.serializer,F);c.set(q.getKey(),q)}return c})}getOverlaysForCollectionGroup(e,r,s,c){const d=Fr();let y;const S=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return $l(e).J({index:"collectionGroupOverlayIndex",range:S},(F,q,ne)=>{const ye=al(this.serializer,q);d.size()<c||ye.largestBatchId===y?(d.set(ye.getKey(),ye),y=ye.largestBatchId):ne.done()}).next(()=>d)}ht(e,r){return $l(e).put(function(c,d,y){const[S,F,q]=cl(d,y.mutation.key);return{userId:d,collectionPath:F,documentId:q,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:Wa(c.ct,y.mutation)}}(this.serializer,this.userId,r))}}function $l(a){return Kr(a,"documentOverlays")}class Uu{Pt(e){return Kr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?Nr.fromUint8Array(s):Nr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class uo{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Jr(e.integerValue));else if("doubleValue"in e){const s=Jr(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),is(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=Un(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(jr(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?ot(e)?this.dt(r,Number.MAX_SAFE_INTEGER):z(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):$t()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const s=e.fields||{};this.dt(r,55);for(const c of Object.keys(s))this.Vt(c,r),this.Tt(s[c],r)}wt(e,r){var s,c;const d=e.fields||{};this.dt(r,53);const y="value",S=(null===(c=null===(s=d[y].arrayValue)||void 0===s?void 0:s.values)||void 0===c?void 0:c.length)||0;this.dt(r,15),r.At(Jr(S)),this.Vt(y,r),this.Tt(d[y],r)}bt(e,r){const s=e.values||[];this.dt(r,50);for(const c of s)this.Tt(c,r)}yt(e,r){this.dt(r,37),Ke.fromName(e).path.forEach(s=>{this.dt(r,60),this.Dt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function Em(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function fh(a){const e=64-function(s){let c=0;for(let d=0;d<8;++d){const y=Em(255&s[d]);if(c+=y,8!==y)break}return c}(a);return Math.ceil(e/8)}uo.vt=new uo;class ju{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ft(s.value),s=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ot(s.value),s=r.next();this.Nt()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const c=r.codePointAt(0);this.Ft(240|c>>>18),this.Ft(128|63&c>>>12),this.Ft(128|63&c>>>6),this.Ft(128|63&c)}}this.Mt()}Bt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const c=r.codePointAt(0);this.Ot(240|c>>>18),this.Ot(128|63&c>>>12),this.Ot(128|63&c>>>6),this.Ot(128|63&c)}}this.Nt()}kt(e){const r=this.qt(e),s=fh(r);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=255&r[c]}Kt(e){const r=this.qt(e),s=fh(r);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=~(255&r[c])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(d){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,d,!1),new Uint8Array(y.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let c=1;c<r.length;++c)r[c]^=s?255:0;return r}Ft(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class zl{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class ph{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ts{constructor(){this.jt=new ju,this.Ht=new zl(this.jt),this.Jt=new ph(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Ca{constructor(e,r,s,c){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=c}Zt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ca(this.indexId,this.documentKey,this.arrayValue,s)}}function ia(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=ll(a.arrayValue,e.arrayValue),0!==r?r:(r=ll(a.directionalValue,e.directionalValue),0!==r?r:Ke.comparator(a.documentKey,e.documentKey)))}function ll(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class Rf{constructor(e){this.Xt=new fr((r,s)=>Se.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const s=r;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(rn(e.collectionGroup===this.collectionId),this.nn)return!1;const r=an(e);if(void 0!==r&&!this.sn(r))return!1;const s=Qt(e);let c=new Set,d=0,y=0;for(;d<s.length&&this.sn(s[d]);++d)c=c.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(this.Xt.size>0){const S=this.Xt.getIterator().getNext();if(!c.has(S.field.canonicalString())){const F=s[d];if(!this.on(S,F)||!this._n(this.en[y++],F))return!1}++d}for(;d<s.length;++d)if(y>=this.en.length||!this._n(this.en[y++],s[d]))return!1;return!0}an(){if(this.nn)return null;let e=new fr(Se.comparator);const r=[];for(const s of this.tn)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new tn(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new tn(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new tn(s.field,"asc"===s.dir?0:1)));return new jt(jt.UNKNOWN_ID,this.collectionId,r,gt.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Hu(a){var e,r;if(rn(a instanceof tr||a instanceof nr),a instanceof tr){if(a instanceof $o){const c=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(d=>tr.create(a.field,"==",d)))||[];return nr.create(c,"or")}return a}const s=a.filters.map(c=>Hu(c));return nr.create(s,a.op)}function $u(a){if(0===a.getFilters().length)return[];const e=ul(Hu(a));return rn(Xa(e)),Da(e)||Qa(e)?[e]:e.getFilters()}function Da(a){return a instanceof tr}function Qa(a){return a instanceof nr&&co(a)}function Xa(a){return Da(a)||Qa(a)||function(r){if(r instanceof nr&&Ti(r)){for(const s of r.getFilters())if(!Da(s)&&!Qa(s))return!1;return!0}return!1}(a)}function ul(a){if(rn(a instanceof tr||a instanceof nr),a instanceof tr)return a;if(1===a.filters.length)return ul(a.filters[0]);const e=a.filters.map(s=>ul(s));let r=nr.create(e,a.op);return r=mh(r),Xa(r)?r:(rn(r instanceof nr),rn(Qi(r)),rn(r.filters.length>1),r.filters.reduce((s,c)=>Kl(s,c)))}function Kl(a,e){let r;return rn(a instanceof tr||a instanceof nr),rn(e instanceof tr||e instanceof nr),r=a instanceof tr?e instanceof tr?nr.create([a,e],"and"):wc(a,e):e instanceof tr?wc(e,a):function(c,d){if(rn(c.filters.length>0&&d.filters.length>0),Qi(c)&&Qi(d))return Zo(c,d.getFilters());const y=Ti(c)?c:d,S=Ti(c)?d:c,F=y.filters.map(q=>Kl(q,S));return nr.create(F,"or")}(a,e),mh(r)}function wc(a,e){if(Qi(e))return Zo(e,a.getFilters());{const r=e.filters.map(s=>Kl(a,s));return nr.create(r,"or")}}function mh(a){if(rn(a instanceof tr||a instanceof nr),a instanceof tr)return a;const e=a.getFilters();if(1===e.length)return mh(e[0]);if(Qs(a))return a;const r=e.map(c=>mh(c)),s=[];return r.forEach(c=>{c instanceof tr?s.push(c):c instanceof nr&&(c.op===a.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:nr.create(s,a.op)}class gh{constructor(){this.un=new xf}addToCollectionParentIndex(e,r){return this.un.add(r),Xe.resolve()}getCollectionParents(e,r){return Xe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Xe.resolve()}deleteFieldIndex(e,r){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,r){return Xe.resolve()}getDocumentsMatchingTarget(e,r){return Xe.resolve(null)}getIndexType(e,r){return Xe.resolve(0)}getFieldIndexes(e,r){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,r){return Xe.resolve(zt.min())}getMinOffsetFromCollectionGroup(e,r){return Xe.resolve(zt.min())}updateCollectionGroup(e,r,s){return Xe.resolve()}updateIndexEntries(e,r){return Xe.resolve()}}class xf{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r]||new fr(pe.comparator),d=!c.has(s);return this.index[r]=c.add(s),d}has(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r];return c&&c.has(s)}getEntries(e){return(this.index[e]||new fr(pe.comparator)).toArray()}}const _h=new Uint8Array(0);class Im{constructor(e,r){this.databaseId=r,this.cn=new xf,this.ln=new cr(s=>zo(s),(s,c)=>Oo(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const s=r.lastSegment(),c=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:s,parent:Ur(c)};return wm(e).put(d)}return Xe.resolve()}getCollectionParents(e,r){const s=[],c=IDBKeyRange.bound([r,""],[le(r),""],!1,!0);return wm(e).U(c).next(d=>{for(const y of d){if(y.collectionId!==r)break;s.push(ss(y.parent))}return s})}addFieldIndex(e,r){const s=zu(e),c={indexId:(S=r).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(F=>[F.fieldPath.canonicalString(),F.kind])};var S;delete c.indexId;const d=s.add(c);if(r.indexState){const y=Go(e);return d.next(S=>{y.put(lh(S,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(e,r){const s=zu(e),c=Go(e),d=Ya(e);return s.delete(r.indexId).next(()=>c.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=zu(e),s=Ya(e),c=Go(e);return r.j().next(()=>s.j()).next(()=>c.j())}createTargetIndexes(e,r){return Xe.forEach(this.hn(r),s=>this.getIndexType(e,s).next(c=>{if(0===c||1===c){const d=new Rf(s).an();if(null!=d)return this.addFieldIndex(e,d)}}))}getDocumentsMatchingTarget(e,r){const s=Ya(e);let c=!0;const d=new Map;return Xe.forEach(this.hn(r),y=>this.Pn(e,y).next(S=>{c&&(c=!!S),d.set(y,S)})).next(()=>{if(c){let y=Mn();const S=[];return Xe.forEach(d,(F,q)=>{var bn;et("IndexedDbIndexManager",`Using index ${bn=F,`id=${bn.indexId}|cg=${bn.collectionGroup}|f=${bn.fields.map(er=>`${er.fieldPath}:${er.kind}`).join(",")}`} to execute ${zo(r)}`);const ne=function(bn,er){const xr=an(er);if(void 0===xr)return null;for(const wr of ea(bn,xr.fieldPath))switch(wr.op){case"array-contains-any":return wr.value.arrayValue.values||[];case"array-contains":return[wr.value]}return null}(q,F),ye=function(bn,er){const xr=new Map;for(const wr of Qt(er))for(const ct of ea(bn,wr.fieldPath))switch(ct.op){case"==":case"in":xr.set(wr.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return xr.set(wr.fieldPath.canonicalString(),ct.value),Array.from(xr.values())}return null}(q,F),Ge=function(bn,er){const xr=[];let wr=!0;for(const ct of Qt(er)){const ke=0===ct.kind?kl(bn,ct.fieldPath,bn.startAt):hc(bn,ct.fieldPath,bn.startAt);xr.push(ke.value),wr&&(wr=ke.inclusive)}return new ei(xr,wr)}(q,F),bt=function(bn,er){const xr=[];let wr=!0;for(const ct of Qt(er)){const ke=0===ct.kind?hc(bn,ct.fieldPath,bn.endAt):kl(bn,ct.fieldPath,bn.endAt);xr.push(ke.value),wr&&(wr=ke.inclusive)}return new ei(xr,wr)}(q,F),Lt=this.In(F,q,Ge),Jt=this.In(F,q,bt),Kt=this.Tn(F,q,ye),Bn=this.En(F.indexId,ne,Lt,Ge.inclusive,Jt,bt.inclusive,Kt);return Xe.forEach(Bn,Jn=>s.G(Jn,r.limit).next(bn=>{bn.forEach(er=>{const xr=Ke.fromSegments(er.documentKey);y.has(xr)||(y=y.add(xr),S.push(xr))})}))}).next(()=>S)}return Xe.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(r=0===e.filters.length?[e]:$u(nr.create(e.filters,"and")).map(s=>Ha(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,s,c,d,y,S){const F=(null!=r?r.length:1)*Math.max(s.length,d.length),q=F/(null!=r?r.length:1),ne=[];for(let ye=0;ye<F;++ye){const Ge=r?this.dn(r[ye/q]):_h,bt=this.An(e,Ge,s[ye%q],c),Lt=this.Rn(e,Ge,d[ye%q],y),Jt=S.map(Kt=>this.An(e,Ge,Kt,!0));ne.push(...this.createRange(bt,Lt,Jt))}return ne}An(e,r,s,c){const d=new Ca(e,Ke.empty(),r,s);return c?d:d.Zt()}Rn(e,r,s,c){const d=new Ca(e,Ke.empty(),r,s);return c?d.Zt():d}Pn(e,r){const s=new Rf(r),c=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,c).next(d=>{let y=null;for(const S of d)s.rn(S)&&(!y||S.fields.length>y.fields.length)&&(y=S);return y})}getIndexType(e,r){let s=2;const c=this.hn(r);return Xe.forEach(c,d=>this.Pn(e,d).next(y=>{y?0!==s&&y.fields.length<function(F){let q=new fr(Se.comparator),ne=!1;for(const ye of F.filters)for(const Ge of ye.getFlattenedFilters())Ge.field.isKeyField()||("array-contains"===Ge.op||"array-contains-any"===Ge.op?ne=!0:q=q.add(Ge.field));for(const ye of F.orderBy)ye.field.isKeyField()||(q=q.add(ye.field));return q.size+(ne?1:0)}(d)&&(s=1):s=0})).next(()=>null!==r.limit&&c.length>1&&2===s?1:s)}Vn(e,r){const s=new ts;for(const c of Qt(e)){const d=r.data.field(c.fieldPath);if(null==d)return null;const y=s.Yt(c.kind);uo.vt.It(d,y)}return s.zt()}dn(e){const r=new ts;return uo.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const s=new ts;return uo.vt.It(ao(this.databaseId,r),s.Yt(function(d){const y=Qt(d);return 0===y.length?0:y[y.length-1].kind}(e))),s.zt()}Tn(e,r,s){if(null===s)return[];let c=[];c.push(new ts);let d=0;for(const y of Qt(e)){const S=s[d++];for(const F of c)if(this.fn(r,y.fieldPath)&&G(S))c=this.gn(c,y,S);else{const q=F.Yt(y.kind);uo.vt.It(S,q)}}return this.pn(c)}In(e,r,s){return this.Tn(e,r,s.position)}pn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].zt();return r}gn(e,r,s){const c=[...e],d=[];for(const y of s.arrayValue.values||[])for(const S of c){const F=new ts;F.seed(S.zt()),uo.vt.It(y,F.Yt(r.kind)),d.push(F)}return d}fn(e,r){return!!e.filters.find(s=>s instanceof tr&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=zu(e),c=Go(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(d=>{const y=[];return Xe.forEach(d,S=>c.get([S.indexId,this.uid]).next(F=>{y.push(function(ne,ye){const Ge=ye?new gt(ye.sequenceNumber,new zt(ro(ye.readTime),new Ke(ss(ye.documentKey)),ye.largestBatchId)):gt.empty(),bt=ne.fields.map(([Lt,Jt])=>new tn(Se.fromServerFormat(Lt),Jt));return new jt(ne.indexId,ne.collectionGroup,bt,Ge)}(S,F))})).next(()=>y)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,c)=>{const d=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==d?d:ue(s.collectionGroup,c.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const c=zu(e),d=Go(e);return this.yn(e).next(y=>c.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(S=>Xe.forEach(S,F=>d.put(lh(F.indexId,this.uid,y,s)))))}updateIndexEntries(e,r){const s=new Map;return Xe.forEach(r,(c,d)=>{const y=s.get(c.collectionGroup);return(y?Xe.resolve(y):this.getFieldIndexes(e,c.collectionGroup)).next(S=>(s.set(c.collectionGroup,S),Xe.forEach(S,F=>this.wn(e,c,F).next(q=>{const ne=this.Sn(d,F);return q.isEqual(ne)?Xe.resolve():this.bn(e,d,F,q,ne)}))))})}Dn(e,r,s,c){return Ya(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(s,r.key),documentKey:r.key.path.toArray()})}vn(e,r,s,c){return Ya(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(s,r.key),r.key.path.toArray()])}wn(e,r,s){const c=Ya(e);let d=new fr(ia);return c.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,r)])},(y,S)=>{d=d.add(new Ca(s.indexId,r,S.arrayValue,S.directionalValue))}).next(()=>d)}Sn(e,r){let s=new fr(ia);const c=this.Vn(r,e);if(null==c)return s;const d=an(r);if(null!=d){const y=e.data.field(d.fieldPath);if(G(y))for(const S of y.arrayValue.values||[])s=s.add(new Ca(r.indexId,e.key,this.dn(S),c))}else s=s.add(new Ca(r.indexId,e.key,_h,c));return s}bn(e,r,s,c,d){et("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const y=[];return function(F,q,ne,ye,Ge){const bt=F.getIterator(),Lt=q.getIterator();let Jt=mi(bt),Kt=mi(Lt);for(;Jt||Kt;){let Bn=!1,Jn=!1;if(Jt&&Kt){const bn=ne(Jt,Kt);bn<0?Jn=!0:bn>0&&(Bn=!0)}else null!=Jt?Jn=!0:Bn=!0;Bn?(ye(Kt),Kt=mi(Lt)):Jn?(Ge(Jt),Jt=mi(bt)):(Jt=mi(bt),Kt=mi(Lt))}}(c,d,ia,S=>{y.push(this.Dn(e,r,s,S))},S=>{y.push(this.vn(e,r,s,S))}),Xe.waitFor(y)}yn(e){let r=1;return Go(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,d)=>{d.done(),r=c.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((y,S)=>ia(y,S)).filter((y,S,F)=>!S||0!==ia(y,F[S-1]));const c=[];c.push(e);for(const y of s){const S=ia(y,e),F=ia(y,r);if(0===S)c[0]=e.Zt();else if(S>0&&F<0)c.push(y),c.push(y.Zt());else if(F>0)break}c.push(r);const d=[];for(let y=0;y<c.length;y+=2){if(this.Cn(c[y],c[y+1]))return[];d.push(IDBKeyRange.bound([c[y].indexId,this.uid,c[y].arrayValue,c[y].directionalValue,_h,[]],[c[y+1].indexId,this.uid,c[y+1].arrayValue,c[y+1].directionalValue,_h,[]]))}return d}Cn(e,r){return ia(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Mf)}getMinOffset(e,r){return Xe.mapArray(this.hn(r),s=>this.Pn(e,s).next(c=>c||$t())).next(Mf)}}function wm(a){return Kr(a,"collectionParents")}function Ya(a){return Kr(a,"indexEntries")}function zu(a){return Kr(a,"indexConfiguration")}function Go(a){return Kr(a,"indexState")}function Mf(a){rn(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const c=a[s].indexState.offset;Fn(c,e)<0&&(e=c),r<c.largestBatchId&&(r=c.largestBatchId)}return new zt(e.readTime,e.documentKey,r)}const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class di{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new di(e,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Of(a,e,r){const s=a.store("mutations"),c=a.store("documentMutations"),d=[],y=IDBKeyRange.only(r.batchId);let S=0;const F=s.J({range:y},(ne,ye,Ge)=>(S++,Ge.delete()));d.push(F.next(()=>{rn(1===S)}));const q=[];for(const ne of r.mutations){const ye=zs(e,ne.key.path,r.batchId);d.push(c.delete(ye)),q.push(ne.key)}return Xe.waitFor(d).next(()=>q)}function Za(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw $t();e=a.noDocument}return JSON.stringify(e).length}di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(41943040,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);class Ku{constructor(e,r,s,c){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=c,this.Fn={}}static lt(e,r,s,c){rn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Ku(d,r,s,c)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return So(e).J({index:"userMutationsIndex",range:s},(c,d,y)=>{r=!1,y.done()}).next(()=>r)}addMutationBatch(e,r,s,c){const d=Tc(e),y=So(e);return y.add({}).next(S=>{rn("number"==typeof S);const F=new Xc(S,r,s,c),q=function(bt,Lt,Jt){const Kt=Jt.baseMutations.map(Jn=>Wa(bt.ct,Jn)),Bn=Jt.mutations.map(Jn=>Wa(bt.ct,Jn));return{userId:Lt,batchId:Jt.batchId,localWriteTimeMs:Jt.localWriteTime.toMillis(),baseMutations:Kt,mutations:Bn}}(this.serializer,this.userId,F),ne=[];let ye=new fr((Ge,bt)=>ue(Ge.canonicalString(),bt.canonicalString()));for(const Ge of c){const bt=zs(this.userId,Ge.key.path,S);ye=ye.add(Ge.key.path.popLast()),ne.push(y.put(q)),ne.push(d.put(bt,Ks))}return ye.forEach(Ge=>{ne.push(this.indexManager.addToCollectionParentIndex(e,Ge))}),e.addOnCommittedListener(()=>{this.Fn[S]=F.keys()}),Xe.waitFor(ne).next(()=>F)})}lookupMutationBatch(e,r){return So(e).get(r).next(s=>s?(rn(s.userId===this.userId),Ec(this.serializer,s)):null)}Mn(e,r){return this.Fn[r]?Xe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const c=s.keys();return this.Fn[r]=c,c}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,c=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return So(e).J({index:"userMutationsIndex",range:c},(y,S,F)=>{S.userId===this.userId&&(rn(S.batchId>=s),d=Ec(this.serializer,S)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return So(e).J({index:"userMutationsIndex",range:r,reverse:!0},(c,d,y)=>{s=d.batchId,y.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return So(e).U("userMutationsIndex",r).next(s=>s.map(c=>Ec(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=Ms(this.userId,r.path),c=IDBKeyRange.lowerBound(s),d=[];return Tc(e).J({range:c},(y,S,F)=>{const[q,ne,ye]=y,Ge=ss(ne);if(q===this.userId&&r.path.isEqual(Ge))return So(e).get(ye).next(bt=>{if(!bt)throw $t();rn(bt.userId===this.userId),d.push(Ec(this.serializer,bt))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new fr(ue);const c=[];return r.forEach(d=>{const y=Ms(this.userId,d.path),S=IDBKeyRange.lowerBound(y),F=Tc(e).J({range:S},(q,ne,ye)=>{const[Ge,bt,Lt]=q,Jt=ss(bt);Ge===this.userId&&d.path.isEqual(Jt)?s=s.add(Lt):ye.done()});c.push(F)}),Xe.waitFor(c).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1,d=Ms(this.userId,s),y=IDBKeyRange.lowerBound(d);let S=new fr(ue);return Tc(e).J({range:y},(F,q,ne)=>{const[ye,Ge,bt]=F,Lt=ss(Ge);ye===this.userId&&s.isPrefixOf(Lt)?Lt.length===c&&(S=S.add(bt)):ne.done()}).next(()=>this.xn(e,S))}xn(e,r){const s=[],c=[];return r.forEach(d=>{c.push(So(e).get(d).next(y=>{if(null===y)throw $t();rn(y.userId===this.userId),s.push(Ec(this.serializer,y))}))}),Xe.waitFor(c).next(()=>s)}removeMutationBatch(e,r){return Of(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Xe.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Xe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return Tc(e).J({range:s},(d,y,S)=>{if(d[0]===this.userId){const F=ss(d[1]);c.push(F)}else S.done()}).next(()=>{rn(0===c.length)})})}containsKey(e,r){return ho(e,this.userId,r)}Nn(e){return Wl(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ho(a,e,r){const s=Ms(e,r.path),c=s[1],d=IDBKeyRange.lowerBound(s);let y=!1;return Tc(a).J({range:d,H:!0},(S,F,q)=>{const[ne,ye,Ge]=S;ne===e&&ye===c&&(y=!0),q.done()}).next(()=>y)}function So(a){return Kr(a,"mutations")}function Tc(a){return Kr(a,"documentMutations")}function Wl(a){return Kr(a,"mutationQueues")}class qo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qo(0)}static kn(){return new qo(-1)}}class Tm{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const s=new qo(r.highestTargetId);return r.highestTargetId=s.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>je.fromTimestamp(new be(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.qn(e).next(c=>(c.highestListenSequenceNumber=r,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),r>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=r),this.Qn(e,c)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(r,s),this.Qn(e,s))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>dl(e).delete(r.targetId)).next(()=>this.qn(e)).next(s=>(rn(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,r,s){let c=0;const d=[];return dl(e).J((y,S)=>{const F=ra(S);F.sequenceNumber<=r&&null===s.get(F.targetId)&&(c++,d.push(this.removeTargetData(e,F)))}).next(()=>Xe.waitFor(d)).next(()=>c)}forEachTarget(e,r){return dl(e).J((s,c)=>{const d=ra(c);r(d)})}qn(e){return Nf(e).get("targetGlobalKey").next(r=>(rn(null!==r),r))}Qn(e,r){return Nf(e).put("targetGlobalKey",r)}Kn(e,r){return dl(e).put(sl(this.serializer,r))}$n(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=zo(r),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return dl(e).J({range:c,index:"queryTargetsIndex"},(y,S,F)=>{const q=ra(S);Oo(r,q.target)&&(d=q,F.done())}).next(()=>d)}addMatchingKeys(e,r,s){const c=[],d=Ac(e);return r.forEach(y=>{const S=Ur(y.path);c.push(d.put({targetId:s,path:S})),c.push(this.referenceDelegate.addReference(e,s,y))}),Xe.waitFor(c)}removeMatchingKeys(e,r,s){const c=Ac(e);return Xe.forEach(r,d=>{const y=Ur(d.path);return Xe.waitFor([c.delete([s,y]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,r){const s=Ac(e),c=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),c=Ac(e);let d=Mn();return c.J({range:s,H:!0},(y,S,F)=>{const q=ss(y[1]),ne=new Ke(q);d=d.add(ne)}).next(()=>d)}containsKey(e,r){const s=Ur(r.path),c=IDBKeyRange.bound([s],[le(s)],!1,!0);let d=0;return Ac(e).J({index:"documentTargetsIndex",H:!0,range:c},([y,S],F,q)=>{0!==y&&(d++,q.done())}).next(()=>d>0)}ot(e,r){return dl(e).get(r).next(s=>s?ra(s):null)}}function dl(a){return Kr(a,"targets")}function Nf(a){return Kr(a,"targetGlobal")}function Ac(a){return Kr(a,"targetDocuments")}function Eo([a,e],[r,s]){const c=ue(a,r);return 0===c?ue(e,s):c}class yh{constructor(e){this.Un=e,this.buffer=new fr(Eo),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();Eo(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Cc{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var r=this;et("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){zr(s)?et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ir(s)}yield r.Hn(3e5)}))}}class kf{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return Xe.resolve(Br.oe);const s=new yh(r);return this.Jn.forEachTarget(e,c=>s.zn(c.sequenceNumber)).next(()=>this.Jn.Zn(e,c=>s.zn(c))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(Pf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pf):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let s,c,d,y,S,F,q;const ne=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ye=>(ye>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ye}`),c=this.params.maximumSequenceNumbersToCollect):c=ye,y=Date.now(),this.nthSequenceNumber(e,c))).next(ye=>(s=ye,S=Date.now(),this.removeTargets(e,s,r))).next(ye=>(d=ye,F=Date.now(),this.removeOrphanedDocuments(e,s))).next(ye=>(q=Date.now(),Ln()<=zn.$b.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${y-ne}ms\n\tDetermined least recently used ${c} in `+(S-y)+`ms\n\tRemoved ${d} targets in `+(F-S)+`ms\n\tRemoved ${ye} documents in `+(q-F)+`ms\nTotal Duration: ${q-ne}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:d,documentsRemoved:ye})))}}class Am{constructor(e,r){this.db=e,this.garbageCollector=function Gl(a,e){return new kf(a,e)}(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(c=>s+c))}er(e){let r=0;return this.Zn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(s,c)=>r(c))}addReference(e,r,s){return hl(e,s)}removeReference(e,r,s){return hl(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return hl(e,r)}nr(e,r){return function(c,d){let y=!1;return Wl(c).Y(S=>ho(c,S,d).next(F=>(F&&(y=!0),Xe.resolve(!F)))).next(()=>y)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let d=0;return this.tr(e,(y,S)=>{if(S<=r){const F=this.nr(e,y).next(q=>{if(!q)return d++,s.getEntry(e,y).next(()=>(s.removeEntry(y,je.min()),Ac(e).delete([0,Ur(y.path)])))});c.push(F)}}).next(()=>Xe.waitFor(c)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return hl(e,r)}tr(e,r){const s=Ac(e);let c,d=Br.oe;return s.J({index:"documentTargetsIndex"},([y,S],{path:F,sequenceNumber:q})=>{0===y?(d!==Br.oe&&r(new Ke(ss(c)),d),d=q,c=F):d=Br.oe}).next(()=>{d!==Br.oe&&r(new Ke(ss(c)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hl(a,e){return Ac(a).put((c=a.currentSequenceNumber,{targetId:0,path:Ur(e.path),sequenceNumber:c}));var c}class Ff{constructor(){this.changes=new cr(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?Xe.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Lf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return Sa(e).put(s)}removeEntry(e,r,s){return Sa(e).delete(function(d,y){const S=d.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],Hl(y),S[S.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.rr(e,s)))}getEntry(e,r){let s=or.newInvalidDocument(r);return Sa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dc(r))},(c,d)=>{s=this.ir(r,d)}).next(()=>s)}sr(e,r){let s={size:0,document:or.newInvalidDocument(r)};return Sa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dc(r))},(c,d)=>{s={document:this.ir(r,d),size:Za(d)}}).next(()=>s)}getEntries(e,r){let s=gr();return this._r(e,r,(c,d)=>{const y=this.ir(c,d);s=s.insert(c,y)}).next(()=>s)}ar(e,r){let s=gr(),c=new vr(Ke.comparator);return this._r(e,r,(d,y)=>{const S=this.ir(d,y);s=s.insert(d,S),c=c.insert(d,Za(y))}).next(()=>({documents:s,ur:c}))}_r(e,r,s){if(r.isEmpty())return Xe.resolve();let c=new fr(ql);r.forEach(F=>c=c.add(F));const d=IDBKeyRange.bound(Dc(c.first()),Dc(c.last())),y=c.getIterator();let S=y.getNext();return Sa(e).J({index:"documentKeyIndex",range:d},(F,q,ne)=>{const ye=Ke.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;S&&ql(S,ye)<0;)s(S,null),S=y.getNext();S&&S.isEqual(ye)&&(s(S,q),S=y.hasNext()?y.getNext():null),S?ne.$(Dc(S)):ne.done()}).next(()=>{for(;S;)s(S,null),S=y.hasNext()?y.getNext():null})}getDocumentsMatchingQuery(e,r,s,c,d){const y=r.path,S=[y.popLast().toArray(),y.lastSegment(),Hl(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],F=[y.popLast().toArray(),y.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sa(e).U(IDBKeyRange.bound(S,F,!0)).next(q=>{d?.incrementDocumentReadCount(q.length);let ne=gr();for(const ye of q){const Ge=this.ir(Ke.fromSegments(ye.prefixPath.concat(ye.collectionGroup,ye.documentId)),ye);Ge.isFoundDocument()&&(Dn(r,Ge)||c.has(Ge.key))&&(ne=ne.insert(Ge.key,Ge))}return ne})}getAllFromCollectionGroup(e,r,s,c){let d=gr();const y=fl(r,s),S=fl(r,zt.max());return Sa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(y,S,!0)},(F,q,ne)=>{const ye=this.ir(Ke.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);d=d.insert(ye.key,ye),d.size===c&&ne.done()}).next(()=>d)}newChangeBuffer(e){return new bh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Wu(e).get("remoteDocumentGlobalKey").next(r=>(rn(!!r),r))}rr(e,r){return Wu(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const s=function Sf(a,e){let r;if(e.document)r=Vl(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ke.fromSegments(e.noDocument.path),c=ro(e.noDocument.readTime);r=or.newNoDocument(s,c),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return $t();{const s=Ke.fromSegments(e.unknownDocument.path),c=ro(e.unknownDocument.version);r=or.newUnknownDocument(s,c)}}return e.readTime&&r.setReadTime(function(c){const d=new be(c[0],c[1]);return je.fromTimestamp(d)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(je.min()))return s}return or.newInvalidDocument(e)}}function vh(a){return new Lf(a)}class bh extends Ff{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new cr(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const r=[];let s=0,c=new fr((d,y)=>ue(d.canonicalString(),y.canonicalString()));return this.changes.forEach((d,y)=>{const S=this.lr.get(d);if(r.push(this.cr.removeEntry(e,d,S.readTime)),y.isValidDocument()){const F=jl(this.cr.serializer,y);c=c.add(d.path.popLast());const q=Za(F);s+=q-S.size,r.push(this.cr.addEntry(e,d,F))}else if(s-=S.size,this.trackRemovals){const F=jl(this.cr.serializer,y.convertToNoDocument(je.min()));r.push(this.cr.addEntry(e,d,F))}}),c.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,d))}),r.push(this.cr.updateMetadata(e,s)),Xe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(s=>(this.lr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:s,ur:c})=>(c.forEach((d,y)=>{this.lr.set(d,{size:y,readTime:s.get(d).readTime})}),s))}}function Wu(a){return Kr(a,"remoteDocumentGlobal")}function Sa(a){return Kr(a,"remoteDocumentsV14")}function Dc(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fl(a,e){const r=e.documentKey.path.toArray();return[a,Hl(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function ql(a,e){const r=a.path.toArray(),s=e.path.toArray();let c=0;for(let d=0;d<r.length-2&&d<s.length-2;++d)if(c=ue(r[d],s[d]),c)return c;return c=ue(r.length,s.length),c||(c=ue(r[r.length-2],s[s.length-2]),c||ue(r[r.length-1],s[s.length-1]))}class Ql{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Eh{constructor(e,r,s,c){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,r))).next(c=>(null!==s&&pc(s.mutation,c,Hi.empty(),be.now()),c))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,Mn()).next(()=>s))}getLocalViewOfDocuments(e,r,s=Mn()){const c=Fr();return this.populateOverlays(e,c,r).next(()=>this.computeViews(e,r,c,s).next(d=>{let y=Ui();return d.forEach((S,F)=>{y=y.insert(S,F.overlayedDocument)}),y}))}getOverlayedDocuments(e,r){const s=Fr();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,Mn()))}populateOverlays(e,r,s){const c=[];return s.forEach(d=>{r.has(d)||c.push(d)}),this.documentOverlayCache.getOverlays(e,c).next(d=>{d.forEach((y,S)=>{r.set(y,S)})})}computeViews(e,r,s,c){let d=gr();const y=li(),S=li();return r.forEach((F,q)=>{const ne=s.get(q.key);c.has(q.key)&&(void 0===ne||ne.mutation instanceof Fs)?d=d.insert(q.key,q):void 0!==ne?(y.set(q.key,ne.mutation.getFieldMask()),pc(ne.mutation,q,ne.mutation.getFieldMask(),be.now())):y.set(q.key,Hi.empty())}),this.recalculateAndSaveOverlays(e,d).next(F=>(F.forEach((q,ne)=>y.set(q,ne)),r.forEach((q,ne)=>{var ye;return S.set(q,new Ql(ne,null!==(ye=y.get(q))&&void 0!==ye?ye:null))}),S))}recalculateAndSaveOverlays(e,r){const s=li();let c=new vr((y,S)=>y-S),d=Mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(y=>{for(const S of y)S.keys().forEach(F=>{const q=r.get(F);if(null===q)return;let ne=s.get(F)||Hi.empty();ne=S.applyToLocalView(q,ne),s.set(F,ne);const ye=(c.get(S.batchId)||Mn()).add(F);c=c.insert(S.batchId,ye)})}).next(()=>{const y=[],S=c.getReverseIterator();for(;S.hasNext();){const F=S.getNext(),q=F.key,ne=F.value,ye=ci();ne.forEach(Ge=>{if(!d.has(Ge)){const bt=Fl(r.get(Ge),s.get(Ge));null!==bt&&ye.set(Ge,bt),d=d.add(Ge)}}),y.push(this.documentOverlayCache.saveOverlays(e,q,ye))}return Xe.waitFor(y)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,c){return Ke.isDocumentKey((y=r).path)&&null===y.collectionGroup&&0===y.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):V(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,c):this.getDocumentsMatchingCollectionQuery(e,r,s,c);var y}getNextDocuments(e,r,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,c).next(d=>{const y=c-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,c-d.size):Xe.resolve(Fr());let S=-1,F=d;return y.next(q=>Xe.forEach(q,(ne,ye)=>(S<ye.largestBatchId&&(S=ye.largestBatchId),d.get(ne)?Xe.resolve():this.remoteDocumentCache.getEntry(e,ne).next(Ge=>{F=F.insert(ne,Ge)}))).next(()=>this.populateOverlays(e,q,d)).next(()=>this.computeViews(e,F,q,Mn())).next(ne=>({batchId:S,changes:Ji(ne)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ke(r)).next(s=>{let c=Ui();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,r,s,c){const d=r.collectionGroup;let y=Ui();return this.indexManager.getCollectionParents(e,d).next(S=>Xe.forEach(S,F=>{const q=(ye=r,Ge=F.child(d),new Ns(Ge,null,ye.explicitOrderBy.slice(),ye.filters.slice(),ye.limit,ye.limitType,ye.startAt,ye.endAt));var ye,Ge;return this.getDocumentsMatchingCollectionQuery(e,q,s,c).next(ne=>{ne.forEach((ye,Ge)=>{y=y.insert(ye,Ge)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,r,s,c){let d;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(y=>(d=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,d,c))).next(y=>{d.forEach((F,q)=>{const ne=q.getKey();null===y.get(ne)&&(y=y.insert(ne,or.newInvalidDocument(ne)))});let S=Ui();return y.forEach((F,q)=>{const ne=d.get(F);void 0!==ne&&pc(ne.mutation,q,Hi.empty(),be.now()),Dn(r,q)&&(S=S.insert(F,q))}),S})}}class Vf{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Xe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,{id:(c=r).id,version:c.version,createTime:Mr(c.createTime)}),Xe.resolve();var c}getNamedQuery(e,r){return Xe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,{name:(c=r).name,query:ol(c.bundledQuery),readTime:Mr(c.readTime)}),Xe.resolve();var c}}class Ih{constructor(){this.overlays=new vr(Ke.comparator),this.Ir=new Map}getOverlay(e,r){return Xe.resolve(this.overlays.get(r))}getOverlays(e,r){const s=Fr();return Xe.forEach(r,c=>this.getOverlay(e,c).next(d=>{null!==d&&s.set(c,d)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((c,d)=>{this.ht(e,r,d)}),Xe.resolve()}removeOverlaysForBatchId(e,r,s){const c=this.Ir.get(s);return void 0!==c&&(c.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(s)),Xe.resolve()}getOverlaysForCollection(e,r,s){const c=Fr(),d=r.length+1,y=new Ke(r.child("")),S=this.overlays.getIteratorFrom(y);for(;S.hasNext();){const F=S.getNext().value,q=F.getKey();if(!r.isPrefixOf(q.path))break;q.path.length===d&&F.largestBatchId>s&&c.set(F.getKey(),F)}return Xe.resolve(c)}getOverlaysForCollectionGroup(e,r,s,c){let d=new vr((q,ne)=>q-ne);const y=this.overlays.getIterator();for(;y.hasNext();){const q=y.getNext().value;if(q.getKey().getCollectionGroup()===r&&q.largestBatchId>s){let ne=d.get(q.largestBatchId);null===ne&&(ne=Fr(),d=d.insert(q.largestBatchId,ne)),ne.set(q.getKey(),q)}}const S=Fr(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((q,ne)=>S.set(q,ne)),!(S.size()>=c)););return Xe.resolve(S)}ht(e,r,s){const c=this.overlays.get(s.key);if(null!==c){const y=this.Ir.get(c.largestBatchId).delete(s.key);this.Ir.set(c.largestBatchId,y)}this.overlays=this.overlays.insert(s.key,new bo(r,s));let d=this.Ir.get(r);void 0===d&&(d=Mn(),this.Ir.set(r,d)),this.Ir.set(r,d.add(s.key))}}class Gu{constructor(){this.sessionToken=Nr.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Xe.resolve()}}class qu{constructor(){this.Tr=new fr(Ls.Er),this.dr=new fr(Ls.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new Ls(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Vr(new Ls(e,r))}mr(e,r){e.forEach(s=>this.removeReference(s,r))}gr(e){const r=new Ke(new pe([])),s=new Ls(r,e),c=new Ls(r,e+1),d=[];return this.dr.forEachInRange([s,c],y=>{this.Vr(y),d.push(y.key)}),d}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ke(new pe([])),s=new Ls(r,e),c=new Ls(r,e+1);let d=Mn();return this.dr.forEachInRange([s,c],y=>{d=d.add(y.key)}),d}containsKey(e){const r=new Ls(e,0),s=this.Tr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class Ls{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ke.comparator(e.key,r.key)||ue(e.wr,r.wr)}static Ar(e,r){return ue(e.wr,r.wr)||Ke.comparator(e.key,r.key)}}class Bf{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new fr(Ls.Er)}checkEmpty(e){return Xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,c){const d=this.Sr;this.Sr++;const y=new Xc(d,r,s,c);this.mutationQueue.push(y);for(const S of c)this.br=this.br.add(new Ls(S.key,d)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return Xe.resolve(y)}lookupMutationBatch(e,r){return Xe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const c=this.vr(r+1),d=c<0?0:c;return Xe.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new Ls(r,0),c=new Ls(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([s,c],y=>{const S=this.Dr(y.wr);d.push(S)}),Xe.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new fr(ue);return r.forEach(c=>{const d=new Ls(c,0),y=new Ls(c,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,y],S=>{s=s.add(S.wr)})}),Xe.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1;let d=s;Ke.isDocumentKey(d)||(d=d.child(""));const y=new Ls(new Ke(d),0);let S=new fr(ue);return this.br.forEachWhile(F=>{const q=F.key.path;return!!s.isPrefixOf(q)&&(q.length===c&&(S=S.add(F.wr)),!0)},y),Xe.resolve(this.Cr(S))}Cr(e){const r=[];return e.forEach(s=>{const c=this.Dr(s);null!==c&&r.push(c)}),r}removeMutationBatch(e,r){rn(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return Xe.forEach(r.mutations,c=>{const d=new Ls(c.key,r.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,r){const s=new Ls(r,0),c=this.br.firstAfterOrEqual(s);return Xe.resolve(r.isEqual(c&&c.key))}performConsistencyCheck(e){return Xe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class pl{constructor(e){this.Mr=e,this.docs=new vr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,c=this.docs.get(s),d=c?c.size:0,y=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:y}),this.size+=y-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return Xe.resolve(s?s.document.mutableCopy():or.newInvalidDocument(r))}getEntries(e,r){let s=gr();return r.forEach(c=>{const d=this.docs.get(c);s=s.insert(c,d?d.document.mutableCopy():or.newInvalidDocument(c))}),Xe.resolve(s)}getDocumentsMatchingQuery(e,r,s,c){let d=gr();const y=r.path,S=new Ke(y.child("")),F=this.docs.getIteratorFrom(S);for(;F.hasNext();){const{key:q,value:{document:ne}}=F.getNext();if(!y.isPrefixOf(q.path))break;q.path.length>y.length+1||Fn(xt(ne),s)<=0||(c.has(ne.key)||Dn(r,ne))&&(d=d.insert(ne.key,ne.mutableCopy()))}return Xe.resolve(d)}getAllFromCollectionGroup(e,r,s,c){$t()}Or(e,r){return Xe.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new Qu(this)}getSize(e){return Xe.resolve(this.size)}}class Qu extends Ff{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?r.push(this.cr.addEntry(e,c)):this.cr.removeEntry(s)}),Xe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class Cm{constructor(e){this.persistence=e,this.Nr=new cr(r=>zo(r),Oo),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qu,this.targetCount=0,this.kr=qo.Bn()}forEachTarget(e,r){return this.Nr.forEach((s,c)=>r(c)),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),Xe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new qo(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Xe.resolve()}updateTargetData(e,r){return this.Kn(r),Xe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,r,s){let c=0;const d=[];return this.Nr.forEach((y,S)=>{S.sequenceNumber<=r&&null===s.get(S.targetId)&&(this.Nr.delete(y),d.push(this.removeMatchingKeysForTargetId(e,S.targetId)),c++)}),Xe.waitFor(d).next(()=>c)}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return Xe.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),Xe.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const c=this.persistence.referenceDelegate,d=[];return c&&r.forEach(y=>{d.push(c.markPotentiallyOrphaned(e,y))}),Xe.waitFor(d)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Xe.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return Xe.resolve(s)}containsKey(e,r){return Xe.resolve(this.Br.containsKey(r))}}class Ja{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Br(0),this.Kr=!1,this.Kr=!0,this.$r=new Gu,this.referenceDelegate=e(this),this.Ur=new Cm(this),this.indexManager=new gh,this.remoteDocumentCache=new pl(s=>this.referenceDelegate.Wr(s)),this.serializer=new Ul(r),this.Gr=new Vf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Ih,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new Bf(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){et("MemoryPersistence","Starting transaction:",e);const c=new Uf(this.Qr.next());return this.referenceDelegate.zr(),s(c).next(d=>this.referenceDelegate.jr(c).next(()=>d)).toPromise().then(d=>(c.raiseOnCommittedEvent(),d))}Hr(e,r){return Xe.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,r)))}}class Uf extends In{constructor(e){super(),this.currentSequenceNumber=e}}class Xu{constructor(e){this.persistence=e,this.Jr=new qu,this.Yr=null}static Zr(e){return new Xu(e)}get Xr(){if(this.Yr)return this.Yr;throw $t()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),Xe.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),Xe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Xe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(c=>this.Xr.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(c=>{c.forEach(d=>this.Xr.add(d.toString()))}).next(()=>s.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Xr,s=>{const c=Ke.fromPath(s);return this.ei(e,c).next(d=>{d||r.removeEntry(c,je.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Xe.or([()=>Xe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Dm{constructor(e){this.serializer=e}O(e,r,s,c){const d=new Vn("createOrUpgrade",r);var F;s<1&&c>=1&&(e.createObjectStore("owner"),(F=e).createObjectStore("mutationQueues",{keyPath:"userId"}),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$s,{unique:!0}),F.createObjectStore("documentMutations"),Yu(e),function(F){F.createObjectStore("remoteDocuments")}(e));let y=Xe.resolve();return s<3&&c>=3&&(0!==s&&(function(F){F.deleteObjectStore("targetDocuments"),F.deleteObjectStore("targets"),F.deleteObjectStore("targetGlobal")}(e),Yu(e)),y=y.next(()=>function(F){const q=F.store("targetGlobal"),ne={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:je.min().toTimestamp(),targetCount:0};return q.put("targetGlobalKey",ne)}(d))),s<4&&c>=4&&(0!==s&&(y=y.next(()=>function(F,q){return q.store("mutations").U().next(ne=>{F.deleteObjectStore("mutations"),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$s,{unique:!0});const ye=q.store("mutations"),Ge=ne.map(bt=>ye.put(bt));return Xe.waitFor(Ge)})}(e,d))),y=y.next(()=>{!function(F){F.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(y=y.next(()=>this.ni(d))),s<6&&c>=6&&(y=y.next(()=>(function(F){F.createObjectStore("remoteDocumentGlobal")}(e),this.ri(d)))),s<7&&c>=7&&(y=y.next(()=>this.ii(d))),s<8&&c>=8&&(y=y.next(()=>this.si(e,d))),s<9&&c>=9&&(y=y.next(()=>{!function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(y=y.next(()=>this.oi(d))),s<11&&c>=11&&(y=y.next(()=>{(function(F){F.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(F){F.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(y=y.next(()=>{!function(F){const q=F.createObjectStore("documentOverlays",{keyPath:bs});q.createIndex("collectionPathOverlayIndex",Es,{unique:!1}),q.createIndex("collectionGroupOverlayIndex",qr,{unique:!1})}(e)})),s<13&&c>=13&&(y=y.next(()=>function(F){const q=F.createObjectStore("remoteDocumentsV14",{keyPath:Gi});q.createIndex("documentKeyIndex",Vi),q.createIndex("collectionGroupIndex",Ws)}(e)).next(()=>this._i(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(y=y.next(()=>this.ai(e,d))),s<15&&c>=15&&(y=y.next(()=>function(F){F.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),F.createObjectStore("indexState",{keyPath:Oi}).createIndex("sequenceNumberIndex",Zs,{unique:!1}),F.createObjectStore("indexEntries",{keyPath:Ps}).createIndex("documentKeyIndex",Gs,{unique:!1})}(e))),s<16&&c>=16&&(y=y.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&c>=17&&(y=y.next(()=>{!function(F){F.createObjectStore("globals",{keyPath:"name"})}(e)})),y}ri(e){let r=0;return e.store("remoteDocuments").J((s,c)=>{r+=Za(c)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(c=>Xe.forEach(c,d=>{const y=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",y).next(S=>Xe.forEach(S,F=>{rn(F.userId===d.userId);const q=Ec(this.serializer,F);return Of(e,d.userId,q).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const d=[];return s.J((y,S)=>{const F=new pe(y),q=[0,Ur(F)];d.push(r.get(q).next(ne=>ne?Xe.resolve():r.put({targetId:0,path:Ur(F),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Xe.waitFor(d))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:vs});const s=r.store("collectionParents"),c=new xf,d=y=>{if(c.add(y)){const S=y.lastSegment(),F=y.popLast();return s.put({collectionId:S,parent:Ur(F)})}};return r.store("remoteDocuments").J({H:!0},(y,S)=>{const F=new pe(y);return d(F.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([y,S,F],q)=>{const ne=ss(S);return d(ne.popLast())}))}oi(e){const r=e.store("targets");return r.J((s,c)=>{const d=ra(c),y=sl(this.serializer,d);return r.put(y)})}_i(e,r){const s=r.store("remoteDocuments"),c=[];return s.J((d,y)=>{const S=r.store("remoteDocumentsV14"),F=(ye=y,ye.document?new Ke(pe.fromString(ye.document.name).popFirst(5)):ye.noDocument?Ke.fromSegments(ye.noDocument.path):ye.unknownDocument?Ke.fromSegments(ye.unknownDocument.path):$t()).path.toArray(),q={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:y.readTime||[0,0],unknownDocument:y.unknownDocument,noDocument:y.noDocument,document:y.document,hasCommittedMutations:!!y.hasCommittedMutations};var ye;c.push(S.put(q))}).next(()=>Xe.waitFor(c))}ai(e,r){const s=r.store("mutations"),c=vh(this.serializer),d=new Ja(Xu.Zr,this.serializer.ct);return s.U().next(y=>{const S=new Map;return y.forEach(F=>{var q;let ne=null!==(q=S.get(F.userId))&&void 0!==q?q:Mn();Ec(this.serializer,F).keys().forEach(ye=>ne=ne.add(ye)),S.set(F.userId,ne)}),Xe.forEach(S,(F,q)=>{const ne=new En(q),ye=Ic.lt(this.serializer,ne),Ge=d.getIndexManager(ne),bt=Ku.lt(ne,this.serializer,Ge,d.referenceDelegate);return new Eh(c,bt,ye,Ge).recalculateAndSaveOverlaysForDocumentKeys(new Zr(r,Br.oe),F).next()})})}}function Yu(a){a.createObjectStore("targetDocuments",{keyPath:Pi}).createIndex("documentTargetsIndex",pi,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_r,{unique:!0}),a.createObjectStore("targetGlobal")}const wh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ml{constructor(e,r,s,c,d,y,S,F,q,ne,ye=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ui=d,this.window=y,this.document=S,this.ci=q,this.li=ne,this.hi=ye,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Ge=>Promise.resolve(),!ml.D())throw new Re(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Am(this,c),this.Ai=r+"main",this.serializer=new Ul(F),this.Ri=new Gr(this.Ai,this.hi,new Dm(this.serializer)),this.$r=new Uu,this.Ur=new Tm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vh(this.serializer),this.Gr=new uh,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===ne&&xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ie.FAILED_PRECONDITION,wh);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Br(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var r=this;return this.di=function(){var s=(0,Ee.A)(function*(c){if(r.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var r=(0,Ee.A)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,Ee.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(zr(e))return et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ec(e).get("owner").next(r=>Xe.resolve(this.vi(r)))}Ci(e){return Zu(e).delete(this.clientId)}Fi(){var e=this;return(0,Ee.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Kr(s,"clientMetadata");return c.U().next(d=>{const y=e.xi(d,18e5),S=d.filter(F=>-1===y.indexOf(F));return Xe.forEach(S,F=>c.delete(F.clientId)).next(()=>S)})}).catch(()=>[]);if(e.Vi)for(const s of r)e.Vi.removeItem(e.Oi(s.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Xe.resolve(!0):ec(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Re(ie.FAILED_PRECONDITION,wh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zu(e).U().next(s=>void 0===this.xi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(r=>(this.isPrimary!==r&&et("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ee.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new Zr(r,Br.oe);return e.bi(s).next(()=>e.Ci(s))}),e.Ri.close(),e.qi()})()}xi(e,r){return e.filter(s=>this.Mi(s.updateTimeMs,r)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Zu(e).U().next(r=>this.xi(r,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Ku.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Im(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ic.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,s){et("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===r?"readonly":"readwrite",d=17===(F=this.hi)?Js:16===F?yi:15===F?ds:14===F?xi:13===F?Or:12===F?sr:11===F?hn:void $t();var F;let y;return this.Ri.runTransaction(e,c,d,S=>(y=new Zr(S,this.Qr?this.Qr.next():Br.oe),"readwrite-primary"===r?this.wi(y).next(F=>!!F||this.Si(y)).next(F=>{if(!F)throw xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Re(ie.FAILED_PRECONDITION,pn);return s(y)}).next(F=>this.Di(y).next(()=>F)):this.Ki(y).next(()=>s(y)))).then(S=>(y.raiseOnCommittedEvent(),S))}Ki(e){return ec(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Re(ie.FAILED_PRECONDITION,wh)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ec(e).put("owner",r)}static D(){return Gr.D()}bi(e){const r=ec(e);return r.get("owner").next(s=>this.vi(s)?(et("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Xe.resolve())}Mi(e,r){const s=Date.now();return!(e<s-r||e>s&&(xn(`Detected an update time that is in the future: ${e} > ${s}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,dn.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const s=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(e)));return et("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return xn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){xn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ec(a){return Kr(a,"owner")}function Zu(a){return Kr(a,"clientMetadata")}function Ju(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class ed{constructor(e,r,s,c){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=c}static Wi(e,r){let s=Mn(),c=Mn();for(const d of r.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:c=c.add(d.doc.key)}return new ed(e,r.fromCache,s,c)}}class jf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Sm{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,dn.nr)()?8:wi((0,dn.ZQ)())>0?6:4}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,c){const d={result:null};return this.Yi(e,r).next(y=>{d.result=y}).next(()=>{if(!d.result)return this.Zi(e,r,c,s).next(y=>{d.result=y})}).next(()=>{if(d.result)return;const y=new jf;return this.Xi(e,r,y).next(S=>{if(d.result=S,this.zi)return this.es(e,r,y,S.size)})}).next(()=>d.result)}es(e,r,s,c){return s.documentReadCount<this.ji?(Ln()<=zn.$b.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",qt(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Xe.resolve()):(Ln()<=zn.$b.DEBUG&&et("QueryEngine","Query:",qt(r),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.Hi*c?(Ln()<=zn.$b.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",qt(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_(r))):Xe.resolve())}Yi(e,r){if(C(r))return Xe.resolve(null);let s=_(r);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==r.limit&&1===c&&(r=ee(r,null,"F"),s=_(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const y=Mn(...d);return this.Ji.getDocuments(e,y).next(S=>this.indexManager.getMinOffset(e,s).next(F=>{const q=this.ts(r,S);return this.ns(r,q,y,F.readTime)?this.Yi(e,ee(r,null,"F")):this.rs(e,q,r,F)}))})))}Zi(e,r,s,c){return C(r)||c.isEqual(je.min())?Xe.resolve(null):this.Ji.getDocuments(e,s).next(d=>{const y=this.ts(r,d);return this.ns(r,y,s,c)?Xe.resolve(null):(Ln()<=zn.$b.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),qt(r)),this.rs(e,y,r,rt(c,-1)).next(S=>S))})}ts(e,r){let s=new fr(yn(e));return r.forEach((c,d)=>{Dn(e,d)&&(s=s.add(d))}),s}ns(e,r,s,c){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const d="F"===e.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(c)>0)}Xi(e,r,s){return Ln()<=zn.$b.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",qt(r)),this.Ji.getDocumentsMatchingQuery(e,r,zt.min(),s)}rs(e,r,s,c){return this.Ji.getDocumentsMatchingQuery(e,s,c).next(d=>(r.forEach(y=>{d=d.insert(y.key,y)}),d))}}class Rm{constructor(e,r,s,c){this.persistence=e,this.ss=r,this.serializer=c,this.os=new vr(ue),this._s=new cr(d=>zo(d),Oo),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Hf(a,e,r,s){return new Rm(a,e,r,s)}function td(a,e){return Th.apply(this,arguments)}function Th(){return(Th=(0,Ee.A)(function*(a,e){const r=Fe(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let c;return r.mutationQueue.getAllMutationBatches(s).next(d=>(c=d,r.ls(e),r.mutationQueue.getAllMutationBatches(s))).next(d=>{const y=[],S=[];let F=Mn();for(const q of c){y.push(q.batchId);for(const ne of q.mutations)F=F.add(ne.key)}for(const q of d){S.push(q.batchId);for(const ne of q.mutations)F=F.add(ne.key)}return r.localDocuments.getDocuments(s,F).next(q=>({hs:q,removedBatchIds:y,addedBatchIds:S}))})})})).apply(this,arguments)}function nd(a){const e=Fe(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Ah(a,e,r){let s=Mn(),c=Mn();return r.forEach(d=>s=s.add(d)),e.getEntries(a,s).next(d=>{let y=gr();return r.forEach((S,F)=>{const q=d.get(S);F.isFoundDocument()!==q.isFoundDocument()&&(c=c.add(S)),F.isNoDocument()&&F.version.isEqual(je.min())?(e.removeEntry(S,F.readTime),y=y.insert(S,F)):!q.isValidDocument()||F.version.compareTo(q.version)>0||0===F.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(F),y=y.insert(S,F)):et("LocalStore","Ignoring outdated watch update for ",S,". Current version:",q.version," Watch version:",F.version)}),{Ps:y,Is:c}})}function zf(a,e){const r=Fe(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Yl(a,e){const r=Fe(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return r.Ur.getTargetData(s,e).next(d=>d?(c=d,Xe.resolve(c)):r.Ur.allocateTargetId(s).next(y=>(c=new Do(e,y,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=r.os.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s})}function Zl(a,e,r){return gl.apply(this,arguments)}function gl(){return(gl=(0,Ee.A)(function*(a,e,r){const s=Fe(a),c=s.os.get(e),d=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",d,y=>s.persistence.referenceDelegate.removeTarget(y,c)))}catch(y){if(!zr(y))throw y;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${y}`)}s.os=s.os.remove(e),s._s.delete(c.target)})).apply(this,arguments)}function Sc(a,e,r){const s=Fe(a);let c=je.min(),d=Mn();return s.persistence.runTransaction("Execute query","readwrite",y=>function(F,q,ne){const ye=Fe(F),Ge=ye._s.get(ne);return void 0!==Ge?Xe.resolve(ye.os.get(Ge)):ye.Ur.getTargetData(q,ne)}(s,y,_(e)).next(S=>{if(S)return c=S.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(y,S.targetId).next(F=>{d=F})}).next(()=>s.ss.getDocumentsMatchingQuery(y,e,r?c:je.min(),r?d:Mn())).next(S=>(rd(s,mn(e),S),{documents:S,Ts:d})))}function Jl(a,e){const r=Fe(a),s=Fe(r.Ur),c=r.os.get(e);return c?Promise.resolve(c.target):r.persistence.runTransaction("Get target data","readonly",d=>s.ot(d,e).next(y=>y?y.target:null))}function Ch(a,e){const r=Fe(a),s=r.us.get(e)||je.min();return r.persistence.runTransaction("Get new document changes","readonly",c=>r.cs.getAllFromCollectionGroup(c,e,rt(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(rd(r,e,c),c))}function rd(a,e,r){let s=a.us.get(e)||je.min();r.forEach((c,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),a.us.set(e,s)}function tc(){return(tc=(0,Ee.A)(function*(a,e,r,s){const c=Fe(a);let d=Mn(),y=gr();for(const q of r){const ne=e.Es(q.metadata.name);q.document&&(d=d.add(ne));const ye=e.ds(q);ye.setReadTime(e.As(q.metadata.readTime)),y=y.insert(ne,ye)}const S=c.cs.newChangeBuffer({trackRemovals:!0}),F=yield Yl(c,(ne=s,_(w(pe.fromString(`__bundle__/docs/${ne}`)))));var ne;return c.persistence.runTransaction("Apply bundle documents","readwrite",q=>Ah(q,S,y).next(ne=>(S.apply(q),ne)).next(ne=>c.Ur.removeMatchingKeysForTargetId(q,F.targetId).next(()=>c.Ur.addMatchingKeys(q,d,F.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(q,ne.Ps,ne.Is)).next(()=>ne.Ps)))})).apply(this,arguments)}function Wf(a,e){return id.apply(this,arguments)}function id(){return(id=(0,Ee.A)(function*(a,e,r=Mn()){const s=yield Yl(a,_(ol(e.bundledQuery))),c=Fe(a);return c.persistence.runTransaction("Save named query","readwrite",d=>{const y=Mr(e.readTime);if(s.snapshotVersion.compareTo(y)>=0)return c.Gr.saveNamedQuery(d,e);const S=s.withResumeToken(Nr.EMPTY_BYTE_STRING,y);return c.os=c.os.insert(S.targetId,S),c.Ur.updateTargetData(d,S).next(()=>c.Ur.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>c.Ur.addMatchingKeys(d,r,s.targetId)).next(()=>c.Gr.saveNamedQuery(d,e))})})).apply(this,arguments)}function Ra(a,e){return`firestore_clients_${a}_${e}`}function eu(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Rc(a,e){return`firestore_targets_${a}_${e}`}class sd{constructor(e,r,s,c){this.user=e,this.batchId=r,this.state=s,this.error=c}static Rs(e,r,s){const c=JSON.parse(s);let d,y="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return y&&c.error&&(y="string"==typeof c.error.message&&"string"==typeof c.error.code,y&&(d=new Re(c.error.code,c.error.message))),y?new sd(e,r,c.state,d):(xn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tu{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Rs(e,r){const s=JSON.parse(r);let c,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(c=new Re(s.error.code,s.error.message))),d?new tu(e,s.state,c):(xn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class od{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const s=JSON.parse(r);let c="object"==typeof s&&s.activeTargetIds instanceof Array,d=yo();for(let y=0;c&&y<s.activeTargetIds.length;++y)c=Rs(s.activeTargetIds[y]),d=d.add(s.activeTargetIds[y]);return c?new od(e,d):(xn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class ad{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new ad(r.clientId,r.onlineState):(xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _l{constructor(){this.activeTargetIds=yo()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nu{constructor(e,r,s,c,d){this.window=e,this.ui=r,this.persistenceKey=s,this.ps=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new vr(ue),this.started=!1,this.bs=[];const y=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=Ra(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new _l),this.Cs=new RegExp(`^firestore_clients_${y}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${y}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${y}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(F){return`firestore_bundle_loaded_v2_${F}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.A)(function*(){const r=yield e.syncEngine.Qi();for(const c of r){if(c===e.ps)continue;const d=e.getItem(Ra(e.persistenceKey,c));if(d){const y=od.Rs(c,d);y&&(e.Ss=e.Ss.insert(y.clientId,y))}}e.Ns();const s=e.storage.getItem(e.xs);if(s){const c=e.Ls(s);c&&e.Bs(c)}for(const c of e.bs)e.ws(c);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((s,c)=>{c.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,s){this.qs(e,r,s),this.Qs(e)}addLocalQueryTarget(e,r=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const c=this.storage.getItem(Rc(this.persistenceKey,e));if(c){const d=tu.Rs(e,c);d&&(s=d.state)}}return r&&this.Ks.fs(e),this.Ns(),s}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rc(this.persistenceKey,e))}updateQueryState(e,r,s){this.$s(e,r,s)}handleUserChange(e,r,s){r.forEach(c=>{this.Qs(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return et("SharedClientState","READ",e,r),r}setItem(e,r){et("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var r=this;const s=e;if(s.storageArea===this.storage){if(et("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ds)return void xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,Ee.A)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const c=r.Gs(s.key);return r.zs(c,null)}{const c=r.js(s.key,s.newValue);if(c)return r.zs(c.clientId,c)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const c=r.Hs(s.key,s.newValue);if(c)return r.Js(c)}}else if(r.Ms.test(s.key)){if(null!==s.newValue){const c=r.Ys(s.key,s.newValue);if(c)return r.Zs(c)}}else if(s.key===r.xs){if(null!==s.newValue){const c=r.Ls(s.newValue);if(c)return r.Bs(c)}}else if(s.key===r.vs){const c=function(y){let S=Br.oe;if(null!=y)try{const F=JSON.parse(y);rn("number"==typeof F),S=F}catch(F){xn("SharedClientState","Failed to read sequence number from WebStorage",F)}return S}(s.newValue);c!==Br.oe&&r.sequenceNumberHandler(c)}else if(s.key===r.Os){const c=r.Xs(s.newValue);yield Promise.all(c.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(s)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,s){const c=new sd(this.currentUser,e,r,s),d=eu(this.persistenceKey,this.currentUser,e);this.setItem(d,c.Vs())}Qs(e){const r=eu(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,r,s){const c=Rc(this.persistenceKey,e),d=new tu(e,r,s);this.setItem(c,d.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const s=this.Gs(e);return od.Rs(s,r)}Hs(e,r){const s=this.Fs.exec(e),c=Number(s[1]);return sd.Rs(new En(void 0!==s[2]?s[2]:null),c,r)}Ys(e,r){const s=this.Ms.exec(e),c=Number(s[1]);return tu.Rs(c,r)}Ls(e){return ad.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var r=this;return(0,Ee.A)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.no(e.batchId,e.state,e.error);et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const s=r?this.Ss.insert(e,r):this.Ss.remove(e),c=this.ks(this.Ss),d=this.ks(s),y=[],S=[];return d.forEach(F=>{c.has(F)||y.push(F)}),c.forEach(F=>{d.has(F)||S.push(F)}),this.syncEngine.io(y,S).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=yo();return e.forEach((s,c)=>{r=r.unionWith(c.activeTargetIds)}),r}}class cd{constructor(){this.so=new _l,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _l,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gf{_o(e){}shutdown(){}}class Dh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yl=null;function Sh(){return null===yl?yl=268435456+Math.round(2147483648*Math.random()):yl++,"0x"+yl.toString(16)}const ji={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xc{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Vs="WebChannelConnection";class Rh extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${c}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${c}`:`project_id=${c}&database_id=${d}`}get Fo(){return!1}Mo(r,s,c,d,y){const S=Sh(),F=this.xo(r,s.toUriEncodedString());et("RestConnection",`Sending RPC '${r}' ${S}:`,F,c);const q={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(q,d,y),this.No(r,F,q,c).then(ne=>(et("RestConnection",`Received RPC '${r}' ${S}: `,ne),ne),ne=>{throw _n("RestConnection",`RPC '${r}' ${S} failed with error: `,ne,"url: ",F,"request:",c),ne})}Lo(r,s,c,d,y,S){return this.Mo(r,s,c,d,y)}Oo(r,s,c){r["X-Goog-Api-Client"]="gl-js/ fire/"+Tn,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((d,y)=>r[y]=d),c&&c.headers.forEach((d,y)=>r[y]=d)}xo(r,s){return`${this.Do}/v1/${s}:${ji[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,c){const d=Sh();return new Promise((y,S)=>{const F=new Ar;F.setWithCredentials(!0),F.listenOnce(ae.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case Me.NO_ERROR:const ne=F.getResponseJson();et(Vs,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(ne)),y(ne);break;case Me.TIMEOUT:et(Vs,`RPC '${e}' ${d} timed out`),S(new Re(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Me.HTTP_ERROR:const ye=F.getStatus();if(et(Vs,`RPC '${e}' ${d} failed with status:`,ye,"response text:",F.getResponseText()),ye>0){let Ge=F.getResponseJson();Array.isArray(Ge)&&(Ge=Ge[0]);const bt=Ge?.error;if(bt&&bt.status&&bt.message){const Lt=function(Kt){const Bn=Kt.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Bn)>=0?Bn:ie.UNKNOWN}(bt.status);S(new Re(Lt,bt.message))}else S(new Re(ie.UNKNOWN,"Server responded with status "+F.getStatus()))}else S(new Re(ie.UNAVAILABLE,"Connection failed."));break;default:$t()}}finally{et(Vs,`RPC '${e}' ${d} completed.`)}});const q=JSON.stringify(c);et(Vs,`RPC '${e}' ${d} sending request:`,c),F.send(r,"POST",q,s,15)})}Bo(e,r,s){const c=Sh(),d=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Tt(),S=_t(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},q=this.longPollingOptions.timeoutSeconds;void 0!==q&&(F.longPollingTimeout=Math.round(1e3*q)),this.useFetchStreams&&(F.useFetchStreams=!0),this.Oo(F.initMessageHeaders,r,s),F.encodeInitMessageHeaders=!0;const ne=d.join("");et(Vs,`Creating RPC '${e}' stream ${c}: ${ne}`,F);const ye=y.createWebChannel(ne,F);let Ge=!1,bt=!1;const Lt=new xc({Io:Kt=>{bt?et(Vs,`Not sending because RPC '${e}' stream ${c} is closed:`,Kt):(Ge||(et(Vs,`Opening RPC '${e}' stream ${c} transport.`),ye.open(),Ge=!0),et(Vs,`RPC '${e}' stream ${c} sending:`,Kt),ye.send(Kt))},To:()=>ye.close()}),Jt=(Kt,Bn,Jn)=>{Kt.listen(Bn,bn=>{try{Jn(bn)}catch(er){setTimeout(()=>{throw er},0)}})};return Jt(ye,Pt.EventType.OPEN,()=>{bt||(et(Vs,`RPC '${e}' stream ${c} transport opened.`),Lt.yo())}),Jt(ye,Pt.EventType.CLOSE,()=>{bt||(bt=!0,et(Vs,`RPC '${e}' stream ${c} transport closed`),Lt.So())}),Jt(ye,Pt.EventType.ERROR,Kt=>{bt||(bt=!0,_n(Vs,`RPC '${e}' stream ${c} transport errored:`,Kt),Lt.So(new Re(ie.UNAVAILABLE,"The operation could not be completed")))}),Jt(ye,Pt.EventType.MESSAGE,Kt=>{var Bn;if(!bt){const Jn=Kt.data[0];rn(!!Jn);const er=Jn.error||(null===(Bn=Jn[0])||void 0===Bn?void 0:Bn.error);if(er){et(Vs,`RPC '${e}' stream ${c} received error:`,er);const xr=er.status;let wr=function(Ze){const dt=ls[Ze];if(void 0!==dt)return gs(dt)}(xr),ct=er.message;void 0===wr&&(wr=ie.INTERNAL,ct="Unknown error status: "+xr+" with message "+er.message),bt=!0,Lt.So(new Re(wr,ct)),ye.close()}else et(Vs,`RPC '${e}' stream ${c} received:`,Jn),Lt.bo(Jn)}}),Jt(S,it.STAT_EVENT,Kt=>{Kt.stat===qe.PROXY?et(Vs,`RPC '${e}' stream ${c} detected buffering proxy`):Kt.stat===qe.NOPROXY&&et(Vs,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Lt.wo()},0),Lt}}function Cs(){return typeof window<"u"?window:null}function sa(){return typeof document<"u"?document:null}function vl(a){return new Zc(a,!0)}class ru{constructor(e,r,s=1e3,c=1.5,d=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=c,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),c=Math.max(0,r-s);c>0&&et("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,c,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class qf{constructor(e,r,s,c,d,y,S,F){this.ui=e,this.Ho=s,this.Jo=c,this.connection=d,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=S,this.listener=F,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ru(e,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,Ee.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,Ee.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,r){var s=this;return(0,Ee.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==e?s.t_.reset():r&&r.code===ie.RESOURCE_EXHAUSTED?(xn(r.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):r&&r.code===ie.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.mo(r)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Yo===r&&this.P_(s,c)},s=>{e(()=>{const c=new Re(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(c)})})}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(c=>{s(()=>this.I_(c))}),this.stream.onMessage(c=>{s(()=>1==++this.e_?this.E_(c):this.onNext(c))})}i_(){var e=this;this.state=5,this.t_.Go((0,Ee.A)(function*(){e.state=0,e.start()}))}I_(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xa extends qf{constructor(e,r,s,c,d,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,c,y),this.serializer=d}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=function oh(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===q?1:"REMOVE"===q?2:"CURRENT"===q?3:"RESET"===q?4:$t(),c=e.targetChange.targetIds||[],d=function(q,ne){return q.useProto3Json?(rn(void 0===ne||"string"==typeof ne),Nr.fromBase64String(ne||"")):(rn(void 0===ne||ne instanceof Buffer||ne instanceof Uint8Array),Nr.fromUint8Array(ne||new Uint8Array))}(a,e.targetChange.resumeToken),y=e.targetChange.cause,S=y&&function(q){const ne=void 0===q.code?ie.UNKNOWN:gs(q.code);return new Re(ne,q.message||"")}(y);r=new Di(s,c,d,S||null)}else if("documentChange"in e){const s=e.documentChange,c=Ko(a,s.document.name),d=Mr(s.document.updateTime),y=s.document.createTime?Mr(s.document.createTime):je.min(),S=new Cr({mapValue:{fields:s.document.fields}}),F=or.newFoundDocument(c,d,y,S);r=new wn(s.targetIds||[],s.removedTargetIds||[],F.key,F)}else if("documentDelete"in e){const s=e.documentDelete,c=Ko(a,s.document),d=s.readTime?Mr(s.readTime):je.min(),y=or.newNoDocument(c,d);r=new wn([],s.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){const s=e.documentRemove,c=Ko(a,s.document);r=new wn([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return $t();{const s=e.filter,{count:c=0,unchangedNames:d}=s,y=new Fu(c,d);r=new Rr(s.targetId,y)}}var q;return r}(this.serializer,e),s=function(d){if(!("targetChange"in d))return je.min();const y=d.targetChange;return y.targetIds&&y.targetIds.length?je.min():y.readTime?Mr(y.readTime):je.min()}(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=Fo(this.serializer),r.addTarget=function(d,y){let S;const F=y.target;if(S=va(F)?{documents:vc(d,F)}:{query:na(d,F)._t},S.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){S.resumeToken=no(d,y.resumeToken);const q=nh(d,y.expectedCount);null!==q&&(S.expectedCount=q)}else if(y.snapshotVersion.compareTo(je.min())>0){S.readTime=Jc(d,y.snapshotVersion.toTimestamp());const q=nh(d,y.expectedCount);null!==q&&(S.expectedCount=q)}return S}(this.serializer,e);const s=function Bl(a,e){const r=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $t()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=Fo(this.serializer),r.removeTarget=e,this.a_(r)}}class Qf extends qf{constructor(e,r,s,c,d,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,c,y),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return rn(!!e.streamToken),this.lastStreamToken=e.streamToken,rn(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){rn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=function ah(a,e){return a&&a.length>0?(rn(void 0!==e),a.map(r=>function(c,d){let y=Mr(c.updateTime?c.updateTime:d);return y.isEqual(je.min())&&(y=Mr(d)),new th(y,c.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=Mr(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=Fo(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>Wa(this.serializer,s))};this.a_(r)}}class Xf extends class{}{constructor(e,r,s,c){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=c,this.y_=!1}w_(){if(this.y_)throw new Re(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,y])=>this.connection.Mo(e,rh(r,s),c,d,y)).catch(d=>{throw"FirebaseError"===d.name?(d.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Re(ie.UNKNOWN,d.toString())})}Lo(e,r,s,c,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,S])=>this.connection.Lo(e,rh(r,s),c,y,S,d)).catch(y=>{throw"FirebaseError"===y.name?(y.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new Re(ie.UNKNOWN,y.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xm{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xn(r),this.D_=!1):et("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Yf{constructor(e,r,s,c,d){var y=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(S=>{s.enqueueAndForget((0,Ee.A)(function*(){var F;Qo(y)&&(et("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,Ee.A)(function*(ne){const ye=Fe(ne);ye.L_.add(4),yield oa(ye),ye.q_.set("Unknown"),ye.L_.delete(4),yield bl(ye)}),function q(ne){return F.apply(this,arguments)})(y))}))}),this.q_=new xm(s,c)}}function bl(a){return io.apply(this,arguments)}function io(){return(io=(0,Ee.A)(function*(a){if(Qo(a))for(const e of a.B_)yield e(!0)})).apply(this,arguments)}function oa(a){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,Ee.A)(function*(a){for(const e of a.B_)yield e(!1)})).apply(this,arguments)}function ld(a,e){const r=Fe(a);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),ud(r)?iu(r):Fc(r).r_()&&Pc(r,e))}function Bs(a,e){const r=Fe(a),s=Fc(r);r.N_.delete(e),s.r_()&&xh(r,e),0===r.N_.size&&(s.r_()?s.o_():Qo(r)&&r.q_.set("Unknown"))}function Pc(a,e){if(a.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Fc(a).A_(e)}function xh(a,e){a.Q_.xe(e),Fc(a).R_(e)}function iu(a){a.Q_=new Xs({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.N_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),Fc(a).start(),a.q_.v_()}function ud(a){return Qo(a)&&!Fc(a).n_()&&a.N_.size>0}function Qo(a){return 0===Fe(a).L_.size}function Oc(a){a.Q_=void 0}function dd(a){return hd.apply(this,arguments)}function hd(){return(hd=(0,Ee.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function Mh(a){return v.apply(this,arguments)}function v(){return(v=(0,Ee.A)(function*(a){a.N_.forEach((e,r)=>{Pc(a,e)})})).apply(this,arguments)}function u(a,e){return h.apply(this,arguments)}function h(){return(h=(0,Ee.A)(function*(a,e){Oc(a),ud(a)?(a.q_.M_(e),iu(a)):a.q_.set("Unknown")})).apply(this,arguments)}function I(a,e,r){return H.apply(this,arguments)}function H(){return H=(0,Ee.A)(function*(a,e,r){if(a.q_.set("Online"),e instanceof Di&&2===e.state&&e.cause)try{yield(s=(0,Ee.A)(function*(d,y){const S=y.cause;for(const F of y.targetIds)d.N_.has(F)&&(yield d.remoteSyncer.rejectListen(F,S),d.N_.delete(F),d.Q_.removeTarget(F))}),function c(d,y){return s.apply(this,arguments)})(a,e)}catch(s){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield te(a,s)}else if(e instanceof wn?a.Q_.Ke(e):e instanceof Rr?a.Q_.He(e):a.Q_.We(e),!r.isEqual(je.min()))try{const s=yield nd(a.localStore);r.compareTo(s)>=0&&(yield function(d,y){const S=d.Q_.rt(y);return S.targetChanges.forEach((F,q)=>{if(F.resumeToken.approximateByteSize()>0){const ne=d.N_.get(q);ne&&d.N_.set(q,ne.withResumeToken(F.resumeToken,y))}}),S.targetMismatches.forEach((F,q)=>{const ne=d.N_.get(F);if(!ne)return;d.N_.set(F,ne.withResumeToken(Nr.EMPTY_BYTE_STRING,ne.snapshotVersion)),xh(d,F);const ye=new Do(ne.target,F,q,ne.sequenceNumber);Pc(d,ye)}),d.remoteSyncer.applyRemoteEvent(S)}(a,r))}catch(s){et("RemoteStore","Failed to raise snapshot:",s),yield te(a,s)}var s}),H.apply(this,arguments)}function te(a,e,r){return Be.apply(this,arguments)}function Be(){return(Be=(0,Ee.A)(function*(a,e,r){if(!zr(e))throw e;a.L_.add(1),yield oa(a),a.q_.set("Offline"),r||(r=()=>nd(a.localStore)),a.asyncQueue.enqueueRetryable((0,Ee.A)(function*(){et("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield bl(a)}))})).apply(this,arguments)}function at(a,e){return e().catch(r=>te(a,r,e))}function Mt(a){return vn.apply(this,arguments)}function vn(){return(vn=(0,Ee.A)(function*(a){const e=Fe(a),r=Ma(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xn(e);)try{const c=yield zf(e.localStore,s);if(null===c){0===e.O_.length&&r.o_();break}s=c.batchId,Sn(e,c)}catch(c){yield te(e,c)}Yr(e)&&so(e)})).apply(this,arguments)}function Xn(a){return Qo(a)&&a.O_.length<10}function Sn(a,e){a.O_.push(e);const r=Ma(a);r.r_()&&r.V_&&r.m_(e.mutations)}function Yr(a){return Qo(a)&&!Ma(a).n_()&&a.O_.length>0}function so(a){Ma(a).start()}function Nc(a){return Io.apply(this,arguments)}function Io(){return(Io=(0,Ee.A)(function*(a){Ma(a).p_()})).apply(this,arguments)}function fd(a){return su.apply(this,arguments)}function su(){return(su=(0,Ee.A)(function*(a){const e=Ma(a);for(const r of a.O_)e.m_(r.mutations)})).apply(this,arguments)}function Zf(a,e,r){return pd.apply(this,arguments)}function pd(){return(pd=(0,Ee.A)(function*(a,e,r){const s=a.O_.shift(),c=ko.from(s,e,r);yield at(a,()=>a.remoteSyncer.applySuccessfulWrite(c)),yield Mt(a)})).apply(this,arguments)}function ou(a,e){return md.apply(this,arguments)}function md(){return md=(0,Ee.A)(function*(a,e){var r;e&&Ma(a).V_&&(yield(r=(0,Ee.A)(function*(c,d){if(Lu(S=d.code)&&S!==ie.ABORTED){const y=c.O_.shift();Ma(c).s_(),yield at(c,()=>c.remoteSyncer.rejectFailedWrite(y.batchId,d)),yield Mt(c)}var S}),function s(c,d){return r.apply(this,arguments)})(a,e)),Yr(a)&&so(a)}),md.apply(this,arguments)}function au(a,e){return cu.apply(this,arguments)}function cu(){return(cu=(0,Ee.A)(function*(a,e){const r=Fe(a);r.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const s=Qo(r);r.L_.add(3),yield oa(r),s&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),yield bl(r)})).apply(this,arguments)}function gd(a,e){return kc.apply(this,arguments)}function kc(){return(kc=(0,Ee.A)(function*(a,e){const r=Fe(a);e?(r.L_.delete(2),yield bl(r)):e||(r.L_.add(2),yield oa(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Fc(a){return a.K_||(a.K_=function(r,s,c){const d=Fe(r);return d.w_(),new xa(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,c)}(a.datastore,a.asyncQueue,{Eo:dd.bind(null,a),Ro:Mh.bind(null,a),mo:u.bind(null,a),d_:I.bind(null,a)}),a.B_.push(function(){var e=(0,Ee.A)(function*(r){r?(a.K_.s_(),ud(a)?iu(a):a.q_.set("Unknown")):(yield a.K_.stop(),Oc(a))});return function(r){return e.apply(this,arguments)}}())),a.K_}function Ma(a){return a.U_||(a.U_=function(r,s,c){const d=Fe(r);return d.w_(),new Qf(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,c)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Nc.bind(null,a),mo:ou.bind(null,a),f_:fd.bind(null,a),g_:Zf.bind(null,a)}),a.B_.push(function(){var e=(0,Ee.A)(function*(r){r?(a.U_.s_(),yield Mt(a)):(yield a.U_.stop(),a.O_.length>0&&(et("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return e.apply(this,arguments)}}())),a.U_}class lu{constructor(e,r,s,c,d){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=c,this.removalCallback=d,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,c,d){const y=Date.now()+s,S=new lu(e,r,y,c,d);return S.start(s),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uu(a,e){if(xn("AsyncQueue",`${e}: ${a}`),zr(a))return new Re(ie.UNAVAILABLE,`${e}: ${a}`);throw a}class El{constructor(e){this.comparator=e?(r,s)=>e(r,s)||Ke.comparator(r.key,s.key):(r,s)=>Ke.comparator(r.key,s.key),this.keyedMap=Ui(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new El(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const c=r.getNext().key,d=s.getNext().key;if(!c.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new El;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Ph{constructor(){this.W_=new vr(Ke.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?0!==e.type&&3===s.type?this.W_=this.W_.insert(r,e):3===e.type&&1!==s.type?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.W_=this.W_.remove(r):1===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):$t():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,s)=>{e.push(s)}),e}}class du{constructor(e,r,s,c,d,y,S,F,q){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=d,this.fromCache=y,this.syncStateChanged=S,this.excludesMetadataChanges=F,this.hasCachedResults=q}static fromInitialDocuments(e,r,s,c,d){const y=[];return r.forEach(S=>{y.push({type:0,doc:S})}),new du(e,r,El.emptySet(r),y,s,c,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&He(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let c=0;c<r.length;c++)if(r[c].type!==s[c].type||!r[c].doc.isEqual(s[c].doc))return!1;return!0}}class Mm{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Oh{constructor(){this.queries=f_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,s){const c=Fe(r),d=c.queries;c.queries=f_(),d.forEach((y,S)=>{for(const F of S.j_)F.onError(s)})}(this,new Re(ie.ABORTED,"Firestore shutting down"))}}function f_(){return new cr(a=>st(a),He)}function Jf(a,e){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,Ee.A)(function*(a,e){const r=Fe(a);let s=3;const c=e.query;let d=r.queries.get(c);d?!d.H_()&&e.J_()&&(s=2):(d=new Mm,s=e.J_()?0:1);try{switch(s){case 0:d.z_=yield r.onListen(c,!0);break;case 1:d.z_=yield r.onListen(c,!1);break;case 2:yield r.onFirstRemoteStoreListen(c)}}catch(y){const S=uu(y,`Initialization of query '${qt(e.query)}' failed`);return void e.onError(S)}r.queries.set(c,d),d.j_.push(e),e.Z_(r.onlineState),d.z_&&e.X_(d.z_)&&_d(r)})).apply(this,arguments)}function Om(a,e){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,Ee.A)(function*(a,e){const r=Fe(a),s=e.query;let c=3;const d=r.queries.get(s);if(d){const y=d.j_.indexOf(e);y>=0&&(d.j_.splice(y,1),0===d.j_.length?c=e.J_()?0:1:!d.H_()&&e.J_()&&(c=2))}switch(c){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function p_(a,e){const r=Fe(a);let s=!1;for(const c of e){const y=r.queries.get(c.query);if(y){for(const S of y.j_)S.X_(c)&&(s=!0);y.z_=c}}s&&_d(r)}function m_(a,e,r){const s=Fe(a),c=s.queries.get(e);if(c)for(const d of c.j_)d.onError(r);s.queries.delete(e)}function _d(a){a.Y_.forEach(e=>{e.next()})}var Nh,hu;(hu=Nh||(Nh={})).ea="default",hu.Cache="cache";class km{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new du(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=du.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nh.Cache}}class Sv{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}class Rv{constructor(e){this.serializer=e}Es(e){return Ko(this.serializer,e)}ds(e){return e.metadata.exists?Vl(this.serializer,e.document,!1):or.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Mr(e)}}class xv{constructor(e,r,s){this.ca=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ep(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const s=pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,s=new Rv(this.serializer);for(const c of e)if(c.metadata.queries){const d=s.Es(c.metadata.name);for(const y of c.metadata.queries){const S=(r.get(y)||Mn()).add(d);r.set(y,S)}}return r}complete(){var e=this;return(0,Ee.A)(function*(){const r=yield function Kf(a,e,r,s){return tc.apply(this,arguments)}(e.localStore,new Rv(e.serializer),e.documents,e.ca.id),s=e.ha(e.documents);for(const c of e.queries)yield Wf(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:r}})()}}function ep(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class g_{constructor(e){this.key=e}}class fu{constructor(e){this.key=e}}class kh{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Mn(),this.mutatedKeys=Mn(),this.Aa=yn(e),this.Ra=new El(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new Ph,c=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,y=c,S=!1;const F="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,q="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ne,ye)=>{const Ge=c.get(ne),bt=Dn(this.query,ye)?ye:null,Lt=!!Ge&&this.mutatedKeys.has(Ge.key),Jt=!!bt&&(bt.hasLocalMutations||this.mutatedKeys.has(bt.key)&&bt.hasCommittedMutations);let Kt=!1;Ge&&bt?Ge.data.isEqual(bt.data)?Lt!==Jt&&(s.track({type:3,doc:bt}),Kt=!0):this.ga(Ge,bt)||(s.track({type:2,doc:bt}),Kt=!0,(F&&this.Aa(bt,F)>0||q&&this.Aa(bt,q)<0)&&(S=!0)):!Ge&&bt?(s.track({type:0,doc:bt}),Kt=!0):Ge&&!bt&&(s.track({type:1,doc:Ge}),Kt=!0,(F||q)&&(S=!0)),Kt&&(bt?(y=y.add(bt),d=Jt?d.add(ne):d.delete(ne)):(y=y.delete(ne),d=d.delete(ne)))}),null!==this.query.limit)for(;y.size>this.query.limit;){const ne="F"===this.query.limitType?y.last():y.first();y=y.delete(ne.key),d=d.delete(ne.key),s.track({type:1,doc:ne})}return{Ra:y,fa:s,ns:S,mutatedKeys:d}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,c){const d=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const y=e.fa.G_();y.sort((ne,ye)=>function(bt,Lt){const Jt=Kt=>{switch(Kt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t()}};return Jt(bt)-Jt(Lt)}(ne.type,ye.type)||this.Aa(ne.doc,ye.doc)),this.pa(s),c=null!=c&&c;const S=r&&!c?this.ya():[],F=0===this.da.size&&this.current&&!c?1:0,q=F!==this.Ea;return this.Ea=F,0!==y.length||q?{snapshot:new du(this.query,e.Ra,d,y,e.mutatedKeys,0===F,q,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:S}:{wa:S}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ph,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Mn(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return e.forEach(s=>{this.da.has(s)||r.push(new fu(s))}),this.da.forEach(s=>{e.has(s)||r.push(new g_(s))}),r}ba(e){this.Ta=e.Ts,this.da=Mn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return du.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Fm{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class __{constructor(e){this.key=e,this.va=!1}}class y_{constructor(e,r,s,c,d,y){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=c,this.currentUser=d,this.maxConcurrentLimboResolutions=y,this.Ca={},this.Fa=new cr(S=>st(S),He),this.Ma=new Map,this.xa=new Set,this.Oa=new vr(Ke.comparator),this.Na=new Map,this.La=new qu,this.Ba={},this.ka=new Map,this.qa=qo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function v_(a,e){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,Ee.A)(function*(a,e,r=!0){const s=Ym(a);let c;const d=s.Fa.get(e);return d?(s.sharedClientState.addLocalQueryTarget(d.targetId),c=d.view.Da()):c=yield b_(s,e,r,!0),c})).apply(this,arguments)}function Mv(a,e){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,Ee.A)(function*(a,e){const r=Ym(a);yield b_(r,e,!0,!1)})).apply(this,arguments)}function b_(a,e,r,s){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,Ee.A)(function*(a,e,r,s){const c=yield Yl(a.localStore,_(e)),d=c.targetId,y=a.sharedClientState.addLocalQueryTarget(d,r);let S;return s&&(S=yield Bm(a,e,d,"current"===y,c.resumeToken)),a.isPrimaryClient&&r&&ld(a.remoteStore,c),S})).apply(this,arguments)}function Bm(a,e,r,s,c){return Pa.apply(this,arguments)}function Pa(){return Pa=(0,Ee.A)(function*(a,e,r,s,c){a.Ka=(ye,Ge,bt)=>{return(Lt=(0,Ee.A)(function*(Kt,Bn,Jn,bn){let er=Bn.view.ma(Jn);er.ns&&(er=yield Sc(Kt.localStore,Bn.query,!1).then(({documents:ke})=>Bn.view.ma(ke,er)));const xr=bn&&bn.targetChanges.get(Bn.targetId),wr=bn&&null!=bn.targetMismatches.get(Bn.targetId),ct=Bn.view.applyChanges(er,Kt.isPrimaryClient,xr,wr);return Lh(Kt,Bn.targetId,ct.wa),ct.snapshot}),function Jt(Kt,Bn,Jn,bn){return Lt.apply(this,arguments)})(a,ye,Ge,bt);var Lt};const d=yield Sc(a.localStore,e,!0),y=new kh(e,d.Ts),S=y.ma(d.documents),F=wt.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,c),q=y.applyChanges(S,a.isPrimaryClient,F);Lh(a,r,q.wa);const ne=new Fm(e,r,y);return a.Fa.set(e,ne),a.Ma.has(r)?a.Ma.get(r).push(e):a.Ma.set(r,[e]),q.snapshot}),Pa.apply(this,arguments)}function yd(a,e,r){return Um.apply(this,arguments)}function Um(){return(Um=(0,Ee.A)(function*(a,e,r){const s=Fe(a),c=s.Fa.get(e),d=s.Ma.get(c.targetId);if(d.length>1)return s.Ma.set(c.targetId,d.filter(y=>!He(y,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||(yield Zl(s.localStore,c.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(c.targetId),r&&Bs(s.remoteStore,c.targetId),Fh(s,c.targetId)}).catch(ir))):(Fh(s,c.targetId),yield Zl(s.localStore,c.targetId,!0))})).apply(this,arguments)}function Pv(a,e){return jm.apply(this,arguments)}function jm(){return(jm=(0,Ee.A)(function*(a,e){const r=Fe(a),s=r.Fa.get(e),c=r.Ma.get(s.targetId);r.isPrimaryClient&&1===c.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Bs(r.remoteStore,s.targetId))})).apply(this,arguments)}function Hm(){return(Hm=(0,Ee.A)(function*(a,e,r){const s=D_(a);try{const c=yield function(y,S){const F=Fe(y),q=be.now(),ne=S.reduce((bt,Lt)=>bt.add(Lt.key),Mn());let ye,Ge;return F.persistence.runTransaction("Locally write mutations","readwrite",bt=>{let Lt=gr(),Jt=Mn();return F.cs.getEntries(bt,ne).next(Kt=>{Lt=Kt,Lt.forEach((Bn,Jn)=>{Jn.isValidDocument()||(Jt=Jt.add(Bn))})}).next(()=>F.localDocuments.getOverlayedDocuments(bt,Lt)).next(Kt=>{ye=Kt;const Bn=[];for(const Jn of S){const bn=_m(Jn,ye.get(Jn.key).overlayedDocument);null!=bn&&Bn.push(new Fs(Jn.key,bn,gi(bn.value.mapValue),Ci.exists(!0)))}return F.mutationQueue.addMutationBatch(bt,q,Bn,S)}).next(Kt=>{Ge=Kt;const Bn=Kt.applyToLocalDocumentSet(ye,Jt);return F.documentOverlayCache.saveOverlays(bt,Kt.batchId,Bn)})}).then(()=>({batchId:Ge.batchId,changes:Ji(ye)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(y,S,F){let q=y.Ba[y.currentUser.toKey()];q||(q=new vr(ue)),q=q.insert(S,F),y.Ba[y.currentUser.toKey()]=q}(s,c.batchId,r),yield Il(s,c.changes),yield Mt(s.remoteStore)}catch(c){const d=uu(c,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function E_(a,e){return tp.apply(this,arguments)}function tp(){return(tp=(0,Ee.A)(function*(a,e){const r=Fe(a);try{const s=yield function h_(a,e){const r=Fe(a),s=e.snapshotVersion;let c=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const y=r.cs.newChangeBuffer({trackRemovals:!0});c=r.os;const S=[];e.targetChanges.forEach((ne,ye)=>{const Ge=c.get(ye);if(!Ge)return;S.push(r.Ur.removeMatchingKeys(d,ne.removedDocuments,ye).next(()=>r.Ur.addMatchingKeys(d,ne.addedDocuments,ye)));let bt=Ge.withSequenceNumber(d.currentSequenceNumber);var Jt,Kt,Bn;null!==e.targetMismatches.get(ye)?bt=bt.withResumeToken(Nr.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):ne.resumeToken.approximateByteSize()>0&&(bt=bt.withResumeToken(ne.resumeToken,s)),c=c.insert(ye,bt),Kt=bt,Bn=ne,(0===(Jt=Ge).resumeToken.approximateByteSize()||Kt.snapshotVersion.toMicroseconds()-Jt.snapshotVersion.toMicroseconds()>=3e8||Bn.addedDocuments.size+Bn.modifiedDocuments.size+Bn.removedDocuments.size>0)&&S.push(r.Ur.updateTargetData(d,bt))});let F=gr(),q=Mn();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&S.push(r.persistence.referenceDelegate.updateLimboDocument(d,ne))}),S.push(Ah(d,y,e.documentUpdates).next(ne=>{F=ne.Ps,q=ne.Is})),!s.isEqual(je.min())){const ne=r.Ur.getLastRemoteSnapshotVersion(d).next(ye=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,s));S.push(ne)}return Xe.waitFor(S).next(()=>y.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,F,q)).next(()=>F)}).then(d=>(r.os=c,d))}(r.localStore,e);e.targetChanges.forEach((c,d)=>{const y=r.Na.get(d);y&&(rn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?y.va=!0:c.modifiedDocuments.size>0?rn(y.va):c.removedDocuments.size>0&&(rn(y.va),y.va=!1))}),yield Il(r,s,e)}catch(s){yield ir(s)}})).apply(this,arguments)}function I_(a,e,r){const s=Fe(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const c=[];s.Fa.forEach((d,y)=>{const S=y.view.Z_(e);S.snapshot&&c.push(S.snapshot)}),function(y,S){const F=Fe(y);F.onlineState=S;let q=!1;F.queries.forEach((ne,ye)=>{for(const Ge of ye.j_)Ge.Z_(S)&&(q=!0)}),q&&_d(F)}(s.eventManager,e),c.length&&s.Ca.d_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Nv(a,e,r){return $m.apply(this,arguments)}function $m(){return($m=(0,Ee.A)(function*(a,e,r){const s=Fe(a);s.sharedClientState.updateQueryState(e,"rejected",r);const c=s.Na.get(e),d=c&&c.key;if(d){let y=new vr(Ke.comparator);y=y.insert(d,or.newNoDocument(d,je.min()));const S=Mn().add(d),F=new Dt(je.min(),new Map,new vr(ue),y,S);yield E_(s,F),s.Oa=s.Oa.remove(d),s.Na.delete(e),A_(s)}else yield Zl(s.localStore,e,!1).then(()=>Fh(s,e,r)).catch(ir)})).apply(this,arguments)}function kv(a,e){return vd.apply(this,arguments)}function vd(){return(vd=(0,Ee.A)(function*(a,e){const r=Fe(a),s=e.batch.batchId;try{const c=yield function $f(a,e){const r=Fe(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(S,F,q,ne){const ye=q.batch,Ge=ye.keys();let bt=Xe.resolve();return Ge.forEach(Lt=>{bt=bt.next(()=>ne.getEntry(F,Lt)).next(Jt=>{const Kt=q.docVersions.get(Lt);rn(null!==Kt),Jt.version.compareTo(Kt)<0&&(ye.applyToRemoteDocument(Jt,q),Jt.isValidDocument()&&(Jt.setReadTime(q.commitVersion),ne.addEntry(Jt)))})}),bt.next(()=>S.mutationQueue.removeMutationBatch(F,ye))}(r,s,e,d).next(()=>d.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(S){let F=Mn();for(let q=0;q<S.mutationResults.length;++q)S.mutationResults[q].transformResults.length>0&&(F=F.add(S.batch.mutations[q].key));return F}(e))).next(()=>r.localDocuments.getDocuments(s,c))})}(r.localStore,e);T_(r,s,null),rp(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield Il(r,c)}catch(c){yield ir(c)}})).apply(this,arguments)}function Vc(a,e,r){return pu.apply(this,arguments)}function pu(){return(pu=(0,Ee.A)(function*(a,e,r){const s=Fe(a);try{const c=yield function(y,S){const F=Fe(y);return F.persistence.runTransaction("Reject batch","readwrite-primary",q=>{let ne;return F.mutationQueue.lookupMutationBatch(q,S).next(ye=>(rn(null!==ye),ne=ye.keys(),F.mutationQueue.removeMutationBatch(q,ye))).next(()=>F.mutationQueue.performConsistencyCheck(q)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId(q,ne,S)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(q,ne)).next(()=>F.localDocuments.getDocuments(q,ne))})}(s.localStore,e);T_(s,e,r),rp(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield Il(s,c)}catch(c){yield ir(c)}})).apply(this,arguments)}function np(){return(np=(0,Ee.A)(function*(a,e){const r=Fe(a);Qo(r.remoteStore)||et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(y){const S=Fe(y);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",F=>S.mutationQueue.getHighestUnacknowledgedBatchId(F))}(r.localStore);if(-1===s)return void e.resolve();const c=r.ka.get(s)||[];c.push(e),r.ka.set(s,c)}catch(s){const c=uu(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}})).apply(this,arguments)}function rp(a,e){(a.ka.get(e)||[]).forEach(r=>{r.resolve()}),a.ka.delete(e)}function T_(a,e,r){const s=Fe(a);let c=s.Ba[s.currentUser.toKey()];if(c){const d=c.get(e);d&&(r?d.reject(r):d.resolve(),c=c.remove(e)),s.Ba[s.currentUser.toKey()]=c}}function Fh(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Ma.get(e))a.Fa.delete(s),r&&a.Ca.$a(s,r);a.Ma.delete(e),a.isPrimaryClient&&a.La.gr(e).forEach(s=>{a.La.containsKey(s)||Fv(a,s)})}function Fv(a,e){a.xa.delete(e.path.canonicalString());const r=a.Oa.get(e);null!==r&&(Bs(a.remoteStore,r),a.Oa=a.Oa.remove(e),a.Na.delete(r),A_(a))}function Lh(a,e,r){for(const s of r)s instanceof g_?(a.La.addReference(s.key,e),zm(a,s)):s instanceof fu?(et("SyncEngine","Document no longer in limbo: "+s.key),a.La.removeReference(s.key,e),a.La.containsKey(s.key)||Fv(a,s.key)):$t()}function zm(a,e){const r=e.key,s=r.path.canonicalString();a.Oa.get(r)||a.xa.has(s)||(et("SyncEngine","New document in limbo: "+r),a.xa.add(s),A_(a))}function A_(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const e=a.xa.values().next().value;a.xa.delete(e);const r=new Ke(pe.fromString(e)),s=a.qa.next();a.Na.set(s,new __(r)),a.Oa=a.Oa.insert(r,s),ld(a.remoteStore,new Do(_(w(r.path)),s,"TargetPurposeLimboResolution",Br.oe))}}function Il(a,e,r){return ip.apply(this,arguments)}function ip(){return ip=(0,Ee.A)(function*(a,e,r){const s=Fe(a),c=[],d=[],y=[];var S;s.Fa.isEmpty()||(s.Fa.forEach((S,F)=>{y.push(s.Ka(F,e,r).then(q=>{var ne;if((q||r)&&s.isPrimaryClient){const ye=q?!q.fromCache:null===(ne=r?.targetChanges.get(F.targetId))||void 0===ne?void 0:ne.current;s.sharedClientState.updateQueryState(F.targetId,ye?"current":"not-current")}if(q){c.push(q);const ye=ed.Wi(F.targetId,q);d.push(ye)}}))}),yield Promise.all(y),s.Ca.d_(c),yield(S=(0,Ee.A)(function*(q,ne){const ye=Fe(q);try{yield ye.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ge=>Xe.forEach(ne,bt=>Xe.forEach(bt.$i,Lt=>ye.persistence.referenceDelegate.addReference(Ge,bt.targetId,Lt)).next(()=>Xe.forEach(bt.Ui,Lt=>ye.persistence.referenceDelegate.removeReference(Ge,bt.targetId,Lt)))))}catch(Ge){if(!zr(Ge))throw Ge;et("LocalStore","Failed to update sequence numbers: "+Ge)}for(const Ge of ne){const bt=Ge.targetId;if(!Ge.fromCache){const Lt=ye.os.get(bt),Kt=Lt.withLastLimboFreeSnapshotVersion(Lt.snapshotVersion);ye.os=ye.os.insert(bt,Kt)}}}),function F(q,ne){return S.apply(this,arguments)})(s.localStore,d))}),ip.apply(this,arguments)}function Lv(a,e){return Km.apply(this,arguments)}function Km(){return(Km=(0,Ee.A)(function*(a,e){const r=Fe(a);if(!r.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const s=yield td(r.localStore,e);r.currentUser=e,(d=r).ka.forEach(S=>{S.forEach(F=>{F.reject(new Re(ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Il(r,s.hs)}var d})).apply(this,arguments)}function Vv(a,e){const r=Fe(a),s=r.Na.get(e);if(s&&s.va)return Mn().add(s.key);{let c=Mn();const d=r.Ma.get(e);if(!d)return c;for(const y of d){const S=r.Fa.get(y);c=c.unionWith(S.view.Va)}return c}}function Bv(a,e){return sp.apply(this,arguments)}function sp(){return(sp=(0,Ee.A)(function*(a,e){const r=Fe(a),s=yield Sc(r.localStore,e.query,!0),c=e.view.ba(s);return r.isPrimaryClient&&Lh(r,e.targetId,c.wa),c})).apply(this,arguments)}function op(a,e){return ap.apply(this,arguments)}function ap(){return(ap=(0,Ee.A)(function*(a,e){const r=Fe(a);return Ch(r.localStore,e).then(s=>Il(r,s))})).apply(this,arguments)}function Wm(a,e,r,s){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,Ee.A)(function*(a,e,r,s){const c=Fe(a),d=yield function(S,F){const q=Fe(S),ne=Fe(q.mutationQueue);return q.persistence.runTransaction("Lookup mutation documents","readonly",ye=>ne.Mn(ye,F).next(Ge=>Ge?q.localDocuments.getDocuments(ye,Ge):Xe.resolve(null)))}(c.localStore,e);var F;null!==d?("pending"===r?yield Mt(c.remoteStore):"acknowledged"===r||"rejected"===r?(T_(c,e,s||null),rp(c,e),F=e,Fe(Fe(c.localStore).mutationQueue).On(F)):$t(),yield Il(c,d)):et("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function qm(){return(qm=(0,Ee.A)(function*(a,e){const r=Fe(a);if(Ym(r),D_(r),!0===e&&!0!==r.Qa){const s=r.sharedClientState.getAllActiveQueryTargets(),c=yield C_(r,s.toArray());r.Qa=!0,yield gd(r.remoteStore,!0);for(const d of c)ld(r.remoteStore,d)}else if(!1===e&&!1!==r.Qa){const s=[];let c=Promise.resolve();r.Ma.forEach((d,y)=>{r.sharedClientState.isLocalQueryTarget(y)?s.push(y):c=c.then(()=>(Fh(r,y),Zl(r.localStore,y,!0))),Bs(r.remoteStore,y)}),yield c,yield C_(r,s),function(y){const S=Fe(y);S.Na.forEach((F,q)=>{Bs(S.remoteStore,q)}),S.La.pr(),S.Na=new Map,S.Oa=new vr(Ke.comparator)}(r),r.Qa=!1,yield gd(r.remoteStore,!1)}})).apply(this,arguments)}function C_(a,e,r){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,Ee.A)(function*(a,e,r){const s=Fe(a),c=[],d=[];for(const y of e){let S;const F=s.Ma.get(y);if(F&&0!==F.length){S=yield Yl(s.localStore,_(F[0]));for(const q of F){const ne=s.Fa.get(q),ye=yield Bv(s,ne);ye.snapshot&&d.push(ye.snapshot)}}else{const q=yield Jl(s.localStore,y);S=yield Yl(s.localStore,q),yield Bm(s,Qm(q),y,!1,S.resumeToken)}c.push(S)}return s.Ca.d_(d),c})).apply(this,arguments)}function Qm(a){return Z(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Uv(a){return r=Fe(a).localStore,Fe(Fe(r).persistence).Qi();var r}function jv(a,e,r,s){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,Ee.A)(function*(a,e,r,s){const c=Fe(a);if(c.Qa)return void et("SyncEngine","Ignoring unexpected query state notification.");const d=c.Ma.get(e);if(d&&d.length>0)switch(r){case"current":case"not-current":{const y=yield Ch(c.localStore,mn(d[0])),S=Dt.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Nr.EMPTY_BYTE_STRING);yield Il(c,y,S);break}case"rejected":yield Zl(c.localStore,e,!0),Fh(c,e,s);break;default:$t()}})).apply(this,arguments)}function Hv(a,e,r){return cp.apply(this,arguments)}function cp(){return(cp=(0,Ee.A)(function*(a,e,r){const s=Ym(a);if(s.Qa){for(const c of e){if(s.Ma.has(c)&&s.sharedClientState.isActiveQueryTarget(c)){et("SyncEngine","Adding an already active target "+c);continue}const d=yield Jl(s.localStore,c),y=yield Yl(s.localStore,d);yield Bm(s,Qm(d),y.targetId,!1,y.resumeToken),ld(s.remoteStore,y)}for(const c of r)s.Ma.has(c)&&(yield Zl(s.localStore,c,!1).then(()=>{Bs(s.remoteStore,c),Fh(s,c)}).catch(ir))}})).apply(this,arguments)}function Ym(a){const e=Fe(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=E_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nv.bind(null,e),e.Ca.d_=p_.bind(null,e.eventManager),e.Ca.$a=m_.bind(null,e.eventManager),e}function D_(a){const e=Fe(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vc.bind(null,e),e}let nc=(()=>{class a{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(r){var s=this;return(0,Ee.A)(function*(){s.serializer=vl(r.databaseInfo.databaseId),s.sharedClientState=s.Wa(r),s.persistence=s.Ga(r),yield s.persistence.start(),s.localStore=s.za(r),s.gcScheduler=s.ja(r,s.localStore),s.indexBackfillerScheduler=s.Ha(r,s.localStore)})()}ja(r,s){return null}Ha(r,s){return null}za(r){return Hf(this.persistence,new Sm,r.initialUser,this.serializer)}Ga(r){return new Ja(Xu.Zr,this.serializer)}Wa(r){return new cd}terminate(){var r=this;return(0,Ee.A)(function*(){var s,c;null===(s=r.gcScheduler)||void 0===s||s.stop(),null===(c=r.indexBackfillerScheduler)||void 0===c||c.stop(),r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}return a.provider={build:()=>new a},a})();class lp extends nc{constructor(e,r,s){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,Ee.A)(function*(){yield r().call(s,e),yield s.Ja.initialize(s,e),yield D_(s.Ja.syncEngine),yield Mt(s.Ja.remoteStore),yield s.persistence.yi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return Hf(this.persistence,new Sm,e.initialUser,this.serializer)}ja(e,r){return new Cc(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ha(e,r){const s=new xo(r,this.persistence);return new ma(e.asyncQueue,s)}Ga(e){const r=Ju(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new ml(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,Cs(),sa(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new cd}}class up extends lp{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,Ee.A)(function*(){yield r().call(s,e);const c=s.Ja.syncEngine;s.sharedClientState instanceof nu&&(s.sharedClientState.syncEngine={no:Wm.bind(null,c),ro:jv.bind(null,c),io:Hv.bind(null,c),Qi:Uv.bind(null,c),eo:op.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.yi(function(){var d=(0,Ee.A)(function*(y){yield function mu(a,e){return qm.apply(this,arguments)}(s.Ja.syncEngine,y),s.gcScheduler&&(y&&!s.gcScheduler.started?s.gcScheduler.start():y||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(y&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():y||s.indexBackfillerScheduler.stop())});return function(y){return d.apply(this,arguments)}}())})()}Wa(e){const r=Cs();if(!nu.D(r))throw new Re(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Ju(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nu(r,e.asyncQueue,s,e.clientId,e.initialUser)}}let wl=(()=>{class a{initialize(r,s){var c=this;return(0,Ee.A)(function*(){c.localStore||(c.localStore=r.localStore,c.sharedClientState=r.sharedClientState,c.datastore=c.createDatastore(s),c.remoteStore=c.createRemoteStore(s),c.eventManager=c.createEventManager(s),c.syncEngine=c.createSyncEngine(s,!r.synchronizeTabs),c.sharedClientState.onlineStateHandler=d=>I_(c.syncEngine,d,1),c.remoteStore.remoteSyncer.handleCredentialChange=Lv.bind(null,c.syncEngine),yield gd(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(r){return new Oh}createDatastore(r){const s=vl(r.databaseInfo.databaseId),c=new Rh(r.databaseInfo);return new Xf(r.authCredentials,r.appCheckCredentials,c,s)}createRemoteStore(r){return c=this.localStore,d=this.datastore,y=r.asyncQueue,S=s=>I_(this.syncEngine,s,0),F=Dh.D()?new Dh:new Gf,new Yf(c,d,y,S,F);var c,d,y,S,F}createSyncEngine(r,s){return function(d,y,S,F,q,ne,ye){const Ge=new y_(d,y,S,F,q,ne);return ye&&(Ge.Qa=!0),Ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,s)}terminate(){var r=this;return(0,Ee.A)(function*(){var s,c,d;yield(d=(0,Ee.A)(function*(S){const F=Fe(S);et("RemoteStore","RemoteStore shutting down."),F.L_.add(5),yield oa(F),F.k_.shutdown(),F.q_.set("Unknown")}),function y(S){return d.apply(this,arguments)})(r.remoteStore),null===(s=r.datastore)||void 0===s||s.terminate(),null===(c=r.eventManager)||void 0===c||c.terminate()})()}}return a.provider={build:()=>new a},a})();function R_(a,e=10240){let r=0;return{read:()=>(0,Ee.A)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,Ee.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Uh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}class x_{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new kt,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.aa)}`))},s=>this.metadata.reject(s))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,Ee.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,Ee.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,Ee.A)(function*(){const r=yield e.nu();if(null===r)return null;const s=e.eu.decode(r),c=Number(s);isNaN(c)&&e.ru(`length string (${s}) is not valid number`);const d=yield e.iu(c);return new Sv(JSON.parse(d),r.length+c)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,Ee.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const r=e.su();r<0&&e.ru("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}iu(e){var r=this;return(0,Ee.A)(function*(){for(;r.buffer.length<e;)(yield r.ou())&&r.ru("Reached the end of bundle when more is expected.");const s=r.eu.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,Ee.A)(function*(){const r=yield e.Xa.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class dp{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ee.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Re(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(c=(0,Ee.A)(function*(y,S){const F=Fe(y),q={documents:S.map(bt=>el(F.serializer,bt))},ne=yield F.Lo("BatchGetDocuments",F.serializer.databaseId,pe.emptyPath(),q,S.length),ye=new Map;ne.forEach(bt=>{const Lt=function tl(a,e){return"found"in e?function(s,c){rn(!!c.found);const d=Ko(s,c.found.name),y=Mr(c.found.updateTime),S=c.found.createTime?Mr(c.found.createTime):je.min(),F=new Cr({mapValue:{fields:c.found.fields}});return or.newFoundDocument(d,y,S,F)}(a,e):"missing"in e?function(s,c){rn(!!c.missing),rn(!!c.readTime);const d=Ko(s,c.missing),y=Mr(c.readTime);return or.newNoDocument(d,y)}(a,e):$t()}(F.serializer,bt);ye.set(Lt.key.toString(),Lt)});const Ge=[];return S.forEach(bt=>{const Lt=ye.get(bt.toString());rn(!!Lt),Ge.push(Lt)}),Ge}),function d(y,S){return c.apply(this,arguments)})(r.datastore,e);var c;return s.forEach(c=>r.recordVersion(c)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ia(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,c)=>{const d=Ke.fromPath(c);e.mutations.push(new $r(d,e.precondition(d)))}),yield(s=(0,Ee.A)(function*(d,y){const S=Fe(d),F={writes:y.map(q=>Wa(S.serializer,q))};yield S.Mo("Commit",S.serializer.databaseId,pe.emptyPath(),F)}),function c(d,y){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw $t();r=je.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new Re(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(je.min())?Ci.exists(!1):Ci.updateTime(r):Ci.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(je.min()))throw new Re(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ci.updateTime(r)}return Ci.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DE{constructor(e,r,s,c,d){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=c,this.deferred=d,this._u=s.maxAttempts,this.t_=new ru(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,Ee.A)(function*(){const r=new dp(e.datastore),s=e.cu(r);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(c)}).catch(d=>{e.lu(d)}))}).catch(c=>{e.lu(c)})}))}cu(e){try{const r=this.updateFunction(e);return!rs(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Lu(r)}return!1}}class Zm{constructor(e,r,s,c,d){var y=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=c,this.user=En.UNAUTHENTICATED,this.clientId=Ae.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(s,function(){var S=(0,Ee.A)(function*(F){et("FirestoreClient","Received user=",F.uid),yield y.authCredentialListener(F),y.user=F});return function(F){return S.apply(this,arguments)}}()),this.appCheckCredentials.start(s,S=>(et("FirestoreClient","Received new app check token=",S),this.appCheckCredentialListener(S,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const c=uu(s,"Failed to shutdown persistence");r.reject(c)}})),r.promise}}function Jm(a,e){return jh.apply(this,arguments)}function jh(){return jh=(0,Ee.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var c=(0,Ee.A)(function*(d){s.isEqual(d)||(yield td(e.localStore,d),s=d)});return function(d){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),jh.apply(this,arguments)}function eg(a,e){return hp.apply(this,arguments)}function hp(){return(hp=(0,Ee.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield Bc(a);et("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>au(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,c)=>au(e.remoteStore,c)),a._onlineComponents=e})).apply(this,arguments)}function Bc(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,Ee.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){et("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jm(a,a._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(c=e).name?c.code===ie.FAILED_PRECONDITION||c.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw e;_n("Error using user provided cache. Falling back to memory cache: "+e),yield Jm(a,new nc)}}else et("FirestoreClient","Using default OfflineComponentProvider"),yield Jm(a,new nc);var c;return a._offlineComponents})).apply(this,arguments)}function bd(a){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,Ee.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(et("FirestoreClient","Using user provided OnlineComponentProvider"),yield eg(a,a._uninitializedComponentsProvider._online)):(et("FirestoreClient","Using default OnlineComponentProvider"),yield eg(a,new wl))),a._onlineComponents})).apply(this,arguments)}function M_(a){return Bc(a).then(e=>e.persistence)}function Tl(a){return Bc(a).then(e=>e.localStore)}function Hh(a){return bd(a).then(e=>e.remoteStore)}function aa(a){return bd(a).then(e=>e.syncEngine)}function Al(a){return ng.apply(this,arguments)}function ng(){return(ng=(0,Ee.A)(function*(a){const e=yield bd(a),r=e.eventManager;return r.onListen=v_.bind(null,e.syncEngine),r.onUnlisten=yd.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Mv.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Pv.bind(null,e.syncEngine),r})).apply(this,arguments)}function O_(a,e,r={}){const s=new kt;return a.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function(d,y,S,F,q){const ne=new Uh({next:Ge=>{ne.Za(),y.enqueueAndForget(()=>Om(d,ye));const bt=Ge.docs.has(S);!bt&&Ge.fromCache?q.reject(new Re(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):bt&&Ge.fromCache&&F&&"server"===F.source?q.reject(new Re(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):q.resolve(Ge)},error:Ge=>q.reject(Ge)}),ye=new km(w(S.path),ne,{includeMetadataChanges:!0,_a:!0});return Jf(d,ye)}(yield Al(a),a.asyncQueue,e,r,s)})),s.promise}function N_(a,e,r={}){const s=new kt;return a.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function(d,y,S,F,q){const ne=new Uh({next:Ge=>{ne.Za(),y.enqueueAndForget(()=>Om(d,ye)),Ge.fromCache&&"server"===F.source?q.reject(new Re(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):q.resolve(Ge)},error:Ge=>q.reject(Ge)}),ye=new km(S,ne,{includeMetadataChanges:!0,_a:!0});return Jf(d,ye)}(yield Al(a),a.asyncQueue,e,r,s)})),s.promise}function L_(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const V_=new Map;function B_(a,e,r){if(!r)throw new Re(ie.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Gv(a,e,r,s){if(!0===e&&!0===s)throw new Re(ie.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function $h(a){if(!Ke.isDocumentKey(a))throw new Re(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function U_(a){if(Ke.isDocumentKey(a))throw new Re(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function wd(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":$t()}function Wr(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Re(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=wd(a);throw new Re(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function _u(a,e){if(e<=0)throw new Re(ie.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class fp{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=L_(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Re(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Re(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Re(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yu{constructor(e,r,s,c){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fp(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new Hn;switch(s.type){case"firstParty":return new fe(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Re(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,Ee.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=V_.get(r);s&&(et("ComponentProvider","Removing Datastore"),V_.delete(r),s.terminate())}(this),Promise.resolve()}}class Us{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class Mi{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mi(this.firestore,e,this._key)}}class ca extends Us{constructor(e,r,s){super(e,r,w(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mi(this.firestore,null,new Ke(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function pp(a,e,...r){if(a=(0,dn.Ku)(a),B_("collection","path",e),a instanceof yu){const s=pe.fromString(e,...r);return U_(s),new ca(a,null,s)}{if(!(a instanceof Mi||a instanceof ca))throw new Re(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(pe.fromString(e,...r));return U_(s),new ca(a.firestore,null,s)}}function sg(a,e,...r){if(a=(0,dn.Ku)(a),1===arguments.length&&(e=Ae.newId()),B_("doc","path",e),a instanceof yu){const s=pe.fromString(e,...r);return $h(s),new Mi(a,null,new Ke(s))}{if(!(a instanceof Mi||a instanceof ca))throw new Re(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(pe.fromString(e,...r));return $h(s),new Mi(a.firestore,a instanceof ca?a.converter:null,new Ke(s))}}function gp(a,e){return a=(0,dn.Ku)(a),e=(0,dn.Ku)(e),(a instanceof Mi||a instanceof ca)&&(e instanceof Mi||e instanceof ca)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function vu(a,e){return a=(0,dn.Ku)(a),e=(0,dn.Ku)(e),a instanceof Us&&e instanceof Us&&a.firestore===e.firestore&&He(a._query,e._query)&&a.converter===e.converter}class j_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ru(this,"async_queue_retry"),this.Vu=()=>{const s=sa();s&&et("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=sa();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=sa();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new kt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,Ee.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(r){if(!zr(r))throw r;et("AsyncQueue","Operation failed with retryable error: "+r)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(s=>{throw this.Eu=s,this.du=!1,xn("INTERNAL UNHANDLED ERROR: ",function(y){let S=y.message||"";return y.stack&&(S=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),S}(s)),s}).then(s=>(this.du=!1,s))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const c=lu.createAndSchedule(this,e,r,s,d=>this.yu(d));return this.Tu.push(c),c}fu(){this.Eu&&$t()}verifyOperationInProgress(){}wu(){var e=this;return(0,Ee.A)(function*(){let r;do{r=e.mu,yield r}while(r!==e.mu)})()}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function _p(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const c=r;for(const d of["next","error","complete"])if(d in c&&"function"==typeof c[d])return!0;return!1}(a)}class qv{constructor(){this._progressObserver={},this._taskCompletionResolver=new kt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Li extends yu{constructor(e,r,s,c){super(e,r,s,c),this.type="firestore",this._queue=new j_,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,Ee.A)(function*(){if(e._firestoreClient){const r=e._firestoreClient.terminate();e._queue=new j_(r),e._firestoreClient=void 0,yield r}})()}}function ns(a){if(a._terminated)throw new Re(ie.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||Yv(a),a._firestoreClient}function Yv(a){var e,r,s;const c=a._freezeSettings(),d=(F=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new Os(a._databaseId,F,a._persistenceKey,(ne=c).host,ne.ssl,ne.experimentalForceLongPolling,ne.experimentalAutoDetectLongPolling,L_(ne.experimentalLongPollingOptions),ne.useFetchStreams));var F,ne;a._componentsProvider||!(null===(r=c.localCache)||void 0===r)&&r._offlineComponentProvider&&!(null===(s=c.localCache)||void 0===s)&&s._onlineComponentProvider&&(a._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),a._firestoreClient=new Zm(a._authCredentials,a._appCheckCredentials,a._queue,d,a._componentsProvider&&function(S){const F=S?._online.build();return{_offline:S?._offline.build(F),_online:F}}(a._componentsProvider))}function zh(){return(zh=(0,Ee.A)(function*(a){_n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=a._freezeSettings();H_(a,wl.provider,{build:r=>new up(r,e.cacheSizeBytes)})})).apply(this,arguments)}function H_(a,e,r){if((a=Wr(a,Li))._firestoreClient||a._terminated)throw new Re(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(a._componentsProvider||a._getSettings().localCache)throw new Re(ie.FAILED_PRECONDITION,"SDK cache is already specified.");a._componentsProvider={_online:e,_offline:r},Yv(a)}class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(Nr.fromBase64String(e))}catch(r){throw new Re(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Lo(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Uc{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Re(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oa{constructor(e){this._methodName=e}}class Ep{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Re(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Re(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}class Wh{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,c){if(s.length!==c.length)return!1;for(let d=0;d<s.length;++d)if(s[d]!==c[d])return!1;return!0}(this._values,e._values)}}const rb=/^__.*__$/;class ib{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new Fs(e,this.data,this.fieldMask,r,this.fieldTransforms):new mc(e,this.data,r,this.fieldTransforms)}}class K_{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new Fs(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ag(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t()}}class Gh{constructor(e,r,s,c,d,y){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===d&&this.vu(),this.fieldTransforms=d||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.Fu({path:s,xu:!1});return c.Ou(e),c}Nu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.Fu({path:s,xu:!1});return c.vu(),c}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(ag(this.Cu)&&rb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cg{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||vl(e)}Qu(e,r,s,c=!1){return new Gh({Cu:e,methodName:r,qu:s,path:Se.emptyPath(),xu:!1,ku:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ad(a){const e=a._freezeSettings(),r=vl(a._databaseId);return new cg(a._databaseId,!!e.ignoreUndefinedProperties,r)}function Cd(a,e,r,s,c,d={}){const y=a.Qu(d.merge||d.mergeFields?2:0,e,r,c);Tp("Data must be an object, but it was:",y,s);const S=fg(s,y);let F,q;if(d.merge)F=new Hi(y.fieldMask),q=y.fieldTransforms;else if(d.mergeFields){const ne=[];for(const ye of d.mergeFields){const Ge=Ap(e,ye,r);if(!y.contains(Ge))throw new Re(ie.INVALID_ARGUMENT,`Field '${Ge}' is specified in your field mask but missing from your input data.`);G_(ne,Ge)||ne.push(Ge)}F=new Hi(ne),q=y.fieldTransforms.filter(ye=>F.covers(ye.field))}else F=null,q=y.fieldTransforms;return new ib(new Cr(S),F,q)}class Dd extends Oa{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dd}}function W_(a,e,r){return new Gh({Cu:3,qu:e.settings.qu,methodName:a._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lg extends Oa{_toFieldTransform(e){return new Zn(e.path,new Ai)}isEqual(e){return e instanceof lg}}class Ip extends Oa{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=W_(this,e,!0),s=this.Ku.map(d=>Cl(d,r)),c=new ki(s);return new Zn(e.path,c)}isEqual(e){return e instanceof Ip&&(0,dn.bD)(this.Ku,e.Ku)}}class ug extends Oa{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=W_(this,e,!0),s=this.Ku.map(d=>Cl(d,r)),c=new Co(s);return new Zn(e.path,c)}isEqual(e){return e instanceof ug&&(0,dn.bD)(this.Ku,e.Ku)}}class wp extends Oa{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Fi(e.serializer,rr(e.serializer,this.$u));return new Zn(e.path,r)}isEqual(e){return e instanceof wp&&this.$u===e.$u}}function dg(a,e,r,s){const c=a.Qu(1,e,r);Tp("Data must be an object, but it was:",c,s);const d=[],y=Cr.empty();Wn(s,(F,q)=>{const ne=Na(e,F,r);q=(0,dn.Ku)(q);const ye=c.Nu(ne);if(q instanceof Dd)d.push(ne);else{const Ge=Cl(q,ye);null!=Ge&&(d.push(ne),y.set(ne,Ge))}});const S=new Hi(d);return new K_(y,S,c.fieldTransforms)}function hg(a,e,r,s,c,d){const y=a.Qu(1,e,r),S=[Ap(e,s,r)],F=[c];if(d.length%2!=0)throw new Re(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ge=0;Ge<d.length;Ge+=2)S.push(Ap(e,d[Ge])),F.push(d[Ge+1]);const q=[],ne=Cr.empty();for(let Ge=S.length-1;Ge>=0;--Ge)if(!G_(q,S[Ge])){const bt=S[Ge];let Lt=F[Ge];Lt=(0,dn.Ku)(Lt);const Jt=y.Nu(bt);if(Lt instanceof Dd)q.push(bt);else{const Kt=Cl(Lt,Jt);null!=Kt&&(q.push(bt),ne.set(bt,Kt))}}const ye=new Hi(q);return new K_(ne,ye,y.fieldTransforms)}function sb(a,e,r,s=!1){return Cl(r,a.Qu(s?4:3,e))}function Cl(a,e){if(la(a=(0,dn.Ku)(a)))return Tp("Unsupported field value:",e,a),fg(a,e);if(a instanceof Oa)return function(s,c){if(!ag(c.Cu))throw c.Bu(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Bu(`${s._methodName}() is not currently supported inside arrays`);const d=s._toFieldTransform(c);d&&c.fieldTransforms.push(d)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(s,c){const d=[];let y=0;for(const S of s){let F=Cl(S,c.Lu(y));null==F&&(F={nullValue:"NULL_VALUE"}),d.push(F),y++}return{arrayValue:{values:d}}}(a,e)}return function(s,c){if(null===(s=(0,dn.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return rr(c.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const d=be.fromDate(s);return{timestampValue:Jc(c.serializer,d)}}if(s instanceof be){const d=new be(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jc(c.serializer,d)}}if(s instanceof Ep)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Lo)return{bytesValue:no(c.serializer,s._byteString)};if(s instanceof Mi){const d=c.databaseId,y=s.firestore._databaseId;if(!y.isEqual(d))throw c.Bu(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Bu(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof Wh)return S=c,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(F=>{if("number"!=typeof F)throw S.Bu("VectorValues must only contain numeric values.");return ps(S.serializer,F)})}}}}};var S;throw c.Bu(`Unsupported field value: ${wd(s)}`)}(a,e)}function fg(a,e){const r={};return Is(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wn(a,(s,c)=>{const d=Cl(c,e.Mu(s));null!=d&&(r[s]=d)}),{mapValue:{fields:r}}}function la(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof be||a instanceof Ep||a instanceof Lo||a instanceof Mi||a instanceof Oa||a instanceof Wh)}function Tp(a,e,r){if(!la(r)||"object"!=typeof(c=r)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const s=wd(r);throw e.Bu("an object"===s?a+" a custom object":a+" "+s)}var c}function Ap(a,e,r){if((e=(0,dn.Ku)(e))instanceof Uc)return e._internalPath;if("string"==typeof e)return Na(a,e);throw bu("Field path arguments must be of type string or ",a,!1,void 0,r)}const pg=new RegExp("[~\\*/\\[\\]]");function Na(a,e,r){if(e.search(pg)>=0)throw bu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Uc(...e.split("."))._internalPath}catch{throw bu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function bu(a,e,r,s,c){const d=s&&!s.isEmpty(),y=void 0!==c;let S=`Function ${e}() called with invalid data`;r&&(S+=" (via `toFirestore()`)"),S+=". ";let F="";return(d||y)&&(F+=" (found",d&&(F+=` in field ${s}`),y&&(F+=` in document ${c}`),F+=")"),new Re(ie.INVALID_ARGUMENT,S+a+F)}function G_(a,e){return a.some(r=>r.isEqual(e))}class qh{constructor(e,r,s,c,d){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=c,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Mi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ob(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Sd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class ob extends qh{data(){return super.data()}}function Sd(a,e){return"string"==typeof e?Na(a,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}function ka(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Re(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cp{}class Qh extends Cp{}function Eu(a,e,...r){let s=[];e instanceof Cp&&s.push(e),s=s.concat(r),function(d){const y=d.filter(F=>F instanceof Dl).length,S=d.filter(F=>F instanceof _s).length;if(y>1||y>0&&S>0)throw new Re(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)a=c._apply(a);return a}class _s extends Qh{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new _s(e,r,s)}_apply(e){const r=this._parse(e);return Z_(e._query,r),new Us(e.firestore,e.converter,B(e._query,r))}_parse(e){const r=Ad(e.firestore);return function(d,y,S,F,q,ne,ye){let Ge;if(q.isKeyField()){if("array-contains"===ne||"array-contains-any"===ne)throw new Re(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ne}' queries on documentId().`);if("in"===ne||"not-in"===ne){Y_(ye,ne);const bt=[];for(const Lt of ye)bt.push(Iu(F,d,Lt));Ge={arrayValue:{values:bt}}}else Ge=Iu(F,d,ye)}else"in"!==ne&&"not-in"!==ne&&"array-contains-any"!==ne||Y_(ye,ne),Ge=sb(S,"where",ye,"in"===ne||"not-in"===ne);return tr.create(q,ne,Ge)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class Dl extends Cp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Dl(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:nr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(c,d){let y=c;const S=d.getFlattenedFilters();for(const F of S)Z_(y,F),y=B(y,F)}(e._query,r),new Us(e.firestore,e.converter,B(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Xh extends Qh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Xh(e,r)}_apply(e){const r=function(c,d,y){if(null!==c.startAt)throw new Re(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new Re(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vi(d,y)}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,function(c,d){const y=c.explicitOrderBy.concat([d]);return new Ns(c.path,c.collectionGroup,y,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,r))}}class Yh extends Qh{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new Yh(e,r,s)}_apply(e){return new Us(e.firestore,e.converter,ee(e._query,this._limit,this._limitType))}}class Zh extends Qh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Zh(e,r,s)}_apply(e){const r=rc(e,this.type,this._docOrFields,this._inclusive);return new Us(e.firestore,e.converter,(d=r,new Ns((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,d,c.endAt)));var c,d}}class Dp extends Qh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Dp(e,r,s)}_apply(e){const r=rc(e,this.type,this._docOrFields,this._inclusive);return new Us(e.firestore,e.converter,(d=r,new Ns((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,d)));var c,d}}function rc(a,e,r,s){if(r[0]=(0,dn.Ku)(r[0]),r[0]instanceof qh)return function(d,y,S,F,q){if(!F)throw new Re(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const ne=[];for(const ye of X(d))if(ye.field.isKeyField())ne.push(ao(y,F.key));else{const Ge=F.data.field(ye.field);if(as(Ge))throw new Re(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ye.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ge){const bt=ye.field.canonicalString();throw new Re(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${bt}' (used as the orderBy) does not exist.`)}ne.push(Ge)}return new ei(ne,q)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const c=Ad(a.firestore);return function(y,S,F,q,ne,ye){const Ge=y.explicitOrderBy;if(ne.length>Ge.length)throw new Re(ie.INVALID_ARGUMENT,`Too many arguments provided to ${q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const bt=[];for(let Lt=0;Lt<ne.length;Lt++){const Jt=ne[Lt];if(Ge[Lt].field.isKeyField()){if("string"!=typeof Jt)throw new Re(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${q}(), but got a ${typeof Jt}`);if(!V(y)&&-1!==Jt.indexOf("/"))throw new Re(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${q}() must be a plain document ID, but '${Jt}' contains a slash.`);const Kt=y.path.child(pe.fromString(Jt));if(!Ke.isDocumentKey(Kt))throw new Re(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${q}() must result in a valid document path, but '${Kt}' is not because it contains an odd number of segments.`);const Bn=new Ke(Kt);bt.push(ao(S,Bn))}else{const Kt=sb(F,q,Jt);bt.push(Kt)}}return new ei(bt,ye)}(a._query,a.firestore._databaseId,c,e,r,s)}}function Iu(a,e,r){if("string"==typeof(r=(0,dn.Ku)(r))){if(""===r)throw new Re(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V(e)&&-1!==r.indexOf("/"))throw new Re(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(pe.fromString(r));if(!Ke.isDocumentKey(s))throw new Re(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ao(a,new Ke(s))}if(r instanceof Mi)return ao(a,r._key);throw new Re(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(r)}.`)}function Y_(a,e){if(!Array.isArray(a)||0===a.length)throw new Re(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Z_(a,e){const r=function(c,d){for(const y of c)for(const S of y.getFlattenedFilters())if(d.indexOf(S.op)>=0)return S.op;return null}(a.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new Re(ie.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Sp{convertValue(e,r="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw $t()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return Wn(e,(c,d)=>{s[c]=this.convertValue(d,r)}),s}convertVectorValue(e){var r,s,c;const d=null===(c=null===(s=null===(r=e.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===s?void 0:s.values)||void 0===c?void 0:c.map(y=>Jr(y.doubleValue));return new Wh(d)}convertGeoPoint(e){return new Ep(Jr(e.latitude),Jr(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=$i(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Zi(e));default:return null}}convertTimestamp(e){const r=Un(e);return new be(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=pe.fromString(e);rn(il(s));const c=new Ni(s.get(1),s.get(3)),d=new Ke(s.popFirst(5));return c.isEqual(r)||xn(`Document ${d} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function xd(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class Jh extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Mi(this.firestore,null,r)}}class wu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jc extends qh{constructor(e,r,s,c,d,y){super(e,r,s,c,y),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Sd("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Md extends jc{data(e={}){return super.data(e)}}class Tu{constructor(e,r,s,c){this._firestore=e,this._userDataWriter=r,this._snapshot=c,this.metadata=new wu(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Md(this._firestore,this._userDataWriter,s.key,s,new wu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Re(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(c,d){if(c._snapshot.oldDocs.isEmpty()){let y=0;return c._snapshot.docChanges.map(S=>({type:"added",doc:new Md(c._firestore,c._userDataWriter,S.doc.key,S.doc,new wu(c._snapshot.mutatedKeys.has(S.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:y++}))}{let y=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(S=>d||3!==S.type).map(S=>{const F=new Md(c._firestore,c._userDataWriter,S.doc.key,S.doc,new wu(c._snapshot.mutatedKeys.has(S.doc.key),c._snapshot.fromCache),c.query.converter);let q=-1,ne=-1;return 0!==S.type&&(q=y.indexOf(S.doc.key),y=y.delete(S.doc.key)),1!==S.type&&(y=y.add(S.doc),ne=y.indexOf(S.doc.key)),{type:hb(S.type),doc:F,oldIndex:q,newIndex:ne}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function hb(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t()}}function fb(a,e){return a instanceof jc&&e instanceof jc?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof Tu&&e instanceof Tu&&a._firestore===e._firestore&&vu(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class Hc extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Mi(this.firestore,null,r)}}function ry(a,e,r){a=Wr(a,Mi);const s=Wr(a.firestore,Li),c=xd(a.converter,e,r);return Fa(s,[Cd(Ad(s),"setDoc",a._key,c,null!==a.converter,r).toMutation(a._key,Ci.none())])}function _g(a,e,r,...s){a=Wr(a,Mi);const c=Wr(a.firestore,Li),d=Ad(c);let y;return y="string"==typeof(e=(0,dn.Ku)(e))||e instanceof Uc?hg(d,"updateDoc",a._key,e,r,s):dg(d,"updateDoc",a._key,e),Fa(c,[y.toMutation(a._key,Ci.exists(!0))])}function yg(a,...e){var r,s,c;a=(0,dn.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},y=0;"object"!=typeof e[y]||_p(e[y])||(d=e[y],y++);const S={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(_p(e[y])){const ye=e[y];e[y]=null===(r=ye.next)||void 0===r?void 0:r.bind(ye),e[y+1]=null===(s=ye.error)||void 0===s?void 0:s.bind(ye),e[y+2]=null===(c=ye.complete)||void 0===c?void 0:c.bind(ye)}let F,q,ne;if(a instanceof Mi)q=Wr(a.firestore,Li),ne=w(a._key.path),F={next:ye=>{e[y]&&e[y](xp(q,a,ye))},error:e[y+1],complete:e[y+2]};else{const ye=Wr(a,Us);q=Wr(ye.firestore,Li),ne=ye._query;const Ge=new Hc(q);F={next:bt=>{e[y]&&e[y](new Tu(q,Ge,ye,bt))},error:e[y+1],complete:e[y+2]},ka(a._query)}return function(Ge,bt,Lt,Jt){const Kt=new Uh(Jt),Bn=new km(bt,Kt,Lt);return Ge.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return Jf(yield Al(Ge),Bn)})),()=>{Kt.Za(),Ge.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return Om(yield Al(Ge),Bn)}))}}(ns(q),ne,S,F)}function Fa(a,e){return function(s,c){const d=new kt;return s.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function Ov(a,e,r){return Hm.apply(this,arguments)}(yield aa(s),c,d)})),d.promise}(ns(a),e)}function xp(a,e,r){const s=r.docs.get(e._key),c=new Hc(a);return new jc(a,c,e._key,s,new wu(r.hasPendingWrites,r.fromCache),e.converter)}const uy={maxAttempts:5};class dy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ad(e)}set(e,r,s){this._verifyNotCommitted();const c=Sl(e,this._firestore),d=xd(c.converter,r,s),y=Cd(this._dataReader,"WriteBatch.set",c._key,d,null!==c.converter,s);return this._mutations.push(y.toMutation(c._key,Ci.none())),this}update(e,r,s,...c){this._verifyNotCommitted();const d=Sl(e,this._firestore);let y;return y="string"==typeof(r=(0,dn.Ku)(r))||r instanceof Uc?hg(this._dataReader,"WriteBatch.update",d._key,r,s,c):dg(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(y.toMutation(d._key,Ci.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Sl(e,this._firestore);return this._mutations=this._mutations.concat(new Ia(r._key,Ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sl(a,e){if((a=(0,dn.Ku)(a)).firestore!==e)throw new Re(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class _b extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=Ad(r)}get(r){const s=Sl(r,this._firestore),c=new Jh(this._firestore);return this._transaction.lookup([s._key]).then(d=>{if(!d||1!==d.length)return $t();const y=d[0];if(y.isFoundDocument())return new qh(this._firestore,c,y.key,y,s.converter);if(y.isNoDocument())return new qh(this._firestore,c,s._key,null,s.converter);throw $t()})}set(r,s,c){const d=Sl(r,this._firestore),y=xd(d.converter,s,c),S=Cd(this._dataReader,"Transaction.set",d._key,y,null!==d.converter,c);return this._transaction.set(d._key,S),this}update(r,s,c,...d){const y=Sl(r,this._firestore);let S;return S="string"==typeof(s=(0,dn.Ku)(s))||s instanceof Uc?hg(this._dataReader,"Transaction.update",y._key,s,c,d):dg(this._dataReader,"Transaction.update",y._key,s),this._transaction.update(y._key,S),this}delete(r){const s=Sl(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Sl(e,this._firestore),s=new Hc(this._firestore);return super.get(e).then(c=>new jc(this._firestore,s,r._key,c._document,new wu(!1,!1),r.converter))}}function tf(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function yy(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function Ig(){if(!function Yi(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){Tn=lt.SDK_VERSION,(0,lt._registerComponent)(new fn.uA("firestore",(s,{instanceIdentifier:c,options:d})=>{const y=s.getProvider("app").getImmediate(),S=new Li(new hr(s.getProvider("auth-internal")),new N(s.getProvider("app-check-internal")),function(q,ne){if(!Object.prototype.hasOwnProperty.apply(q.options,["projectId"]))throw new Re(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ni(q.options.projectId,ne)}(y,c),y);return d=Object.assign({useFetchStreams:r},d),S._setSettings(d),S},"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)(on,"4.7.3",e),(0,lt.registerVersion)(on,"4.7.3","esm2017")}();class nf{constructor(e){this._delegate=e}static fromBase64String(e){return Ig(),new nf(Lo.fromBase64String(e))}static fromUint8Array(e){return yy(),new nf(Lo.fromUint8Array(e))}toBase64(){return Ig(),this._delegate.toBase64()}toUint8Array(){return yy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Np(a){return function vy(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class kp{enableIndexedDbPersistence(e,r){return function Zv(a,e){_n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings();return H_(a,wl.provider,{build:s=>new lp(s,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function yp(a){return zh.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function $_(a){if(a._initialized&&!a._terminated)throw new Re(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kt;return a._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.A)(function*(){try{yield(r=(0,Ee.A)(function*(c){if(!Gr.D())return Promise.resolve();const d=c+"main";yield Gr.delete(d)}),function s(c){return r.apply(this,arguments)})(Ju(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Fp{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ni||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&_n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function Td(a,e,r,s={}){var c;const d=(a=Wr(a,yu))._getSettings(),y=`${e}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==y&&_n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:y,ssl:!1})),s.mockUserToken){let S,F;if("string"==typeof s.mockUserToken)S=s.mockUserToken,F=En.MOCK_USER;else{S=(0,dn.Fy)(s.mockUserToken,null===(c=a._app)||void 0===c?void 0:c.options.projectId);const q=s.mockUserToken.sub||s.mockUserToken.user_id;if(!q)throw new Re(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new En(q)}a._authCredentials=new ar(new sn(S,F))}}(this._delegate,e,r,s)}enableNetwork(){return function vp(a){return function $v(a){return a.asyncQueue.enqueue((0,Ee.A)(function*(){const e=yield M_(a),r=yield Hh(a);return e.setNetworkEnabled(!0),function(c){const d=Fe(c);return d.L_.delete(0),bl(d)}(r)}))}(ns(a=Wr(a,Li)))}(this._delegate)}disableNetwork(){return function Jv(a){return function P_(a){return a.asyncQueue.enqueue((0,Ee.A)(function*(){const e=yield M_(a),r=yield Hh(a);return e.setNetworkEnabled(!1),(s=(0,Ee.A)(function*(d){const y=Fe(d);y.L_.add(0),yield oa(y),y.q_.set("Offline")}),function c(d){return s.apply(this,arguments)})(r);var s}))}(ns(a=Wr(a,Li)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Gv("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function og(a){return function(r){const s=new kt;return r.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function w_(a,e){return np.apply(this,arguments)}(yield aa(r),s)})),s.promise}(ns(a=Wr(a,Li)))}(this._delegate)}onSnapshotsInSync(e){return function sy(a,e){return function k_(a,e){const r=new Uh(e);return a.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return c=yield Al(a),d=r,Fe(c).Y_.add(d),void d.next();var c,d})),()=>{r.Za(),a.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return c=yield Al(a),d=r,void Fe(c).Y_.delete(d);var c,d}))}}(ns(a=Wr(a,Li)),_p(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sc(this,pp(this._delegate,e))}catch(r){throw us(r,"collection()","Firestore.collection()")}}doc(e){try{return new Vo(this,sg(this._delegate,e))}catch(r){throw us(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wo(this,function mp(a,e){if(a=Wr(a,yu),B_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Us(a,null,(s=e,new Ns(pe.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw us(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function yb(a,e,r){a=Wr(a,Li);const s=Object.assign(Object.assign({},uy),r);return function(d){if(d.maxAttempts<1)throw new Re(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(d,y,S){const F=new kt;return d.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){const q=yield function gu(a){return bd(a).then(e=>e.datastore)}(d);new DE(d.asyncQueue,q,S,y,F).au()})),F.promise}(ns(a),c=>e(new _b(a,c)),s)}(this._delegate,r=>e(new Tg(this,r)))}batch(){return ns(this._delegate),new Ag(new dy(this._delegate,e=>Fa(this._delegate,e)))}loadBundle(e){return function tb(a,e){const r=ns(a=Wr(a,Li)),s=new qv;return function Kv(a,e,r,s){const c=function(y,S){let F;return F="string"==typeof y?k().encode(y):y,ne=function(ne,ye){if(ne instanceof Uint8Array)return R_(ne,void 0);if(ne instanceof ArrayBuffer)return R_(new Uint8Array(ne),void 0);if(ne instanceof ReadableStream)return ne.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(F),new x_(ne,S);var ne}(r,vl(e));a.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){!function Bh(a,e,r){const s=Fe(a);var c;(c=(0,Ee.A)(function*(y,S,F){try{const q=yield S.getMetadata();if(yield function(Lt,Jt){const Kt=Fe(Lt),Bn=Mr(Jt.createTime);return Kt.persistence.runTransaction("hasNewerBundle","readonly",Jn=>Kt.Gr.getBundleMetadata(Jn,Jt.id)).then(Jn=>!!Jn&&Jn.createTime.compareTo(Bn)>=0)}(y.localStore,q))return yield S.close(),F._completeWith({taskState:"Success",documentsLoaded:(Lt=q).totalDocuments,bytesLoaded:Lt.totalBytes,totalDocuments:Lt.totalDocuments,totalBytes:Lt.totalBytes}),Promise.resolve(new Set);F._updateProgress(ep(q));const ne=new xv(q,y.localStore,S.serializer);let ye=yield S.Ua();for(;ye;){const bt=yield ne.la(ye);bt&&F._updateProgress(bt),ye=yield S.Ua()}const Ge=yield ne.complete();return yield Il(y,Ge.Ia,void 0),yield function(Lt,Jt){const Kt=Fe(Lt);return Kt.persistence.runTransaction("Save bundle","readwrite",Bn=>Kt.Gr.saveBundleMetadata(Bn,Jt))}(y.localStore,q),F._completeWith(Ge.progress),Promise.resolve(Ge.Pa)}catch(q){return _n("SyncEngine",`Loading bundle failed with ${q}`),F._failWith(q),Promise.resolve(new Set)}var Lt}),function d(y,S,F){return c.apply(this,arguments)})(s,e,r).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield aa(a),c,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function z_(a,e){return function F_(a,e){return a.asyncQueue.enqueue((0,Ee.A)(function*(){return function(s,c){const d=Fe(s);return d.persistence.runTransaction("Get named query","readonly",y=>d.Gr.getNamedQuery(y,c))}(yield Tl(a),e)}))}(ns(a=Wr(a,Li)),e).then(r=>r?new Us(a,null,r.query):null)}(this._delegate,e).then(r=>r?new wo(this,r):null)}}class wg extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(new Lo(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return Vo.forKey(r,this.firestore,null)}}class Tg{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new wg(e)}get(e){const r=xl(e);return this._delegate.get(r).then(s=>new Au(this._firestore,new jc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const c=xl(e);return s?(tf("Transaction.set",s),this._delegate.set(c,r,s)):this._delegate.set(c,r),this}update(e,r,s,...c){const d=xl(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...c),this}delete(e){const r=xl(e);return this._delegate.delete(r),this}}class Ag{constructor(e){this._delegate=e}set(e,r,s){const c=xl(e);return s?(tf("WriteBatch.set",s),this._delegate.set(c,r,s)):this._delegate.set(c,r),this}update(e,r,s,...c){const d=xl(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...c),this}delete(e){const r=xl(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Rl{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new Md(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rf(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=Rl.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let d=c.get(r);return d||(d=new Rl(e,new wg(e),r),c.set(r,d)),d}}Rl.INSTANCES=new WeakMap;class Vo{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new wg(e)}static forPath(e,r,s){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vo(r,new Mi(r._delegate,s,new Ke(e)))}static forKey(e,r,s){return new Vo(r,new Mi(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new sc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sc(this.firestore,pp(this._delegate,e))}catch(r){throw us(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,dn.Ku)(e))instanceof Mi&&gp(this._delegate,e)}set(e,r){r=tf("DocumentReference.set",r);try{return r?ry(this._delegate,e,r):ry(this._delegate,e)}catch(s){throw us(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?_g(this._delegate,e):_g(this._delegate,e,r,...s)}catch(c){throw us(c,"updateDoc()","DocumentReference.update()")}}delete(){return function iy(a){return Fa(Wr(a.firestore,Li),[new Ia(a._key,Ci.none())])}(this._delegate)}onSnapshot(...e){const r=Ey(e),s=Iy(e,c=>new Au(this.firestore,new jc(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return yg(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function ey(a){a=Wr(a,Mi);const e=Wr(a.firestore,Li),r=ns(e),s=new Hc(e);return function Id(a,e){const r=new kt;return a.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return(s=(0,Ee.A)(function*(d,y,S){try{const F=yield function(ne,ye){const Ge=Fe(ne);return Ge.persistence.runTransaction("read document","readonly",bt=>Ge.localDocuments.getDocument(bt,ye))}(d,y);F.isFoundDocument()?S.resolve(F):F.isNoDocument()?S.resolve(null):S.reject(new Re(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(F){const q=uu(F,`Failed to get document '${y} from cache`);S.reject(q)}}),function c(d,y,S){return s.apply(this,arguments)})(yield Tl(a),e,r);var s})),r.promise}(r,a._key).then(c=>new jc(e,s,a._key,c,new wu(null!==c&&c.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function kE(a){a=Wr(a,Mi);const e=Wr(a.firestore,Li);return O_(ns(e),a._key,{source:"server"}).then(r=>xp(e,a,r))}(this._delegate):function NE(a){a=Wr(a,Mi);const e=Wr(a.firestore,Li);return O_(ns(e),a._key).then(r=>xp(e,a,r))}(this._delegate),r.then(s=>new Au(this.firestore,new jc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Vo(this.firestore,this._delegate.withConverter(e?Rl.getInstance(this.firestore,e):null))}}function us(a,e,r){return a.message=a.message.replace(e,r),a}function Ey(a){for(const e of a)if("object"==typeof e&&!Np(e))return e;return{}}function Iy(a,e){var r,s;let c;return c=Np(a[0])?a[0]:Np(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{c.next&&c.next(e(d))},error:null===(r=c.error)||void 0===r?void 0:r.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Au{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new Vo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return fb(this._delegate,e._delegate)}}class rf extends Au{data(e){const r=this._delegate.data(e);return this._delegate._converter||function Ft(a,e){a||$t()}(void 0!==r),r}}class wo{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new wg(e)}where(e,r,s){try{return new wo(this.firestore,Eu(this._delegate,function ab(a,e,r){const s=e,c=Sd("where",a);return _s._create(c,s,r)}(e,r,s)))}catch(c){throw us(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new wo(this.firestore,Eu(this._delegate,function q_(a,e="asc"){const r=e,s=Sd("orderBy",a);return Xh._create(s,r)}(e,r)))}catch(s){throw us(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wo(this.firestore,Eu(this._delegate,function cb(a){return _u("limit",a),Yh._create("limit",a,"F")}(e)))}catch(r){throw us(r,"limit()","Query.limit()")}}limitToLast(e){try{return new wo(this.firestore,Eu(this._delegate,function Q_(a){return _u("limitToLast",a),Yh._create("limitToLast",a,"L")}(e)))}catch(r){throw us(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wo(this.firestore,Eu(this._delegate,function lb(...a){return Zh._create("startAt",a,!0)}(...e)))}catch(r){throw us(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wo(this.firestore,Eu(this._delegate,function ub(...a){return Zh._create("startAfter",a,!1)}(...e)))}catch(r){throw us(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wo(this.firestore,Eu(this._delegate,function X_(...a){return Dp._create("endBefore",a,!1)}(...e)))}catch(r){throw us(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wo(this.firestore,Eu(this._delegate,function Rd(...a){return Dp._create("endAt",a,!0)}(...e)))}catch(r){throw us(r,"endAt()","Query.endAt()")}}isEqual(e){return vu(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function ty(a){a=Wr(a,Us);const e=Wr(a.firestore,Li),r=ns(e),s=new Hc(e);return function zv(a,e){const r=new kt;return a.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return(s=(0,Ee.A)(function*(d,y,S){try{const F=yield Sc(d,y,!0),q=new kh(y,F.Ts),ne=q.ma(F.documents),ye=q.applyChanges(ne,!1);S.resolve(ye.snapshot)}catch(F){const q=uu(F,`Failed to execute query '${y} against cache`);S.reject(q)}}),function c(d,y,S){return s.apply(this,arguments)})(yield Tl(a),e,r);var s})),r.promise}(r,a._query).then(c=>new Tu(e,s,a,c))}(this._delegate):"server"===e?.source?function ny(a){a=Wr(a,Us);const e=Wr(a.firestore,Li),r=ns(e),s=new Hc(e);return N_(r,a._query,{source:"server"}).then(c=>new Tu(e,s,a,c))}(this._delegate):function Rp(a){a=Wr(a,Us);const e=Wr(a.firestore,Li),r=ns(e),s=new Hc(e);return ka(a._query),N_(r,a._query).then(c=>new Tu(e,s,a,c))}(this._delegate),r.then(s=>new Od(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=Ey(e),s=Iy(e,c=>new Od(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return yg(this._delegate,r,s)}withConverter(e){return new wo(this.firestore,this._delegate.withConverter(e?Rl.getInstance(this.firestore,e):null))}}class wb{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new rf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Od{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new wb(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new rf(this._firestore,s))})}isEqual(e){return fb(this._delegate,e._delegate)}}class sc extends wo{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vo(this.firestore,e):null}doc(e){try{return new Vo(this.firestore,void 0===e?sg(this._delegate):sg(this._delegate,e))}catch(r){throw us(r,"doc()","CollectionReference.doc()")}}add(e){return function Lr(a,e){const r=Wr(a.firestore,Li),s=sg(a),c=xd(a.converter,e);return Fa(r,[Cd(Ad(a.firestore),"addDoc",s._key,c,null!==a.converter,{}).toMutation(s._key,Ci.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new Vo(this.firestore,r))}isEqual(e){return gp(this._delegate,e._delegate)}withConverter(e){return new sc(this.firestore,this._delegate.withConverter(e?Rl.getInstance(this.firestore,e):null))}}function xl(a){return Wr(a,Mi)}class Nd{constructor(...e){this._delegate=new Uc(...e)}static documentId(){return new Nd(Se.keyField().canonicalString())}isEqual(e){return(e=(0,dn.Ku)(e))instanceof Uc&&this._delegate._internalPath.isEqual(e._internalPath)}}class kd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fy(){return new lg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kd(e)}static delete(){const e=function hy(){return new Dd("deleteField")}();return e._methodName="FieldValue.delete",new kd(e)}static arrayUnion(...e){const r=function vb(...a){return new Ip("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new kd(r)}static arrayRemove(...e){const r=function bb(...a){return new ug("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new kd(r)}static increment(e){const r=function Xo(a){return new wp("increment",a)}(e);return r._methodName="FieldValue.increment",new kd(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Tb={Firestore:Fp,GeoPoint:Ep,Timestamp:be,Blob:nf,Transaction:Tg,WriteBatch:Ag,DocumentReference:Vo,DocumentSnapshot:Au,Query:wo,QueryDocumentSnapshot:rf,QuerySnapshot:Od,CollectionReference:sc,FieldPath:Nd,FieldValue:kd,setLogLevel:function by(a){!function oi(a){Zt.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};function Ay(a,e){return function Ab(a,e=Rn.E){return new Te.c(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Lp(a,e){return Ay(a,e).pipe((0,$e.T)(r=>({payload:r,type:"query"})))}!function Ty(a){(function wy(a,e){a.INTERNAL.registerComponent(new fn.uA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),c=r.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},Tb)))})(a,(e,r)=>new Fp(e,r,new kp)),a.registerVersion("@firebase/firestore-compat","0.3.38")}(ze.A);class Fd{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:c,query:d}=My(s,r);return new Sy(c,d,this.afs)}snapshotChanges(){return function Cy(a,e){return Ay(a,e).pipe((0,un.Z)(void 0),Ve(),(0,$e.T)(r=>{const[s,c]=r;return c.exists?s?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,$e.T)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,De.H)(this.ref.get(e)).pipe(oe.U0)}}function Vp(a,e){return Lp(a,e).pipe((0,un.Z)(void 0),Ve(),(0,$e.T)(r=>{const[s,c]=r,d=c.payload.docChanges(),y=d.map(S=>({type:S.type,payload:S}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((S,F)=>{const q=d.find(ye=>ye.doc.ref.isEqual(S.ref)),ne=s?.payload.docs.find(ye=>ye.ref.isEqual(S.ref));q&&JSON.stringify(q.doc.metadata)===JSON.stringify(S.metadata)||!q&&ne&&JSON.stringify(ne.metadata)===JSON.stringify(S.metadata)||y.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:S}})}),y}))}function Cg(a,e,r){return Vp(a,r).pipe((0,Ye.S)((s,c)=>function Dy(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function Cb(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Dg(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Dg(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Dg(a,e.oldIndex,1)}return a}(a,s))}),a}(s,c.map(d=>d.payload),e),[]),(0,ut.F)(),(0,$e.T)(s=>s.map(c=>({type:c.type,payload:c}))))}function Dg(a,e,r,...s){const c=a.slice();return c.splice(e,r,...s),c}function Ld(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Sy{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=Vp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,$e.T)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),r.pipe((0,un.Z)(void 0),Ve(),(0,Ue.p)(([s,c])=>c.length>0||!s),(0,$e.T)(([,s])=>s),oe.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,Ye.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Ld(e);return Cg(this.query,r,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(e={}){return Lp(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.T)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),oe.U0)}get(e){return(0,De.H)(this.query.get(e)).pipe(oe.U0)}add(e){return this.ref.add(e)}doc(e){return new Fd(this.ref.doc(e),this.afs)}}class Db{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Vp(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,Ue.p)(r=>r.length>0),oe.U0):Vp(this.query,this.afs.schedulers.outsideAngular).pipe(oe.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,Ye.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Ld(e);return Cg(this.query,r,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(e={}){return Lp(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.T)(s=>s.payload.docs.map(c=>e.idField?{[e.idField]:c.id,...c.data()}:c.data())),oe.U0)}get(e){return(0,De.H)(this.query.get(e)).pipe(oe.U0)}}const Ry=new J.nKC("angularfire2.enableFirestorePersistence"),xy=new J.nKC("angularfire2.firestore.persistenceSettings"),Sb=new J.nKC("angularfire2.firestore.settings"),Rb=new J.nKC("angularfire2.firestore.use-emulator");function My(a,e=(r=>r)){return{query:e(a),ref:a}}let Py=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,c,d,y,S,F,q,ne,ye,Ge,bt,Lt,Jt,Kt,Bn,Jn){this.schedulers=F;const bn=(0,Y.iB)(r,S,s),er=ne;ye&&br(bn,S,Ge,Lt,Jt,Kt,bt,Bn),[this.firestore,this.persistenceEnabled$]=(0,Y.BM)(`${bn.name}.firestore`,"AngularFirestore",bn.name,()=>{const xr=S.runOutsideAngular(()=>bn.firestore());if(d&&xr.settings(d),er&&xr.useEmulator(...er),c&&!(0,p.Vy)(y)){const wr=()=>{try{return(0,De.H)(xr.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(ct){return typeof console<"u"&&console.warn(ct),(0,ve.of)(!1)}};return[xr,S.runOutsideAngular(wr)]}return[xr,(0,ve.of)(!1)]},[d,er,c])}collection(r,s){let c;c="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:y}=My(c,s),S=this.schedulers.ngZone.run(()=>d);return new Sy(S,y,this)}collectionGroup(r,s){const c=s||(y=>y),d=this.firestore.collectionGroup(r);return new Db(c(d),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const c=this.schedulers.ngZone.run(()=>s);return new Fd(c,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(J.KVO(Y.rx),J.KVO(Y.uP,8),J.KVO(Ry,8),J.KVO(Sb,8),J.KVO(J.Agw),J.KVO(J.SKi),J.KVO(oe.u0),J.KVO(xy,8),J.KVO(Rb,8),J.KVO(Dr,8),J.KVO(We,8),J.KVO(It,8),J.KVO(Ht,8),J.KVO(pt,8),J.KVO(ln,8),J.KVO($n,8),J.KVO(oe.Jv,8))};static \u0275prov=J.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Oy=(()=>{class a{constructor(){Ne.A.registerVersion("angularfire",oe.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Ry,useValue:!0},{provide:xy,useValue:r}]}}static \u0275fac=function(s){return new(s||a)};static \u0275mod=J.$C({type:a});static \u0275inj=J.G2t({providers:[Py]})}return a})()},3383:(nn,tt,j)=>{j.d(tt,{ap:()=>eo,y5:()=>G});var p=j(1825),J=j(1985),oe=j(7673),Y=j(8455),Oe=j(152),Le=j(6354),ve=j(5558),Te=j(7705),De=j(9253),ce=j(3345),ge=j(467),Pe=j(7852),$e=j(1076),ht=j(1362);const Ot="firebasestorage.googleapis.com",Et="storageBucket";class Rt extends $e.g{constructor(g,M,z=0){super(Ue(g),`Firebase Storage: ${M} (${Ue(g)})`),this.status_=z,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rt.prototype)}get status(){return this.status_}set status(g){this.status_=g}_codeEquals(g){return Ue(g)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(g){this.customData.serverResponse=g,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var de=function(E){return E.UNKNOWN="unknown",E.OBJECT_NOT_FOUND="object-not-found",E.BUCKET_NOT_FOUND="bucket-not-found",E.PROJECT_NOT_FOUND="project-not-found",E.QUOTA_EXCEEDED="quota-exceeded",E.UNAUTHENTICATED="unauthenticated",E.UNAUTHORIZED="unauthorized",E.UNAUTHORIZED_APP="unauthorized-app",E.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",E.INVALID_CHECKSUM="invalid-checksum",E.CANCELED="canceled",E.INVALID_EVENT_NAME="invalid-event-name",E.INVALID_URL="invalid-url",E.INVALID_DEFAULT_BUCKET="invalid-default-bucket",E.NO_DEFAULT_BUCKET="no-default-bucket",E.CANNOT_SLICE_BLOB="cannot-slice-blob",E.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",E.NO_DOWNLOAD_URL="no-download-url",E.INVALID_ARGUMENT="invalid-argument",E.INVALID_ARGUMENT_COUNT="invalid-argument-count",E.APP_DELETED="app-deleted",E.INVALID_ROOT_OPERATION="invalid-root-operation",E.INVALID_FORMAT="invalid-format",E.INTERNAL_ERROR="internal-error",E.UNSUPPORTED_ENVIRONMENT="unsupported-environment",E}(de||{});function Ue(E){return"storage/"+E}function Ne(){return new Rt(de.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ln(){return new Rt(de.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $n(){return new Rt(de.CANCELED,"User canceled the upload/download.")}function Rn(){return new Rt(de.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ve(E){return new Rt(de.INVALID_ARGUMENT,E)}function Ye(){return new Rt(de.APP_DELETED,"The Firebase app was deleted.")}function ut(E){return new Rt(de.INVALID_ROOT_OPERATION,"The operation '"+E+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ze(E,g){return new Rt(de.INVALID_FORMAT,"String does not match format '"+E+"': "+g)}function Ee(E){throw new Rt(de.INTERNAL_ERROR,"Internal error: "+E)}class lt{constructor(g,M){this.bucket=g,this.path_=M}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const g=encodeURIComponent;return"/b/"+g(this.bucket)+"/o/"+g(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(g,M){let z;try{z=lt.makeFromUrl(g,M)}catch{return new lt(g,"")}if(""===z.path)return z;throw function Dr(E){return new Rt(de.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+E+"'.")}(g)}static makeFromUrl(g,M){let z=null;const Ce="([A-Za-z0-9.\\-_]+)",kn=new RegExp("^gs://"+Ce+"(/(.*))?$","i");function pr(tr){tr.path_=decodeURIComponent(tr.path)}const Cr=M.replace(/[.]/g,"\\."),Ei=[{regex:kn,indices:{bucket:1,path:3},postModify:function ot(tr){"/"===tr.path.charAt(tr.path.length-1)&&(tr.path_=tr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Cr}/v[A-Za-z0-9_]+/b/${Ce}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:pr},{regex:new RegExp(`^https?://${M===Ot?"(?:storage.googleapis.com|storage.cloud.google.com)":M}/${Ce}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:pr}];for(let tr=0;tr<Ei.length;tr++){const nr=Ei[tr],Qi=nr.regex.exec(g);if(Qi){let co=Qi[nr.indices.path];co||(co=""),z=new lt(Qi[nr.indices.bucket],co),nr.postModify(z);break}}if(null==z)throw function br(E){return new Rt(de.INVALID_URL,"Invalid URL '"+E+"'.")}(g);return z}}class fn{constructor(g){this.promise_=Promise.reject(g)}getPromise(){return this.promise_}cancel(g=!1){}}function Tr(E){return"string"==typeof E||E instanceof String}function On(E){return Yn()&&E instanceof Blob}function Yn(){return typeof Blob<"u"}function Ar(E,g,M,z){if(z<g)throw Ve(`Invalid value for '${E}'. Expected ${g} or greater.`);if(z>M)throw Ve(`Invalid value for '${E}'. Expected ${M} or less.`)}function Er(E,g,M){let z=g;return null==M&&(z=`https://${g}`),`${M}://${z}/v0${E}`}function Pt(E){const g=encodeURIComponent;let M="?";for(const z in E)E.hasOwnProperty(z)&&(M=M+(g(z)+"=")+g(E[z])+"&");return M=M.slice(0,-1),M}var ae=function(E){return E[E.NO_ERROR=0]="NO_ERROR",E[E.NETWORK_ERROR=1]="NETWORK_ERROR",E[E.ABORT=2]="ABORT",E}(ae||{});function Me(E,g){const M=E>=500&&E<600,Ce=-1!==[408,429].indexOf(E),ot=-1!==g.indexOf(E);return M||Ce||ot}class qe{constructor(g,M,z,Ce,ot,Ut,kn,Cn,pr,Sr,Cr,gi=!0){this.url_=g,this.method_=M,this.headers_=z,this.body_=Ce,this.successCodes_=ot,this.additionalRetryCodes_=Ut,this.callback_=kn,this.errorCallback_=Cn,this.timeout_=pr,this.progressCallback_=Sr,this.connectionFactory_=Cr,this.retry=gi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((or,ei)=>{this.resolve_=or,this.reject_=ei,this.start_()})}start_(){const M=(z,Ce)=>{const ot=this.resolve_,Ut=this.reject_,kn=Ce.connection;if(Ce.wasSuccessCode)try{const Cn=this.callback_(kn,kn.getResponse());!function en(E){return void 0!==E}(Cn)?ot():ot(Cn)}catch(Cn){Ut(Cn)}else if(null!==kn){const Cn=Ne();Cn.serverResponse=kn.getErrorText(),Ut(this.errorCallback_?this.errorCallback_(kn,Cn):Cn)}else Ut(Ce.canceled?this.appDelete_?Ye():$n():ln())};this.canceled_?M(0,new it(!1,null,!0)):this.backoffId_=function zn(E,g,M){let z=1,Ce=null,ot=null,Ut=!1,kn=0;function Cn(){return 2===kn}let pr=!1;function Sr(...ti){pr||(pr=!0,g.apply(null,ti))}function Cr(ti){Ce=setTimeout(()=>{Ce=null,E(or,Cn())},ti)}function gi(){ot&&clearTimeout(ot)}function or(ti,...vi){if(pr)return void gi();if(ti)return gi(),void Sr.call(null,ti,...vi);if(Cn()||Ut)return gi(),void Sr.call(null,ti,...vi);let Ei;z<64&&(z*=2),1===kn?(kn=2,Ei=0):Ei=1e3*(z+Math.random()),Cr(Ei)}let ei=!1;function Wi(ti){ei||(ei=!0,gi(),!pr&&(null!==Ce?(ti||(kn=2),clearTimeout(Ce),Cr(0)):ti||(kn=1)))}return Cr(0),ot=setTimeout(()=>{Ut=!0,Wi(!0)},M),Wi}((z,Ce)=>{if(Ce)return void z(!1,new it(!1,null,!0));const ot=this.connectionFactory_();this.pendingConnection_=ot;const Ut=kn=>{null!==this.progressCallback_&&this.progressCallback_(kn.loaded,kn.lengthComputable?kn.total:-1)};null!==this.progressCallback_&&ot.addUploadProgressListener(Ut),ot.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&ot.removeUploadProgressListener(Ut),this.pendingConnection_=null;const kn=ot.getErrorCode()===ae.NO_ERROR,Cn=ot.getStatus();if(!kn||Me(Cn,this.additionalRetryCodes_)&&this.retry){const Sr=ot.getErrorCode()===ae.ABORT;return void z(!1,new it(!1,null,Sr))}const pr=-1!==this.successCodes_.indexOf(Cn);z(!0,new it(pr,ot))})},M,this.timeout_)}getPromise(){return this.promise_}cancel(g){this.canceled_=!0,this.appDelete_=g||!1,null!==this.backoffId_&&function dn(E){E(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class it{constructor(g,M,z){this.wasSuccessCode=g,this.connection=M,this.canceled=!!z}}function Ln(...E){const g=function Zt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==g){const M=new g;for(let z=0;z<E.length;z++)M.append(E[z]);return M.getBlob()}if(Yn())return new Blob(E);throw new Rt(de.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _n{constructor(g,M){this.data=g,this.contentType=M||null}}function ri(E,g){switch(E){case xn.RAW:return new _n($t(g));case xn.BASE64:case xn.BASE64URL:return new _n(Ft(E,g));case xn.DATA_URL:return new _n(function ie(E){const g=new Fe(E);return g.base64?Ft(xn.BASE64,g.rest):function rn(E){let g;try{g=decodeURIComponent(E)}catch{throw ze(xn.DATA_URL,"Malformed data URL.")}return $t(g)}(g.rest)}(g),function Re(E){return new Fe(E).contentType}(g))}throw Ne()}function $t(E){const g=[];for(let M=0;M<E.length;M++){let z=E.charCodeAt(M);z<=127?g.push(z):z<=2047?g.push(192|z>>6,128|63&z):55296==(64512&z)?M<E.length-1&&56320==(64512&E.charCodeAt(M+1))?(z=65536|(1023&z)<<10|1023&E.charCodeAt(++M),g.push(240|z>>18,128|z>>12&63,128|z>>6&63,128|63&z)):g.push(239,191,189):56320==(64512&z)?g.push(239,191,189):g.push(224|z>>12,128|z>>6&63,128|63&z)}return new Uint8Array(g)}function Ft(E,g){switch(E){case xn.BASE64:{const Ce=-1!==g.indexOf("-"),ot=-1!==g.indexOf("_");if(Ce||ot)throw ze(E,"Invalid character '"+(Ce?"-":"_")+"' found: is it base64url encoded?");break}case xn.BASE64URL:{const Ce=-1!==g.indexOf("+"),ot=-1!==g.indexOf("/");if(Ce||ot)throw ze(E,"Invalid character '"+(Ce?"+":"/")+"' found: is it base64 encoded?");g=g.replace(/-/g,"+").replace(/_/g,"/");break}}let M;try{M=function et(E){if(typeof atob>"u")throw function Wt(E){return new Rt(de.UNSUPPORTED_ENVIRONMENT,`${E} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(E)}(g)}catch(Ce){throw Ce.message.includes("polyfill")?Ce:ze(E,"Invalid character found")}const z=new Uint8Array(M.length);for(let Ce=0;Ce<M.length;Ce++)z[Ce]=M.charCodeAt(Ce);return z}class Fe{constructor(g){this.base64=!1,this.contentType=null;const M=g.match(/^data:([^,]+)?,/);if(null===M)throw ze(xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const z=M[1]||null;null!=z&&(this.base64=function kt(E,g){return E.length>=g.length&&E.substring(E.length-g.length)===g}(z,";base64"),this.contentType=this.base64?z.substring(0,z.length-7):z),this.rest=g.substring(g.indexOf(",")+1)}}class sn{constructor(g,M){let z=0,Ce="";On(g)?(this.data_=g,z=g.size,Ce=g.type):g instanceof ArrayBuffer?(M?this.data_=new Uint8Array(g):(this.data_=new Uint8Array(g.byteLength),this.data_.set(new Uint8Array(g))),z=this.data_.length):g instanceof Uint8Array&&(M?this.data_=g:(this.data_=new Uint8Array(g.length),this.data_.set(g)),z=g.length),this.size_=z,this.type_=Ce}size(){return this.size_}type(){return this.type_}slice(g,M){if(On(this.data_)){const Ce=function oi(E,g,M){return E.webkitSlice?E.webkitSlice(g,M):E.mozSlice?E.mozSlice(g,M):E.slice?E.slice(g,M):null}(this.data_,g,M);return null===Ce?null:new sn(Ce)}{const z=new Uint8Array(this.data_.buffer,g,M-g);return new sn(z,!0)}}static getBlob(...g){if(Yn()){const M=g.map(z=>z instanceof sn?z.data_:z);return new sn(Ln.apply(null,M))}{const M=g.map(Ut=>Tr(Ut)?ri(xn.RAW,Ut).data:Ut.data_);let z=0;M.forEach(Ut=>{z+=Ut.byteLength});const Ce=new Uint8Array(z);let ot=0;return M.forEach(Ut=>{for(let kn=0;kn<Ut.length;kn++)Ce[ot++]=Ut[kn]}),new sn(Ce,!0)}}uploadData(){return this.data_}}function Hn(E){let g;try{g=JSON.parse(E)}catch{return null}return function Gn(E){return"object"==typeof E&&!Array.isArray(E)}(g)?g:null}function At(E){const g=E.lastIndexOf("/",E.length-2);return-1===g?E:E.slice(g+1)}function fe(E,g){return g}class O{constructor(g,M,z,Ce){this.server=g,this.local=M||g,this.writable=!!z,this.xform=Ce||fe}}let N=null;function _e(){if(N)return N;const E=[];E.push(new O("bucket")),E.push(new O("generation")),E.push(new O("metageneration")),E.push(new O("name","fullPath",!0));const M=new O("name");M.xform=function g(ot,Ut){return function W(E){return!Tr(E)||E.length<2?E:At(E)}(Ut)},E.push(M);const Ce=new O("size");return Ce.xform=function z(ot,Ut){return void 0!==Ut?Number(Ut):Ut},E.push(Ce),E.push(new O("timeCreated")),E.push(new O("updated")),E.push(new O("md5Hash",null,!0)),E.push(new O("cacheControl",null,!0)),E.push(new O("contentDisposition",null,!0)),E.push(new O("contentEncoding",null,!0)),E.push(new O("contentLanguage",null,!0)),E.push(new O("contentType",null,!0)),E.push(new O("metadata","customMetadata",!0)),N=E,N}function me(E,g,M){const z=Hn(g);return null===z?null:function ue(E,g,M){const z={type:"file"},Ce=M.length;for(let ot=0;ot<Ce;ot++){const Ut=M[ot];z[Ut.local]=Ut.xform(z,g[Ut.server])}return function Ae(E,g){Object.defineProperty(E,"ref",{get:function M(){const ot=new lt(E.bucket,E.fullPath);return g._makeStorageReference(ot)}})}(z,E),z}(E,z,M)}function be(E,g){const M={},z=g.length;for(let Ce=0;Ce<z;Ce++){const ot=g[Ce];ot.writable&&(M[ot.server]=E[ot.local])}return JSON.stringify(M)}const je="prefixes",Bt="items";class Se{constructor(g,M,z,Ce){this.url=g,this.method=M,this.handler=z,this.timeout=Ce,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ke(E){if(!E)throw Ne()}function jt(E,g){return function M(z,Ce){const ot=me(E,Ce,g);return Ke(null!==ot),ot}}function qn(E){return function g(M,z){let Ce;return Ce=401===M.getStatus()?M.getErrorText().includes("Firebase App Check token is invalid")?function Ht(){return new Rt(de.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function It(){return new Rt(de.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===M.getStatus()?function We(E){return new Rt(de.QUOTA_EXCEEDED,"Quota for bucket '"+E+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(E.bucket):403===M.getStatus()?function pt(E){return new Rt(de.UNAUTHORIZED,"User does not have permission to access '"+E+"'.")}(E.path):z,Ce.status=M.getStatus(),Ce.serverResponse=z.serverResponse,Ce}}function tn(E){const g=qn(E);return function M(z,Ce){let ot=g(z,Ce);return 404===z.getStatus()&&(ot=function Je(E){return new Rt(de.OBJECT_NOT_FOUND,"Object '"+E+"' does not exist.")}(E.path)),ot.serverResponse=Ce.serverResponse,ot}}function hi(E,g,M){const Ce=Er(g.fullServerUrl(),E.host,E._protocol),Ut=E.maxOperationRetryTime,kn=new Se(Ce,"GET",jt(E,M),Ut);return kn.errorHandler=tn(g),kn}function gt(E,g,M,z,Ce){const ot={};ot.prefix=g.isRoot?"":g.path+"/",M&&M.length>0&&(ot.delimiter=M),z&&(ot.pageToken=z),Ce&&(ot.maxResults=Ce);const kn=Er(g.bucketOnlyServerUrl(),E.host,E._protocol),pr=E.maxOperationRetryTime,Sr=new Se(kn,"GET",function an(E,g){return function M(z,Ce){const ot=function Ie(E,g,M){const z=Hn(M);return null===z?null:function pe(E,g,M){const z={prefixes:[],items:[],nextPageToken:M.nextPageToken};if(M[je])for(const Ce of M[je]){const ot=Ce.replace(/\/$/,""),Ut=E._makeStorageReference(new lt(g,ot));z.prefixes.push(Ut)}if(M[Bt])for(const Ce of M[Bt]){const ot=E._makeStorageReference(new lt(g,Ce.name));z.items.push(ot)}return z}(E,g,z)}(E,g,Ce);return Ke(null!==ot),ot}}(E,g.bucket),pr);return Sr.urlParams=ot,Sr.errorHandler=qn(g),Sr}function In(E,g,M){const z=Object.assign({},M);return z.fullPath=E.path,z.size=g.size(),z.contentType||(z.contentType=function pn(E,g){return E&&E.contentType||g&&g.type()||"application/octet-stream"}(null,g)),z}class dr{constructor(g,M,z,Ce){this.current=g,this.total=M,this.finalized=!!z,this.metadata=Ce||null}}function Xe(E,g){let M=null;try{M=E.getResponseHeader("X-Goog-Upload-Status")}catch{Ke(!1)}return Ke(!!M&&-1!==(g||["active"]).indexOf(M)),M}const Ri={STATE_CHANGED:"state_changed"},zr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ds(E){switch(E){case"running":case"pausing":case"canceling":return zr.RUNNING;case"paused":return zr.PAUSED;case"success":return zr.SUCCESS;case"canceled":return zr.CANCELED;default:return zr.ERROR}}class fi{constructor(g,M,z){if(function Pn(E){return"function"==typeof E}(g)||null!=M||null!=z)this.next=g,this.error=M??void 0,this.complete=z??void 0;else{const ot=g;this.next=ot.next,this.error=ot.error,this.complete=ot.complete}}}function Ss(E){return(...g)=>{Promise.resolve().then(()=>E(...g))}}let go=null;class ma{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ae.NO_ERROR,this.sendPromise_=new Promise(g=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ae.ABORT,g()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ae.NETWORK_ERROR,g()}),this.xhr_.addEventListener("load",()=>{g()})})}send(g,M,z,Ce){if(this.sent_)throw Ee("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(M,g,!0),void 0!==Ce)for(const ot in Ce)Ce.hasOwnProperty(ot)&&this.xhr_.setRequestHeader(ot,Ce[ot].toString());return void 0!==z?this.xhr_.send(z):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ee("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ee("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ee("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ee("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(g){return this.xhr_.getResponseHeader(g)}addUploadProgressListener(g){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",g)}removeUploadProgressListener(g){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",g)}}class xo extends ma{initXhr(){this.xhr_.responseType="text"}}function Br(){return go?go():new xo}class Hs{constructor(g,M,z=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=g,this._blob=M,this._metadata=z,this._mappings=_e(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ce=>{if(this._request=void 0,this._chunkMultiplier=1,Ce._codeEquals(de.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const ot=this.isExponentialBackoffExpired();if(Me(Ce.status,[])){if(!ot)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Ce=ln()}this._error=Ce,this._transition("error")}},this._metadataErrorHandler=Ce=>{this._request=void 0,Ce._codeEquals(de.CANCELED)?this.completeTransitions_():(this._error=Ce,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Ce,ot)=>{this._resolve=Ce,this._reject=ot,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const g=this._transferred;return M=>this._updateProgress(g+M)}_shouldDoResumable(g){return g.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(g){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([M,z])=>{switch(this._state){case"running":g(M,z);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((g,M)=>{const z=function Vn(E,g,M,z,Ce){const ot=g.bucketOnlyServerUrl(),Ut=In(g,z,Ce),kn={name:Ut.fullPath},Cn=Er(ot,E.host,E._protocol),Sr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${z.size()}`,"X-Goog-Upload-Header-Content-Type":Ut.contentType,"Content-Type":"application/json; charset=utf-8"},Cr=be(Ut,M),ei=new Se(Cn,"POST",function or(Wi){let ti;Xe(Wi);try{ti=Wi.getResponseHeader("X-Goog-Upload-URL")}catch{Ke(!1)}return Ke(Tr(ti)),ti},E.maxUploadRetryTime);return ei.urlParams=kn,ei.headers=Sr,ei.body=Cr,ei.errorHandler=qn(g),ei}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ce=this._ref.storage._makeRequest(z,Br,g,M);this._request=Ce,Ce.getPromise().then(ot=>{this._request=void 0,this._uploadUrl=ot,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const g=this._uploadUrl;this._resolveToken((M,z)=>{const Ce=function Gr(E,g,M,z){const Cn=new Se(M,"POST",function ot(pr){const Sr=Xe(pr,["active","final"]);let Cr=null;try{Cr=pr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ke(!1)}Cr||Ke(!1);const gi=Number(Cr);return Ke(!isNaN(gi)),new dr(gi,z.size(),"final"===Sr)},E.maxUploadRetryTime);return Cn.headers={"X-Goog-Upload-Command":"query"},Cn.errorHandler=qn(g),Cn}(this._ref.storage,this._ref._location,g,this._blob),ot=this._ref.storage._makeRequest(Ce,Br,M,z);this._request=ot,ot.getPromise().then(Ut=>{this._request=void 0,this._updateProgress(Ut.current),this._needToFetchStatus=!1,Ut.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const g=262144*this._chunkMultiplier,M=new dr(this._transferred,this._blob.size()),z=this._uploadUrl;this._resolveToken((Ce,ot)=>{let Ut;try{Ut=function ys(E,g,M,z,Ce,ot,Ut,kn){const Cn=new dr(0,0);if(Ut?(Cn.current=Ut.current,Cn.total=Ut.total):(Cn.current=0,Cn.total=z.size()),z.size()!==Cn.total)throw function un(){return new Rt(de.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const pr=Cn.total-Cn.current;let Sr=pr;Ce>0&&(Sr=Math.min(Sr,Ce));const Cr=Cn.current;let or="";or=0===Sr?"finalize":pr===Sr?"upload, finalize":"upload";const ei={"X-Goog-Upload-Command":or,"X-Goog-Upload-Offset":`${Cn.current}`},Wi=z.slice(Cr,Cr+Sr);if(null===Wi)throw Rn();const Ei=new Se(M,"POST",function ti(tr,nr){const Qi=Xe(tr,["active","final"]),Ti=Cn.current+Sr,co=z.size();let Qs;return Qs="final"===Qi?jt(g,ot)(tr,nr):null,new dr(Ti,co,"final"===Qi,Qs)},g.maxUploadRetryTime);return Ei.headers=ei,Ei.body=Wi.uploadData(),Ei.progressCallback=kn||null,Ei.errorHandler=qn(E),Ei}(this._ref._location,this._ref.storage,z,this._blob,g,this._mappings,M,this._makeProgressCallback())}catch(Cn){return this._error=Cn,void this._transition("error")}const kn=this._ref.storage._makeRequest(Ut,Br,Ce,ot,!1);this._request=kn,kn.getPromise().then(Cn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Cn.current),Cn.finalized?(this._metadata=Cn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((g,M)=>{const z=hi(this._ref.storage,this._ref._location,this._mappings),Ce=this._ref.storage._makeRequest(z,Br,g,M);this._request=Ce,Ce.getPromise().then(ot=>{this._request=void 0,this._metadata=ot,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((g,M)=>{const z=function ir(E,g,M,z,Ce){const ot=g.bucketOnlyServerUrl(),Ut={"X-Goog-Upload-Protocol":"multipart"},Cn=function kn(){let Ei="";for(let tr=0;tr<2;tr++)Ei+=Math.random().toString().slice(2);return Ei}();Ut["Content-Type"]="multipart/related; boundary="+Cn;const pr=In(g,z,Ce),Sr=be(pr,M),or=sn.getBlob("--"+Cn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Sr+"\r\n--"+Cn+"\r\nContent-Type: "+pr.contentType+"\r\n\r\n",z,"\r\n--"+Cn+"--");if(null===or)throw Rn();const ei={name:pr.fullPath},Wi=Er(ot,E.host,E._protocol),vi=E.maxUploadRetryTime,_i=new Se(Wi,"POST",jt(E,M),vi);return _i.urlParams=ei,_i.headers=Ut,_i.body=or.uploadData(),_i.errorHandler=qn(g),_i}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ce=this._ref.storage._makeRequest(z,Br,g,M);this._request=Ce,Ce.getPromise().then(ot=>{this._request=void 0,this._metadata=ot,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(g){const M=this._transferred;this._transferred=g,this._transferred!==M&&this._notifyObservers()}_transition(g){if(this._state!==g)switch(g){case"canceling":case"pausing":this._state=g,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const M="paused"===this._state;this._state=g,M&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=g,this._notifyObservers();break;case"canceled":this._error=$n(),this._state=g,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const g=Ds(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:g,metadata:this._metadata,task:this,ref:this._ref}}on(g,M,z,Ce){const ot=new fi(M||void 0,z||void 0,Ce||void 0);return this._addObserver(ot),()=>{this._removeObserver(ot)}}then(g,M){return this._promise.then(g,M)}catch(g){return this.then(null,g)}_addObserver(g){this._observers.push(g),this._notifyObserver(g)}_removeObserver(g){const M=this._observers.indexOf(g);-1!==M&&this._observers.splice(M,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(M=>{this._notifyObserver(M)})}_finishPromise(){if(void 0!==this._resolve){let g=!0;switch(Ds(this._state)){case zr.SUCCESS:Ss(this._resolve.bind(null,this.snapshot))();break;case zr.CANCELED:case zr.ERROR:Ss(this._reject.bind(null,this._error))();break;default:g=!1}g&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(g){switch(Ds(this._state)){case zr.RUNNING:case zr.PAUSED:g.next&&Ss(g.next.bind(g,this.snapshot))();break;case zr.SUCCESS:g.complete&&Ss(g.complete.bind(g))();break;default:g.error&&Ss(g.error.bind(g,this._error))()}}resume(){const g="paused"===this._state||"pausing"===this._state;return g&&this._transition("running"),g}pause(){const g="running"===this._state;return g&&this._transition("pausing"),g}cancel(){const g="running"===this._state||"pausing"===this._state;return g&&this._transition("canceling"),g}}class xs{constructor(g,M){this._service=g,this._location=M instanceof lt?M:lt.makeFromUrl(M,g.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(g,M){return new xs(g,M)}get root(){const g=new lt(this._location.bucket,"");return this._newRef(this._service,g)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return At(this._location.path)}get storage(){return this._service}get parent(){const g=function ar(E){if(0===E.length)return null;const g=E.lastIndexOf("/");return-1===g?"":E.slice(0,g)}(this._location.path);if(null===g)return null;const M=new lt(this._location.bucket,g);return new xs(this._service,M)}_throwIfRoot(g){if(""===this._location.path)throw ut(g)}}function Vi(E,g,M){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,ge.A)(function*(E,g,M){const Ce=yield _r(E,{pageToken:M});g.prefixes.push(...Ce.prefixes),g.items.push(...Ce.items),null!=Ce.nextPageToken&&(yield Vi(E,g,Ce.nextPageToken))})).apply(this,arguments)}function _r(E,g){null!=g&&"number"==typeof g.maxResults&&Ar("options.maxResults",1,1e3,g.maxResults);const M=g||{},z=gt(E.storage,E._location,"/",M.pageToken,M.maxResults);return E.storage.makeRequestWithTokens(z,Br)}function vs(E){E._throwIfRoot("getDownloadURL");const g=function xt(E,g,M){const Ce=Er(g.fullServerUrl(),E.host,E._protocol),Ut=E.maxOperationRetryTime,kn=new Se(Ce,"GET",function Qt(E,g){return function M(z,Ce){const ot=me(E,Ce,g);return Ke(null!==ot),function le(E,g,M,z){const Ce=Hn(g);if(null===Ce||!Tr(Ce.downloadTokens))return null;const ot=Ce.downloadTokens;if(0===ot.length)return null;const Ut=encodeURIComponent;return ot.split(",").map(pr=>{const Cr=E.fullPath;return Er("/b/"+Ut(E.bucket)+"/o/"+Ut(Cr),M,z)+Pt({alt:"media",token:pr})})[0]}(ot,Ce,E.host,E._protocol)}}(E,M),Ut);return kn.errorHandler=tn(g),kn}(E.storage,E._location,_e());return E.storage.makeRequestWithTokens(g,Br).then(M=>{if(null===M)throw function gn(){return new Rt(de.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return M})}function Zs(E,g){const M=function hr(E,g){const M=g.split("/").filter(z=>z.length>0).join("/");return 0===E.length?M:E+"/"+M}(E._location.path,g),z=new lt(E._location.bucket,M);return new xs(E.storage,z)}function bs(E,g){if(E instanceof sr){const M=E;if(null==M._bucket)throw function mr(){return new Rt(de.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Et+"' property when initializing the app?")}();const z=new xs(M,M._bucket);return null!=g?bs(z,g):z}return void 0!==g?Zs(E,g):E}function Es(E,g){if(g&&function Ps(E){return/^[A-Za-z]+:\/\//.test(E)}(g)){if(E instanceof sr)return function Gs(E,g){return new xs(E,g)}(E,g);throw Ve("To use ref(service, url), the first argument must be a Storage instance.")}return bs(E,g)}function qr(E,g){const M=g?.[Et];return null==M?null:lt.makeFromBucketSpec(M,E)}class sr{constructor(g,M,z,Ce,ot){this.app=g,this._authProvider=M,this._appCheckProvider=z,this._url=Ce,this._firebaseVersion=ot,this._bucket=null,this._host=Ot,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ce?lt.makeFromBucketSpec(Ce,this._host):qr(this._host,this.app.options)}get host(){return this._host}set host(g){this._host=g,this._bucket=null!=this._url?lt.makeFromBucketSpec(this._url,g):qr(g,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(g){Ar("time",0,Number.POSITIVE_INFINITY,g),this._maxUploadRetryTime=g}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(g){Ar("time",0,Number.POSITIVE_INFINITY,g),this._maxOperationRetryTime=g}_getAuthToken(){var g=this;return(0,ge.A)(function*(){if(g._overrideAuthToken)return g._overrideAuthToken;const M=g._authProvider.getImmediate({optional:!0});if(M){const z=yield M.getToken();if(null!==z)return z.accessToken}return null})()}_getAppCheckToken(){var g=this;return(0,ge.A)(function*(){const M=g._appCheckProvider.getImmediate({optional:!0});return M?(yield M.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(g=>g.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(g){return new xs(this,g)}_makeRequest(g,M,z,Ce,ot=!0){if(this._deleted)return new fn(Ye());{const Ut=function Tn(E,g,M,z,Ce,ot,Ut=!0){const kn=Pt(E.urlParams),Cn=E.url+kn,pr=Object.assign({},E.headers);return function on(E,g){g&&(E["X-Firebase-GMPID"]=g)}(pr,g),function _t(E,g){null!==g&&g.length>0&&(E.Authorization="Firebase "+g)}(pr,M),function Tt(E,g){E["X-Firebase-Storage-Version"]="webjs/"+(g??"AppManager")}(pr,ot),function En(E,g){null!==g&&(E["X-Firebase-AppCheck"]=g)}(pr,z),new qe(Cn,E.method,pr,E.body,E.successCodes,E.additionalRetryCodes,E.handler,E.errorHandler,E.timeout,E.progressCallback,Ce,Ut)}(g,this._appId,z,Ce,M,this._firebaseVersion,ot);return this._requests.add(Ut),Ut.getPromise().then(()=>this._requests.delete(Ut),()=>this._requests.delete(Ut)),Ut}}makeRequestWithTokens(g,M){var z=this;return(0,ge.A)(function*(){const[Ce,ot]=yield Promise.all([z._getAuthToken(),z._getAppCheckToken()]);return z._makeRequest(g,M,Ce,ot).getPromise()})()}}const Or="@firebase/storage";function bi(E,g){return Es(E=(0,$e.Ku)(E),g)}function Yi(E,{instanceIdentifier:g}){const M=E.getProvider("app").getImmediate(),z=E.getProvider("auth-internal"),Ce=E.getProvider("app-check-internal");return new sr(M,z,Ce,g,Pe.SDK_VERSION)}!function Nr(){(0,Pe._registerComponent)(new ht.uA("storage",Yi,"PUBLIC").setMultipleInstances(!0)),(0,Pe.registerVersion)(Or,"0.13.2",""),(0,Pe.registerVersion)(Or,"0.13.2","esm2017")}();class Ts{constructor(g,M,z){this._delegate=g,this.task=M,this.ref=z}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Un{constructor(g,M){this._delegate=g,this._ref=M,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ts(this._delegate.snapshot,this,this._ref)}then(g,M){return this._delegate.then(z=>{if(g)return g(new Ts(z,this,this._ref))},M)}on(g,M,z,Ce){let ot;return M&&(ot="function"==typeof M?Ut=>M(new Ts(Ut,this,this._ref)):{next:M.next?Ut=>M.next(new Ts(Ut,this,this._ref)):void 0,complete:M.complete||void 0,error:M.error||void 0}),this._delegate.on(g,ot,z||void 0,Ce||void 0)}}class Jr{constructor(g,M){this._delegate=g,this._service=M}get prefixes(){return this._delegate.prefixes.map(g=>new jr(g,this._service))}get items(){return this._delegate.items.map(g=>new jr(g,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jr{constructor(g,M){this._delegate=g,this.storage=M}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(g){const M=function fr(E,g){return Zs(E,g)}(this._delegate,g);return new jr(M,this.storage)}get root(){return new jr(this._delegate.root,this.storage)}get parent(){const g=this._delegate.parent;return null==g?null:new jr(g,this.storage)}put(g,M){return this._throwIfRoot("put"),new Un(function Kr(E,g,M){return function zs(E,g,M){return E._throwIfRoot("uploadBytesResumable"),new Hs(E,new sn(g),M)}(E=(0,$e.Ku)(E),g,M)}(this._delegate,g,M),this)}putString(g,M=xn.RAW,z){this._throwIfRoot("putString");const Ce=ri(M,g),ot=Object.assign({},z);return null==ot.contentType&&null!=Ce.contentType&&(ot.contentType=Ce.contentType),new Un(new Hs(this._delegate,new sn(Ce.data,!0),ot),this)}listAll(){return function Is(E){return function Gi(E){const g={prefixes:[],items:[]};return Vi(E,g).then(()=>g)}(E=(0,$e.Ku)(E))}(this._delegate).then(g=>new Jr(g,this.storage))}list(g){return function os(E,g){return _r(E=(0,$e.Ku)(E),g)}(this._delegate,g||void 0).then(M=>new Jr(M,this.storage))}getMetadata(){return function hs(E){return function Pi(E){E._throwIfRoot("getMetadata");const g=hi(E.storage,E._location,_e());return E.storage.makeRequestWithTokens(g,Br)}(E=(0,$e.Ku)(E))}(this._delegate)}updateMetadata(g){return function Wn(E,g){return function pi(E,g){E._throwIfRoot("updateMetadata");const M=function zt(E,g,M,z){const ot=Er(g.fullServerUrl(),E.host,E._protocol),kn=be(M,z),pr=E.maxOperationRetryTime,Sr=new Se(ot,"PATCH",jt(E,z),pr);return Sr.headers={"Content-Type":"application/json; charset=utf-8"},Sr.body=kn,Sr.errorHandler=tn(g),Sr}(E.storage,E._location,g,_e());return E.storage.makeRequestWithTokens(M,Br)}(E=(0,$e.Ku)(E),g)}(this._delegate,g)}getDownloadURL(){return function vr(E){return vs(E=(0,$e.Ku)(E))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Vr(E){return function Oi(E){E._throwIfRoot("deleteObject");const g=function Fn(E,g){const z=Er(g.fullServerUrl(),E.host,E._protocol),kn=new Se(z,"DELETE",function Ut(Cn,pr){},E.maxOperationRetryTime);return kn.successCodes=[200,204],kn.errorHandler=tn(g),kn}(E.storage,E._location);return E.storage.makeRequestWithTokens(g,Br)}(E=(0,$e.Ku)(E))}(this._delegate)}_throwIfRoot(g){if(""===this._delegate._location.path)throw ut(g)}}class as{constructor(g,M){this.app=g,this._delegate=M}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(g){if($i(g))throw Ve("ref() expected a child path but got a URL, use refFromURL instead.");return new jr(bi(this._delegate,g),this)}refFromURL(g){if(!$i(g))throw Ve("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lt.makeFromUrl(g,this._delegate.host)}catch{throw Ve("refFromUrl() expected a valid full URL but got an invalid one.")}return new jr(bi(this._delegate,g),this)}setMaxUploadRetryTime(g){this._delegate.maxUploadRetryTime=g}setMaxOperationRetryTime(g){this._delegate.maxOperationRetryTime=g}useEmulator(g,M,z={}){!function mi(E,g,M,z={}){!function hn(E,g,M,z={}){E.host=`${g}:${M}`,E._protocol="http";const{mockUserToken:Ce}=z;Ce&&(E._overrideAuthToken="string"==typeof Ce?Ce:(0,$e.Fy)(Ce,E.app.options.projectId))}(E,g,M,z)}(this._delegate,g,M,z)}}function $i(E){return/^[A-Za-z]+:\/\//.test(E)}function yr(E,{instanceIdentifier:g}){const M=E.getProvider("app-compat").getImmediate(),z=E.getProvider("storage").getImmediate({identifier:g});return new as(M,z)}!function cs(E){const g={TaskState:zr,TaskEvent:Ri,StringFormat:xn,Storage:as,Reference:jr};E.INTERNAL.registerComponent(new ht.uA("storage-compat",yr,"PUBLIC").setServiceProps(g).setMultipleInstances(!0)),E.registerVersion("@firebase/storage-compat","0.3.12")}(ce.A);var kr=j(7935);function As(E){const g=function Hr(E){return new J.c(g=>{const M=Ut=>g.next(Ut);M(E.snapshot);const ot=E.on("state_changed",M);return E.then(Ut=>{M(Ut),g.complete()},Ut=>{M(E.snapshot),(Ut=>{g.error(Ut)})(Ut)}),function(){ot()}}).pipe((0,Oe.B)(0))}(E);return{task:E,then:E.then.bind(E),catch:E.catch.bind(E),pause:E.pause.bind(E),cancel:E.cancel.bind(E),resume:E.resume.bind(E),snapshotChanges:()=>g,percentageChanges:()=>g.pipe((0,Le.T)(M=>M.bytesTransferred/M.totalBytes*100))}}function Bi(E){return{getDownloadURL:()=>(0,oe.of)(void 0).pipe(p.Oe,(0,ve.n)(()=>E.getDownloadURL()),p.U0),getMetadata:()=>(0,oe.of)(void 0).pipe(p.Oe,(0,ve.n)(()=>E.getMetadata()),p.U0),delete:()=>(0,Y.H)(E.delete()),child:g=>Bi(E.child(g)),updateMetadata:g=>(0,Y.H)(E.updateMetadata(g)),put:(g,M)=>As(E.put(g,M)),putString:(g,M,z)=>As(E.putString(g,M,z)),list:g=>(0,Y.H)(E.list(g)),listAll:()=>(0,Y.H)(E.listAll())}}const fs=new Te.nKC("angularfire2.storageBucket"),ai=new Te.nKC("angularfire2.storage.maxUploadRetryTime"),qs=new Te.nKC("angularfire2.storage.maxOperationRetryTime"),oo=new Te.nKC("angularfire2.storage.use-emulator");let eo=(()=>{class E{storage;constructor(M,z,Ce,ot,Ut,kn,Cn,pr,Sr,Cr){const gi=(0,De.iB)(M,Ut,z);this.storage=(0,De.BM)(`${gi.name}.storage.${Ce}`,"AngularFireStorage",gi.name,()=>{const or=Ut.runOutsideAngular(()=>gi.storage(Ce||void 0)),ei=Sr;return ei&&or.useEmulator(...ei),Cn&&or.setMaxUploadRetryTime(Cn),pr&&or.setMaxOperationRetryTime(pr),or},[Cn,pr])}ref(M){return Bi(this.storage.ref(M))}refFromURL(M){return Bi(this.storage.refFromURL(M))}upload(M,z,Ce){return Bi(this.storage.ref(M)).put(z,Ce)}static \u0275fac=function(z){return new(z||E)(Te.KVO(De.rx),Te.KVO(De.uP,8),Te.KVO(fs,8),Te.KVO(Te.Agw),Te.KVO(Te.SKi),Te.KVO(p.u0),Te.KVO(ai,8),Te.KVO(qs,8),Te.KVO(oo,8),Te.KVO(p.Jv,8))};static \u0275prov=Te.jDH({token:E,factory:E.\u0275fac,providedIn:"any"})}return E})(),to=(()=>{class E{static \u0275fac=function(z){return new(z||E)};static \u0275mod=Te.$C({type:E});static \u0275inj=Te.G2t({})}return E})(),G=(()=>{class E{constructor(){kr.A.registerVersion("angularfire",p.xv.full,"gcs-compat")}static \u0275fac=function(z){return new(z||E)};static \u0275mod=Te.$C({type:E});static \u0275inj=Te.G2t({providers:[eo],imports:[to]})}return E})()},9253:(nn,tt,j)=>{j.d(tt,{BM:()=>ht,Gt:()=>Oe,bf:()=>$e,e7:()=>Le,iB:()=>ce,rx:()=>Te,uP:()=>De});var p=j(7705),J=j(1825),oe=j(7935);const Y=["ngOnDestroy"],Oe=(St,Yt,Rt,de={})=>new Proxy(St,{get:(Ue,Ne)=>Rt.runOutsideAngular(()=>{if(St[Ne])return de?.spy?.get&&de.spy.get(Ne,St[Ne]),St[Ne];if(Y.indexOf(Ne)>-1)return()=>{};const Je=Yt.toPromise().then(We=>{const It=We?.[Ne];return"function"==typeof It?It.bind(We):It?.then?It.then(Ht=>Rt.run(()=>Ht)):Rt.run(()=>It)});return new Proxy(()=>{},{get:(We,It)=>Je[It],apply:(We,It,Ht)=>Je.then(pt=>{const ln=pt?.(...Ht);return de?.spy?.apply&&de.spy.apply(Ne,Ht,ln),ln})})})}),Le=(St,Yt)=>{Yt.forEach(Rt=>{Object.getOwnPropertyNames(Rt.prototype||Rt).forEach(de=>{Object.defineProperty(St.prototype,de,Object.getOwnPropertyDescriptor(Rt.prototype||Rt,de))})})};class ve{constructor(Yt){return Yt}}const Te=new p.nKC("angularfire2.app.options"),De=new p.nKC("angularfire2.app.name");function ce(St,Yt,Rt){const Ue="object"==typeof Rt&&Rt||{};Ue.name=Ue.name||"string"==typeof Rt&&Rt||"[DEFAULT]";const Je=oe.A.apps.filter(We=>We&&We.name===Ue.name)[0]||Yt.runOutsideAngular(()=>oe.A.initializeApp(St,Ue));try{if(JSON.stringify(St)!==JSON.stringify(Je.options)){const We=!!module.hot;ge("error",`${Je.name} Firebase App already initialized with different options${We?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ve(Je)}const ge=(St,...Yt)=>{(0,p.naY)()&&typeof console<"u"&&console[St](...Yt)},Pe={provide:ve,useFactory:ce,deps:[Te,p.SKi,[new p.Xx1,De]]};let $e=(()=>{class St{static initializeApp(Rt,de){return{ngModule:St,providers:[{provide:Te,useValue:Rt},{provide:De,useValue:de}]}}constructor(Rt){oe.A.registerVersion("angularfire",J.xv.full,"core"),oe.A.registerVersion("angularfire",J.xv.full,"app-compat"),oe.A.registerVersion("angular",p.xvI.full,Rt.toString())}static \u0275fac=function(de){return new(de||St)(p.KVO(p.Agw))};static \u0275mod=p.$C({type:St});static \u0275inj=p.G2t({providers:[Pe]})}return St})();function ht(St,Yt,Rt,de,Ue){const[,Ne,Je]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===St)||[];if(Ne)return function Ot(St,Yt){try{return St.toString()===Yt.toString()}catch{return St===Yt}}(Ue,Je)||(yt("error",`${Yt} was already initialized on the ${Rt} Firebase App with different settings.${Et?" You may need to reload as Firebase is not HMR aware.":""}`),yt("warn",{is:Ue,was:Je})),Ne;{const We=de();return globalThis.\u0275AngularfireInstanceCache.push([St,We,Ue]),We}}const Et=typeof module<"u"&&!!module.hot,yt=(St,...Yt)=>{(0,p.naY)()&&typeof console<"u"&&console[St](...Yt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(nn,tt,j)=>{j.d(tt,{xv:()=>Ot,U0:()=>$n,Oe:()=>pt,u0:()=>Je,Jv:()=>Yt});var p=j(7705),J=j(7852);(0,J.registerVersion)("firebase","10.14.1","app");var Oe=j(6780),ve=j(9687);const De=new class Te extends ve.q{}(class Le extends Oe.R{constructor(un,gn){super(un,gn),this.scheduler=un,this.work=gn}schedule(un,gn=0){return gn>0?super.schedule(un,gn):(this.delay=gn,this.state=un,this.scheduler.flush(this),this)}execute(un,gn){return gn>0||this.closed?super.execute(un,gn):this._execute(un,gn)}requestAsyncId(un,gn,Wt=0){return null!=Wt&&Wt>0||null==Wt&&this.delay>0?super.requestAsyncId(un,gn,Wt):(un.flush(this),0)}});var ge=j(3236),Pe=j(8141),$e=j(941),ht=j(6745);const Ot=new p.RxE("ANGULARFIRE2_VERSION");class Yt{constructor(){return((Rn,un)=>{const gn=(0,J.getApps)(),Wt=[];return gn.forEach(Ve=>{Ve.container.getProvider(Rn).instances.forEach(ut=>{Wt.includes(ut)||Wt.push(ut)})}),Wt})(Rt)}}const Rt="app-check";function de(){}class Ue{zone;delegate;constructor(un,gn=De){this.zone=un,this.delegate=gn}now(){return this.delegate.now()}schedule(un,gn,Wt){const Ve=this.zone;return this.delegate.schedule(function(ut){Ve.runGuarded(()=>{un.apply(this,[ut])})},gn,Wt)}}class Ne{zone;task=null;constructor(un){this.zone=un}call(un,gn){const Wt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",de,{},de,de)),gn.pipe((0,Pe.M)({next:Wt,complete:Wt,error:Wt})).subscribe(un).add(Wt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Je=(()=>{class Rn{ngZone;outsideAngular;insideAngular;constructor(gn){this.ngZone=gn,this.outsideAngular=gn.runOutsideAngular(()=>new Ue(Zone.current)),this.insideAngular=gn.run(()=>new Ue(Zone.current,ge.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Wt){return new(Wt||Rn)(p.KVO(p.SKi))};static \u0275prov=p.jDH({token:Rn,factory:Rn.\u0275fac,providedIn:"root"})}return Rn})();function We(){const Rn=globalThis.\u0275AngularFireScheduler;if(!Rn)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Rn}function pt(Rn){return Rn.pipe((0,$e.Q)(We().outsideAngular))}function $n(Rn){return function br(Rn){return function(gn){return(gn=gn.lift(new Ne(Rn.ngZone))).pipe((0,ht._)(Rn.outsideAngular),(0,$e.Q)(Rn.insideAngular))}}(We())(Rn)}},9417:(nn,tt,j)=>{j.d(tt,{BC:()=>Ar,JD:()=>hn,X1:()=>to,YN:()=>ao,Zm:()=>ce,cV:()=>Gr,cb:()=>Er,cz:()=>yt,j4:()=>Oi,k0:()=>Rt,kq:()=>Te,me:()=>ht,ok:()=>ai,qT:()=>Hs,vO:()=>Gn,vS:()=>Ur,wz:()=>ds,xH:()=>yi,xq:()=>Nr,y7:()=>os});var p=j(7705),J=j(177),oe=j(8455),Y=j(7468),Oe=j(6354);let Le=(()=>{class G{constructor(g,M){this._renderer=g,this._elementRef=M,this.onChange=z=>{},this.onTouched=()=>{}}setProperty(g,M){this._renderer.setProperty(this._elementRef.nativeElement,g,M)}registerOnTouched(g){this.onTouched=g}registerOnChange(g){this.onChange=g}setDisabledState(g){this.setProperty("disabled",g)}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(p.sFG),p.rXU(p.aKT))}}static{this.\u0275dir=p.FsC({type:G})}}return G})(),ve=(()=>{class G extends Le{static{this.\u0275fac=function(){let g;return function(z){return(g||(g=p.xGo(G)))(z||G)}}()}static{this.\u0275dir=p.FsC({type:G,features:[p.Vt3]})}}return G})();const Te=new p.nKC("NgValueAccessor"),De={provide:Te,useExisting:(0,p.Rfq)(()=>ce),multi:!0};let ce=(()=>{class G extends ve{writeValue(g){this.setProperty("checked",g)}static{this.\u0275fac=function(){let g;return function(z){return(g||(g=p.xGo(G)))(z||G)}}()}static{this.\u0275dir=p.FsC({type:G,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(M,z){1&M&&p.bIt("change",function(ot){return z.onChange(ot.target.checked)})("blur",function(){return z.onTouched()})},features:[p.Jv_([De]),p.Vt3]})}}return G})();const ge={provide:Te,useExisting:(0,p.Rfq)(()=>ht),multi:!0},$e=new p.nKC("CompositionEventMode");let ht=(()=>{class G extends Le{constructor(g,M,z){super(g,M),this._compositionMode=z,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Pe(){const G=(0,J.QT)()?(0,J.QT)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(g){this.setProperty("value",g??"")}_handleInput(g){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(g)}_compositionStart(){this._composing=!0}_compositionEnd(g){this._composing=!1,this._compositionMode&&this.onChange(g)}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(p.sFG),p.rXU(p.aKT),p.rXU($e,8))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,z){1&M&&p.bIt("input",function(ot){return z._handleInput(ot.target.value)})("blur",function(){return z.onTouched()})("compositionstart",function(){return z._compositionStart()})("compositionend",function(ot){return z._compositionEnd(ot.target.value)})},features:[p.Jv_([ge]),p.Vt3]})}}return G})();function Ot(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function Et(G){return null!=G&&"number"==typeof G.length}const yt=new p.nKC("NgValidators"),St=new p.nKC("NgAsyncValidators"),Yt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rt{static min(E){return function de(G){return E=>{if(Ot(E.value)||Ot(G))return null;const g=parseFloat(E.value);return!isNaN(g)&&g<G?{min:{min:G,actual:E.value}}:null}}(E)}static max(E){return function Ue(G){return E=>{if(Ot(E.value)||Ot(G))return null;const g=parseFloat(E.value);return!isNaN(g)&&g>G?{max:{max:G,actual:E.value}}:null}}(E)}static required(E){return Ne(E)}static requiredTrue(E){return Je(E)}static email(E){return function We(G){return Ot(G.value)||Yt.test(G.value)?null:{email:!0}}(E)}static minLength(E){return function It(G){return E=>Ot(E.value)||!Et(E.value)?null:E.value.length<G?{minlength:{requiredLength:G,actualLength:E.value.length}}:null}(E)}static maxLength(E){return function Ht(G){return E=>Et(E.value)&&E.value.length>G?{maxlength:{requiredLength:G,actualLength:E.value.length}}:null}(E)}static pattern(E){return function pt(G){if(!G)return ln;let E,g;return"string"==typeof G?(g="","^"!==G.charAt(0)&&(g+="^"),g+=G,"$"!==G.charAt(G.length-1)&&(g+="$"),E=new RegExp(g)):(g=G.toString(),E=G),M=>{if(Ot(M.value))return null;const z=M.value;return E.test(z)?null:{pattern:{requiredPattern:g,actualValue:z}}}}(E)}static nullValidator(E){return null}static compose(E){return gn(E)}static composeAsync(E){return Ve(E)}}function Ne(G){return Ot(G.value)?{required:!0}:null}function Je(G){return!0===G.value?null:{required:!0}}function ln(G){return null}function $n(G){return null!=G}function br(G){return(0,p.jNT)(G)?(0,oe.H)(G):G}function Dr(G){let E={};return G.forEach(g=>{E=null!=g?{...E,...g}:E}),0===Object.keys(E).length?null:E}function mr(G,E){return E.map(g=>g(G))}function un(G){return G.map(E=>function Rn(G){return!G.validate}(E)?E:g=>E.validate(g))}function gn(G){if(!G)return null;const E=G.filter($n);return 0==E.length?null:function(g){return Dr(mr(g,E))}}function Wt(G){return null!=G?gn(un(G)):null}function Ve(G){if(!G)return null;const E=G.filter($n);return 0==E.length?null:function(g){const M=mr(g,E).map(br);return(0,Y.p)(M).pipe((0,Oe.T)(Dr))}}function Ye(G){return null!=G?Ve(un(G)):null}function ut(G,E){return null===G?[E]:Array.isArray(G)?[...G,E]:[G,E]}function ze(G){return G._rawValidators}function Ee(G){return G._rawAsyncValidators}function lt(G){return G?Array.isArray(G)?G:[G]:[]}function fn(G,E){return Array.isArray(G)?G.includes(E):G===E}function zn(G,E){const g=lt(E);return lt(G).forEach(z=>{fn(g,z)||g.push(z)}),g}function dn(G,E){return lt(E).filter(g=>!fn(G,g))}class en{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(E){this._rawValidators=E||[],this._composedValidatorFn=Wt(this._rawValidators)}_setAsyncValidators(E){this._rawAsyncValidators=E||[],this._composedAsyncValidatorFn=Ye(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(E){this._onDestroyCallbacks.push(E)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(E=>E()),this._onDestroyCallbacks=[]}reset(E=void 0){this.control&&this.control.reset(E)}hasError(E,g){return!!this.control&&this.control.hasError(E,g)}getError(E,g){return this.control?this.control.getError(E,g):null}}class Pn extends en{get formDirective(){return null}get path(){return null}}class Gn extends en{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tr{constructor(E){this._cd=E}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ar=(()=>{class G extends Tr{constructor(g){super(g)}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(Gn,2))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,z){2&M&&p.AVh("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)},features:[p.Vt3]})}}return G})(),Er=(()=>{class G extends Tr{constructor(g){super(g)}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(Pn,10))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,z){2&M&&p.AVh("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)("ng-submitted",z.isSubmitted)},features:[p.Vt3]})}}return G})();const $t="VALID",rn="INVALID",Ft="PENDING",Fe="DISABLED";function ie(G){return(Hn(G)?G.validators:G)||null}function kt(G,E){return(Hn(E)?E.asyncValidators:G)||null}function Hn(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function ar(G,E,g){const M=G.controls;if(!(E?Object.keys(M):M).length)throw new p.wOt(1e3,"");if(!M[g])throw new p.wOt(1001,"")}function hr(G,E,g){G._forEachChild((M,z)=>{if(void 0===g[z])throw new p.wOt(1002,"")})}class At{constructor(E,g){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(E),this._assignAsyncValidators(g)}get validator(){return this._composedValidatorFn}set validator(E){this._rawValidators=this._composedValidatorFn=E}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(E){this._rawAsyncValidators=this._composedAsyncValidatorFn=E}get parent(){return this._parent}get valid(){return this.status===$t}get invalid(){return this.status===rn}get pending(){return this.status==Ft}get disabled(){return this.status===Fe}get enabled(){return this.status!==Fe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(E){this._assignValidators(E)}setAsyncValidators(E){this._assignAsyncValidators(E)}addValidators(E){this.setValidators(zn(E,this._rawValidators))}addAsyncValidators(E){this.setAsyncValidators(zn(E,this._rawAsyncValidators))}removeValidators(E){this.setValidators(dn(E,this._rawValidators))}removeAsyncValidators(E){this.setAsyncValidators(dn(E,this._rawAsyncValidators))}hasValidator(E){return fn(this._rawValidators,E)}hasAsyncValidator(E){return fn(this._rawAsyncValidators,E)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(E={}){this.touched=!0,this._parent&&!E.onlySelf&&this._parent.markAsTouched(E)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(E=>E.markAllAsTouched())}markAsUntouched(E={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(g=>{g.markAsUntouched({onlySelf:!0})}),this._parent&&!E.onlySelf&&this._parent._updateTouched(E)}markAsDirty(E={}){this.pristine=!1,this._parent&&!E.onlySelf&&this._parent.markAsDirty(E)}markAsPristine(E={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(g=>{g.markAsPristine({onlySelf:!0})}),this._parent&&!E.onlySelf&&this._parent._updatePristine(E)}markAsPending(E={}){this.status=Ft,!1!==E.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!E.onlySelf&&this._parent.markAsPending(E)}disable(E={}){const g=this._parentMarkedDirty(E.onlySelf);this.status=Fe,this.errors=null,this._forEachChild(M=>{M.disable({...E,onlySelf:!0})}),this._updateValue(),!1!==E.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...E,skipPristineCheck:g}),this._onDisabledChange.forEach(M=>M(!0))}enable(E={}){const g=this._parentMarkedDirty(E.onlySelf);this.status=$t,this._forEachChild(M=>{M.enable({...E,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:E.emitEvent}),this._updateAncestors({...E,skipPristineCheck:g}),this._onDisabledChange.forEach(M=>M(!1))}_updateAncestors(E){this._parent&&!E.onlySelf&&(this._parent.updateValueAndValidity(E),E.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(E){this._parent=E}getRawValue(){return this.value}updateValueAndValidity(E={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$t||this.status===Ft)&&this._runAsyncValidator(E.emitEvent)),!1!==E.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!E.onlySelf&&this._parent.updateValueAndValidity(E)}_updateTreeValidity(E={emitEvent:!0}){this._forEachChild(g=>g._updateTreeValidity(E)),this.updateValueAndValidity({onlySelf:!0,emitEvent:E.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fe:$t}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(E){if(this.asyncValidator){this.status=Ft,this._hasOwnPendingAsyncValidator=!0;const g=br(this.asyncValidator(this));this._asyncValidationSubscription=g.subscribe(M=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(M,{emitEvent:E})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(E,g={}){this.errors=E,this._updateControlsErrors(!1!==g.emitEvent)}get(E){let g=E;return null==g||(Array.isArray(g)||(g=g.split(".")),0===g.length)?null:g.reduce((M,z)=>M&&M._find(z),this)}getError(E,g){const M=g?this.get(g):this;return M&&M.errors?M.errors[E]:null}hasError(E,g){return!!this.getError(E,g)}get root(){let E=this;for(;E._parent;)E=E._parent;return E}_updateControlsErrors(E){this.status=this._calculateStatus(),E&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(E)}_initObservables(){this.valueChanges=new p.bkB,this.statusChanges=new p.bkB}_calculateStatus(){return this._allControlsDisabled()?Fe:this.errors?rn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ft)?Ft:this._anyControlsHaveStatus(rn)?rn:$t}_anyControlsHaveStatus(E){return this._anyControls(g=>g.status===E)}_anyControlsDirty(){return this._anyControls(E=>E.dirty)}_anyControlsTouched(){return this._anyControls(E=>E.touched)}_updatePristine(E={}){this.pristine=!this._anyControlsDirty(),this._parent&&!E.onlySelf&&this._parent._updatePristine(E)}_updateTouched(E={}){this.touched=this._anyControlsTouched(),this._parent&&!E.onlySelf&&this._parent._updateTouched(E)}_registerOnCollectionChange(E){this._onCollectionChange=E}_setUpdateStrategy(E){Hn(E)&&null!=E.updateOn&&(this._updateOn=E.updateOn)}_parentMarkedDirty(E){return!E&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(E){return null}_assignValidators(E){this._rawValidators=Array.isArray(E)?E.slice():E,this._composedValidatorFn=function Re(G){return Array.isArray(G)?Wt(G):G||null}(this._rawValidators)}_assignAsyncValidators(E){this._rawAsyncValidators=Array.isArray(E)?E.slice():E,this._composedAsyncValidatorFn=function sn(G){return Array.isArray(G)?Ye(G):G||null}(this._rawAsyncValidators)}}class fe extends At{constructor(E,g,M){super(ie(g),kt(M,g)),this.controls=E,this._initObservables(),this._setUpdateStrategy(g),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(E,g){return this.controls[E]?this.controls[E]:(this.controls[E]=g,g.setParent(this),g._registerOnCollectionChange(this._onCollectionChange),g)}addControl(E,g,M={}){this.registerControl(E,g),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}removeControl(E,g={}){this.controls[E]&&this.controls[E]._registerOnCollectionChange(()=>{}),delete this.controls[E],this.updateValueAndValidity({emitEvent:g.emitEvent}),this._onCollectionChange()}setControl(E,g,M={}){this.controls[E]&&this.controls[E]._registerOnCollectionChange(()=>{}),delete this.controls[E],g&&this.registerControl(E,g),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}contains(E){return this.controls.hasOwnProperty(E)&&this.controls[E].enabled}setValue(E,g={}){hr(this,0,E),Object.keys(E).forEach(M=>{ar(this,!0,M),this.controls[M].setValue(E[M],{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g)}patchValue(E,g={}){null!=E&&(Object.keys(E).forEach(M=>{const z=this.controls[M];z&&z.patchValue(E[M],{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g))}reset(E={},g={}){this._forEachChild((M,z)=>{M.reset(E?E[z]:null,{onlySelf:!0,emitEvent:g.emitEvent})}),this._updatePristine(g),this._updateTouched(g),this.updateValueAndValidity(g)}getRawValue(){return this._reduceChildren({},(E,g,M)=>(E[M]=g.getRawValue(),E))}_syncPendingControls(){let E=this._reduceChildren(!1,(g,M)=>!!M._syncPendingControls()||g);return E&&this.updateValueAndValidity({onlySelf:!0}),E}_forEachChild(E){Object.keys(this.controls).forEach(g=>{const M=this.controls[g];M&&E(M,g)})}_setUpControls(){this._forEachChild(E=>{E.setParent(this),E._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(E){for(const[g,M]of Object.entries(this.controls))if(this.contains(g)&&E(M))return!0;return!1}_reduceValue(){return this._reduceChildren({},(g,M,z)=>((M.enabled||this.disabled)&&(g[z]=M.value),g))}_reduceChildren(E,g){let M=E;return this._forEachChild((z,Ce)=>{M=g(M,z,Ce)}),M}_allControlsDisabled(){for(const E of Object.keys(this.controls))if(this.controls[E].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(E){return this.controls.hasOwnProperty(E)?this.controls[E]:null}}class W extends fe{}const Ae=new p.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>ue}),ue="always";function me(G,E){return[...E.path,G]}function le(G,E,g=ue){pe(G,E),E.valueAccessor.writeValue(G.value),(G.disabled||"always"===g)&&E.valueAccessor.setDisabledState?.(G.disabled),function Se(G,E){E.valueAccessor.registerOnChange(g=>{G._pendingValue=g,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&jt(G,E)})}(G,E),function an(G,E){const g=(M,z)=>{E.valueAccessor.writeValue(M),z&&E.viewToModelUpdate(M)};G.registerOnChange(g),E._registerOnDestroy(()=>{G._unregisterOnChange(g)})}(G,E),function Ke(G,E){E.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&jt(G,E),"submit"!==G.updateOn&&G.markAsTouched()})}(G,E),function Bt(G,E){if(E.valueAccessor.setDisabledState){const g=M=>{E.valueAccessor.setDisabledState(M)};G.registerOnDisabledChange(g),E._registerOnDestroy(()=>{G._unregisterOnDisabledChange(g)})}}(G,E)}function be(G,E,g=!0){const M=()=>{};E.valueAccessor&&(E.valueAccessor.registerOnChange(M),E.valueAccessor.registerOnTouched(M)),Ie(G,E),G&&(E._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function je(G,E){G.forEach(g=>{g.registerOnValidatorChange&&g.registerOnValidatorChange(E)})}function pe(G,E){const g=ze(G);null!==E.validator?G.setValidators(ut(g,E.validator)):"function"==typeof g&&G.setValidators([g]);const M=Ee(G);null!==E.asyncValidator?G.setAsyncValidators(ut(M,E.asyncValidator)):"function"==typeof M&&G.setAsyncValidators([M]);const z=()=>G.updateValueAndValidity();je(E._rawValidators,z),je(E._rawAsyncValidators,z)}function Ie(G,E){let g=!1;if(null!==G){if(null!==E.validator){const z=ze(G);if(Array.isArray(z)&&z.length>0){const Ce=z.filter(ot=>ot!==E.validator);Ce.length!==z.length&&(g=!0,G.setValidators(Ce))}}if(null!==E.asyncValidator){const z=Ee(G);if(Array.isArray(z)&&z.length>0){const Ce=z.filter(ot=>ot!==E.asyncValidator);Ce.length!==z.length&&(g=!0,G.setAsyncValidators(Ce))}}}const M=()=>{};return je(E._rawValidators,M),je(E._rawAsyncValidators,M),g}function jt(G,E){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),E.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Qt(G,E){pe(G,E)}function zt(G,E){if(!G.hasOwnProperty("model"))return!1;const g=G.model;return!!g.isFirstChange()||!Object.is(E,g.currentValue)}function pn(G,E){G._syncPendingControls(),E.forEach(g=>{const M=g.control;"submit"===M.updateOn&&M._pendingChange&&(g.viewToModelUpdate(M._pendingValue),M._pendingChange=!1)})}function In(G,E){if(!E)return null;let g,M,z;return Array.isArray(E),E.forEach(Ce=>{Ce.constructor===ht?g=Ce:function Fn(G){return Object.getPrototypeOf(G.constructor)===ve}(Ce)?M=Ce:z=Ce}),z||M||g||null}const Xe={provide:Pn,useExisting:(0,p.Rfq)(()=>Gr)},Vn=(()=>Promise.resolve())();let Gr=(()=>{class G extends Pn{constructor(g,M,z){super(),this.callSetDisabledState=z,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.bkB,this.form=new fe({},Wt(g),Ye(M))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(g){Vn.then(()=>{const M=this._findContainer(g.path);g.control=M.registerControl(g.name,g.control),le(g.control,g,this.callSetDisabledState),g.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(g)})}getControl(g){return this.form.get(g.path)}removeControl(g){Vn.then(()=>{const M=this._findContainer(g.path);M&&M.removeControl(g.name),this._directives.delete(g)})}addFormGroup(g){Vn.then(()=>{const M=this._findContainer(g.path),z=new fe({});Qt(z,g),M.registerControl(g.name,z),z.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(g){Vn.then(()=>{const M=this._findContainer(g.path);M&&M.removeControl(g.name)})}getFormGroup(g){return this.form.get(g.path)}updateModel(g,M){Vn.then(()=>{this.form.get(g.path).setValue(M)})}setValue(g){this.control.setValue(g)}onSubmit(g){return this.submitted=!0,pn(this.form,this._directives),this.ngSubmit.emit(g),"dialog"===g?.target?.method}onReset(){this.resetForm()}resetForm(g=void 0){this.form.reset(g),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(g){return g.pop(),g.length?this.form.get(g):this.form}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(yt,10),p.rXU(St,10),p.rXU(Ae,8))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(M,z){1&M&&p.bIt("submit",function(ot){return z.onSubmit(ot)})("reset",function(){return z.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p.Jv_([Xe]),p.Vt3]})}}return G})();function wi(G,E){const g=G.indexOf(E);g>-1&&G.splice(g,1)}function ys(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}const Ri=class extends At{constructor(E=null,g,M){super(ie(g),kt(M,g)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(E),this._setUpdateStrategy(g),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hn(g)&&(g.nonNullable||g.initialValueIsDefault)&&(this.defaultValue=ys(E)?E.value:E)}setValue(E,g={}){this.value=this._pendingValue=E,this._onChange.length&&!1!==g.emitModelToViewChange&&this._onChange.forEach(M=>M(this.value,!1!==g.emitViewToModelChange)),this.updateValueAndValidity(g)}patchValue(E,g={}){this.setValue(E,g)}reset(E=this.defaultValue,g={}){this._applyFormState(E),this.markAsPristine(g),this.markAsUntouched(g),this.setValue(this.value,g),this._pendingChange=!1}_updateValue(){}_anyControls(E){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(E){this._onChange.push(E)}_unregisterOnChange(E){wi(this._onChange,E)}registerOnDisabledChange(E){this._onDisabledChange.push(E)}_unregisterOnDisabledChange(E){wi(this._onDisabledChange,E)}_forEachChild(E){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(E){ys(E)?(this.value=this._pendingValue=E.value,E.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=E}},is={provide:Gn,useExisting:(0,p.Rfq)(()=>Ur)},Rs=(()=>Promise.resolve())();let Ur=(()=>{class G extends Gn{constructor(g,M,z,Ce,ot,Ut){super(),this._changeDetectorRef=ot,this.callSetDisabledState=Ut,this.control=new Ri,this._registered=!1,this.name="",this.update=new p.bkB,this._parent=g,this._setValidators(M),this._setAsyncValidators(z),this.valueAccessor=In(0,Ce)}ngOnChanges(g){if(this._checkForErrors(),!this._registered||"name"in g){if(this._registered&&(this._checkName(),this.formDirective)){const M=g.name.previousValue;this.formDirective.removeControl({name:M,path:this._getPath(M)})}this._setUpControl()}"isDisabled"in g&&this._updateDisabled(g),zt(g,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(g){this.viewModel=g,this.update.emit(g)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){le(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(g){Rs.then(()=>{this.control.setValue(g,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(g){const M=g.isDisabled.currentValue,z=0!==M&&(0,p.L39)(M);Rs.then(()=>{z&&!this.control.disabled?this.control.disable():!z&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(g){return this._parent?me(g,this._parent):[g]}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(Pn,9),p.rXU(yt,10),p.rXU(St,10),p.rXU(Te,10),p.rXU(p.gRc,8),p.rXU(Ae,8))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p.Jv_([is]),p.Vt3,p.OA$]})}}return G})(),Hs=(()=>{class G{static{this.\u0275fac=function(M){return new(M||G)}}static{this.\u0275dir=p.FsC({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return G})(),zs=(()=>{class G{static{this.\u0275fac=function(M){return new(M||G)}}static{this.\u0275mod=p.$C({type:G})}static{this.\u0275inj=p.G2t({})}}return G})();const _r=new p.nKC("NgModelWithFormControlWarning"),vs={provide:Pn,useExisting:(0,p.Rfq)(()=>Oi)};let Oi=(()=>{class G extends Pn{constructor(g,M,z){super(),this.callSetDisabledState=z,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.bkB,this._setValidators(g),this._setAsyncValidators(M)}ngOnChanges(g){this._checkFormPresent(),g.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ie(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(g){const M=this.form.get(g.path);return le(M,g,this.callSetDisabledState),M.updateValueAndValidity({emitEvent:!1}),this.directives.push(g),M}getControl(g){return this.form.get(g.path)}removeControl(g){be(g.control||null,g,!1),function ir(G,E){const g=G.indexOf(E);g>-1&&G.splice(g,1)}(this.directives,g)}addFormGroup(g){this._setUpFormContainer(g)}removeFormGroup(g){this._cleanUpFormContainer(g)}getFormGroup(g){return this.form.get(g.path)}addFormArray(g){this._setUpFormContainer(g)}removeFormArray(g){this._cleanUpFormContainer(g)}getFormArray(g){return this.form.get(g.path)}updateModel(g,M){this.form.get(g.path).setValue(M)}onSubmit(g){return this.submitted=!0,pn(this.form,this.directives),this.ngSubmit.emit(g),"dialog"===g?.target?.method}onReset(){this.resetForm()}resetForm(g=void 0){this.form.reset(g),this.submitted=!1}_updateDomValue(){this.directives.forEach(g=>{const M=g.control,z=this.form.get(g.path);M!==z&&(be(M||null,g),(G=>G instanceof Ri)(z)&&(le(z,g,this.callSetDisabledState),g.control=z))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(g){const M=this.form.get(g.path);Qt(M,g),M.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(g){if(this.form){const M=this.form.get(g.path);M&&function qn(G,E){return Ie(G,E)}(M,g)&&M.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pe(this.form,this),this._oldForm&&Ie(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(yt,10),p.rXU(St,10),p.rXU(Ae,8))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["","formGroup",""]],hostBindings:function(M,z){1&M&&p.bIt("submit",function(ot){return z.onSubmit(ot)})("reset",function(){return z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p.Jv_([vs]),p.Vt3,p.OA$]})}}return G})();const qr={provide:Gn,useExisting:(0,p.Rfq)(()=>hn)};let hn=(()=>{class G extends Gn{set isDisabled(g){}static{this._ngModelWarningSentOnce=!1}constructor(g,M,z,Ce,ot){super(),this._ngModelWarningConfig=ot,this._added=!1,this.name=null,this.update=new p.bkB,this._ngModelWarningSent=!1,this._parent=g,this._setValidators(M),this._setAsyncValidators(z),this.valueAccessor=In(0,Ce)}ngOnChanges(g){this._added||this._setUpControl(),zt(g,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(g){this.viewModel=g,this.update.emit(g)}get path(){return me(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(Pn,13),p.rXU(yt,10),p.rXU(St,10),p.rXU(Te,10),p.rXU(_r,8))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p.Jv_([qr]),p.Vt3,p.OA$]})}}return G})();const sr={provide:Te,useExisting:(0,p.Rfq)(()=>ds),multi:!0};function Or(G,E){return null==G?`${E}`:(E&&"object"==typeof E&&(E="Object"),`${G}: ${E}`.slice(0,50))}let ds=(()=>{class G extends ve{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(g){this._compareWith=g}writeValue(g){this.value=g;const z=Or(this._getOptionId(g),g);this.setProperty("value",z)}registerOnChange(g){this.onChange=M=>{this.value=this._getOptionValue(M),g(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(g){for(const M of this._optionMap.keys())if(this._compareWith(this._optionMap.get(M),g))return M;return null}_getOptionValue(g){const M=function xi(G){return G.split(":")[0]}(g);return this._optionMap.has(M)?this._optionMap.get(M):g}static{this.\u0275fac=function(){let g;return function(z){return(g||(g=p.xGo(G)))(z||G)}}()}static{this.\u0275dir=p.FsC({type:G,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(M,z){1&M&&p.bIt("change",function(ot){return z.onChange(ot.target.value)})("blur",function(){return z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p.Jv_([sr]),p.Vt3]})}}return G})(),yi=(()=>{class G{constructor(g,M,z){this._element=g,this._renderer=M,this._select=z,this._select&&(this.id=this._select._registerOption())}set ngValue(g){null!=this._select&&(this._select._optionMap.set(this.id,g),this._setElementValue(Or(this.id,g)),this._select.writeValue(this._select.value))}set value(g){this._setElementValue(g),this._select&&this._select.writeValue(this._select.value)}_setElementValue(g){this._renderer.setProperty(this._element.nativeElement,"value",g)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(p.aKT),p.rXU(p.sFG),p.rXU(ds,9))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return G})();const Js={provide:Te,useExisting:(0,p.Rfq)(()=>Wn),multi:!0};function Zr(G,E){return null==G?`${E}`:("string"==typeof E&&(E=`'${E}'`),E&&"object"==typeof E&&(E="Object"),`${G}: ${E}`.slice(0,50))}let Wn=(()=>{class G extends ve{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(g){this._compareWith=g}writeValue(g){let M;if(this.value=g,Array.isArray(g)){const z=g.map(Ce=>this._getOptionId(Ce));M=(Ce,ot)=>{Ce._setSelected(z.indexOf(ot.toString())>-1)}}else M=(z,Ce)=>{z._setSelected(!1)};this._optionMap.forEach(M)}registerOnChange(g){this.onChange=M=>{const z=[],Ce=M.selectedOptions;if(void 0!==Ce){const ot=Ce;for(let Ut=0;Ut<ot.length;Ut++){const Cn=this._getOptionValue(ot[Ut].value);z.push(Cn)}}else{const ot=M.options;for(let Ut=0;Ut<ot.length;Ut++){const kn=ot[Ut];if(kn.selected){const Cn=this._getOptionValue(kn.value);z.push(Cn)}}}this.value=z,g(z)}}_registerOption(g){const M=(this._idCounter++).toString();return this._optionMap.set(M,g),M}_getOptionId(g){for(const M of this._optionMap.keys())if(this._compareWith(this._optionMap.get(M)._value,g))return M;return null}_getOptionValue(g){const M=function Kr(G){return G.split(":")[0]}(g);return this._optionMap.has(M)?this._optionMap.get(M)._value:g}static{this.\u0275fac=function(){let g;return function(z){return(g||(g=p.xGo(G)))(z||G)}}()}static{this.\u0275dir=p.FsC({type:G,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(M,z){1&M&&p.bIt("change",function(ot){return z.onChange(ot.target)})("blur",function(){return z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p.Jv_([Js]),p.Vt3]})}}return G})(),os=(()=>{class G{constructor(g,M,z){this._element=g,this._renderer=M,this._select=z,this._select&&(this.id=this._select._registerOption(this))}set ngValue(g){null!=this._select&&(this._value=g,this._setElementValue(Zr(this.id,g)),this._select.writeValue(this._select.value))}set value(g){this._select?(this._value=g,this._setElementValue(Zr(this.id,g)),this._select.writeValue(this._select.value)):this._setElementValue(g)}_setElementValue(g){this._renderer.setProperty(this._element.nativeElement,"value",g)}_setSelected(g){this._renderer.setProperty(this._element.nativeElement,"selected",g)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(M){return new(M||G)(p.rXU(p.aKT),p.rXU(p.sFG),p.rXU(Wn,9))}}static{this.\u0275dir=p.FsC({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return G})(),Vr=(()=>{class G{constructor(){this._validator=ln}ngOnChanges(g){if(this.inputName in g){const M=this.normalizeInput(g[this.inputName].currentValue);this._enabled=this.enabled(M),this._validator=this._enabled?this.createValidator(M):ln,this._onChange&&this._onChange()}}validate(g){return this._validator(g)}registerOnValidatorChange(g){this._onChange=g}enabled(g){return null!=g}static{this.\u0275fac=function(M){return new(M||G)}}static{this.\u0275dir=p.FsC({type:G,features:[p.OA$]})}}return G})();const Hi={provide:yt,useExisting:(0,p.Rfq)(()=>Yi),multi:!0},qi={provide:yt,useExisting:(0,p.Rfq)(()=>Nr),multi:!0};let Yi=(()=>{class G extends Vr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.L39,this.createValidator=g=>Ne}enabled(g){return g}static{this.\u0275fac=function(){let g;return function(z){return(g||(g=p.xGo(G)))(z||G)}}()}static{this.\u0275dir=p.FsC({type:G,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(M,z){2&M&&p.BMQ("required",z._enabled?"":null)},inputs:{required:"required"},features:[p.Jv_([Hi]),p.Vt3]})}}return G})(),Nr=(()=>{class G extends Yi{constructor(){super(...arguments),this.createValidator=g=>Je}static{this.\u0275fac=function(){let g;return function(z){return(g||(g=p.xGo(G)))(z||G)}}()}static{this.\u0275dir=p.FsC({type:G,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(M,z){2&M&&p.BMQ("required",z._enabled?"":null)},features:[p.Jv_([qi]),p.Vt3]})}}return G})(),kr=(()=>{class G{static{this.\u0275fac=function(M){return new(M||G)}}static{this.\u0275mod=p.$C({type:G})}static{this.\u0275inj=p.G2t({imports:[zs]})}}return G})();class Hr extends At{constructor(E,g,M){super(ie(g),kt(M,g)),this.controls=E,this._initObservables(),this._setUpdateStrategy(g),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(E){return this.controls[this._adjustIndex(E)]}push(E,g={}){this.controls.push(E),this._registerControl(E),this.updateValueAndValidity({emitEvent:g.emitEvent}),this._onCollectionChange()}insert(E,g,M={}){this.controls.splice(E,0,g),this._registerControl(g),this.updateValueAndValidity({emitEvent:M.emitEvent})}removeAt(E,g={}){let M=this._adjustIndex(E);M<0&&(M=0),this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),this.updateValueAndValidity({emitEvent:g.emitEvent})}setControl(E,g,M={}){let z=this._adjustIndex(E);z<0&&(z=0),this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),this.controls.splice(z,1),g&&(this.controls.splice(z,0,g),this._registerControl(g)),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(E,g={}){hr(this,0,E),E.forEach((M,z)=>{ar(this,!1,z),this.at(z).setValue(M,{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g)}patchValue(E,g={}){null!=E&&(E.forEach((M,z)=>{this.at(z)&&this.at(z).patchValue(M,{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g))}reset(E=[],g={}){this._forEachChild((M,z)=>{M.reset(E[z],{onlySelf:!0,emitEvent:g.emitEvent})}),this._updatePristine(g),this._updateTouched(g),this.updateValueAndValidity(g)}getRawValue(){return this.controls.map(E=>E.getRawValue())}clear(E={}){this.controls.length<1||(this._forEachChild(g=>g._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:E.emitEvent}))}_adjustIndex(E){return E<0?E+this.length:E}_syncPendingControls(){let E=this.controls.reduce((g,M)=>!!M._syncPendingControls()||g,!1);return E&&this.updateValueAndValidity({onlySelf:!0}),E}_forEachChild(E){this.controls.forEach((g,M)=>{E(g,M)})}_updateValue(){this.value=this.controls.filter(E=>E.enabled||this.disabled).map(E=>E.value)}_anyControls(E){return this.controls.some(g=>g.enabled&&E(g))}_setUpControls(){this._forEachChild(E=>this._registerControl(E))}_allControlsDisabled(){for(const E of this.controls)if(E.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(E){E.setParent(this),E._registerOnCollectionChange(this._onCollectionChange)}_find(E){return this.at(E)??null}}function fs(G){return!!G&&(void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn)}let ai=(()=>{class G{constructor(){this.useNonNullable=!1}get nonNullable(){const g=new G;return g.useNonNullable=!0,g}group(g,M=null){const z=this._reduceControls(g);let Ce={};return fs(M)?Ce=M:null!==M&&(Ce.validators=M.validator,Ce.asyncValidators=M.asyncValidator),new fe(z,Ce)}record(g,M=null){const z=this._reduceControls(g);return new W(z,M)}control(g,M,z){let Ce={};return this.useNonNullable?(fs(M)?Ce=M:(Ce.validators=M,Ce.asyncValidators=z),new Ri(g,{...Ce,nonNullable:!0})):new Ri(g,M,z)}array(g,M,z){const Ce=g.map(ot=>this._createControl(ot));return new Hr(Ce,M,z)}_reduceControls(g){const M={};return Object.keys(g).forEach(z=>{M[z]=this._createControl(g[z])}),M}_createControl(g){return g instanceof Ri||g instanceof At?g:Array.isArray(g)?this.control(g[0],g.length>1?g[1]:null,g.length>2?g[2]:null):this.control(g)}static{this.\u0275fac=function(M){return new(M||G)}}static{this.\u0275prov=p.jDH({token:G,factory:G.\u0275fac,providedIn:"root"})}}return G})(),ao=(()=>{class G{static withConfig(g){return{ngModule:G,providers:[{provide:Ae,useValue:g.callSetDisabledState??ue}]}}static{this.\u0275fac=function(M){return new(M||G)}}static{this.\u0275mod=p.$C({type:G})}static{this.\u0275inj=p.G2t({imports:[kr]})}}return G})(),to=(()=>{class G{static withConfig(g){return{ngModule:G,providers:[{provide:_r,useValue:g.warnOnNgModelWithFormControl??"always"},{provide:Ae,useValue:g.callSetDisabledState??ue}]}}static{this.\u0275fac=function(M){return new(M||G)}}static{this.\u0275mod=p.$C({type:G})}static{this.\u0275inj=p.G2t({imports:[kr]})}}return G})()},8834:(nn,tt,j)=>{j.d(tt,{Hl:()=>Rn});var p=j(7705),J=j(6600);let Rn=(()=>{class un{static{this.\u0275fac=function(Ve){return new(Ve||un)}}static{this.\u0275mod=p.$C({type:un})}static{this.\u0275inj=p.G2t({imports:[J.yE,J.pZ,J.yE]})}}return un})()},6600:(nn,tt,j)=>{j.d(tt,{r5:()=>St,ed:()=>Yt,MJ:()=>Rn,es:()=>lt,de:()=>un,$E:()=>qe,yE:()=>Ue,WX:()=>ze,Sy:()=>Fe,r6:()=>it,Ej:()=>hr,pZ:()=>_t,Zc:()=>Ht,GG:()=>pt,Ob:()=>It,J8:()=>$n,BF:()=>ln});var p=j(7705),J=j(7645),oe=j(8203),Oe=j(177),Le=j(6860),ve=j(4085),Te=j(1413);let St=(()=>{class At{static{this.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)"}static{this.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)"}static{this.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)"}static{this.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)"}}return At})(),Yt=(()=>{class At{static{this.COMPLEX="375ms"}static{this.ENTERING="225ms"}static{this.EXITING="195ms"}}return At})();const de=new p.nKC("mat-sanity-checks",{providedIn:"root",factory:function Rt(){return!0}});let Ue=(()=>{class At{constructor(O,N,W){this._sanityChecks=N,this._document=W,this._hasDoneGlobalChecks=!1,O._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(O){return!(0,Le.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[O])}static{this.\u0275fac=function(N){return new(N||At)(p.KVO(J.Q_),p.KVO(de,8),p.KVO(Oe.qQ))}}static{this.\u0275mod=p.$C({type:At})}static{this.\u0275inj=p.G2t({imports:[oe.jI,oe.jI]})}}return At})();function It(At){return class extends At{get disabled(){return this._disabled}set disabled(fe){this._disabled=(0,ve.he)(fe)}constructor(...fe){super(...fe),this._disabled=!1}}}function Ht(At,fe){return class extends At{get color(){return this._color}set color(O){const N=O||this.defaultColor;N!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),N&&this._elementRef.nativeElement.classList.add(`mat-${N}`),this._color=N)}constructor(...O){super(...O),this.defaultColor=fe,this.color=fe}}}function pt(At){return class extends At{get disableRipple(){return this._disableRipple}set disableRipple(fe){this._disableRipple=(0,ve.he)(fe)}constructor(...fe){super(...fe),this._disableRipple=!1}}}function ln(At,fe=0){return class extends At{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(O){this._tabIndex=null!=O?(0,ve.OE)(O):this.defaultTabIndex}constructor(...O){super(...O),this._tabIndex=fe,this.defaultTabIndex=fe}}}function $n(At){return class extends At{updateErrorState(){const fe=this.errorState,_e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);_e!==fe&&(this.errorState=_e,this.stateChanges.next())}constructor(...fe){super(...fe),this.errorState=!1}}}const Dr=new p.nKC("MAT_DATE_LOCALE",{providedIn:"root",factory:function mr(){return(0,p.WQX)(p.xe9)}});class Rn{constructor(){this._localeChanges=new Te.B,this.localeChanges=this._localeChanges}getValidDateOrNull(fe){return this.isDateInstance(fe)&&this.isValid(fe)?fe:null}deserialize(fe){return null==fe||this.isDateInstance(fe)&&this.isValid(fe)?fe:this.invalid()}setLocale(fe){this.locale=fe,this._localeChanges.next()}compareDate(fe,O){return this.getYear(fe)-this.getYear(O)||this.getMonth(fe)-this.getMonth(O)||this.getDate(fe)-this.getDate(O)}sameDate(fe,O){if(fe&&O){let N=this.isValid(fe),W=this.isValid(O);return N&&W?!this.compareDate(fe,O):N==W}return fe==O}clampDate(fe,O,N){return O&&this.compareDate(fe,O)<0?O:N&&this.compareDate(fe,N)>0?N:fe}}const un=new p.nKC("mat-date-formats"),gn=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Wt(At,fe){const O=Array(At);for(let N=0;N<At;N++)O[N]=fe(N);return O}let Ve=(()=>{class At extends Rn{constructor(O,N){super(),this.useUtcForDisplay=!1,super.setLocale(O)}getYear(O){return O.getFullYear()}getMonth(O){return O.getMonth()}getDate(O){return O.getDate()}getDayOfWeek(O){return O.getDay()}getMonthNames(O){const N=new Intl.DateTimeFormat(this.locale,{month:O,timeZone:"utc"});return Wt(12,W=>this._format(N,new Date(2017,W,1)))}getDateNames(){const O=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Wt(31,N=>this._format(O,new Date(2017,0,N+1)))}getDayOfWeekNames(O){const N=new Intl.DateTimeFormat(this.locale,{weekday:O,timeZone:"utc"});return Wt(7,W=>this._format(N,new Date(2017,0,W+1)))}getYearName(O){const N=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(N,O)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(O){return this.getDate(this._createDateWithOverflow(this.getYear(O),this.getMonth(O)+1,0))}clone(O){return new Date(O.getTime())}createDate(O,N,W){let _e=this._createDateWithOverflow(O,N,W);return _e.getMonth(),_e}today(){return new Date}parse(O,N){return"number"==typeof O?new Date(O):O?new Date(Date.parse(O)):null}format(O,N){if(!this.isValid(O))throw Error("NativeDateAdapter: Cannot format invalid date.");const W=new Intl.DateTimeFormat(this.locale,{...N,timeZone:"utc"});return this._format(W,O)}addCalendarYears(O,N){return this.addCalendarMonths(O,12*N)}addCalendarMonths(O,N){let W=this._createDateWithOverflow(this.getYear(O),this.getMonth(O)+N,this.getDate(O));return this.getMonth(W)!=((this.getMonth(O)+N)%12+12)%12&&(W=this._createDateWithOverflow(this.getYear(W),this.getMonth(W),0)),W}addCalendarDays(O,N){return this._createDateWithOverflow(this.getYear(O),this.getMonth(O),this.getDate(O)+N)}toIso8601(O){return[O.getUTCFullYear(),this._2digit(O.getUTCMonth()+1),this._2digit(O.getUTCDate())].join("-")}deserialize(O){if("string"==typeof O){if(!O)return null;if(gn.test(O)){let N=new Date(O);if(this.isValid(N))return N}}return super.deserialize(O)}isDateInstance(O){return O instanceof Date}isValid(O){return!isNaN(O.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(O,N,W){const _e=new Date;return _e.setFullYear(O,N,W),_e.setHours(0,0,0,0),_e}_2digit(O){return("00"+O).slice(-2)}_format(O,N){const W=new Date;return W.setUTCFullYear(N.getFullYear(),N.getMonth(),N.getDate()),W.setUTCHours(N.getHours(),N.getMinutes(),N.getSeconds(),N.getMilliseconds()),O.format(W)}static{this.\u0275fac=function(N){return new(N||At)(p.KVO(Dr,8),p.KVO(Le.OD))}}static{this.\u0275prov=p.jDH({token:At,factory:At.\u0275fac})}}return At})();const Ye={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let ut=(()=>{class At{static{this.\u0275fac=function(N){return new(N||At)}}static{this.\u0275mod=p.$C({type:At})}static{this.\u0275inj=p.G2t({providers:[{provide:Rn,useClass:Ve}]})}}return At})(),ze=(()=>{class At{static{this.\u0275fac=function(N){return new(N||At)}}static{this.\u0275mod=p.$C({type:At})}static{this.\u0275inj=p.G2t({providers:[{provide:un,useValue:Ye}],imports:[ut]})}}return At})(),lt=(()=>{class At{isErrorState(O,N){return!!(O&&O.invalid&&(O.touched||N&&N.submitted))}static{this.\u0275fac=function(N){return new(N||At)}}static{this.\u0275prov=p.jDH({token:At,factory:At.\u0275fac,providedIn:"root"})}}return At})();class Pn{constructor(fe,O,N,W=!1){this._renderer=fe,this.element=O,this.config=N,this._animationForciblyDisabledThroughCss=W,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Gn=(0,Le.BQ)({passive:!0,capture:!0});class Tr{constructor(){this._events=new Map,this._delegateEventHandler=fe=>{const O=(0,Le.Fb)(fe);O&&this._events.get(fe.type)?.forEach((N,W)=>{(W===O||W.contains(O))&&N.forEach(_e=>_e.handleEvent(fe))})}}addHandler(fe,O,N,W){const _e=this._events.get(O);if(_e){const Ae=_e.get(N);Ae?Ae.add(W):_e.set(N,new Set([W]))}else this._events.set(O,new Map([[N,new Set([W])]])),fe.runOutsideAngular(()=>{document.addEventListener(O,this._delegateEventHandler,Gn)})}removeHandler(fe,O,N){const W=this._events.get(fe);if(!W)return;const _e=W.get(O);_e&&(_e.delete(N),0===_e.size&&W.delete(O),0===W.size&&(this._events.delete(fe),document.removeEventListener(fe,this._delegateEventHandler,Gn)))}}const On={enterDuration:225,exitDuration:150},Ar=(0,Le.BQ)({passive:!0,capture:!0}),Er=["mousedown","touchstart"],Pt=["mouseup","mouseleave","touchend","touchcancel"];class ae{static{this._eventManager=new Tr}constructor(fe,O,N,W){this._target=fe,this._ngZone=O,this._platform=W,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,W.isBrowser&&(this._containerElement=(0,ve.i8)(N))}fadeInRipple(fe,O,N={}){const W=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),_e={...On,...N.animation};N.centered&&(fe=W.left+W.width/2,O=W.top+W.height/2);const Ae=N.radius||function Me(At,fe,O){const N=Math.max(Math.abs(At-O.left),Math.abs(At-O.right)),W=Math.max(Math.abs(fe-O.top),Math.abs(fe-O.bottom));return Math.sqrt(N*N+W*W)}(fe,O,W),ue=fe-W.left,me=O-W.top,le=_e.enterDuration,be=document.createElement("div");be.classList.add("mat-ripple-element"),be.style.left=ue-Ae+"px",be.style.top=me-Ae+"px",be.style.height=2*Ae+"px",be.style.width=2*Ae+"px",null!=N.color&&(be.style.backgroundColor=N.color),be.style.transitionDuration=`${le}ms`,this._containerElement.appendChild(be);const je=window.getComputedStyle(be),pe=je.transitionDuration,Ie="none"===je.transitionProperty||"0s"===pe||"0s, 0s"===pe||0===W.width&&0===W.height,Se=new Pn(this,be,N,Ie);be.style.transform="scale3d(1, 1, 1)",Se.state=0,N.persistent||(this._mostRecentTransientRipple=Se);let Ke=null;return!Ie&&(le||_e.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const jt=()=>this._finishRippleTransition(Se),an=()=>this._destroyRipple(Se);be.addEventListener("transitionend",jt),be.addEventListener("transitioncancel",an),Ke={onTransitionEnd:jt,onTransitionCancel:an}}),this._activeRipples.set(Se,Ke),(Ie||!le)&&this._finishRippleTransition(Se),Se}fadeOutRipple(fe){if(2===fe.state||3===fe.state)return;const O=fe.element,N={...On,...fe.config.animation};O.style.transitionDuration=`${N.exitDuration}ms`,O.style.opacity="0",fe.state=2,(fe._animationForciblyDisabledThroughCss||!N.exitDuration)&&this._finishRippleTransition(fe)}fadeOutAll(){this._getActiveRipples().forEach(fe=>fe.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(fe=>{fe.config.persistent||fe.fadeOut()})}setupTriggerEvents(fe){const O=(0,ve.i8)(fe);!this._platform.isBrowser||!O||O===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=O,Er.forEach(N=>{ae._eventManager.addHandler(this._ngZone,N,O,this)}))}handleEvent(fe){"mousedown"===fe.type?this._onMousedown(fe):"touchstart"===fe.type?this._onTouchStart(fe):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Pt.forEach(O=>{this._triggerElement.addEventListener(O,this,Ar)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(fe){0===fe.state?this._startFadeOutTransition(fe):2===fe.state&&this._destroyRipple(fe)}_startFadeOutTransition(fe){const O=fe===this._mostRecentTransientRipple,{persistent:N}=fe.config;fe.state=1,!N&&(!O||!this._isPointerDown)&&fe.fadeOut()}_destroyRipple(fe){const O=this._activeRipples.get(fe)??null;this._activeRipples.delete(fe),this._activeRipples.size||(this._containerRect=null),fe===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),fe.state=3,null!==O&&(fe.element.removeEventListener("transitionend",O.onTransitionEnd),fe.element.removeEventListener("transitioncancel",O.onTransitionCancel)),fe.element.remove()}_onMousedown(fe){const O=(0,J._G)(fe),N=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!O&&!N&&(this._isPointerDown=!0,this.fadeInRipple(fe.clientX,fe.clientY,this._target.rippleConfig))}_onTouchStart(fe){if(!this._target.rippleDisabled&&!(0,J.w6)(fe)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const O=fe.changedTouches;if(O)for(let N=0;N<O.length;N++)this.fadeInRipple(O[N].clientX,O[N].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(fe=>{!fe.config.persistent&&(1===fe.state||fe.config.terminateOnPointerUp&&0===fe.state)&&fe.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const fe=this._triggerElement;fe&&(Er.forEach(O=>ae._eventManager.removeHandler(O,fe,this)),this._pointerUpEventsRegistered&&Pt.forEach(O=>fe.removeEventListener(O,this,Ar)))}}const qe=new p.nKC("mat-ripple-global-options");let it=(()=>{class At{get disabled(){return this._disabled}set disabled(O){O&&this.fadeOutAllNonPersistent(),this._disabled=O,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(O){this._trigger=O,this._setupTriggerEventsIfEnabled()}constructor(O,N,W,_e,Ae){this._elementRef=O,this._animationMode=Ae,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=_e||{},this._rippleRenderer=new ae(this,N,O,W)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(O,N=0,W){return"number"==typeof O?this._rippleRenderer.fadeInRipple(O,N,{...this.rippleConfig,...W}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...O})}static{this.\u0275fac=function(N){return new(N||At)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(Le.OD),p.rXU(qe,8),p.rXU(p.bc$,8))}}static{this.\u0275dir=p.FsC({type:At,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(N,W){2&N&&p.AVh("mat-ripple-unbounded",W.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}}return At})(),_t=(()=>{class At{static{this.\u0275fac=function(N){return new(N||At)}}static{this.\u0275mod=p.$C({type:At})}static{this.\u0275inj=p.G2t({imports:[Ue,Ue]})}}return At})(),on=(()=>{class At{static{this.\u0275fac=function(N){return new(N||At)}}static{this.\u0275mod=p.$C({type:At})}static{this.\u0275inj=p.G2t({imports:[Ue]})}}return At})(),Fe=(()=>{class At{static{this.\u0275fac=function(N){return new(N||At)}}static{this.\u0275mod=p.$C({type:At})}static{this.\u0275inj=p.G2t({imports:[_t,Oe.MD,Ue,on]})}}return At})();const ie={capture:!0},Re=["focus","click","mouseenter","touchstart"],kt="mat-ripple-loader-uninitialized",sn="mat-ripple-loader-class-name",Hn="mat-ripple-loader-centered",ar="mat-ripple-loader-disabled";let hr=(()=>{class At{constructor(){this._document=(0,p.WQX)(Oe.qQ,{optional:!0}),this._animationMode=(0,p.WQX)(p.bc$,{optional:!0}),this._globalRippleOptions=(0,p.WQX)(qe,{optional:!0}),this._platform=(0,p.WQX)(Le.OD),this._ngZone=(0,p.WQX)(p.SKi),this._hosts=new Map,this._onInteraction=O=>{if(!(O.target instanceof HTMLElement))return;const W=O.target.closest(`[${kt}]`);W&&this._createRipple(W)},this._ngZone.runOutsideAngular(()=>{for(const O of Re)this._document?.addEventListener(O,this._onInteraction,ie)})}ngOnDestroy(){const O=this._hosts.keys();for(const N of O)this.destroyRipple(N);for(const N of Re)this._document?.removeEventListener(N,this._onInteraction,ie)}configureRipple(O,N){O.setAttribute(kt,""),(N.className||!O.hasAttribute(sn))&&O.setAttribute(sn,N.className||""),N.centered&&O.setAttribute(Hn,""),N.disabled&&O.setAttribute(ar,"")}getRipple(O){return this._hosts.get(O)||this._createRipple(O)}setDisabled(O,N){const W=this._hosts.get(O);W?W.disabled=N:N?O.setAttribute(ar,""):O.removeAttribute(ar)}_createRipple(O){if(!this._document)return;const N=this._hosts.get(O);if(N)return N;O.querySelector(".mat-ripple")?.remove();const W=this._document.createElement("span");W.classList.add("mat-ripple",O.getAttribute(sn)),O.append(W);const _e=new it(new p.aKT(W),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return _e._isInitialized=!0,_e.trigger=O,_e.centered=O.hasAttribute(Hn),_e.disabled=O.hasAttribute(ar),this.attachRipple(O,_e),_e}attachRipple(O,N){O.removeAttribute(kt),this._hosts.set(O,N)}destroyRipple(O){const N=this._hosts.get(O);N&&(N.ngOnDestroy(),this._hosts.delete(O))}static{this.\u0275fac=function(N){return new(N||At)}}static{this.\u0275prov=p.jDH({token:At,factory:At.\u0275fac,providedIn:"root"})}}return At})()},345:(nn,tt,j)=>{j.d(tt,{B7:()=>It,Bb:()=>On,hE:()=>ae,sG:()=>en,up:()=>rn});var p=j(7705),J=j(177);class oe extends J.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Y extends oe{static makeCurrent(){(0,J.ZD)(new Y)}onAndCancel(O,N,W){return O.addEventListener(N,W),()=>{O.removeEventListener(N,W)}}dispatchEvent(O,N){O.dispatchEvent(N)}remove(O){O.parentNode&&O.parentNode.removeChild(O)}createElement(O,N){return(N=N||this.getDefaultDocument()).createElement(O)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(O){return O.nodeType===Node.ELEMENT_NODE}isShadowRoot(O){return O instanceof DocumentFragment}getGlobalEventTarget(O,N){return"window"===N?window:"document"===N?O:"body"===N?O.body:null}getBaseHref(O){const N=function Le(){return Oe=Oe||document.querySelector("base"),Oe?Oe.getAttribute("href"):null}();return null==N?null:function Te(fe){ve=ve||document.createElement("a"),ve.setAttribute("href",fe);const O=ve.pathname;return"/"===O.charAt(0)?O:`/${O}`}(N)}resetBaseElement(){Oe=null}getUserAgent(){return window.navigator.userAgent}getCookie(O){return(0,J._b)(document.cookie,O)}}let ve,Oe=null,ce=(()=>{class fe{build(){return new XMLHttpRequest}static{this.\u0275fac=function(W){return new(W||fe)}}static{this.\u0275prov=p.jDH({token:fe,factory:fe.\u0275fac})}}return fe})();const ge=new p.nKC("EventManagerPlugins");let Pe=(()=>{class fe{constructor(N,W){this._zone=W,this._eventNameToPlugin=new Map,N.forEach(_e=>{_e.manager=this}),this._plugins=N.slice().reverse()}addEventListener(N,W,_e){return this._findPluginFor(W).addEventListener(N,W,_e)}getZone(){return this._zone}_findPluginFor(N){let W=this._eventNameToPlugin.get(N);if(W)return W;if(W=this._plugins.find(Ae=>Ae.supports(N)),!W)throw new p.wOt(5101,!1);return this._eventNameToPlugin.set(N,W),W}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(ge),p.KVO(p.SKi))}}static{this.\u0275prov=p.jDH({token:fe,factory:fe.\u0275fac})}}return fe})();class $e{constructor(O){this._doc=O}}const ht="ng-app-id";let Ot=(()=>{class fe{constructor(N,W,_e,Ae={}){this.doc=N,this.appId=W,this.nonce=_e,this.platformId=Ae,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,J.Vy)(Ae),this.resetHostNodes()}addStyles(N){for(const W of N)1===this.changeUsageCount(W,1)&&this.onStyleAdded(W)}removeStyles(N){for(const W of N)this.changeUsageCount(W,-1)<=0&&this.onStyleRemoved(W)}ngOnDestroy(){const N=this.styleNodesInDOM;N&&(N.forEach(W=>W.remove()),N.clear());for(const W of this.getAllStyles())this.onStyleRemoved(W);this.resetHostNodes()}addHost(N){this.hostNodes.add(N);for(const W of this.getAllStyles())this.addStyleToHost(N,W)}removeHost(N){this.hostNodes.delete(N)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(N){for(const W of this.hostNodes)this.addStyleToHost(W,N)}onStyleRemoved(N){const W=this.styleRef;W.get(N)?.elements?.forEach(_e=>_e.remove()),W.delete(N)}collectServerRenderedStyles(){const N=this.doc.head?.querySelectorAll(`style[${ht}="${this.appId}"]`);if(N?.length){const W=new Map;return N.forEach(_e=>{null!=_e.textContent&&W.set(_e.textContent,_e)}),W}return null}changeUsageCount(N,W){const _e=this.styleRef;if(_e.has(N)){const Ae=_e.get(N);return Ae.usage+=W,Ae.usage}return _e.set(N,{usage:W,elements:[]}),W}getStyleElement(N,W){const _e=this.styleNodesInDOM,Ae=_e?.get(W);if(Ae?.parentNode===N)return _e.delete(W),Ae.removeAttribute(ht),Ae;{const ue=this.doc.createElement("style");return this.nonce&&ue.setAttribute("nonce",this.nonce),ue.textContent=W,this.platformIsServer&&ue.setAttribute(ht,this.appId),ue}}addStyleToHost(N,W){const _e=this.getStyleElement(N,W);N.appendChild(_e);const Ae=this.styleRef,ue=Ae.get(W)?.elements;ue?ue.push(_e):Ae.set(W,{elements:[_e],usage:1})}resetHostNodes(){const N=this.hostNodes;N.clear(),N.add(this.doc.head)}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(J.qQ),p.KVO(p.sZ2),p.KVO(p.BIS,8),p.KVO(p.Agw))}}static{this.\u0275prov=p.jDH({token:fe,factory:fe.\u0275fac})}}return fe})();const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yt=/%COMP%/g,Ue=new p.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function We(fe,O){return O.map(N=>N.replace(yt,fe))}let It=(()=>{class fe{constructor(N,W,_e,Ae,ue,me,le,be=null){this.eventManager=N,this.sharedStylesHost=W,this.appId=_e,this.removeStylesOnCompDestroy=Ae,this.doc=ue,this.platformId=me,this.ngZone=le,this.nonce=be,this.rendererByCompId=new Map,this.platformIsServer=(0,J.Vy)(me),this.defaultRenderer=new Ht(N,ue,le,this.platformIsServer)}createRenderer(N,W){if(!N||!W)return this.defaultRenderer;this.platformIsServer&&W.encapsulation===p.gXe.ShadowDom&&(W={...W,encapsulation:p.gXe.Emulated});const _e=this.getOrCreateRenderer(N,W);return _e instanceof mr?_e.applyToHost(N):_e instanceof Dr&&_e.applyStyles(),_e}getOrCreateRenderer(N,W){const _e=this.rendererByCompId;let Ae=_e.get(W.id);if(!Ae){const ue=this.doc,me=this.ngZone,le=this.eventManager,be=this.sharedStylesHost,je=this.removeStylesOnCompDestroy,Bt=this.platformIsServer;switch(W.encapsulation){case p.gXe.Emulated:Ae=new mr(le,be,W,this.appId,je,ue,me,Bt);break;case p.gXe.ShadowDom:return new br(le,be,N,W,ue,me,this.nonce,Bt);default:Ae=new Dr(le,be,W,je,ue,me,Bt)}_e.set(W.id,Ae)}return Ae}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(Pe),p.KVO(Ot),p.KVO(p.sZ2),p.KVO(Ue),p.KVO(J.qQ),p.KVO(p.Agw),p.KVO(p.SKi),p.KVO(p.BIS))}}static{this.\u0275prov=p.jDH({token:fe,factory:fe.\u0275fac})}}return fe})();class Ht{constructor(O,N,W,_e){this.eventManager=O,this.doc=N,this.ngZone=W,this.platformIsServer=_e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(O,N){return N?this.doc.createElementNS(Et[N]||N,O):this.doc.createElement(O)}createComment(O){return this.doc.createComment(O)}createText(O){return this.doc.createTextNode(O)}appendChild(O,N){($n(O)?O.content:O).appendChild(N)}insertBefore(O,N,W){O&&($n(O)?O.content:O).insertBefore(N,W)}removeChild(O,N){O&&O.removeChild(N)}selectRootElement(O,N){let W="string"==typeof O?this.doc.querySelector(O):O;if(!W)throw new p.wOt(-5104,!1);return N||(W.textContent=""),W}parentNode(O){return O.parentNode}nextSibling(O){return O.nextSibling}setAttribute(O,N,W,_e){if(_e){N=_e+":"+N;const Ae=Et[_e];Ae?O.setAttributeNS(Ae,N,W):O.setAttribute(N,W)}else O.setAttribute(N,W)}removeAttribute(O,N,W){if(W){const _e=Et[W];_e?O.removeAttributeNS(_e,N):O.removeAttribute(`${W}:${N}`)}else O.removeAttribute(N)}addClass(O,N){O.classList.add(N)}removeClass(O,N){O.classList.remove(N)}setStyle(O,N,W,_e){_e&(p.czy.DashCase|p.czy.Important)?O.style.setProperty(N,W,_e&p.czy.Important?"important":""):O.style[N]=W}removeStyle(O,N,W){W&p.czy.DashCase?O.style.removeProperty(N):O.style[N]=""}setProperty(O,N,W){O[N]=W}setValue(O,N){O.nodeValue=N}listen(O,N,W){if("string"==typeof O&&!(O=(0,J.QT)().getGlobalEventTarget(this.doc,O)))throw new Error(`Unsupported event target ${O} for event ${N}`);return this.eventManager.addEventListener(O,N,this.decoratePreventDefault(W))}decoratePreventDefault(O){return N=>{if("__ngUnwrap__"===N)return O;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>O(N)):O(N))&&N.preventDefault()}}}function $n(fe){return"TEMPLATE"===fe.tagName&&void 0!==fe.content}class br extends Ht{constructor(O,N,W,_e,Ae,ue,me,le){super(O,Ae,ue,le),this.sharedStylesHost=N,this.hostEl=W,this.shadowRoot=W.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const be=We(_e.id,_e.styles);for(const je of be){const Bt=document.createElement("style");me&&Bt.setAttribute("nonce",me),Bt.textContent=je,this.shadowRoot.appendChild(Bt)}}nodeOrShadowRoot(O){return O===this.hostEl?this.shadowRoot:O}appendChild(O,N){return super.appendChild(this.nodeOrShadowRoot(O),N)}insertBefore(O,N,W){return super.insertBefore(this.nodeOrShadowRoot(O),N,W)}removeChild(O,N){return super.removeChild(this.nodeOrShadowRoot(O),N)}parentNode(O){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(O)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Dr extends Ht{constructor(O,N,W,_e,Ae,ue,me,le){super(O,Ae,ue,me),this.sharedStylesHost=N,this.removeStylesOnCompDestroy=_e,this.styles=le?We(le,W.styles):W.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class mr extends Dr{constructor(O,N,W,_e,Ae,ue,me,le){const be=_e+"-"+W.id;super(O,N,W,Ae,ue,me,le,be),this.contentAttr=function Ne(fe){return"_ngcontent-%COMP%".replace(yt,fe)}(be),this.hostAttr=function Je(fe){return"_nghost-%COMP%".replace(yt,fe)}(be)}applyToHost(O){this.applyStyles(),this.setAttribute(O,this.hostAttr,"")}createElement(O,N){const W=super.createElement(O,N);return super.setAttribute(W,this.contentAttr,""),W}}let Rn=(()=>{class fe extends $e{constructor(N){super(N)}supports(N){return!0}addEventListener(N,W,_e){return N.addEventListener(W,_e,!1),()=>this.removeEventListener(N,W,_e)}removeEventListener(N,W,_e){return N.removeEventListener(W,_e)}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(J.qQ))}}static{this.\u0275prov=p.jDH({token:fe,factory:fe.\u0275fac})}}return fe})();const un=["alt","control","meta","shift"],gn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wt={alt:fe=>fe.altKey,control:fe=>fe.ctrlKey,meta:fe=>fe.metaKey,shift:fe=>fe.shiftKey};let Ve=(()=>{class fe extends $e{constructor(N){super(N)}supports(N){return null!=fe.parseEventName(N)}addEventListener(N,W,_e){const Ae=fe.parseEventName(W),ue=fe.eventCallback(Ae.fullKey,_e,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,J.QT)().onAndCancel(N,Ae.domEventName,ue))}static parseEventName(N){const W=N.toLowerCase().split("."),_e=W.shift();if(0===W.length||"keydown"!==_e&&"keyup"!==_e)return null;const Ae=fe._normalizeKey(W.pop());let ue="",me=W.indexOf("code");if(me>-1&&(W.splice(me,1),ue="code."),un.forEach(be=>{const je=W.indexOf(be);je>-1&&(W.splice(je,1),ue+=be+".")}),ue+=Ae,0!=W.length||0===Ae.length)return null;const le={};return le.domEventName=_e,le.fullKey=ue,le}static matchEventFullKeyCode(N,W){let _e=gn[N.key]||N.key,Ae="";return W.indexOf("code.")>-1&&(_e=N.code,Ae="code."),!(null==_e||!_e)&&(_e=_e.toLowerCase()," "===_e?_e="space":"."===_e&&(_e="dot"),un.forEach(ue=>{ue!==_e&&(0,Wt[ue])(N)&&(Ae+=ue+".")}),Ae+=_e,Ae===W)}static eventCallback(N,W,_e){return Ae=>{fe.matchEventFullKeyCode(Ae,N)&&_e.runGuarded(()=>W(Ae))}}static _normalizeKey(N){return"esc"===N?"escape":N}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(J.qQ))}}static{this.\u0275prov=p.jDH({token:fe,factory:fe.\u0275fac})}}return fe})();const en=(0,p.oH4)(p.fpN,"browser",[{provide:p.Agw,useValue:J.AJ},{provide:p.PLl,useValue:function lt(){Y.makeCurrent()},multi:!0},{provide:J.qQ,useFactory:function zn(){return(0,p.TL$)(document),document},deps:[]}]),Pn=new p.nKC(""),Gn=[{provide:p.e01,useClass:class De{addToWindow(O){p.JZv.getAngularTestability=(W,_e=!0)=>{const Ae=O.findTestabilityInTree(W,_e);if(null==Ae)throw new p.wOt(5103,!1);return Ae},p.JZv.getAllAngularTestabilities=()=>O.getAllTestabilities(),p.JZv.getAllAngularRootElements=()=>O.getAllRootElements(),p.JZv.frameworkStabilizers||(p.JZv.frameworkStabilizers=[]),p.JZv.frameworkStabilizers.push(W=>{const _e=p.JZv.getAllAngularTestabilities();let Ae=_e.length,ue=!1;const me=function(le){ue=ue||le,Ae--,0==Ae&&W(ue)};_e.forEach(le=>{le.whenStable(me)})})}findTestabilityInTree(O,N,W){return null==N?null:O.getTestability(N)??(W?(0,J.QT)().isShadowRoot(N)?this.findTestabilityInTree(O,N.host,!0):this.findTestabilityInTree(O,N.parentElement,!0):null)}},deps:[]},{provide:p.WHO,useClass:p.NYb,deps:[p.SKi,p.giA,p.e01]},{provide:p.NYb,useClass:p.NYb,deps:[p.SKi,p.giA,p.e01]}],Tr=[{provide:p.H8p,useValue:"root"},{provide:p.zcH,useFactory:function fn(){return new p.zcH},deps:[]},{provide:ge,useClass:Rn,multi:!0,deps:[J.qQ,p.SKi,p.Agw]},{provide:ge,useClass:Ve,multi:!0,deps:[J.qQ]},It,Ot,Pe,{provide:p._9s,useExisting:It},{provide:J.N0,useClass:ce,deps:[]},[]];let On=(()=>{class fe{constructor(N){}static withServerTransition(N){return{ngModule:fe,providers:[{provide:p.sZ2,useValue:N.appId}]}}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(Pn,12))}}static{this.\u0275mod=p.$C({type:fe})}static{this.\u0275inj=p.G2t({providers:[...Tr,...Gn],imports:[J.MD,p.Hbi]})}}return fe})(),ae=(()=>{class fe{constructor(N){this._doc=N}getTitle(){return this._doc.title}setTitle(N){this._doc.title=N||""}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(J.qQ))}}static{this.\u0275prov=p.jDH({token:fe,factory:function(W){let _e=null;return _e=W?new W:function Pt(){return new ae((0,p.KVO)(J.qQ))}(),_e},providedIn:"root"})}}return fe})();typeof window<"u"&&window;let rn=(()=>{class fe{static{this.\u0275fac=function(W){return new(W||fe)}}static{this.\u0275prov=p.jDH({token:fe,factory:function(W){let _e=null;return _e=W?new(W||fe):p.KVO(Fe),_e},providedIn:"root"})}}return fe})(),Fe=(()=>{class fe extends rn{constructor(N){super(),this._doc=N}sanitize(N,W){if(null==W)return null;switch(N){case p.WPN.NONE:return W;case p.WPN.HTML:return(0,p.ZF7)(W,"HTML")?(0,p.rcV)(W):(0,p.h9k)(this._doc,String(W)).toString();case p.WPN.STYLE:return(0,p.ZF7)(W,"Style")?(0,p.rcV)(W):W;case p.WPN.SCRIPT:if((0,p.ZF7)(W,"Script"))return(0,p.rcV)(W);throw new p.wOt(5200,!1);case p.WPN.URL:return(0,p.ZF7)(W,"URL")?(0,p.rcV)(W):(0,p.$MX)(String(W));case p.WPN.RESOURCE_URL:if((0,p.ZF7)(W,"ResourceURL"))return(0,p.rcV)(W);throw new p.wOt(5201,!1);default:throw new p.wOt(5202,!1)}}bypassSecurityTrustHtml(N){return(0,p.Kcf)(N)}bypassSecurityTrustStyle(N){return(0,p.cWb)(N)}bypassSecurityTrustScript(N){return(0,p.UyX)(N)}bypassSecurityTrustUrl(N){return(0,p.osQ)(N)}bypassSecurityTrustResourceUrl(N){return(0,p.e5t)(N)}static{this.\u0275fac=function(W){return new(W||fe)(p.KVO(J.qQ))}}static{this.\u0275prov=p.jDH({token:fe,factory:function(W){let _e=null;return _e=W?new W:function Ft(fe){return new Fe(fe.get(J.qQ))}(p.KVO(p.zZn)),_e},providedIn:"root"})}}return fe})()},17:(nn,tt,j)=>{j.d(tt,{nX:()=>pi,wF:()=>Vn,Ix:()=>ci,Wk:()=>ba,wQ:()=>Mn,iI:()=>Gt,n3:()=>hn});var p=j(7705),J=j(4402),oe=j(8455),Y=j(7673),Oe=j(4412),Le=j(4572),ve=j(9350),Te=j(8793),De=j(9030),ce=j(1203),ge=j(8810),Pe=j(983),$e=j(2398),ht=j(1413),Ot=j(8359),Et=j(177),yt=j(6354),St=j(5558),Yt=j(6697),Rt=j(9172),de=j(5964),Ue=j(1397),Ne=j(1594),Je=j(274),We=j(8141),It=j(9437),Ht=j(2816),pt=j(9901),ln=j(9974),$n=j(4360);function br(D){return D<=0?()=>Pe.w:(0,ln.N)((k,T)=>{let P=[];k.subscribe((0,$n._)(T,K=>{P.push(K),D<P.length&&P.shift()},()=>{for(const K of P)T.next(K);T.complete()},void 0,()=>{P=null}))})}var Dr=j(3774),mr=j(3669),gn=j(980),Wt=j(9898),Ve=j(6977),Ye=j(6365),ut=j(345);const ze="primary",Ee=Symbol("RouteTitle");class lt{constructor(k){this.params=k||{}}has(k){return Object.prototype.hasOwnProperty.call(this.params,k)}get(k){if(this.has(k)){const T=this.params[k];return Array.isArray(T)?T[0]:T}return null}getAll(k){if(this.has(k)){const T=this.params[k];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function fn(D){return new lt(D)}function zn(D,k,T){const P=T.path.split("/");if(P.length>D.length||"full"===T.pathMatch&&(k.hasChildren()||P.length<D.length))return null;const K={};for(let se=0;se<P.length;se++){const xe=P[se],Dt=D[se];if(xe.startsWith(":"))K[xe.substring(1)]=Dt;else if(xe!==Dt.path)return null}return{consumed:D.slice(0,P.length),posParams:K}}function en(D,k){const T=D?Object.keys(D):void 0,P=k?Object.keys(k):void 0;if(!T||!P||T.length!=P.length)return!1;let K;for(let se=0;se<T.length;se++)if(K=T[se],!Pn(D[K],k[K]))return!1;return!0}function Pn(D,k){if(Array.isArray(D)&&Array.isArray(k)){if(D.length!==k.length)return!1;const T=[...D].sort(),P=[...k].sort();return T.every((K,se)=>P[se]===K)}return D===k}function Gn(D){return D.length>0?D[D.length-1]:null}function Tr(D){return(0,J.A)(D)?D:(0,p.jNT)(D)?(0,oe.H)(Promise.resolve(D)):(0,Y.of)(D)}const On={exact:function Pt(D,k,T){if(!Tn(D.segments,k.segments)||!it(D.segments,k.segments,T)||D.numberOfChildren!==k.numberOfChildren)return!1;for(const P in k.children)if(!D.children[P]||!Pt(D.children[P],k.children[P],T))return!1;return!0},subset:Me},Yn={exact:function Er(D,k){return en(D,k)},subset:function ae(D,k){return Object.keys(k).length<=Object.keys(D).length&&Object.keys(k).every(T=>Pn(D[T],k[T]))},ignored:()=>!0};function Ar(D,k,T){return On[T.paths](D.root,k.root,T.matrixParams)&&Yn[T.queryParams](D.queryParams,k.queryParams)&&!("exact"===T.fragment&&D.fragment!==k.fragment)}function Me(D,k,T){return qe(D,k,k.segments,T)}function qe(D,k,T,P){if(D.segments.length>T.length){const K=D.segments.slice(0,T.length);return!(!Tn(K,T)||k.hasChildren()||!it(K,T,P))}if(D.segments.length===T.length){if(!Tn(D.segments,T)||!it(D.segments,T,P))return!1;for(const K in k.children)if(!D.children[K]||!Me(D.children[K],k.children[K],P))return!1;return!0}{const K=T.slice(0,D.segments.length),se=T.slice(D.segments.length);return!!(Tn(D.segments,K)&&it(D.segments,K,P)&&D.children[ze])&&qe(D.children[ze],k,se,P)}}function it(D,k,T){return k.every((P,K)=>Yn[T](D[K].parameters,P.parameters))}class _t{constructor(k=new Tt([],{}),T={},P=null){this.root=k,this.queryParams=T,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return et.serialize(this)}}class Tt{constructor(k,T){this.segments=k,this.children=T,this.parent=null,Object.values(T).forEach(P=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xn(this)}}class on{constructor(k,T){this.path=k,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=fn(this.parameters)),this._parameterMap}toString(){return Re(this)}}function Tn(D,k){return D.length===k.length&&D.every((T,P)=>T.path===k[P].path)}let Ln=(()=>{class D{static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:function(){return new oi},providedIn:"root"})}}return D})();class oi{parse(k){const T=new _e(k);return new _t(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(k){const T=`/${_n(k.root,!0)}`,P=function sn(D){const k=Object.keys(D).map(T=>{const P=D[T];return Array.isArray(P)?P.map(K=>`${$t(T)}=${$t(K)}`).join("&"):`${$t(T)}=${$t(P)}`}).filter(T=>!!T);return k.length?`?${k.join("&")}`:""}(k.queryParams);return`${T}${P}${"string"==typeof k.fragment?`#${function rn(D){return encodeURI(D)}(k.fragment)}`:""}`}}const et=new oi;function xn(D){return D.segments.map(k=>Re(k)).join("/")}function _n(D,k){if(!D.hasChildren())return xn(D);if(k){const T=D.children[ze]?_n(D.children[ze],!1):"",P=[];return Object.entries(D.children).forEach(([K,se])=>{K!==ze&&P.push(`${K}:${_n(se,!1)}`)}),P.length>0?`${T}(${P.join("//")})`:T}{const T=function Zt(D,k){let T=[];return Object.entries(D.children).forEach(([P,K])=>{P===ze&&(T=T.concat(k(K,P)))}),Object.entries(D.children).forEach(([P,K])=>{P!==ze&&(T=T.concat(k(K,P)))}),T}(D,(P,K)=>K===ze?[_n(D.children[ze],!1)]:[`${K}:${_n(P,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[ze]?`${xn(D)}/${T[0]}`:`${xn(D)}/(${T.join("//")})`}}function ri(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $t(D){return ri(D).replace(/%3B/gi,";")}function Ft(D){return ri(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fe(D){return decodeURIComponent(D)}function ie(D){return Fe(D.replace(/\+/g,"%20"))}function Re(D){return`${Ft(D.path)}${function kt(D){return Object.keys(D).map(k=>`;${Ft(k)}=${Ft(D[k])}`).join("")}(D.parameters)}`}const Hn=/^[^\/()?;#]+/;function ar(D){const k=D.match(Hn);return k?k[0]:""}const hr=/^[^\/()?;=#]+/,fe=/^[^=?&#]+/,N=/^[^&#]+/;class _e{constructor(k){this.url=k,this.remaining=k}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){const k={};if(this.consumeOptional("?"))do{this.parseQueryParam(k)}while(this.consumeOptional("&"));return k}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const k=[];for(this.peekStartsWith("(")||k.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),k.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(k.length>0||Object.keys(T).length>0)&&(P[ze]=new Tt(k,T)),P}parseSegment(){const k=ar(this.remaining);if(""===k&&this.peekStartsWith(";"))throw new p.wOt(4009,!1);return this.capture(k),new on(Fe(k),this.parseMatrixParams())}parseMatrixParams(){const k={};for(;this.consumeOptional(";");)this.parseParam(k);return k}parseParam(k){const T=function At(D){const k=D.match(hr);return k?k[0]:""}(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const K=ar(this.remaining);K&&(P=K,this.capture(P))}k[Fe(T)]=Fe(P)}parseQueryParam(k){const T=function O(D){const k=D.match(fe);return k?k[0]:""}(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const xe=function W(D){const k=D.match(N);return k?k[0]:""}(this.remaining);xe&&(P=xe,this.capture(P))}const K=ie(T),se=ie(P);if(k.hasOwnProperty(K)){let xe=k[K];Array.isArray(xe)||(xe=[xe],k[K]=xe),xe.push(se)}else k[K]=se}parseParens(k){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=ar(this.remaining),K=this.remaining[P.length];if("/"!==K&&")"!==K&&";"!==K)throw new p.wOt(4010,!1);let se;P.indexOf(":")>-1?(se=P.slice(0,P.indexOf(":")),this.capture(se),this.capture(":")):k&&(se=ze);const xe=this.parseChildren();T[se]=1===Object.keys(xe).length?xe[ze]:new Tt([],xe),this.consumeOptional("//")}return T}peekStartsWith(k){return this.remaining.startsWith(k)}consumeOptional(k){return!!this.peekStartsWith(k)&&(this.remaining=this.remaining.substring(k.length),!0)}capture(k){if(!this.consumeOptional(k))throw new p.wOt(4011,!1)}}function Ae(D){return D.segments.length>0?new Tt([],{[ze]:D}):D}function ue(D){const k={};for(const P of Object.keys(D.children)){const se=ue(D.children[P]);if(P===ze&&0===se.segments.length&&se.hasChildren())for(const[xe,Dt]of Object.entries(se.children))k[xe]=Dt;else(se.segments.length>0||se.hasChildren())&&(k[P]=se)}return function me(D){if(1===D.numberOfChildren&&D.children[ze]){const k=D.children[ze];return new Tt(D.segments.concat(k.segments),k.children)}return D}(new Tt(D.segments,k))}function le(D){return D instanceof _t}function je(D){let k;const K=Ae(function T(se){const xe={};for(const wt of se.children){const wn=T(wt);xe[wt.outlet]=wn}const Dt=new Tt(se.url,xe);return se===D&&(k=Dt),Dt}(D.root));return k??K}function Bt(D,k,T,P){let K=D;for(;K.parent;)K=K.parent;if(0===k.length)return Se(K,K,K,T,P);const se=function an(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new jt(!0,0,D);let k=0,T=!1;const P=D.reduce((K,se,xe)=>{if("object"==typeof se&&null!=se){if(se.outlets){const Dt={};return Object.entries(se.outlets).forEach(([wt,wn])=>{Dt[wt]="string"==typeof wn?wn.split("/"):wn}),[...K,{outlets:Dt}]}if(se.segmentPath)return[...K,se.segmentPath]}return"string"!=typeof se?[...K,se]:0===xe?(se.split("/").forEach((Dt,wt)=>{0==wt&&"."===Dt||(0==wt&&""===Dt?T=!0:".."===Dt?k++:""!=Dt&&K.push(Dt))}),K):[...K,se]},[]);return new jt(T,k,P)}(k);if(se.toRoot())return Se(K,K,new Tt([],{}),T,P);const xe=function qn(D,k,T){if(D.isAbsolute)return new Qt(k,!0,0);if(!T)return new Qt(k,!1,NaN);if(null===T.parent)return new Qt(T,!0,0);const P=pe(D.commands[0])?0:1;return function tn(D,k,T){let P=D,K=k,se=T;for(;se>K;){if(se-=K,P=P.parent,!P)throw new p.wOt(4005,!1);K=P.segments.length}return new Qt(P,!1,K-se)}(T,T.segments.length-1+P,D.numberOfDoubleDots)}(se,K,D),Dt=xe.processChildren?rt(xe.segmentGroup,xe.index,se.commands):gt(xe.segmentGroup,xe.index,se.commands);return Se(K,xe.segmentGroup,Dt,T,P)}function pe(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function Ie(D){return"object"==typeof D&&null!=D&&D.outlets}function Se(D,k,T,P,K){let xe,se={};P&&Object.entries(P).forEach(([wt,wn])=>{se[wt]=Array.isArray(wn)?wn.map(Rr=>`${Rr}`):`${wn}`}),xe=D===k?T:Ke(D,k,T);const Dt=Ae(ue(xe));return new _t(Dt,se,K)}function Ke(D,k,T){const P={};return Object.entries(D.children).forEach(([K,se])=>{P[K]=se===k?T:Ke(se,k,T)}),new Tt(D.segments,P)}class jt{constructor(k,T,P){if(this.isAbsolute=k,this.numberOfDoubleDots=T,this.commands=P,k&&P.length>0&&pe(P[0]))throw new p.wOt(4003,!1);const K=P.find(Ie);if(K&&K!==Gn(P))throw new p.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qt{constructor(k,T,P){this.segmentGroup=k,this.processChildren=T,this.index=P}}function gt(D,k,T){if(D||(D=new Tt([],{})),0===D.segments.length&&D.hasChildren())return rt(D,k,T);const P=function xt(D,k,T){let P=0,K=k;const se={match:!1,pathIndex:0,commandIndex:0};for(;K<D.segments.length;){if(P>=T.length)return se;const xe=D.segments[K],Dt=T[P];if(Ie(Dt))break;const wt=`${Dt}`,wn=P<T.length-1?T[P+1]:null;if(K>0&&void 0===wt)break;if(wt&&wn&&"object"==typeof wn&&void 0===wn.outlets){if(!In(wt,wn,xe))return se;P+=2}else{if(!In(wt,{},xe))return se;P++}K++}return{match:!0,pathIndex:K,commandIndex:P}}(D,k,T),K=T.slice(P.commandIndex);if(P.match&&P.pathIndex<D.segments.length){const se=new Tt(D.segments.slice(0,P.pathIndex),{});return se.children[ze]=new Tt(D.segments.slice(P.pathIndex),D.children),rt(se,0,K)}return P.match&&0===K.length?new Tt(D.segments,{}):P.match&&!D.hasChildren()?zt(D,k,T):P.match?rt(D,0,K):zt(D,k,T)}function rt(D,k,T){if(0===T.length)return new Tt(D.segments,{});{const P=function hi(D){return Ie(D[0])?D[0].outlets:{[ze]:D}}(T),K={};if(Object.keys(P).some(se=>se!==ze)&&D.children[ze]&&1===D.numberOfChildren&&0===D.children[ze].segments.length){const se=rt(D.children[ze],k,T);return new Tt(D.segments,se.children)}return Object.entries(P).forEach(([se,xe])=>{"string"==typeof xe&&(xe=[xe]),null!==xe&&(K[se]=gt(D.children[se],k,xe))}),Object.entries(D.children).forEach(([se,xe])=>{void 0===P[se]&&(K[se]=xe)}),new Tt(D.segments,K)}}function zt(D,k,T){const P=D.segments.slice(0,k);let K=0;for(;K<T.length;){const se=T[K];if(Ie(se)){const wt=Fn(se.outlets);return new Tt(P,wt)}if(0===K&&pe(T[0])){P.push(new on(D.segments[k].path,pn(T[0]))),K++;continue}const xe=Ie(se)?se.outlets[ze]:`${se}`,Dt=K<T.length-1?T[K+1]:null;xe&&Dt&&pe(Dt)?(P.push(new on(xe,pn(Dt))),K+=2):(P.push(new on(xe,{})),K++)}return new Tt(P,{})}function Fn(D){const k={};return Object.entries(D).forEach(([T,P])=>{"string"==typeof P&&(P=[P]),null!==P&&(k[T]=zt(new Tt([],{}),0,P))}),k}function pn(D){const k={};return Object.entries(D).forEach(([T,P])=>k[T]=`${P}`),k}function In(D,k,T){return D==T.path&&en(k,T.parameters)}const ir="imperative";class dr{constructor(k,T){this.id=k,this.url=T}}class Xe extends dr{constructor(k,T,P="imperative",K=null){super(k,T),this.type=0,this.navigationTrigger=P,this.restoredState=K}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vn extends dr{constructor(k,T,P){super(k,T),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gr extends dr{constructor(k,T,P,K){super(k,T),this.reason=P,this.code=K,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wi extends dr{constructor(k,T,P,K){super(k,T),this.reason=P,this.code=K,this.type=16}}class ys extends dr{constructor(k,T,P,K){super(k,T),this.error=P,this.target=K,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ri extends dr{constructor(k,T,P,K){super(k,T),this.urlAfterRedirects=P,this.state=K,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zr extends dr{constructor(k,T,P,K){super(k,T),this.urlAfterRedirects=P,this.state=K,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ds extends dr{constructor(k,T,P,K,se){super(k,T),this.urlAfterRedirects=P,this.state=K,this.shouldActivate=se,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fi extends dr{constructor(k,T,P,K){super(k,T),this.urlAfterRedirects=P,this.state=K,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ss extends dr{constructor(k,T,P,K){super(k,T),this.urlAfterRedirects=P,this.state=K,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go{constructor(k){this.route=k,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ma{constructor(k){this.route=k,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xo{constructor(k){this.snapshot=k,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Br{constructor(k){this.snapshot=k,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rs{constructor(k){this.snapshot=k,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class is{constructor(k){this.snapshot=k,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(k,T,P){this.routerEvent=k,this.position=T,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ur{}class Hs{constructor(k){this.url=k}}class ss{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $s,this.attachRef=null}}let $s=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(T,P){const K=this.getOrCreateContext(T);K.outlet=P,this.contexts.set(T,K)}onChildOutletDestroyed(T){const P=this.getContext(T);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let P=this.getContext(T);return P||(P=new ss,this.contexts.set(T,P)),P}getContext(T){return this.contexts.get(T)||null}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();class Ms{constructor(k){this._root=k}get root(){return this._root.value}parent(k){const T=this.pathFromRoot(k);return T.length>1?T[T.length-2]:null}children(k){const T=zs(k,this._root);return T?T.children.map(P=>P.value):[]}firstChild(k){const T=zs(k,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(k){const T=Ks(k,this._root);return T.length<2?[]:T[T.length-2].children.map(K=>K.value).filter(K=>K!==k)}pathFromRoot(k){return Ks(k,this._root).map(T=>T.value)}}function zs(D,k){if(D===k.value)return k;for(const T of k.children){const P=zs(D,T);if(P)return P}return null}function Ks(D,k){if(D===k.value)return[k];for(const T of k.children){const P=Ks(D,T);if(P.length)return P.unshift(k),P}return[]}class Gi{constructor(k,T){this.value=k,this.children=T}toString(){return`TreeNode(${this.value})`}}function Vi(D){const k={};return D&&D.children.forEach(T=>k[T.value.outlet]=T),k}class Ws extends Ms{constructor(k,T){super(k),this.snapshot=T,Gs(this,k)}toString(){return this.snapshot.toString()}}function _r(D,k){const T=function Pi(D,k){const xe=new Zs([],{},{},"",{},ze,k,null,{});return new Ps("",new Gi(xe,[]))}(0,k),P=new Oe.t([new on("",{})]),K=new Oe.t({}),se=new Oe.t({}),xe=new Oe.t({}),Dt=new Oe.t(""),wt=new pi(P,K,xe,Dt,se,ze,k,T.root);return wt.snapshot=T.root,new Ws(new Gi(wt,[]),T)}class pi{constructor(k,T,P,K,se,xe,Dt,wt){this.urlSubject=k,this.paramsSubject=T,this.queryParamsSubject=P,this.fragmentSubject=K,this.dataSubject=se,this.outlet=xe,this.component=Dt,this._futureSnapshot=wt,this.title=this.dataSubject?.pipe((0,yt.T)(wn=>wn[Ee]))??(0,Y.of)(void 0),this.url=k,this.params=T,this.queryParams=P,this.fragment=K,this.data=se}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.T)(k=>fn(k)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.T)(k=>fn(k)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vs(D,k="emptyOnly"){const T=D.pathFromRoot;let P=0;if("always"!==k)for(P=T.length-1;P>=1;){const K=T[P],se=T[P-1];if(K.routeConfig&&""===K.routeConfig.path)P--;else{if(se.component)break;P--}}return function Oi(D){return D.reduce((k,T)=>({params:{...k.params,...T.params},data:{...k.data,...T.data},resolve:{...T.data,...k.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(P))}class Zs{get title(){return this.data?.[Ee]}constructor(k,T,P,K,se,xe,Dt,wt,wn){this.url=k,this.params=T,this.queryParams=P,this.fragment=K,this.data=se,this.outlet=xe,this.component=Dt,this.routeConfig=wt,this._resolve=wn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ps extends Ms{constructor(k,T){super(T),this.url=k,Gs(this,T)}toString(){return bs(this._root)}}function Gs(D,k){k.value._routerState=D,k.children.forEach(T=>Gs(D,T))}function bs(D){const k=D.children.length>0?` { ${D.children.map(bs).join(", ")} } `:"";return`${D.value}${k}`}function Es(D){if(D.snapshot){const k=D.snapshot,T=D._futureSnapshot;D.snapshot=T,en(k.queryParams,T.queryParams)||D.queryParamsSubject.next(T.queryParams),k.fragment!==T.fragment&&D.fragmentSubject.next(T.fragment),en(k.params,T.params)||D.paramsSubject.next(T.params),function dn(D,k){if(D.length!==k.length)return!1;for(let T=0;T<D.length;++T)if(!en(D[T],k[T]))return!1;return!0}(k.url,T.url)||D.urlSubject.next(T.url),en(k.data,T.data)||D.dataSubject.next(T.data)}else D.snapshot=D._futureSnapshot,D.dataSubject.next(D._futureSnapshot.data)}function qr(D,k){const T=en(D.params,k.params)&&function En(D,k){return Tn(D,k)&&D.every((T,P)=>en(T.parameters,k[P].parameters))}(D.url,k.url);return T&&!(!D.parent!=!k.parent)&&(!D.parent||qr(D.parent,k.parent))}let hn=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=ze,this.activateEvents=new p.bkB,this.deactivateEvents=new p.bkB,this.attachEvents=new p.bkB,this.detachEvents=new p.bkB,this.parentContexts=(0,p.WQX)($s),this.location=(0,p.WQX)(p.c1b),this.changeDetector=(0,p.WQX)(p.gRc),this.environmentInjector=(0,p.WQX)(p.uvJ),this.inputBinder=(0,p.WQX)(Or,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(T){if(T.name){const{firstChange:P,previousValue:K}=T.name;if(P)return;this.isTrackedInParentContexts(K)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(K)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.wOt(4012,!1);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,P){this.activated=T,this._activatedRoute=P,this.location.insert(T.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,P){if(this.isActivated)throw new p.wOt(4013,!1);this._activatedRoute=T;const K=this.location,xe=T.snapshot.component,Dt=this.parentContexts.getOrCreateContext(this.name).children,wt=new sr(T,Dt,K.injector);this.activated=K.createComponent(xe,{index:K.length,injector:wt,environmentInjector:P??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275dir=p.FsC({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.OA$]})}}return D})();class sr{constructor(k,T,P){this.route=k,this.childContexts=T,this.parent=P}get(k,T){return k===pi?this.route:k===$s?this.childContexts:this.parent.get(k,T)}}const Or=new p.nKC("");let xi=(()=>{class D{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(T){this.unsubscribeFromRouteData(T),this.subscribeToRouteData(T)}unsubscribeFromRouteData(T){this.outletDataSubscriptions.get(T)?.unsubscribe(),this.outletDataSubscriptions.delete(T)}subscribeToRouteData(T){const{activatedRoute:P}=T,K=(0,Le.z)([P.queryParams,P.params,P.data]).pipe((0,St.n)(([se,xe,Dt],wt)=>(Dt={...se,...xe,...Dt},0===wt?(0,Y.of)(Dt):Promise.resolve(Dt)))).subscribe(se=>{if(!T.isActivated||!T.activatedComponentRef||T.activatedRoute!==P||null===P.component)return void this.unsubscribeFromRouteData(T);const xe=(0,p.HJs)(P.component);if(xe)for(const{templateName:Dt}of xe.inputs)T.activatedComponentRef.setInput(Dt,se[Dt]);else this.unsubscribeFromRouteData(T)});this.outletDataSubscriptions.set(T,K)}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac})}}return D})();function yi(D,k,T){if(T&&D.shouldReuseRoute(k.value,T.value.snapshot)){const P=T.value;P._futureSnapshot=k.value;const K=function Js(D,k,T){return k.children.map(P=>{for(const K of T.children)if(D.shouldReuseRoute(P.value,K.value.snapshot))return yi(D,P,K);return yi(D,P)})}(D,k,T);return new Gi(P,K)}{if(D.shouldAttach(k.value)){const se=D.retrieve(k.value);if(null!==se){const xe=se.route;return xe.value._futureSnapshot=k.value,xe.children=k.children.map(Dt=>yi(D,Dt)),xe}}const P=function Zr(D){return new pi(new Oe.t(D.url),new Oe.t(D.params),new Oe.t(D.queryParams),new Oe.t(D.fragment),new Oe.t(D.data),D.outlet,D.component,D)}(k.value),K=k.children.map(se=>yi(D,se));return new Gi(P,K)}}const Kr="ngNavigationCancelingError";function hs(D,k){const{redirectTo:T,navigationBehaviorOptions:P}=le(k)?{redirectTo:k,navigationBehaviorOptions:void 0}:k,K=Wn(!1,0,k);return K.url=T,K.navigationBehaviorOptions=P,K}function Wn(D,k,T){const P=new Error("NavigationCancelingError: "+(D||""));return P[Kr]=!0,P.cancellationCode=k,T&&(P.url=T),P}function Is(D){return D&&D[Kr]}let vr=(()=>{class D{static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275cmp=p.VBU({type:D,selectors:[["ng-component"]],standalone:!0,features:[p.aNF],decls:1,vars:0,template:function(P,K){1&P&&p.nrm(0,"router-outlet")},dependencies:[hn],encapsulation:2})}}return D})();function Ts(D){const k=D.children&&D.children.map(Ts),T=k?{...D,children:k}:{...D};return!T.component&&!T.loadComponent&&(k||T.loadChildren)&&T.outlet&&T.outlet!==ze&&(T.component=vr),T}function Un(D){return D.outlet||ze}function jr(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let k=D.parent;k;k=k.parent){const T=k.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class Zi{constructor(k,T,P,K,se){this.routeReuseStrategy=k,this.futureState=T,this.currState=P,this.forwardEvent=K,this.inputBindingEnabled=se}activate(k){const T=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,P,k),Es(this.futureState.root),this.activateChildRoutes(T,P,k)}deactivateChildRoutes(k,T,P){const K=Vi(T);k.children.forEach(se=>{const xe=se.value.outlet;this.deactivateRoutes(se,K[xe],P),delete K[xe]}),Object.values(K).forEach(se=>{this.deactivateRouteAndItsChildren(se,P)})}deactivateRoutes(k,T,P){const K=k.value,se=T?T.value:null;if(K===se)if(K.component){const xe=P.getContext(K.outlet);xe&&this.deactivateChildRoutes(k,T,xe.children)}else this.deactivateChildRoutes(k,T,P);else se&&this.deactivateRouteAndItsChildren(T,P)}deactivateRouteAndItsChildren(k,T){k.value.component&&this.routeReuseStrategy.shouldDetach(k.value.snapshot)?this.detachAndStoreRouteSubtree(k,T):this.deactivateRouteAndOutlet(k,T)}detachAndStoreRouteSubtree(k,T){const P=T.getContext(k.value.outlet),K=P&&k.value.component?P.children:T,se=Vi(k);for(const xe of Object.keys(se))this.deactivateRouteAndItsChildren(se[xe],K);if(P&&P.outlet){const xe=P.outlet.detach(),Dt=P.children.onOutletDeactivated();this.routeReuseStrategy.store(k.value.snapshot,{componentRef:xe,route:k,contexts:Dt})}}deactivateRouteAndOutlet(k,T){const P=T.getContext(k.value.outlet),K=P&&k.value.component?P.children:T,se=Vi(k);for(const xe of Object.keys(se))this.deactivateRouteAndItsChildren(se[xe],K);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.route=null)}activateChildRoutes(k,T,P){const K=Vi(T);k.children.forEach(se=>{this.activateRoutes(se,K[se.value.outlet],P),this.forwardEvent(new is(se.value.snapshot))}),k.children.length&&this.forwardEvent(new Br(k.value.snapshot))}activateRoutes(k,T,P){const K=k.value,se=T?T.value:null;if(Es(K),K===se)if(K.component){const xe=P.getOrCreateContext(K.outlet);this.activateChildRoutes(k,T,xe.children)}else this.activateChildRoutes(k,T,P);else if(K.component){const xe=P.getOrCreateContext(K.outlet);if(this.routeReuseStrategy.shouldAttach(K.snapshot)){const Dt=this.routeReuseStrategy.retrieve(K.snapshot);this.routeReuseStrategy.store(K.snapshot,null),xe.children.onOutletReAttached(Dt.contexts),xe.attachRef=Dt.componentRef,xe.route=Dt.route.value,xe.outlet&&xe.outlet.attach(Dt.componentRef,Dt.route.value),Es(Dt.route.value),this.activateChildRoutes(k,null,xe.children)}else{const Dt=jr(K.snapshot);xe.attachRef=null,xe.route=K,xe.injector=Dt,xe.outlet&&xe.outlet.activateWith(K,xe.injector),this.activateChildRoutes(k,null,xe.children)}}else this.activateChildRoutes(k,null,P)}}class Os{constructor(k){this.path=k,this.route=this.path[this.path.length-1]}}class Ni{constructor(k,T){this.component=k,this.route=T}}function yr(D,k,T){const P=D._root;return Hr(P,k?k._root:null,T,[P.value])}function kr(D,k){const T=Symbol(),P=k.get(D,T);return P===T?"function"!=typeof D||(0,p.LfX)(D)?k.get(D):D:P}function Hr(D,k,T,P,K={canDeactivateChecks:[],canActivateChecks:[]}){const se=Vi(k);return D.children.forEach(xe=>{(function As(D,k,T,P,K={canDeactivateChecks:[],canActivateChecks:[]}){const se=D.value,xe=k?k.value:null,Dt=T?T.getContext(D.value.outlet):null;if(xe&&se.routeConfig===xe.routeConfig){const wt=function Bi(D,k,T){if("function"==typeof T)return T(D,k);switch(T){case"pathParamsChange":return!Tn(D.url,k.url);case"pathParamsOrQueryParamsChange":return!Tn(D.url,k.url)||!en(D.queryParams,k.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qr(D,k)||!en(D.queryParams,k.queryParams);default:return!qr(D,k)}}(xe,se,se.routeConfig.runGuardsAndResolvers);wt?K.canActivateChecks.push(new Os(P)):(se.data=xe.data,se._resolvedData=xe._resolvedData),Hr(D,k,se.component?Dt?Dt.children:null:T,P,K),wt&&Dt&&Dt.outlet&&Dt.outlet.isActivated&&K.canDeactivateChecks.push(new Ni(Dt.outlet.component,xe))}else xe&&fs(k,Dt,K),K.canActivateChecks.push(new Os(P)),Hr(D,null,se.component?Dt?Dt.children:null:T,P,K)})(xe,se[xe.value.outlet],T,P.concat([xe.value]),K),delete se[xe.value.outlet]}),Object.entries(se).forEach(([xe,Dt])=>fs(Dt,T.getContext(xe),K)),K}function fs(D,k,T){const P=Vi(D),K=D.value;Object.entries(P).forEach(([se,xe])=>{fs(xe,K.component?k?k.children.getContext(se):null:k,T)}),T.canDeactivateChecks.push(new Ni(K.component&&k&&k.outlet&&k.outlet.isActivated?k.outlet.component:null,K))}function ai(D){return"function"==typeof D}function M(D){return D instanceof ve.G||"EmptyError"===D?.name}const z=Symbol("INITIAL_VALUE");function Ce(){return(0,St.n)(D=>(0,Le.z)(D.map(k=>k.pipe((0,Yt.s)(1),(0,Rt.Z)(z)))).pipe((0,yt.T)(k=>{for(const T of k)if(!0!==T){if(T===z)return z;if(!1===T||T instanceof _t)return T}return!0}),(0,de.p)(k=>k!==z),(0,Yt.s)(1)))}function ei(D){return(0,ce.F)((0,We.M)(k=>{if(le(k))throw hs(0,k)}),(0,yt.T)(k=>!0===k))}class ti{constructor(k){this.segmentGroup=k||null}}class vi{constructor(k){this.urlTree=k}}function _i(D){return(0,ge.$)(new ti(D))}function Ei(D){return(0,ge.$)(new vi(D))}class Qi{constructor(k,T){this.urlSerializer=k,this.urlTree=T}noMatchError(k){return new p.wOt(4002,!1)}lineralizeSegments(k,T){let P=[],K=T.root;for(;;){if(P=P.concat(K.segments),0===K.numberOfChildren)return(0,Y.of)(P);if(K.numberOfChildren>1||!K.children[ze])return(0,ge.$)(new p.wOt(4e3,!1));K=K.children[ze]}}applyRedirectCommands(k,T,P){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),k,P)}applyRedirectCreateUrlTree(k,T,P,K){const se=this.createSegmentGroup(k,T.root,P,K);return new _t(se,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(k,T){const P={};return Object.entries(k).forEach(([K,se])=>{if("string"==typeof se&&se.startsWith(":")){const Dt=se.substring(1);P[K]=T[Dt]}else P[K]=se}),P}createSegmentGroup(k,T,P,K){const se=this.createSegments(k,T.segments,P,K);let xe={};return Object.entries(T.children).forEach(([Dt,wt])=>{xe[Dt]=this.createSegmentGroup(k,wt,P,K)}),new Tt(se,xe)}createSegments(k,T,P,K){return T.map(se=>se.path.startsWith(":")?this.findPosParam(k,se,K):this.findOrReturn(se,P))}findPosParam(k,T,P){const K=P[T.path.substring(1)];if(!K)throw new p.wOt(4001,!1);return K}findOrReturn(k,T){let P=0;for(const K of T){if(K.path===k.path)return T.splice(P),K;P++}return k}}const Ti={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function co(D,k,T,P,K){const se=Qs(D,k,T);return se.matched?(P=function Vr(D,k){return D.providers&&!D._injector&&(D._injector=(0,p.Ol2)(D.providers,k,`Route: ${D.path}`)),D._injector??k}(k,P),function Wi(D,k,T,P){const K=k.canMatch;if(!K||0===K.length)return(0,Y.of)(!0);const se=K.map(xe=>{const Dt=kr(xe,D);return Tr(function G(D){return D&&ai(D.canMatch)}(Dt)?Dt.canMatch(k,T):D.runInContext(()=>Dt(k,T)))});return(0,Y.of)(se).pipe(Ce(),ei())}(P,k,T).pipe((0,yt.T)(xe=>!0===xe?se:{...Ti}))):(0,Y.of)(se)}function Qs(D,k,T){if(""===k.path)return"full"===k.pathMatch&&(D.hasChildren()||T.length>0)?{...Ti}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const K=(k.matcher||zn)(T,D,k);if(!K)return{...Ti};const se={};Object.entries(K.posParams??{}).forEach(([Dt,wt])=>{se[Dt]=wt.path});const xe=K.consumed.length>0?{...se,...K.consumed[K.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:K.consumed,remainingSegments:T.slice(K.consumed.length),parameters:xe,positionalParamSegments:K.posParams??{}}}function _o(D,k,T,P){return T.length>0&&function Ho(D,k,T){return T.some(P=>Mo(D,k,P)&&Un(P)!==ze)}(D,T,P)?{segmentGroup:new Tt(k,Zo(P,new Tt(T,D.children))),slicedSegments:[]}:0===T.length&&function ga(D,k,T){return T.some(P=>Mo(D,k,P))}(D,T,P)?{segmentGroup:new Tt(D.segments,jo(D,0,T,P,D.children)),slicedSegments:T}:{segmentGroup:new Tt(D.segments,D.children),slicedSegments:T}}function jo(D,k,T,P,K){const se={};for(const xe of P)if(Mo(D,T,xe)&&!K[Un(xe)]){const Dt=new Tt([],{});se[Un(xe)]=Dt}return{...K,...se}}function Zo(D,k){const T={};T[ze]=k;for(const P of D)if(""===P.path&&Un(P)!==ze){const K=new Tt([],{});T[Un(P)]=K}return T}function Mo(D,k,T){return(!(D.hasChildren()||k.length>0)||"full"!==T.pathMatch)&&""===T.path}class $o{constructor(k,T,P,K,se,xe,Dt){this.injector=k,this.configLoader=T,this.rootComponentType=P,this.config=K,this.urlTree=se,this.paramsInheritanceStrategy=xe,this.urlSerializer=Dt,this.allowRedirects=!0,this.applyRedirects=new Qi(this.urlSerializer,this.urlTree)}noMatchError(k){return new p.wOt(4002,!1)}recognize(){const k=_o(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,k,ze).pipe((0,It.W)(T=>{if(T instanceof vi)return this.allowRedirects=!1,this.urlTree=T.urlTree,this.match(T.urlTree);throw T instanceof ti?this.noMatchError(T):T}),(0,yt.T)(T=>{const P=new Zs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ze,this.rootComponentType,null,{}),K=new Gi(P,T),se=new Ps("",K),xe=function be(D,k,T=null,P=null){return Bt(je(D),k,T,P)}(P,[],this.urlTree.queryParams,this.urlTree.fragment);return xe.queryParams=this.urlTree.queryParams,se.url=this.urlSerializer.serialize(xe),this.inheritParamsAndData(se._root),{state:se,tree:xe}}))}match(k){return this.processSegmentGroup(this.injector,this.config,k.root,ze).pipe((0,It.W)(P=>{throw P instanceof ti?this.noMatchError(P):P}))}inheritParamsAndData(k){const T=k.value,P=vs(T,this.paramsInheritanceStrategy);T.params=Object.freeze(P.params),T.data=Object.freeze(P.data),k.children.forEach(K=>this.inheritParamsAndData(K))}processSegmentGroup(k,T,P,K){return 0===P.segments.length&&P.hasChildren()?this.processChildren(k,T,P):this.processSegment(k,T,P,P.segments,K,!0)}processChildren(k,T,P){const K=[];for(const se of Object.keys(P.children))"primary"===se?K.unshift(se):K.push(se);return(0,oe.H)(K).pipe((0,Je.H)(se=>{const xe=P.children[se],Dt=function Jr(D,k){const T=D.filter(P=>Un(P)===k);return T.push(...D.filter(P=>Un(P)!==k)),T}(T,se);return this.processSegmentGroup(k,Dt,xe,se)}),(0,Ht.S)((se,xe)=>(se.push(...xe),se)),(0,pt.U)(null),function Rn(D,k){const T=arguments.length>=2;return P=>P.pipe(D?(0,de.p)((K,se)=>D(K,se,P)):mr.D,br(1),T?(0,pt.U)(k):(0,Dr.v)(()=>new ve.G))}(),(0,Ue.Z)(se=>{if(null===se)return _i(P);const xe=ya(se);return function Jo(D){D.sort((k,T)=>k.value.outlet===ze?-1:T.value.outlet===ze?1:k.value.outlet.localeCompare(T.value.outlet))}(xe),(0,Y.of)(xe)}))}processSegment(k,T,P,K,se,xe){return(0,oe.H)(T).pipe((0,Je.H)(Dt=>this.processSegmentAgainstRoute(Dt._injector??k,T,Dt,P,K,se,xe).pipe((0,It.W)(wt=>{if(wt instanceof ti)return(0,Y.of)(null);throw wt}))),(0,Ne.$)(Dt=>!!Dt),(0,It.W)(Dt=>{if(M(Dt))return function _a(D,k,T){return 0===k.length&&!D.children[T]}(P,K,se)?(0,Y.of)([]):_i(P);throw Dt}))}processSegmentAgainstRoute(k,T,P,K,se,xe,Dt){return function dc(D,k,T,P){return!!(Un(D)===P||P!==ze&&Mo(k,T,D))&&("**"===D.path||Qs(k,D,T).matched)}(P,K,se,xe)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(k,K,P,se,xe,Dt):Dt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(k,K,T,P,se,xe):_i(K):_i(K)}expandSegmentAgainstRouteUsingRedirect(k,T,P,K,se,xe){return"**"===K.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(k,P,K,xe):this.expandRegularSegmentAgainstRouteUsingRedirect(k,T,P,K,se,xe)}expandWildCardWithParamsAgainstRouteUsingRedirect(k,T,P,K){const se=this.applyRedirects.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?Ei(se):this.applyRedirects.lineralizeSegments(P,se).pipe((0,Ue.Z)(xe=>{const Dt=new Tt(xe,{});return this.processSegment(k,T,Dt,xe,K,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(k,T,P,K,se,xe){const{matched:Dt,consumedSegments:wt,remainingSegments:wn,positionalParamSegments:Rr}=Qs(T,K,se);if(!Dt)return _i(T);const Di=this.applyRedirects.applyRedirectCommands(wt,K.redirectTo,Rr);return K.redirectTo.startsWith("/")?Ei(Di):this.applyRedirects.lineralizeSegments(K,Di).pipe((0,Ue.Z)(si=>this.processSegment(k,P,T,si.concat(wn),xe,!1)))}matchSegmentAgainstRoute(k,T,P,K,se,xe){let Dt;if("**"===P.path){const wt=K.length>0?Gn(K).parameters:{},wn=new Zs(K,wt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zo(P),Un(P),P.component??P._loadedComponent??null,P,Oo(P));Dt=(0,Y.of)({snapshot:wn,consumedSegments:[],remainingSegments:[]}),T.children={}}else Dt=co(T,P,K,k).pipe((0,yt.T)(({matched:wt,consumedSegments:wn,remainingSegments:Rr,parameters:Di})=>wt?{snapshot:new Zs(wn,Di,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zo(P),Un(P),P.component??P._loadedComponent??null,P,Oo(P)),consumedSegments:wn,remainingSegments:Rr}:null));return Dt.pipe((0,St.n)(wt=>null===wt?_i(T):this.getChildConfig(k=P._injector??k,P,K).pipe((0,St.n)(({routes:wn})=>{const Rr=P._loadedInjector??k,{snapshot:Di,consumedSegments:si,remainingSegments:Xs}=wt,{segmentGroup:ta,slicedSegments:wa}=_o(T,si,Xs,wn);if(0===wa.length&&ta.hasChildren())return this.processChildren(Rr,wn,ta).pipe((0,yt.T)(Ta=>null===Ta?null:[new Gi(Di,Ta)]));if(0===wn.length&&0===wa.length)return(0,Y.of)([new Gi(Di,[])]);const Yc=Un(P)===se;return this.processSegment(Rr,wn,ta,wa,Yc?ze:se,!0).pipe((0,yt.T)(Ta=>[new Gi(Di,Ta)]))}))))}getChildConfig(k,T,P){return T.children?(0,Y.of)({routes:T.children,injector:k}):T.loadChildren?void 0!==T._loadedRoutes?(0,Y.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function or(D,k,T,P){const K=k.canLoad;if(void 0===K||0===K.length)return(0,Y.of)(!0);const se=K.map(xe=>{const Dt=kr(xe,D);return Tr(function oo(D){return D&&ai(D.canLoad)}(Dt)?Dt.canLoad(k,T):D.runInContext(()=>Dt(k,T)))});return(0,Y.of)(se).pipe(Ce(),ei())}(k,T,P).pipe((0,Ue.Z)(K=>K?this.configLoader.loadChildren(k,T).pipe((0,We.M)(se=>{T._loadedRoutes=se.routes,T._loadedInjector=se.injector})):function nr(D){return(0,ge.$)(Wn(!1,3))}())):(0,Y.of)({routes:[],injector:k})}}function Po(D){const k=D.value.routeConfig;return k&&""===k.path}function ya(D){const k=[],T=new Set;for(const P of D){if(!Po(P)){k.push(P);continue}const K=k.find(se=>P.value.routeConfig===se.value.routeConfig);void 0!==K?(K.children.push(...P.children),T.add(K)):k.push(P)}for(const P of T){const K=ya(P.children);k.push(new Gi(P.value,K))}return k.filter(P=>!T.has(P))}function zo(D){return D.data||{}}function Oo(D){return D.resolve||{}}function w(D){return"string"==typeof D.title||null===D.title}function C(D){return(0,St.n)(k=>{const T=D(k);return T?(0,oe.H)(T).pipe((0,yt.T)(()=>k)):(0,Y.of)(k)})}const V=new p.nKC("ROUTES");let X=(()=>{class D{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.WQX)(p.Ql9)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,Y.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const P=Tr(T.loadComponent()).pipe((0,yt.T)(R),(0,We.M)(se=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=se}),(0,gn.j)(()=>{this.componentLoaders.delete(T)})),K=new $e.G(P,()=>new ht.B).pipe((0,Wt.B)());return this.componentLoaders.set(T,K),K}loadChildren(T,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,Y.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const se=function _(D,k,T,P){return Tr(D.loadChildren()).pipe((0,yt.T)(R),(0,Ue.Z)(K=>K instanceof p.Co$||Array.isArray(K)?(0,Y.of)(K):(0,oe.H)(k.compileModuleAsync(K))),(0,yt.T)(K=>{P&&P(D);let se,xe,Dt=!1;return Array.isArray(K)?(xe=K,!0):(se=K.create(T).injector,xe=se.get(V,[],{optional:!0,self:!0}).flat()),{routes:xe.map(Ts),injector:se}}))}(P,this.compiler,T,this.onLoadEndListener).pipe((0,gn.j)(()=>{this.childrenLoaders.delete(P)})),xe=new $e.G(se,()=>new ht.B).pipe((0,Wt.B)());return this.childrenLoaders.set(P,xe),xe}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();function R(D){return function L(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let B=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht.B,this.transitionAbortSubject=new ht.B,this.configLoader=(0,p.WQX)(X),this.environmentInjector=(0,p.WQX)(p.uvJ),this.urlSerializer=(0,p.WQX)(Ln),this.rootContexts=(0,p.WQX)($s),this.inputBindingEnabled=null!==(0,p.WQX)(Or,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Y.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=K=>this.events.next(new ma(K)),this.configLoader.onLoadStartListener=K=>this.events.next(new go(K))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:P})}setupNavigations(T,P,K){return this.transitions=new Oe.t({id:0,currentUrlTree:P,currentRawUrl:P,currentBrowserUrl:P,extractedUrl:T.urlHandlingStrategy.extract(P),urlAfterRedirects:T.urlHandlingStrategy.extract(P),rawUrl:P,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ir,restoredState:null,currentSnapshot:K.snapshot,targetSnapshot:null,currentRouterState:K,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,de.p)(se=>0!==se.id),(0,yt.T)(se=>({...se,extractedUrl:T.urlHandlingStrategy.extract(se.rawUrl)})),(0,St.n)(se=>{this.currentTransition=se;let xe=!1,Dt=!1;return(0,Y.of)(se).pipe((0,We.M)(wt=>{this.currentNavigation={id:wt.id,initialUrl:wt.rawUrl,extractedUrl:wt.extractedUrl,trigger:wt.source,extras:wt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,St.n)(wt=>{const wn=wt.currentBrowserUrl.toString(),Rr=!T.navigated||wt.extractedUrl.toString()!==wn||wn!==wt.currentUrlTree.toString();if(!Rr&&"reload"!==(wt.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const si="";return this.events.next(new wi(wt.id,this.urlSerializer.serialize(wt.rawUrl),si,0)),wt.resolve(null),Pe.w}if(T.urlHandlingStrategy.shouldProcessUrl(wt.rawUrl))return(0,Y.of)(wt).pipe((0,St.n)(si=>{const Xs=this.transitions?.getValue();return this.events.next(new Xe(si.id,this.urlSerializer.serialize(si.extractedUrl),si.source,si.restoredState)),Xs!==this.transitions?.getValue()?Pe.w:Promise.resolve(si)}),function va(D,k,T,P,K,se){return(0,Ue.Z)(xe=>function Gc(D,k,T,P,K,se,xe="emptyOnly"){return new $o(D,k,T,P,K,xe,se).recognize()}(D,k,T,P,xe.extractedUrl,K,se).pipe((0,yt.T)(({state:Dt,tree:wt})=>({...xe,targetSnapshot:Dt,urlAfterRedirects:wt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,We.M)(si=>{se.targetSnapshot=si.targetSnapshot,se.urlAfterRedirects=si.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:si.urlAfterRedirects};const Xs=new Ri(si.id,this.urlSerializer.serialize(si.extractedUrl),this.urlSerializer.serialize(si.urlAfterRedirects),si.targetSnapshot);this.events.next(Xs)}));if(Rr&&T.urlHandlingStrategy.shouldProcessUrl(wt.currentRawUrl)){const{id:si,extractedUrl:Xs,source:ta,restoredState:wa,extras:Yc}=wt,Ta=new Xe(si,this.urlSerializer.serialize(Xs),ta,wa);this.events.next(Ta);const Vu=_r(0,this.rootComponentType).snapshot;return this.currentTransition=se={...wt,targetSnapshot:Vu,urlAfterRedirects:Xs,extras:{...Yc,skipLocationChange:!1,replaceUrl:!1}},(0,Y.of)(se)}{const si="";return this.events.next(new wi(wt.id,this.urlSerializer.serialize(wt.extractedUrl),si,1)),wt.resolve(null),Pe.w}}),(0,We.M)(wt=>{const wn=new zr(wt.id,this.urlSerializer.serialize(wt.extractedUrl),this.urlSerializer.serialize(wt.urlAfterRedirects),wt.targetSnapshot);this.events.next(wn)}),(0,yt.T)(wt=>(this.currentTransition=se={...wt,guards:yr(wt.targetSnapshot,wt.currentSnapshot,this.rootContexts)},se)),function ot(D,k){return(0,Ue.Z)(T=>{const{targetSnapshot:P,currentSnapshot:K,guards:{canActivateChecks:se,canDeactivateChecks:xe}}=T;return 0===xe.length&&0===se.length?(0,Y.of)({...T,guardsResult:!0}):function Ut(D,k,T,P){return(0,oe.H)(D).pipe((0,Ue.Z)(K=>function gi(D,k,T,P,K){const se=k&&k.routeConfig?k.routeConfig.canDeactivate:null;if(!se||0===se.length)return(0,Y.of)(!0);const xe=se.map(Dt=>{const wt=jr(k)??K,wn=kr(Dt,wt);return Tr(function to(D){return D&&ai(D.canDeactivate)}(wn)?wn.canDeactivate(D,k,T,P):wt.runInContext(()=>wn(D,k,T,P))).pipe((0,Ne.$)())});return(0,Y.of)(xe).pipe(Ce())}(K.component,K.route,T,k,P)),(0,Ne.$)(K=>!0!==K,!0))}(xe,P,K,D).pipe((0,Ue.Z)(Dt=>Dt&&function qs(D){return"boolean"==typeof D}(Dt)?function kn(D,k,T,P){return(0,oe.H)(k).pipe((0,Je.H)(K=>(0,Te.x)(function pr(D,k){return null!==D&&k&&k(new xo(D)),(0,Y.of)(!0)}(K.route.parent,P),function Cn(D,k){return null!==D&&k&&k(new rs(D)),(0,Y.of)(!0)}(K.route,P),function Cr(D,k,T){const P=k[k.length-1],se=k.slice(0,k.length-1).reverse().map(xe=>function cs(D){const k=D.routeConfig?D.routeConfig.canActivateChild:null;return k&&0!==k.length?{node:D,guards:k}:null}(xe)).filter(xe=>null!==xe).map(xe=>(0,De.v)(()=>{const Dt=xe.guards.map(wt=>{const wn=jr(xe.node)??T,Rr=kr(wt,wn);return Tr(function ao(D){return D&&ai(D.canActivateChild)}(Rr)?Rr.canActivateChild(P,D):wn.runInContext(()=>Rr(P,D))).pipe((0,Ne.$)())});return(0,Y.of)(Dt).pipe(Ce())}));return(0,Y.of)(se).pipe(Ce())}(D,K.path,T),function Sr(D,k,T){const P=k.routeConfig?k.routeConfig.canActivate:null;if(!P||0===P.length)return(0,Y.of)(!0);const K=P.map(se=>(0,De.v)(()=>{const xe=jr(k)??T,Dt=kr(se,xe);return Tr(function eo(D){return D&&ai(D.canActivate)}(Dt)?Dt.canActivate(k,D):xe.runInContext(()=>Dt(k,D))).pipe((0,Ne.$)())}));return(0,Y.of)(K).pipe(Ce())}(D,K.route,T))),(0,Ne.$)(K=>!0!==K,!0))}(P,se,D,k):(0,Y.of)(Dt)),(0,yt.T)(Dt=>({...T,guardsResult:Dt})))})}(this.environmentInjector,wt=>this.events.next(wt)),(0,We.M)(wt=>{if(se.guardsResult=wt.guardsResult,le(wt.guardsResult))throw hs(0,wt.guardsResult);const wn=new Ds(wt.id,this.urlSerializer.serialize(wt.extractedUrl),this.urlSerializer.serialize(wt.urlAfterRedirects),wt.targetSnapshot,!!wt.guardsResult);this.events.next(wn)}),(0,de.p)(wt=>!!wt.guardsResult||(this.cancelNavigationTransition(wt,"",3),!1)),C(wt=>{if(wt.guards.canActivateChecks.length)return(0,Y.of)(wt).pipe((0,We.M)(wn=>{const Rr=new fi(wn.id,this.urlSerializer.serialize(wn.extractedUrl),this.urlSerializer.serialize(wn.urlAfterRedirects),wn.targetSnapshot);this.events.next(Rr)}),(0,St.n)(wn=>{let Rr=!1;return(0,Y.of)(wn).pipe(function ea(D,k){return(0,Ue.Z)(T=>{const{targetSnapshot:P,guards:{canActivateChecks:K}}=T;if(!K.length)return(0,Y.of)(T);let se=0;return(0,oe.H)(K).pipe((0,Je.H)(xe=>function kl(D,k,T,P){const K=D.routeConfig,se=D._resolve;return void 0!==K?.title&&!w(K)&&(se[Ee]=K.title),function hc(D,k,T,P){const K=function Ns(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===K.length)return(0,Y.of)({});const se={};return(0,oe.H)(K).pipe((0,Ue.Z)(xe=>function Z(D,k,T,P){const K=jr(k)??P,se=kr(D,K);return Tr(se.resolve?se.resolve(k,T):K.runInContext(()=>se(k,T)))}(D[xe],k,T,P).pipe((0,Ne.$)(),(0,We.M)(Dt=>{se[xe]=Dt}))),br(1),function un(D){return(0,yt.T)(()=>D)}(se),(0,It.W)(xe=>M(xe)?Pe.w:(0,ge.$)(xe)))}(se,D,k,P).pipe((0,yt.T)(xe=>(D._resolvedData=xe,D.data=vs(D,T).resolve,K&&w(K)&&(D.data[Ee]=K.title),null)))}(xe.route,P,D,k)),(0,We.M)(()=>se++),br(1),(0,Ue.Z)(xe=>se===K.length?(0,Y.of)(T):Pe.w))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,We.M)({next:()=>Rr=!0,complete:()=>{Rr||this.cancelNavigationTransition(wn,"",2)}}))}),(0,We.M)(wn=>{const Rr=new Ss(wn.id,this.urlSerializer.serialize(wn.extractedUrl),this.urlSerializer.serialize(wn.urlAfterRedirects),wn.targetSnapshot);this.events.next(Rr)}))}),C(wt=>{const wn=Rr=>{const Di=[];Rr.routeConfig?.loadComponent&&!Rr.routeConfig._loadedComponent&&Di.push(this.configLoader.loadComponent(Rr.routeConfig).pipe((0,We.M)(si=>{Rr.component=si}),(0,yt.T)(()=>{})));for(const si of Rr.children)Di.push(...wn(si));return Di};return(0,Le.z)(wn(wt.targetSnapshot.root)).pipe((0,pt.U)(),(0,Yt.s)(1))}),C(()=>this.afterPreactivation()),(0,yt.T)(wt=>{const wn=function ds(D,k,T){const P=yi(D,k._root,T?T._root:void 0);return new Ws(P,k)}(T.routeReuseStrategy,wt.targetSnapshot,wt.currentRouterState);return this.currentTransition=se={...wt,targetRouterState:wn},se}),(0,We.M)(()=>{this.events.next(new Ur)}),((D,k,T,P)=>(0,yt.T)(K=>(new Zi(k,K.targetRouterState,K.currentRouterState,T,P).activate(D),K)))(this.rootContexts,T.routeReuseStrategy,wt=>this.events.next(wt),this.inputBindingEnabled),(0,Yt.s)(1),(0,We.M)({next:wt=>{xe=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vn(wt.id,this.urlSerializer.serialize(wt.extractedUrl),this.urlSerializer.serialize(wt.urlAfterRedirects))),T.titleStrategy?.updateTitle(wt.targetRouterState.snapshot),wt.resolve(!0)},complete:()=>{xe=!0}}),(0,Ve.Q)(this.transitionAbortSubject.pipe((0,We.M)(wt=>{throw wt}))),(0,gn.j)(()=>{xe||Dt||this.cancelNavigationTransition(se,"",1),this.currentNavigation?.id===se.id&&(this.currentNavigation=null)}),(0,It.W)(wt=>{if(Dt=!0,Is(wt))this.events.next(new Gr(se.id,this.urlSerializer.serialize(se.extractedUrl),wt.message,wt.cancellationCode)),function os(D){return Is(D)&&le(D.url)}(wt)?this.events.next(new Hs(wt.url)):se.resolve(!1);else{this.events.next(new ys(se.id,this.urlSerializer.serialize(se.extractedUrl),wt,se.targetSnapshot??void 0));try{se.resolve(T.errorHandler(wt))}catch(wn){se.reject(wn)}}return Pe.w}))}))}cancelNavigationTransition(T,P,K){const se=new Gr(T.id,this.urlSerializer.serialize(T.extractedUrl),P,K);this.events.next(se),T.resolve(!1)}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();function ee(D){return D!==ir}let He=(()=>{class D{buildTitle(T){let P,K=T.root;for(;void 0!==K;)P=this.getResolvedTitleForRoute(K)??P,K=K.children.find(se=>se.outlet===ze);return P}getResolvedTitleForRoute(T){return T.data[Ee]}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:function(){return(0,p.WQX)(st)},providedIn:"root"})}}return D})(),st=(()=>{class D extends He{constructor(T){super(),this.title=T}updateTitle(T){const P=this.buildTitle(T);void 0!==P&&this.title.setTitle(P)}static{this.\u0275fac=function(P){return new(P||D)(p.KVO(ut.hE))}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})(),qt=(()=>{class D{static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:function(){return(0,p.WQX)(mn)},providedIn:"root"})}}return D})();class Dn{shouldDetach(k){return!1}store(k,T){}shouldAttach(k){return!1}retrieve(k){return null}shouldReuseRoute(k,T){return k.routeConfig===T.routeConfig}}let mn=(()=>{class D extends Dn{static{this.\u0275fac=function(){let T;return function(K){return(T||(T=p.xGo(D)))(K||D)}}()}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();const yn=new p.nKC("",{providedIn:"root",factory:()=>({})});let jn=(()=>{class D{static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:function(){return(0,p.WQX)(cr)},providedIn:"root"})}}return D})(),cr=(()=>{class D{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,P){return T}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();var lr=function(D){return D[D.COMPLETE=0]="COMPLETE",D[D.FAILED=1]="FAILED",D[D.REDIRECTING=2]="REDIRECTING",D}(lr||{});function gr(D,k){D.events.pipe((0,de.p)(T=>T instanceof Vn||T instanceof Gr||T instanceof ys||T instanceof wi),(0,yt.T)(T=>T instanceof Vn||T instanceof wi?lr.COMPLETE:T instanceof Gr&&(0===T.code||1===T.code)?lr.REDIRECTING:lr.FAILED),(0,de.p)(T=>T!==lr.REDIRECTING),(0,Yt.s)(1)).subscribe(()=>{k()})}function Qr(D){throw D}function Ui(D,k,T){return k.parse("/")}const Ji={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class D{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.WQX)(p.H3F),this.isNgZoneEnabled=!1,this._events=new ht.B,this.options=(0,p.WQX)(yn,{optional:!0})||{},this.pendingTasks=(0,p.WQX)(p.$K3),this.errorHandler=this.options.errorHandler||Qr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ui,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.WQX)(jn),this.routeReuseStrategy=(0,p.WQX)(qt),this.titleStrategy=(0,p.WQX)(He),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.WQX)(V,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.WQX)(B),this.urlSerializer=(0,p.WQX)(Ln),this.location=(0,p.WQX)(Et.aZ),this.componentInputBindingEnabled=!!(0,p.WQX)(Or,{optional:!0}),this.eventsSubscription=new Ot.yU,this.isNgZoneEnabled=(0,p.WQX)(p.SKi)instanceof p.SKi&&p.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new _t,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_r(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=this.browserPageId},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const T=this.navigationTransitions.events.subscribe(P=>{try{const{currentTransition:K}=this.navigationTransitions;if(null===K)return void(es(P)&&this._events.next(P));if(P instanceof Xe)ee(K.source)&&(this.browserUrlTree=K.extractedUrl);else if(P instanceof wi)this.rawUrlTree=K.rawUrl;else if(P instanceof Ri){if("eager"===this.urlUpdateStrategy){if(!K.extras.skipLocationChange){const se=this.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl);this.setBrowserUrl(se,K)}this.browserUrlTree=K.urlAfterRedirects}}else if(P instanceof Ur)this.currentUrlTree=K.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl),this.routerState=K.targetRouterState,"deferred"===this.urlUpdateStrategy&&(K.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,K),this.browserUrlTree=K.urlAfterRedirects);else if(P instanceof Gr)0!==P.code&&1!==P.code&&(this.navigated=!0),(3===P.code||2===P.code)&&this.restoreHistory(K);else if(P instanceof Hs){const se=this.urlHandlingStrategy.merge(P.url,K.currentRawUrl),xe={skipLocationChange:K.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ee(K.source)};this.scheduleNavigation(se,ir,null,xe,{resolve:K.resolve,reject:K.reject,promise:K.promise})}P instanceof ys&&this.restoreHistory(K,!0),P instanceof Vn&&(this.navigated=!0),es(P)&&this._events.next(P)}catch(K){this.navigationTransitions.transitionAbortSubject.next(K)}});this.eventsSubscription.add(T)}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ir,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const P="popstate"===T.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,P,T.state)},0)}))}navigateToSyncWithBrowser(T,P,K){const se={replaceUrl:!0},xe=K?.navigationId?K:null;if(K){const wt={...K};delete wt.navigationId,delete wt.\u0275routerPageId,0!==Object.keys(wt).length&&(se.state=wt)}const Dt=this.parseUrl(T);this.scheduleNavigation(Dt,P,xe,se)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(T){this.config=T.map(Ts),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(T,P={}){const{relativeTo:K,queryParams:se,fragment:xe,queryParamsHandling:Dt,preserveFragment:wt}=P,wn=wt?this.currentUrlTree.fragment:xe;let Di,Rr=null;switch(Dt){case"merge":Rr={...this.currentUrlTree.queryParams,...se};break;case"preserve":Rr=this.currentUrlTree.queryParams;break;default:Rr=se||null}null!==Rr&&(Rr=this.removeEmptyProps(Rr));try{Di=je(K?K.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof T[0]||!T[0].startsWith("/"))&&(T=[]),Di=this.currentUrlTree.root}return Bt(Di,T,Rr,wn??null)}navigateByUrl(T,P={skipLocationChange:!1}){const K=le(T)?T:this.parseUrl(T),se=this.urlHandlingStrategy.merge(K,this.rawUrlTree);return this.scheduleNavigation(se,ir,null,P)}navigate(T,P={skipLocationChange:!1}){return function li(D){for(let k=0;k<D.length;k++)if(null==D[k])throw new p.wOt(4008,!1)}(T),this.navigateByUrl(this.createUrlTree(T,P),P)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let P;try{P=this.urlSerializer.parse(T)}catch(K){P=this.malformedUriErrorHandler(K,this.urlSerializer,T)}return P}isActive(T,P){let K;if(K=!0===P?{...Ji}:!1===P?{...Fr}:P,le(T))return Ar(this.currentUrlTree,T,K);const se=this.parseUrl(T);return Ar(this.currentUrlTree,se,K)}removeEmptyProps(T){return Object.keys(T).reduce((P,K)=>{const se=T[K];return null!=se&&(P[K]=se),P},{})}scheduleNavigation(T,P,K,se,xe){if(this.disposed)return Promise.resolve(!1);let Dt,wt,wn;xe?(Dt=xe.resolve,wt=xe.reject,wn=xe.promise):wn=new Promise((Di,si)=>{Dt=Di,wt=si});const Rr=this.pendingTasks.add();return gr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Rr))}),this.navigationTransitions.handleNavigationRequest({source:P,restoredState:K,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:T,extras:se,resolve:Dt,reject:wt,promise:wn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),wn.catch(Di=>Promise.reject(Di))}setBrowserUrl(T,P){const K=this.urlSerializer.serialize(T);if(this.location.isCurrentPathEqualTo(K)||P.extras.replaceUrl){const xe={...P.extras.state,...this.generateNgRouterState(P.id,this.browserPageId)};this.location.replaceState(K,"",xe)}else{const se={...P.extras.state,...this.generateNgRouterState(P.id,this.browserPageId+1)};this.location.go(K,"",se)}}restoreHistory(T,P=!1){if("computed"===this.canceledNavigationResolution){const se=this.currentPageId-this.browserPageId;0!==se?this.location.historyGo(se):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===se&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,P){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:P}:{navigationId:T}}static{this.\u0275fac=function(P){return new(P||D)}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();function es(D){return!(D instanceof Ur||D instanceof Hs)}let ba=(()=>{class D{constructor(T,P,K,se,xe,Dt){this.router=T,this.route=P,this.tabIndexAttribute=K,this.renderer=se,this.el=xe,this.locationStrategy=Dt,this.href=null,this.commands=null,this.onChanges=new ht.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const wt=xe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===wt||"area"===wt,this.isAnchorElement?this.subscription=T.events.subscribe(wn=>{wn instanceof Vn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",T)}ngOnChanges(T){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(T,P,K,se,xe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==T||P||K||se||xe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const T=null===this.href?null:(0,p.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",T)}applyAttributeValue(T,P){const K=this.renderer,se=this.el.nativeElement;null!==P?K.setAttribute(se,T,P):K.removeAttribute(se,T)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(P){return new(P||D)(p.rXU(ci),p.rXU(pi),p.kS0("tabindex"),p.rXU(p.sFG),p.rXU(p.aKT),p.rXU(Et.hb))}}static{this.\u0275dir=p.FsC({type:D,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(P,K){1&P&&p.bIt("click",function(xe){return K.onClick(xe.button,xe.ctrlKey,xe.shiftKey,xe.altKey,xe.metaKey)}),2&P&&p.BMQ("target",K.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.L39],skipLocationChange:["skipLocationChange","skipLocationChange",p.L39],replaceUrl:["replaceUrl","replaceUrl",p.L39],routerLink:"routerLink"},standalone:!0,features:[p.GFd,p.OA$]})}}return D})(),Mn=(()=>{class D{get isActive(){return this._isActive}constructor(T,P,K,se,xe){this.router=T,this.element=P,this.renderer=K,this.cdr=se,this.link=xe,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.bkB,this.routerEventsSubscription=T.events.subscribe(Dt=>{Dt instanceof Vn&&this.update()})}ngAfterContentInit(){(0,Y.of)(this.links.changes,(0,Y.of)(null)).pipe((0,Ye.U)()).subscribe(T=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const T=[...this.links.toArray(),this.link].filter(P=>!!P).map(P=>P.onChanges);this.linkInputChangesSubscription=(0,oe.H)(T).pipe((0,Ye.U)()).subscribe(P=>{this._isActive!==this.isLinkActive(this.router)(P)&&this.update()})}set routerLinkActive(T){const P=Array.isArray(T)?T:T.split(" ");this.classes=P.filter(K=>!!K)}ngOnChanges(T){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const T=this.hasActiveLinks();this._isActive!==T&&(this._isActive=T,this.cdr.markForCheck(),this.classes.forEach(P=>{T?this.renderer.addClass(this.element.nativeElement,P):this.renderer.removeClass(this.element.nativeElement,P)}),T&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(T))})}isLinkActive(T){const P=function No(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return K=>!!K.urlTree&&T.isActive(K.urlTree,P)}hasActiveLinks(){const T=this.isLinkActive(this.router);return this.link&&T(this.link)||this.links.some(T)}static{this.\u0275fac=function(P){return new(P||D)(p.rXU(ci),p.rXU(p.aKT),p.rXU(p.sFG),p.rXU(p.gRc),p.rXU(ba,8))}}static{this.\u0275dir=p.FsC({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(P,K,se){if(1&P&&p.wni(se,ba,5),2&P){let xe;p.mGM(xe=p.lsd())&&(K.links=xe)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[p.OA$]})}}return D})();class yo{}let rr=(()=>{class D{constructor(T,P,K,se,xe){this.router=T,this.injector=K,this.preloadingStrategy=se,this.loader=xe}setUpPreloading(){this.subscription=this.router.events.pipe((0,de.p)(T=>T instanceof Vn),(0,Je.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,P){const K=[];for(const se of P){se.providers&&!se._injector&&(se._injector=(0,p.Ol2)(se.providers,T,`Route: ${se.path}`));const xe=se._injector??T,Dt=se._loadedInjector??xe;(se.loadChildren&&!se._loadedRoutes&&void 0===se.canLoad||se.loadComponent&&!se._loadedComponent)&&K.push(this.preloadConfig(xe,se)),(se.children||se._loadedRoutes)&&K.push(this.processRoutes(Dt,se.children??se._loadedRoutes))}return(0,oe.H)(K).pipe((0,Ye.U)())}preloadConfig(T,P){return this.preloadingStrategy.preload(P,()=>{let K;K=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(T,P):(0,Y.of)(null);const se=K.pipe((0,Ue.Z)(xe=>null===xe?(0,Y.of)(void 0):(P._loadedRoutes=xe.routes,P._loadedInjector=xe.injector,this.processRoutes(xe.injector??T,xe.routes))));if(P.loadComponent&&!P._loadedComponent){const xe=this.loader.loadComponent(P);return(0,oe.H)([se,xe]).pipe((0,Ye.U)())}return se})}static{this.\u0275fac=function(P){return new(P||D)(p.KVO(ci),p.KVO(p.Ql9),p.KVO(p.uvJ),p.KVO(yo),p.KVO(X))}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();const Qn=new p.nKC("");let Ir=(()=>{class D{constructor(T,P,K,se,xe={}){this.urlSerializer=T,this.transitions=P,this.viewportScroller=K,this.zone=se,this.options=xe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},xe.scrollPositionRestoration=xe.scrollPositionRestoration||"disabled",xe.anchorScrolling=xe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Xe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Vn?(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment)):T instanceof wi&&0===T.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Rs&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Rs(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(P){p.QTQ()}}static{this.\u0275prov=p.jDH({token:D,factory:D.\u0275fac})}}return D})();function Ai(D,k){return{\u0275kind:D,\u0275providers:k}}function Fi(){const D=(0,p.WQX)(p.zZn);return k=>{const T=D.get(p.o8S);if(k!==T.components[0])return;const P=D.get(ci),K=D.get(vo);1===D.get(ks)&&P.initialNavigation(),D.get(Ci,null,p.$GK.Optional)?.setUpPreloading(),D.get(Qn,null,p.$GK.Optional)?.init(),P.resetRootComponentType(T.componentTypes[0]),K.closed||(K.next(),K.complete(),K.unsubscribe())}}const vo=new p.nKC("",{factory:()=>new ht.B}),ks=new p.nKC("",{providedIn:"root",factory:()=>1}),Ci=new p.nKC("");function Qc(D){return Ai(0,[{provide:Ci,useExisting:rr},{provide:yo,useExisting:D}])}const Ka=new p.nKC("ROUTER_FORROOT_GUARD"),mc=[Et.aZ,{provide:Ln,useClass:oi},ci,$s,{provide:pi,useFactory:function lo(D){return D.routerState.root},deps:[ci]},X,[]];function Fs(){return new p.NEm("Router",ci)}let Gt=(()=>{class D{constructor(T){}static forRoot(T,P){return{ngModule:D,providers:[mc,[],{provide:V,multi:!0,useValue:T},{provide:Ka,useFactory:$r,deps:[[ci,new p.Xx1,new p.kdw]]},{provide:yn,useValue:P||{}},P?.useHash?{provide:Et.hb,useClass:Et.fw}:{provide:Et.hb,useClass:Et.Sm},{provide:Qn,useFactory:()=>{const D=(0,p.WQX)(Et.Xr),k=(0,p.WQX)(p.SKi),T=(0,p.WQX)(yn),P=(0,p.WQX)(B),K=(0,p.WQX)(Ln);return T.scrollOffset&&D.setOffset(T.scrollOffset),new Ir(K,P,D,k,T)}},P?.preloadingStrategy?Qc(P.preloadingStrategy).\u0275providers:[],{provide:p.NEm,multi:!0,useFactory:Fs},P?.initialNavigation?Xc(P):[],P?.bindToComponentInputs?Ai(8,[xi,{provide:Or,useExisting:xi}]).\u0275providers:[],[{provide:ko,useFactory:Fi},{provide:p.iLQ,multi:!0,useExisting:ko}]]}}static forChild(T){return{ngModule:D,providers:[{provide:V,multi:!0,useValue:T}]}}static{this.\u0275fac=function(P){return new(P||D)(p.KVO(Ka,8))}}static{this.\u0275mod=p.$C({type:D})}static{this.\u0275inj=p.G2t({})}}return D})();function $r(D){return"guarded"}function Xc(D){return["disabled"===D.initialNavigation?Ai(3,[{provide:p.hnV,multi:!0,useFactory:()=>{const k=(0,p.WQX)(ci);return()=>{k.setUpLocationChangeListener()}}},{provide:ks,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Ai(2,[{provide:ks,useValue:0},{provide:p.hnV,multi:!0,deps:[p.zZn],useFactory:k=>{const T=k.get(Et.hj,Promise.resolve());return()=>T.then(()=>new Promise(P=>{const K=k.get(ci),se=k.get(vo);gr(K,()=>{P(!0)}),k.get(B).afterPreactivation=()=>(P(!0),se.closed?(0,Y.of)(void 0):se),K.initialNavigation()}))}}]).\u0275providers:[]]}const ko=new p.nKC("")},3345:(nn,tt,j)=>{j.d(tt,{A:()=>Ot});var p=j(1076),J=j(1362),oe=j(7852),Y=j(8041);class Oe{constructor(yt,St){this._delegate=yt,this.firebase=St,(0,oe._addComponent)(yt,new J.uA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService(yt,St=oe._DEFAULT_ENTRY_NAME){var Yt;this._delegate.checkDestroyed();const Rt=this._delegate.container.getProvider(yt);return!Rt.isInitialized()&&"EXPLICIT"===(null===(Yt=Rt.getComponent())||void 0===Yt?void 0:Yt.instantiationMode)&&Rt.initialize(),Rt.getImmediate({identifier:St})}_removeServiceInstance(yt,St=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(St)}_addComponent(yt){(0,oe._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,oe._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new p.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function De(){const Et=function Te(Et){const yt={},St={__esModule:!0,initializeApp:function de(We,It={}){const Ht=oe.initializeApp(We,It);if((0,p.gR)(yt,Ht.name))return yt[Ht.name];const pt=new Et(Ht,St);return yt[Ht.name]=pt,pt},app:Rt,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function Ne(We){const It=We.name,Ht=It.replace("-compat","");if(oe._registerComponent(We)&&"PUBLIC"===We.type){const pt=(ln=Rt())=>{if("function"!=typeof ln[Ht])throw ve.create("invalid-app-argument",{appName:It});return ln[Ht]()};void 0!==We.serviceProps&&(0,p.zw)(pt,We.serviceProps),St[Ht]=pt,Et.prototype[Ht]=function(...ln){return this._getService.bind(this,It).apply(this,We.multipleInstances?ln:[])}}return"PUBLIC"===We.type?St[Ht]:null},removeApp:function Yt(We){delete yt[We]},useAsService:function Je(We,It){return"serverAuth"===It?null:It},modularAPIs:oe}};function Rt(We){if(!(0,p.gR)(yt,We=We||oe._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:We});return yt[We]}return St.default=St,Object.defineProperty(St,"apps",{get:function Ue(){return Object.keys(yt).map(We=>yt[We])}}),Rt.App=Et,St}(Oe);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function yt(St){(0,p.zw)(Et,St)},createSubscribe:p.tD,ErrorFactory:p.FA,deepExtend:p.zw}),Et}(),ge=new Y.Vy("@firebase/app-compat");try{const Et=(0,p.mS)();if(void 0!==Et.firebase){ge.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const yt=Et.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&ge.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Ot=ce;!function ht(Et){(0,oe.registerVersion)("@firebase/app-compat","0.2.43",Et)}()},7852:(nn,tt,j)=>{j.r(tt),j.d(tt,{FirebaseError:()=>Y.g,SDK_VERSION:()=>kt,_DEFAULT_ENTRY_NAME:()=>Tt,_addComponent:()=>Ln,_addOrOverwriteComponent:()=>oi,_apps:()=>En,_clearComponents:()=>rn,_components:()=>Zt,_getProvider:()=>xn,_isFirebaseApp:()=>ri,_isFirebaseServerApp:()=>$t,_registerComponent:()=>et,_removeServiceInstance:()=>_n,_serverApps:()=>Tn,deleteApp:()=>At,getApp:()=>ar,getApps:()=>hr,initializeApp:()=>sn,initializeServerApp:()=>Hn,onLog:()=>N,registerVersion:()=>O,setLogLevel:()=>W});var p=j(467),J=j(1362),oe=j(8041),Y=j(1076);const Oe=(gt,rt)=>rt.some(xt=>gt instanceof xt);let Le,ve;const ce=new WeakMap,ge=new WeakMap,Pe=new WeakMap,$e=new WeakMap,ht=new WeakMap;let yt={get(gt,rt,xt){if(gt instanceof IDBTransaction){if("done"===rt)return ge.get(gt);if("objectStoreNames"===rt)return gt.objectStoreNames||Pe.get(gt);if("store"===rt)return xt.objectStoreNames[1]?void 0:xt.objectStore(xt.objectStoreNames[0])}return de(gt[rt])},set:(gt,rt,xt)=>(gt[rt]=xt,!0),has:(gt,rt)=>gt instanceof IDBTransaction&&("done"===rt||"store"===rt)||rt in gt};function Rt(gt){return"function"==typeof gt?function Yt(gt){return gt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(gt)?function(...rt){return gt.apply(Ue(this),rt),de(ce.get(this))}:function(...rt){return de(gt.apply(Ue(this),rt))}:function(rt,...xt){const zt=gt.call(Ue(this),rt,...xt);return Pe.set(zt,rt.sort?rt.sort():[rt]),de(zt)}}(gt):(gt instanceof IDBTransaction&&function Et(gt){if(ge.has(gt))return;const rt=new Promise((xt,zt)=>{const Fn=()=>{gt.removeEventListener("complete",pn),gt.removeEventListener("error",In),gt.removeEventListener("abort",In)},pn=()=>{xt(),Fn()},In=()=>{zt(gt.error||new DOMException("AbortError","AbortError")),Fn()};gt.addEventListener("complete",pn),gt.addEventListener("error",In),gt.addEventListener("abort",In)});ge.set(gt,rt)}(gt),Oe(gt,function Te(){return Le||(Le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(gt,yt):gt)}function de(gt){if(gt instanceof IDBRequest)return function Ot(gt){const rt=new Promise((xt,zt)=>{const Fn=()=>{gt.removeEventListener("success",pn),gt.removeEventListener("error",In)},pn=()=>{xt(de(gt.result)),Fn()},In=()=>{zt(gt.error),Fn()};gt.addEventListener("success",pn),gt.addEventListener("error",In)});return rt.then(xt=>{xt instanceof IDBCursor&&ce.set(xt,gt)}).catch(()=>{}),ht.set(rt,gt),rt}(gt);if($e.has(gt))return $e.get(gt);const rt=Rt(gt);return rt!==gt&&($e.set(gt,rt),ht.set(rt,gt)),rt}const Ue=gt=>ht.get(gt),We=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],Ht=new Map;function pt(gt,rt){if(!(gt instanceof IDBDatabase)||rt in gt||"string"!=typeof rt)return;if(Ht.get(rt))return Ht.get(rt);const xt=rt.replace(/FromIndex$/,""),zt=rt!==xt,Fn=It.includes(xt);if(!(xt in(zt?IDBIndex:IDBObjectStore).prototype)||!Fn&&!We.includes(xt))return;const pn=function(){var In=(0,p.A)(function*(ir,...dr){const Xe=this.transaction(ir,Fn?"readwrite":"readonly");let Vn=Xe.store;return zt&&(Vn=Vn.index(dr.shift())),(yield Promise.all([Vn[xt](...dr),Fn&&Xe.done]))[0]});return function(dr){return In.apply(this,arguments)}}();return Ht.set(rt,pn),pn}!function St(gt){yt=gt(yt)}(gt=>({...gt,get:(rt,xt,zt)=>pt(rt,xt)||gt.get(rt,xt,zt),has:(rt,xt)=>!!pt(rt,xt)||gt.has(rt,xt)}));class ln{constructor(rt){this.container=rt}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function $n(gt){const rt=gt.getComponent();return"VERSION"===rt?.type}(xt)){const zt=xt.getImmediate();return`${zt.library}/${zt.version}`}return null}).filter(xt=>xt).join(" ")}}const br="@firebase/app",Dr="0.10.13",mr=new oe.Vy("@firebase/app"),Tt="[DEFAULT]",on={[br]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},En=new Map,Tn=new Map,Zt=new Map;function Ln(gt,rt){try{gt.container.addComponent(rt)}catch(xt){mr.debug(`Component ${rt.name} failed to register with FirebaseApp ${gt.name}`,xt)}}function oi(gt,rt){gt.container.addOrOverwriteComponent(rt)}function et(gt){const rt=gt.name;if(Zt.has(rt))return mr.debug(`There were multiple attempts to register component ${rt}.`),!1;Zt.set(rt,gt);for(const xt of En.values())Ln(xt,gt);for(const xt of Tn.values())Ln(xt,gt);return!0}function xn(gt,rt){const xt=gt.container.getProvider("heartbeat").getImmediate({optional:!0});return xt&&xt.triggerHeartbeat(),gt.container.getProvider(rt)}function _n(gt,rt,xt=Tt){xn(gt,rt).clearInstance(xt)}function ri(gt){return void 0!==gt.options}function $t(gt){return void 0!==gt.settings}function rn(){Zt.clear()}const Fe=new Y.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ie{constructor(rt,xt,zt){this._isDeleted=!1,this._options=Object.assign({},rt),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=zt,this.container.addComponent(new J.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this.checkDestroyed(),this._automaticDataCollectionEnabled=rt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(rt){this._isDeleted=rt}checkDestroyed(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}class Re extends ie{constructor(rt,xt,zt,Fn){const pn=void 0!==xt.automaticDataCollectionEnabled&&xt.automaticDataCollectionEnabled,In={name:zt,automaticDataCollectionEnabled:pn};super(void 0!==rt.apiKey?rt:rt.options,In,Fn),this._serverConfig=Object.assign({automaticDataCollectionEnabled:pn},xt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,xt.releaseOnDeref=void 0,O(br,Dr,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(rt){this.isDeleted||(this._refCount++,void 0!==rt&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(rt,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){At(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fe.create("server-app-deleted")}}const kt="10.14.1";function sn(gt,rt={}){let xt=gt;"object"!=typeof rt&&(rt={name:rt});const zt=Object.assign({name:Tt,automaticDataCollectionEnabled:!1},rt),Fn=zt.name;if("string"!=typeof Fn||!Fn)throw Fe.create("bad-app-name",{appName:String(Fn)});if(xt||(xt=(0,Y.T9)()),!xt)throw Fe.create("no-options");const pn=En.get(Fn);if(pn){if((0,Y.bD)(xt,pn.options)&&(0,Y.bD)(zt,pn.config))return pn;throw Fe.create("duplicate-app",{appName:Fn})}const In=new J.h1(Fn);for(const dr of Zt.values())In.addComponent(dr);const ir=new ie(xt,zt,In);return En.set(Fn,ir),ir}function Hn(gt,rt){if((0,Y.Bd)()&&!(0,Y.p7)())throw Fe.create("invalid-server-app-environment");let xt;void 0===rt.automaticDataCollectionEnabled&&(rt.automaticDataCollectionEnabled=!1),xt=ri(gt)?gt.options:gt;const zt=Object.assign(Object.assign({},rt),xt);if(void 0!==zt.releaseOnDeref&&delete zt.releaseOnDeref,void 0!==rt.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Fe.create("finalization-registry-not-supported",{});const pn=""+(Xe=JSON.stringify(zt),[...Xe].reduce((Vn,Gr)=>Math.imul(31,Vn)+Gr.charCodeAt(0)|0,0)),In=Tn.get(pn);var Xe;if(In)return In.incRefCount(rt.releaseOnDeref),In;const ir=new J.h1(pn);for(const Xe of Zt.values())ir.addComponent(Xe);const dr=new Re(xt,rt,pn,ir);return Tn.set(pn,dr),dr}function ar(gt=Tt){const rt=En.get(gt);if(!rt&&gt===Tt&&(0,Y.T9)())return sn();if(!rt)throw Fe.create("no-app",{appName:gt});return rt}function hr(){return Array.from(En.values())}function At(gt){return fe.apply(this,arguments)}function fe(){return(fe=(0,p.A)(function*(gt){let rt=!1;const xt=gt.name;En.has(xt)?(rt=!0,En.delete(xt)):Tn.has(xt)&&gt.decRefCount()<=0&&(Tn.delete(xt),rt=!0),rt&&(yield Promise.all(gt.container.getProviders().map(zt=>zt.delete())),gt.isDeleted=!0)})).apply(this,arguments)}function O(gt,rt,xt){var zt;let Fn=null!==(zt=on[gt])&&void 0!==zt?zt:gt;xt&&(Fn+=`-${xt}`);const pn=Fn.match(/\s|\//),In=rt.match(/\s|\//);if(pn||In){const ir=[`Unable to register library "${Fn}" with version "${rt}":`];return pn&&ir.push(`library name "${Fn}" contains illegal characters (whitespace or "/")`),pn&&In&&ir.push("and"),In&&ir.push(`version name "${rt}" contains illegal characters (whitespace or "/")`),void mr.warn(ir.join(" "))}et(new J.uA(`${Fn}-version`,()=>({library:Fn,version:rt}),"VERSION"))}function N(gt,rt){if(null!==gt&&"function"!=typeof gt)throw Fe.create("invalid-log-argument");(0,oe.Ey)(gt,rt)}function W(gt){(0,oe.He)(gt)}const _e="firebase-heartbeat-database",Ae=1,ue="firebase-heartbeat-store";let me=null;function le(){return me||(me=function Ne(gt,rt,{blocked:xt,upgrade:zt,blocking:Fn,terminated:pn}={}){const In=indexedDB.open(gt,rt),ir=de(In);return zt&&In.addEventListener("upgradeneeded",dr=>{zt(de(In.result),dr.oldVersion,dr.newVersion,de(In.transaction),dr)}),xt&&In.addEventListener("blocked",dr=>xt(dr.oldVersion,dr.newVersion,dr)),ir.then(dr=>{pn&&dr.addEventListener("close",()=>pn()),Fn&&dr.addEventListener("versionchange",Xe=>Fn(Xe.oldVersion,Xe.newVersion,Xe))}).catch(()=>{}),ir}(_e,Ae,{upgrade:(gt,rt)=>{if(0===rt)try{gt.createObjectStore(ue)}catch(xt){console.warn(xt)}}}).catch(gt=>{throw Fe.create("idb-open",{originalErrorMessage:gt.message})})),me}function je(){return(je=(0,p.A)(function*(gt){try{const xt=(yield le()).transaction(ue),zt=yield xt.objectStore(ue).get(Ie(gt));return yield xt.done,zt}catch(rt){if(rt instanceof Y.g)mr.warn(rt.message);else{const xt=Fe.create("idb-get",{originalErrorMessage:rt?.message});mr.warn(xt.message)}}})).apply(this,arguments)}function Bt(gt,rt){return pe.apply(this,arguments)}function pe(){return(pe=(0,p.A)(function*(gt,rt){try{const zt=(yield le()).transaction(ue,"readwrite");yield zt.objectStore(ue).put(rt,Ie(gt)),yield zt.done}catch(xt){if(xt instanceof Y.g)mr.warn(xt.message);else{const zt=Fe.create("idb-set",{originalErrorMessage:xt?.message});mr.warn(zt.message)}}})).apply(this,arguments)}function Ie(gt){return`${gt.name}!${gt.options.appId}`}class jt{constructor(rt){this.container=rt,this._heartbeatsCache=null;const xt=this.container.getProvider("app").getImmediate();this._storage=new qn(xt),this._heartbeatsCachePromise=this._storage.read().then(zt=>(this._heartbeatsCache=zt,zt))}triggerHeartbeat(){var rt=this;return(0,p.A)(function*(){var xt,zt;try{const pn=rt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=an();return null==(null===(xt=rt._heartbeatsCache)||void 0===xt?void 0:xt.heartbeats)&&(rt._heartbeatsCache=yield rt._heartbeatsCachePromise,null==(null===(zt=rt._heartbeatsCache)||void 0===zt?void 0:zt.heartbeats))||rt._heartbeatsCache.lastSentHeartbeatDate===In||rt._heartbeatsCache.heartbeats.some(ir=>ir.date===In)?void 0:(rt._heartbeatsCache.heartbeats.push({date:In,agent:pn}),rt._heartbeatsCache.heartbeats=rt._heartbeatsCache.heartbeats.filter(ir=>{const dr=new Date(ir.date).valueOf();return Date.now()-dr<=2592e6}),rt._storage.overwrite(rt._heartbeatsCache))}catch(Fn){mr.warn(Fn)}})()}getHeartbeatsHeader(){var rt=this;return(0,p.A)(function*(){var xt;try{if(null===rt._heartbeatsCache&&(yield rt._heartbeatsCachePromise),null==(null===(xt=rt._heartbeatsCache)||void 0===xt?void 0:xt.heartbeats)||0===rt._heartbeatsCache.heartbeats.length)return"";const zt=an(),{heartbeatsToSend:Fn,unsentEntries:pn}=function Qt(gt,rt=1024){const xt=[];let zt=gt.slice();for(const Fn of gt){const pn=xt.find(In=>In.agent===Fn.agent);if(pn){if(pn.dates.push(Fn.date),tn(xt)>rt){pn.dates.pop();break}}else if(xt.push({agent:Fn.agent,dates:[Fn.date]}),tn(xt)>rt){xt.pop();break}zt=zt.slice(1)}return{heartbeatsToSend:xt,unsentEntries:zt}}(rt._heartbeatsCache.heartbeats),In=(0,Y.Uj)(JSON.stringify({version:2,heartbeats:Fn}));return rt._heartbeatsCache.lastSentHeartbeatDate=zt,pn.length>0?(rt._heartbeatsCache.heartbeats=pn,yield rt._storage.overwrite(rt._heartbeatsCache)):(rt._heartbeatsCache.heartbeats=[],rt._storage.overwrite(rt._heartbeatsCache)),In}catch(zt){return mr.warn(zt),""}})()}}function an(){return(new Date).toISOString().substring(0,10)}class qn{constructor(rt){this.app=rt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.A)(function*(){return!!(0,Y.zW)()&&(0,Y.eX)().then(()=>!0).catch(()=>!1)})()}read(){var rt=this;return(0,p.A)(function*(){if(yield rt._canUseIndexedDBPromise){const zt=yield function be(gt){return je.apply(this,arguments)}(rt.app);return zt?.heartbeats?zt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(rt){var xt=this;return(0,p.A)(function*(){var zt;if(yield xt._canUseIndexedDBPromise){const pn=yield xt.read();return Bt(xt.app,{lastSentHeartbeatDate:null!==(zt=rt.lastSentHeartbeatDate)&&void 0!==zt?zt:pn.lastSentHeartbeatDate,heartbeats:rt.heartbeats})}})()}add(rt){var xt=this;return(0,p.A)(function*(){var zt;if(yield xt._canUseIndexedDBPromise){const pn=yield xt.read();return Bt(xt.app,{lastSentHeartbeatDate:null!==(zt=rt.lastSentHeartbeatDate)&&void 0!==zt?zt:pn.lastSentHeartbeatDate,heartbeats:[...pn.heartbeats,...rt.heartbeats]})}})()}}function tn(gt){return(0,Y.Uj)(JSON.stringify({version:2,heartbeats:gt})).length}!function hi(gt){et(new J.uA("platform-logger",rt=>new ln(rt),"PRIVATE")),et(new J.uA("heartbeat",rt=>new jt(rt),"PRIVATE")),O(br,Dr,gt),O(br,Dr,"esm2017"),O("fire-js","")}("")},1362:(nn,tt,j)=>{j.d(tt,{h1:()=>Te,uA:()=>oe});var p=j(467),J=j(1076);class oe{constructor(ce,ge,Pe){this.name=ce,this.instanceFactory=ge,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const Y="[DEFAULT]";class Oe{constructor(ce,ge){this.name=ce,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const ge=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(ge)){const Pe=new J.cY;if(this.instancesDeferred.set(ge,Pe),this.isInitialized(ge)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:ge});$e&&Pe.resolve($e)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(ce){var ge;const Pe=this.normalizeInstanceIdentifier(ce?.identifier),$e=null!==(ge=ce?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(ht){if($e)return null;throw ht}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function ve(De){return"EAGER"===De.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[ge,Pe]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(ge);try{const ht=this.getOrInitializeService({instanceIdentifier:$e});Pe.resolve(ht)}catch{}}}}clearInstance(ce=Y){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,p.A)(function*(){const ge=Array.from(ce.instances.values());yield Promise.all([...ge.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...ge.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=Y){return this.instances.has(ce)}getOptions(ce=Y){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:ge={}}=ce,Pe=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Pe,options:ge});for(const[ht,Ot]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(ht)&&Ot.resolve($e);return $e}onInit(ce,ge){var Pe;const $e=this.normalizeInstanceIdentifier(ge),ht=null!==(Pe=this.onInitCallbacks.get($e))&&void 0!==Pe?Pe:new Set;ht.add(ce),this.onInitCallbacks.set($e,ht);const Ot=this.instances.get($e);return Ot&&ce(Ot,$e),()=>{ht.delete(ce)}}invokeOnInitCallbacks(ce,ge){const Pe=this.onInitCallbacks.get(ge);if(Pe)for(const $e of Pe)try{$e(ce,ge)}catch{}}getOrInitializeService({instanceIdentifier:ce,options:ge={}}){let Pe=this.instances.get(ce);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(De=ce,De===Y?void 0:De),options:ge}),this.instances.set(ce,Pe),this.instancesOptions.set(ce,ge),this.invokeOnInitCallbacks(Pe,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,Pe)}catch{}var De;return Pe||null}normalizeInstanceIdentifier(ce=Y){return this.component?this.component.multipleInstances?ce:Y:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Te{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const ge=this.getProvider(ce.name);if(ge.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);ge.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const ge=new Oe(ce,this);return this.providers.set(ce,ge),ge}getProviders(){return Array.from(this.providers.values())}}},8041:(nn,tt,j)=>{j.d(tt,{$b:()=>J,Ey:()=>De,He:()=>Te,Vy:()=>ve});const p=[];var J=function(ce){return ce[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",ce}(J||{});const oe={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Y=J.INFO,Oe={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Le=(ce,ge,...Pe)=>{if(ge<ce.logLevel)return;const $e=(new Date).toISOString(),ht=Oe[ge];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[ht](`[${$e}]  ${ce.name}:`,...Pe)};class ve{constructor(ge){this.name=ge,this._logLevel=Y,this._logHandler=Le,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in J))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?oe[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...ge),this._logHandler(this,J.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...ge),this._logHandler(this,J.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,J.INFO,...ge),this._logHandler(this,J.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,J.WARN,...ge),this._logHandler(this,J.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...ge),this._logHandler(this,J.ERROR,...ge)}}function Te(ce){p.forEach(ge=>{ge.setLogLevel(ce)})}function De(ce,ge){for(const Pe of p){let $e=null;ge&&ge.level&&($e=oe[ge.level]),Pe.userLogHandler=null===ce?null:(ht,Ot,...Et)=>{const yt=Et.map(St=>{if(null==St)return null;if("string"==typeof St)return St;if("number"==typeof St||"boolean"==typeof St)return St.toString();if(St instanceof Error)return St.message;try{return JSON.stringify(St)}catch{return null}}).filter(St=>St).join(" ");Ot>=($e??ht.logLevel)&&ce({level:J[Ot].toLowerCase(),message:yt,args:Et,type:ht.name})}}}},7935:(nn,tt,j)=>{j.d(tt,{A:()=>p.A});var p=j(3345);p.A.registerVersion("firebase","10.14.1","app-compat")},7955:(nn,tt,j)=>{var p=j(467),J=j(3345),oe=j(7852),Y=j(1076),Oe=j(8041),Le=j(1635),ve=j(1362);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ot=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Et=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new Y.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Yt=new Oe.Vy("@firebase/auth");function de(v,...u){Yt.logLevel<=Oe.$b.ERROR&&Yt.error(`Auth (${oe.SDK_VERSION}): ${v}`,...u)}function Ue(v,...u){throw Ht(v,...u)}function Ne(v,...u){return Ht(v,...u)}function Je(v,u,h){const I=Object.assign(Object.assign({},Et()),{[u]:h});return new Y.FA("auth","Firebase",I).create(u,{appName:v.name})}function We(v){return Je(v,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function It(v,u,h){if(!(u instanceof h))throw h.name!==u.constructor.name&&Ue(v,"argument-error"),Je(v,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(v,...u){if("string"!=typeof v){const h=u[0],I=[...u.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(h,...I)}return yt.create(v,...u)}function pt(v,u,...h){if(!v)throw Ht(u,...h)}function ln(v){const u="INTERNAL ASSERTION FAILED: "+v;throw de(u),new Error(u)}function $n(v,u){v||ln(u)}function br(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Dr(){return"http:"===mr()||"https:"===mr()}function mr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class gn{constructor(u,h){this.shortDelay=u,this.longDelay=h,$n(h>u,"Short delay should be less than long delay!"),this.isMobile=(0,Y.jZ)()||(0,Y.lV)()}get(){return function Rn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dr()||(0,Y.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wt(v,u){$n(v.emulator,"Emulator should always be set here");const{url:h}=v.emulator;return u?`${h}${u.startsWith("/")?u.slice(1):u}`:h}class Ve{static initialize(u,h,I){this.fetchImpl=u,h&&(this.headersImpl=h),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ut=new gn(3e4,6e4);function ze(v,u){return v.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:v.tenantId}):u}function Ee(v,u,h,I){return lt.apply(this,arguments)}function lt(){return(lt=(0,p.A)(function*(v,u,h,I,H={}){return fn(v,H,(0,p.A)(function*(){let te={},Be={};I&&("GET"===u?Be=I:te={body:JSON.stringify(I)});const at=(0,Y.Am)(Object.assign({key:v.config.apiKey},Be)).slice(1),Mt=yield v._getAdditionalHeaders();Mt["Content-Type"]="application/json",v.languageCode&&(Mt["X-Firebase-Locale"]=v.languageCode);const vn=Object.assign({method:u,headers:Mt},te);return(0,Y.c1)()||(vn.referrerPolicy="no-referrer"),Ve.fetch()(Pn(v,v.config.apiHost,h,at),vn)}))})).apply(this,arguments)}function fn(v,u,h){return zn.apply(this,arguments)}function zn(){return(zn=(0,p.A)(function*(v,u,h){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},Ye),u);try{const H=new Tr(v),te=yield Promise.race([h(),H.promise]);H.clearNetworkTimeout();const Be=yield te.json();if("needConfirmation"in Be)throw On(v,"account-exists-with-different-credential",Be);if(te.ok&&!("errorMessage"in Be))return Be;{const at=te.ok?Be.errorMessage:Be.error.message,[Mt,vn]=at.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Mt)throw On(v,"credential-already-in-use",Be);if("EMAIL_EXISTS"===Mt)throw On(v,"email-already-in-use",Be);if("USER_DISABLED"===Mt)throw On(v,"user-disabled",Be);const Xn=I[Mt]||Mt.toLowerCase().replace(/[_\s]+/g,"-");if(vn)throw Je(v,Xn,vn);Ue(v,Xn)}}catch(H){if(H instanceof Y.g)throw H;Ue(v,"network-request-failed",{message:String(H)})}})).apply(this,arguments)}function dn(v,u,h,I){return en.apply(this,arguments)}function en(){return(en=(0,p.A)(function*(v,u,h,I,H={}){const te=yield Ee(v,u,h,I,H);return"mfaPendingCredential"in te&&Ue(v,"multi-factor-auth-required",{_serverResponse:te}),te})).apply(this,arguments)}function Pn(v,u,h,I){const H=`${u}${h}?${I}`;return v.config.emulator?Wt(v.config,H):`${v.config.apiScheme}://${H}`}function Gn(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tr{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((h,I)=>{this.timer=setTimeout(()=>I(Ne(this.auth,"network-request-failed")),ut.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function On(v,u,h){const I={appName:v.name};h.email&&(I.email=h.email),h.phoneNumber&&(I.phoneNumber=h.phoneNumber);const H=Ne(v,u,I);return H.customData._tokenResponse=h,H}function Yn(v){return void 0!==v&&void 0!==v.getResponse}function Ar(v){return void 0!==v&&void 0!==v.enterprise}class Er{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===u)return Gn(h.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function ae(){return(ae=(0,p.A)(function*(v){return(yield Ee(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Me(v,u){return qe.apply(this,arguments)}function qe(){return(qe=(0,p.A)(function*(v,u){return Ee(v,"GET","/v2/recaptchaConfig",ze(v,u))})).apply(this,arguments)}function _t(){return(_t=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function on(){return(on=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function En(v,u){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Zt(v){if(v)try{const u=new Date(Number(v));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function et(){return(et=(0,p.A)(function*(v,u=!1){const h=(0,Y.Ku)(v),I=yield h.getIdToken(u),H=_n(I);pt(H&&H.exp&&H.auth_time&&H.iat,h.auth,"internal-error");const te="object"==typeof H.firebase?H.firebase:void 0,Be=te?.sign_in_provider;return{claims:H,token:I,authTime:Zt(xn(H.auth_time)),issuedAtTime:Zt(xn(H.iat)),expirationTime:Zt(xn(H.exp)),signInProvider:Be||null,signInSecondFactor:te?.sign_in_second_factor||null}})).apply(this,arguments)}function xn(v){return 1e3*Number(v)}function _n(v){const[u,h,I]=v.split(".");if(void 0===u||void 0===h||void 0===I)return de("JWT malformed, contained fewer than 3 sections"),null;try{const H=(0,Y.u)(h);return H?JSON.parse(H):(de("Failed to decode base64 JWT payload"),null)}catch(H){return de("Caught error parsing JWT payload as JSON",H?.toString()),null}}function ri(v){const u=_n(v);return pt(u,"internal-error"),pt(typeof u.exp<"u","internal-error"),pt(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function $t(v,u){return rn.apply(this,arguments)}function rn(){return(rn=(0,p.A)(function*(v,u,h=!1){if(h)return u;try{return yield u}catch(I){throw I instanceof Y.g&&function Ft({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class Fe{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var h;if(u){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const H=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,H)}}schedule(u=!1){var h=this;if(!this.isRunning)return;const I=this.getInterval(u);this.timerId=setTimeout((0,p.A)(function*(){yield h.iteration()}),I)}iteration(){var u=this;return(0,p.A)(function*(){try{yield u.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&u.schedule(!0))}u.schedule()})()}}class ie{constructor(u,h){this.createdAt=u,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zt(this.lastLoginAt),this.creationTime=Zt(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Re(v){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.A)(function*(v){var u;const h=v.auth,I=yield v.getIdToken(),H=yield $t(v,En(h,{idToken:I}));pt(H?.users.length,h,"internal-error");const te=H.users[0];v._notifyReloadListener(te);const Be=null!==(u=te.providerUserInfo)&&void 0!==u&&u.length?hr(te.providerUserInfo):[],at=function ar(v,u){return[...v.filter(I=>!u.some(H=>H.providerId===I.providerId)),...u]}(v.providerData,Be),Xn=!!v.isAnonymous&&!(v.email&&te.passwordHash||at?.length),Sn={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:at,metadata:new ie(te.createdAt,te.lastLoginAt),isAnonymous:Xn};Object.assign(v,Sn)})).apply(this,arguments)}function Hn(){return(Hn=(0,p.A)(function*(v){const u=(0,Y.Ku)(v);yield Re(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function hr(v){return v.map(u=>{var{providerId:h}=u,I=(0,Le.Tt)(u,["providerId"]);return{providerId:h,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function fe(){return(fe=(0,p.A)(function*(v,u){const h=yield fn(v,{},(0,p.A)(function*(){const I=(0,Y.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:H,apiKey:te}=v.config,Be=Pn(v,H,"/v1/token",`key=${te}`),at=yield v._getAdditionalHeaders();return at["Content-Type"]="application/x-www-form-urlencoded",Ve.fetch()(Be,{method:"POST",headers:at,body:I})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function N(){return(N=(0,p.A)(function*(v,u){return Ee(v,"POST","/v2/accounts:revokeToken",ze(v,u))})).apply(this,arguments)}class W{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){pt(u.idToken,"internal-error"),pt(typeof u.idToken<"u","internal-error"),pt(typeof u.refreshToken<"u","internal-error");const h="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):ri(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,h)}updateFromIdToken(u){pt(0!==u.length,"internal-error");const h=ri(u);this.updateTokensAndExpiration(u,null,h)}getToken(u){var h=this;return(0,p.A)(function*(I,H=!1){return H||!h.accessToken||h.isExpired?(pt(h.refreshToken,I,"user-token-expired"),h.refreshToken?(yield h.refresh(I,h.refreshToken),h.accessToken):null):h.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(u,h){var I=this;return(0,p.A)(function*(){const{accessToken:H,refreshToken:te,expiresIn:Be}=yield function At(v,u){return fe.apply(this,arguments)}(u,h);I.updateTokensAndExpiration(H,te,Number(Be))})()}updateTokensAndExpiration(u,h,I){this.refreshToken=h||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(u,h){const{refreshToken:I,accessToken:H,expirationTime:te}=h,Be=new W;return I&&(pt("string"==typeof I,"internal-error",{appName:u}),Be.refreshToken=I),H&&(pt("string"==typeof H,"internal-error",{appName:u}),Be.accessToken=H),te&&(pt("number"==typeof te,"internal-error",{appName:u}),Be.expirationTime=te),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new W,this.toJSON())}_performRefresh(){return ln("not implemented")}}function _e(v,u){pt("string"==typeof v||typeof v>"u","internal-error",{appName:u})}class Ae{constructor(u){var{uid:h,auth:I,stsTokenManager:H}=u,te=(0,Le.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=I,this.stsTokenManager=H,this.accessToken=H.accessToken,this.displayName=te.displayName||null,this.email=te.email||null,this.emailVerified=te.emailVerified||!1,this.phoneNumber=te.phoneNumber||null,this.photoURL=te.photoURL||null,this.isAnonymous=te.isAnonymous||!1,this.tenantId=te.tenantId||null,this.providerData=te.providerData?[...te.providerData]:[],this.metadata=new ie(te.createdAt||void 0,te.lastLoginAt||void 0)}getIdToken(u){var h=this;return(0,p.A)(function*(){const I=yield $t(h,h.stsTokenManager.getToken(h.auth,u));return pt(I,h.auth,"internal-error"),h.accessToken!==I&&(h.accessToken=I,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),I})()}getIdTokenResult(u){return function oi(v){return et.apply(this,arguments)}(this,u)}reload(){return function sn(v){return Hn.apply(this,arguments)}(this)}_assign(u){this!==u&&(pt(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(h=>Object.assign({},h)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const h=new Ae(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(u){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u){var h=this;return(0,p.A)(function*(I,H=!1){let te=!1;I.idToken&&I.idToken!==h.stsTokenManager.accessToken&&(h.stsTokenManager.updateFromServerResponse(I),te=!0),H&&(yield Re(h)),yield h.auth._persistUserIfCurrent(h),te&&h.auth._notifyListenersIfCurrent(h)}).apply(this,arguments)}delete(){var u=this;return(0,p.A)(function*(){if((0,oe._isFirebaseServerApp)(u.auth.app))return Promise.reject(We(u.auth));const h=yield u.getIdToken();return yield $t(u,function it(v,u){return _t.apply(this,arguments)}(u.auth,{idToken:h})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,h){var I,H,te,Be,at,Mt,vn,Xn;const Sn=null!==(I=h.displayName)&&void 0!==I?I:void 0,Yr=null!==(H=h.email)&&void 0!==H?H:void 0,so=null!==(te=h.phoneNumber)&&void 0!==te?te:void 0,Nc=null!==(Be=h.photoURL)&&void 0!==Be?Be:void 0,Io=null!==(at=h.tenantId)&&void 0!==at?at:void 0,fd=null!==(Mt=h._redirectEventId)&&void 0!==Mt?Mt:void 0,su=null!==(vn=h.createdAt)&&void 0!==vn?vn:void 0,Zf=null!==(Xn=h.lastLoginAt)&&void 0!==Xn?Xn:void 0,{uid:pd,emailVerified:ou,isAnonymous:md,providerData:au,stsTokenManager:cu}=h;pt(pd&&cu,u,"internal-error");const gd=W.fromJSON(this.name,cu);pt("string"==typeof pd,u,"internal-error"),_e(Sn,u.name),_e(Yr,u.name),pt("boolean"==typeof ou,u,"internal-error"),pt("boolean"==typeof md,u,"internal-error"),_e(so,u.name),_e(Nc,u.name),_e(Io,u.name),_e(fd,u.name),_e(su,u.name),_e(Zf,u.name);const kc=new Ae({uid:pd,auth:u,email:Yr,emailVerified:ou,displayName:Sn,isAnonymous:md,photoURL:Nc,phoneNumber:so,tenantId:Io,stsTokenManager:gd,createdAt:su,lastLoginAt:Zf});return au&&Array.isArray(au)&&(kc.providerData=au.map(Fc=>Object.assign({},Fc))),fd&&(kc._redirectEventId=fd),kc}static _fromIdTokenResponse(u,h){return(0,p.A)(function*(I,H,te=!1){const Be=new W;Be.updateFromServerResponse(H);const at=new Ae({uid:H.localId,auth:I,stsTokenManager:Be,isAnonymous:te});return yield Re(at),at}).apply(this,arguments)}static _fromGetAccountInfoResponse(u,h,I){return(0,p.A)(function*(){const H=h.users[0];pt(void 0!==H.localId,"internal-error");const te=void 0!==H.providerUserInfo?hr(H.providerUserInfo):[],Be=!(H.email&&H.passwordHash||te?.length),at=new W;at.updateFromIdToken(I);const Mt=new Ae({uid:H.localId,auth:u,stsTokenManager:at,isAnonymous:Be}),vn={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:te,metadata:new ie(H.createdAt,H.lastLoginAt),isAnonymous:!(H.email&&H.passwordHash||te?.length)};return Object.assign(Mt,vn),Mt})()}}const ue=new Map;function me(v){$n(v instanceof Function,"Expected a class definition");let u=ue.get(v);return u?($n(u instanceof v,"Instance stored in cache mismatched with class"),u):(u=new v,ue.set(v,u),u)}const be=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.A)(function*(){return!0})()}_set(h,I){var H=this;return(0,p.A)(function*(){H.storage[h]=I})()}_get(h){var I=this;return(0,p.A)(function*(){const H=I.storage[h];return void 0===H?null:H})()}_remove(h){var I=this;return(0,p.A)(function*(){delete I.storage[h]})()}_addListener(h,I){}_removeListener(h,I){}}return v.type="NONE",v})();function je(v,u,h){return`firebase:${v}:${u}:${h}`}class Bt{constructor(u,h,I){this.persistence=u,this.auth=h,this.userKey=I;const{config:H,name:te}=this.auth;this.fullUserKey=je(this.userKey,H.apiKey,te),this.fullPersistenceKey=je("persistence",H.apiKey,te),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,p.A)(function*(){const h=yield u.persistence._get(u.fullUserKey);return h?Ae._fromJSON(u.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var h=this;return(0,p.A)(function*(){if(h.persistence===u)return;const I=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=u,I?h.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,h){return(0,p.A)(function*(I,H,te="authUser"){if(!H.length)return new Bt(me(be),I,te);const Be=(yield Promise.all(H.map(function(){var Sn=(0,p.A)(function*(Yr){if(yield Yr._isAvailable())return Yr});return function(Yr){return Sn.apply(this,arguments)}}()))).filter(Sn=>Sn);let at=Be[0]||me(be);const Mt=je(te,I.config.apiKey,I.name);let vn=null;for(const Sn of H)try{const Yr=yield Sn._get(Mt);if(Yr){const so=Ae._fromJSON(I,Yr);Sn!==at&&(vn=so),at=Sn;break}}catch{}const Xn=Be.filter(Sn=>Sn._shouldAllowMigration);return at._shouldAllowMigration&&Xn.length?(at=Xn[0],vn&&(yield at._set(Mt,vn.toJSON())),yield Promise.all(H.map(function(){var Sn=(0,p.A)(function*(Yr){if(Yr!==at)try{yield Yr._remove(Mt)}catch{}});return function(Yr){return Sn.apply(this,arguments)}}())),new Bt(at,I,te)):new Bt(at,I,te)}).apply(this,arguments)}}function pe(v){const u=v.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(jt(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Ie(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Qt(u))return"Blackberry";if(qn(u))return"Webos";if(Se(u))return"Safari";if((u.includes("chrome/")||Ke(u))&&!u.includes("edge/"))return"Chrome";if(an(u))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Ie(v=(0,Y.ZQ)()){return/firefox\//i.test(v)}function Se(v=(0,Y.ZQ)()){const u=v.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function Ke(v=(0,Y.ZQ)()){return/crios\//i.test(v)}function jt(v=(0,Y.ZQ)()){return/iemobile/i.test(v)}function an(v=(0,Y.ZQ)()){return/android/i.test(v)}function Qt(v=(0,Y.ZQ)()){return/blackberry/i.test(v)}function qn(v=(0,Y.ZQ)()){return/webos/i.test(v)}function tn(v=(0,Y.ZQ)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function xt(v=(0,Y.ZQ)()){return tn(v)||an(v)||qn(v)||Qt(v)||/windows phone/i.test(v)||jt(v)}function zt(v,u=[]){let h;switch(v){case"Browser":h=pe((0,Y.ZQ)());break;case"Worker":h=`${pe((0,Y.ZQ)())}-${v}`;break;default:h=v}const I=u.length?u.join(","):"FirebaseCore-web";return`${h}/JsCore/${oe.SDK_VERSION}/${I}`}class Fn{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,h){const I=te=>new Promise((Be,at)=>{try{Be(u(te))}catch(Mt){at(Mt)}});I.onAbort=h,this.queue.push(I);const H=this.queue.length-1;return()=>{this.queue[H]=()=>Promise.resolve()}}runMiddleware(u){var h=this;return(0,p.A)(function*(){if(h.auth.currentUser===u)return;const I=[];try{for(const H of h.queue)yield H(u),H.onAbort&&I.push(H.onAbort)}catch(H){I.reverse();for(const te of I)try{te()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:H?.message})}})()}}function In(){return(In=(0,p.A)(function*(v,u={}){return Ee(v,"GET","/v2/passwordPolicy",ze(v,u))})).apply(this,arguments)}class dr{constructor(u){var h,I,H,te;const Be=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=Be.minPasswordLength)&&void 0!==h?h:6,Be.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Be.maxPasswordLength),void 0!==Be.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Be.containsLowercaseCharacter),void 0!==Be.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Be.containsUppercaseCharacter),void 0!==Be.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Be.containsNumericCharacter),void 0!==Be.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Be.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(H=null===(I=u.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==H?H:"",this.forceUpgradeOnSignin=null!==(te=u.forceUpgradeOnSignin)&&void 0!==te&&te,this.schemaVersion=u.schemaVersion}validatePassword(u){var h,I,H,te,Be,at;const Mt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,Mt),this.validatePasswordCharacterOptions(u,Mt),Mt.isValid&&(Mt.isValid=null===(h=Mt.meetsMinPasswordLength)||void 0===h||h),Mt.isValid&&(Mt.isValid=null===(I=Mt.meetsMaxPasswordLength)||void 0===I||I),Mt.isValid&&(Mt.isValid=null===(H=Mt.containsLowercaseLetter)||void 0===H||H),Mt.isValid&&(Mt.isValid=null===(te=Mt.containsUppercaseLetter)||void 0===te||te),Mt.isValid&&(Mt.isValid=null===(Be=Mt.containsNumericCharacter)||void 0===Be||Be),Mt.isValid&&(Mt.isValid=null===(at=Mt.containsNonAlphanumericCharacter)||void 0===at||at),Mt}validatePasswordLengthOptions(u,h){const I=this.customStrengthOptions.minPasswordLength,H=this.customStrengthOptions.maxPasswordLength;I&&(h.meetsMinPasswordLength=u.length>=I),H&&(h.meetsMaxPasswordLength=u.length<=H)}validatePasswordCharacterOptions(u,h){let I;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let H=0;H<u.length;H++)I=u.charAt(H),this.updatePasswordCharacterOptionsStatuses(h,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(u,h,I,H,te){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=H)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=te))}}class Xe{constructor(u,h,I,H){this.app=u,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=I,this.config=H,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gr(this),this.idTokenSubscription=new Gr(this),this.beforeStateQueue=new Fn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=H.sdkClientVersion}_initializeWithPersistence(u,h){var I=this;return h&&(this._popupRedirectResolver=me(h)),this._initializationPromise=this.queue((0,p.A)(function*(){var H,te;if(!I._deleted&&(I.persistenceManager=yield Bt.create(I,u),!I._deleted)){if(null!==(H=I._popupRedirectResolver)&&void 0!==H&&H._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(h),I.lastNotifiedUid=(null===(te=I.currentUser)||void 0===te?void 0:te.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,p.A)(function*(){if(u._deleted)return;const h=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||h){if(u.currentUser&&h&&u.currentUser.uid===h.uid)return u._currentUser._assign(h),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(u){var h=this;return(0,p.A)(function*(){try{const I=yield En(h,{idToken:u}),H=yield Ae._fromGetAccountInfoResponse(h,I,u);yield h.directlySetCurrentUser(H)}catch(I){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",I),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var h=this;return(0,p.A)(function*(){var I;if((0,oe._isFirebaseServerApp)(h.app)){const at=h.app.settings.authIdToken;return at?new Promise(Mt=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(at).then(Mt,Mt))}):h.directlySetCurrentUser(null)}const H=yield h.assertedPersistence.getCurrentUser();let te=H,Be=!1;if(u&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const at=null===(I=h.redirectUser)||void 0===I?void 0:I._redirectEventId,Mt=te?._redirectEventId,vn=yield h.tryRedirectSignIn(u);(!at||at===Mt)&&vn?.user&&(te=vn.user,Be=!0)}if(!te)return h.directlySetCurrentUser(null);if(!te._redirectEventId){if(Be)try{yield h.beforeStateQueue.runMiddleware(te)}catch(at){te=H,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(at))}return te?h.reloadAndSetCurrentUserOrClear(te):h.directlySetCurrentUser(null)}return pt(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===te._redirectEventId?h.directlySetCurrentUser(te):h.reloadAndSetCurrentUserOrClear(te)})()}tryRedirectSignIn(u){var h=this;return(0,p.A)(function*(){let I=null;try{I=yield h._popupRedirectResolver._completeRedirectFn(h,u,!0)}catch{yield h._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(u){var h=this;return(0,p.A)(function*(){try{yield Re(u)}catch(I){if("auth/network-request-failed"!==I?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function un(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var u=this;return(0,p.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var h=this;return(0,p.A)(function*(){if((0,oe._isFirebaseServerApp)(h.app))return Promise.reject(We(h));const I=u?(0,Y.Ku)(u):null;return I&&pt(I.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(I&&I._clone(h))})()}_updateCurrentUser(u){var h=this;return(0,p.A)(function*(I,H=!1){if(!h._deleted)return I&&pt(h.tenantId===I.tenantId,h,"tenant-id-mismatch"),H||(yield h.beforeStateQueue.runMiddleware(I)),h.queue((0,p.A)(function*(){yield h.directlySetCurrentUser(I),h.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var u=this;return(0,p.A)(function*(){return(0,oe._isFirebaseServerApp)(u.app)?Promise.reject(We(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var h=this;return(0,oe._isFirebaseServerApp)(this.app)?Promise.reject(We(this)):this.queue((0,p.A)(function*(){yield h.assertedPersistence.setPersistence(me(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var h=this;return(0,p.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const I=h._getPasswordPolicyInternal();return I.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,p.A)(function*(){const h=yield function pn(v){return In.apply(this,arguments)}(u),I=new dr(h);null===u.tenantId?u._projectPasswordPolicy=I:u._tenantPasswordPolicies[u.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new Y.FA("auth","Firebase",u())}onAuthStateChanged(u,h,I){return this.registerStateListener(this.authStateSubscription,u,h,I)}beforeAuthStateChanged(u,h){return this.beforeStateQueue.pushCallback(u,h)}onIdTokenChanged(u,h,I){return this.registerStateListener(this.idTokenSubscription,u,h,I)}authStateReady(){return new Promise((u,h)=>{if(this.currentUser)u();else{const I=this.onAuthStateChanged(()=>{I(),u()},h)}})}revokeAccessToken(u){var h=this;return(0,p.A)(function*(){if(h.currentUser){const I=yield h.currentUser.getIdToken(),H={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:I};null!=h.tenantId&&(H.tenantId=h.tenantId),yield function O(v,u){return N.apply(this,arguments)}(h,H)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,h){var I=this;return(0,p.A)(function*(){const H=yield I.getOrInitRedirectPersistenceManager(h);return null===u?H.removeCurrentUser():H.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var h=this;return(0,p.A)(function*(){if(!h.redirectPersistenceManager){const I=u&&me(u)||h._popupRedirectResolver;pt(I,h,"argument-error"),h.redirectPersistenceManager=yield Bt.create(h,[me(I._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(u){var h=this;return(0,p.A)(function*(){var I,H;return h._isInitialized&&(yield h.queue((0,p.A)(function*(){}))),(null===(I=h._currentUser)||void 0===I?void 0:I._redirectEventId)===u?h._currentUser:(null===(H=h.redirectUser)||void 0===H?void 0:H._redirectEventId)===u?h.redirectUser:null})()}_persistUserIfCurrent(u){var h=this;return(0,p.A)(function*(){if(u===h.currentUser)return h.queue((0,p.A)(function*(){return h.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(h=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,h,I,H){if(this._deleted)return()=>{};const te="function"==typeof h?h:h.next.bind(h);let Be=!1;const at=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(at,this,"internal-error"),at.then(()=>{Be||te(this.currentUser)}),"function"==typeof h){const Mt=u.addObserver(h,I,H);return()=>{Be=!0,Mt()}}{const Mt=u.addObserver(h);return()=>{Be=!0,Mt()}}}directlySetCurrentUser(u){var h=this;return(0,p.A)(function*(){h.currentUser&&h.currentUser!==u&&h._currentUser._stopProactiveRefresh(),u&&h.isProactiveRefreshEnabled&&u._startProactiveRefresh(),h.currentUser=u,u?yield h.assertedPersistence.setCurrentUser(u):yield h.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=zt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,p.A)(function*(){var h;const I={"X-Client-Version":u.clientVersion};u.app.options.appId&&(I["X-Firebase-gmpid"]=u.app.options.appId);const H=yield null===(h=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();H&&(I["X-Firebase-Client"]=H);const te=yield u._getAppCheckToken();return te&&(I["X-Firebase-AppCheck"]=te),I})()}_getAppCheckToken(){var u=this;return(0,p.A)(function*(){var h;const I=yield null===(h=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return I?.error&&function Rt(v,...u){Yt.logLevel<=Oe.$b.WARN&&Yt.warn(`Auth (${oe.SDK_VERSION}): ${v}`,...u)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Vn(v){return(0,Y.Ku)(v)}class Gr{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,Y.tD)(h=>this.observer=h)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wi={loadJS:()=>(0,p.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ri(v){return wi.loadJS(v)}function Ss(v){return`__${v}${Math.floor(1e6*Math.random())}`}class xo{constructor(u){this.type="recaptcha-enterprise",this.auth=Vn(u)}verify(){var u=this;return(0,p.A)(function*(h="verify",I=!1){function te(){return te=(0,p.A)(function*(at){if(!I){if(null==at.tenantId&&null!=at._agentRecaptchaConfig)return at._agentRecaptchaConfig.siteKey;if(null!=at.tenantId&&void 0!==at._tenantRecaptchaConfigs[at.tenantId])return at._tenantRecaptchaConfigs[at.tenantId].siteKey}return new Promise(function(){var Mt=(0,p.A)(function*(vn,Xn){Me(at,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Sn=>{if(void 0!==Sn.recaptchaKey){const Yr=new Er(Sn);return null==at.tenantId?at._agentRecaptchaConfig=Yr:at._tenantRecaptchaConfigs[at.tenantId]=Yr,vn(Yr.siteKey)}Xn(new Error("recaptcha Enterprise site key undefined"))}).catch(Sn=>{Xn(Sn)})});return function(vn,Xn){return Mt.apply(this,arguments)}}())}),te.apply(this,arguments)}function Be(at,Mt,vn){const Xn=window.grecaptcha;Ar(Xn)?Xn.enterprise.ready(()=>{Xn.enterprise.execute(at,{action:h}).then(Sn=>{Mt(Sn)}).catch(()=>{Mt("NO_RECAPTCHA")})}):vn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((at,Mt)=>{(function H(at){return te.apply(this,arguments)})(u.auth).then(vn=>{if(!I&&Ar(window.grecaptcha))Be(vn,at,Mt);else{if(typeof window>"u")return void Mt(new Error("RecaptchaVerifier is only supported in browser"));let Xn=function Ds(){return wi.recaptchaEnterpriseScript}();0!==Xn.length&&(Xn+=vn),Ri(Xn).then(()=>{Be(vn,at,Mt)}).catch(Sn=>{Mt(Sn)})}}).catch(vn=>{Mt(vn)})})}).apply(this,arguments)}}function Br(v,u,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,p.A)(function*(v,u,h,I=!1){const H=new xo(v);let te;try{te=yield H.verify(h)}catch{te=yield H.verify(h,!0)}const Be=Object.assign({},u);return Object.assign(Be,I?{captchaResp:te}:{captchaResponse:te}),Object.assign(Be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Be})).apply(this,arguments)}function is(v,u,h,I){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,p.A)(function*(v,u,h,I){var H;if(null!==(H=v._getRecaptchaConfig())&&void 0!==H&&H.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const te=yield Br(v,u,h,"getOobCode"===h);return I(v,te)}return I(v,u).catch(function(){var te=(0,p.A)(function*(Be){if("auth/missing-recaptcha-token"===Be.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const at=yield Br(v,u,h,"getOobCode"===h);return I(v,at)}return Promise.reject(Be)});return function(Be){return te.apply(this,arguments)}}())}),Rs.apply(this,arguments)}function Ms(v){const u=v.indexOf(":");return u<0?"":v.substr(0,u+1)}function Ks(v){if(!v)return null;const u=Number(v);return isNaN(u)?null:u}class Vi{constructor(u,h){this.providerId=u,this.signInMethod=h}toJSON(){return ln("not implemented")}_getIdTokenResponse(u){return ln("not implemented")}_linkToIdToken(u,h){return ln("not implemented")}_getReauthenticationResolver(u){return ln("not implemented")}}function Ws(v,u){return _r.apply(this,arguments)}function _r(){return(_r=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:resetPassword",ze(v,u))})).apply(this,arguments)}function pi(){return(pi=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function vs(v,u){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function Ps(){return(Ps=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:update",ze(v,u))})).apply(this,arguments)}function Gs(v,u){return bs.apply(this,arguments)}function bs(){return(bs=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signInWithPassword",ze(v,u))})).apply(this,arguments)}function Es(v,u){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:sendOobCode",ze(v,u))})).apply(this,arguments)}function sr(){return(sr=(0,p.A)(function*(v,u){return Es(v,u)})).apply(this,arguments)}function Or(v,u){return xi.apply(this,arguments)}function xi(){return(xi=(0,p.A)(function*(v,u){return Es(v,u)})).apply(this,arguments)}function ds(v,u){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.A)(function*(v,u){return Es(v,u)})).apply(this,arguments)}function Zr(){return(Zr=(0,p.A)(function*(v,u){return Es(v,u)})).apply(this,arguments)}function hs(){return(hs=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signInWithEmailLink",ze(v,u))})).apply(this,arguments)}function os(){return(os=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signInWithEmailLink",ze(v,u))})).apply(this,arguments)}class Is extends Vi{constructor(u,h,I,H=null){super("password",I),this._email=u,this._password=h,this._tenantId=H}static _fromEmailAndPassword(u,h){return new Is(u,h,"password")}static _fromEmailAndCode(u,h,I=null){return new Is(u,h,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(u){var h=this;return(0,p.A)(function*(){switch(h.signInMethod){case"password":return is(u,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Gs);case"emailLink":return function Kr(v,u){return hs.apply(this,arguments)}(u,{email:h._email,oobCode:h._password});default:Ue(u,"internal-error")}})()}_linkToIdToken(u,h){var I=this;return(0,p.A)(function*(){switch(I.signInMethod){case"password":return is(u,{idToken:h,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vs);case"emailLink":return function Wn(v,u){return os.apply(this,arguments)}(u,{idToken:h,email:I._email,oobCode:I._password});default:Ue(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function vr(v,u){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signInWithIdp",ze(v,u))})).apply(this,arguments)}class fr extends Vi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const h=new fr(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(h.idToken=u.idToken),u.accessToken&&(h.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(h.nonce=u.nonce),u.pendingToken&&(h.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(h.accessToken=u.oauthToken,h.secret=u.oauthTokenSecret):Ue("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u,{providerId:I,signInMethod:H}=h,te=(0,Le.Tt)(h,["providerId","signInMethod"]);if(!I||!H)return null;const Be=new fr(I,H);return Be.idToken=te.idToken||void 0,Be.accessToken=te.accessToken||void 0,Be.secret=te.secret,Be.nonce=te.nonce,Be.pendingToken=te.pendingToken||null,Be}_getIdTokenResponse(u){return vr(u,this.buildRequest())}_linkToIdToken(u,h){const I=this.buildRequest();return I.idToken=h,vr(u,I)}_getReauthenticationResolver(u){const h=this.buildRequest();return h.autoCreate=!1,vr(u,h)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),u.postBody=(0,Y.Am)(h)}return u}}function mi(){return(mi=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:sendVerificationCode",ze(v,u))})).apply(this,arguments)}function qi(){return(qi=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signInWithPhoneNumber",ze(v,u))})).apply(this,arguments)}function Nr(){return(Nr=(0,p.A)(function*(v,u){const h=yield dn(v,"POST","/v1/accounts:signInWithPhoneNumber",ze(v,u));if(h.temporaryProof)throw On(v,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Ts={USER_NOT_FOUND:"user-not-found"};function Jr(){return(Jr=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signInWithPhoneNumber",ze(v,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Ts)})).apply(this,arguments)}class jr extends Vi{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,h){return new jr({verificationId:u,verificationCode:h})}static _fromTokenResponse(u,h){return new jr({phoneNumber:u,temporaryProof:h})}_getIdTokenResponse(u){return function Hi(v,u){return qi.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,h){return function Yi(v,u){return Nr.apply(this,arguments)}(u,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function Un(v,u){return Jr.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:h,verificationId:I,verificationCode:H}=this.params;return u&&h?{temporaryProof:u,phoneNumber:h}:{sessionInfo:I,code:H}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:h,verificationCode:I,phoneNumber:H,temporaryProof:te}=u;return I||h||H||te?new jr({verificationId:h,verificationCode:I,phoneNumber:H,temporaryProof:te}):null}}class Zi{constructor(u){var h,I,H,te,Be,at;const Mt=(0,Y.I9)((0,Y.hp)(u)),vn=null!==(h=Mt.apiKey)&&void 0!==h?h:null,Xn=null!==(I=Mt.oobCode)&&void 0!==I?I:null,Sn=function as(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(H=Mt.mode)&&void 0!==H?H:null);pt(vn&&Xn&&Sn,"argument-error"),this.apiKey=vn,this.operation=Sn,this.code=Xn,this.continueUrl=null!==(te=Mt.continueUrl)&&void 0!==te?te:null,this.languageCode=null!==(Be=Mt.languageCode)&&void 0!==Be?Be:null,this.tenantId=null!==(at=Mt.tenantId)&&void 0!==at?at:null}static parseLink(u){const h=function $i(v){const u=(0,Y.I9)((0,Y.hp)(v)).link,h=u?(0,Y.I9)((0,Y.hp)(u)).deep_link_id:null,I=(0,Y.I9)((0,Y.hp)(v)).deep_link_id;return(I?(0,Y.I9)((0,Y.hp)(I)).link:null)||I||h||u||v}(u);try{return new Zi(h)}catch{return null}}}let Ni=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(h,I){return Is._fromEmailAndPassword(h,I)}static credentialWithLink(h,I){const H=Zi.parseLink(I);return pt(H,"argument-error"),Is._fromEmailAndCode(h,H.code,H.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class yr{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class cs extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class kr extends cs{static credentialFromJSON(u){const h="string"==typeof u?JSON.parse(u):u;return pt("providerId"in h&&"signInMethod"in h,"argument-error"),fr._fromParams(h)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return pt(u.idToken||u.accessToken,"argument-error"),fr._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return kr.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return kr.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:h,oauthAccessToken:I,oauthTokenSecret:H,pendingToken:te,nonce:Be,providerId:at}=u;if(!I&&!H&&!h&&!te||!at)return null;try{return new kr(at)._credential({idToken:h,accessToken:I,nonce:Be,pendingToken:te})}catch{return null}}}let Hr=(()=>{class v extends cs{constructor(){super("facebook.com")}static credential(h){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return v.credentialFromTaggedObject(h)}static credentialFromError(h){return v.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return v.credential(h.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),As=(()=>{class v extends cs{constructor(){super("google.com"),this.addScope("profile")}static credential(h,I){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:I})}static credentialFromResult(h){return v.credentialFromTaggedObject(h)}static credentialFromError(h){return v.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:I,oauthAccessToken:H}=h;if(!I&&!H)return null;try{return v.credential(I,H)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Bi=(()=>{class v extends cs{constructor(){super("github.com")}static credential(h){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return v.credentialFromTaggedObject(h)}static credentialFromError(h){return v.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return v.credential(h.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ai extends Vi{constructor(u,h){super(u,u),this.pendingToken=h}_getIdTokenResponse(u){return vr(u,this.buildRequest())}_linkToIdToken(u,h){const I=this.buildRequest();return I.idToken=h,vr(u,I)}_getReauthenticationResolver(u){const h=this.buildRequest();return h.autoCreate=!1,vr(u,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u,{providerId:I,signInMethod:H,pendingToken:te}=h;return I&&H&&te&&I===H?new ai(I,te):null}static _create(u,h){return new ai(u,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oo extends yr{constructor(u){pt(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return oo.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return oo.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const h=ai.fromJSON(u);return pt(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:h,providerId:I}=u;if(!h||!I)return null;try{return ai._create(I,h)}catch{return null}}}let eo=(()=>{class v extends cs{constructor(){super("twitter.com")}static credential(h,I){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:I})}static credentialFromResult(h){return v.credentialFromTaggedObject(h)}static credentialFromError(h){return v.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:I,oauthTokenSecret:H}=h;if(!I||!H)return null;try{return v.credential(I,H)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ao(v,u){return to.apply(this,arguments)}function to(){return(to=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signUp",ze(v,u))})).apply(this,arguments)}class G{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,h,I){return(0,p.A)(function*(H,te,Be,at=!1){const Mt=yield Ae._fromIdTokenResponse(H,Be,at),vn=E(Be);return new G({user:Mt,providerId:vn,_tokenResponse:Be,operationType:te})}).apply(this,arguments)}static _forOperation(u,h,I){return(0,p.A)(function*(){yield u._updateTokensIfNecessary(I,!0);const H=E(I);return new G({user:u,providerId:H,_tokenResponse:I,operationType:h})})()}}function E(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function M(){return(M=(0,p.A)(function*(v){var u;if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const h=Vn(v);if(yield h._initializationPromise,null!==(u=h.currentUser)&&void 0!==u&&u.isAnonymous)return new G({user:h.currentUser,providerId:null,operationType:"signIn"});const I=yield ao(h,{returnSecureToken:!0}),H=yield G._fromIdTokenResponse(h,"signIn",I,!0);return yield h._updateCurrentUser(H.user),H})).apply(this,arguments)}class z extends Y.g{constructor(u,h,I,H){var te;super(h.code,h.message),this.operationType=I,this.user=H,Object.setPrototypeOf(this,z.prototype),this.customData={appName:u.name,tenantId:null!==(te=u.tenantId)&&void 0!==te?te:void 0,_serverResponse:h.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(u,h,I,H){return new z(u,h,I,H)}}function Ce(v,u,h,I){return("reauthenticate"===u?h._getReauthenticationResolver(v):h._getIdTokenResponse(v)).catch(te=>{throw"auth/multi-factor-auth-required"===te.code?z._fromErrorAndOperation(v,te,u,I):te})}function ot(v){return new Set(v.map(({providerId:u})=>u).filter(u=>!!u))}function kn(){return kn=(0,p.A)(function*(v,u){const h=(0,Y.Ku)(v);yield Sr(!0,h,u);const{providerUserInfo:I}=yield function Tt(v,u){return on.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[u]}),H=ot(I||[]);return h.providerData=h.providerData.filter(te=>H.has(te.providerId)),H.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),kn.apply(this,arguments)}function Cn(v,u){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.A)(function*(v,u,h=!1){const I=yield $t(v,u._linkToIdToken(v.auth,yield v.getIdToken()),h);return G._forOperation(v,"link",I)})).apply(this,arguments)}function Sr(v,u,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.A)(function*(v,u,h){yield Re(u);const H=!1===v?"provider-already-linked":"no-such-provider";pt(ot(u.providerData).has(h)===v,u.auth,H)})).apply(this,arguments)}function gi(v,u){return or.apply(this,arguments)}function or(){return(or=(0,p.A)(function*(v,u,h=!1){const{auth:I}=v;if((0,oe._isFirebaseServerApp)(I.app))return Promise.reject(We(I));const H="reauthenticate";try{const te=yield $t(v,Ce(I,H,u,v),h);pt(te.idToken,I,"internal-error");const Be=_n(te.idToken);pt(Be,I,"internal-error");const{sub:at}=Be;return pt(v.uid===at,I,"user-mismatch"),G._forOperation(v,H,te)}catch(te){throw"auth/user-not-found"===te?.code&&Ue(I,"user-mismatch"),te}})).apply(this,arguments)}function ei(v,u){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,p.A)(function*(v,u,h=!1){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const I="signIn",H=yield Ce(v,I,u),te=yield G._fromIdTokenResponse(v,I,H);return h||(yield v._updateCurrentUser(te.user)),te})).apply(this,arguments)}function ti(v,u){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.A)(function*(v,u){return ei(Vn(v),u)})).apply(this,arguments)}function _i(v,u){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.A)(function*(v,u){const h=(0,Y.Ku)(v);return yield Sr(!1,h,u.providerId),Cn(h,u)})).apply(this,arguments)}function tr(v,u){return nr.apply(this,arguments)}function nr(){return(nr=(0,p.A)(function*(v,u){return gi((0,Y.Ku)(v),u)})).apply(this,arguments)}function Ti(){return(Ti=(0,p.A)(function*(v,u){return dn(v,"POST","/v1/accounts:signInWithCustomToken",ze(v,u))})).apply(this,arguments)}function Qs(){return Qs=(0,p.A)(function*(v,u){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const h=Vn(v),I=yield function Qi(v,u){return Ti.apply(this,arguments)}(h,{token:u,returnSecureToken:!0}),H=yield G._fromIdTokenResponse(h,"signIn",I);return yield h._updateCurrentUser(H.user),H}),Qs.apply(this,arguments)}class _o{constructor(u,h){this.factorId=u,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(u,h){return"phoneInfo"in h?jo._fromServerResponse(u,h):"totpInfo"in h?Zo._fromServerResponse(u,h):Ue(u,"internal-error")}}class jo extends _o{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,h){return new jo(h)}}class Zo extends _o{constructor(u){super("totp",u)}static _fromServerResponse(u,h){return new Zo(h)}}function Ho(v,u,h){var I;pt((null===(I=h.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),pt(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),u.continueUrl=h.url,u.dynamicLinkDomain=h.dynamicLinkDomain,u.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(pt(h.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),u.iOSBundleId=h.iOS.bundleId),h.android&&(pt(h.android.packageName.length>0,v,"missing-android-pkg-name"),u.androidInstallApp=h.android.installApp,u.androidMinimumVersionCode=h.android.minimumVersion,u.androidPackageName=h.android.packageName)}function ga(v){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,p.A)(function*(v){const u=Vn(v);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function _a(){return(_a=(0,p.A)(function*(v,u,h){const I=Vn(v),H={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};h&&Ho(I,H,h),yield is(I,H,"getOobCode",Or)})).apply(this,arguments)}function $o(){return $o=(0,p.A)(function*(v,u,h){yield Ws((0,Y.Ku)(v),{oobCode:u,newPassword:h}).catch(function(){var I=(0,p.A)(function*(H){throw"auth/password-does-not-meet-requirements"===H.code&&ga(v),H});return function(H){return I.apply(this,arguments)}}())}),$o.apply(this,arguments)}function Po(){return Po=(0,p.A)(function*(v,u){yield function Zs(v,u){return Ps.apply(this,arguments)}((0,Y.Ku)(v),{oobCode:u})}),Po.apply(this,arguments)}function ya(v,u){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,p.A)(function*(v,u){const h=(0,Y.Ku)(v),I=yield Ws(h,{oobCode:u}),H=I.requestType;switch(pt(H,h,"internal-error"),H){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pt(I.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pt(I.mfaInfo,h,"internal-error");default:pt(I.email,h,"internal-error")}let te=null;return I.mfaInfo&&(te=_o._fromServerResponse(Vn(h),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:te},operation:H}})).apply(this,arguments)}function Oo(){return(Oo=(0,p.A)(function*(v,u){const{data:h}=yield ya((0,Y.Ku)(v),u);return h.email})).apply(this,arguments)}function ea(){return(ea=(0,p.A)(function*(v,u,h){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const I=Vn(v),Be=yield is(I,{returnSecureToken:!0,email:u,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ao).catch(Mt=>{throw"auth/password-does-not-meet-requirements"===Mt.code&&ga(v),Mt}),at=yield G._fromIdTokenResponse(I,"signIn",Be);return yield I._updateCurrentUser(at.user),at})).apply(this,arguments)}function Ns(){return(Ns=(0,p.A)(function*(v,u,h){const I=Vn(v),H={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function te(Be,at){pt(at.handleCodeInApp,I,"argument-error"),at&&Ho(I,Be,at)})(H,h),yield is(I,H,"getOobCode",ds)})).apply(this,arguments)}function C(){return(C=(0,p.A)(function*(v,u,h){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const I=(0,Y.Ku)(v),H=Ni.credentialWithLink(u,h||br());return pt(H._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),ti(I,H)})).apply(this,arguments)}function X(){return(X=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:createAuthUri",ze(v,u))})).apply(this,arguments)}function L(){return L=(0,p.A)(function*(v,u){const I={identifier:u,continueUri:Dr()?br():"http://localhost"},{signinMethods:H}=yield function V(v,u){return X.apply(this,arguments)}((0,Y.Ku)(v),I);return H||[]}),L.apply(this,arguments)}function B(){return B=(0,p.A)(function*(v,u){const h=(0,Y.Ku)(v),H={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};u&&Ho(h.auth,H,u);const{email:te}=yield function hn(v,u){return sr.apply(this,arguments)}(h.auth,H);te!==v.email&&(yield v.reload())}),B.apply(this,arguments)}function He(){return He=(0,p.A)(function*(v,u,h){const I=(0,Y.Ku)(v),te={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:u};h&&Ho(I.auth,te,h);const{email:Be}=yield function Js(v,u){return Zr.apply(this,arguments)}(I.auth,te);Be!==v.email&&(yield v.reload())}),He.apply(this,arguments)}function qt(){return(qt=(0,p.A)(function*(v,u){return Ee(v,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function mn(){return mn=(0,p.A)(function*(v,{displayName:u,photoURL:h}){if(void 0===u&&void 0===h)return;const I=(0,Y.Ku)(v),te={idToken:yield I.getIdToken(),displayName:u,photoUrl:h,returnSecureToken:!0},Be=yield $t(I,function st(v,u){return qt.apply(this,arguments)}(I.auth,te));I.displayName=Be.displayName||null,I.photoURL=Be.photoUrl||null;const at=I.providerData.find(({providerId:Mt})=>"password"===Mt);at&&(at.displayName=I.displayName,at.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Be)}),mn.apply(this,arguments)}function cr(v,u,h){return lr.apply(this,arguments)}function lr(){return lr=(0,p.A)(function*(v,u,h){const{auth:I}=v,te={idToken:yield v.getIdToken(),returnSecureToken:!0};u&&(te.email=u),h&&(te.password=h);const Be=yield $t(v,function Pi(v,u){return pi.apply(this,arguments)}(I,te));yield v._updateTokensIfNecessary(Be,!0)}),lr.apply(this,arguments)}class Qr{constructor(u,h,I={}){this.isNewUser=u,this.providerId=h,this.profile=I}}class Ui extends Qr{constructor(u,h,I,H){super(u,h,I),this.username=H}}class Ji extends Qr{constructor(u,h){super(u,"facebook.com",h)}}class Fr extends Ui{constructor(u,h){super(u,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class ci extends Qr{constructor(u,h){super(u,"google.com",h)}}class li extends Ui{constructor(u,h,I){super(u,"twitter.com",h,I)}}function es(v){const{user:u,_tokenResponse:h}=v;return u.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function gr(v){var u,h;if(!v)return null;const{providerId:I}=v,H=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},te=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const Be=null===(h=null===(u=_n(v.idToken))||void 0===u?void 0:u.firebase)||void 0===h?void 0:h.sign_in_provider;if(Be)return new Qr(te,"anonymous"!==Be&&"custom"!==Be?Be:null)}if(!I)return null;switch(I){case"facebook.com":return new Ji(te,H);case"github.com":return new Fr(te,H);case"google.com":return new ci(te,H);case"twitter.com":return new li(te,H,v.screenName||null);case"custom":case"anonymous":return new Qr(te,null);default:return new Qr(te,I,H)}}(h)}class ui{constructor(u,h,I){this.type=u,this.credential=h,this.user=I}static _fromIdtoken(u,h){return new ui("enroll",u,h)}static _fromMfaPendingCredential(u){return new ui("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var h,I;if(u?.multiFactorSession){if(null!==(h=u.multiFactorSession)&&void 0!==h&&h.pendingCredential)return ui._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(I=u.multiFactorSession)&&void 0!==I&&I.idToken)return ui._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Co{constructor(u,h,I){this.session=u,this.hints=h,this.signInResolver=I}static _fromError(u,h){const I=Vn(u),H=h.customData._serverResponse,te=(H.mfaInfo||[]).map(at=>_o._fromServerResponse(I,at));pt(H.mfaPendingCredential,I,"internal-error");const Be=ui._fromMfaPendingCredential(H.mfaPendingCredential);return new Co(Be,te,function(){var at=(0,p.A)(function*(Mt){const vn=yield Mt._process(I,Be);delete H.mfaInfo,delete H.mfaPendingCredential;const Xn=Object.assign(Object.assign({},H),{idToken:vn.idToken,refreshToken:vn.refreshToken});switch(h.operationType){case"signIn":const Sn=yield G._fromIdTokenResponse(I,h.operationType,Xn);return yield I._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return pt(h.user,I,"internal-error"),G._forOperation(h.user,h.operationType,Xn);default:Ue(I,"internal-error")}});return function(Mt){return at.apply(this,arguments)}}())}resolveSignIn(u){var h=this;return(0,p.A)(function*(){return h.signInResolver(u)})()}}class th{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(I=>_o._fromServerResponse(u.auth,I)))})}static _fromUser(u){return new th(u)}getSession(){var u=this;return(0,p.A)(function*(){return ui._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,h){var I=this;return(0,p.A)(function*(){const H=u,te=yield I.getSession(),Be=yield $t(I.user,H._process(I.user.auth,te,h));return yield I.user._updateTokensIfNecessary(Be),I.user.reload()})()}unenroll(u){var h=this;return(0,p.A)(function*(){const I="string"==typeof u?u:u.uid,H=yield h.user.getIdToken();try{const te=yield $t(h.user,function $a(v,u){return Ee(v,"POST","/v2/accounts/mfaEnrollment:withdraw",ze(v,u))}(h.user.auth,{idToken:H,mfaEnrollmentId:I}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Be})=>Be!==I),yield h.user._updateTokensIfNecessary(te),yield h.user.reload()}catch(te){throw te}})()}}const Ci=new WeakMap,za="__sak";class Fl{constructor(u,h){this.storageRetriever=u,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,h){return this.storage.setItem(u,JSON.stringify(h)),Promise.resolve()}_get(u){const h=this.storage.getItem(u);return Promise.resolve(h?JSON.parse(h):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ka=(()=>{class v extends Fl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,I)=>this.onStorageEvent(h,I),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const I of Object.keys(this.listeners)){const H=this.storage.getItem(I),te=this.localCache[I];H!==te&&h(I,te,H)}}onStorageEvent(h,I=!1){if(!h.key)return void this.forAllChangedKeys((at,Mt,vn)=>{this.notifyListeners(at,vn)});const H=h.key;I?this.detachListener():this.stopPolling();const te=()=>{const at=this.storage.getItem(H);!I&&this.localCache[H]===at||this.notifyListeners(H,at)},Be=this.storage.getItem(H);!function rt(){return(0,Y.lT)()&&10===document.documentMode}()||Be===h.newValue||h.newValue===h.oldValue?te():setTimeout(te,10)}notifyListeners(h,I){this.localCache[h]=I;const H=this.listeners[h];if(H)for(const te of Array.from(H))te(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,I,H)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:I,newValue:H}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(I)}_removeListener(h,I){this.listeners[h]&&(this.listeners[h].delete(I),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,I){var H=()=>super._set,te=this;return(0,p.A)(function*(){yield H().call(te,h,I),te.localCache[h]=JSON.stringify(I)})()}_get(h){var I=()=>super._get,H=this;return(0,p.A)(function*(){const te=yield I().call(H,h);return H.localCache[h]=JSON.stringify(te),te})()}_remove(h){var I=()=>super._remove,H=this;return(0,p.A)(function*(){yield I().call(H,h),delete H.localCache[h]})()}}return v.type="LOCAL",v})(),Fs=(()=>{class v extends Fl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,I){}_removeListener(h,I){}}return v.type="SESSION",v})();let Xr=(()=>{class v{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const I=this.receivers.find(te=>te.isListeningto(h));if(I)return I;const H=new v(h);return this.receivers.push(H),H}isListeningto(h){return this.eventTarget===h}handleEvent(h){var I=this;return(0,p.A)(function*(){const H=h,{eventId:te,eventType:Be,data:at}=H.data,Mt=I.handlersMap[Be];if(!Mt?.size)return;H.ports[0].postMessage({status:"ack",eventId:te,eventType:Be});const vn=Array.from(Mt).map(function(){var Sn=(0,p.A)(function*(Yr){return Yr(H.origin,at)});return function(Yr){return Sn.apply(this,arguments)}}()),Xn=yield function Gt(v){return Promise.all(v.map(function(){var u=(0,p.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(I){return{fulfilled:!1,reason:I}}});return function(h){return u.apply(this,arguments)}}()))}(vn);H.ports[0].postMessage({status:"done",eventId:te,eventType:Be,response:Xn})})()}_subscribe(h,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(I)}_unsubscribe(h,I){this.handlersMap[h]&&I&&this.handlersMap[h].delete(I),(!I||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ea(v="",u=10){let h="";for(let I=0;I<u;I++)h+=Math.floor(10*Math.random());return v+h}class Ia{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,h){var I=this;return(0,p.A)(function*(H,te,Be=50){const at=typeof MessageChannel<"u"?new MessageChannel:null;if(!at)throw new Error("connection_unavailable");let Mt,vn;return new Promise((Xn,Sn)=>{const Yr=Ea("",20);at.port1.start();const so=setTimeout(()=>{Sn(new Error("unsupported_event"))},Be);vn={messageChannel:at,onMessage(Nc){const Io=Nc;if(Io.data.eventId===Yr)switch(Io.data.status){case"ack":clearTimeout(so),Mt=setTimeout(()=>{Sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Mt),Xn(Io.data.response);break;default:clearTimeout(so),clearTimeout(Mt),Sn(new Error("invalid_response"))}}},I.handlers.add(vn),at.port1.addEventListener("message",vn.onMessage),I.target.postMessage({eventType:H,eventId:Yr,data:te},[at.port2])}).finally(()=>{vn&&I.removeMessageHandler(vn)})}).apply(this,arguments)}}function $r(){return window}function ko(){return typeof $r().WorkerGlobalScope<"u"&&"function"==typeof $r().importScripts}function gc(){return(gc=(0,p.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ii="firebaseLocalStorageDb",gs="firebaseLocalStorage",D="fbase_key";class k{constructor(u){this.request=u}toPromise(){return new Promise((u,h)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function T(v,u){return v.transaction([gs],u?"readwrite":"readonly").objectStore(gs)}function K(){const v=indexedDB.open(ii,1);return new Promise((u,h)=>{v.addEventListener("error",()=>{h(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(gs,{keyPath:D})}catch(H){h(H)}}),v.addEventListener("success",(0,p.A)(function*(){const I=v.result;I.objectStoreNames.contains(gs)?u(I):(I.close(),yield function P(){const v=indexedDB.deleteDatabase(ii);return new k(v).toPromise()}(),u(yield K()))}))})}function se(v,u,h){return xe.apply(this,arguments)}function xe(){return(xe=(0,p.A)(function*(v,u,h){const I=T(v,!0).put({[D]:u,value:h});return new k(I).toPromise()})).apply(this,arguments)}function wt(){return(wt=(0,p.A)(function*(v,u){const h=T(v,!1).get(u),I=yield new k(h).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function wn(v,u){const h=T(v,!0).delete(u);return new k(h).toPromise()}const Xs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,p.A)(function*(){return h.db||(h.db=yield K()),h.db})()}_withRetries(h){var I=this;return(0,p.A)(function*(){let H=0;for(;;)try{const te=yield I._openDb();return yield h(te)}catch(te){if(H++>3)throw te;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,p.A)(function*(){return ko()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,p.A)(function*(){h.receiver=Xr._getInstance(function ls(){return ko()?self:null}()),h.receiver._subscribe("keyChanged",function(){var I=(0,p.A)(function*(H,te){return{keyProcessed:(yield h._poll()).includes(te.key)}});return function(H,te){return I.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var I=(0,p.A)(function*(H,te){return["keyChanged"]});return function(H,te){return I.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,p.A)(function*(){var I,H;if(h.activeServiceWorker=yield function bo(){return gc.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Ia(h.activeServiceWorker);const te=yield h.sender._send("ping",{},800);te&&null!==(I=te[0])&&void 0!==I&&I.fulfilled&&null!==(H=te[0])&&void 0!==H&&H.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var I=this;return(0,p.A)(function*(){if(I.sender&&I.activeServiceWorker&&function Fu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:h},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.A)(function*(){try{if(!indexedDB)return!1;const h=yield K();return yield se(h,za,"1"),yield wn(h,za),!0}catch{}return!1})()}_withPendingWrite(h){var I=this;return(0,p.A)(function*(){I.pendingWrites++;try{yield h()}finally{I.pendingWrites--}})()}_set(h,I){var H=this;return(0,p.A)(function*(){return H._withPendingWrite((0,p.A)(function*(){return yield H._withRetries(te=>se(te,h,I)),H.localCache[h]=I,H.notifyServiceWorker(h)}))})()}_get(h){var I=this;return(0,p.A)(function*(){const H=yield I._withRetries(te=>function Dt(v,u){return wt.apply(this,arguments)}(te,h));return I.localCache[h]=H,H})()}_remove(h){var I=this;return(0,p.A)(function*(){return I._withPendingWrite((0,p.A)(function*(){return yield I._withRetries(H=>wn(H,h)),delete I.localCache[h],I.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,p.A)(function*(){const I=yield h._withRetries(Be=>{const at=T(Be,!1).getAll();return new k(at).toPromise()});if(!I)return[];if(0!==h.pendingWrites)return[];const H=[],te=new Set;if(0!==I.length)for(const{fbase_key:Be,value:at}of I)te.add(Be),JSON.stringify(h.localCache[Be])!==JSON.stringify(at)&&(h.notifyListeners(Be,at),H.push(Be));for(const Be of Object.keys(h.localCache))h.localCache[Be]&&!te.has(Be)&&(h.notifyListeners(Be,null),H.push(Be));return H})()}notifyListeners(h,I){this.localCache[h]=I;const H=this.listeners[h];if(H)for(const te of Array.from(H))te(I)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,p.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(I)}_removeListener(h,I){this.listeners[h]&&(this.listeners[h].delete(I),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Zc=1e12;class nh{constructor(u){this.auth=u,this.counter=Zc,this._widgets=new Map}render(u,h){const I=this.counter;return this._widgets.set(I,new Jc(u,this.auth.name,h||{})),this.counter++,I}reset(u){var h;const I=u||Zc;null===(h=this._widgets.get(I))||void 0===h||h.delete(),this._widgets.delete(I)}getResponse(u){var h;return(null===(h=this._widgets.get(u||Zc))||void 0===h?void 0:h.getResponse())||""}execute(u){var h=this;return(0,p.A)(function*(){var I;return null===(I=h._widgets.get(u||Zc))||void 0===I||I.execute(),""})()}}class Jc{constructor(u,h,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const H="string"==typeof u?document.getElementById(u):u;pt(H,"argument-error",{appName:h}),this.container=H,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function no(v){const u=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)u.push(h.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":h}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Aa=Ss("rcb"),Mr=new gn(3e4,6e4);class Bu{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=$r().grecaptcha)||void 0===u||!u.render)}load(u,h=""){return pt(function rh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(h),u,"argument-error"),this.shouldResolveImmediately(h)&&Yn($r().grecaptcha)?Promise.resolve($r().grecaptcha):new Promise((I,H)=>{const te=$r().setTimeout(()=>{H(Ne(u,"network-request-failed"))},Mr.get());$r()[Aa]=()=>{$r().clearTimeout(te),delete $r()[Aa];const at=$r().grecaptcha;if(!at||!Yn(at))return void H(Ne(u,"internal-error"));const Mt=at.render;at.render=(vn,Xn)=>{const Sn=Mt(vn,Xn);return this.counter++,Sn},this.hostLanguage=h,I(at)},Ri(`${function zr(){return wi.recaptchaV2Script}()}?${(0,Y.Am)({onload:Aa,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(te),H(Ne(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var h;return!(null===(h=$r().grecaptcha)||void 0===h||!h.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ih{load(u){return(0,p.A)(function*(){return new nh(u)})()}clearedOneInstance(){}}const el="recaptcha",Ko={theme:"light",type:"image"};class sh{constructor(u,h,I=Object.assign({},Ko)){this.parameters=I,this.type=el,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(u),this.isInvisible="invisible"===this.parameters.size,pt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const H="string"==typeof h?document.getElementById(h):h;pt(H,this.auth,"argument-error"),this.container=H,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ih:new Bu,this.validateStartingState()}verify(){var u=this;return(0,p.A)(function*(){u.assertNotDestroyed();const h=yield u.render(),I=u.getAssertedRecaptcha();return I.getResponse(h)||new Promise(te=>{const Be=at=>{at&&(u.tokenChangeListeners.delete(Be),te(at))};u.tokenChangeListeners.add(Be),u.isInvisible&&I.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){pt(!this.parameters.sitekey,this.auth,"argument-error"),pt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return h=>{if(this.tokenChangeListeners.forEach(I=>I(h)),"function"==typeof u)u(h);else if("string"==typeof u){const I=$r()[u];"function"==typeof I&&I(h)}}}assertNotDestroyed(){pt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,p.A)(function*(){if(yield u.init(),!u.widgetId){let h=u.container;if(!u.isInvisible){const I=document.createElement("div");h.appendChild(I),h=I}u.widgetId=u.getAssertedRecaptcha().render(h,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,p.A)(function*(){pt(Dr()&&!ko(),u.auth,"internal-error"),yield function Ll(){let v=null;return new Promise(u=>{"complete"!==document.readyState?(v=()=>u(),window.addEventListener("load",v)):u()}).catch(u=>{throw v&&window.removeEventListener("load",v),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const h=yield function Pt(v){return ae.apply(this,arguments)}(u.auth);pt(h,u.auth,"internal-error"),u.parameters.sitekey=h})()}getAssertedRecaptcha(){return pt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fo{constructor(u,h){this.verificationId=u,this.onConfirmation=h}confirm(u){const h=jr._fromVerification(this.verificationId,u);return this.onConfirmation(h)}}function _c(){return(_c=(0,p.A)(function*(v,u,h){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const I=Vn(v),H=yield yc(I,u,(0,Y.Ku)(h));return new Fo(H,te=>ti(I,te))})).apply(this,arguments)}function tl(){return(tl=(0,p.A)(function*(v,u,h){const I=(0,Y.Ku)(v);yield Sr(!1,I,"phone");const H=yield yc(I.auth,u,(0,Y.Ku)(h));return new Fo(H,te=>_i(I,te))})).apply(this,arguments)}function Wa(){return(Wa=(0,p.A)(function*(v,u,h){const I=(0,Y.Ku)(v);if((0,oe._isFirebaseServerApp)(I.auth.app))return Promise.reject(We(I.auth));const H=yield yc(I.auth,u,(0,Y.Ku)(h));return new Fo(H,te=>tr(I,te))})).apply(this,arguments)}function yc(v,u,h){return ah.apply(this,arguments)}function ah(){return ah=(0,p.A)(function*(v,u,h){var I;const H=yield h.verify();try{let te;if(pt("string"==typeof H,v,"argument-error"),pt(h.type===el,v,"argument-error"),te="string"==typeof u?{phoneNumber:u}:u,"session"in te){const Be=te.session;if("phoneNumber"in te)return pt("enroll"===Be.type,v,"internal-error"),(yield function Fi(v,u){return Ee(v,"POST","/v2/accounts/mfaEnrollment:start",ze(v,u))}(v,{idToken:Be.credential,phoneEnrollmentInfo:{phoneNumber:te.phoneNumber,recaptchaToken:H}})).phoneSessionInfo.sessionInfo;{pt("signin"===Be.type,v,"internal-error");const at=(null===(I=te.multiFactorHint)||void 0===I?void 0:I.uid)||te.multiFactorUid;return pt(at,v,"missing-multi-factor-info"),(yield function ta(v,u){return Ee(v,"POST","/v2/accounts/mfaSignIn:start",ze(v,u))}(v,{mfaPendingCredential:Be.credential,mfaEnrollmentId:at,phoneSignInInfo:{recaptchaToken:H}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Be}=yield function ws(v,u){return mi.apply(this,arguments)}(v,{phoneNumber:te.phoneNumber,recaptchaToken:H});return Be}}finally{h._reset()}}),ah.apply(this,arguments)}function na(){return(na=(0,p.A)(function*(v,u){const h=(0,Y.Ku)(v);if((0,oe._isFirebaseServerApp)(h.auth.app))return Promise.reject(We(h.auth));yield Cn(h,u)})).apply(this,arguments)}let nl=(()=>{class v{constructor(h){this.providerId=v.PROVIDER_ID,this.auth=Vn(h)}verifyPhoneNumber(h,I){return yc(this.auth,h,(0,Y.Ku)(I))}static credential(h,I){return jr._fromVerification(h,I)}static credentialFromResult(h){return v.credentialFromTaggedObject(h)}static credentialFromError(h){return v.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:I,temporaryProof:H}=h;return I&&H?jr._fromTokenResponse(I,H):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function bc(v,u){return u?me(u):(pt(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Bl extends Vi{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return vr(u,this._buildIdpRequest())}_linkToIdToken(u,h){return vr(u,this._buildIdpRequest(h))}_getReauthenticationResolver(u){return vr(u,this._buildIdpRequest())}_buildIdpRequest(u){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(h.idToken=u),h}}function ym(v){return ei(v.auth,new Bl(v),v.bypassAuthState)}function vm(v){const{auth:u,user:h}=v;return pt(h,u,"internal-error"),gi(h,new Bl(v),v.bypassAuthState)}function bm(v){return Df.apply(this,arguments)}function Df(){return(Df=(0,p.A)(function*(v){const{auth:u,user:h}=v;return pt(h,u,"internal-error"),Cn(h,new Bl(v),v.bypassAuthState)})).apply(this,arguments)}class Ga{constructor(u,h,I,H,te=!1){this.auth=u,this.resolver=I,this.user=H,this.bypassAuthState=te,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var u=this;return new Promise(function(){var h=(0,p.A)(function*(I,H){u.pendingPromise={resolve:I,reject:H};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(te){u.reject(te)}});return function(I,H){return h.apply(this,arguments)}}())}onAuthEvent(u){var h=this;return(0,p.A)(function*(){const{urlResponse:I,sessionId:H,postBody:te,tenantId:Be,error:at,type:Mt}=u;if(at)return void h.reject(at);const vn={auth:h.auth,requestUri:I,sessionId:H,tenantId:Be||void 0,postBody:te||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Mt)(vn))}catch(Xn){h.reject(Xn)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return ym;case"linkViaPopup":case"linkViaRedirect":return bm;case"reauthViaPopup":case"reauthViaRedirect":return vm;default:Ue(this.auth,"internal-error")}}resolve(u){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qa=new gn(2e3,1e4);function ch(){return(ch=(0,p.A)(function*(v,u,h){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(Ne(v,"operation-not-supported-in-this-environment"));const I=Vn(v);It(v,u,yr);const H=bc(I,h);return new jl(I,"signInViaPopup",u,H).executeNotNull()})).apply(this,arguments)}function Do(){return(Do=(0,p.A)(function*(v,u,h){const I=(0,Y.Ku)(v);if((0,oe._isFirebaseServerApp)(I.auth.app))return Promise.reject(Ne(I.auth,"operation-not-supported-in-this-environment"));It(I.auth,u,yr);const H=bc(I.auth,h);return new jl(I.auth,"reauthViaPopup",u,H,I).executeNotNull()})).apply(this,arguments)}function Sf(){return(Sf=(0,p.A)(function*(v,u,h){const I=(0,Y.Ku)(v);It(I.auth,u,yr);const H=bc(I.auth,h);return new jl(I.auth,"linkViaPopup",u,H,I).executeNotNull()})).apply(this,arguments)}let jl=(()=>{class v extends Ga{constructor(h,I,H,te,Be){super(h,I,te,Be),this.provider=H,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var h=this;return(0,p.A)(function*(){const I=yield h.execute();return pt(I,h.auth,"internal-error"),I})()}onExecution(){var h=this;return(0,p.A)(function*(){$n(1===h.filter.length,"Popup operations only handle one event");const I=Ea();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],I),h.authWindow.associatedEvent=I,h.resolver._originValidation(h.auth).catch(H=>{h.reject(H)}),h.resolver._isIframeWebStorageSupported(h.auth,H=>{H||h.reject(Ne(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const h=()=>{var I,H;this.pollId=null!==(H=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==H&&H.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,qa.get())};h()}}return v.currentPopupAction=null,v})();const Hl="pendingRedirect",Wo=new Map;class ro extends Ga{constructor(u,h,I=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,I),this.eventId=null}execute(){var u=()=>super.execute,h=this;return(0,p.A)(function*(){let I=Wo.get(h.auth._key());if(!I){try{const te=(yield function Ec(v,u){return ra.apply(this,arguments)}(h.resolver,h.auth))?yield u().call(h):null;I=()=>Promise.resolve(te)}catch(H){I=()=>Promise.reject(H)}Wo.set(h.auth._key(),I)}return h.bypassAuthState||Wo.set(h.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(u){var h=()=>super.onAuthEvent,I=this;return(0,p.A)(function*(){if("signInViaRedirect"===u.type)return h().call(I,u);if("unknown"!==u.type){if(u.eventId){const H=yield I.auth._redirectUserForId(u.eventId);if(H)return I.user=H,h().call(I,u);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.A)(function*(){})()}cleanUp(){}}function ra(){return(ra=(0,p.A)(function*(v,u){const h=uh(u),I=lh(v);if(!(yield I._isAvailable()))return!1;const H="true"===(yield I._get(h));return yield I._remove(h),H})).apply(this,arguments)}function sl(v,u){return ol.apply(this,arguments)}function ol(){return(ol=(0,p.A)(function*(v,u){return lh(v)._set(uh(u),"true")})).apply(this,arguments)}function cl(v,u){Wo.set(v._key(),u)}function lh(v){return me(v._redirectPersistence)}function uh(v){return je(Hl,v.config.apiKey,v.name)}function dh(v,u,h){return function hh(v,u,h){return Ic.apply(this,arguments)}(v,u,h)}function Ic(){return(Ic=(0,p.A)(function*(v,u,h){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const I=Vn(v);It(v,u,yr),yield I._initializationPromise;const H=bc(I,h);return yield sl(H,I),H._openRedirect(I,u,"signInViaRedirect")})).apply(this,arguments)}function $l(v,u,h){return function Uu(v,u,h){return uo.apply(this,arguments)}(v,u,h)}function uo(){return(uo=(0,p.A)(function*(v,u,h){const I=(0,Y.Ku)(v);if(It(I.auth,u,yr),(0,oe._isFirebaseServerApp)(I.auth.app))return Promise.reject(We(I.auth));yield I.auth._initializationPromise;const H=bc(I.auth,h);yield sl(H,I.auth);const te=yield ia(I);return H._openRedirect(I.auth,u,"reauthViaRedirect",te)})).apply(this,arguments)}function Em(v,u,h){return function fh(v,u,h){return ju.apply(this,arguments)}(v,u,h)}function ju(){return(ju=(0,p.A)(function*(v,u,h){const I=(0,Y.Ku)(v);It(I.auth,u,yr),yield I.auth._initializationPromise;const H=bc(I.auth,h);yield Sr(!1,I,u.providerId),yield sl(H,I.auth);const te=yield ia(I);return H._openRedirect(I.auth,u,"linkViaRedirect",te)})).apply(this,arguments)}function ph(){return(ph=(0,p.A)(function*(v,u){return yield Vn(v)._initializationPromise,ts(v,u,!1)})).apply(this,arguments)}function ts(v,u){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,p.A)(function*(v,u,h=!1){if((0,oe._isFirebaseServerApp)(v.app))return Promise.reject(We(v));const I=Vn(v),H=bc(I,u),Be=yield new ro(I,H,h).execute();return Be&&!h&&(delete Be.user._redirectEventId,yield I._persistUserIfCurrent(Be.user),yield I._setRedirectUser(null,u)),Be})).apply(this,arguments)}function ia(v){return ll.apply(this,arguments)}function ll(){return(ll=(0,p.A)(function*(v){const u=Ea(`${v.uid}:::`);return v._redirectEventId=u,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),u})).apply(this,arguments)}class Hu{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let h=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(u,I)&&(h=!0,this.sendToConsumer(u,I),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Qa(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Da(v);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=u,h=!0)),h}sendToConsumer(u,h){var I;if(u.error&&!Da(u)){const H=(null===(I=u.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";h.onError(Ne(this.auth,H))}else h.onAuthEvent(u)}isEventForConsumer(u,h){const I=null===h.eventId||!!u.eventId&&u.eventId===h.eventId;return h.filter.includes(u.type)&&I}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($u(u))}saveEventToCache(u){this.cachedEventUids.add($u(u)),this.lastProcessedEventTime=Date.now()}}function $u(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(u=>u).join("-")}function Da({type:v,error:u}){return"unknown"===v&&"auth/no-auth-event"===u?.code}function Xa(v){return ul.apply(this,arguments)}function ul(){return(ul=(0,p.A)(function*(v,u={}){return Ee(v,"GET","/v1/projects",u)})).apply(this,arguments)}const Kl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wc=/^https?/;function gh(){return(gh=(0,p.A)(function*(v){if(v.config.emulator)return;const{authorizedDomains:u}=yield Xa(v);for(const h of u)try{if(xf(h))return}catch{}Ue(v,"unauthorized-domain")})).apply(this,arguments)}function xf(v){const u=br(),{protocol:h,hostname:I}=new URL(u);if(v.startsWith("chrome-extension://")){const Be=new URL(v);return""===Be.hostname&&""===I?"chrome-extension:"===h&&v.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===h&&Be.hostname===I}if(!wc.test(h))return!1;if(Kl.test(v))return I===v;const H=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+H+"|"+H+")$","i").test(I)}const _h=new gn(3e4,6e4);function Im(){const v=$r().___jsl;if(v?.H)for(const u of Object.keys(v.H))if(v.H[u].r=v.H[u].r||[],v.H[u].L=v.H[u].L||[],v.H[u].r=[...v.H[u].L],v.CP)for(let h=0;h<v.CP.length;h++)v.CP[h]=null}let Ya=null;const Go=new gn(5e3,15e3),Mf="__/auth/iframe",Pf="emulator/auth/iframe",di={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Of=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Za(v){const u=v.config;pt(u.authDomain,v,"auth-domain-config-required");const h=u.emulator?Wt(u,Pf):`https://${v.config.authDomain}/${Mf}`,I={apiKey:u.apiKey,appName:v.name,v:oe.SDK_VERSION},H=Of.get(v.config.apiHost);H&&(I.eid=H);const te=v._getFrameworks();return te.length&&(I.fw=te.join(",")),`${h}?${(0,Y.Am)(I).slice(1)}`}function ho(){return ho=(0,p.A)(function*(v){const u=yield function zu(v){return Ya=Ya||function wm(v){return new Promise((u,h)=>{var I,H,te;function Be(){Im(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Im(),h(Ne(v,"network-request-failed"))},timeout:_h.get()})}if(null!==(H=null===(I=$r().gapi)||void 0===I?void 0:I.iframes)&&void 0!==H&&H.Iframe)u(gapi.iframes.getContext());else{if(null===(te=$r().gapi)||void 0===te||!te.load){const at=Ss("iframefcb");return $r()[at]=()=>{gapi.load?Be():h(Ne(v,"network-request-failed"))},Ri(`${function fi(){return wi.gapiScript}()}?onload=${at}`).catch(Mt=>h(Mt))}Be()}}).catch(u=>{throw Ya=null,u})}(v),Ya}(v),h=$r().gapi;return pt(h,v,"internal-error"),u.open({where:document.body,url:Za(v),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:di,dontclear:!0},I=>new Promise(function(){var H=(0,p.A)(function*(te,Be){yield I.restyle({setHideOnLeave:!1});const at=Ne(v,"network-request-failed"),Mt=$r().setTimeout(()=>{Be(at)},Go.get());function vn(){$r().clearTimeout(Mt),te(I)}I.ping(vn).then(vn,()=>{Be(at)})});return function(te,Be){return H.apply(this,arguments)}}()))}),ho.apply(this,arguments)}const So={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dl{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Eo="__/auth/handler",yh="emulator/auth/handler",Cc=encodeURIComponent("fac");function kf(v,u,h,I,H,te){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,p.A)(function*(v,u,h,I,H,te){pt(v.config.authDomain,v,"auth-domain-config-required"),pt(v.config.apiKey,v,"invalid-api-key");const Be={apiKey:v.config.apiKey,appName:v.name,authType:h,redirectUrl:I,v:oe.SDK_VERSION,eventId:H};if(u instanceof yr){u.setDefaultLanguage(v.languageCode),Be.providerId=u.providerId||"",(0,Y.Im)(u.getCustomParameters())||(Be.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Xn,Sn]of Object.entries(te||{}))Be[Xn]=Sn}if(u instanceof cs){const Xn=u.getScopes().filter(Sn=>""!==Sn);Xn.length>0&&(Be.scopes=Xn.join(","))}v.tenantId&&(Be.tid=v.tenantId);const at=Be;for(const Xn of Object.keys(at))void 0===at[Xn]&&delete at[Xn];const Mt=yield v._getAppCheckToken(),vn=Mt?`#${Cc}=${encodeURIComponent(Mt)}`:"";return`${function Am({config:v}){return v.emulator?Wt(v,yh):`https://${v.authDomain}/${Eo}`}(v)}?${(0,Y.Am)(at).slice(1)}${vn}`})).apply(this,arguments)}const hl="webStorageSupport",Lf=class Ff{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fs,this._completeRedirectFn=ts,this._overrideRedirectResult=cl}_openPopup(u,h,I,H){var te=this;return(0,p.A)(function*(){var Be;$n(null===(Be=te.eventManagers[u._key()])||void 0===Be?void 0:Be.manager,"_initialize() not called before _openPopup()");const at=yield kf(u,h,I,br(),H);return function Nf(v,u,h,I=500,H=600){const te=Math.max((window.screen.availHeight-H)/2,0).toString(),Be=Math.max((window.screen.availWidth-I)/2,0).toString();let at="";const Mt=Object.assign(Object.assign({},So),{width:I.toString(),height:H.toString(),top:te,left:Be}),vn=(0,Y.ZQ)().toLowerCase();h&&(at=Ke(vn)?"_blank":h),Ie(vn)&&(u=u||"http://localhost",Mt.scrollbars="yes");const Xn=Object.entries(Mt).reduce((Yr,[so,Nc])=>`${Yr}${so}=${Nc},`,"");if(function gt(v=(0,Y.ZQ)()){var u;return tn(v)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(vn)&&"_self"!==at)return function Ac(v,u){const h=document.createElement("a");h.href=v,h.target=u;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(I)}(u||"",at),new dl(null);const Sn=window.open(u||"",at,Xn);pt(Sn,v,"popup-blocked");try{Sn.focus()}catch{}return new dl(Sn)}(u,at,Ea())})()}_openRedirect(u,h,I,H){var te=this;return(0,p.A)(function*(){return yield te._originValidation(u),function Xc(v){$r().location.href=v}(yield kf(u,h,I,br(),H)),new Promise(()=>{})})()}_initialize(u){const h=u._key();if(this.eventManagers[h]){const{manager:H,promise:te}=this.eventManagers[h];return H?Promise.resolve(H):($n(te,"If manager is not set, promise should be"),te)}const I=this.initAndGetManager(u);return this.eventManagers[h]={promise:I},I.catch(()=>{delete this.eventManagers[h]}),I}initAndGetManager(u){var h=this;return(0,p.A)(function*(){const I=yield function Ku(v){return ho.apply(this,arguments)}(u),H=new Hu(u);return I.register("authEvent",te=>(pt(te?.authEvent,u,"invalid-auth-event"),{status:H.onEvent(te.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[u._key()]={manager:H},h.iframes[u._key()]=I,H})()}_isIframeWebStorageSupported(u,h){this.iframes[u._key()].send(hl,{type:hl},H=>{var te;const Be=null===(te=H?.[0])||void 0===te?void 0:te[hl];void 0!==Be&&h(!!Be),Ue(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const h=u._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function mh(v){return gh.apply(this,arguments)}(u)),this.originValidationPromises[h]}get _shouldInitProactively(){return xt()||Se()||tn()}};class vh{constructor(u){this.factorId=u}_process(u,h,I){switch(h.type){case"enroll":return this._finalizeEnroll(u,h.credential,I);case"signin":return this._finalizeSignIn(u,h.credential);default:return ln("unexpected MultiFactorSessionType")}}}class bh extends vh{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new bh(u)}_finalizeEnroll(u,h,I){return function vo(v,u){return Ee(v,"POST","/v2/accounts/mfaEnrollment:finalize",ze(v,u))}(u,{idToken:h,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,h){return function wa(v,u){return Ee(v,"POST","/v2/accounts/mfaSignIn:finalize",ze(v,u))}(u,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wu=(()=>{class v{constructor(){}static assertion(h){return bh._fromCredential(h)}}return v.FACTOR_ID="phone",v})();var Ql="@firebase/auth";class Vf{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var h=this;return(0,p.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const h=this.auth.onIdTokenChanged(I=>{u(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,h),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const h=this.internalListeners.get(u);h&&(this.internalListeners.delete(u),h(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ja(){return window}(0,Y.XA)("authIdTokenMaxAge"),function ys(v){wi=v}({loadJS:v=>new Promise((u,h)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=u,I.onerror=H=>{const te=Ne("internal-error");te.customData=H,h(te)},I.type="text/javascript",I.charset="UTF-8",function Cm(){var v,u;return null!==(u=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==u?u:document}().appendChild(I)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Gu(v){(0,oe._registerComponent)(new ve.uA("auth",(u,{options:h})=>{const I=u.getProvider("app").getImmediate(),H=u.getProvider("heartbeat"),te=u.getProvider("app-check-internal"),{apiKey:Be,authDomain:at}=I.options;pt(Be&&!Be.includes(":"),"invalid-api-key",{appName:I.name});const Mt={apiKey:Be,authDomain:at,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zt(v)},vn=new Xe(I,H,te,Mt);return function ss(v,u){const h=u?.persistence||[],I=(Array.isArray(h)?h:[h]).map(me);u?.errorMap&&v._updateErrorMap(u.errorMap),v._initializeWithPersistence(I,u?.popupRedirectResolver)}(vn,h),vn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,h,I)=>{u.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ve.uA("auth-internal",u=>{const h=Vn(u.getProvider("auth").getImmediate());return new Vf(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Ql,"1.7.9",function Ih(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(v)),(0,oe.registerVersion)(Ql,"1.7.9","esm2017")}("Browser");function Xl(){return Xl=(0,p.A)(function*(v,u,h){var I;const{BuildInfo:H}=Ja();$n(u.sessionId,"AuthEvent did not contain a session ID");const te=yield function Ju(v){return ed.apply(this,arguments)}(u.sessionId),Be={};return tn()?Be.ibi=H.packageName:an()?Be.apn=H.packageName:Ue(v,"operation-not-supported-in-this-environment"),H.displayName&&(Be.appDisplayName=H.displayName),Be.sessionId=te,kf(v,h,u.type,void 0,null!==(I=u.eventId)&&void 0!==I?I:void 0,Be)}),Xl.apply(this,arguments)}function Yu(){return(Yu=(0,p.A)(function*(v){const{BuildInfo:u}=Ja(),h={};tn()?h.iosBundleId=u.packageName:an()?h.androidPackageName=u.packageName:Ue(v,"operation-not-supported-in-this-environment"),yield Xa(v,h)})).apply(this,arguments)}function ec(){return(ec=(0,p.A)(function*(v,u,h){const{cordova:I}=Ja();let H=()=>{};try{yield new Promise((te,Be)=>{let at=null;function Mt(){var Sn;te();const Yr=null===(Sn=I.plugins.browsertab)||void 0===Sn?void 0:Sn.close;"function"==typeof Yr&&Yr(),"function"==typeof h?.close&&h.close()}function vn(){at||(at=window.setTimeout(()=>{Be(Ne(v,"redirect-cancelled-by-user"))},2e3))}function Xn(){"visible"===document?.visibilityState&&vn()}u.addPassiveListener(Mt),document.addEventListener("resume",vn,!1),an()&&document.addEventListener("visibilitychange",Xn,!1),H=()=>{u.removePassiveListener(Mt),document.removeEventListener("resume",vn,!1),document.removeEventListener("visibilitychange",Xn,!1),at&&window.clearTimeout(at)}})}finally{H()}})).apply(this,arguments)}function ed(){return(ed=(0,p.A)(function*(v){const u=function jf(v){if($n(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const u=new ArrayBuffer(v.length),h=new Uint8Array(u);for(let I=0;I<v.length;I++)h[I]=v.charCodeAt(I);return h}(v),h=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(h)).map(H=>H.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Rm extends Hu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(h=>h(u)),super.onEvent(u)}initialized(){var u=this;return(0,p.A)(function*(){yield u.initPromise})()}}function Th(v){return $f.apply(this,arguments)}function $f(){return($f=(0,p.A)(function*(v){const u=yield Ah()._get(zf(v));return u&&(yield Ah()._remove(zf(v))),u})).apply(this,arguments)}function h_(){const v=[];for(let h=0;h<20;h++){const I=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return v.join("")}function Ah(){return me(Ka)}function zf(v){return je("authEvent",v.config.apiKey,v.name)}function gl(v){if(!v?.includes("?"))return{};const[u,...h]=v.split("?");return(0,Y.I9)(h.join("?"))}const Ch=class Jl{constructor(){this._redirectPersistence=Fs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ts,this._overrideRedirectResult=cl}_initialize(u){var h=this;return(0,p.A)(function*(){const I=u._key();let H=h.eventManagers.get(I);return H||(H=new Rm(u),h.eventManagers.set(I,H),h.attachCallbackListeners(u,H)),H})()}_openPopup(u){Ue(u,"operation-not-supported-in-this-environment")}_openRedirect(u,h,I,H){var te=this;return(0,p.A)(function*(){!function Zu(v){var u,h,I,H,te,Be,at,Mt,vn,Xn;const Sn=Ja();pt("function"==typeof(null===(u=Sn?.universalLinks)||void 0===u?void 0:u.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),pt(typeof(null===(h=Sn?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),pt("function"==typeof(null===(te=null===(H=null===(I=Sn?.cordova)||void 0===I?void 0:I.plugins)||void 0===H?void 0:H.browsertab)||void 0===te?void 0:te.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pt("function"==typeof(null===(Mt=null===(at=null===(Be=Sn?.cordova)||void 0===Be?void 0:Be.plugins)||void 0===at?void 0:at.browsertab)||void 0===Mt?void 0:Mt.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pt("function"==typeof(null===(Xn=null===(vn=Sn?.cordova)||void 0===vn?void 0:vn.InAppBrowser)||void 0===Xn?void 0:Xn.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const Be=yield te._initialize(u);yield Be.initialized(),Be.resetRedirect(),function al(){Wo.clear()}(),yield te._originValidation(u);const at=function Hf(v,u,h=null){return{type:u,eventId:h,urlResponse:null,sessionId:h_(),postBody:null,tenantId:v.tenantId,error:Ne(v,"no-auth-event")}}(u,I,H);yield function td(v,u){return Ah()._set(zf(v),u)}(u,at);const Mt=yield function Xu(v,u,h){return Xl.apply(this,arguments)}(u,at,h),vn=yield function wh(v){const{cordova:u}=Ja();return new Promise(h=>{u.plugins.browsertab.isAvailable(I=>{let H=null;I?u.plugins.browsertab.openUrl(v):H=u.InAppBrowser.open(v,function hi(v=(0,Y.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),h(H)})})}(Mt);return function ml(v,u,h){return ec.apply(this,arguments)}(u,Be,vn)})()}_isIframeWebStorageSupported(u,h){throw new Error("Method not implemented.")}_originValidation(u){const h=u._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Dm(v){return Yu.apply(this,arguments)}(u)),this.originValidationPromises[h]}attachCallbackListeners(u,h){const{universalLinks:I,handleOpenURL:H,BuildInfo:te}=Ja(),Be=setTimeout((0,p.A)(function*(){yield Th(u),h.onEvent(rd())}),500),at=function(){var Xn=(0,p.A)(function*(Sn){clearTimeout(Be);const Yr=yield Th(u);let so=null;Yr&&Sn?.url&&(so=function nd(v,u){var h,I;const H=function Zl(v){const u=gl(v),h=u.link?decodeURIComponent(u.link):void 0,I=gl(h).link,H=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return gl(H).link||H||I||h||v}(u);if(H.includes("/__/auth/callback")){const te=gl(H),Be=te.firebaseError?function Yl(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(te.firebaseError)):null,at=null===(I=null===(h=Be?.code)||void 0===h?void 0:h.split("auth/"))||void 0===I?void 0:I[1],Mt=at?Ne(at):null;return Mt?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Mt,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:H,postBody:null}}return null}(Yr,Sn.url)),h.onEvent(so||rd())});return function(Yr){return Xn.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,at);const Mt=H,vn=`${te.packageName.toLowerCase()}://`;Ja().handleOpenURL=function(){var Xn=(0,p.A)(function*(Sn){if(Sn.toLowerCase().startsWith(vn)&&at({url:Sn}),"function"==typeof Mt)try{Mt(Sn)}catch(Yr){console.error(Yr)}});return function(Sn){return Xn.apply(this,arguments)}}()}};function rd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ne("no-auth-event")}}function Ra(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Rc(v=(0,Y.ZQ)()){return!("file:"!==Ra()&&"ionic:"!==Ra()&&"capacitor:"!==Ra()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function _l(){try{const v=self.localStorage,u=Ea();if(v)return v.setItem(u,"1"),v.removeItem(u),!function ad(v=(0,Y.ZQ)()){return function tu(){return(0,Y.lT)()&&11===document?.documentMode}()||function od(v=(0,Y.ZQ)()){return/Edge\/\d+/.test(v)}(v)}()||(0,Y.zW)()}catch{return nu()&&(0,Y.zW)()}return!1}function nu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cd(){return(function eu(){return"http:"===Ra()||"https:"===Ra()}()||(0,Y.sr)()||Rc())&&!function sd(){return(0,Y.lV)()||(0,Y.Ll)()}()&&_l()&&!nu()}function Gf(){return Rc()&&typeof document<"u"}function yl(){return(yl=(0,p.A)(function*(){return!!Gf()&&new Promise(v=>{const u=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),v(!0)})})})).apply(this,arguments)}const ji={LOCAL:"local",NONE:"none",SESSION:"session"},xc=pt,Vs="persistence";function Cs(v){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.A)(function*(v){yield v._initializationPromise;const u=ru(),h=je(Vs,v.config.apiKey,v.name);u&&u.setItem(h,v._getPersistence())})).apply(this,arguments)}function ru(){var v;try{return(null===(v=function Sh(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const qf=pt;class xa{constructor(){this.browserResolver=me(Lf),this.cordovaResolver=me(Ch),this.underlyingResolver=null,this._redirectPersistence=Fs,this._completeRedirectFn=ts,this._overrideRedirectResult=cl}_initialize(u){var h=this;return(0,p.A)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,h,I,H){var te=this;return(0,p.A)(function*(){return yield te.selectUnderlyingResolver(),te.assertedUnderlyingResolver._openPopup(u,h,I,H)})()}_openRedirect(u,h,I,H){var te=this;return(0,p.A)(function*(){return yield te.selectUnderlyingResolver(),te.assertedUnderlyingResolver._openRedirect(u,h,I,H)})()}_isIframeWebStorageSupported(u,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,h)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return Gf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,p.A)(function*(){if(u.underlyingResolver)return;const h=yield function Dh(){return yl.apply(this,arguments)}();u.underlyingResolver=h?u.cordovaResolver:u.browserResolver})()}}function Qf(v){return v.unwrap()}function xm(v){return bl(v)}function bl(v){const{_tokenResponse:u}=v instanceof Y.g?v.customData:v;if(!u)return null;if(!(v instanceof Y.g)&&"temporaryProof"in u&&"phoneNumber"in u)return nl.credentialFromResult(v);const h=u.providerId;if(!h||h===De.PASSWORD)return null;let I;switch(h){case De.GOOGLE:I=As;break;case De.FACEBOOK:I=Hr;break;case De.GITHUB:I=Bi;break;case De.TWITTER:I=eo;break;default:const{oauthIdToken:H,oauthAccessToken:te,oauthTokenSecret:Be,pendingToken:at,nonce:Mt}=u;return te||Be||H||at?at?h.startsWith("saml.")?ai._create(h,at):fr._fromParams({providerId:h,signInMethod:h,pendingToken:at,idToken:H,accessToken:te}):new kr(h).credential({idToken:H,accessToken:te,rawNonce:Mt}):null}return v instanceof Y.g?I.credentialFromError(v):I.credentialFromResult(v)}function io(v,u){return u.catch(h=>{throw h instanceof Y.g&&function Yf(v,u){var h;const I=null===(h=u.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new ld(v,function qc(v,u){var h;const I=(0,Y.Ku)(v),H=u;return pt(u.customData.operationType,I,"argument-error"),pt(null===(h=H.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,I,"argument-error"),Co._fromError(I,H)}(v,u));else if(I){const H=bl(u),te=u;H&&(te.credential=H,te.tenantId=I.tenantId||void 0,te.email=I.email||void 0,te.phoneNumber=I.phoneNumber||void 0)}}(v,h),h}).then(h=>{const H=h.user;return{operationType:h.operationType,credential:xm(h),additionalUserInfo:es(h),user:Bs.getOrCreate(H)}})}function oa(v,u){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,p.A)(function*(v,u){const h=yield u;return{verificationId:h.verificationId,confirm:I=>io(v,h.confirm(I))}})).apply(this,arguments)}class ld{constructor(u,h){this.resolver=h,this.auth=function Xf(v){return v.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return io(Qf(this.auth),this.resolver.resolveSignIn(u))}}class Bs{constructor(u){this._delegate=u,this.multiFactor=function Qc(v){const u=(0,Y.Ku)(v);return Ci.has(u)||Ci.set(u,th._fromUser(u)),Ci.get(u)}(u)}static getOrCreate(u){return Bs.USER_MAP.has(u)||Bs.USER_MAP.set(u,new Bs(u)),Bs.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var h=this;return(0,p.A)(function*(){return io(h.auth,_i(h._delegate,u))})()}linkWithPhoneNumber(u,h){var I=this;return(0,p.A)(function*(){return oa(I.auth,function Vl(v,u,h){return tl.apply(this,arguments)}(I._delegate,u,h))})()}linkWithPopup(u){var h=this;return(0,p.A)(function*(){return io(h.auth,function Ul(v,u,h){return Sf.apply(this,arguments)}(h._delegate,u,xa))})()}linkWithRedirect(u){var h=this;return(0,p.A)(function*(){return yield Cs(Vn(h.auth)),Em(h._delegate,u,xa)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var h=this;return(0,p.A)(function*(){return io(h.auth,tr(h._delegate,u))})()}reauthenticateWithPhoneNumber(u,h){return oa(this.auth,function oh(v,u,h){return Wa.apply(this,arguments)}(this._delegate,u,h))}reauthenticateWithPopup(u){return io(this.auth,function il(v,u,h){return Do.apply(this,arguments)}(this._delegate,u,xa))}reauthenticateWithRedirect(u){var h=this;return(0,p.A)(function*(){return yield Cs(Vn(h.auth)),$l(h._delegate,u,xa)})()}sendEmailVerification(u){return function R(v,u){return B.apply(this,arguments)}(this._delegate,u)}unlink(u){var h=this;return(0,p.A)(function*(){return yield function Ut(v,u){return kn.apply(this,arguments)}(h._delegate,u),h})()}updateEmail(u){return function yn(v,u){const h=(0,Y.Ku)(v);return(0,oe._isFirebaseServerApp)(h.auth.app)?Promise.reject(We(h.auth)):cr(h,u,null)}(this._delegate,u)}updatePassword(u){return function jn(v,u){return cr((0,Y.Ku)(v),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function vc(v,u){return na.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Dn(v,u){return mn.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,h){return function ee(v,u,h){return He.apply(this,arguments)}(this._delegate,u,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bs.USER_MAP=new WeakMap;const Pc=pt;let xh=(()=>{class v{constructor(h,I){if(this.app=h,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:H}=h.options;Pc(H,"invalid-api-key",{appName:h.name}),Pc(H,"invalid-api-key",{appName:h.name});const te=typeof window<"u"?xa:void 0;this._delegate=I.initialize({options:{persistence:ud(H,h.name),popupRedirectResolver:te}}),this._delegate._updateErrorMap(Ot),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,I){!function $s(v,u,h){const I=Vn(v);pt(I._canInitEmulator,I,"emulator-config-failed"),pt(/^https?:\/\//.test(u),I,"invalid-emulator-scheme");const H=!!h?.disableWarnings,te=Ms(u),{host:Be,port:at}=function zs(v){const u=Ms(v),h=/(\/\/)?([^?#/]+)/.exec(v.substr(u.length));if(!h)return{host:"",port:null};const I=h[2].split("@").pop()||"",H=/^(\[[^\]]+\])(:|$)/.exec(I);if(H){const te=H[1];return{host:te,port:Ks(I.substr(te.length+1))}}{const[te,Be]=I.split(":");return{host:te,port:Ks(Be)}}}(u);I.config.emulator={url:`${te}//${Be}${null===at?"":`:${at}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Be,port:at,protocol:te.replace(":",""),options:Object.freeze({disableWarnings:H})}),H||function Gi(){function v(){const u=document.createElement("p"),h=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,h,I)}applyActionCode(h){return function Jo(v,u){return Po.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return ya(this._delegate,h)}confirmPasswordReset(h,I){return function Gc(v,u,h){return $o.apply(this,arguments)}(this._delegate,h,I)}createUserWithEmailAndPassword(h,I){var H=this;return(0,p.A)(function*(){return io(H._delegate,function va(v,u,h){return ea.apply(this,arguments)}(H._delegate,h,I))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function _(v,u){return L.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function Z(v,u){const h=Zi.parseLink(u);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,p.A)(function*(){Pc(cd(),h._delegate,"operation-not-supported-in-this-environment");const I=yield function zl(v,u){return ph.apply(this,arguments)}(h._delegate,xa);return I?io(h._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Kf(v,u){Vn(v)._logFramework(u)}(this._delegate,h)}onAuthStateChanged(h,I,H){const{next:te,error:Be,complete:at}=iu(h,I,H);return this._delegate.onAuthStateChanged(te,Be,at)}onIdTokenChanged(h,I,H){const{next:te,error:Be,complete:at}=iu(h,I,H);return this._delegate.onIdTokenChanged(te,Be,at)}sendSignInLinkToEmail(h,I){return function hc(v,u,h){return Ns.apply(this,arguments)}(this._delegate,h,I)}sendPasswordResetEmail(h,I){return function dc(v,u,h){return _a.apply(this,arguments)}(this._delegate,h,I||void 0)}setPersistence(h){var I=this;return(0,p.A)(function*(){let H;switch(function Rh(v,u){xc(Object.values(ji).includes(u),v,"invalid-persistence-type"),(0,Y.lV)()?xc(u!==ji.SESSION,v,"unsupported-persistence-type"):(0,Y.Ll)()?xc(u===ji.NONE,v,"unsupported-persistence-type"):nu()?xc(u===ji.NONE||u===ji.LOCAL&&(0,Y.zW)(),v,"unsupported-persistence-type"):xc(u===ji.NONE||_l(),v,"unsupported-persistence-type")}(I._delegate,h),h){case ji.SESSION:H=Fs;break;case ji.LOCAL:H=(yield me(Xs)._isAvailable())?Xs:Ka;break;case ji.NONE:H=be;break;default:return Ue("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(H)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return io(this._delegate,function g(v){return M.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return io(this._delegate,ti(this._delegate,h))}signInWithCustomToken(h){return io(this._delegate,function co(v,u){return Qs.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,I){return io(this._delegate,function kl(v,u,h){return(0,oe._isFirebaseServerApp)(v.app)?Promise.reject(We(v)):ti((0,Y.Ku)(v),Ni.credential(u,h)).catch(function(){var I=(0,p.A)(function*(H){throw"auth/password-does-not-meet-requirements"===H.code&&ga(v),H});return function(H){return I.apply(this,arguments)}}())}(this._delegate,h,I))}signInWithEmailLink(h,I){return io(this._delegate,function w(v,u,h){return C.apply(this,arguments)}(this._delegate,h,I))}signInWithPhoneNumber(h,I){return oa(this._delegate,function Cf(v,u,h){return _c.apply(this,arguments)}(this._delegate,h,I))}signInWithPopup(h){var I=this;return(0,p.A)(function*(){return Pc(cd(),I._delegate,"operation-not-supported-in-this-environment"),io(I._delegate,function rl(v,u,h){return ch.apply(this,arguments)}(I._delegate,h,xa))})()}signInWithRedirect(h){var I=this;return(0,p.A)(function*(){return Pc(cd(),I._delegate,"operation-not-supported-in-this-environment"),yield Cs(I._delegate),dh(I._delegate,h,xa)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function zo(v,u){return Oo.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=ji,v})();function iu(v,u,h){let I=v;"function"!=typeof v&&({next:I,error:u,complete:h}=v);const H=I;return{next:Be=>H(Be&&Bs.getOrCreate(Be)),error:u,complete:h}}function ud(v,u){const h=function vl(v,u){const h=ru();if(!h)return[];const I=je(Vs,v,u);switch(h.getItem(I)){case ji.NONE:return[be];case ji.LOCAL:return[Xs,Fs];case ji.SESSION:return[Fs];default:return[]}}(v,u);if(typeof self<"u"&&!h.includes(Xs)&&h.push(Xs),typeof window<"u")for(const I of[Ka,Fs])h.includes(I)||h.push(I);return h.includes(be)||h.push(be),h}class Qo{constructor(){this.providerId="phone",this._delegate=new nl(Qf(J.A.auth()))}static credential(u,h){return nl.credential(u,h)}verifyPhoneNumber(u,h){return this._delegate.verifyPhoneNumber(u,h)}unwrap(){return this._delegate}}Qo.PHONE_SIGN_IN_METHOD=nl.PHONE_SIGN_IN_METHOD,Qo.PROVIDER_ID=nl.PROVIDER_ID;const Oc=pt;class dd{constructor(u,h,I=J.A.app()){var H;Oc(null===(H=I.options)||void 0===H?void 0:H.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new sh(I.auth(),u,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Mh(v){v.INTERNAL.registerComponent(new ve.uA("auth-compat",u=>{const h=u.getProvider("app-compat").getImmediate(),I=u.getProvider("auth");return new xh(h,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ni,FacebookAuthProvider:Hr,GithubAuthProvider:Bi,GoogleAuthProvider:As,OAuthProvider:kr,SAMLAuthProvider:oo,PhoneAuthProvider:Qo,PhoneMultiFactorGenerator:Wu,RecaptchaVerifier:dd,TwitterAuthProvider:eo,Auth:xh,AuthCredential:Vi,Error:Y.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.5.14")}(J.A)},467:(nn,tt,j)=>{function p(oe,Y,Oe,Le,ve,Te,De){try{var ce=oe[Te](De),ge=ce.value}catch(Pe){return void Oe(Pe)}ce.done?Y(ge):Promise.resolve(ge).then(Le,ve)}function J(oe){return function(){var Y=this,Oe=arguments;return new Promise(function(Le,ve){var Te=oe.apply(Y,Oe);function De(ge){p(Te,Le,ve,De,ce,"next",ge)}function ce(ge){p(Te,Le,ve,De,ce,"throw",ge)}De(void 0)})}}j.d(tt,{A:()=>J})},1635:(nn,tt,j)=>{function Y(Ve,Ye){var ut={};for(var ze in Ve)Object.prototype.hasOwnProperty.call(Ve,ze)&&Ye.indexOf(ze)<0&&(ut[ze]=Ve[ze]);if(null!=Ve&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(ze=Object.getOwnPropertySymbols(Ve);Ee<ze.length;Ee++)Ye.indexOf(ze[Ee])<0&&Object.prototype.propertyIsEnumerable.call(Ve,ze[Ee])&&(ut[ze[Ee]]=Ve[ze[Ee]])}return ut}function Pe(Ve,Ye,ut,ze){return new(ut||(ut=Promise))(function(lt,fn){function zn(Pn){try{en(ze.next(Pn))}catch(Gn){fn(Gn)}}function dn(Pn){try{en(ze.throw(Pn))}catch(Gn){fn(Gn)}}function en(Pn){Pn.done?lt(Pn.value):function Ee(lt){return lt instanceof ut?lt:new ut(function(fn){fn(lt)})}(Pn.value).then(zn,dn)}en((ze=ze.apply(Ve,Ye||[])).next())})}function de(Ve){return this instanceof de?(this.v=Ve,this):new de(Ve)}function Ue(Ve,Ye,ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,ze=ut.apply(Ve,Ye||[]),lt=[];return Ee=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),zn("next"),zn("throw"),zn("return",function fn(On){return function(Yn){return Promise.resolve(Yn).then(On,Gn)}}),Ee[Symbol.asyncIterator]=function(){return this},Ee;function zn(On,Yn){ze[On]&&(Ee[On]=function(Ar){return new Promise(function(Er,Pt){lt.push([On,Ar,Er,Pt])>1||dn(On,Ar)})},Yn&&(Ee[On]=Yn(Ee[On])))}function dn(On,Yn){try{!function en(On){On.value instanceof de?Promise.resolve(On.value.v).then(Pn,Gn):Tr(lt[0][2],On)}(ze[On](Yn))}catch(Ar){Tr(lt[0][3],Ar)}}function Pn(On){dn("next",On)}function Gn(On){dn("throw",On)}function Tr(On,Yn){On(Yn),lt.shift(),lt.length&&dn(lt[0][0],lt[0][1])}}function Je(Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Ye=Ve[Symbol.asyncIterator];return Ye?Ye.call(Ve):(Ve=function Et(Ve){var Ye="function"==typeof Symbol&&Symbol.iterator,ut=Ye&&Ve[Ye],ze=0;if(ut)return ut.call(Ve);if(Ve&&"number"==typeof Ve.length)return{next:function(){return Ve&&ze>=Ve.length&&(Ve=void 0),{value:Ve&&Ve[ze++],done:!Ve}}};throw new TypeError(Ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ve),ut={},ze("next"),ze("throw"),ze("return"),ut[Symbol.asyncIterator]=function(){return this},ut);function ze(lt){ut[lt]=Ve[lt]&&function(fn){return new Promise(function(zn,dn){!function Ee(lt,fn,zn,dn){Promise.resolve(dn).then(function(en){lt({value:en,done:zn})},fn)}(zn,dn,(fn=Ve[lt](fn)).done,fn.value)})}}}j.d(tt,{AQ:()=>Ue,N3:()=>de,Tt:()=>Y,sH:()=>Pe,xN:()=>Je}),"function"==typeof SuppressedError&&SuppressedError}},nn=>{nn(nn.s=536)}]);