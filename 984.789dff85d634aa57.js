"use strict";(self.webpackChunktv_manager=self.webpackChunktv_manager||[]).push([[984],{1984:(te,_,d)=>{d.r(_),d.d(_,{TelevisoresPageModule:()=>ee});var v=d(7970),r=d(9417),g=d(177),m=d(17),e=d(7705),p=d(3787),b=d(4730),f=d(4965);function T(s,a){1&s&&(e.j41(0,"small"),e.EFF(1,"El nombre es requerido"),e.k0s())}function F(s,a){if(1&s&&(e.j41(0,"div",46),e.DNE(1,T,2,0,"small",47),e.k0s()),2&s){const t=e.XpG();let i;e.R7$(1),e.Y8G("ngIf",null==(i=t.newTvForm.get("nombre"))||null==i.errors?null:i.errors.required)}}function I(s,a){if(1&s&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(1),e.JRh(t.nombre)}}function M(s,a){1&s&&(e.j41(0,"small"),e.EFF(1,"Debe seleccionar un cliente"),e.k0s())}function P(s,a){if(1&s&&(e.j41(0,"div",46),e.DNE(1,M,2,0,"small",47),e.k0s()),2&s){const t=e.XpG(2);let i;e.R7$(1),e.Y8G("ngIf",null==(i=t.newTvForm.get("clienteId"))||null==i.errors?null:i.errors.required)}}function C(s,a){if(1&s&&(e.j41(0,"div",27)(1,"label",48),e.EFF(2,"Cliente"),e.k0s(),e.j41(3,"select",49)(4,"option",36),e.EFF(5,"Seleccionar cliente"),e.k0s(),e.DNE(6,I,2,2,"option",50),e.k0s(),e.DNE(7,P,2,1,"div",30),e.k0s()),2&s){const t=e.XpG();let i;e.R7$(6),e.Y8G("ngForOf",t.clientesDisponibles),e.R7$(1),e.Y8G("ngIf",(null==(i=t.newTvForm.get("clienteId"))?null:i.invalid)&&(null==(i=t.newTvForm.get("clienteId"))?null:i.touched))}}function k(s,a){1&s&&(e.j41(0,"small"),e.EFF(1,"La ubicaci\xf3n es requerida"),e.k0s())}function O(s,a){if(1&s&&(e.j41(0,"div",46),e.DNE(1,k,2,0,"small",47),e.k0s()),2&s){const t=e.XpG();let i;e.R7$(1),e.Y8G("ngIf",null==(i=t.newTvForm.get("ubicacion"))||null==i.errors?null:i.errors.required)}}function x(s,a){1&s&&(e.j41(0,"small"),e.EFF(1,"Debe seleccionar una resoluci\xf3n"),e.k0s())}function y(s,a){if(1&s&&(e.j41(0,"div",46),e.DNE(1,x,2,0,"small",47),e.k0s()),2&s){const t=e.XpG();let i;e.R7$(1),e.Y8G("ngIf",null==(i=t.newTvForm.get("resolucion"))||null==i.errors?null:i.errors.required)}}function j(s,a){if(1&s&&(e.j41(0,"div",52),e.nrm(1,"i",53),e.j41(2,"h3"),e.EFF(3),e.k0s(),e.j41(4,"p",3),e.EFF(5,'Haz clic en el bot\xf3n "Nuevo Televisor" para comenzar'),e.k0s()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(t.emptyStateMessage)}}const E=function(s,a,t){return{"bg-success":s,"bg-primary":a,"bg-secondary":t}};function D(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",5)(1,"div",56)(2,"div",57)(3,"div",58)(4,"div",59),e.nrm(5,"i",60),e.j41(6,"h5",61),e.EFF(7),e.k0s()(),e.j41(8,"div",59)(9,"span",62),e.EFF(10),e.k0s(),e.j41(11,"button",63),e.nrm(12,"i",64),e.k0s()()(),e.j41(13,"p",2)(14,"strong"),e.EFF(15,"Cliente:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"p",2),e.nrm(18,"i",65),e.EFF(19),e.k0s(),e.j41(20,"p",2),e.EFF(21),e.k0s(),e.j41(22,"div",66)(23,"span"),e.nrm(24,"i",67),e.EFF(25),e.k0s(),e.j41(26,"button",68),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.openImageModal(o))}),e.EFF(27," Gestionar Im\xe1genes "),e.k0s()()()()()}if(2&s){const t=a.$implicit;e.R7$(7),e.JRh(t.nombre),e.R7$(2),e.Y8G("ngClass",e.sMw(7,E,"En_linea"===t.estado,"Activo"===t.estado,"Desconectado"===t.estado)),e.R7$(1),e.JRh(t.estado),e.R7$(6),e.SpI(" ",t.clienteNombre,""),e.R7$(3),e.SpI(" ",t.ubicacion," "),e.R7$(2),e.SpI("Resoluci\xf3n: ",t.resolucion,""),e.R7$(4),e.SpI(" ",t.imagenes," im\xe1genes ")}}function S(s,a){if(1&s&&(e.j41(0,"div",54),e.DNE(1,D,28,11,"div",55),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.filteredTvs)}}function w(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",86),e.nrm(1,"i",87),e.j41(2,"h5"),e.EFF(3,"Arrastra y suelta m\xfaltiples im\xe1genes aqu\xed"),e.k0s(),e.j41(4,"p",3),e.EFF(5,"o haz clic para seleccionar archivos"),e.k0s(),e.j41(6,"input",88,89),e.bIt("change",function(n){e.eBV(t);const o=e.XpG(3);return e.Njj(o.onMultipleFileSelect(n))}),e.k0s(),e.j41(8,"button",17),e.bIt("click",function(){e.eBV(t);const n=e.sdS(7);return e.Njj(n.click())}),e.nrm(9,"i",18),e.EFF(10," Seleccionar Im\xe1genes "),e.k0s()()}}function $(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",98)(1,"div",99),e.nrm(2,"i",100),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"button",101),e.bIt("click",function(){const o=e.eBV(t).index,l=e.XpG(4);return e.Njj(l.removeSelectedFile(o))}),e.nrm(6,"i",102),e.k0s()()()}if(2&s){const t=a.$implicit;e.R7$(4),e.JRh(t.name)}}function N(s,a){if(1&s&&(e.j41(0,"div",103)(1,"div",104),e.EFF(2),e.nI1(3,"number"),e.k0s()()),2&s){const t=e.XpG(4);e.R7$(1),e.xc7("width",t.uploadProgress,"%"),e.R7$(1),e.SpI(" ",e.i5U(3,3,t.uploadProgress,"1.0-0"),"% ")}}function R(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",90)(1,"h6"),e.EFF(2),e.k0s(),e.j41(3,"div",91),e.DNE(4,$,7,1,"div",92),e.k0s(),e.j41(5,"div",93)(6,"button",94),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.uploadMultipleImages())}),e.nrm(7,"i",95),e.EFF(8),e.k0s(),e.j41(9,"button",96),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.selectedFiles=[])}),e.EFF(10," Cancelar "),e.k0s()(),e.DNE(11,N,4,6,"div",97),e.k0s()}if(2&s){const t=e.XpG(3);e.R7$(2),e.SpI("Archivos seleccionados (",t.selectedFiles.length,"):"),e.R7$(2),e.Y8G("ngForOf",t.selectedFiles),e.R7$(2),e.Y8G("disabled",t.isUploading),e.R7$(2),e.SpI(" ",t.isUploading?"Subiendo...":"Subir Todas"," "),e.R7$(1),e.Y8G("disabled",t.isUploading),e.R7$(2),e.Y8G("ngIf",t.isUploading)}}function G(s,a){1&s&&(e.j41(0,"span",125),e.nrm(1,"i",126),e.EFF(2," 24/7 Activo "),e.k0s())}function V(s,a){if(1&s&&(e.j41(0,"span",127),e.nrm(1,"i",128),e.EFF(2),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.Lme(" ",t.horarios.length," horario",t.horarios.length>1?"s":""," ")}}function X(s,a){1&s&&(e.j41(0,"span",129),e.nrm(1,"i",130),e.EFF(2," Sin programar "),e.k0s())}function B(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",133)(1,"small")(2,"strong"),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.k0s(),e.j41(6,"button",134),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG(2).$implicit,c=e.XpG(4);return e.Njj(c.removeSchedule(l,o.id))}),e.nrm(7,"i",72),e.k0s()()}if(2&s){const t=a.$implicit,i=e.XpG(6);e.R7$(3),e.JRh(i.getDaysText(t.dias)),e.R7$(2),e.Lme(" ",t.horaInicio," - ",t.horaFin," ")}}function Y(s,a){if(1&s&&(e.j41(0,"div",131),e.DNE(1,B,8,3,"div",132),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("ngForOf",t.horarios)}}function A(s,a){1&s&&(e.j41(0,"div",3)(1,"small"),e.nrm(2,"i",135),e.EFF(3," Esta imagen necesita ser programada "),e.k0s()())}function U(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",107)(1,"div",108),e.nrm(2,"img",109),e.j41(3,"div",110)(4,"button",111),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.programarImagen(o))}),e.nrm(5,"i",112),e.k0s(),e.j41(6,"button",113),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.editImage(o))}),e.nrm(7,"i",114),e.k0s(),e.j41(8,"button",115),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.deleteImage(o.id))}),e.nrm(9,"i",116),e.k0s()()(),e.j41(10,"div",117)(11,"h6",118),e.EFF(12),e.k0s(),e.j41(13,"div",119),e.DNE(14,G,3,0,"span",120),e.DNE(15,V,3,2,"span",121),e.DNE(16,X,3,0,"span",122),e.k0s(),e.DNE(17,Y,2,1,"div",123),e.DNE(18,A,4,0,"div",124),e.k0s()()}if(2&s){const t=a.$implicit,i=e.XpG(4);e.R7$(2),e.Y8G("src",t.url,e.B4B)("alt",t.nombre),e.R7$(10),e.JRh(t.nombre),e.R7$(2),e.Y8G("ngIf",i.is24_7(t)),e.R7$(1),e.Y8G("ngIf",!i.is24_7(t)&&t.horarios.length>0),e.R7$(1),e.Y8G("ngIf",!i.is24_7(t)&&0===t.horarios.length),e.R7$(1),e.Y8G("ngIf",!i.is24_7(t)&&t.horarios.length>0),e.R7$(1),e.Y8G("ngIf",!i.is24_7(t)&&0===t.horarios.length)}}function L(s,a){if(1&s&&(e.j41(0,"div",105),e.DNE(1,U,19,8,"div",106),e.k0s()),2&s){const t=e.XpG(3);e.R7$(1),e.Y8G("ngForOf",t.selectedTvImages)}}function z(s,a){1&s&&(e.j41(0,"div",136),e.nrm(1,"i",137),e.j41(2,"h4",138),e.EFF(3,"No hay im\xe1genes"),e.k0s(),e.j41(4,"p",3),e.EFF(5,"Sube la primera imagen para este televisor"),e.k0s()())}function H(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",80)(1,"div",81),e.bIt("dragover",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onDragOver(n))})("dragleave",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onDragLeave(n))})("drop",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onMultipleDrop(n))}),e.DNE(2,w,11,0,"div",82),e.DNE(3,R,12,6,"div",83),e.k0s(),e.DNE(4,L,2,1,"div",84),e.DNE(5,z,6,0,"div",85),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(1),e.AVh("drag-over",t.isDragOver),e.R7$(1),e.Y8G("ngIf",0===t.selectedFiles.length),e.R7$(1),e.Y8G("ngIf",t.selectedFiles.length>0),e.R7$(1),e.Y8G("ngIf",t.selectedTvImages.length>0),e.R7$(1),e.Y8G("ngIf",0===t.selectedTvImages.length&&0===t.selectedFiles.length)}}function J(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",166)(1,"input",167),e.bIt("change",function(){const o=e.eBV(t).$implicit,l=e.XpG(3);return e.Njj(l.onDayChange(o))}),e.k0s(),e.j41(2,"label",168),e.EFF(3),e.k0s()()}if(2&s){const t=a.$implicit,i=e.XpG(3);e.R7$(1),e.Y8G("id","day-"+t.value)("checked",i.selectedDays.includes(t.value)),e.R7$(1),e.Y8G("for","day-"+t.value),e.R7$(1),e.SpI(" ",t.label," ")}}function q(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",169),e.nrm(1,"i",170),e.j41(2,"div",171)(3,"strong"),e.EFF(4,"Opci\xf3n 24/7 disponible"),e.k0s(),e.nrm(5,"br"),e.j41(6,"small"),e.EFF(7,"No has seleccionado d\xedas espec\xedficos. Puedes configurar esta imagen para mostrarse las 24 horas, los 7 d\xedas de la semana."),e.k0s()(),e.j41(8,"button",172),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.configurar24_7())}),e.nrm(9,"i",126),e.EFF(10," Configurar 24/7 "),e.k0s()()}}function W(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",139)(1,"div",140)(2,"button",141),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.backToImages())}),e.nrm(3,"i",142),e.k0s(),e.j41(4,"div")(5,"h4",143),e.EFF(6,"Programar Imagen"),e.k0s(),e.j41(7,"small",3),e.EFF(8),e.k0s()()(),e.j41(9,"div",144)(10,"strong"),e.EFF(11,"DEBUG INFO:"),e.k0s(),e.nrm(12,"br"),e.EFF(13),e.nrm(14,"br"),e.EFF(15),e.nrm(16,"br"),e.EFF(17),e.nrm(18,"br"),e.EFF(19),e.nrm(20,"br"),e.EFF(21),e.nrm(22,"br"),e.EFF(23),e.nrm(24,"br"),e.EFF(25),e.nI1(26,"json"),e.nrm(27,"br"),e.EFF(28),e.nI1(29,"json"),e.nrm(30,"br"),e.EFF(31),e.nI1(32,"json"),e.nrm(33,"br"),e.j41(34,"strong"),e.EFF(35),e.nI1(36,"json"),e.k0s(),e.nrm(37,"br"),e.j41(38,"strong"),e.EFF(39),e.nI1(40,"json"),e.k0s()(),e.j41(41,"form",26),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.addScheduleToImage())}),e.j41(42,"div",145)(43,"div",146)(44,"label",147),e.EFF(45,"Hora de inicio"),e.k0s(),e.nrm(46,"input",148),e.k0s(),e.j41(47,"div",146)(48,"label",147),e.EFF(49,"Hora de fin"),e.k0s(),e.nrm(50,"input",149),e.k0s()(),e.j41(51,"div",150)(52,"label",147),e.EFF(53,"D\xedas de la semana"),e.k0s(),e.j41(54,"div",151)(55,"button",152),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.selectAllDays())}),e.nrm(56,"i",153),e.EFF(57," Todos "),e.k0s(),e.j41(58,"button",152),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.selectWeekdays())}),e.nrm(59,"i",154),e.EFF(60," L-V "),e.k0s(),e.j41(61,"button",152),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.selectWeekends())}),e.nrm(62,"i",155),e.EFF(63," S-D "),e.k0s(),e.j41(64,"button",156),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearDays())}),e.nrm(65,"i",157),e.EFF(66," Ninguno "),e.k0s()(),e.j41(67,"div",158),e.DNE(68,J,4,4,"div",159),e.k0s()(),e.DNE(69,q,11,0,"div",160),e.j41(70,"div",161)(71,"button",162),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.backToImages())}),e.nrm(72,"i",163),e.EFF(73," Volver "),e.k0s(),e.j41(74,"button",164),e.nrm(75,"i",165),e.EFF(76," Guardar Horario "),e.k0s()()()()}if(2&s){const t=e.XpG(2);let i,n,o,l,c,u;e.R7$(8),e.JRh(null==t.selectedImage?null:t.selectedImage.nombre),e.R7$(5),e.SpI(" Modal Step: ",t.currentModalStep,""),e.R7$(2),e.SpI(" Selected Image: ",(null==t.selectedImage?null:t.selectedImage.nombre)||"None",""),e.R7$(2),e.SpI(" Form Valid: ",t.scheduleForm.valid,""),e.R7$(2),e.SpI(" Selected Days: ",t.selectedDays.length,""),e.R7$(2),e.SpI(" Hora Inicio: ",(null==(i=t.scheduleForm.get("horaInicio"))?null:i.value)||"Empty",""),e.R7$(2),e.SpI(" Hora Fin: ",(null==(n=t.scheduleForm.get("horaFin"))?null:n.value)||"Empty",""),e.R7$(2),e.SpI(" Form Errors: ",e.bMT(26,16,t.scheduleForm.errors),""),e.R7$(3),e.SpI(" Hora Inicio Errors: ",e.bMT(29,18,null==(o=t.scheduleForm.get("horaInicio"))?null:o.errors),""),e.R7$(3),e.SpI(" Hora Fin Errors: ",e.bMT(32,20,null==(l=t.scheduleForm.get("horaFin"))?null:l.errors),""),e.R7$(4),e.SpI("Dias Form Field Value: ",e.bMT(36,22,null==(c=t.scheduleForm.get("dias"))?null:c.value),""),e.R7$(4),e.SpI("Dias Form Field Errors: ",e.bMT(40,24,null==(u=t.scheduleForm.get("dias"))?null:u.errors),""),e.R7$(2),e.Y8G("formGroup",t.scheduleForm),e.R7$(27),e.Y8G("ngForOf",t.diasSemana),e.R7$(1),e.Y8G("ngIf",t.noDaysSelected),e.R7$(5),e.Y8G("disabled",!t.scheduleForm.valid||0===t.selectedDays.length)}}function K(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",69),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeImageModal())}),e.j41(1,"div",70),e.bIt("click",function(n){return n.stopPropagation()}),e.j41(2,"div",22)(3,"h3"),e.EFF(4),e.k0s(),e.j41(5,"button",71),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeImageModal())}),e.nrm(6,"i",72),e.k0s()(),e.j41(7,"div",25)(8,"div",73)(9,"button",74),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.currentModalStep="images")}),e.nrm(10,"i",75),e.EFF(11," Im\xe1genes Actuales "),e.k0s(),e.j41(12,"button",74),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.currentModalStep="schedule")}),e.nrm(13,"i",76),e.EFF(14," Programar "),e.k0s()(),e.j41(15,"div",77),e.DNE(16,H,6,6,"div",78),e.DNE(17,W,77,26,"div",79),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(4),e.SpI("Gesti\xf3n de Im\xe1genes - ",null==t.selectedTv?null:t.selectedTv.nombre,""),e.R7$(5),e.AVh("active","images"===t.currentModalStep),e.R7$(3),e.AVh("active","schedule"===t.currentModalStep),e.R7$(3),e.Y8G("ngSwitch",t.currentModalStep),e.R7$(1),e.Y8G("ngSwitchCase","images"),e.R7$(1),e.Y8G("ngSwitchCase","schedule")}}let h=(()=>{class s{get totalTvs(){return this.filteredTvs.length}get activeTvs(){return this.filteredTvs.filter(t=>"Activo"===t.estado).length}get onlineTvs(){return this.filteredTvs.filter(t=>"En_linea"===t.estado).length}constructor(t,i,n,o,l,c,u){this.formBuilder=t,this.route=i,this.router=n,this.location=o,this.televisorService=l,this.clienteService=c,this.imagenService=u,this.showNewTvModal=!1,this.showAssignModal=!1,this.allTvs=[],this.filteredTvs=[],this.clientes=[],this.clientesDisponibles=[],this.searchTerm="",this.selectedFilter="todos",this.clienteId=null,this.clienteNombre="",this.pageTitle="",this.pageSubtitle="",this.emptyStateMessage="",this.showImageModal=!1,this.selectedTv=null,this.selectedTvImages=[],this.isDragOver=!1,this.editingImage=null,this.currentModalStep="images",this.showScheduleModal=!1,this.selectedImage=null,this.selectedDays=[],this.selectedFiles=[],this.uploadProgress=0,this.isUploading=!1,this.diasSemana=[{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Mi\xe9rcoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"S\xe1bado"},{value:0,label:"Domingo"}],this.initializeForm()}ngOnInit(){this.route.queryParams.subscribe(t=>{this.clienteId=t.clienteId?t.clienteId.toString():null,this.clienteId?this.clienteService.getClienteById(this.clienteId).subscribe(i=>{i?(this.clienteNombre=i.nombre,this.setupPageContent(),this.loadTelevisores()):this.router.navigate(["/private/televisores"])}):(this.setupPageContent(),this.loadTelevisores())})}initializeForm(){this.newTvForm=this.formBuilder.group({nombre:["",[r.k0.required,r.k0.minLength(2)]],ubicacion:["",r.k0.required],resolucion:["1920x1080",r.k0.required],clienteId:["",this.clienteId?[]:[r.k0.required]],activo:[!0]}),this.scheduleForm=this.formBuilder.group({horaInicio:["",r.k0.required],horaFin:["",r.k0.required],dias:[[],r.k0.required]})}openNewTvModal(){this.initializeForm(),this.clienteId||this.loadClientes(),new bootstrap.Modal(document.getElementById("newTvModal")).show()}onSubmit(){if(this.newTvForm.valid){const t=this.newTvForm.value;console.log("=== DEBUG onSubmit ==="),console.log("formValue:",t),console.log("formValue.clienteId:",t.clienteId),console.log("this.clienteId:",this.clienteId),console.log("this.clienteNombre:",this.clienteNombre),console.log("clientesDisponibles:",this.clientesDisponibles);const i=this.clienteId||t.clienteId;let n=this.clienteNombre;if(!n&&t.clienteId){const l=this.clientesDisponibles.find(c=>c.id===t.clienteId);n=l?l.nombre:"",console.log("clienteSeleccionado:",l)}console.log("clienteIdToUse:",i),console.log("clienteNombreToUse:",n),this.televisorService.createTelevisor({nombre:t.nombre,ubicacion:t.ubicacion,clienteId:i,clienteNombre:n||"",activo:t.activo,estado:"Activo",configuracion:{resolucion:t.resolucion,orientacion:"horizontal",tiempoTransicion:5e3}}).then(()=>{const l=document.getElementById("newTvModal");bootstrap.Modal.getInstance(l)?.hide(),this.loadTelevisores()}).catch(l=>{console.error("Error creating TV:",l)})}}loadClientes(){this.clienteService.getClientes().subscribe(t=>{this.clientesDisponibles=t},t=>{console.error("Error loading clients:",t)})}setupPageContent(){if(this.clienteId){const t=this.allTvs.find(i=>i.clienteId===this.clienteId);this.clienteNombre=t?t.clienteNombre:"Cliente",this.pageTitle=`TVs de ${this.clienteNombre}`,this.pageSubtitle=`Gestiona los televisores de ${this.clienteNombre}`,this.emptyStateMessage=`No se encontraron televisores para ${this.clienteNombre}`}else this.pageTitle="Televisores",this.pageSubtitle="",this.clienteNombre="",this.emptyStateMessage="No se encontraron televisores en el sistema"}loadTelevisores(){this.clienteId?this.televisorService.getTelevisoresByCliente(this.clienteId).subscribe({next:t=>{this.allTvs=t.map(i=>this.mapToTelevisorLocal(i)),this.loadImageCountsForTvs(),this.filterTvsByClient()},error:t=>console.error("Error loading TVs:",t)}):this.televisorService.getTelevisores().subscribe({next:t=>{this.allTvs=t.map(i=>this.mapToTelevisorLocal(i)),this.loadImageCountsForTvs(),this.applyFilters()},error:t=>console.error("Error loading TVs:",t)})}loadImageCountsForTvs(){this.allTvs.forEach(t=>{this.imagenService.getImagenesByTelevisor(t.id).subscribe({next:i=>{t.imagenes=i.length},error:i=>{console.error(`Error loading images for TV ${t.id}:`,i),t.imagenes=0}})})}mapToTelevisorLocal(t){return{id:t.id,nombre:t.nombre,ubicacion:t.ubicacion,resolucion:t.configuracion.resolucion,estado:t.estado,imagenes:t.imagenes||0,clienteId:t.clienteId,clienteNombre:t.clienteNombre||"",activo:t.activo,fechaCreacion:t.fechaCreacion}}filterTvsByClient(){this.filteredTvs=this.clienteId?this.allTvs.filter(t=>t.clienteId===this.clienteId):[...this.allTvs],this.applyFilters()}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}applyFilters(){let t=this.clienteId?this.allTvs.filter(i=>i.clienteId===this.clienteId):[...this.allTvs];if(this.searchTerm.trim()){const i=this.searchTerm.toLowerCase();t=t.filter(n=>n.nombre.toLowerCase().includes(i)||n.ubicacion.toLowerCase().includes(i)||n.resolucion.toLowerCase().includes(i)||n.clienteNombre.toLowerCase().includes(i))}if("todos"!==this.selectedFilter)switch(this.selectedFilter){case"activo":t=t.filter(i=>"Activo"===i.estado);break;case"desconectado":t=t.filter(i=>"Desconectado"===i.estado);break;case"en_linea":t=t.filter(i=>"En_linea"===i.estado)}this.filteredTvs=t}goBack(){this.location.back()}openImageModal(t){console.log("\u{1f525} openImageModal() llamado con TV:",t.nombre,"- Estado antes:",this.showImageModal),this.selectedTv=t,this.loadTvImages(t.id),this.showImageModal=!0,console.log("\u{1f525} openImageModal() - Estado despu\xe9s:",this.showImageModal),this.currentModalStep="images"}get televisoresSinAsignar(){return this.allTvs.filter(t=>!t.clienteId)}openAssignModal(){console.log("\u{1f525} openAssignModal() llamado - Estado antes:",this.showAssignModal),this.showAssignModal=!0,console.log("\u{1f525} openAssignModal() - Estado despu\xe9s:",this.showAssignModal)}closeAssignModal(){this.showAssignModal=!1}asignarTelevisor(t){const i=this.allTvs.find(n=>n.id===t);i&&this.clienteId&&(i.clienteId=this.clienteId,i.clienteNombre=this.clienteNombre||"",this.filterTvsByClient(),this.closeAssignModal())}closeImageModal(){this.showImageModal=!1,this.selectedTv=null,this.selectedTvImages=[],this.editingImage=null}loadTvImages(t){t&&this.imagenService.getImagenesByTelevisor(t).subscribe({next:i=>{this.selectedTvImages=i},error:i=>{console.error("Error al cargar im\xe1genes:",i),this.loadTestImages()}})}loadTestImages(){const t="https://firebasestorage.googleapis.com/v0/b/tv-menu-97213.firebasestorage.app/o/TVMenuImages%2FNatureBlz-Timestamp(seconds%3D1730862614%2C%20nanoseconds%3D962893000)?alt=media&token=6e79c3b8-3900-4b34-ac20-8b621c1d44d6";this.selectedTvImages=[{id:"1",nombre:"Men\xfa Desayuno - Naturaleza",url:t,televisorId:this.selectedTv?.id||"",clienteId:this.selectedTv?.clienteId||void 0,horarios:[{id:"1",horaInicio:"06:00",horaFin:"10:00",dias:[{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Mi\xe9rcoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"}]}],fechaCreacion:new Date("2025-01-15T10:30:00")},{id:"2",nombre:"Men\xfa Almuerzo - Naturaleza",url:t,televisorId:this.selectedTv?.id||"",clienteId:this.selectedTv?.clienteId||void 0,horarios:[{id:"2",horaInicio:"12:00",horaFin:"16:00",dias:[{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Mi\xe9rcoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"S\xe1bado"},{value:0,label:"Domingo"}]}],fechaCreacion:new Date("2025-01-15T11:15:00")},{id:"3",nombre:"Men\xfa Cena - Naturaleza",url:t,televisorId:this.selectedTv?.id||"",clienteId:this.selectedTv?.clienteId||void 0,horarios:[{id:"3",horaInicio:"18:00",horaFin:"22:00",dias:[{value:6,label:"S\xe1bado"},{value:0,label:"Domingo"}]}],fechaCreacion:new Date("2025-01-15T12:00:00")},{id:"4",nombre:"Promociones Especiales",url:t,televisorId:this.selectedTv?.id||"",clienteId:this.selectedTv?.clienteId||void 0,horarios:[],fechaCreacion:new Date("2025-01-15T14:30:00")},{id:"5",nombre:"Men\xfa Bebidas - Naturaleza",url:t,televisorId:this.selectedTv?.id||"",clienteId:this.selectedTv?.clienteId||void 0,horarios:[{id:"4",horaInicio:"10:00",horaFin:"23:00",dias:[{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Mi\xe9rcoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"S\xe1bado"},{value:0,label:"Domingo"}]}],fechaCreacion:new Date("2025-01-15T15:45:00")}]}onDragOver(t){t.preventDefault(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),this.isDragOver=!1}onDrop(t){t.preventDefault(),this.isDragOver=!1;const i=t.dataTransfer?.files;i&&this.handleFiles(i)}onFileSelect(t){const i=t.target.files;i&&this.handleFiles(i)}handleFiles(t){for(let i=0;i<t.length;i++){const n=t[i];n.type.startsWith("image/")&&this.addNewImage(n)}}addNewImage(t){this.selectedTv&&this.imagenService.uploadImagen(t,this.selectedTv.id,t.name.split(".")[0],this.selectedTv.clienteId||void 0).subscribe({next:i=>{console.log("Imagen subida exitosamente:",i),this.selectedTvImages.push(i),this.updateTvImageCount(this.selectedTv.id)},error:i=>{console.error("Error al subir imagen:",i)}})}editImage(t){this.editingImage={...t}}deleteImage(t){if(confirm("\xbfEst\xe1s seguro de que quieres eliminar esta imagen?")){const i=this.selectedTvImages.find(n=>n.id===t);if(!i)return;this.imagenService.deleteImagen(i).subscribe({next:()=>{console.log("Imagen eliminada exitosamente"),this.selectedTvImages=this.selectedTvImages.filter(n=>n.id!==t),this.selectedTv&&this.updateTvImageCount(this.selectedTv.id)},error:n=>{console.error("Error al eliminar imagen:",n),this.selectedTvImages=this.selectedTvImages.filter(o=>o.id!==t),this.selectedTv&&this.updateTvImageCount(this.selectedTv.id)}})}}saveImageChanges(){if(this.editingImage){const t=this.selectedTvImages.findIndex(i=>i.id===this.editingImage.id);-1!==t&&(this.selectedTvImages[t]={...this.editingImage}),this.editingImage=null}}cancelImageEdit(){this.editingImage=null}openScheduleModal(t){console.log("openScheduleModal called with image:",t),this.selectedImage=t,this.selectedDays=[],this.scheduleForm.reset(),this.scheduleForm.patchValue({dias:[]}),this.currentModalStep="schedule",console.log("Modal step changed to:",this.currentModalStep),console.log("Selected image:",this.selectedImage)}closeScheduleModal(){this.selectedImage=null,this.selectedDays=[],this.scheduleForm.reset(),this.currentModalStep="images"}backToImages(){this.currentModalStep="images",this.selectedImage=null,this.selectedDays=[],this.scheduleForm.reset()}skipScheduling(){this.selectedImage&&console.log(`Imagen "${this.selectedImage.nombre}" configurada para mostrarse 24/7`),this.backToImages()}onDayToggle(t){const i=this.scheduleForm.get("dias")?.value||[],n=i.findIndex(o=>o.value===t.value);n>-1?i.splice(n,1):i.push(t),this.scheduleForm.patchValue({dias:i})}isDaySelected(t){return(this.scheduleForm.get("dias")?.value||[]).some(n=>n.value===t.value)}getDaysText(t){return 7===t.length?"Todos los d\xedas":5!==t.length||t.some(i=>0===i.value||6===i.value)?2===t.length&&t.some(i=>0===i.value)&&t.some(i=>6===i.value)?"Fines de semana":t.map(i=>i.label).join(", "):"Lunes a Viernes"}addScheduleToImage(){if(this.scheduleForm.valid&&this.selectedImage){const t=this.scheduleForm.value,i=this.getSelectedDaysAsObjects();if(i.length>0){const n={id:Date.now().toString(),horaInicio:t.horaInicio,horaFin:t.horaFin,dias:i};this.imagenService.agregarHorario(this.selectedImage.id,{horaInicio:t.horaInicio,horaFin:t.horaFin,dias:i}).subscribe({next:()=>{console.log("Horario agregado exitosamente"),this.selectedImage.horarios.push(n),this.backToImages()},error:o=>{console.error("Error al agregar horario:",o),this.selectedImage.horarios.push(n),this.backToImages()}})}else this.backToImages()}}removeSchedule(t,i){confirm("\xbfEst\xe1s seguro de que quieres eliminar este horario?")&&this.imagenService.eliminarHorario(t.id,i).subscribe({next:()=>{console.log("Horario eliminado exitosamente"),t.horarios=t.horarios.filter(n=>n.id!==i)},error:n=>{console.error("Error al eliminar horario:",n),t.horarios=t.horarios.filter(o=>o.id!==i)}})}onDayChange(t){const i=this.selectedDays.indexOf(t.value);i>-1?this.selectedDays.splice(i,1):this.selectedDays.push(t.value),this.updateFormDays()}updateFormDays(){const t=this.getSelectedDaysAsObjects();this.scheduleForm.patchValue({dias:t})}getSelectedDaysAsObjects(){return this.diasSemana.filter(t=>this.selectedDays.includes(t.value))}selectAllDays(){this.selectedDays=[0,1,2,3,4,5,6],this.updateFormDays()}selectWeekdays(){this.selectedDays=[1,2,3,4,5],this.updateFormDays()}selectWeekends(){this.selectedDays=[0,6],this.updateFormDays()}clearDays(){this.selectedDays=[],this.updateFormDays()}onMultipleFileSelect(t){const i=t.target.files;i&&i.length>0&&(this.selectedFiles=Array.from(i),console.log("\u{1f525} Archivos seleccionados:",this.selectedFiles.length))}onMultipleDrop(t){t.preventDefault(),this.isDragOver=!1;const i=t.dataTransfer?.files;i&&i.length>0&&(this.selectedFiles=Array.from(i),console.log("\u{1f525} Archivos arrastrados:",this.selectedFiles.length))}removeSelectedFile(t){this.selectedFiles.splice(t,1)}uploadMultipleImages(){if(0===this.selectedFiles.length||!this.selectedTv)return;this.isUploading=!0,this.uploadProgress=0;const t=this.selectedFiles.length;let i=0;this.selectedFiles.forEach((n,o)=>{this.imagenService.uploadImagen(n,this.selectedTv.id,n.name.replace(/\.[^/.]+$/,""),this.selectedTv.clienteId||void 0).subscribe({next:l=>{console.log(`Imagen ${o+1} subida exitosamente:`,l),this.selectedTvImages.push(l),i++,this.uploadProgress=Math.round(i/t*100),i===t&&(this.isUploading=!1,this.selectedFiles=[],this.updateTvImageCount(this.selectedTv.id))},error:l=>{console.error(`Error al subir imagen ${o+1}:`,l),i++,this.uploadProgress=Math.round(i/t*100),i===t&&(this.isUploading=!1,this.selectedFiles=[],this.updateTvImageCount(this.selectedTv.id))}})})}updateTvImageCount(t){const i=this.allTvs.find(n=>n.id===t);i&&this.imagenService.getImagenesByTelevisor(t).subscribe({next:n=>{i.imagenes=n.length},error:n=>{console.error(`Error updating image count for TV ${t}:`,n)}})}programarImagen(t){this.selectedImage=t,this.selectedDays=[],this.scheduleForm.reset(),this.currentModalStep="schedule"}is24_7(t){return 0===t.horarios.length}setTo24_7(t){confirm("\xbfConfigurar esta imagen para mostrarse 24/7? Esto eliminar\xe1 todos los horarios programados.")&&(t.horarios=[],console.log("Imagen configurada para 24/7:",t.nombre))}configurar24_7(){this.selectedImage&&confirm("\xbfConfigurar esta imagen para mostrarse 24/7? Esto eliminar\xe1 todos los horarios programados y cerrar\xe1 el modal.")&&(this.selectedImage.horarios=[],console.log("Imagen configurada para 24/7 desde formulario:",this.selectedImage.nombre),this.backToImages())}get noDaysSelected(){return 0===this.selectedDays.length}getScheduleSummary(t){if(0===t.horarios.length)return"24/7 - Siempre visible";if(1===t.horarios.length){const i=t.horarios[0];return`${this.getDaysText(i.dias)}: ${i.horaInicio} - ${i.horaFin}`}return`${t.horarios.length} horarios programados`}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(r.ok),e.rXU(m.nX),e.rXU(m.Ix),e.rXU(g.aZ),e.rXU(p.N),e.rXU(b.M),e.rXU(f.D))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-televisores"]],decls:73,vars:12,consts:[[1,"container","py-4"],[1,"header","mb-4"],[1,"mb-2"],[1,"text-muted"],[1,"row","mb-3"],[1,"col"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Buscar televisores...",1,"form-control"],[1,"col-auto"],[1,"form-select"],["selected",""],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"stats-bar"],[1,"me-3"],[1,"badge","bg-primary","me-3"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-2"],["id","newTvModal","tabindex","-1","aria-labelledby","newTvModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","newTvModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Pantalla Principal",1,"form-control"],["class","text-danger",4,"ngIf"],["class","mb-3",4,"ngIf"],["for","ubicacion",1,"form-label"],["type","text","id","ubicacion","formControlName","ubicacion","placeholder","Ej: Entrada principal",1,"form-control"],["for","resolucion",1,"form-label"],["id","resolucion","formControlName","resolucion",1,"form-select"],["value",""],["value","1920x1080"],["value","3840x2160"],["value","7680x4320"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","text-center py-5",4,"ngIf"],["class","row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4",4,"ngIf"],["class","image-modal",3,"click",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],["for","cliente",1,"form-label"],["id","cliente","formControlName","clienteId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-center","py-5"],[1,"bi","bi-tv","display-1","text-muted","mb-3"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"card","h-100"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"d-flex","align-items-center"],[1,"bi","bi-tv","me-2"],[1,"card-title","mb-0"],[1,"badge",3,"ngClass"],[1,"btn","btn-link","p-0","ms-2"],[1,"bi","bi-gear"],[1,"bi","bi-geo-alt","me-1"],[1,"d-flex","justify-content-between","align-items-center","border-top","pt-3"],[1,"bi","bi-images","me-1"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"image-modal",3,"click"],[1,"modal-container",3,"click"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"step-navigation","mb-4"],[1,"btn","step-btn",3,"click"],[1,"bi","bi-images","me-2"],[1,"bi","bi-calendar","me-2"],[3,"ngSwitch"],["class","images-step",4,"ngSwitchCase"],["class","schedule-step",4,"ngSwitchCase"],[1,"images-step"],[1,"upload-section","mb-4",3,"dragover","dragleave","drop"],["class","upload-area text-center p-4",4,"ngIf"],["class","selected-files",4,"ngIf"],["class","images-grid",4,"ngIf"],["class","empty-state text-center py-5",4,"ngIf"],[1,"upload-area","text-center","p-4"],[1,"bi","bi-cloud-upload","display-4","text-muted","mb-3"],["type","file","multiple","","accept","image/*",1,"d-none",3,"change"],["fileInput",""],[1,"selected-files"],[1,"files-grid"],["class","file-preview",4,"ngFor","ngForOf"],[1,"upload-actions","mt-3"],[1,"btn","btn-success","me-2",3,"disabled","click"],[1,"bi","bi-upload","me-2"],[1,"btn","btn-secondary",3,"disabled","click"],["class","progress mt-3",4,"ngIf"],[1,"file-preview"],[1,"file-info"],[1,"bi","bi-image","me-2"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"bi","bi-x"],[1,"progress","mt-3"],["role","progressbar",1,"progress-bar"],[1,"images-grid"],["class","image-card",4,"ngFor","ngForOf"],[1,"image-card"],[1,"image-container"],[1,"image-preview",3,"src","alt"],[1,"image-overlay"],["title","Programar horarios",1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"bi","bi-clock"],["title","Editar",1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"bi","bi-pencil"],["title","Eliminar",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"image-info"],[1,"image-title"],[1,"schedule-summary","mb-2"],["class","badge bg-success",4,"ngIf"],["class","badge bg-info",4,"ngIf"],["class","badge bg-warning text-dark",4,"ngIf"],["class","schedules-list",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"badge","bg-success"],[1,"fas","fa-infinity","me-1"],[1,"badge","bg-info"],[1,"fas","fa-clock","me-1"],[1,"badge","bg-warning","text-dark"],[1,"fas","fa-exclamation-triangle","me-1"],[1,"schedules-list"],["class","schedule-item",4,"ngFor","ngForOf"],[1,"schedule-item"],["type","button","title","Eliminar horario",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-info-circle","me-1"],[1,"empty-state","text-center","py-5"],[1,"bi","bi-images","display-1","text-muted"],[1,"mt-3"],[1,"schedule-step"],[1,"d-flex","align-items-center","mb-4"],[1,"btn","btn-outline-secondary","me-3",3,"click"],[1,"bi","bi-arrow-left"],[1,"mb-0"],[1,"alert","alert-warning","mb-3"],[1,"row","mb-4"],[1,"col-md-6"],[1,"form-label"],["type","time","formControlName","horaInicio",1,"form-control"],["type","time","formControlName","horaFin",1,"form-control"],[1,"days-section","mb-4"],[1,"quick-select-buttons","mb-3"],["type","button",1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"bi","bi-calendar-week","me-1"],[1,"bi","bi-calendar-day","me-1"],[1,"bi","bi-calendar2-week","me-1"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"days-grid"],["class","day-checkbox",4,"ngFor","ngForOf"],["class","alert alert-info d-flex align-items-center mb-3",4,"ngIf"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-arrow-left","me-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bi","bi-check-circle","me-2"],[1,"day-checkbox"],["type","checkbox",1,"form-check-input",3,"id","checked","change"],[1,"form-check-label",3,"for"],[1,"alert","alert-info","d-flex","align-items-center","mb-3"],[1,"fas","fa-clock","me-2"],[1,"flex-grow-1"],["type","button",1,"btn","btn-success","btn-sm","ms-2",3,"click"]],template:function(i,n){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3,"Todos los Televisores"),e.k0s(),e.j41(4,"p",3),e.EFF(5,"Gestiona todos los televisores del sistema"),e.k0s(),e.j41(6,"div",4)(7,"div",5)(8,"div",6)(9,"span",7),e.nrm(10,"i",8),e.k0s(),e.nrm(11,"input",9),e.k0s()(),e.j41(12,"div",10)(13,"select",11)(14,"option",12),e.EFF(15,"Todos"),e.k0s(),e.j41(16,"option"),e.EFF(17,"Activos"),e.k0s(),e.j41(18,"option"),e.EFF(19,"Inactivos"),e.k0s()()()(),e.j41(20,"div",13)(21,"div",14)(22,"span",15),e.EFF(23),e.k0s(),e.j41(24,"span",16),e.EFF(25),e.k0s(),e.j41(26,"span"),e.EFF(27),e.k0s()(),e.j41(28,"button",17),e.bIt("click",function(){return n.openNewTvModal()}),e.nrm(29,"i",18),e.EFF(30," Nuevo Televisor "),e.k0s()()(),e.j41(31,"div",19)(32,"div",20)(33,"div",21)(34,"div",22)(35,"h5",23),e.EFF(36,"Nuevo Televisor"),e.k0s(),e.nrm(37,"button",24),e.k0s(),e.j41(38,"div",25)(39,"form",26),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(40,"div",27)(41,"label",28),e.EFF(42,"Nombre"),e.k0s(),e.nrm(43,"input",29),e.DNE(44,F,2,1,"div",30),e.k0s(),e.DNE(45,C,8,2,"div",31),e.j41(46,"div",27)(47,"label",32),e.EFF(48,"Ubicaci\xf3n"),e.k0s(),e.nrm(49,"input",33),e.DNE(50,O,2,1,"div",30),e.k0s(),e.j41(51,"div",27)(52,"label",34),e.EFF(53,"Resoluci\xf3n"),e.k0s(),e.j41(54,"select",35)(55,"option",36),e.EFF(56,"Seleccionar resoluci\xf3n"),e.k0s(),e.j41(57,"option",37),e.EFF(58,"1920\xd71080 (Full HD)"),e.k0s(),e.j41(59,"option",38),e.EFF(60,"3840\xd72160 (4K)"),e.k0s(),e.j41(61,"option",39),e.EFF(62,"7680\xd74320 (8K)"),e.k0s()(),e.DNE(63,y,2,1,"div",30),e.k0s()()(),e.j41(64,"div",40)(65,"button",41),e.EFF(66,"Cancelar"),e.k0s(),e.j41(67,"button",42),e.bIt("click",function(){return n.onSubmit()}),e.nrm(68,"i",18),e.EFF(69," Crear Televisor "),e.k0s()()()()(),e.DNE(70,j,6,1,"div",43),e.DNE(71,S,2,1,"div",44),e.DNE(72,K,18,8,"div",45),e.k0s()),2&i){let o,l,c;e.R7$(23),e.SpI("Total: ",n.totalTvs,""),e.R7$(2),e.SpI("Activos: ",n.activeTvs,""),e.R7$(2),e.SpI("En l\xednea: ",n.onlineTvs,""),e.R7$(12),e.Y8G("formGroup",n.newTvForm),e.R7$(5),e.Y8G("ngIf",(null==(o=n.newTvForm.get("nombre"))?null:o.invalid)&&(null==(o=n.newTvForm.get("nombre"))?null:o.touched)),e.R7$(1),e.Y8G("ngIf",!n.clienteId),e.R7$(5),e.Y8G("ngIf",(null==(l=n.newTvForm.get("ubicacion"))?null:l.invalid)&&(null==(l=n.newTvForm.get("ubicacion"))?null:l.touched)),e.R7$(13),e.Y8G("ngIf",(null==(c=n.newTvForm.get("resolucion"))?null:c.invalid)&&(null==(c=n.newTvForm.get("resolucion"))?null:c.touched)),e.R7$(4),e.Y8G("disabled",n.newTvForm.invalid),e.R7$(3),e.Y8G("ngIf",0===n.filteredTvs.length),e.R7$(1),e.Y8G("ngIf",n.filteredTvs.length>0),e.R7$(1),e.Y8G("ngIf",n.showImageModal)}},dependencies:[g.YU,g.Sq,g.bT,g.ux,g.e1,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD,g.TG,g.QX],styles:[".image-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1050;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 20px 40px #00000026;max-width:900px;width:95%;max-height:90vh;overflow:hidden;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e9ecef;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:600}.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1);opacity:.8}.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1}.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem;max-height:calc(90vh - 140px);overflow-y:auto}.upload-section[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:8px;background:#f8f9fa;transition:all .3s ease}.upload-section[_ngcontent-%COMP%]   .upload-area.drag-over[_ngcontent-%COMP%]{border-color:#007bff;background:#e3f2fd;transform:scale(1.02)}.upload-section[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]:hover{border-color:#6c757d}.upload-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-grid[_ngcontent-%COMP%]{display:grid;gap:.5rem;margin:1rem 0}.upload-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem;background:#f8f9fa;border-radius:6px;border:1px solid #dee2e6}.upload-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:.9rem;margin-left:.5rem}.upload-section[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:8px;border-radius:4px;overflow:hidden}.upload-section[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#28a745,#20c997);transition:width .3s ease}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;margin-top:1.5rem}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:12px;overflow:hidden;background:white;box-shadow:0 2px 8px #00000014;transition:all .3s ease}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;transition:transform .3s ease}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:flex;gap:4px;opacity:0;transition:opacity .3s ease}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:rgba(255,255,255,.9);border:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:rgba(0,123,255,.9);color:#fff}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .btn.btn-warning[_ngcontent-%COMP%]{background:rgba(255,193,7,.9);color:#fff}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]{background:rgba(220,53,69,.9);color:#fff}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover   .image-preview[_ngcontent-%COMP%]{transform:scale(1.05)}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{padding:1rem}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:#495057}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .schedule-summary[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.4em .6em}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .schedule-summary[_ngcontent-%COMP%]   .badge.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)!important}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .schedule-summary[_ngcontent-%COMP%]   .badge.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#17a2b8,#6f42c1)!important}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .schedules-list[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem;background:#f8f9fa;border-radius:6px;margin-bottom:.5rem;border-left:3px solid #007bff}.images-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .schedules-list[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{line-height:1.3}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .quick-select-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .days-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.75rem;margin-top:1rem}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .days-grid[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem;background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;transition:all .3s ease;cursor:pointer}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .days-grid[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#007bff}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .days-grid[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem;transform:scale(1.2)}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .days-grid[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#007bff;font-weight:600}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .days-grid[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;margin:0;font-size:.9rem}.add-image-card[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:8px;display:flex;align-items:center;justify-content:center;min-height:200px;transition:all .2s ease}.add-image-card[_ngcontent-%COMP%]:hover{border-color:#007bff;background-color:#f8f9fa}.upload-area-small[_ngcontent-%COMP%]{text-align:center;padding:1rem}.upload-area-small.drag-over[_ngcontent-%COMP%]{background-color:#e3f2fd;border-color:#2196f3}.empty-state[_ngcontent-%COMP%]{color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.5}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;font-weight:500}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@media (max-width: 768px){.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]{width:98%;max-height:95vh;margin:1rem}.image-modal[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1rem}.images-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.schedule-step[_ngcontent-%COMP%]   .days-section[_ngcontent-%COMP%]   .days-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.upload-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:500}.stats-bar[_ngcontent-%COMP%]{font-size:.9rem}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;transition:box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}.card[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{font-size:1.1rem}.card[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#6c757d}.card[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#495057}.badge[_ngcontent-%COMP%]{padding:.5em .8em}"]})}}return s})();const Q=[{path:"",component:h},{path:"firebase",loadChildren:()=>d.e(265).then(d.bind(d,5265)).then(s=>s.TelevisoresFirebaseModule)},{path:":clienteId",component:h}];let Z=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(Q),m.iI]})}}return s})(),ee=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[Z,v.PrivateModule,g.MD,r.X1,r.YN]})}}return s})()}}]);