"use strict";(self.webpackChunktv_manager=self.webpackChunktv_manager||[]).push([[631],{7631:(S,b,c)=>{c.r(b),c.d(b,{DashboardPageModule:()=>z});var x=c(7970),P=c(4341),f=c(177),M=c(9559),y=c(1413),O=c(4572),v=c(6354),u=c(6977),C=c(6697),t=c(7705),_=c(4730),k=c(3787),F=c(4965);function D(e,g){if(1&e&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18),t.nrm(3,"i",19),t.k0s(),t.j41(4,"div",20)(5,"h3",21),t.EFF(6),t.k0s(),t.j41(7,"p",22),t.EFF(8,"Clientes"),t.k0s(),t.j41(9,"span",23),t.EFF(10),t.k0s()()(),t.j41(11,"div",17)(12,"div",18),t.nrm(13,"i",24),t.k0s(),t.j41(14,"div",20)(15,"h3",21),t.EFF(16),t.k0s(),t.j41(17,"p",22),t.EFF(18,"Televisores"),t.k0s(),t.j41(19,"span",25),t.EFF(20),t.k0s()()(),t.j41(21,"div",17)(22,"div",18),t.nrm(23,"i",26),t.k0s(),t.j41(24,"div",20)(25,"h3",21),t.EFF(26),t.k0s(),t.j41(27,"p",22),t.EFF(28,"Im\xe1genes"),t.k0s(),t.j41(29,"span",23),t.EFF(30),t.k0s()()()()),2&e){const n=t.XpG();t.R7$(6),t.JRh(n.statsData.clientes.total),t.R7$(4),t.SpI("",n.statsData.clientes.activos," activos"),t.R7$(6),t.JRh(n.statsData.televisores.total),t.R7$(4),t.SpI("",n.statsData.televisores.enLinea," en l\xednea"),t.R7$(6),t.JRh(n.statsData.imagenes.total),t.R7$(4),t.JRh(n.statsData.imagenes.descripcion)}}function $(e,g){1&e&&(t.j41(0,"div",28)(1,"div",18),t.nrm(2,"div",29),t.k0s(),t.j41(3,"div",20),t.nrm(4,"div",30)(5,"div",31)(6,"div",31),t.k0s()())}const R=function(){return[1,2,3]};function j(e,g){1&e&&(t.j41(0,"div",16),t.DNE(1,$,7,0,"div",27),t.k0s()),2&e&&(t.R7$(1),t.Y8G("ngForOf",t.lJ4(1,R)))}function E(e,g){if(1&e&&(t.j41(0,"div",32)(1,"div",33),t.nrm(2,"i"),t.k0s(),t.j41(3,"span",34),t.EFF(4),t.k0s()()),2&e){const n=g.$implicit;t.R7$(2),t.ZvI("bi ",n.icon,""),t.R7$(2),t.JRh(n.text)}}function T(e,g){if(1&e&&(t.j41(0,"div",35)(1,"div",36),t.nrm(2,"i"),t.k0s(),t.j41(3,"div",37)(4,"h4",38),t.EFF(5),t.k0s(),t.j41(6,"p",39),t.EFF(7),t.k0s()(),t.j41(8,"div",40)(9,"span",41),t.EFF(10),t.k0s()()()),2&e){const n=g.$implicit;t.Y8G("ngClass","activity-"+n.type),t.R7$(2),t.ZvI("bi ",n.icon,""),t.R7$(3),t.JRh(n.title),t.R7$(2),t.JRh(n.description),t.R7$(3),t.JRh(n.time)}}function I(e,g){1&e&&(t.j41(0,"div",42),t.nrm(1,"i",43),t.j41(2,"p"),t.EFF(3,"No hay actividades recientes"),t.k0s()())}const w=[{path:"",component:(()=>{class e{constructor(n,o,s){this.clienteService=n,this.televisorService=o,this.imagenService=s,this.destroy$=new y.B,this.statsData={clientes:{total:0,activos:0},televisores:{total:0,enLinea:0},imagenes:{total:0,descripcion:"Total en el sistema"}},this.loading=!0,this.quickActions=[{icon:"bi-person-plus",text:"Gestionar Clientes"},{icon:"bi-tv",text:"Ver Todos los TVs"}],this.recentActivities=[]}ngOnInit(){this.loadDashboardStats(),this.loadRecentActivities()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadDashboardStats(){this.loading=!0;const n=this.clienteService.getClientes().pipe((0,v.T)(a=>({total:a.length,activos:a.filter(r=>r.activo).length}))),o=this.televisorService.getTelevisores().pipe((0,v.T)(a=>({total:a.length,enLinea:a.filter(r=>"En_linea"===r.estado||"Activo"===r.estado).length}))),s=this.imagenService.getAllImagenes().pipe((0,v.T)(a=>({total:a.length,descripcion:"Total en el sistema"})));(0,O.z)([n,o,s]).pipe((0,u.Q)(this.destroy$)).subscribe({next:([a,r,m])=>{this.statsData={clientes:a,televisores:r,imagenes:m},this.loading=!1},error:a=>{console.error("Error loading dashboard stats:",a),this.loading=!1}})}loadRecentActivities(){const n=this.clienteService.getClientes().pipe((0,C.s)(1)),o=this.televisorService.getTelevisores().pipe((0,C.s)(1)),s=this.imagenService.getAllImagenes().pipe((0,C.s)(1));(0,O.z)([n,o,s]).pipe((0,u.Q)(this.destroy$)).subscribe({next:([a,r,m])=>{const l=[];a.filter(i=>i.fechaCreacion).sort((i,d)=>new Date(d.fechaCreacion).getTime()-new Date(i.fechaCreacion).getTime()).slice(0,2).forEach(i=>{l.push({title:"Nuevo cliente registrado",description:i.nombre,time:this.getTimeAgo(i.fechaCreacion),icon:"bi-person-plus",type:"cliente"})}),r.filter(i=>i.ultimaConexion).sort((i,d)=>new Date(d.ultimaConexion).getTime()-new Date(i.ultimaConexion).getTime()).slice(0,2).forEach(i=>{const d=a.find(p=>p.id===i.clienteId);l.push({title:"En_linea"===i.estado?"TV conectado":"TV desconectado",description:`${d?.nombre||"Cliente"} \u2022 ${i.nombre}`,time:this.getTimeAgo(i.ultimaConexion),icon:"En_linea"===i.estado?"bi-tv-fill":"bi-tv",type:"televisor"})}),m.filter(i=>i.fechaCreacion).sort((i,d)=>new Date(d.fechaCreacion).getTime()-new Date(i.fechaCreacion).getTime()).slice(0,3).forEach(i=>{const d=r.find(h=>h.id===i.televisorId),p=a.find(h=>h.id===d?.clienteId);l.push({title:"Nueva imagen subida",description:`${p?.nombre||"Cliente"} \u2022 ${i.nombre}`,time:this.getTimeAgo(i.fechaCreacion),icon:"bi-image",type:"imagen"})}),this.recentActivities=l.sort((i,d)=>this.parseTimeAgo(i.time)-this.parseTimeAgo(d.time)).slice(0,6)},error:a=>{console.error("Error loading recent activities:",a)}})}getTimeAgo(n){const o=new Date,s="string"==typeof n?new Date(n):n,a=o.getTime()-s.getTime(),r=Math.floor(a/6e4),m=Math.floor(a/36e5),l=Math.floor(a/864e5);return r<1?"Ahora":r<60?`Hace ${r} min`:m<24?`Hace ${m}h`:l<7?`Hace ${l}d`:s.toLocaleDateString()}parseTimeAgo(n){return n.includes("min")?parseInt(n.match(/\d+/)?.[0]||"0"):n.includes("h")?60*parseInt(n.match(/\d+/)?.[0]||"0"):n.includes("d")?60*parseInt(n.match(/\d+/)?.[0]||"0")*24:999999}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(_.M),t.rXU(k.N),t.rXU(F.D))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-dashboard-page"]],decls:24,vars:5,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"dashboard-title"],[1,"dashboard-subtitle"],["class","stats-grid",4,"ngIf"],[1,"main-content-grid"],[1,"quick-actions-card"],[1,"card-header"],[1,"card-title"],[1,"bi","bi-lightning-fill"],[1,"card-content"],["class","action-item",4,"ngFor","ngForOf"],[1,"recent-activity-card"],[1,"bi","bi-activity"],["class","activity-item",3,"ngClass",4,"ngFor","ngForOf"],["class","no-activities",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"bi","bi-person-fill"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-detail"],[1,"bi","bi-tv-fill"],[1,"stat-detail","stat-online"],[1,"bi","bi-image-fill"],["class","stat-card loading-card",4,"ngFor","ngForOf"],[1,"stat-card","loading-card"],[1,"loading-spinner"],[1,"loading-text"],[1,"loading-text","small"],[1,"action-item"],[1,"action-icon"],[1,"action-text"],[1,"activity-item",3,"ngClass"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-title"],[1,"activity-description"],[1,"activity-time"],[1,"time-text"],[1,"no-activities"],[1,"bi","bi-clock-history"]],template:function(o,s){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3,"Dashboard"),t.k0s(),t.j41(4,"p",3),t.EFF(5,"Vista general del sistema de gesti\xf3n de displays"),t.k0s()(),t.DNE(6,D,31,6,"div",4),t.DNE(7,j,2,2,"div",4),t.j41(8,"div",5)(9,"div",6)(10,"div",7)(11,"h2",8),t.nrm(12,"i",9),t.EFF(13," Acciones R\xe1pidas "),t.k0s()(),t.j41(14,"div",10),t.DNE(15,E,5,4,"div",11),t.k0s()(),t.j41(16,"div",12)(17,"div",7)(18,"h2",8),t.nrm(19,"i",13),t.EFF(20," Actividad Reciente "),t.k0s()(),t.j41(21,"div",10),t.DNE(22,T,11,7,"div",14),t.DNE(23,I,4,0,"div",15),t.k0s()()()()),2&o&&(t.R7$(6),t.Y8G("ngIf",!s.loading),t.R7$(1),t.Y8G("ngIf",s.loading),t.R7$(8),t.Y8G("ngForOf",s.quickActions),t.R7$(7),t.Y8G("ngForOf",s.recentActivities),t.R7$(1),t.Y8G("ngIf",0===s.recentActivities.length))},dependencies:[f.YU,f.Sq,f.bT],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;background-color:#f8fafc;min-height:100vh}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:32px}.dashboard-header[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin-bottom:8px}.dashboard-header[_ngcontent-%COMP%]   .dashboard-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#64748b;margin:0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000001a;border:1px solid #e2e8f0;display:flex;align-items:center;gap:16px;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]:nth-child(1){background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.stat-card[_ngcontent-%COMP%]:nth-child(1)   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.stat-card[_ngcontent-%COMP%]:nth-child(2)   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%)}.stat-card[_ngcontent-%COMP%]:nth-child(3)   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%)}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0 0 4px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#64748b;margin:0 0 4px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-detail[_ngcontent-%COMP%]{font-size:.75rem;color:#94a3b8}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-detail.stat-online[_ngcontent-%COMP%]{color:#10b981;font-weight:500}.main-content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}@media (max-width: 768px){.main-content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.quick-actions-card[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 1px 3px #0000001a;border:1px solid #e2e8f0;overflow:hidden}.quick-actions-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid #e2e8f0;background-color:#f8fafc}.quick-actions-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0;display:flex;align-items:center;gap:8px}.quick-actions-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6}.quick-actions-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%], .recent-activity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:24px}.action-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:8px;cursor:pointer;transition:all .2s ease;margin-bottom:8px}.action-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.action-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.action-item[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;background-color:#e0f2fe;display:flex;align-items:center;justify-content:center;color:#0284c7;font-size:18px}.action-item[_ngcontent-%COMP%]   .action-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#374151}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:16px 0;border-bottom:1px solid #f1f5f9}.activity-item[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.activity-item[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;margin-top:2px}.activity-item.activity-cliente[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0284c7}.activity-item.activity-televisor[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background-color:#fef3e2;color:#ea580c}.activity-item.activity-imagen[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background-color:#f0fdf4;color:#16a34a}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]{flex:1}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e293b;margin:0 0 4px}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-description[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;margin:0}.activity-item[_ngcontent-%COMP%]   .activity-time[_ngcontent-%COMP%]   .time-text[_ngcontent-%COMP%]{font-size:.75rem;color:#94a3b8;white-space:nowrap}.no-activities[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#94a3b8}.no-activities[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:12px;display:block}.no-activities[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:16px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.stat-card[_ngcontent-%COMP%]{padding:20px}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:1.5rem}}.loading-card[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.loading-spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid #e2e8f0;border-top:2px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{height:16px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite;border-radius:4px;margin-bottom:8px}.loading-text.small[_ngcontent-%COMP%]{height:12px;width:60%}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}"]})}}return e})()}];let A=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[M.iI.forChild(w),M.iI]})}}return e})(),z=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[A,x.PrivateModule,f.MD,P.X1,P.YN]})}}return e})()}}]);